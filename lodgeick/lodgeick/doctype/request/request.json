{
 "actions": [],
 "allow_rename": 0,
 "autoname": "field:request_number",
 "creation": "2025-11-05 19:00:00",
 "doctype": "DocType",
 "document_type": "Document",
 "engine": "InnoDB",
 "field_order": [
  "request_number",
  "request_type",
  "council",
  "request_category",
  "status",
  "priority",
  "column_break_1",
  "workflow_state",
  "is_overdue",
  "section_break_applicant",
  "applicant",
  "applicant_name",
  "applicant_email",
  "applicant_phone",
  "applicant_type",
  "acting_on_behalf",
  "column_break_2",
  "agent",
  "agent_name",
  "agent_email",
  "agent_phone",
  "organization",
  "section_break_owner",
  "applicant_is_not_owner",
  "owner_name",
  "owner_email",
  "column_break_owner",
  "owner_phone",
  "owner_address",
  "section_break_property",
  "property",
  "property_address",
  "legal_description",
  "ct_reference",
  "certificate_of_title_document",
  "zoning",
  "column_break_3",
  "site_area",
  "property_coordinates",
  "section_break_proposal",
  "brief_description",
  "detailed_description",
  "section_break_dates",
  "submitted_date",
  "acknowledged_date",
  "target_completion_date",
  "actual_completion_date",
  "column_break_4",
  "section_break_assignment",
  "assigned_to",
  "assigned_team",
  "processing_notes",
  "section_break_assessment",
  "assessment_project",
  "assessment_status",
  "current_stage",
  "column_break_assessment",
  "assessment_template",
  "assessment_owner",
  "section_break_attachments",
  "attachments",
  "section_break_fees",
  "selected_payment_account",
  "selected_bank_account",
  "total_fees_excl_gst",
  "gst_amount",
  "total_fees_incl_gst",
  "column_break_5",
  "payment_status",
  "fees",
  "section_break_invoicing",
  "invoice_to",
  "invoice_name",
  "invoice_email",
  "column_break_invoicing",
  "invoice_address",
  "purchase_order_number",
  "section_break_delivery",
  "delivery_preference",
  "section_break_history",
  "status_history",
  "section_break_related",
  "related_requests",
  "amended_from"
 ],
 "fields": [
  {
   "fieldname": "request_number",
   "fieldtype": "Data",
   "label": "Request Number",
   "reqd": 1,
   "unique": 1
  },
  {
   "fieldname": "request_type",
   "fieldtype": "Link",
   "label": "Request Type",
   "options": "Request Type",
   "mandatory_depends_on": "eval:doc.status!='Draft'"
  },
  {
   "fieldname": "council",
   "fieldtype": "Link",
   "label": "Council",
   "options": "Council",
   "reqd": 1,
   "in_list_view": 1,
   "in_standard_filter": 1,
   "description": "The council processing this request"
  },
  {
   "fieldname": "request_category",
   "fieldtype": "Select",
   "label": "Category",
   "options": "Resource Consent\nBuilding Consent\nService Request\nLicense\nComplaint",
   "reqd": 0,
   "description": "General category for this request. Can be left blank if request type already defines category."
  },
  {
   "allow_on_submit": 1,
   "fieldname": "status",
   "fieldtype": "Select",
   "label": "Status",
   "options": "Draft\nSubmitted\nAcknowledged\nProcessing\nRFI Issued\nRFI Received\nPending Decision\nApproved\nApproved with Conditions\nDeclined\nWithdrawn\nUnder Appeal",
   "reqd": 1
  },
  {
   "fieldname": "priority",
   "fieldtype": "Select",
   "label": "Priority",
   "options": "Low\nStandard\nHigh\nUrgent"
  },
  {
   "fieldname": "column_break_1",
   "fieldtype": "Column Break"
  },
  {
   "allow_on_submit": 1,
   "fieldname": "workflow_state",
   "fieldtype": "Link",
   "label": "Workflow State",
   "options": "Workflow State",
   "read_only": 1
  },
  {
   "fieldname": "is_overdue",
   "fieldtype": "Check",
   "label": "Is Overdue",
   "read_only": 1
  },
  {
   "description": "Details about the person or entity submitting this application. If using an agent or consultant, provide their details in the right column.",
   "fieldname": "section_break_applicant",
   "fieldtype": "Section Break",
   "label": "Applicant Information"
  },
  {
   "fieldname": "applicant",
   "fieldtype": "Link",
   "label": "Applicant",
   "options": "User",
   "reqd": 1
  },
  {
   "fetch_from": "applicant.full_name",
   "fieldname": "applicant_name",
   "fieldtype": "Data",
   "label": "Applicant Name",
   "read_only": 1
  },
  {
   "fetch_from": "applicant.email",
   "fieldname": "applicant_email",
   "fieldtype": "Data",
   "label": "Email",
   "read_only": 1
  },
  {
   "fieldname": "applicant_phone",
   "fieldtype": "Data",
   "label": "Phone",
   "reqd": 1
  },
  {
   "fieldname": "applicant_type",
   "fieldtype": "Select",
   "label": "Applicant Type",
   "options": "Individual\nCompany\nTrust\nPartnership",
   "reqd": 1
  },
  {
   "default": "0",
   "fieldname": "acting_on_behalf",
   "fieldtype": "Check",
   "label": "Acting on Behalf of Client"
  },
  {
   "fieldname": "column_break_2",
   "fieldtype": "Column Break"
  },
  {
   "fieldname": "agent",
   "fieldtype": "Link",
   "label": "Agent/Consultant",
   "options": "User"
  },
  {
   "fetch_from": "agent.full_name",
   "fieldname": "agent_name",
   "fieldtype": "Data",
   "label": "Agent Name",
   "read_only": 1
  },
  {
   "fetch_from": "agent.email",
   "fieldname": "agent_email",
   "fieldtype": "Data",
   "label": "Agent Email",
   "read_only": 1
  },
  {
   "fieldname": "agent_phone",
   "fieldtype": "Data",
   "label": "Agent Phone"
  },
  {
   "fieldname": "organization",
   "fieldtype": "Link",
   "label": "Organization",
   "options": "Organization"
  },
  {
   "collapsible": 1,
   "description": "If you are not the property owner, provide the owner's contact details.",
   "fieldname": "section_break_owner",
   "fieldtype": "Section Break",
   "label": "Property Owner Details",
   "depends_on": "eval:doc.property"
  },
  {
   "default": "0",
   "fieldname": "applicant_is_not_owner",
   "fieldtype": "Check",
   "label": "I am not the property owner",
   "depends_on": "eval:doc.property"
  },
  {
   "depends_on": "eval:doc.property && doc.applicant_is_not_owner==1",
   "fieldname": "owner_name",
   "fieldtype": "Data",
   "label": "Owner Name",
   "mandatory_depends_on": "eval:doc.property && doc.applicant_is_not_owner==1"
  },
  {
   "depends_on": "eval:doc.property && doc.applicant_is_not_owner==1",
   "fieldname": "owner_email",
   "fieldtype": "Data",
   "label": "Owner Email",
   "options": "Email"
  },
  {
   "fieldname": "column_break_owner",
   "fieldtype": "Column Break"
  },
  {
   "depends_on": "eval:doc.property && doc.applicant_is_not_owner==1",
   "fieldname": "owner_phone",
   "fieldtype": "Data",
   "label": "Owner Phone"
  },
  {
   "depends_on": "eval:doc.property && doc.applicant_is_not_owner==1",
   "fieldname": "owner_address",
   "fieldtype": "Small Text",
   "label": "Owner Address"
  },
  {
   "description": "Property information for land-based applications. Leave blank if not applicable.",
   "fieldname": "section_break_property",
   "fieldtype": "Section Break",
   "label": "Property Information"
  },
  {
   "fieldname": "property",
   "fieldtype": "Link",
   "label": "Property",
   "options": "Property",
   "reqd": 0,
   "mandatory_depends_on": "eval:['Resource Consent', 'Building Consent', 'Subdivision'].includes(doc.request_category)"
  },
  {
   "fetch_from": "property.street_address",
   "fieldname": "property_address",
   "fieldtype": "Small Text",
   "label": "Address",
   "read_only": 1,
   "depends_on": "eval:doc.property"
  },
  {
   "fetch_from": "property.legal_description",
   "fieldname": "legal_description",
   "fieldtype": "Small Text",
   "label": "Legal Description",
   "read_only": 1,
   "depends_on": "eval:doc.property"
  },
  {
   "fetch_from": "property.certificate_of_title",
   "fieldname": "ct_reference",
   "fieldtype": "Data",
   "label": "Certificate of Title",
   "read_only": 1,
   "depends_on": "eval:doc.property"
  },
  {
   "description": "Optional: Upload a copy of the Certificate of Title if available",
   "fieldname": "certificate_of_title_document",
   "fieldtype": "Attach",
   "label": "Certificate of Title Document",
   "depends_on": "eval:doc.property"
  },
  {
   "fetch_from": "property.zoning",
   "fieldname": "zoning",
   "fieldtype": "Data",
   "label": "Zoning",
   "read_only": 1,
   "depends_on": "eval:doc.property"
  },
  {
   "fieldname": "column_break_3",
   "fieldtype": "Column Break"
  },
  {
   "fetch_from": "property.site_area",
   "fieldname": "site_area",
   "fieldtype": "Float",
   "label": "Site Area (m\u00b2)",
   "read_only": 1,
   "depends_on": "eval:doc.property"
  },
  {
   "fieldname": "property_coordinates",
   "fieldtype": "Small Text",
   "label": "Coordinates",
   "read_only": 1,
   "depends_on": "eval:doc.property"
  },
  {
   "description": "Describe what is being proposed. Brief description (50-100 words) is shown in listings and reports. Detailed description is used for assessment and should include all relevant information about the proposed work.",
   "fieldname": "section_break_proposal",
   "fieldtype": "Section Break",
   "label": "Proposal Details"
  },
  {
   "description": "Short summary (50-100 words) visible in request listings, reports, and public notices. Keep it concise and focused on the main proposal.",
   "fieldname": "brief_description",
   "fieldtype": "Small Text",
   "label": "Brief Description",
   "max_length": 200,
   "reqd": 1
  },
  {
   "description": "Full description of the proposed work for planner assessment. Include all relevant details about scope, materials, dimensions, environmental considerations, and any other information needed for processing.",
   "fieldname": "detailed_description",
   "fieldtype": "Text Editor",
   "label": "Detailed Description",
   "reqd": 1
  },
  {
   "description": "Track key dates and timeframes for this request. Target completion date is calculated based on the request type's SLA.",
   "fieldname": "section_break_dates",
   "fieldtype": "Section Break",
   "label": "Dates & Timeframes"
  },
  {
   "fieldname": "submitted_date",
   "fieldtype": "Date",
   "label": "Submitted Date",
   "read_only": 1
  },
  {
   "allow_on_submit": 1,
   "fieldname": "acknowledged_date",
   "fieldtype": "Date",
   "label": "Acknowledged Date"
  },
  {
   "allow_on_submit": 1,
   "fieldname": "target_completion_date",
   "fieldtype": "Date",
   "label": "Target Completion Date",
   "read_only": 1
  },
  {
   "allow_on_submit": 1,
   "fieldname": "actual_completion_date",
   "fieldtype": "Date",
   "label": "Actual Completion Date"
  },
  {
   "fieldname": "column_break_4",
   "fieldtype": "Column Break"
  },
  {
   "fieldname": "section_break_assignment",
   "fieldtype": "Section Break",
   "label": "Assignment"
  },
  {
   "allow_on_submit": 1,
   "fieldname": "assigned_to",
   "fieldtype": "Link",
   "label": "Assigned To",
   "options": "User"
  },
  {
   "fieldname": "assigned_team",
   "fieldtype": "Data",
   "label": "Assigned Team"
  },
  {
   "fieldname": "processing_notes",
   "fieldtype": "Text Editor",
   "label": "Processing Notes"
  },
  {
   "collapsible": 1,
   "description": "Links to the internal assessment workflow project. An Assessment Project is automatically created when the request is acknowledged, containing tasks, stages, and team assignments for processing this application.",
   "fieldname": "section_break_assessment",
   "fieldtype": "Section Break",
   "label": "Assessment Project"
  },
  {
   "allow_on_submit": 1,
   "description": "Link to the internal assessment workflow. Automatically created when this request is acknowledged. Click to view tasks, stages, and team assignments.",
   "fieldname": "assessment_project",
   "fieldtype": "Link",
   "label": "Assessment Project",
   "options": "Assessment Project",
   "read_only": 1
  },
  {
   "fetch_from": "assessment_project.overall_status",
   "fieldname": "assessment_status",
   "fieldtype": "Data",
   "label": "Assessment Status",
   "read_only": 1
  },
  {
   "fetch_from": "assessment_project.current_stage",
   "fieldname": "current_stage",
   "fieldtype": "Data",
   "label": "Current Stage",
   "read_only": 1
  },
  {
   "fieldname": "column_break_assessment",
   "fieldtype": "Column Break"
  },
  {
   "fetch_from": "assessment_project.assessment_template",
   "fieldname": "assessment_template",
   "fieldtype": "Link",
   "label": "Assessment Template",
   "options": "Assessment Template",
   "read_only": 1
  },
  {
   "fetch_from": "assessment_project.project_owner",
   "fieldname": "assessment_owner",
   "fieldtype": "Link",
   "label": "Assessment Owner",
   "options": "User",
   "read_only": 1
  },
  {
   "collapsible": 1,
   "fieldname": "section_break_attachments",
   "fieldtype": "Section Break",
   "label": "Attachments"
  },
  {
   "fieldname": "attachments",
   "fieldtype": "Table",
   "label": "Documents",
   "options": "Request Attachment"
  },
  {
   "collapsible": 1,
   "description": "Fee breakdown and payment tracking for this application. Fees are calculated based on the request type and work scope. GST is added automatically. Payment status is updated when payments are received.",
   "fieldname": "section_break_fees",
   "fieldtype": "Section Break",
   "label": "Fees & Payments"
  },
  {
   "fieldname": "selected_payment_account",
   "fieldtype": "Link",
   "label": "Payment Account (Council Receives)",
   "options": "Council Payment Account",
   "description": "Council bank account to receive payment from applicant",
   "depends_on": "eval:doc.request_type_collects_payment",
   "read_only": 0
  },
  {
   "fieldname": "selected_bank_account",
   "fieldtype": "Link",
   "label": "Bank Account (Applicant Receives)",
   "options": "User Bank Account",
   "description": "Applicant's bank account to receive payment from council",
   "depends_on": "eval:doc.request_type_makes_payment",
   "read_only": 0
  },
  {
   "fieldname": "total_fees_excl_gst",
   "fieldtype": "Currency",
   "label": "Total Fees (excl GST)",
   "read_only": 1
  },
  {
   "fieldname": "gst_amount",
   "fieldtype": "Currency",
   "label": "GST Amount",
   "read_only": 1
  },
  {
   "fieldname": "total_fees_incl_gst",
   "fieldtype": "Currency",
   "label": "Total Fees (incl GST)",
   "read_only": 1
  },
  {
   "fieldname": "column_break_5",
   "fieldtype": "Column Break"
  },
  {
   "description": "Current payment status for this application. Updated automatically when payments are received or processed.",
   "fieldname": "payment_status",
   "fieldtype": "Select",
   "label": "Payment Status",
   "options": "Pending\nPartially Paid\nPaid\nRefunded\nWaived",
   "read_only": 1
  },
  {
   "description": "Itemized breakdown of all fees for this application. Add fee line items based on the request type and scope of work.",
   "fieldname": "fees",
   "fieldtype": "Table",
   "label": "Fee Breakdown",
   "options": "Request Fee"
  },
  {
   "collapsible": 1,
   "description": "Specify who should receive the invoice if different from the applicant. This could be the agent, property owner, or another party.",
   "fieldname": "section_break_invoicing",
   "fieldtype": "Section Break",
   "label": "Invoicing Details"
  },
  {
   "fieldname": "invoice_to",
   "fieldtype": "Select",
   "label": "Invoice To",
   "options": "Applicant\nAgent/Consultant\nProperty Owner\nOther",
   "default": "Applicant"
  },
  {
   "depends_on": "eval:doc.invoice_to=='Other'",
   "fieldname": "invoice_name",
   "fieldtype": "Data",
   "label": "Invoice Recipient Name",
   "mandatory_depends_on": "eval:doc.invoice_to=='Other'"
  },
  {
   "depends_on": "eval:doc.invoice_to=='Other'",
   "fieldname": "invoice_email",
   "fieldtype": "Data",
   "label": "Invoice Email",
   "options": "Email",
   "mandatory_depends_on": "eval:doc.invoice_to=='Other'"
  },
  {
   "fieldname": "column_break_invoicing",
   "fieldtype": "Column Break"
  },
  {
   "depends_on": "eval:doc.invoice_to=='Other'",
   "fieldname": "invoice_address",
   "fieldtype": "Small Text",
   "label": "Invoice Address"
  },
  {
   "fieldname": "purchase_order_number",
   "fieldtype": "Data",
   "label": "Purchase Order Number"
  },
  {
   "collapsible": 1,
   "description": "Choose how you would like to receive decision documents and communications from the council.",
   "fieldname": "section_break_delivery",
   "fieldtype": "Section Break",
   "label": "Delivery & Deposit Transfer"
  },
  {
   "fieldname": "delivery_preference",
   "fieldtype": "Select",
   "label": "Delivery Preference",
   "options": "Email\nPost\nPortal",
   "default": "Email"
  },
  {
   "collapsible": 1,
   "fieldname": "section_break_history",
   "fieldtype": "Section Break",
   "label": "Status History"
  },
  {
   "fieldname": "status_history",
   "fieldtype": "Table",
   "label": "Status Changes",
   "options": "Request Status History",
   "read_only": 1
  },
  {
   "collapsible": 1,
   "fieldname": "section_break_related",
   "fieldtype": "Section Break",
   "label": "Related Applications"
  },
  {
   "fieldname": "related_requests",
   "fieldtype": "Small Text",
   "label": "Related Request Numbers"
  },
  {
   "fieldname": "amended_from",
   "fieldtype": "Link",
   "label": "Amended From",
   "options": "Request",
   "read_only": 1
  }
 ],
 "index_web_pages_for_search": 1,
 "is_submittable": 1,
 "links": [
  {
   "group": "Related Documents",
   "link_doctype": "Resource Consent Application",
   "link_fieldname": "request"
  },
  {
   "group": "Related Documents",
   "link_doctype": "Assessment Project",
   "link_fieldname": "request"
  },
  {
   "group": "Related Documents",
   "link_doctype": "Request For Information",
   "link_fieldname": "request"
  },
  {
   "group": "Communication",
   "link_doctype": "Communication",
   "link_fieldname": "reference_name"
  }
 ],
 "modified": "2025-11-05 19:00:00",
 "modified_by": "Administrator",
 "module": "Lodgeick",
 "name": "Request",
 "naming_rule": "By fieldname",
 "owner": "Administrator",
 "permissions": [
  {
   "create": 1,
   "delete": 0,
   "email": 1,
   "export": 1,
   "if_owner": 1,
   "print": 1,
   "read": 1,
   "report": 1,
   "role": "Applicant",
   "share": 1,
   "submit": 1,
   "write": 1
  },
  {
   "create": 1,
   "delete": 0,
   "email": 1,
   "export": 1,
   "print": 1,
   "read": 1,
   "report": 1,
   "role": "Agent",
   "share": 1,
   "submit": 1,
   "write": 1
  },
  {
   "amend": 1,
   "cancel": 1,
   "create": 0,
   "delete": 0,
   "email": 1,
   "export": 1,
   "print": 1,
   "read": 1,
   "report": 1,
   "role": "Planner",
   "share": 1,
   "submit": 0,
   "write": 1
  },
  {
   "amend": 1,
   "cancel": 1,
   "create": 1,
   "delete": 1,
   "email": 1,
   "export": 1,
   "print": 1,
   "read": 1,
   "report": 1,
   "role": "Manager",
   "share": 1,
   "submit": 1,
   "write": 1
  }
 ],
 "search_fields": "request_number,applicant_name,brief_description",
 "sort_field": "modified",
 "sort_order": "DESC",
 "states": [],
 "title_field": "request_number",
 "track_changes": 1,
 "track_seen": 1
}