var M=(k,f,d)=>new Promise((c,s)=>{var w=r=>{try{p(d.next(r))}catch(v){s(v)}},l=r=>{try{p(d.throw(r))}catch(v){s(v)}},p=r=>r.done?c(r.value):Promise.resolve(r.value).then(w,l);p((d=d.apply(k,f)).next())});import{B as N,C as z,j as y,r as F,G as E,p as H,c as a,o as n,a as e,d as V,x as u,t as _,m as I,b as m,u as i,I as L,w as b,h as g,s as x,F as D,i as R}from"./index-DaFbJ1Ml.js";const T={class:"w-full max-w-md"},$={class:"text-center mb-8"},q={key:0,class:"mb-4"},P=["src","alt"],U={class:"text-gray-600"},G=["innerHTML"],W={class:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100"},A={class:"flex items-center justify-between mb-2"},J={class:"flex items-center"},K={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},O={class:"flex items-start"},Q={class:"text-sm text-red-700"},X={class:"text-center mt-6"},Y={class:"text-sm text-gray-600"},Z={class:"text-center mt-4"},te={__name:"CouncilLogin",setup(k){const f=N(),d=z(),c=y(()=>{var t;return(t=f.params.councilCode)==null?void 0:t.toUpperCase()}),s=F(null),w=F(!0);E(()=>M(this,null,function*(){try{s.value=yield d.getCouncilSettings(c.value)}catch(t){console.error("Failed to load council settings:",t)}finally{w.value=!1}}));const l=y(()=>{var t;return((t=s.value)==null?void 0:t.primary_color)||"#2563eb"}),p=y(()=>{var t;return((t=s.value)==null?void 0:t.secondary_color)||"#64748b"}),r=y(()=>({background:`linear-gradient(to bottom right, ${l.value}15, ${p.value}15)`}));function v(t){const o=new FormData(t.target);x.login.submit({email:o.get("email"),password:o.get("password")})}return(t,o)=>{var C,S,B;const h=H("router-link");return n(),a("div",{class:"min-h-screen flex items-center justify-center p-4",style:u(r.value)},[e("div",T,[e("div",$,[(C=s.value)!=null&&C.logo?(n(),a("div",q,[e("img",{src:s.value.logo,alt:s.value.council_name,class:"h-20 mx-auto object-contain"},null,8,P)])):(n(),a("div",{key:1,class:"inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-4 shadow-lg",style:u({backgroundColor:l.value})},[...o[0]||(o[0]=[e("svg",{class:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])],4)),o[1]||(o[1]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Welcome Back",-1)),e("p",U,"Sign in to "+_(((S=s.value)==null?void 0:S.council_name)||"Council")+" portal",1)]),(B=s.value)!=null&&B.login_page_custom_html?(n(),a("div",{key:0,class:"mb-6 prose prose-sm max-w-none bg-white rounded-lg p-4 shadow-sm",innerHTML:s.value.login_page_custom_html},null,8,G)):V("",!0),e("div",W,[e("form",{onSubmit:I(v,["prevent"]),class:"space-y-5"},[e("div",null,[o[2]||(o[2]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email or Username ",-1)),m(i(L),{id:"email",name:"email",type:"text",required:"",placeholder:"you@example.com",class:"w-full"})]),e("div",null,[e("div",A,[o[4]||(o[4]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Password ",-1)),m(h,{to:{name:"CouncilForgotPassword",params:{councilCode:c.value}},class:"text-sm font-medium hover:opacity-80",style:u({color:l.value})},{default:b(()=>[...o[3]||(o[3]=[g(" Forgot password? ",-1)])]),_:1},8,["to","style"])]),m(i(L),{id:"password",name:"password",type:"password",required:"",placeholder:"Enter your password",class:"w-full"})]),e("div",J,[e("input",{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 border-gray-300 rounded",style:u({accentColor:l.value})},null,4),o[5]||(o[5]=e("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-700"}," Remember me for 30 days ",-1))]),i(x).login.error?(n(),a("div",K,[e("div",O,[o[6]||(o[6]=e("svg",{class:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Q,_(i(x).login.error),1)])])):V("",!0),m(i(R),{type:"submit",loading:i(x).login.loading,variant:"solid",class:"w-full text-white py-3 text-base font-medium",style:u({backgroundColor:l.value,borderColor:l.value})},{default:b(()=>[i(x).login.loading?(n(),a(D,{key:1},[g(" Signing in... ")],64)):(n(),a(D,{key:0},[g(" Sign In ")],64))]),_:1},8,["loading","style"])],32)]),e("div",X,[e("p",Y,[o[8]||(o[8]=g(" Don't have an account? ",-1)),m(h,{to:{name:"CouncilRegister",params:{councilCode:c.value}},class:"font-medium hover:opacity-80",style:u({color:l.value})},{default:b(()=>[...o[7]||(o[7]=[g(" Create one now ",-1)])]),_:1},8,["to","style"])])]),e("div",Z,[m(h,{to:{name:"CouncilLanding",params:{councilCode:c.value}},class:"text-sm text-gray-500 hover:text-gray-700 inline-flex items-center"},{default:b(()=>{var j;return[o[9]||(o[9]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),g(" Back to "+_(((j=s.value)==null?void 0:j.council_name)||"Council")+" home ",1)]}),_:1},8,["to"])])])],4)}}};export{te as default};
//# sourceMappingURL=CouncilLogin-Ddkn9_hG.js.map
