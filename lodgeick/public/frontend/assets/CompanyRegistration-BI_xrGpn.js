var R=Object.defineProperty,E=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var P=(b,r,i)=>r in b?R(b,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):b[r]=i,A=(b,r)=>{for(var i in r||(r={}))I.call(r,i)&&P(b,i,r[i]);if(S)for(var i of S(r))J.call(r,i)&&P(b,i,r[i]);return b},L=(b,r)=>E(b,F(r));import{f as Y,r as _,p as Z,c as v,o as p,a as l,g as h,F as V,m as H,d as C,A as B,t as N,n as W,l as f,aF as w,b as s,h as d,u as o,I as u,v as $,C as O,E as G,G as z,w as k,i as M}from"./index-DxORdkoJ.js";import{C as X}from"./CouncilSelector-Be0ug2FH.js";const K={class:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100 flex items-center justify-center p-4"},Q={class:"w-full max-w-4xl"},ee={class:"mb-8"},le={class:"flex items-center justify-between"},te={class:"flex items-center"},ae={class:"flex items-center flex-col flex-1"},se={key:0,class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},oe={key:1,class:"text-sm font-semibold"},ne={class:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100"},re={class:"space-y-6"},ie={class:"grid md:grid-cols-2 gap-4"},de={class:"grid md:grid-cols-2 gap-4"},ue={class:"grid md:grid-cols-2 gap-4"},me={class:"space-y-6"},pe={class:"flex items-center mb-2"},be={class:"grid md:grid-cols-2 gap-4"},ve={class:"space-y-6"},ge={class:"grid md:grid-cols-2 gap-4"},fe={class:"grid md:grid-cols-2 gap-4"},ce={class:"space-y-6"},xe={key:0,class:"mt-6 p-3 bg-red-50 border border-red-200 rounded-lg"},ye={class:"flex items-start"},_e={class:"text-sm text-red-700"},ke={class:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200"},we={key:1},he={class:"text-center mt-6"},Ve={class:"text-sm text-gray-600"},Ce={class:"text-center mt-4"},Me={__name:"CompanyRegistration",setup(b){const r=Y(),i=[{label:"Company Details"},{label:"Contact Info"},{label:"Banking"},{label:"Admin User"}],n=_(0),c=_(!1),m=_(""),x=_(!1),t=_({company_name:"",legal_name:"",trading_name:"",company_type:"Limited Liability Company",nzbn:"",company_number:"",website:"",registered_office_address:"",postal_address:"",primary_email:"",primary_phone:"",bank_name:"",bank_account_number:"",billing_contact_name:"",billing_contact_email:"",billing_contact_phone:"",user_designation:"",default_council:null});function j(){x.value&&(t.value.postal_address=t.value.registered_office_address)}function D(){if(n.value===0){if(!t.value.company_name||!t.value.legal_name){m.value="Please fill in all required fields";return}if(t.value.nzbn&&!/^\d{13}$/.test(t.value.nzbn)){m.value="NZBN must be 13 digits";return}}else if(n.value===1){if(!t.value.registered_office_address||!t.value.primary_email||!t.value.primary_phone){m.value="Please fill in all required fields";return}}else if(n.value===3&&!t.value.user_designation){m.value="Please enter your designation/role";return}m.value="",n.value++}function T(){m.value="",n.value--}function q(){if(!t.value.user_designation){m.value="Please enter your designation/role";return}m.value="",c.value=!0;const U=L(A({},t.value),{postal_address:x.value?t.value.registered_office_address:t.value.postal_address});fetch("/api/method/lodgeick.api.register_company_account",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({company_data:U})}).then(e=>e.json()).then(e=>{if(c.value=!1,e.message&&e.message.success)r.push({name:"Dashboard",query:{company_registered:"true"}});else if(e.exc||e._server_messages){const y=e._server_messages?JSON.parse(e._server_messages):[],a=y.length>0?JSON.parse(y[0]).message:"Registration failed. Please try again.";m.value=a,console.error("Company registration error:",e.exc||e._server_messages)}else m.value="Registration failed. Please try again."}).catch(e=>{c.value=!1,m.value="Network error. Please check your connection and try again.",console.error("Company registration error:",e)})}return(U,e)=>{const y=Z("router-link");return p(),v("div",K,[l("div",Q,[e[53]||(e[53]=h('<div class="text-center mb-8"><div class="inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-2xl mb-4 shadow-lg"><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div><h1 class="text-3xl font-bold text-gray-900 mb-2">Register Company Account</h1><p class="text-gray-600">Create a company account to manage applications on behalf of your organization</p></div>',1)),l("div",ee,[l("div",le,[(p(),v(V,null,H(i,(a,g)=>l("div",{key:g,class:"flex-1"},[l("div",te,[l("div",ae,[l("div",{class:B(["w-10 h-10 rounded-full flex items-center justify-center border-2 transition",n.value>g?"bg-blue-600 border-blue-600 text-white":n.value===g?"border-blue-600 bg-white text-blue-600":"border-gray-300 bg-white text-gray-400"])},[n.value>g?(p(),v("svg",se,[...e[19]||(e[19]=[l("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):(p(),v("span",oe,N(g+1),1))],2),l("span",{class:B(["text-xs mt-2 font-medium",n.value>=g?"text-blue-600":"text-gray-400"])},N(a.label),3)]),g<i.length-1?(p(),v("div",{key:0,class:B(["h-0.5 flex-1 -mt-8",n.value>g?"bg-blue-600":"bg-gray-300"])},null,2)):C("",!0)])])),64))])]),l("div",ne,[l("form",{onSubmit:W(q,["prevent"])},[f(l("div",re,[e[29]||(e[29]=l("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Company Details",-1)),l("div",ie,[l("div",null,[e[20]||(e[20]=l("label",{for:"company_name",class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Company Name "),l("span",{class:"text-red-500"},"*")],-1)),s(o(u),{id:"company_name",modelValue:t.value.company_name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.company_name=a),type:"text",required:"",placeholder:"ABC Construction Ltd",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[21]||(e[21]=l("label",{for:"legal_name",class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Legal Name "),l("span",{class:"text-red-500"},"*")],-1)),s(o(u),{id:"legal_name",modelValue:t.value.legal_name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.legal_name=a),type:"text",required:"",placeholder:"ABC Construction Limited",class:"w-full"},null,8,["modelValue"])])]),l("div",de,[l("div",null,[e[22]||(e[22]=l("label",{for:"trading_name",class:"block text-sm font-medium text-gray-700 mb-2"}," Trading Name (Optional) ",-1)),s(o(u),{id:"trading_name",modelValue:t.value.trading_name,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.trading_name=a),type:"text",placeholder:"ABC Construction",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[24]||(e[24]=l("label",{for:"company_type",class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Company Type "),l("span",{class:"text-red-500"},"*")],-1)),f(l("select",{id:"company_type","onUpdate:modelValue":e[3]||(e[3]=a=>t.value.company_type=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...e[23]||(e[23]=[h('<option value="Limited Liability Company">Limited Liability Company</option><option value="Sole Trader">Sole Trader</option><option value="Partnership">Partnership</option><option value="Trust">Trust</option><option value="Other">Other</option>',5)])],512),[[$,t.value.company_type]])])]),l("div",ue,[l("div",null,[e[25]||(e[25]=l("label",{for:"nzbn",class:"block text-sm font-medium text-gray-700 mb-2"}," NZBN (Optional) ",-1)),s(o(u),{id:"nzbn",modelValue:t.value.nzbn,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.nzbn=a),type:"text",maxlength:"13",placeholder:"1234567890123",class:"w-full"},null,8,["modelValue"]),e[26]||(e[26]=l("p",{class:"mt-1 text-xs text-gray-500"},"New Zealand Business Number (13 digits)",-1))]),l("div",null,[e[27]||(e[27]=l("label",{for:"company_number",class:"block text-sm font-medium text-gray-700 mb-2"}," Company Number (Optional) ",-1)),s(o(u),{id:"company_number",modelValue:t.value.company_number,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.company_number=a),type:"text",placeholder:"1234567",class:"w-full"},null,8,["modelValue"])])]),l("div",null,[e[28]||(e[28]=l("label",{for:"website",class:"block text-sm font-medium text-gray-700 mb-2"}," Website (Optional) ",-1)),s(o(u),{id:"website",modelValue:t.value.website,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.website=a),type:"url",placeholder:"https://www.example.co.nz",class:"w-full"},null,8,["modelValue"])])],512),[[w,n.value===0]]),f(l("div",me,[e[35]||(e[35]=l("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Contact Information",-1)),l("div",null,[e[30]||(e[30]=l("label",{for:"registered_office_address",class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Registered Office Address "),l("span",{class:"text-red-500"},"*")],-1)),f(l("textarea",{id:"registered_office_address","onUpdate:modelValue":e[7]||(e[7]=a=>t.value.registered_office_address=a),required:"",rows:"3",placeholder:"123 Main Street, Auckland 1010",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[O,t.value.registered_office_address]])]),l("div",null,[e[32]||(e[32]=l("label",{for:"postal_address",class:"block text-sm font-medium text-gray-700 mb-2"}," Postal Address (Optional) ",-1)),l("div",pe,[f(l("input",{id:"same_as_registered",type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>x.value=a),onChange:j,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,544),[[G,x.value]]),e[31]||(e[31]=l("label",{for:"same_as_registered",class:"ml-2 text-sm text-gray-700"}," Same as registered office address ",-1))]),x.value?C("",!0):f((p(),v("textarea",{key:0,id:"postal_address","onUpdate:modelValue":e[9]||(e[9]=a=>t.value.postal_address=a),rows:"3",placeholder:"PO Box 123, Auckland 1140",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512)),[[O,t.value.postal_address]])]),l("div",be,[l("div",null,[e[33]||(e[33]=l("label",{for:"primary_email",class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Primary Email "),l("span",{class:"text-red-500"},"*")],-1)),s(o(u),{id:"primary_email",modelValue:t.value.primary_email,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.primary_email=a),type:"email",required:"",placeholder:"info@example.co.nz",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[34]||(e[34]=l("label",{for:"primary_phone",class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Primary Phone "),l("span",{class:"text-red-500"},"*")],-1)),s(o(u),{id:"primary_phone",modelValue:t.value.primary_phone,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.primary_phone=a),type:"tel",required:"",placeholder:"+64 9 123 4567",class:"w-full"},null,8,["modelValue"])])])],512),[[w,n.value===1]]),f(l("div",ve,[e[41]||(e[41]=l("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Banking & Billing (Optional)",-1)),e[42]||(e[42]=l("p",{class:"text-sm text-gray-600 mb-4"}," Add banking details for faster invoice processing. You can skip this step and add it later. ",-1)),l("div",ge,[l("div",null,[e[36]||(e[36]=l("label",{for:"bank_name",class:"block text-sm font-medium text-gray-700 mb-2"}," Bank Name ",-1)),s(o(u),{id:"bank_name",modelValue:t.value.bank_name,"onUpdate:modelValue":e[12]||(e[12]=a=>t.value.bank_name=a),type:"text",placeholder:"ANZ Bank",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[37]||(e[37]=l("label",{for:"bank_account_number",class:"block text-sm font-medium text-gray-700 mb-2"}," Bank Account Number ",-1)),s(o(u),{id:"bank_account_number",modelValue:t.value.bank_account_number,"onUpdate:modelValue":e[13]||(e[13]=a=>t.value.bank_account_number=a),type:"text",placeholder:"12-3456-7890123-00",class:"w-full"},null,8,["modelValue"])])]),l("div",null,[e[38]||(e[38]=l("label",{for:"billing_contact_name",class:"block text-sm font-medium text-gray-700 mb-2"}," Billing Contact Name ",-1)),s(o(u),{id:"billing_contact_name",modelValue:t.value.billing_contact_name,"onUpdate:modelValue":e[14]||(e[14]=a=>t.value.billing_contact_name=a),type:"text",placeholder:"John Doe",class:"w-full"},null,8,["modelValue"])]),l("div",fe,[l("div",null,[e[39]||(e[39]=l("label",{for:"billing_contact_email",class:"block text-sm font-medium text-gray-700 mb-2"}," Billing Contact Email ",-1)),s(o(u),{id:"billing_contact_email",modelValue:t.value.billing_contact_email,"onUpdate:modelValue":e[15]||(e[15]=a=>t.value.billing_contact_email=a),type:"email",placeholder:"billing@example.co.nz",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[40]||(e[40]=l("label",{for:"billing_contact_phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Billing Contact Phone ",-1)),s(o(u),{id:"billing_contact_phone",modelValue:t.value.billing_contact_phone,"onUpdate:modelValue":e[16]||(e[16]=a=>t.value.billing_contact_phone=a),type:"tel",placeholder:"+64 9 123 4567",class:"w-full"},null,8,["modelValue"])])])],512),[[w,n.value===2]]),f(l("div",ce,[e[44]||(e[44]=l("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Your Details (Admin User)",-1)),e[45]||(e[45]=l("p",{class:"text-sm text-gray-600 mb-4"}," You will be set up as the first administrator of this company account with full permissions. ",-1)),l("div",null,[e[43]||(e[43]=l("label",{for:"user_designation",class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Your Designation/Role "),l("span",{class:"text-red-500"},"*")],-1)),s(o(u),{id:"user_designation",modelValue:t.value.user_designation,"onUpdate:modelValue":e[17]||(e[17]=a=>t.value.user_designation=a),type:"text",required:"",placeholder:"Director, Manager, CEO, etc.",class:"w-full"},null,8,["modelValue"])]),l("div",null,[s(X,{modelValue:t.value.default_council,"onUpdate:modelValue":e[18]||(e[18]=a=>t.value.default_council=a),label:"Default Council (Optional)",description:"Select your preferred council for submitting applications. This can be changed later.","display-mode":"dropdown",required:!1,"show-clear-button":!0},null,8,["modelValue"])]),e[46]||(e[46]=h('<div class="p-4 bg-blue-50 border border-blue-200 rounded-lg"><h3 class="text-sm font-medium text-blue-900 mb-2">Admin Permissions</h3><ul class="text-sm text-blue-800 space-y-1"><li class="flex items-start"><svg class="w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> Edit company profile and settings </li><li class="flex items-start"><svg class="w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> Invite and remove users </li><li class="flex items-start"><svg class="w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> Create, edit, and submit applications </li><li class="flex items-start"><svg class="w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> Manage billing and payment information </li></ul></div>',1))],512),[[w,n.value===3]]),m.value?(p(),v("div",xe,[l("div",ye,[e[47]||(e[47]=l("svg",{class:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),l("p",_e,N(m.value),1)])])):C("",!0),l("div",ke,[n.value>0?(p(),z(o(M),{key:0,type:"button",onClick:T,variant:"outline",class:"px-6 py-2"},{default:k(()=>[...e[48]||(e[48]=[l("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),d(" Previous ",-1)])]),_:1})):(p(),v("div",we)),n.value<i.length-1?(p(),z(o(M),{key:2,type:"button",onClick:D,variant:"solid",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2"},{default:k(()=>[...e[49]||(e[49]=[d(" Next ",-1),l("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1})):(p(),z(o(M),{key:3,type:"submit",loading:c.value,variant:"solid",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2"},{default:k(()=>[c.value?(p(),v(V,{key:1},[d(" Creating... ")],64)):(p(),v(V,{key:0},[d(" Create Company Account ")],64))]),_:1},8,["loading"]))])],32)]),l("div",he,[l("p",Ve,[e[51]||(e[51]=d(" Want to create an individual account instead? ",-1)),s(y,{to:{name:"Register"},class:"font-medium text-blue-600 hover:text-blue-700"},{default:k(()=>[...e[50]||(e[50]=[d(" Register as individual ",-1)])]),_:1})])]),l("div",Ce,[s(y,{to:"/",class:"text-sm text-gray-500 hover:text-gray-700 inline-flex items-center"},{default:k(()=>[...e[52]||(e[52]=[l("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),d(" Back to home ",-1)])]),_:1})])])])}}};export{Me as default};
//# sourceMappingURL=CompanyRegistration-BI_xrGpn.js.map
