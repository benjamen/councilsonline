{"version":3,"mappings":"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","names":["SendMessageModal","defineAsyncComponent","__vitePreload","BookMeetingModal","route","useRoute","router","useRouter","fileInput","ref","uploading","submitting","deleting","cancellingMeeting","showSendMessageModal","showBookMeetingModal","request","createResource","meetings","requestTypeConfig","councilDetails","watch","_a","requestType","councilCode","clockData","progressPercent","useStatutoryClock","parsedFormData","computed","formData","standardFields","filtered","key","error","reviewSections","step","hasPropertyDetails","_b","hasReviewContent","section","field","formatFieldValue","value","e","formatFieldLabel","fieldName","word","formatSimpleValue","goBack","formatMeetingDate","dateStr","formatDate","handleUploadDocument","handleFileUpload","event","__async","files","file","handleSendMessage","handleMessageSent","handlePrintApplication","handleEditDraft","url","handleDeleteDraft","handleSubmitApplication","result","handleMakePayment","handleBookMeeting","handleMeetingBooked","meetingData","handleEditMeeting","meeting","handleCancelMeeting","_openBlock","_createElementBlock","_hoisted_1","_createVNode","RequestHeader","_unref","_createBlock","StatusBadge","Button","_cache","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_Fragment","_renderList","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","slot","index","_hoisted_80","$event","_hoisted_83","_hoisted_84","_hoisted_85","s","_hoisted_86","_hoisted_87","f","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","_hoisted_110","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","_hoisted_120","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","_hoisted_127","_hoisted_128","_hoisted_129","_hoisted_130","_hoisted_131","_hoisted_132","_hoisted_133","_hoisted_134","_hoisted_135","_hoisted_136","_hoisted_137"],"ignoreList":[],"sources":["../../../../frontend/src/pages/RequestDetail.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <!-- Header -->\n    <RequestHeader\n      :title=\"request.data?.request_number || 'Loading...'\"\n      :subtitle=\"request.data?.request_type\"\n      :loading=\"request.loading\"\n      @back=\"goBack\"\n    >\n      <template #actions>\n        <StatusBadge v-if=\"request.data\" :status=\"request.data.workflow_state\" />\n        <Button\n          v-if=\"request.data?.workflow_state === 'Draft'\"\n          @click=\"handleSubmitApplication\"\n          variant=\"solid\"\n          theme=\"blue\"\n          :loading=\"submitting\"\n        >\n          Submit Application\n        </Button>\n      </template>\n    </RequestHeader>\n\n    <!-- Hidden file input -->\n    <input\n      ref=\"fileInput\"\n      type=\"file\"\n      multiple\n      class=\"hidden\"\n      @change=\"handleFileUpload\"\n    />\n\n    <!-- Loading State -->\n    <div v-if=\"request.loading\" class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n      <div class=\"text-center\">\n        <div class=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        <p class=\"mt-4 text-gray-500\">Loading request details...</p>\n      </div>\n    </div>\n\n    <!-- Main Content -->\n    <div v-else-if=\"request.data\" class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <!-- Main Content Column -->\n        <div class=\"lg:col-span-2 space-y-6\">\n          <!-- Overview Card -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Application Overview</h2>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Request Number</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.request_number }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Type</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.request_type }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Status</label>\n                <div class=\"mt-1\">\n                  <StatusBadge :status=\"request.data.workflow_state\" />\n                </div>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Submitted Date</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ formatDate(request.data.creation) }}</p>\n              </div>\n            </div>\n\n            <div class=\"mt-6 pt-6 border-t border-gray-200\">\n              <label class=\"text-sm font-medium text-gray-500\">Brief Description</label>\n              <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.brief_description || 'N/A' }}</p>\n            </div>\n\n            <div class=\"mt-4\">\n              <label class=\"text-sm font-medium text-gray-500\">Detailed Description</label>\n              <div class=\"mt-1 text-sm text-gray-900 prose prose-sm max-w-none\" v-html=\"request.data.detailed_description || 'N/A'\"></div>\n            </div>\n          </div>\n\n          <!-- Property Information - only show if request type has property -->\n          <div v-if=\"hasPropertyDetails\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Property Information</h2>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div v-if=\"request.data.property_address\">\n                <label class=\"text-sm font-medium text-gray-500\">Address</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.property_address }}</p>\n              </div>\n              <div v-if=\"request.data.legal_description\">\n                <label class=\"text-sm font-medium text-gray-500\">Legal Description</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.legal_description }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Applicant Information -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Applicant Information</h2>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Name</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.requester_name || 'N/A' }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Email</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.requester_email || 'N/A' }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Phone</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.requester_phone || 'N/A' }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Address</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.applicant_address || 'N/A' }}</p>\n              </div>\n              <div v-if=\"request.data.applicant_company\">\n                <label class=\"text-sm font-medium text-gray-500\">Company/Organization</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.applicant_company }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- SPISC Application Details - only show if request is SPISC -->\n          <div v-if=\"request.data?.request_type?.includes('SPISC') && request.data.application_name\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">SPISC Application Details</h2>\n\n            <div class=\"space-y-6\">\n              <!-- Personal Information -->\n              <div>\n                <h3 class=\"text-sm font-semibold text-gray-700 mb-3\">Personal Information</h3>\n                <div class=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Birth Date</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ formatDate(request.data.birth_date) || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Age</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.age || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Sex</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.sex || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Civil Status</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.civil_status || 'N/A' }}</p>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Household & Economic Information -->\n              <div>\n                <h3 class=\"text-sm font-semibold text-gray-700 mb-3\">Household & Economic Information</h3>\n                <div class=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Household Size</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.household_size || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Living Arrangement</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.living_arrangement || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Monthly Income</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">â‚±{{ request.data.monthly_income || '0' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Income Source</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.income_source || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">4Ps Beneficiary</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.is_4ps_beneficiary ? 'Yes' : 'No' }}</p>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Identity Documents -->\n              <div>\n                <h3 class=\"text-sm font-semibold text-gray-700 mb-3\">Identity Documents</h3>\n                <div class=\"grid grid-cols-2 gap-4\">\n                  <div v-if=\"request.data.philsys_id\">\n                    <label class=\"text-sm font-medium text-gray-500\">PhilSys ID</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.philsys_id }}</p>\n                  </div>\n                  <div v-if=\"request.data.sss_number\">\n                    <label class=\"text-sm font-medium text-gray-500\">SSS Number</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.sss_number }}</p>\n                  </div>\n                  <div v-if=\"request.data.osca_id\">\n                    <label class=\"text-sm font-medium text-gray-500\">OSCA ID</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.osca_id }}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Delivery & Payment Preferences - only show if request type collects payment -->\n          <div v-if=\"requestTypeConfig.data?.collect_payment\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Delivery & Payment Preferences</h2>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div v-if=\"request.data.delivery_preference\">\n                <label class=\"text-sm font-medium text-gray-500\">Delivery Preference</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.delivery_preference }}</p>\n              </div>\n              <div v-if=\"request.data.invoice_to\">\n                <label class=\"text-sm font-medium text-gray-500\">Invoice To</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.invoice_to }}</p>\n              </div>\n              <div v-if=\"request.data.invoice_recipient_name\">\n                <label class=\"text-sm font-medium text-gray-500\">Invoice Recipient Name</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.invoice_recipient_name }}</p>\n              </div>\n              <div v-if=\"request.data.invoice_recipient_email\">\n                <label class=\"text-sm font-medium text-gray-500\">Invoice Recipient Email</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.invoice_recipient_email }}</p>\n              </div>\n              <div v-if=\"request.data.purchase_order_number\" class=\"col-span-2\">\n                <label class=\"text-sm font-medium text-gray-500\">Purchase Order Number</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.purchase_order_number }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Council Meeting Section -->\n          <div v-if=\"requestTypeConfig.data?.council_meeting_available\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <div class=\"flex justify-between items-start mb-4\">\n              <div>\n                <h2 class=\"text-lg font-semibold text-gray-900\">Council Meeting</h2>\n                <p class=\"text-sm text-gray-600 mt-1\">\n                  Schedule a meeting with council planners to discuss your application\n                </p>\n              </div>\n\n              <!-- Status Badge if meeting exists -->\n              <span\n                v-if=\"meetings.data && meetings.data.length > 0\"\n                class=\"px-3 py-1 rounded-full text-sm font-medium\"\n                :class=\"{\n                  'bg-yellow-100 text-yellow-800': meetings.data[0].status === 'Requested',\n                  'bg-blue-100 text-blue-800': meetings.data[0].status === 'Scheduled' || meetings.data[0].status === 'Confirmed',\n                  'bg-green-100 text-green-800': meetings.data[0].status === 'Completed',\n                  'bg-gray-100 text-gray-800': meetings.data[0].status === 'Cancelled'\n                }\"\n              >\n                {{ meetings.data[0].status }}\n              </span>\n            </div>\n\n            <!-- Meeting Details (if exists) -->\n            <div v-if=\"meetings.data && meetings.data.length > 0\" class=\"space-y-4\">\n              <div v-for=\"meeting in meetings.data\" :key=\"meeting.name\" class=\"border-l-4 border-blue-500 bg-blue-50 p-4 rounded\">\n                <div class=\"grid grid-cols-2 gap-3 text-sm\">\n                  <div>\n                    <span class=\"font-medium text-gray-700\">Type:</span>\n                    <span class=\"ml-2 text-gray-900\">{{ meeting.meeting_type }}</span>\n                  </div>\n                  <div>\n                    <span class=\"font-medium text-gray-700\">Status:</span>\n                    <span class=\"ml-2 text-gray-900\">{{ meeting.status }}</span>\n                  </div>\n                  <div v-if=\"meeting.scheduled_start\" class=\"col-span-2\">\n                    <span class=\"font-medium text-gray-700\">Scheduled:</span>\n                    <span class=\"ml-2 text-gray-900\">{{ formatMeetingDate(meeting.scheduled_start) }}</span>\n                  </div>\n                  <div v-if=\"meeting.meeting_format\" class=\"col-span-2\">\n                    <span class=\"font-medium text-gray-700\">Format:</span>\n                    <span class=\"ml-2 text-gray-900\">{{ meeting.meeting_format }}</span>\n                  </div>\n                  <div v-if=\"meeting.meeting_location\" class=\"col-span-2\">\n                    <span class=\"font-medium text-gray-700\">Location:</span>\n                    <span class=\"ml-2 text-gray-900\">{{ meeting.meeting_location }}</span>\n                  </div>\n                  <div v-if=\"meeting.google_meet_link\" class=\"col-span-2\">\n                    <span class=\"font-medium text-gray-700\">Meeting Link:</span>\n                    <a :href=\"meeting.google_meet_link\" target=\"_blank\" class=\"ml-2 text-blue-600 hover:underline\">Join Meeting</a>\n                  </div>\n                </div>\n\n                <div v-if=\"meeting.meeting_purpose\" class=\"mt-3 pt-3 border-t border-blue-200\">\n                  <span class=\"font-medium text-gray-700 text-sm\">Purpose:</span>\n                  <p class=\"mt-1 text-sm text-gray-900\">{{ meeting.meeting_purpose }}</p>\n                </div>\n\n                <!-- Proposed Time Slots (if status is Requested and slots exist) -->\n                <div v-if=\"meeting.status === 'Requested' && meeting.proposed_slots && meeting.proposed_slots.length > 0\" class=\"mt-3 pt-3 border-t border-blue-200\">\n                  <span class=\"font-medium text-gray-700 text-sm\">Proposed Time Slots:</span>\n                  <ul class=\"mt-2 space-y-1\">\n                    <li v-for=\"(slot, index) in meeting.proposed_slots\" :key=\"index\" class=\"text-sm text-gray-900 flex items-center\">\n                      <svg class=\"w-4 h-4 mr-2 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      {{ formatMeetingDate(slot) }}\n                    </li>\n                  </ul>\n                </div>\n\n                <!-- Action Buttons (Edit/Cancel) - only show if meeting is Requested or Scheduled -->\n                <div v-if=\"meeting.status === 'Requested' || meeting.status === 'Scheduled'\" class=\"mt-4 pt-3 border-t border-blue-200 flex space-x-3\">\n                  <button\n                    @click=\"handleEditMeeting(meeting)\"\n                    class=\"flex-1 px-4 py-2 bg-white border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm font-medium\"\n                  >\n                    <svg class=\"w-4 h-4 inline mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                    </svg>\n                    Edit Request\n                  </button>\n                  <button\n                    @click=\"handleCancelMeeting(meeting)\"\n                    :disabled=\"cancellingMeeting\"\n                    class=\"flex-1 px-4 py-2 bg-white border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <svg class=\"w-4 h-4 inline mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                    Cancel Meeting\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            <!-- Request Meeting Button (if no meeting) -->\n            <div v-else class=\"text-center py-6\">\n              <svg class=\"mx-auto h-12 w-12 text-gray-400 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n              </svg>\n              <p class=\"text-sm text-gray-600 mb-4\">\n                No meeting scheduled yet. Book a meeting to discuss your application with council planners.\n              </p>\n              <button\n                @click=\"handleBookMeeting\"\n                class=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                Request Council Meeting\n              </button>\n            </div>\n          </div>\n\n          <!-- Dynamic Application Data (using step configuration OR fallback to raw data) -->\n          <template v-if=\"reviewSections.length > 0\">\n            <div\n              v-for=\"step in reviewSections\"\n              :key=\"step.step_code\"\n              class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\"\n            >\n              <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">{{ step.step_title }}</h2>\n              <div class=\"space-y-4\">\n                <div\n                  v-for=\"section in step.sections.filter(s => s.show_on_review)\"\n                  :key=\"section.section_code\"\n                >\n                  <h3 v-if=\"section.section_title\" class=\"text-md font-medium text-gray-700 mb-3\">\n                    {{ section.section_title }}\n                  </h3>\n                  <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div\n                      v-for=\"field in section.fields.filter(f => f.show_on_review)\"\n                      :key=\"field.field_name\"\n                      class=\"border-b border-gray-100 pb-3\"\n                    >\n                      <label class=\"text-sm font-medium text-gray-500\">{{ field.review_label || field.field_label }}</label>\n                      <p class=\"mt-1 text-sm text-gray-900\">{{ formatFieldValue(field, request.data[field.field_name]) }}</p>\n                    </div>\n                  </div>\n                </div>\n                <p v-if=\"!hasReviewContent(step)\" class=\"text-gray-500 text-sm\">\n                  No information to display\n                </p>\n              </div>\n            </div>\n          </template>\n\n          <!-- Fallback: Show raw application data if config not loaded -->\n          <div v-else-if=\"parsedFormData && Object.keys(parsedFormData).length > 0\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Application Details</h2>\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div v-for=\"(value, fieldName) in parsedFormData\" :key=\"fieldName\" class=\"border-b border-gray-100 pb-3\">\n                <label class=\"text-sm font-medium text-gray-500\">{{ formatFieldLabel(fieldName) }}</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ formatSimpleValue(value) }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Fees & Payments -->\n          <div v-if=\"requestTypeConfig.data?.collect_payment\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <div class=\"flex justify-between items-center mb-4\">\n              <h2 class=\"text-lg font-semibold text-gray-900\">Fees & Payments</h2>\n              <span class=\"text-sm font-medium\" :class=\"request.data.payment_status === 'Paid' ? 'text-green-600' : 'text-orange-600'\">\n                {{ request.data.payment_status || 'Unpaid' }}\n              </span>\n            </div>\n\n            <div class=\"space-y-3\">\n              <div class=\"flex justify-between items-center py-2 border-b border-gray-100\">\n                <span class=\"text-sm text-gray-600\">Total Fees</span>\n                <span class=\"text-sm font-semibold text-gray-900\">${{ (request.data.total_fees || 0).toFixed(2) }}</span>\n              </div>\n              <div class=\"flex justify-between items-center py-2 border-b border-gray-100\">\n                <span class=\"text-sm text-gray-600\">Total Paid</span>\n                <span class=\"text-sm font-semibold text-green-600\">${{ (request.data.total_paid || 0).toFixed(2) }}</span>\n              </div>\n              <div class=\"flex justify-between items-center py-2\">\n                <span class=\"text-sm font-medium text-gray-900\">Outstanding</span>\n                <span class=\"text-sm font-bold text-orange-600\">${{ ((request.data.total_fees || 0) - (request.data.total_paid || 0)).toFixed(2) }}</span>\n              </div>\n            </div>\n\n            <Button\n              v-if=\"(request.data.total_fees || 0) > (request.data.total_paid || 0)\"\n              @click=\"handleMakePayment\"\n              variant=\"solid\"\n              theme=\"blue\"\n              class=\"w-full mt-4\"\n            >\n              Make Payment\n            </Button>\n          </div>\n\n          <!-- Payment to be Received (for social services / benefits) -->\n          <div v-if=\"requestTypeConfig.data?.make_payment\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <div class=\"flex justify-between items-center mb-4\">\n              <h2 class=\"text-lg font-semibold text-gray-900\">Payment to be Received</h2>\n              <span class=\"text-sm font-medium\" :class=\"request.data.payment_status === 'Paid' ? 'text-green-600' : 'text-orange-600'\">\n                {{ request.data.payment_status || 'Pending' }}\n              </span>\n            </div>\n\n            <div class=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n              <div class=\"flex items-start\">\n                <svg class=\"h-5 w-5 text-blue-600 mt-0.5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium text-blue-900\">Benefit Payment Information</p>\n                  <p class=\"text-sm text-blue-700 mt-1\">\n                    Once your application is approved, you will receive payment from the council.\n                    Please ensure your bank details are up to date.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"space-y-3\">\n              <div class=\"flex justify-between items-center py-2 border-b border-gray-100\">\n                <span class=\"text-sm text-gray-600\">Benefit Amount</span>\n                <span class=\"text-sm font-semibold text-gray-900\">\n                  ${{ requestTypeConfig.data?.base_fee ? requestTypeConfig.data.base_fee.toFixed(2) : '0.00' }}\n                </span>\n              </div>\n              <div class=\"flex justify-between items-center py-2 border-b border-gray-100\">\n                <span class=\"text-sm text-gray-600\">Payment Status</span>\n                <span class=\"text-sm font-semibold\" :class=\"request.data.payment_status === 'Paid' ? 'text-green-600' : 'text-orange-600'\">\n                  {{ request.data.payment_status || 'Pending Approval' }}\n                </span>\n              </div>\n              <div v-if=\"request.data.selected_bank_account\" class=\"flex justify-between items-center py-2\">\n                <span class=\"text-sm text-gray-600\">Payment Method</span>\n                <span class=\"text-sm font-medium text-gray-900\">Bank Transfer</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Documents -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <div class=\"flex justify-between items-center mb-4\">\n              <h2 class=\"text-lg font-semibold text-gray-900\">Documents</h2>\n              <Button\n                @click=\"handleUploadDocument\"\n                variant=\"outline\"\n                size=\"sm\"\n                :loading=\"uploading\"\n              >\n                <template #prefix>\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                  </svg>\n                </template>\n                Upload Document\n              </Button>\n            </div>\n\n            <div v-if=\"!request.data.attachments || request.data.attachments.length === 0\" class=\"text-center py-8\">\n              <svg class=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n              </svg>\n              <p class=\"mt-2 text-sm text-gray-500\">No documents uploaded yet</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Sidebar Column -->\n        <div class=\"space-y-6\">\n          <!-- Timeline -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Processing Timeline</h2>\n\n            <!-- SLA / Statutory Clock -->\n            <div v-if=\"clockData.statutory_clock_started\" class=\"mb-6 p-4 bg-blue-50 rounded-lg\">\n              <div class=\"flex items-center justify-between mb-2\">\n                <span class=\"text-sm font-medium text-blue-900\">SLA / Statutory Clock</span>\n                <span class=\"text-xs text-blue-700\">{{ clockData.working_days_elapsed }} of 20 days</span>\n              </div>\n              <div class=\"w-full bg-blue-200 rounded-full h-2\">\n                <div\n                  class=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                  :style=\"{ width: `${progressPercent}%` }\"\n                ></div>\n              </div>\n              <p class=\"mt-2 text-xs text-blue-700\">\n                {{ clockData.statutory_clock_stopped ? 'Clock stopped (RFI issued)' : `${clockData.working_days_remaining} days remaining` }}\n              </p>\n            </div>\n\n            <!-- Status History -->\n            <div class=\"space-y-4\">\n              <div class=\"flex items-start space-x-3\">\n                <div class=\"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\">\n                  <svg class=\"w-4 h-4 text-green-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" />\n                  </svg>\n                </div>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium text-gray-900\">Application Created</p>\n                  <p class=\"text-xs text-gray-500\">{{ formatDate(request.data.creation) }}</p>\n                </div>\n              </div>\n\n              <div v-if=\"request.data.modified !== request.data.creation\" class=\"flex items-start space-x-3\">\n                <div class=\"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <svg class=\"w-4 h-4 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\" />\n                  </svg>\n                </div>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium text-gray-900\">Last Updated</p>\n                  <p class=\"text-xs text-gray-500\">{{ formatDate(request.data.modified) }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Quick Actions -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h2>\n\n            <div class=\"space-y-3\">\n              <Button\n                v-if=\"request.data.workflow_state === 'Draft'\"\n                @click=\"handleEditDraft\"\n                variant=\"solid\"\n                theme=\"blue\"\n                class=\"w-full justify-start\"\n              >\n                <template #prefix>\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                  </svg>\n                </template>\n                Edit Draft\n              </Button>\n\n              <Button\n                @click=\"handleSendMessage\"\n                variant=\"outline\"\n                class=\"w-full justify-start\"\n              >\n                <template #prefix>\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n                  </svg>\n                </template>\n                Send Message\n              </Button>\n\n              <Button\n                @click=\"handlePrintApplication\"\n                variant=\"outline\"\n                class=\"w-full justify-start\"\n              >\n                <template #prefix>\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\" />\n                  </svg>\n                </template>\n                Print Application\n              </Button>\n\n              <Button\n                v-if=\"request.data.workflow_state === 'Draft'\"\n                @click=\"handleDeleteDraft\"\n                variant=\"outline\"\n                class=\"w-full justify-start text-red-600 hover:text-red-700\"\n                :loading=\"deleting\"\n              >\n                <template #prefix>\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 1 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                  </svg>\n                </template>\n                Delete Draft\n              </Button>\n            </div>\n          </div>\n\n          <!-- Contact Info -->\n          <div class=\"bg-blue-50 rounded-lg border border-blue-200 p-6\">\n            <h3 class=\"text-sm font-semibold text-blue-900 mb-3\">Need Help?</h3>\n            <p class=\"text-xs text-blue-800 mb-4\">Contact {{ councilDetails.data?.council_name || 'the council' }} for assistance with your application.</p>\n            <div v-if=\"councilDetails.loading\" class=\"text-xs text-blue-800\">\n              Loading contact information...\n            </div>\n            <div v-else-if=\"councilDetails.data\" class=\"space-y-2 text-xs text-blue-900\">\n              <div v-if=\"councilDetails.data.contact_email\" class=\"flex items-center space-x-2\">\n                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                </svg>\n                <a :href=\"`mailto:${councilDetails.data.contact_email}`\" class=\"hover:underline\">\n                  {{ councilDetails.data.contact_email }}\n                </a>\n              </div>\n              <div v-if=\"councilDetails.data.contact_phone\" class=\"flex items-center space-x-2\">\n                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n                </svg>\n                <a :href=\"`tel:${councilDetails.data.contact_phone}`\" class=\"hover:underline\">\n                  {{ councilDetails.data.contact_phone }}\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Modals -->\n    <SendMessageModal\n      v-model:show=\"showSendMessageModal\"\n      :request-id=\"route.params.id\"\n      @sent=\"handleMessageSent\"\n    />\n\n    <BookMeetingModal\n      v-model:show=\"showBookMeetingModal\"\n      :request-id=\"route.params.id\"\n      :request-type-code=\"requestTypeConfig.data?.type_code\"\n      :council-code=\"request.data?.council\"\n      @booked=\"handleMeetingBooked\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { Button, createResource } from \"frappe-ui\"\nimport { computed, defineAsyncComponent, ref, watch } from \"vue\"\nimport { useRoute, useRouter } from \"vue-router\"\nimport StatusBadge from \"../components/StatusBadge.vue\"\nimport RequestHeader from \"../components/request/RequestHeader.vue\"\n// Lazy-loaded modals (load on demand to reduce bundle size)\nconst SendMessageModal = defineAsyncComponent(\n\t() => import(\"../components/modals/SendMessageModal.vue\"),\n)\nconst BookMeetingModal = defineAsyncComponent(\n\t() => import(\"../components/modals/BookMeetingModal.vue\"),\n)\nimport { useStatutoryClock } from \"../composables/useStatutoryClock\"\n\nconst route = useRoute()\nconst router = useRouter()\n\n// State\nconst fileInput = ref(null)\nconst uploading = ref(false)\nconst submitting = ref(false)\nconst deleting = ref(false)\nconst cancellingMeeting = ref(false)\nconst showSendMessageModal = ref(false)\nconst showBookMeetingModal = ref(false)\n\n// Get request details\nconst request = createResource({\n\turl: \"frappe.client.get\",\n\tparams: {\n\t\tdoctype: \"Request\",\n\t\tname: route.params.id,\n\t},\n\tauto: true,\n})\n\n// Get meetings for this request\nconst meetings = createResource({\n\turl: \"lodgeick.api.get_request_meetings\",\n\tparams: {\n\t\trequest_id: route.params.id,\n\t},\n\tauto: true,\n})\n\n// Get request type configuration\nconst requestTypeConfig = createResource({\n\turl: \"lodgeick.api.get_request_type_config\",\n\tauto: false,\n})\n\n// Get council details for contact information\nconst councilDetails = createResource({\n\turl: \"frappe.client.get\",\n\tauto: false,\n})\n\n// Watch for request data and load config\nwatch(\n\t() => request.data?.request_type,\n\t(requestType) => {\n\t\tif (requestType) {\n\t\t\t// Pass params directly to fetch() instead of in createResource\n\t\t\trequestTypeConfig.fetch({ request_type_code: requestType })\n\t\t}\n\t},\n\t{ immediate: true },\n)\n\n// Watch for council code and load council details\nwatch(\n\t() => request.data?.council,\n\t(councilCode) => {\n\t\tif (councilCode) {\n\t\t\tcouncilDetails.fetch({\n\t\t\t\tdoctype: \"Council\",\n\t\t\t\tname: councilCode,\n\t\t\t\tfields: [\"name\", \"council_name\", \"contact_email\", \"contact_phone\"],\n\t\t\t})\n\t\t}\n\t},\n\t{ immediate: true },\n)\n\n// Get statutory clock data from appropriate source (RC Application or Request)\nconst { clockData, progressPercent } = useStatutoryClock(request)\n\n// Parse form data from draft_full_data as fallback\nconst parsedFormData = computed(() => {\n\tif (!request.data) return {}\n\n\ttry {\n\t\tlet formData = null\n\t\tif (request.data.draft_full_data) {\n\t\t\tformData =\n\t\t\t\ttypeof request.data.draft_full_data === \"string\"\n\t\t\t\t\t? JSON.parse(request.data.draft_full_data)\n\t\t\t\t\t: request.data.draft_full_data\n\t\t}\n\n\t\tif (!formData) return {}\n\n\t\t// Filter out standard fields\n\t\tconst standardFields = [\n\t\t\t\"name\",\n\t\t\t\"owner\",\n\t\t\t\"creation\",\n\t\t\t\"modified\",\n\t\t\t\"modified_by\",\n\t\t\t\"docstatus\",\n\t\t\t\"idx\",\n\t\t\t\"council\",\n\t\t\t\"request_type\",\n\t\t\t\"request_number\",\n\t\t\t\"status\",\n\t\t\t\"requester\",\n\t\t\t\"requester_name\",\n\t\t\t\"requester_email\",\n\t\t\t\"requester_phone\",\n\t\t\t\"requester_signature\",\n\t\t\t\"applicant_address\",\n\t\t\t\"applicant_company\",\n\t\t\t\"property\",\n\t\t\t\"property_address\",\n\t\t\t\"legal_description\",\n\t\t\t\"brief_description\",\n\t\t\t\"detailed_description\",\n\t\t\t\"delivery_preference\",\n\t\t\t\"invoice_to\",\n\t\t\t\"invoice_recipient_name\",\n\t\t\t\"invoice_recipient_email\",\n\t\t\t\"purchase_order_number\",\n\t\t\t\"total_fees\",\n\t\t\t\"total_paid\",\n\t\t\t\"payment_status\",\n\t\t\t\"request_category\",\n\t\t\t\"draft_current_step\",\n\t\t\t\"draft_total_steps\",\n\t\t\t\"draft_full_data\",\n\t\t\t\"form_data\",\n\t\t\t\"signature_date\",\n\t\t]\n\n\t\tconst filtered = {}\n\t\tObject.keys(formData).forEach((key) => {\n\t\t\tif (\n\t\t\t\t!standardFields.includes(key) &&\n\t\t\t\tformData[key] !== null &&\n\t\t\t\tformData[key] !== \"\"\n\t\t\t) {\n\t\t\t\tfiltered[key] = formData[key]\n\t\t\t}\n\t\t})\n\n\t\treturn filtered\n\t} catch (error) {\n\t\tconsole.error(\"Error parsing form data:\", error)\n\t\treturn {}\n\t}\n})\n\n// Get review sections from request type configuration (same logic as ReviewStep)\nconst reviewSections = computed(() => {\n\tif (!requestTypeConfig.data?.steps) return []\n\n\t// Filter steps that should show on review\n\treturn requestTypeConfig.data.steps.filter((step) => step.show_on_review)\n})\n\n// Check if property details should be displayed (same logic as ReviewStep)\nconst hasPropertyDetails = computed(() => {\n\t// Show if request has property address\n\tif (request.data?.property_address) {\n\t\treturn true\n\t}\n\n\t// Check if request type config indicates property is needed\n\tif (requestTypeConfig.data?.property_required) {\n\t\treturn true\n\t}\n\n\treturn false\n})\n\n// Check if a step has any content to show on review\nconst hasReviewContent = (step) => {\n\tif (!step.sections) return false\n\n\tfor (const section of step.sections) {\n\t\tif (!section.show_on_review) continue\n\n\t\tfor (const field of section.fields) {\n\t\t\tif (field.show_on_review && request.data[field.field_name]) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false\n}\n\n// Format field value for display (same as ReviewStep)\nconst formatFieldValue = (field, value) => {\n\tif (value === undefined || value === null || value === \"\") {\n\t\treturn \"Not provided\"\n\t}\n\n\t// Check field type\n\tif (field.field_type === \"Check\") {\n\t\treturn value ? \"Yes\" : \"No\"\n\t}\n\n\tif (field.field_type === \"Date\" && value) {\n\t\t// Format date nicely\n\t\ttry {\n\t\t\treturn new Date(value).toLocaleDateString(\"en-NZ\", {\n\t\t\t\tyear: \"numeric\",\n\t\t\t\tmonth: \"long\",\n\t\t\t\tday: \"numeric\",\n\t\t\t})\n\t\t} catch (e) {\n\t\t\treturn value\n\t\t}\n\t}\n\n\tif (field.field_type === \"Currency\" && value) {\n\t\treturn `$${Number.parseFloat(value).toFixed(2)}`\n\t}\n\n\tif (Array.isArray(value)) {\n\t\treturn value.join(\", \")\n\t}\n\n\treturn value\n}\n\n// Helper function to format field labels (convert snake_case to Title Case)\nconst formatFieldLabel = (fieldName) => {\n\treturn fieldName\n\t\t.split(\"_\")\n\t\t.map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n\t\t.join(\" \")\n}\n\n// Helper function to format simple values (for fallback display)\nconst formatSimpleValue = (value) => {\n\tif (value === null || value === undefined || value === \"\") {\n\t\treturn \"Not provided\"\n\t}\n\n\tif (typeof value === \"boolean\") {\n\t\treturn value ? \"Yes\" : \"No\"\n\t}\n\n\tif (Array.isArray(value)) {\n\t\treturn value.join(\", \")\n\t}\n\n\tif (typeof value === \"object\") {\n\t\treturn JSON.stringify(value)\n\t}\n\n\t// Handle dates\n\tif (typeof value === \"string\" && /^\\d{4}-\\d{2}-\\d{2}/.test(value)) {\n\t\ttry {\n\t\t\treturn new Date(value).toLocaleDateString(\"en-NZ\", {\n\t\t\t\tyear: \"numeric\",\n\t\t\t\tmonth: \"long\",\n\t\t\t\tday: \"numeric\",\n\t\t\t})\n\t\t} catch (e) {\n\t\t\treturn value\n\t\t}\n\t}\n\n\treturn value\n}\n\nconst goBack = () => {\n\trouter.push({ name: \"Dashboard\" })\n}\n\n// Format meeting date with time\nconst formatMeetingDate = (dateStr) => {\n\tif (!dateStr) return \"Not scheduled\"\n\ttry {\n\t\treturn new Date(dateStr).toLocaleString(\"en-NZ\", {\n\t\t\tweekday: \"long\",\n\t\t\tyear: \"numeric\",\n\t\t\tmonth: \"long\",\n\t\t\tday: \"numeric\",\n\t\t\thour: \"2-digit\",\n\t\t\tminute: \"2-digit\",\n\t\t})\n\t} catch (e) {\n\t\treturn dateStr\n\t}\n}\n\nconst formatDate = (dateStr) => {\n\tif (!dateStr) return \"N/A\"\n\tconst date = new Date(dateStr)\n\treturn date.toLocaleDateString(\"en-NZ\", {\n\t\tyear: \"numeric\",\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t\thour: \"2-digit\",\n\t\tminute: \"2-digit\",\n\t})\n}\n\n// Quick Actions\nconst handleUploadDocument = () => {\n\tfileInput.value.click()\n}\n\nconst handleFileUpload = async (event) => {\n\tconst files = Array.from(event.target.files)\n\tif (files.length === 0) return\n\n\tuploading.value = true\n\ttry {\n\t\tfor (const file of files) {\n\t\t\tconst formData = new FormData()\n\t\t\tformData.append(\"file\", file)\n\t\t\tformData.append(\"doctype\", \"Request\")\n\t\t\tformData.append(\"docname\", request.data.name)\n\t\t\tformData.append(\"is_private\", 0)\n\n\t\t\tawait fetch(\"/api/method/upload_file\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t\t},\n\t\t\t\tbody: formData,\n\t\t\t})\n\t\t}\n\n\t\talert(`${files.length} document(s) uploaded successfully!`)\n\t\trequest.reload()\n\t\tevent.target.value = \"\" // Reset file input\n\t} catch (error) {\n\t\tconsole.error(\"Error uploading file:\", error)\n\t\talert(\"Failed to upload document. Please try again.\")\n\t} finally {\n\t\tuploading.value = false\n\t}\n}\n\nconst handleSendMessage = () => {\n\tshowSendMessageModal.value = true\n}\n\nconst handleMessageSent = () => {\n\t// Toast notification would be better than alert to avoid blocking modal close\n\t// alert('Message sent successfully! The council will respond within 2-3 business days.')\n\trequest.reload()\n}\n\nconst handlePrintApplication = () => {\n\twindow.print()\n}\n\nconst handleEditDraft = () => {\n\tif (!request.data) {\n\t\talert(\"Error: Request data not loaded\")\n\t\treturn\n\t}\n\n\tif (!request.data.request_type) {\n\t\talert(\"Error: Request type missing\")\n\t\treturn\n\t}\n\n\tconst url = `/request/new?type=${encodeURIComponent(request.data.request_type)}&draft=${encodeURIComponent(request.data.name)}`\n\trouter.push(url)\n}\n\nconst handleDeleteDraft = async () => {\n\tif (\n\t\t!confirm(\n\t\t\t\"Are you sure you want to delete this draft application? This action cannot be undone.\",\n\t\t)\n\t) {\n\t\treturn\n\t}\n\n\tdeleting.value = true\n\ttry {\n\t\tawait fetch(\"/api/method/frappe.client.delete\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tdoctype: \"Request\",\n\t\t\t\tname: request.data.name,\n\t\t\t}),\n\t\t})\n\n\t\talert(\"Draft deleted successfully\")\n\t\trouter.push({ name: \"Dashboard\" })\n\t} catch (error) {\n\t\tconsole.error(\"Error deleting draft:\", error)\n\t\talert(\"Failed to delete draft. Please try again.\")\n\t} finally {\n\t\tdeleting.value = false\n\t}\n}\n\nconst handleSubmitApplication = async () => {\n\tif (\n\t\t!confirm(\n\t\t\t\"Are you sure you want to submit this application? Once submitted, it cannot be edited.\",\n\t\t)\n\t) {\n\t\treturn\n\t}\n\n\tsubmitting.value = true\n\ttry {\n\t\tconst response = await fetch(\n\t\t\t\"/api/method/lodgeick.lodgeick.doctype.request.request.submit_application\",\n\t\t\t{\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\trequest_id: request.data.name,\n\t\t\t\t}),\n\t\t\t},\n\t\t)\n\n\t\tconst result = await response.json()\n\n\t\tif (result.message && result.message.success) {\n\t\t\talert(\n\t\t\t\t`Application submitted successfully! Request Number: ${result.message.request_number}`,\n\t\t\t)\n\t\t\trequest.reload()\n\t\t} else {\n\t\t\tthrow new Error(\"Failed to submit application\")\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error submitting application:\", error)\n\t\talert(\"Failed to submit application. Please try again.\")\n\t} finally {\n\t\tsubmitting.value = false\n\t}\n}\n\nconst handleMakePayment = () => {\n\t// TODO: Implement payment integration\n\talert(\n\t\t\"Payment feature - Coming soon!\\n\\nYou will receive an invoice via email.\",\n\t)\n}\n\nconst handleBookMeeting = () => {\n\tshowBookMeetingModal.value = true\n}\n\nconst handleMeetingBooked = async (meetingData) => {\n\talert(\n\t\t`Meeting request submitted successfully!\\n\\nMeeting ID: ${meetingData.meeting_id}\\nStatus: ${meetingData.status}\\n\\nA council planner will contact you within 2 business days.`,\n\t)\n\t// Reload meetings list\n\tawait meetings.reload()\n}\n\nconst handleEditMeeting = (meeting) => {\n\t// Re-open the booking modal with existing meeting data\n\t// The modal should be enhanced to accept a meeting prop for editing\n\tshowBookMeetingModal.value = true\n\t// TODO: Pass meeting data to modal for pre-filling\n\talert(\n\t\t\"Edit meeting functionality - opening booking modal.\\n\\nNote: You can submit a new request with updated time slots. The previous request will be updated.\",\n\t)\n}\n\nconst handleCancelMeeting = async (meeting) => {\n\tif (\n\t\t!confirm(\n\t\t\t`Are you sure you want to cancel this meeting request?\\n\\nMeeting Type: ${meeting.meeting_type}\\nStatus: ${meeting.status}\\n\\nThis action cannot be undone.`,\n\t\t)\n\t) {\n\t\treturn\n\t}\n\n\tcancellingMeeting.value = true\n\ttry {\n\t\tconst response = await fetch(\"/api/method/lodgeick.api.cancel_meeting\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tmeeting_id: meeting.name,\n\t\t\t}),\n\t\t})\n\n\t\tconst result = await response.json()\n\n\t\tif (result.message && result.message.success) {\n\t\t\talert(\"Meeting cancelled successfully.\")\n\t\t\tawait meetings.reload()\n\t\t} else {\n\t\t\tthrow new Error(result.message?.error || \"Failed to cancel meeting\")\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error cancelling meeting:\", error)\n\t\talert(\n\t\t\t`Failed to cancel meeting: ${error.message}\\n\\nPlease try again or contact support.`,\n\t\t)\n\t} finally {\n\t\tcancellingMeeting.value = false\n\t}\n}\n</script>\n"],"file":"assets/RequestDetail-BC0fZYFe.js"}