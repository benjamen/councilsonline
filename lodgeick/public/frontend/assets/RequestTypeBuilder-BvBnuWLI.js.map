{"version":3,"file":"RequestTypeBuilder-BvBnuWLI.js","sources":["../../../../frontend/src/pages/RequestTypeBuilder.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <div class=\"bg-white shadow-sm border-b border-gray-200\">\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n        <div class=\"flex items-center justify-between\">\n          <div>\n            <h1 class=\"text-2xl font-bold text-gray-900\">Request Type Builder</h1>\n            <p class=\"mt-1 text-sm text-gray-500\">Visual configuration editor for Request Types</p>\n          </div>\n          <div class=\"flex gap-3\">\n            <button\n              @click=\"loadTemplate\"\n              :disabled=\"loading\"\n              class=\"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {{ loading ? 'Loading...' : 'Load Request Type' }}\n            </button>\n            <button\n              @click=\"saveRequestType\"\n              :disabled=\"saving || loading\"\n              class=\"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {{ saving ? 'Saving...' : 'Save Request Type' }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div class=\"lg:col-span-1\">\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Basic Information</h2>\n\n            <div class=\"space-y-4\">\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 mb-1\">Request Type Name</label>\n                <input\n                  v-model=\"requestType.name\"\n                  type=\"text\"\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"e.g., Building Consent\"\n                />\n              </div>\n\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 mb-1\">Category</label>\n                <select\n                  v-model=\"requestType.category\"\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"\">Select Category</option>\n                  <option value=\"Planning\">Planning</option>\n                  <option value=\"Building\">Building</option>\n                  <option value=\"Social Assistance\">Social Assistance</option>\n                  <option value=\"Environmental\">Environmental</option>\n                  <option value=\"Other\">Other</option>\n                </select>\n              </div>\n\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                <textarea\n                  v-model=\"requestType.description\"\n                  rows=\"4\"\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Describe this request type...\"\n                ></textarea>\n              </div>\n\n              <div class=\"flex items-center gap-4\">\n                <label class=\"flex items-center\">\n                  <input\n                    v-model=\"requestType.collects_payment\"\n                    type=\"checkbox\"\n                    class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                  />\n                  <span class=\"ml-2 text-sm text-gray-700\">Collects Payment</span>\n                </label>\n                <label class=\"flex items-center\">\n                  <input\n                    v-model=\"requestType.make_payment\"\n                    type=\"checkbox\"\n                    class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                  />\n                  <span class=\"ml-2 text-sm text-gray-700\">Makes Payment</span>\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Template Library</h2>\n            <div v-if=\"loading\" class=\"text-center py-4 text-gray-500\">Loading templates...</div>\n            <div v-else-if=\"availableTemplates.length === 0\" class=\"text-center py-4 text-gray-500\">No templates available</div>\n            <div v-else class=\"space-y-2\">\n              <button\n                v-for=\"template in availableTemplates\"\n                :key=\"template.name\"\n                @click=\"applyTemplate(template.name)\"\n                class=\"w-full text-left px-4 py-3 border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-colors\"\n              >\n                <div class=\"font-medium text-gray-900\">{{ template.title }}</div>\n                <div class=\"text-xs text-gray-500 mt-1\">{{ template.description }}</div>\n              </button>\n            </div>\n          </div>\n\n          <div class=\"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">JSON Export</h2>\n            <button\n              @click=\"showJsonPreview = !showJsonPreview\"\n              class=\"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200\"\n            >\n              {{ showJsonPreview ? 'Hide' : 'Show' }} JSON Preview\n            </button>\n            <div v-if=\"showJsonPreview\" class=\"mt-4\">\n              <textarea\n                :value=\"jsonPreview\"\n                readonly\n                rows=\"12\"\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-xs bg-gray-50\"\n              ></textarea>\n              <button\n                @click=\"copyJsonToClipboard\"\n                class=\"mt-2 w-full px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700\"\n              >\n                Copy to Clipboard\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"lg:col-span-2\">\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <div class=\"flex items-center justify-between mb-6\">\n              <h2 class=\"text-lg font-semibold text-gray-900\">Steps Configuration</h2>\n              <button\n                @click=\"addStep\"\n                class=\"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700\"\n              >\n                + Add Step\n              </button>\n            </div>\n\n            <div v-if=\"requestType.steps.length === 0\" class=\"text-center py-12 text-gray-500\">\n              <svg class=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"/>\n              </svg>\n              <p class=\"mt-2 text-sm\">No steps configured yet</p>\n              <p class=\"text-xs text-gray-400 mt-1\">Click \"Add Step\" or use a template to get started</p>\n            </div>\n\n            <div v-else class=\"space-y-4\">\n              <div\n                v-for=\"(step, stepIndex) in requestType.steps\"\n                :key=\"stepIndex\"\n                class=\"border border-gray-200 rounded-lg overflow-hidden\"\n              >\n                <div class=\"bg-gray-50 px-4 py-3 flex items-center justify-between border-b border-gray-200\">\n                  <div class=\"flex items-center gap-3\">\n                    <div class=\"flex items-center gap-2\">\n                      <button\n                        @click=\"moveStep(stepIndex, 'up')\"\n                        :disabled=\"stepIndex === 0\"\n                        class=\"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed\"\n                      >\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 15l7-7 7 7\"/>\n                        </svg>\n                      </button>\n                      <button\n                        @click=\"moveStep(stepIndex, 'down')\"\n                        :disabled=\"stepIndex === requestType.steps.length - 1\"\n                        class=\"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed\"\n                      >\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n                        </svg>\n                      </button>\n                    </div>\n                    <span class=\"text-sm font-medium text-gray-900\">Step {{ stepIndex + 1 }}</span>\n                    <input\n                      v-model=\"step.step_title\"\n                      type=\"text\"\n                      class=\"px-3 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"Step Title\"\n                    />\n                  </div>\n                  <div class=\"flex items-center gap-2\">\n                    <button\n                      @click=\"toggleStep(stepIndex)\"\n                      class=\"text-sm text-gray-600 hover:text-gray-900\"\n                    >\n                      {{ step.expanded ? 'Collapse' : 'Expand' }}\n                    </button>\n                    <button\n                      @click=\"deleteStep(stepIndex)\"\n                      class=\"text-sm text-red-600 hover:text-red-700\"\n                    >\n                      Delete\n                    </button>\n                  </div>\n                </div>\n\n                <div v-if=\"step.expanded\" class=\"p-4\">\n                  <div class=\"grid grid-cols-2 gap-4 mb-4\">\n                    <div>\n                      <label class=\"block text-xs font-medium text-gray-700 mb-1\">Step Code</label>\n                      <input\n                        v-model=\"step.step_code\"\n                        type=\"text\"\n                        class=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\n                        placeholder=\"e.g., applicant_details\"\n                      />\n                    </div>\n                    <div>\n                      <label class=\"block text-xs font-medium text-gray-700 mb-1\">Component</label>\n                      <select\n                        v-model=\"step.step_component\"\n                        class=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\n                      >\n                        <option value=\"DynamicStepRenderer\">Dynamic Step Renderer</option>\n                        <option value=\"Custom\">Custom Component</option>\n                      </select>\n                    </div>\n                  </div>\n\n                  <div class=\"flex gap-4 mb-4\">\n                    <label class=\"flex items-center text-sm\">\n                      <input v-model=\"step.is_required\" type=\"checkbox\" class=\"mr-2\"/>\n                      Required\n                    </label>\n                    <label class=\"flex items-center text-sm\">\n                      <input v-model=\"step.show_on_review\" type=\"checkbox\" class=\"mr-2\"/>\n                      Show on Review\n                    </label>\n                  </div>\n\n                  <div class=\"mt-4\">\n                    <div class=\"flex items-center justify-between mb-2\">\n                      <h4 class=\"text-sm font-medium text-gray-700\">Sections</h4>\n                      <button\n                        @click=\"addSection(stepIndex)\"\n                        class=\"text-xs px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200\"\n                      >\n                        + Add Section\n                      </button>\n                    </div>\n\n                    <div v-if=\"!step.sections || step.sections.length === 0\" class=\"text-xs text-gray-500 text-center py-4\">\n                      No sections yet\n                    </div>\n\n                    <div v-else class=\"space-y-3\">\n                      <div\n                        v-for=\"(section, sectionIndex) in step.sections\"\n                        :key=\"sectionIndex\"\n                        class=\"bg-gray-50 p-3 rounded border border-gray-200\"\n                      >\n                        <div class=\"flex items-center justify-between mb-2\">\n                          <input\n                            v-model=\"section.section_title\"\n                            type=\"text\"\n                            class=\"flex-1 px-2 py-1 border border-gray-300 rounded text-sm mr-2\"\n                            placeholder=\"Section Title\"\n                          />\n                          <button\n                            @click=\"deleteSection(stepIndex, sectionIndex)\"\n                            class=\"text-xs text-red-600 hover:text-red-700\"\n                          >\n                            Delete\n                          </button>\n                        </div>\n\n                        <div class=\"grid grid-cols-2 gap-2 mb-2\">\n                          <div>\n                            <label class=\"block text-xs text-gray-600 mb-1\">Section Code</label>\n                            <input\n                              v-model=\"section.section_code\"\n                              type=\"text\"\n                              class=\"w-full px-2 py-1 border border-gray-300 rounded text-xs\"\n                              placeholder=\"e.g., personal_info\"\n                            />\n                          </div>\n                          <div>\n                            <label class=\"block text-xs text-gray-600 mb-1\">Section Type</label>\n                            <select\n                              v-model=\"section.section_type\"\n                              class=\"w-full px-2 py-1 border border-gray-300 rounded text-xs\"\n                            >\n                              <option value=\"Standard\">Standard</option>\n                              <option value=\"Tab\">Tab</option>\n                              <option value=\"Accordion\">Accordion</option>\n                            </select>\n                          </div>\n                        </div>\n\n                        <div class=\"mt-3\">\n                          <div class=\"flex items-center justify-between mb-2\">\n                            <span class=\"text-xs font-medium text-gray-700\">Fields</span>\n                            <button\n                              @click=\"addField(stepIndex, sectionIndex)\"\n                              class=\"text-xs px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200\"\n                            >\n                              + Add Field\n                            </button>\n                          </div>\n\n                          <div v-if=\"!section.fields || section.fields.length === 0\" class=\"text-xs text-gray-400 text-center py-2\">\n                            No fields yet\n                          </div>\n\n                          <div v-else class=\"space-y-2\">\n                            <div\n                              v-for=\"(field, fieldIndex) in section.fields\"\n                              :key=\"fieldIndex\"\n                              class=\"bg-white p-2 rounded border border-gray-200\"\n                            >\n                              <div class=\"grid grid-cols-3 gap-2\">\n                                <div class=\"col-span-2\">\n                                  <input\n                                    v-model=\"field.field_label\"\n                                    type=\"text\"\n                                    class=\"w-full px-2 py-1 border border-gray-300 rounded text-xs\"\n                                    placeholder=\"Field Label\"\n                                  />\n                                </div>\n                                <div>\n                                  <select\n                                    v-model=\"field.field_type\"\n                                    class=\"w-full px-2 py-1 border border-gray-300 rounded text-xs\"\n                                  >\n                                    <option value=\"Data\">Text</option>\n                                    <option value=\"Text\">Textarea</option>\n                                    <option value=\"Select\">Select</option>\n                                    <option value=\"Date\">Date</option>\n                                    <option value=\"Check\">Checkbox</option>\n                                    <option value=\"Currency\">Currency</option>\n                                    <option value=\"Int\">Integer</option>\n                                    <option value=\"Float\">Float</option>\n                                  </select>\n                                </div>\n                              </div>\n\n                              <div class=\"grid grid-cols-3 gap-2 mt-2\">\n                                <div class=\"col-span-2\">\n                                  <input\n                                    v-model=\"field.field_name\"\n                                    type=\"text\"\n                                    class=\"w-full px-2 py-1 border border-gray-300 rounded text-xs\"\n                                    placeholder=\"field_name\"\n                                  />\n                                </div>\n                                <div class=\"flex items-center gap-2\">\n                                  <label class=\"flex items-center text-xs\">\n                                    <input v-model=\"field.is_required\" type=\"checkbox\" class=\"mr-1 text-xs\"/>\n                                    Required\n                                  </label>\n                                  <button\n                                    @click=\"deleteField(stepIndex, sectionIndex, fieldIndex)\"\n                                    class=\"text-xs text-red-600 hover:text-red-700 ml-auto\"\n                                  >\n                                    âœ•\n                                  </button>\n                                </div>\n                              </div>\n\n                              <div v-if=\"field.field_type === 'Select'\" class=\"mt-2\">\n                                <textarea\n                                  v-model=\"field.options\"\n                                  rows=\"2\"\n                                  class=\"w-full px-2 py-1 border border-gray-300 rounded text-xs\"\n                                  placeholder=\"Options (one per line)\"\n                                ></textarea>\n                              </div>\n\n                              <div class=\"mt-2\">\n                                <input\n                                  v-model=\"field.validation\"\n                                  type=\"text\"\n                                  class=\"w-full px-2 py-1 border border-gray-300 rounded text-xs\"\n                                  placeholder=\"Validation: email, phone, eval:value >= 18\"\n                                />\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { ref, reactive, computed, onMounted } from 'vue'\nimport { call } from 'frappe-ui'\n\n// Request Type Data Model\nconst requestType = reactive({\n  name: '',\n  category: '',\n  description: '',\n  collects_payment: false,\n  make_payment: false,\n  steps: []\n})\n\n// Available Templates\nconst availableTemplates = ref([])\nconst loading = ref(false)\nconst saving = ref(false)\nconst showJsonPreview = ref(false)\n\n// JSON Preview computed\nconst jsonPreview = computed(() => {\n  return JSON.stringify(requestType, null, 2)\n})\n\n// --- Utility Functions ---\n\n// Function to renumber steps after move/delete\nfunction renumberSteps() {\n  requestType.steps.forEach((step, i) => {\n    step.step_number = i + 1\n  })\n}\n\n// Function to generate a stable unique ID for v-for keys\nfunction generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).substr(2, 5)\n}\n\n// --- Step Management ---\n\nfunction addStep() {\n  requestType.steps.push({\n    id: generateUniqueId(), // Added stable ID\n    step_number: requestType.steps.length + 1,\n    step_code: `step_${requestType.steps.length + 1}`,\n    step_title: `Step ${requestType.steps.length + 1}`,\n    step_component: 'DynamicStepRenderer',\n    is_required: true,\n    show_on_review: true,\n    expanded: true, // Ensure it's expanded by default\n    sections: []\n  })\n}\n\nfunction deleteStep(index) {\n  if (confirm('Are you sure you want to delete this step?')) {\n    requestType.steps.splice(index, 1)\n    renumberSteps() // Renumber after deletion\n  }\n}\n\nfunction moveStep(index, direction) {\n  const newIndex = direction === 'up' ? index - 1 : index + 1\n  if (newIndex >= 0 && newIndex < requestType.steps.length) {\n    // Standard swap logic\n    const temp = requestType.steps[index]\n    requestType.steps[index] = requestType.steps[newIndex]\n    requestType.steps[newIndex] = temp\n    renumberSteps() // Renumber after move\n  }\n}\n\nfunction toggleStep(index) {\n  // Ensure the property exists before toggling\n  const step = requestType.steps[index]\n  step.expanded = (step.expanded === undefined) ? false : !step.expanded \n}\n\n// --- Section Management ---\nfunction addSection(stepIndex) {\n  if (!requestType.steps[stepIndex].sections) {\n    requestType.steps[stepIndex].sections = []\n  }\n  requestType.steps[stepIndex].sections.push({\n    id: generateUniqueId(), // Added stable ID\n    section_code: `section_${requestType.steps[stepIndex].sections.length + 1}`,\n    section_title: '',\n    section_type: 'Standard',\n    sequence: requestType.steps[stepIndex].sections.length + 1,\n    is_enabled: true,\n    is_required: true,\n    show_on_review: true,\n    fields: []\n  })\n}\n\nfunction deleteSection(stepIndex, sectionIndex) {\n  requestType.steps[stepIndex].sections.splice(sectionIndex, 1)\n}\n\n// --- Field Management ---\nfunction addField(stepIndex, sectionIndex) {\n  if (!requestType.steps[stepIndex].sections[sectionIndex].fields) {\n    requestType.steps[stepIndex].sections[sectionIndex].fields = []\n  }\n  requestType.steps[stepIndex].sections[sectionIndex].fields.push({\n    id: generateUniqueId(), // Added stable ID\n    field_name: '',\n    field_label: '',\n    field_type: 'Data',\n    is_required: false,\n    show_on_review: true,\n    options: '',\n    validation: ''\n  })\n}\n\nfunction deleteField(stepIndex, sectionIndex, fieldIndex) {\n  requestType.steps[stepIndex].sections[sectionIndex].fields.splice(fieldIndex, 1)\n}\n\n// --- API Calls / Load / Save ---\n\nasync function loadAvailableTemplates() {\n  try {\n    loading.value = true\n    const response = await call('lodgeick.api.get_step_templates')\n    availableTemplates.value = response || []\n  } catch (error) {\n    console.error('Failed to load templates:', error)\n    alert('Failed to load templates from backend')\n  } finally {\n    loading.value = false\n  }\n}\n\nasync function applyTemplate(templateName) {\n  try {\n    loading.value = true\n    const response = await call('lodgeick.api.load_step_template', { template_name: templateName })\n\n    if (!response || !response.success || !response.template) {\n      alert(`Failed to load template: ${response?.error || 'Unknown error'}`)\n      return\n    }\n\n    const template = response.template\n\n    // Create new step from template\n    const newStep = {\n      id: generateUniqueId(), // Ensure new step has a unique ID\n      step_number: requestType.steps.length + 1,\n      step_code: template.step_config.step_code,\n      step_title: template.step_config.step_title,\n      step_component: template.step_config.step_component,\n      is_enabled: template.step_config.is_enabled ?? true,\n      is_required: template.step_config.is_required ?? true,\n      show_on_review: template.step_config.show_on_review ?? true,\n      description: template.step_config.description || '',\n      expanded: true, // IMPORTANT: Ensure step is expanded for visibility\n      sections: []\n    }\n\n    // Add sections from template (Defensive checks added for existence)\n    if (template.sections && Array.isArray(template.sections)) {\n        for (const section of template.sections) {\n            const newSection = {\n                id: generateUniqueId(), // Ensure new section has a unique ID\n                section_code: section.section_code,\n                section_title: section.section_title,\n                section_type: section.section_type,\n                // ... (other section properties)\n                fields: []\n            }\n\n            // Add fields from template\n            if (section.fields && Array.isArray(section.fields)) {\n                for (const field of section.fields) {\n                    newSection.fields.push({\n                        id: generateUniqueId(), // Ensure new field has a unique ID\n                        field_name: field.field_name,\n                        // ... (other field properties)\n                        // Note: Only necessary properties for the builder were kept for brevity\n                    })\n                }\n            }\n\n            newStep.sections.push(newSection)\n        }\n    }\n\n    // Add step to request type\n    requestType.steps.push(newStep)\n\n    alert(`Template \"${template.template_title}\" applied successfully!`)\n  } catch (error) {\n    console.error('Failed to apply template:', error)\n    alert('Failed to apply template')\n  } finally {\n    loading.value = false\n  }\n}\n\n\nfunction loadTemplate() {\n  const rtName = prompt('Enter Request Type name to load:')\n  if (!rtName) return\n\n  loadRequestTypeConfig(rtName)\n}\n\nasync function loadRequestTypeConfig(rtName) {\n  try {\n    loading.value = true\n    const response = await call('lodgeick.api.load_request_type_config', { request_type_name: rtName })\n\n    if (!response.success) {\n      alert(`Failed to load Request Type: ${response.error}`)\n      return\n    }\n\n    const config = response.config\n\n    // 1. Update basic metadata\n    requestType.name = config.name\n    requestType.category = config.category\n    requestType.description = config.description\n    requestType.collects_payment = config.collects_payment\n    requestType.make_payment = config.make_payment\n    \n    // 2. Process steps to ensure IDs and expanded status\n    requestType.steps = (config.steps || []).map(step => {\n      // Ensure the step is expanded and has an ID for proper rendering\n      step.expanded = true; \n      step.id = step.id || generateUniqueId();\n\n      // Ensure sections also have IDs\n      step.sections = (step.sections || []).map(section => {\n        section.id = section.id || generateUniqueId();\n        \n        // Ensure fields also have IDs\n        section.fields = (section.fields || []).map(field => {\n          field.id = field.id || generateUniqueId();\n          return field;\n        });\n\n        return section;\n      });\n\n      return step;\n    })\n\n\n    alert(`Request Type \"${rtName}\" loaded successfully!`)\n  } catch (error) {\n    console.error('Failed to load Request Type:', error)\n    alert('Failed to load Request Type')\n  } finally {\n    loading.value = false\n  }\n}\n\n// Save\nasync function saveRequestType() {\n  // ... (Existing validation logic remains, but more robust checks are highly recommended)\n  // --- New: Preliminary Uniqueness Check (Crucial for robust API/DB saves) ---\n  const stepCodes = new Set();\n  const fieldNames = new Set();\n\n  for (const step of requestType.steps) {\n    if (stepCodes.has(step.step_code)) {\n      alert(`Error: Duplicate Step Code found: ${step.step_code}`)\n      return\n    }\n    stepCodes.add(step.step_code)\n\n    if (!step.step_code || !step.step_title) {\n        alert('All steps must have a step code and title')\n        return\n    }\n    \n    for (const section of step.sections) {\n      if (!section.section_code || !section.section_title) {\n        alert('All sections must have a code and title')\n        return\n      }\n\n      for (const field of section.fields) {\n        if (!field.field_name || !field.field_label || !field.field_type) {\n          alert('All fields must have a name, label, and type')\n          return\n        }\n        if (fieldNames.has(field.field_name)) {\n          alert(`Error: Duplicate Field Name found: ${field.field_name}. Field names must be unique across the entire Request Type.`)\n          return\n        }\n        fieldNames.add(field.field_name)\n      }\n    }\n  }\n  // --- End Uniqueness Check ---\n\n\n  try {\n    saving.value = true\n    // NOTE: It is advisable to clean the data before sending, removing the temporary 'id' and 'expanded' properties.\n    const configToSave = JSON.parse(JSON.stringify(requestType)); // Deep clone\n    configToSave.steps.forEach(step => {\n        delete step.id; // Remove temporary ID\n        delete step.expanded; // Remove temporary UI state\n\n        if (step.sections) {\n            step.sections.forEach(section => {\n                delete section.id;\n                if (section.fields) {\n                    section.fields.forEach(field => {\n                        delete field.id;\n                    });\n                }\n            });\n        }\n    });\n\n\n    const response = await call('lodgeick.api.save_request_type_config', { config: configToSave })\n\n    if (!response.success) {\n      alert(`Failed to save: ${response.error}`)\n      return\n    }\n\n    alert(response.message)\n  } catch (error) {\n    console.error('Failed to save Request Type:', error)\n    alert('Failed to save Request Type')\n  } finally {\n    saving.value = false\n  }\n}\n\n// JSON Export\nfunction copyJsonToClipboard() {\n  navigator.clipboard.writeText(jsonPreview.value)\n    .then(() => {\n      alert('JSON copied to clipboard!')\n    })\n    .catch(err => {\n      console.error('Failed to copy:', err)\n      alert('Failed to copy to clipboard')\n    })\n}\n\n// Load templates on mount\nonMounted(() => {\n  loadAvailableTemplates()\n})\n</script>"],"names":["requestType","reactive","availableTemplates","ref","loading","saving","showJsonPreview","jsonPreview","computed","renumberSteps","step","i","generateUniqueId","addStep","deleteStep","index","moveStep","direction","newIndex","temp","toggleStep","addSection","stepIndex","deleteSection","sectionIndex","addField","deleteField","fieldIndex","loadAvailableTemplates","__async","response","call","error","applyTemplate","templateName","template","newStep","_a","_b","_c","section","newSection","field","loadTemplate","rtName","loadRequestTypeConfig","config","saveRequestType","stepCodes","fieldNames","configToSave","copyJsonToClipboard","err","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_cache","_hoisted_12","$event","_vModelText","_vModelSelect","_hoisted_13","_hoisted_14","_vModelCheckbox","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_Fragment","_renderList","_hoisted_21","_toDisplayString","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_35","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_44","_hoisted_45","_hoisted_47","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_56","_hoisted_57","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_69","_hoisted_70","_hoisted_72","_hoisted_73","_hoisted_75","_hoisted_76","_hoisted_78"],"mappings":"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"}