var ne=Object.defineProperty;var te=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var le=(e,m,i)=>m in e?ne(e,m,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[m]=i,N=(e,m)=>{for(var i in m||(m={}))se.call(m,i)&&le(e,i,m[i]);if(te)for(var i of te(m))de.call(m,i)&&le(e,i,m[i]);return e};var R=(e,m,i)=>new Promise((g,a)=>{var M=v=>{try{p(i.next(v))}catch(b){a(b)}},$=v=>{try{p(i.throw(v))}catch(b){a(b)}},p=v=>v.done?g(v.value):Promise.resolve(v.value).then(M,$);p((i=i.apply(e,m)).next())});import{u as ue,i as ce,a as me,b as ve}from"./NewRequest-DfcWmknq.js";import{a as n,o as r,b as t,B as P,c as D,e as y,O as z,a2 as U,t as w,n as F,aj as oe,Q as pe,R as V,P as I,F as A,W as E,au as fe,_ as ge,T as be,D as ie,w as G,a6 as O,ak as W,ae,at as ye,r as re,ag as he,u as L}from"./vue-vendor-B0shnPjy.js";import{k as Z}from"./frappe-ui-DjR51muK.js";import{p as xe,x as ke,I as we,y as _e,m as Ve,Q as $e,V as Ce,N as Se}from"./ui-components-BkacYXVN.js";import"./request.service-W88L9M1G.js";import"./index-C-Rb0cle.js";import"./RequestHeader-CFcOgVuT.js";function qe(e,m){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const Me={class:"space-y-4"},Fe={class:"block"},Be={class:"text-sm font-medium text-gray-900"},je={key:0,class:"text-red-500"},ze={key:0,class:"text-xs text-gray-500 mt-1"},Pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue=["disabled"],De=["disabled"],Te={class:"text-center"},Ae={class:"text-xs text-gray-500"},Ee=["accept","multiple"],Ie={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Re={class:"flex items-center space-x-3"},Le={class:"flex-1"},Oe={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},Ne={key:1,class:"space-y-2"},He={class:"flex items-center space-x-3 flex-1 min-w-0"},Qe={class:"flex-shrink-0"},Je={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},Ge=["src","alt"],Ke={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},We={class:"flex-1 min-w-0"},Ze={class:"text-sm font-medium text-gray-900 truncate"},Xe={class:"text-xs text-gray-500"},Ye=["onClick"],et={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},tt={class:"relative bg-black aspect-video"},lt=["src"],at={key:2,class:"absolute inset-0 pointer-events-none"},rt={class:"w-full h-full grid grid-cols-3 grid-rows-3"},ot={class:"bg-gray-900 px-6 py-6"},it={key:0,class:"flex items-center justify-center space-x-6"},nt={key:1,class:"flex items-center justify-center space-x-4"},st={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(e,{emit:m}){const i=e,g=m,a=P(null),M=P(null),$=P(!1),p=P(null),v=P(null),b=P(!1),h=P(0),S=D({get:()=>i.modelValue,set:f=>g("update:modelValue",f)}),C=()=>{var f;(f=a.value)==null||f.click()},q=f=>R(this,null,function*(){const d=Array.from(f.target.files);yield k(d),f.target.value=""}),k=f=>R(this,null,function*(){const d=[];for(const x of f){if(x.size>i.maxSize){alert(`File ${x.name} exceeds maximum size of ${J(i.maxSize)}`);continue}let j=null;x.type.startsWith("image/")&&(j=yield c(x)),d.push({file:x,name:x.name,size:x.size,type:x.type,preview:j,uploadDate:new Date().toISOString()})}if(d.length>0){const x=i.multiple?[...S.value,...d]:d;g("update:modelValue",x),yield _(d)}}),c=f=>new Promise(d=>{const x=new FileReader;x.onload=j=>d(j.target.result),x.onerror=()=>d(null),x.readAsDataURL(f)}),_=f=>R(this,null,function*(){b.value=!0,h.value=0;try{for(let d=0;d<f.length;d++){const x=f[d],j=setInterval(()=>{h.value=Math.min(h.value+10,90)},100);yield new Promise(ee=>{g("upload",x,ee)}),clearInterval(j),h.value=(d+1)/f.length*100}}catch(d){console.error("Upload error:",d),alert("Failed to upload files. Please try again.")}finally{b.value=!1,h.value=0}}),Q=f=>{const d=[...S.value];d.splice(f,1),g("update:modelValue",d)},u=()=>R(this,null,function*(){try{$.value=!0,yield o()}catch(f){console.error("Camera error:",f),alert("Unable to access camera. Please check permissions or upload a file instead."),$.value=!1}}),o=()=>R(this,null,function*(){try{const f=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});v.value=f,M.value&&(M.value.srcObject=f)}catch(f){throw f}}),l=()=>{const f=M.value,d=document.createElement("canvas");d.width=f.videoWidth,d.height=f.videoHeight,d.getContext("2d").drawImage(f,0,0,d.width,d.height),p.value=d.toDataURL("image/jpeg",.9)},s=()=>{p.value=null},B=()=>R(this,null,function*(){if(!p.value)return;const f=yield(yield fetch(p.value)).blob(),d=new File([f],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield k([d]),T()}),T=()=>{v.value&&(v.value.getTracks().forEach(f=>f.stop()),v.value=null),p.value=null,$.value=!1},J=f=>{if(f===0)return"0 Bytes";const d=1024,x=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(f)/Math.log(d));return Math.round(f/Math.pow(d,j)*100)/100+" "+x[j]};return(f,d)=>(r(),n("div",Me,[t("label",Fe,[t("span",Be,[U(w(e.label)+" ",1),e.required?(r(),n("span",je,"*")):y("",!0)]),e.helpText?(r(),n("p",ze,w(e.helpText),1)):y("",!0)]),t("div",Pe,[e.allowCamera?(r(),n("button",{key:0,onClick:u,type:"button",class:F(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":b.value}]),disabled:b.value},[...d[0]||(d[0]=[oe('<div class="text-center" data-v-2b18513c><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2b18513c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2b18513c></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2b18513c></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2b18513c>Take Photo</p><p class="text-xs text-gray-500" data-v-2b18513c>Use camera</p></div>',1)])],10,Ue)):y("",!0),t("button",{onClick:C,type:"button",class:F(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":b.value}]),disabled:b.value},[t("div",Te,[d[1]||(d[1]=t("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),d[2]||(d[2]=t("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),t("p",Ae,"Browse "+w(e.multiple?"files":"file"),1)]),t("input",{ref_key:"fileInput",ref:a,type:"file",accept:e.accept,multiple:e.multiple,onChange:q,class:"hidden"},null,40,Ee)],10,De)]),b.value?(r(),n("div",Ie,[t("div",Re,[d[4]||(d[4]=t("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t("div",Le,[d[3]||(d[3]=t("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),t("div",Oe,[t("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:pe({width:h.value+"%"})},null,4)])])])])):y("",!0),S.value.length>0?(r(),n("div",Ne,[V(fe,{name:"list"},{default:I(()=>[(r(!0),n(A,null,E(S.value,(x,j)=>(r(),n("div",{key:x.name+j,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[t("div",He,[t("div",Qe,[x.preview?(r(),n("div",Je,[t("img",{src:x.preview,alt:x.name,class:"w-full h-full object-cover"},null,8,Ge)])):(r(),n("div",Ke,[...d[5]||(d[5]=[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),t("div",We,[t("p",Ze,w(x.name),1),t("p",Xe,w(J(x.size)),1)]),t("button",{onClick:ee=>Q(j),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...d[6]||(d[6]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ye)])]))),128))]),_:1})])):y("",!0),(r(),z(be,{to:"body"},[$.value?(r(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:ge(T,["self"])},[t("div",et,[t("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[d[8]||(d[8]=t("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),t("button",{onClick:T,class:"text-gray-400 hover:text-white transition-colors"},[...d[7]||(d[7]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",tt,[p.value?(r(),n("img",{key:1,src:p.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,lt)):(r(),n("video",{key:0,ref_key:"videoElement",ref:M,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),p.value?y("",!0):(r(),n("div",at,[t("div",rt,[(r(),n(A,null,E(9,x=>t("div",{key:x,class:"border border-white/20"})),64))])]))]),t("div",ot,[p.value?(r(),n("div",nt,[t("button",{onClick:s,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),t("button",{onClick:B,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(r(),n("div",it,[t("button",{onClick:l,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...d[9]||(d[9]=[t("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):y("",!0)]))]))}},dt=Z(st,[["__scopeId","data-v-2b18513c"]]),ut={class:"space-y-4"},ct={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mt={class:"block text-sm font-medium text-gray-700 mb-2"},vt={key:0,class:"text-red-500"},pt={class:"relative"},ft=["required"],gt=["value"],bt={class:"block text-sm font-medium text-gray-700 mb-2"},yt={key:0,class:"text-red-500"},ht={class:"relative"},xt=["required","disabled"],kt=["value"],wt={key:0,class:"mt-1 text-xs text-gray-500"},_t={class:"block text-sm font-medium text-gray-700 mb-2"},Vt={key:0,class:"text-red-500"},$t={class:"relative"},Ct=["required","disabled"],St=["value"],qt={key:0,class:"mt-1 text-xs text-gray-500"},Mt={class:"block text-sm font-medium text-gray-700 mb-2"},Ft={key:0,class:"text-red-500"},Bt=["required"],jt={class:"md:col-span-2"},zt={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Pt={class:"flex items-start"},Ut={class:"flex-1"},Dt={class:"text-sm text-green-700 mt-1"},Tt={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:m}){const i=e,g=m,a=P({street:"",barangay:"",municipality:"",province:"",zipCode:""}),M=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],$={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Parañaque City","Las Piñas City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},p={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},v=D(()=>a.value.province?$[a.value.province]||[]:[]),b=D(()=>a.value.municipality?p[a.value.municipality]||["Other - Please specify in Street field"]:[]),h=D(()=>{const k=[];return a.value.street&&k.push(a.value.street),a.value.barangay&&k.push(`Brgy. ${a.value.barangay}`),a.value.municipality&&k.push(a.value.municipality),a.value.province&&k.push(a.value.province),a.value.zipCode&&k.push(a.value.zipCode),k.length>0?k.join(", "):""}),S=()=>{a.value.municipality="",a.value.barangay="",q()},C=()=>{a.value.barangay="",q()},q=()=>{g("update:modelValue",{full_address:h.value,address_line:a.value.street,barangay:a.value.barangay,municipality:a.value.municipality,province:a.value.province,zip_code:a.value.zipCode})};return ie(()=>{var k;if(i.modelValue)if(typeof i.modelValue=="string"){const c=i.modelValue.split(",").map(_=>_.trim());c.length>=3&&(a.value.street=c[0]||"",a.value.barangay=((k=c[1])==null?void 0:k.replace("Brgy. ",""))||"",a.value.municipality=c[2]||"",a.value.province=c[3]||"",a.value.zipCode=c[4]||"")}else typeof i.modelValue=="object"&&(a.value=N(N({},a.value),i.modelValue))}),G(()=>i.modelValue,k=>{k&&typeof k=="object"&&(a.value=N(N({},a.value),k))}),(k,c)=>(r(),n("div",ut,[c[18]||(c[18]=oe('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),t("div",ct,[t("div",null,[t("label",mt,[c[5]||(c[5]=U(" Province ",-1)),e.required?(r(),n("span",vt,"*")):y("",!0)]),t("div",pt,[O(t("select",{"onUpdate:modelValue":c[0]||(c[0]=_=>a.value.province=_),onChange:S,required:e.required,class:F(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.province}])},[c[6]||(c[6]=t("option",{value:""},"Select Province",-1)),(r(),n(A,null,E(M,_=>t("option",{key:_,value:_},w(_),9,gt)),64))],42,ft),[[W,a.value.province]]),c[7]||(c[7]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),t("div",null,[t("label",bt,[c[8]||(c[8]=U(" Municipality/City ",-1)),e.required?(r(),n("span",yt,"*")):y("",!0)]),t("div",ht,[O(t("select",{"onUpdate:modelValue":c[1]||(c[1]=_=>a.value.municipality=_),onChange:C,required:e.required,disabled:!a.value.province,class:F(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.municipality}])},[c[9]||(c[9]=t("option",{value:""},"Select Municipality/City",-1)),(r(!0),n(A,null,E(v.value,_=>(r(),n("option",{key:_,value:_},w(_),9,kt))),128))],42,xt),[[W,a.value.municipality]]),c[10]||(c[10]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.province?y("",!0):(r(),n("p",wt,"Select province first"))]),t("div",null,[t("label",_t,[c[11]||(c[11]=U(" Barangay ",-1)),e.required?(r(),n("span",Vt,"*")):y("",!0)]),t("div",$t,[O(t("select",{"onUpdate:modelValue":c[2]||(c[2]=_=>a.value.barangay=_),onChange:q,required:e.required,disabled:!a.value.municipality,class:F(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.barangay}])},[c[12]||(c[12]=t("option",{value:""},"Select Barangay",-1)),(r(!0),n(A,null,E(b.value,_=>(r(),n("option",{key:_,value:_},w(_),9,St))),128))],42,Ct),[[W,a.value.barangay]]),c[13]||(c[13]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.municipality?y("",!0):(r(),n("p",qt,"Select municipality first"))]),t("div",null,[t("label",Mt,[c[14]||(c[14]=U(" Street / House No. ",-1)),e.required?(r(),n("span",Ft,"*")):y("",!0)]),O(t("input",{"onUpdate:modelValue":c[3]||(c[3]=_=>a.value.street=_),onInput:q,type:"text",required:e.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:F(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.street}])},null,42,Bt),[[ae,a.value.street]])]),t("div",jt,[c[15]||(c[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[U(" ZIP Code "),t("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),O(t("input",{"onUpdate:modelValue":c[4]||(c[4]=_=>a.value.zipCode=_),onInput:q,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[ae,a.value.zipCode]])])]),h.value?(r(),n("div",zt,[t("div",Pt,[c[17]||(c[17]=t("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",Ut,[c[16]||(c[16]=t("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),t("p",Dt,w(h.value),1)])])])):y("",!0)]))}},At={class:"space-y-4"},Et={class:"flex items-center justify-between mb-4"},It={class:"block text-sm font-medium text-gray-700"},Rt={key:0,class:"text-red-500"},Lt={key:0,class:"space-y-3"},Ot=["value"],Nt={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ht={class:"flex items-start justify-between"},Qt={class:"flex-1 space-y-1"},Jt={class:"text-sm font-medium text-gray-900"},Gt={class:"text-sm text-gray-700"},Kt={key:0,class:"text-xs text-gray-600"},Wt={key:1},Zt={key:2,class:"flex items-center space-x-2"},Xt={__name:"PropertyAddressSelector",props:{modelValue:{type:Object,default:()=>({})},label:{type:String,default:"Residential Address"},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:m}){const i=e,g=m,{loadUserProfile:a,getAllProperties:M,defaultProperty:$}=ue(),p=P(!1),v=P(""),b=P(!1),h=P(i.modelValue||{}),S=D(()=>M.value||[]),C=D(()=>!v.value||v.value==="__new__"?null:S.value.find(o=>o.name===v.value));function q(o){const l=[];return o.property_name&&l.push(o.property_name),o.street&&l.push(o.street),o.suburb&&l.push(o.suburb),o.city&&l.push(o.city),l.join(", ")||"Unnamed Property"}function k(o){const l=[];return o.street&&l.push(o.street),o.barangay&&l.push(`Brgy. ${o.barangay}`),o.municipality&&l.push(o.municipality),o.province&&l.push(o.province),(o.zip_code||o.postcode)&&l.push(o.zip_code||o.postcode),l.join(", ")}function c(){if(v.value==="__new__"){h.value={},p.value=!1;return}C.value&&(h.value={full_address:k(C.value),address_line:C.value.street||"",barangay:C.value.barangay||"",municipality:C.value.municipality||C.value.city||"",province:C.value.province||"",zip_code:C.value.zip_code||C.value.postcode||""},g("update:modelValue",h.value))}function _(o){h.value=o,g("update:modelValue",o)}function Q(){p.value=!1}function u(){confirm("Are you sure you want to remove this property from selection?")&&(v.value="",h.value={},g("update:modelValue",{}))}return ie(()=>R(this,null,function*(){yield a(),(!i.modelValue||Object.keys(i.modelValue).length===0)&&$.value&&(v.value=$.value.name,c()),S.value.length>0&&(p.value=!0)})),G(()=>i.modelValue,o=>{o&&Object.keys(o).length>0&&(h.value=o)},{deep:!0}),(o,l)=>(r(),n("div",At,[t("div",Et,[t("label",It,[U(w(e.label)+" ",1),e.required?(r(),n("span",Rt,"*")):y("",!0)]),S.value.length>0?(r(),n("button",{key:0,onClick:l[0]||(l[0]=s=>p.value=!p.value),type:"button",class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},w(p.value?"Enter manually":"Select from my properties"),1)):y("",!0)]),p.value&&S.value.length>0?(r(),n("div",Lt,[O(t("select",{"onUpdate:modelValue":l[1]||(l[1]=s=>v.value=s),onChange:c,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[l[3]||(l[3]=t("option",{value:""},"Select a property",-1)),(r(!0),n(A,null,E(S.value,s=>(r(),n("option",{key:s.name,value:s.name},w(q(s)),9,Ot))),128)),l[4]||(l[4]=t("option",{value:"__new__"},"+ Add New Property",-1))],544),[[W,v.value]]),C.value&&v.value!=="__new__"?(r(),n("div",Nt,[t("div",Ht,[t("div",Qt,[t("p",Jt,w(C.value.property_name||"Property"),1),t("p",Gt,w(k(C.value)),1),C.value.legal_description?(r(),n("p",Kt,w(C.value.legal_description),1)):y("",!0)]),t("div",{class:"flex space-x-2"},[t("button",{onClick:Q,type:"button",class:"text-sm text-blue-600 hover:text-blue-700",title:"Edit property"},[...l[5]||(l[5]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),t("button",{onClick:u,type:"button",class:"text-sm text-red-600 hover:text-red-700",title:"Remove property"},[...l[6]||(l[6]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])])])):y("",!0)])):y("",!0),!p.value||v.value==="__new__"||S.value.length===0?(r(),n("div",Wt,[V(Tt,{modelValue:h.value,"onUpdate:modelValue":_,required:e.required},null,8,["modelValue","required"])])):y("",!0),(!p.value||v.value==="__new__")&&!v.value?(r(),n("div",Zt,[O(t("input",{"onUpdate:modelValue":l[2]||(l[2]=s=>b.value=s),type:"checkbox",id:"save-property",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ye,b.value]]),l[7]||(l[7]=t("label",{for:"save-property",class:"text-sm text-gray-700"}," Save this property to my profile for future use ",-1))])):y("",!0)]))}},Yt={class:"inline-block relative group"},el={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:e=>["top","bottom","left","right"].includes(e)}},setup(e){const m=e,i=P(!1),g=D(()=>{switch(m.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),a=D(()=>{switch(m.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(M,$)=>(r(),n("div",Yt,[re(M.$slots,"trigger",{},()=>[t("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:$[0]||($[0]=p=>i.value=!0),onMouseleave:$[1]||($[1]=p=>i.value=!1)},[...$[2]||($[2]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),V(he,{name:"tooltip"},{default:I(()=>[i.value?(r(),n("div",{key:0,class:F(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",g.value]),style:{"max-width":"300px","white-space":"normal"}},[re(M.$slots,"default",{},()=>[U(w(e.text),1)],!0),t("div",{class:F(["tooltip-arrow",a.value])},null,2)],2)):y("",!0)]),_:3})]))}},tl=Z(el,[["__scopeId","data-v-cfd551b3"]]),ll={key:0,class:"mt-1 text-xs text-red-600"},al={key:1,class:"mt-1 text-xs text-gray-500"},H={__name:"FieldError",props:{error:{type:String,default:""},description:{type:String,default:""}},setup(e){return(m,i)=>(r(),n("div",null,[e.error?(r(),n("p",ll,w(e.error),1)):e.description?(r(),n("p",al,w(e.description),1)):y("",!0)]))}},rl={class:"form-group"},ol={class:"flex items-center h-5"},il=["id","name","checked","required"],nl={class:"ml-3 text-sm"},sl=["for"],dl={key:0,class:"text-red-500 ml-1"},ul={__name:"CheckboxField",props:{field:{type:Object,required:!0},modelValue:{type:Boolean,default:!1},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(e){return(m,i)=>(r(),n("div",rl,[t("div",{class:F(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!e.validationError,"border-red-500 bg-red-50":e.validationError}])},[t("div",ol,[t("input",{id:e.field.field_name,name:e.field.field_name,type:"checkbox",checked:e.modelValue,onChange:i[0]||(i[0]=g=>m.$emit("update:modelValue",g.target.checked)),onBlur:i[1]||(i[1]=g=>m.$emit("validate")),required:e.field.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,il)]),t("div",nl,[t("label",{for:e.field.field_name,class:"font-medium text-gray-700 cursor-pointer"},[U(w(e.field.field_label)+" ",1),e.field.is_required?(r(),n("span",dl,"*")):y("",!0)],8,sl),V(H,{error:e.validationError,description:e.field.description},null,8,["error","description"])])],2)]))}},cl=["for"],ml={key:0,class:"text-red-500 ml-1"},K={__name:"FieldLabel",props:{fieldName:{type:String,required:!0},label:{type:String,required:!0},required:{type:Boolean,default:!1},helpText:{type:String,default:""}},setup(e){return(m,i)=>(r(),n("label",{for:e.fieldName,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[t("span",null,w(e.label),1),e.required?(r(),n("span",ml,"*")):y("",!0),e.helpText?(r(),z(tl,{key:1,text:e.helpText},null,8,["text"])):y("",!0)],8,cl))}},vl={class:"form-group"},pl={class:"relative"},fl=["id","name","value","required"],gl={__name:"DateField",props:{field:{type:Object,required:!0},modelValue:{type:String,default:""},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(e){return(m,i)=>(r(),n("div",vl,[V(K,{"field-name":e.field.field_name,label:e.field.field_label,required:!!e.field.is_required,"help-text":e.field.help_text||e.field.description},null,8,["field-name","label","required","help-text"]),t("div",pl,[t("input",{id:e.field.field_name,name:e.field.field_name,type:"date",value:e.modelValue,onInput:i[0]||(i[0]=g=>m.$emit("update:modelValue",g.target.value)),onBlur:i[1]||(i[1]=g=>m.$emit("validate")),required:e.field.is_required,class:F(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":e.modelValue&&!e.validationError,"border-red-500 ring-2 ring-red-100":e.validationError}])},null,42,fl),i[2]||(i[2]=t("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),V(H,{error:e.validationError,description:e.field.description},null,8,["error","description"])]))}},bl={class:"form-group"},yl={class:"relative"},hl={key:0,class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},xl=["id","name","value","required","step","placeholder"],kl={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},X={__name:"NumberField",props:{field:{type:Object,required:!0},modelValue:{type:Number,default:0},validationError:{type:String,default:""},placeholder:{type:String,default:""},variant:{type:String,default:"int",validator:e=>["int","float","currency"].includes(e)}},emits:["update:modelValue","validate"],setup(e){return(m,i)=>(r(),n("div",bl,[V(K,{"field-name":e.field.field_name,label:e.field.field_label,required:!!e.field.is_required,"help-text":e.field.help_text||e.field.description},null,8,["field-name","label","required","help-text"]),t("div",yl,[e.variant==="currency"?(r(),n("div",hl,[...i[2]||(i[2]=[t("span",{class:"text-gray-500 text-base font-medium"},"₱",-1)])])):y("",!0),t("input",{id:e.field.field_name,name:e.field.field_name,type:"number",value:e.modelValue,onInput:i[0]||(i[0]=g=>m.$emit("update:modelValue",parseFloat(g.target.value)||0)),onBlur:i[1]||(i[1]=g=>m.$emit("validate")),required:e.field.is_required,step:e.variant==="int"?"1":"0.01",class:F(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"pl-10":e.variant==="currency","border-blue-500 ring-2 ring-blue-100":e.modelValue&&!e.validationError,"border-red-500 ring-2 ring-red-100":e.validationError}]),placeholder:e.variant==="currency"?"0.00":e.placeholder},null,42,xl),e.variant!=="currency"?(r(),n("div",kl,[...i[3]||(i[3]=[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})],-1)])])):y("",!0)]),V(H,{error:e.validationError,description:e.field.description},null,8,["error","description"])]))}},wl={class:"form-group"},_l={class:"relative"},Vl=["id","name","value","required"],$l={value:""},Cl=["value"],Sl={__name:"SelectField",props:{field:{type:Object,required:!0},modelValue:{type:[String,Number],default:""},validationError:{type:String,default:""},options:{type:Array,default:()=>[]}},emits:["update:modelValue","validate"],setup(e){return(m,i)=>(r(),n("div",wl,[V(K,{"field-name":e.field.field_name,label:e.field.field_label,required:!!e.field.is_required,"help-text":e.field.help_text||e.field.description},null,8,["field-name","label","required","help-text"]),t("div",_l,[t("select",{id:e.field.field_name,name:e.field.field_name,value:e.modelValue,onChange:i[0]||(i[0]=g=>m.$emit("update:modelValue",g.target.value)),onBlur:i[1]||(i[1]=g=>m.$emit("validate")),required:e.field.is_required,class:F(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":e.modelValue&&!e.validationError,"border-red-500 ring-2 ring-red-100":e.validationError}])},[t("option",$l,"Select "+w(e.field.field_label),1),(r(!0),n(A,null,E(e.options,g=>(r(),n("option",{key:g,value:g},w(g),9,Cl))),128))],42,Vl),i[2]||(i[2]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),V(H,{error:e.validationError,description:e.field.description},null,8,["error","description"])]))}},ql={class:"form-group"},Ml={class:"relative"},Fl=["id","name","value","required","placeholder"],Bl={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},jl=["innerHTML"],zl={__name:"TextField",props:{field:{type:Object,required:!0},modelValue:{type:[String,Number],default:""},validationError:{type:String,default:""},placeholder:{type:String,default:""},icon:{type:String,default:""}},emits:["update:modelValue","validate"],setup(e){return(m,i)=>(r(),n("div",ql,[V(K,{"field-name":e.field.field_name,label:e.field.field_label,required:!!e.field.is_required,"help-text":e.field.help_text||e.field.description},null,8,["field-name","label","required","help-text"]),t("div",Ml,[t("input",{id:e.field.field_name,name:e.field.field_name,type:"text",value:e.modelValue,onInput:i[0]||(i[0]=g=>m.$emit("update:modelValue",g.target.value)),onBlur:i[1]||(i[1]=g=>m.$emit("validate")),required:e.field.is_required,class:F(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":e.modelValue&&!e.validationError,"border-red-500 ring-2 ring-red-100":e.validationError}]),placeholder:e.placeholder},null,42,Fl),e.icon?(r(),n("div",Bl,[t("span",{innerHTML:e.icon,class:"text-gray-400"},null,8,jl)])):y("",!0)]),V(H,{error:e.validationError,description:e.field.description},null,8,["error","description"])]))}},Pl={class:"form-group"},Ul=["id","name","value","required","placeholder"],Dl={__name:"TextareaField",props:{field:{type:Object,required:!0},modelValue:{type:String,default:""},validationError:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue","validate"],setup(e){return(m,i)=>(r(),n("div",Pl,[V(K,{"field-name":e.field.field_name,label:e.field.field_label,required:!!e.field.is_required,"help-text":e.field.help_text||e.field.description},null,8,["field-name","label","required","help-text"]),t("textarea",{id:e.field.field_name,name:e.field.field_name,value:e.modelValue,onInput:i[0]||(i[0]=g=>m.$emit("update:modelValue",g.target.value)),onBlur:i[1]||(i[1]=g=>m.$emit("validate")),required:e.field.is_required,rows:"4",class:F(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":e.modelValue&&!e.validationError,"border-red-500 ring-2 ring-red-100":e.validationError}]),placeholder:e.placeholder},null,42,Ul),V(H,{error:e.validationError,description:e.field.description},null,8,["error","description"])]))}},Tl={class:"space-y-6"},Al={key:0,class:"form-group"},El={key:9,class:"form-group"},Il={key:10,class:"form-group"},Rl={class:"text-sm text-gray-500 italic"},Ll={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:m}){const i=e,g=m,a=D({get:()=>i.modelValue,set:u=>g("update:modelValue",u)}),M=D(()=>i.fields.filter(u=>{var T;const o=((T=u.parent_section_code)==null?void 0:T.toLowerCase())||"",s=["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(o),B=["barangay","municipality","province","city","region","zip_code","postal_code"];return s&&i.fields.some(f=>f.parent_section_code===u.parent_section_code&&f.field_name==="address_line")&&B.includes(u.field_name)?!1:ce(u,a.value)})),$=u=>{var f,d,x;const o=((f=u.field_name)==null?void 0:f.toLowerCase())||"",l=((d=u.field_label)==null?void 0:d.toLowerCase())||"",s=((x=u.parent_section_code)==null?void 0:x.toLowerCase())||"",B=["address_line","street","residential_address","property_address","home_address","current_address","permanent_address"],T=["address","residential_address","permanent_address","property_address","current_address","home_address"],J=["residential address","property address","home address","current address","permanent address","street / house number","street address"];return B.includes(o)&&u.field_type==="Data"||T.includes(s)&&(o==="address_line"||o==="street")&&u.field_type==="Data"||J.some(j=>l.includes(j))&&u.field_type==="Data"&&!l.includes("zip")&&!l.includes("postal")},p=u=>{var l;if(u.placeholder)return u.placeholder;const o=((l=u.field_label)==null?void 0:l.toLowerCase())||"";return o.includes("name")?"e.g., Juan Dela Cruz":o.includes("email")?"e.g., juan@example.com":o.includes("phone")||o.includes("mobile")||o.includes("contact")?"e.g., 0917 123 4567":o.includes("age")?"e.g., 25":o.includes("occupation")?"e.g., Teacher":o.includes("income")||o.includes("salary")?"e.g., 15000":`Enter ${u.field_label}`},v=u=>{var l;const o=((l=u.field_label)==null?void 0:l.toLowerCase())||"";return o.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':o.includes("phone")||o.includes("mobile")||o.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':o.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},b=u=>u?u.split(`
`).map(o=>o.trim()).filter(Boolean):[],{errors:h,validateConfigField:S,clearFieldError:C}=me(),q=u=>{if(!u.validation&&!u.is_required){C(u.field_name);return}const o=a.value[u.field_name];S(u.field_name,o,u,a.value)},k=u=>h.value[u]||"",c=u=>{const o=a.value[u];return Array.isArray(o)?o:o?typeof o=="string"?[{file_url:o,name:o.split("/").pop(),preview:o}]:[]:[]},_=(u,o)=>{if(console.log("[DynamicFieldRenderer] updateFileField called:",u,o),Array.isArray(o)&&o.length>0){const l=o.filter(s=>s.file_url);if(l.length>0){const s=l[0].file_url;console.log("[DynamicFieldRenderer] Converting uploaded file to URL:",s),a.value[u]=s;return}}a.value[u]=o},Q=(u,o)=>R(this,null,function*(){console.log("[DynamicFieldRenderer] handleFileUploadToFrappe called with:",u);try{console.log("[DynamicFieldRenderer] Starting file upload:",u.name);const l=new FormData;l.append("file",u.file),l.append("is_private","0"),l.append("folder","Home/Attachments"),console.log("[DynamicFieldRenderer] Uploading to /api/method/upload_file...");const s=yield fetch("/api/method/upload_file",{method:"POST",credentials:"include",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:l});if(console.log("[DynamicFieldRenderer] Upload response status:",s.status),!s.ok){const T=yield s.text();throw console.error("[DynamicFieldRenderer] Upload failed:",T),new Error(`Upload failed (${s.status}): ${T}`)}const B=yield s.json();console.log("[DynamicFieldRenderer] Upload response:",B),B.message&&B.message.file_url&&(console.log("[DynamicFieldRenderer] File uploaded successfully:",B.message.file_url),u.file_url=B.message.file_url,u.file_name=B.message.file_name,console.log("[DynamicFieldRenderer] Updated fileData:",u)),console.log("[DynamicFieldRenderer] Calling resolveCallback()"),o(),console.log("[DynamicFieldRenderer] File upload completed successfully")}catch(l){console.error("[DynamicFieldRenderer] File upload error:",l),alert(`Failed to upload file: ${l.message}`),console.log("[DynamicFieldRenderer] Calling resolveCallback() after error"),o()}});return G(()=>a.value,u=>{Object.entries(u).forEach(([o,l])=>{if(Array.isArray(l)&&l.length>0&&l[0].file_url){const s=l.map(B=>B.file_url).filter(Boolean);s.length>0&&(a.value[o]=s.length===1?s[0]:s,console.log(`[DynamicFieldRenderer] Converted file array to URL for ${o}:`,a.value[o]))}})},{deep:!0}),G(()=>i.fields,u=>{u.forEach(o=>{o.default_value&&!a.value[o.field_name]&&(o.default_value==="Today"&&o.field_type==="Date"?a.value[o.field_name]=new Date().toISOString().split("T")[0]:a.value[o.field_name]=o.default_value)})},{immediate:!0}),(u,o)=>(r(),n("div",Tl,[(r(!0),n(A,null,E(M.value,l=>(r(),n("div",{key:l.field_name,class:"field-wrapper"},[$(l)?(r(),n("div",Al,[V(Xt,{modelValue:a.value[l.field_name],"onUpdate:modelValue":s=>a.value[l.field_name]=s,label:l.field_label,required:!!l.is_required},null,8,["modelValue","onUpdate:modelValue","label","required"])])):l.field_type==="Data"?(r(),z(zl,{key:1,field:l,modelValue:a.value[l.field_name],"onUpdate:modelValue":s=>a.value[l.field_name]=s,"validation-error":k(l.field_name),placeholder:p(l),icon:v(l),onValidate:s=>q(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","icon","onValidate"])):l.field_type==="Select"?(r(),z(Sl,{key:2,field:l,modelValue:a.value[l.field_name],"onUpdate:modelValue":s=>a.value[l.field_name]=s,"validation-error":k(l.field_name),options:b(l.options),onValidate:s=>q(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","options","onValidate"])):l.field_type==="Check"?(r(),z(ul,{key:3,field:l,modelValue:a.value[l.field_name],"onUpdate:modelValue":s=>a.value[l.field_name]=s,"validation-error":k(l.field_name),onValidate:s=>q(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):l.field_type==="Text"?(r(),z(Dl,{key:4,field:l,modelValue:a.value[l.field_name],"onUpdate:modelValue":s=>a.value[l.field_name]=s,"validation-error":k(l.field_name),placeholder:p(l),onValidate:s=>q(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):l.field_type==="Date"?(r(),z(gl,{key:5,field:l,modelValue:a.value[l.field_name],"onUpdate:modelValue":s=>a.value[l.field_name]=s,"validation-error":k(l.field_name),onValidate:s=>q(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):l.field_type==="Int"?(r(),z(X,{key:6,field:l,modelValue:a.value[l.field_name],"onUpdate:modelValue":s=>a.value[l.field_name]=s,"validation-error":k(l.field_name),placeholder:p(l),variant:"int",onValidate:s=>q(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):l.field_type==="Float"?(r(),z(X,{key:7,field:l,modelValue:a.value[l.field_name],"onUpdate:modelValue":s=>a.value[l.field_name]=s,"validation-error":k(l.field_name),placeholder:p(l),variant:"float",onValidate:s=>q(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):l.field_type==="Currency"?(r(),z(X,{key:8,field:l,modelValue:a.value[l.field_name],"onUpdate:modelValue":s=>a.value[l.field_name]=s,"validation-error":k(l.field_name),variant:"currency",onValidate:s=>q(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):l.field_type==="Attach"||l.field_type==="Attach Image"?(r(),n("div",El,[V(dt,{label:l.field_label,required:l.is_required,accept:l.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:c(l.field_name),"onUpdate:modelValue":s=>_(l.field_name,s),onUpload:Q},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):(r(),n("div",Il,[t("div",Rl,' Field type "'+w(l.field_type)+'" not yet supported for '+w(l.field_label),1)]))]))),128))]))}},Y=Z(Ll,[["__scopeId","data-v-13b51944"]]),Ol={class:"dynamic-step max-w-4xl mx-auto"},Nl={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},Hl={class:"flex items-start"},Ql={class:"ml-4 flex-1"},Jl={class:"text-2xl font-bold text-blue-900"},Gl={key:0,class:"mt-2 text-sm text-blue-700"},Kl={class:"space-y-6"},Wl={class:"mb-4 pb-3 border-b-2 border-gray-200"},Zl={class:"flex items-center"},Xl={class:"text-lg font-semibold text-gray-900"},Yl={key:0,class:"text-red-500 ml-1"},ea={key:0,class:"text-sm text-gray-600 mt-0.5"},ta={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},la={class:"section-content"},aa={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},ra={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:m}){const i=e,g=m,a=D({get:()=>i.modelValue,set:p=>g("update:modelValue",p)}),M=D(()=>i.stepConfig.sections?i.stepConfig.sections.filter(p=>{if(!p.depends_on)return!0;try{return ve(p,a.value)}catch(v){return console.error(`Error evaluating section visibility for ${p.section_code}:`,v),!0}}):[]),$=p=>[p.section_title];return G(()=>i.stepConfig,p=>{p.sections&&p.sections.forEach(v=>{v.fields.forEach(b=>{if(b.default_value&&!a.value[b.field_name]){const h=N({},a.value);b.default_value==="Today"&&b.field_type==="Date"?h[b.field_name]=new Date().toISOString().split("T")[0]:h[b.field_name]=b.default_value,g("update:modelValue",h)}})})},{immediate:!0,deep:!0}),(p,v)=>(r(),n("div",Ol,[t("div",Nl,[t("div",Hl,[v[3]||(v[3]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",Ql,[t("h2",Jl,w(e.stepConfig.step_title),1),e.stepDescription?(r(),n("p",Gl,w(e.stepDescription),1)):y("",!0)])])]),t("div",Kl,[(r(!0),n(A,null,E(M.value,b=>(r(),n("div",{key:b.section_code,class:"section"},[t("div",Wl,[t("div",Zl,[v[4]||(v[4]=t("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[t("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),t("div",null,[t("h3",Xl,[U(w(b.section_title)+" ",1),b.is_required?(r(),n("span",Yl,"*")):y("",!0)]),b.section_description?(r(),n("p",ea,w(b.section_description),1)):y("",!0)])]),b.is_required?(r(),n("div",ta,[...v[5]||(v[5]=[U(" All fields marked with ",-1),t("span",{class:"text-red-500"},"*",-1),U(" are required ",-1)])])):y("",!0)]),t("div",la,[b.section_type==="Tab"?(r(),z(L(Ve),{key:0},{default:I(()=>[V(L(xe),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:I(()=>[(r(!0),n(A,null,E($(b),(h,S)=>(r(),z(L(ke),{key:S,class:F(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",p.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:I(({selected:C})=>[U(w(h),1)]),_:2},1032,["class"]))),128))]),_:2},1024),V(L(we),null,{default:I(()=>[(r(!0),n(A,null,E($(b),(h,S)=>(r(),z(L(_e),{key:S},{default:I(()=>[V(Y,{fields:b.fields,modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=C=>a.value=C)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):b.section_type==="Accordion"?(r(),z(L(Se),{key:1},{default:I(({open:h})=>[V(L($e),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:I(()=>[t("span",null,w(b.section_title),1),V(L(qe),{class:F([h?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),V(L(Ce),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:I(()=>[V(Y,{fields:b.fields,modelValue:a.value,"onUpdate:modelValue":v[1]||(v[1]=S=>a.value=S)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(r(),n("div",aa,[V(Y,{fields:b.fields,modelValue:a.value,"onUpdate:modelValue":v[2]||(v[2]=h=>a.value=h)},null,8,["fields","modelValue"])]))])]))),128))])]))}},va=Z(ra,[["__scopeId","data-v-aac49f57"]]);export{va as default};
//# sourceMappingURL=DynamicStepRenderer-CnMJ3OoQ.js.map
