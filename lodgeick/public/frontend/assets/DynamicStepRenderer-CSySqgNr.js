var ue=Object.defineProperty,ce=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var oe=(t,f,n)=>f in t?ue(t,f,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[f]=n,Q=(t,f)=>{for(var n in f||(f={}))pe.call(f,n)&&oe(t,n,f[n]);if(ae)for(var n of ae(f))ve.call(f,n)&&oe(t,n,f[n]);return t},re=(t,f)=>ce(t,me(f));var N=(t,f,n)=>new Promise((y,o)=>{var C=v=>{try{m(n.next(v))}catch(x){o(x)}},w=v=>{try{m(n.throw(v))}catch(x){o(x)}},m=v=>v.done?y(v.value):Promise.resolve(v.value).then(C,w);m((n=n.apply(t,f)).next())});import{u as fe,i as ge,a as be,b as ye}from"./NewRequest-BRtJ-yIv.js";import{a as r,o as a,b as e,B as j,c as P,e as k,O as z,a2 as T,t as h,n as D,aj as ie,Q as he,R as M,P as O,F as E,W as L,au as xe,_ as ke,T as _e,D as de,w as G,a6 as I,ak as X,ae as K,at as we,r as ne,ag as $e,u as A}from"./vue-vendor-B0shnPjy.js";import{k as Z,a as se,D as Ve}from"./frappe-ui-DjR51muK.js";import{p as Ce,x as Se,I as qe,y as Be,m as Me,Q as Fe,V as je,N as Pe}from"./ui-components-BkacYXVN.js";import"./request.service-W88L9M1G.js";import"./index-BKPvh8XB.js";import"./RequestHeader-CFcOgVuT.js";function Te(t,f){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const De={class:"space-y-4"},Ue={class:"block"},ze={class:"text-sm font-medium text-gray-900"},Ae={key:0,class:"text-red-500"},Ee={key:0,class:"text-xs text-gray-500 mt-1"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Re=["disabled"],Ie=["disabled"],Oe={class:"text-center"},Ne={class:"text-xs text-gray-500"},He=["accept","multiple"],Je={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Qe={class:"flex items-center space-x-3"},Ge={class:"flex-1"},Ke={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},We={key:1,class:"space-y-2"},Xe={class:"flex items-center space-x-3 flex-1 min-w-0"},Ye={class:"flex-shrink-0"},Ze={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},et=["src","alt"],tt={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},lt={class:"flex-1 min-w-0"},at={class:"text-sm font-medium text-gray-900 truncate"},ot={class:"text-xs text-gray-500"},rt=["onClick"],nt={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},st={class:"relative bg-black aspect-video"},it=["src"],dt={key:2,class:"absolute inset-0 pointer-events-none"},ut={class:"w-full h-full grid grid-cols-3 grid-rows-3"},ct={class:"bg-gray-900 px-6 py-6"},mt={key:0,class:"flex items-center justify-center space-x-6"},pt={key:1,class:"flex items-center justify-center space-x-4"},vt={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(t,{emit:f}){const n=t,y=f,o=j(null),C=j(null),w=j(!1),m=j(null),v=j(null),x=j(!1),S=j(0),B=P({get:()=>n.modelValue,set:_=>y("update:modelValue",_)}),g=()=>{var _;(_=o.value)==null||_.click()},b=_=>N(this,null,function*(){const i=Array.from(_.target.files);yield V(i),_.target.value=""}),V=_=>N(this,null,function*(){const i=[];for(const d of _){if(d.size>n.maxSize){alert(`File ${d.name} exceeds maximum size of ${J(n.maxSize)}`);continue}let F=null;d.type.startsWith("image/")&&(F=yield c(d)),i.push({file:d,name:d.name,size:d.size,type:d.type,preview:F,uploadDate:new Date().toISOString()})}if(i.length>0){const d=n.multiple?[...B.value,...i]:i;y("update:modelValue",d),yield $(i)}}),c=_=>new Promise(i=>{const d=new FileReader;d.onload=F=>i(F.target.result),d.onerror=()=>i(null),d.readAsDataURL(_)}),$=_=>N(this,null,function*(){x.value=!0,S.value=0;try{for(let i=0;i<_.length;i++){const d=_[i],F=setInterval(()=>{S.value=Math.min(S.value+10,90)},100);yield new Promise(q=>{y("upload",d,q)}),clearInterval(F),S.value=(i+1)/_.length*100}}catch(i){console.error("Upload error:",i),alert("Failed to upload files. Please try again.")}finally{x.value=!1,S.value=0}}),H=_=>{const i=[...B.value];i.splice(_,1),y("update:modelValue",i)},p=()=>N(this,null,function*(){try{w.value=!0,yield s()}catch(_){console.error("Camera error:",_),alert("Unable to access camera. Please check permissions or upload a file instead."),w.value=!1}}),s=()=>N(this,null,function*(){try{const _=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});v.value=_,C.value&&(C.value.srcObject=_)}catch(_){throw _}}),l=()=>{const _=C.value,i=document.createElement("canvas");i.width=_.videoWidth,i.height=_.videoHeight,i.getContext("2d").drawImage(_,0,0,i.width,i.height),m.value=i.toDataURL("image/jpeg",.9)},u=()=>{m.value=null},U=()=>N(this,null,function*(){if(!m.value)return;const _=yield(yield fetch(m.value)).blob(),i=new File([_],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield V([i]),R()}),R=()=>{v.value&&(v.value.getTracks().forEach(_=>_.stop()),v.value=null),m.value=null,w.value=!1},J=_=>{if(_===0)return"0 Bytes";const i=1024,d=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(_)/Math.log(i));return Math.round(_/Math.pow(i,F)*100)/100+" "+d[F]};return(_,i)=>(a(),r("div",De,[e("label",Ue,[e("span",ze,[T(h(t.label)+" ",1),t.required?(a(),r("span",Ae,"*")):k("",!0)]),t.helpText?(a(),r("p",Ee,h(t.helpText),1)):k("",!0)]),e("div",Le,[t.allowCamera?(a(),r("button",{key:0,onClick:p,type:"button",class:D(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":x.value}]),disabled:x.value},[...i[0]||(i[0]=[ie('<div class="text-center" data-v-2b18513c><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2b18513c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2b18513c></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2b18513c></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2b18513c>Take Photo</p><p class="text-xs text-gray-500" data-v-2b18513c>Use camera</p></div>',1)])],10,Re)):k("",!0),e("button",{onClick:g,type:"button",class:D(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":x.value}]),disabled:x.value},[e("div",Oe,[i[1]||(i[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),i[2]||(i[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",Ne,"Browse "+h(t.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:o,type:"file",accept:t.accept,multiple:t.multiple,onChange:b,class:"hidden"},null,40,He)],10,Ie)]),x.value?(a(),r("div",Je,[e("div",Qe,[i[4]||(i[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",Ge,[i[3]||(i[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",Ke,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:he({width:S.value+"%"})},null,4)])])])])):k("",!0),B.value.length>0?(a(),r("div",We,[M(xe,{name:"list"},{default:O(()=>[(a(!0),r(E,null,L(B.value,(d,F)=>(a(),r("div",{key:d.name+F,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",Xe,[e("div",Ye,[d.preview?(a(),r("div",Ze,[e("img",{src:d.preview,alt:d.name,class:"w-full h-full object-cover"},null,8,et)])):(a(),r("div",tt,[...i[5]||(i[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",lt,[e("p",at,h(d.name),1),e("p",ot,h(J(d.size)),1)]),e("button",{onClick:q=>H(F),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...i[6]||(i[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,rt)])]))),128))]),_:1})])):k("",!0),(a(),z(_e,{to:"body"},[w.value?(a(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:ke(R,["self"])},[e("div",nt,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[i[8]||(i[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:R,class:"text-gray-400 hover:text-white transition-colors"},[...i[7]||(i[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",st,[m.value?(a(),r("img",{key:1,src:m.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,it)):(a(),r("video",{key:0,ref_key:"videoElement",ref:C,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),m.value?k("",!0):(a(),r("div",dt,[e("div",ut,[(a(),r(E,null,L(9,d=>e("div",{key:d,class:"border border-white/20"})),64))])]))]),e("div",ct,[m.value?(a(),r("div",pt,[e("button",{onClick:u,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:U,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(a(),r("div",mt,[e("button",{onClick:l,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...i[9]||(i[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):k("",!0)]))]))}},ft=Z(vt,[["__scopeId","data-v-2b18513c"]]),gt={class:"space-y-4"},bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yt={class:"block text-sm font-medium text-gray-700 mb-2"},ht={key:0,class:"text-red-500"},xt={class:"relative"},kt=["required"],_t=["value"],wt={class:"block text-sm font-medium text-gray-700 mb-2"},$t={key:0,class:"text-red-500"},Vt={class:"relative"},Ct=["required","disabled"],St=["value"],qt={key:0,class:"mt-1 text-xs text-gray-500"},Bt={class:"block text-sm font-medium text-gray-700 mb-2"},Mt={key:0,class:"text-red-500"},Ft={class:"relative"},jt=["required","disabled"],Pt=["value"],Tt={key:0,class:"mt-1 text-xs text-gray-500"},Dt={class:"block text-sm font-medium text-gray-700 mb-2"},Ut={key:0,class:"text-red-500"},zt=["required"],At={class:"md:col-span-2"},Et={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Lt={class:"flex items-start"},Rt={class:"flex-1"},It={class:"text-sm text-green-700 mt-1"},Ot={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:f}){const n=t,y=f,o=j({street:"",barangay:"",municipality:"",province:"",zipCode:""}),C=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],w={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Parañaque City","Las Piñas City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},m={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},v=P(()=>o.value.province?w[o.value.province]||[]:[]),x=P(()=>o.value.municipality?m[o.value.municipality]||["Other - Please specify in Street field"]:[]),S=P(()=>{const V=[];return o.value.street&&V.push(o.value.street),o.value.barangay&&V.push(`Brgy. ${o.value.barangay}`),o.value.municipality&&V.push(o.value.municipality),o.value.province&&V.push(o.value.province),o.value.zipCode&&V.push(o.value.zipCode),V.length>0?V.join(", "):""}),B=()=>{o.value.municipality="",o.value.barangay="",b()},g=()=>{o.value.barangay="",b()},b=()=>{y("update:modelValue",{full_address:S.value,address_line:o.value.street,barangay:o.value.barangay,municipality:o.value.municipality,province:o.value.province,zip_code:o.value.zipCode})};return de(()=>{var V;if(n.modelValue)if(typeof n.modelValue=="string"){const c=n.modelValue.split(",").map($=>$.trim());c.length>=3&&(o.value.street=c[0]||"",o.value.barangay=((V=c[1])==null?void 0:V.replace("Brgy. ",""))||"",o.value.municipality=c[2]||"",o.value.province=c[3]||"",o.value.zipCode=c[4]||"")}else typeof n.modelValue=="object"&&(o.value=Q(Q({},o.value),n.modelValue))}),G(()=>n.modelValue,V=>{V&&typeof V=="object"&&(o.value=Q(Q({},o.value),V))}),(V,c)=>(a(),r("div",gt,[c[18]||(c[18]=ie('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",bt,[e("div",null,[e("label",yt,[c[5]||(c[5]=T(" Province ",-1)),t.required?(a(),r("span",ht,"*")):k("",!0)]),e("div",xt,[I(e("select",{"onUpdate:modelValue":c[0]||(c[0]=$=>o.value.province=$),onChange:B,required:t.required,class:D(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":o.value.province}])},[c[6]||(c[6]=e("option",{value:""},"Select Province",-1)),(a(),r(E,null,L(C,$=>e("option",{key:$,value:$},h($),9,_t)),64))],42,kt),[[X,o.value.province]]),c[7]||(c[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",wt,[c[8]||(c[8]=T(" Municipality/City ",-1)),t.required?(a(),r("span",$t,"*")):k("",!0)]),e("div",Vt,[I(e("select",{"onUpdate:modelValue":c[1]||(c[1]=$=>o.value.municipality=$),onChange:g,required:t.required,disabled:!o.value.province,class:D(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":o.value.municipality}])},[c[9]||(c[9]=e("option",{value:""},"Select Municipality/City",-1)),(a(!0),r(E,null,L(v.value,$=>(a(),r("option",{key:$,value:$},h($),9,St))),128))],42,Ct),[[X,o.value.municipality]]),c[10]||(c[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),o.value.province?k("",!0):(a(),r("p",qt,"Select province first"))]),e("div",null,[e("label",Bt,[c[11]||(c[11]=T(" Barangay ",-1)),t.required?(a(),r("span",Mt,"*")):k("",!0)]),e("div",Ft,[I(e("select",{"onUpdate:modelValue":c[2]||(c[2]=$=>o.value.barangay=$),onChange:b,required:t.required,disabled:!o.value.municipality,class:D(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":o.value.barangay}])},[c[12]||(c[12]=e("option",{value:""},"Select Barangay",-1)),(a(!0),r(E,null,L(x.value,$=>(a(),r("option",{key:$,value:$},h($),9,Pt))),128))],42,jt),[[X,o.value.barangay]]),c[13]||(c[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),o.value.municipality?k("",!0):(a(),r("p",Tt,"Select municipality first"))]),e("div",null,[e("label",Dt,[c[14]||(c[14]=T(" Street / House No. ",-1)),t.required?(a(),r("span",Ut,"*")):k("",!0)]),I(e("input",{"onUpdate:modelValue":c[3]||(c[3]=$=>o.value.street=$),onInput:b,type:"text",required:t.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:D(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":o.value.street}])},null,42,zt),[[K,o.value.street]])]),e("div",At,[c[15]||(c[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[T(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),I(e("input",{"onUpdate:modelValue":c[4]||(c[4]=$=>o.value.zipCode=$),onInput:b,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[K,o.value.zipCode]])])]),S.value?(a(),r("div",Et,[e("div",Lt,[c[17]||(c[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Rt,[c[16]||(c[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",It,h(S.value),1)])])])):k("",!0)]))}},Nt={class:"space-y-4"},Ht={class:"flex items-center justify-between mb-4"},Jt={class:"block text-sm font-medium text-gray-700"},Qt={key:0,class:"text-red-500"},Gt={key:0,class:"space-y-3"},Kt=["value"],Wt={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Xt={class:"flex items-start justify-between"},Yt={class:"flex-1 space-y-1"},Zt={class:"text-sm font-medium text-gray-900"},el={class:"text-sm text-gray-700"},tl={key:0,class:"text-xs text-gray-600"},ll={key:1},al={key:2,class:"flex items-center space-x-2"},ol={__name:"PropertyAddressSelector",props:{modelValue:{type:Object,default:()=>({})},label:{type:String,default:"Residential Address"},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:f}){const n=t,y=f,{loadUserProfile:o,getAllProperties:C,defaultProperty:w}=fe(),m=j(!1),v=j(""),x=j(!1),S=j(n.modelValue||{}),B=P(()=>C.value||[]),g=P(()=>!v.value||v.value==="__new__"?null:B.value.find(s=>s.name===v.value));function b(s){const l=[];return s.property_name&&l.push(s.property_name),s.street&&l.push(s.street),s.suburb&&l.push(s.suburb),s.city&&l.push(s.city),l.join(", ")||"Unnamed Property"}function V(s){const l=[];return s.street&&l.push(s.street),s.barangay&&l.push(`Brgy. ${s.barangay}`),s.municipality&&l.push(s.municipality),s.province&&l.push(s.province),(s.zip_code||s.postcode)&&l.push(s.zip_code||s.postcode),l.join(", ")}function c(){if(v.value==="__new__"){S.value={},m.value=!1;return}g.value&&(S.value={full_address:V(g.value),address_line:g.value.street||"",barangay:g.value.barangay||"",municipality:g.value.municipality||g.value.city||"",province:g.value.province||"",zip_code:g.value.zip_code||g.value.postcode||""},y("update:modelValue",S.value))}function $(s){S.value=s,y("update:modelValue",s)}function H(){m.value=!1}function p(){confirm("Are you sure you want to remove this property from selection?")&&(v.value="",S.value={},y("update:modelValue",{}))}return de(()=>N(this,null,function*(){yield o(),(!n.modelValue||Object.keys(n.modelValue).length===0)&&w.value&&(v.value=w.value.name,c()),B.value.length>0&&(m.value=!0)})),G(()=>n.modelValue,s=>{s&&Object.keys(s).length>0&&(S.value=s)},{deep:!0}),(s,l)=>(a(),r("div",Nt,[e("div",Ht,[e("label",Jt,[T(h(t.label)+" ",1),t.required?(a(),r("span",Qt,"*")):k("",!0)]),B.value.length>0?(a(),r("button",{key:0,onClick:l[0]||(l[0]=u=>m.value=!m.value),type:"button",class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},h(m.value?"Enter manually":"Select from my properties"),1)):k("",!0)]),m.value&&B.value.length>0?(a(),r("div",Gt,[I(e("select",{"onUpdate:modelValue":l[1]||(l[1]=u=>v.value=u),onChange:c,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[l[3]||(l[3]=e("option",{value:""},"Select a property",-1)),(a(!0),r(E,null,L(B.value,u=>(a(),r("option",{key:u.name,value:u.name},h(b(u)),9,Kt))),128)),l[4]||(l[4]=e("option",{value:"__new__"},"+ Add New Property",-1))],544),[[X,v.value]]),g.value&&v.value!=="__new__"?(a(),r("div",Wt,[e("div",Xt,[e("div",Yt,[e("p",Zt,h(g.value.property_name||"Property"),1),e("p",el,h(V(g.value)),1),g.value.legal_description?(a(),r("p",tl,h(g.value.legal_description),1)):k("",!0)]),e("div",{class:"flex space-x-2"},[e("button",{onClick:H,type:"button",class:"text-sm text-blue-600 hover:text-blue-700",title:"Edit property"},[...l[5]||(l[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),e("button",{onClick:p,type:"button",class:"text-sm text-red-600 hover:text-red-700",title:"Remove property"},[...l[6]||(l[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])])])):k("",!0)])):k("",!0),!m.value||v.value==="__new__"||B.value.length===0?(a(),r("div",ll,[M(Ot,{modelValue:S.value,"onUpdate:modelValue":$,required:t.required},null,8,["modelValue","required"])])):k("",!0),(!m.value||v.value==="__new__")&&!v.value?(a(),r("div",al,[I(e("input",{"onUpdate:modelValue":l[2]||(l[2]=u=>x.value=u),type:"checkbox",id:"save-property",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[we,x.value]]),l[7]||(l[7]=e("label",{for:"save-property",class:"text-sm text-gray-700"}," Save this property to my profile for future use ",-1))])):k("",!0)]))}},rl={class:"inline-block relative group"},nl={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:t=>["top","bottom","left","right"].includes(t)}},setup(t){const f=t,n=j(!1),y=P(()=>{switch(f.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),o=P(()=>{switch(f.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(C,w)=>(a(),r("div",rl,[ne(C.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:w[0]||(w[0]=m=>n.value=!0),onMouseleave:w[1]||(w[1]=m=>n.value=!1)},[...w[2]||(w[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),M($e,{name:"tooltip"},{default:O(()=>[n.value?(a(),r("div",{key:0,class:D(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",y.value]),style:{"max-width":"300px","white-space":"normal"}},[ne(C.$slots,"default",{},()=>[T(h(t.text),1)],!0),e("div",{class:D(["tooltip-arrow",o.value])},null,2)],2)):k("",!0)]),_:3})]))}},sl=Z(nl,[["__scopeId","data-v-cfd551b3"]]),il={key:0,class:"mt-1 text-xs text-red-600"},dl={key:1,class:"mt-1 text-xs text-gray-500"},W={__name:"FieldError",props:{error:{type:String,default:""},description:{type:String,default:""}},setup(t){return(f,n)=>(a(),r("div",null,[t.error?(a(),r("p",il,h(t.error),1)):t.description?(a(),r("p",dl,h(t.description),1)):k("",!0)]))}},ul={class:"form-group"},cl={class:"flex items-center h-5"},ml=["id","name","checked","required"],pl={class:"ml-3 text-sm"},vl=["for"],fl={key:0,class:"text-red-500 ml-1"},gl={__name:"CheckboxField",props:{field:{type:Object,required:!0},modelValue:{type:Boolean,default:!1},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",ul,[e("div",{class:D(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!t.validationError,"border-red-500 bg-red-50":t.validationError}])},[e("div",cl,[e("input",{id:t.field.field_name,name:t.field.field_name,type:"checkbox",checked:t.modelValue,onChange:n[0]||(n[0]=y=>f.$emit("update:modelValue",y.target.checked)),onBlur:n[1]||(n[1]=y=>f.$emit("validate")),required:t.field.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,ml)]),e("div",pl,[e("label",{for:t.field.field_name,class:"font-medium text-gray-700 cursor-pointer"},[T(h(t.field.field_label)+" ",1),t.field.is_required?(a(),r("span",fl,"*")):k("",!0)],8,vl),M(W,{error:t.validationError,description:t.field.description},null,8,["error","description"])])],2)]))}},bl=["for"],yl={key:0,class:"text-red-500 ml-1"},Y={__name:"FieldLabel",props:{fieldName:{type:String,required:!0},label:{type:String,required:!0},required:{type:Boolean,default:!1},helpText:{type:String,default:""}},setup(t){return(f,n)=>(a(),r("label",{for:t.fieldName,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,h(t.label),1),t.required?(a(),r("span",yl,"*")):k("",!0),t.helpText?(a(),z(sl,{key:1,text:t.helpText},null,8,["text"])):k("",!0)],8,bl))}},hl={class:"form-group"},xl={class:"relative"},kl=["id","name","value","required"],_l={__name:"DateField",props:{field:{type:Object,required:!0},modelValue:{type:String,default:""},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",hl,[M(Y,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",xl,[e("input",{id:t.field.field_name,name:t.field.field_name,type:"date",value:t.modelValue,onInput:n[0]||(n[0]=y=>f.$emit("update:modelValue",y.target.value)),onBlur:n[1]||(n[1]=y=>f.$emit("validate")),required:t.field.is_required,class:D(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}])},null,42,kl),n[2]||(n[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),M(W,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},wl={class:"form-group"},$l={class:"relative"},Vl={key:0,class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},Cl=["id","name","value","required","step","placeholder"],Sl={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},te={__name:"NumberField",props:{field:{type:Object,required:!0},modelValue:{type:Number,default:0},validationError:{type:String,default:""},placeholder:{type:String,default:""},variant:{type:String,default:"int",validator:t=>["int","float","currency"].includes(t)}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",wl,[M(Y,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",$l,[t.variant==="currency"?(a(),r("div",Vl,[...n[2]||(n[2]=[e("span",{class:"text-gray-500 text-base font-medium"},"₱",-1)])])):k("",!0),e("input",{id:t.field.field_name,name:t.field.field_name,type:"number",value:t.modelValue,onInput:n[0]||(n[0]=y=>f.$emit("update:modelValue",parseFloat(y.target.value)||0)),onBlur:n[1]||(n[1]=y=>f.$emit("validate")),required:t.field.is_required,step:t.variant==="int"?"1":"0.01",class:D(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"pl-10":t.variant==="currency","border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}]),placeholder:t.variant==="currency"?"0.00":t.placeholder},null,42,Cl),t.variant!=="currency"?(a(),r("div",Sl,[...n[3]||(n[3]=[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})],-1)])])):k("",!0)]),M(W,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},ql={class:"p-6 max-h-[80vh] overflow-y-auto"},Bl={class:"text-lg font-semibold text-gray-900 mb-4"},Ml={key:0,class:"text-center py-8"},Fl={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},jl={key:2,class:"space-y-6"},Pl={class:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-48 overflow-y-auto"},Tl=["onClick","disabled"],Dl={class:"font-medium"},Ul={class:"text-xs opacity-80"},zl={class:"text-xs opacity-60"},Al={key:0,class:"text-sm text-gray-500 mt-2"},El={key:0},Ll={class:"grid grid-cols-3 sm:grid-cols-4 gap-2 max-h-40 overflow-y-auto"},Rl=["onClick","disabled"],Il={key:0,class:"text-xs text-gray-500 mt-2"},Ol={key:1},Nl=["disabled"],Hl=["value"],Jl={key:2},Ql=["disabled"],Gl={key:3,class:"space-y-3"},Kl={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},Wl=["disabled"],Xl=["disabled"],Yl=["disabled"],Zl={key:4,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},ea={class:"text-sm text-blue-800 space-y-1"},ta={key:5,class:"bg-green-50 border border-green-200 rounded-lg p-4"},la={key:6,class:"bg-red-50 border border-red-200 rounded-lg p-4"},aa={class:"text-sm text-red-800"},oa={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},ra=["disabled"],na=["disabled"],sa={key:0},ia={key:1},da={__name:"BookSlotModal",props:{show:{type:Boolean,required:!0},teamCode:{type:String,required:!0},appointmentType:{type:String,required:!0},title:{type:String,default:"Book Appointment"},requestId:{type:String,default:null},councilCode:{type:String,default:null},referenceDoctype:{type:String,default:null},referenceName:{type:String,default:null},showPurpose:{type:Boolean,default:!0},showContactFields:{type:Boolean,default:!1},defaultPurpose:{type:String,default:""}},emits:["update:show","booked"],setup(t,{emit:f}){const n=t,y=f,o=P({get:()=>n.show,set:i=>y("update:show",i)}),C=j(""),w=j(null),m=j(""),v=j(""),x=j(""),S=j(""),B=j(""),g=j(!1),b=j(null),V=j(!1),c=se({url:"lodgeick.api.scheduling.get_team_config",auto:!1}),$=se({url:"lodgeick.api.scheduling.get_available_slots",auto:!1});G(()=>n.show,i=>{i&&n.teamCode&&(C.value="",w.value=null,m.value="",v.value=n.defaultPurpose,b.value=null,V.value=!1,c.fetch({team_code:n.teamCode}),$.fetch({team_code:n.teamCode}))}),G(()=>c.data,i=>{var d;i!=null&&i.success&&((d=i.config)!=null&&d.default_location)&&!m.value&&(m.value=i.config.default_location)});const H=P(()=>{var i;return!((i=$.data)!=null&&i.success)||!$.data.slots_by_date?[]:Object.values($.data.slots_by_date)}),p=P(()=>{var d;if(!C.value||!((d=$.data)!=null&&d.success))return[];const i=$.data.slots_by_date[C.value];return(i==null?void 0:i.slots)||[]}),s=P(()=>{var i;return(i=c.data)!=null&&i.success?c.data.config.locations||[]:[]}),l=P(()=>w.value&&m.value),u=i=>`${i.start_display} - ${i.end_display}`,U=i=>{C.value=i,w.value=null},R=i=>{w.value=i},J=()=>{g.value||y("update:show",!1)},_=()=>N(this,null,function*(){var i;if(!(!l.value||!w.value)){g.value=!0,b.value=null;try{const F=yield(yield fetch("/api/method/lodgeick.api.scheduling.book_appointment",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({team_code:n.teamCode,scheduled_start:w.value.start,scheduled_end:w.value.end,appointment_type:n.appointmentType,location:m.value,purpose:v.value,contact_name:x.value||null,contact_email:S.value||null,contact_phone:B.value||null,reference_doctype:n.referenceDoctype,reference_name:n.referenceName,request_id:n.requestId,council_code:n.councilCode})})).json();(i=F.message)!=null&&i.success?(V.value=!0,b.value=null,y("booked",re(Q({},F.message),{slot:w.value,location:m.value})),setTimeout(()=>{J()},2e3)):b.value=F.exc||F._server_messages||"Failed to book appointment"}catch(d){console.error("Book appointment error:",d),b.value="Network error. Please try again."}finally{g.value=!1}}});return(i,d)=>(a(),z(A(Ve),{modelValue:o.value,"onUpdate:modelValue":d[5]||(d[5]=F=>o.value=F),options:{size:"lg"}},{body:O(()=>{var F;return[e("div",ql,[e("h3",Bl,h(t.title),1),A($).loading||A(c).loading?(a(),r("div",Ml,[...d[6]||(d[6]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"text-sm text-gray-600 mt-3"},"Loading available times...",-1)])])):A($).error||A(c).error?(a(),r("div",Fl,[...d[7]||(d[7]=[e("p",{class:"text-sm text-red-800"},"Failed to load scheduling options. Please try again later.",-1)])])):(F=A($).data)!=null&&F.success?(a(),r("div",jl,[e("div",null,[d[8]||(d[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"1. Select a Date",-1)),e("div",Pl,[(a(!0),r(E,null,L(H.value,q=>(a(),r("button",{key:q.date,onClick:ee=>U(q.date),class:D(["px-3 py-2 text-sm rounded-lg border transition-colors text-left",C.value===q.date?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"]),disabled:g.value},[e("div",Dl,h(q.day),1),e("div",Ul,h(q.date),1),e("div",zl,h(q.slots.length)+" slots",1)],10,Tl))),128))]),H.value.length===0?(a(),r("p",Al," No available dates found. Please try again later. ")):k("",!0)]),C.value?(a(),r("div",El,[d[9]||(d[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"2. Select a Time",-1)),e("div",Ll,[(a(!0),r(E,null,L(p.value,q=>{var ee;return a(),r("button",{key:q.start,onClick:no=>R(q),class:D(["px-3 py-2 text-sm rounded-lg border transition-colors",((ee=w.value)==null?void 0:ee.start)===q.start?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"]),disabled:g.value},h(q.start_display),11,Rl)}),128))]),w.value?(a(),r("p",Il," Duration: "+h(w.value.duration_minutes)+" minutes (ends at "+h(w.value.end_display)+") ",1)):k("",!0)])):k("",!0),w.value&&s.value.length>0?(a(),r("div",Ol,[d[11]||(d[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"3. Select Location",-1)),I(e("select",{"onUpdate:modelValue":d[0]||(d[0]=q=>m.value=q),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:g.value},[d[10]||(d[10]=e("option",{value:""},"-- Select location --",-1)),(a(!0),r(E,null,L(s.value,q=>(a(),r("option",{key:q,value:q},h(q),9,Hl))),128))],8,Nl),[[X,m.value]])])):k("",!0),t.showPurpose&&w.value?(a(),r("div",Jl,[d[12]||(d[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Purpose / Notes (Optional)",-1)),I(e("textarea",{"onUpdate:modelValue":d[1]||(d[1]=q=>v.value=q),rows:"2",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Any special instructions or notes...",disabled:g.value},null,8,Ql),[[K,v.value]])])):k("",!0),t.showContactFields&&w.value?(a(),r("div",Gl,[d[13]||(d[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Contact Information (Optional)",-1)),e("div",Kl,[I(e("input",{"onUpdate:modelValue":d[2]||(d[2]=q=>x.value=q),type:"text",placeholder:"Name",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:g.value},null,8,Wl),[[K,x.value]]),I(e("input",{"onUpdate:modelValue":d[3]||(d[3]=q=>S.value=q),type:"email",placeholder:"Email",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:g.value},null,8,Xl),[[K,S.value]]),I(e("input",{"onUpdate:modelValue":d[4]||(d[4]=q=>B.value=q),type:"tel",placeholder:"Phone",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:g.value},null,8,Yl),[[K,B.value]])])])):k("",!0),w.value&&m.value?(a(),r("div",Zl,[d[18]||(d[18]=e("h4",{class:"text-sm font-semibold text-blue-900 mb-2"},"Appointment Summary",-1)),e("div",ea,[e("p",null,[d[14]||(d[14]=e("span",{class:"font-medium"},"Date:",-1)),T(" "+h(C.value),1)]),e("p",null,[d[15]||(d[15]=e("span",{class:"font-medium"},"Time:",-1)),T(" "+h(u(w.value)),1)]),e("p",null,[d[16]||(d[16]=e("span",{class:"font-medium"},"Location:",-1)),T(" "+h(m.value),1)]),e("p",null,[d[17]||(d[17]=e("span",{class:"font-medium"},"Duration:",-1)),T(" "+h(w.value.duration_minutes)+" minutes",1)])])])):k("",!0),V.value?(a(),r("div",ta,[...d[19]||(d[19]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("p",{class:"text-sm text-green-800 font-medium"},"Appointment booked successfully!")],-1)])])):k("",!0),b.value?(a(),r("div",la,[e("p",aa,h(b.value),1)])):k("",!0),e("div",oa,[e("button",{onClick:J,disabled:g.value,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}," Cancel ",8,ra),e("button",{onClick:_,disabled:!l.value||g.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[g.value?(a(),r("span",sa,"Booking...")):(a(),r("span",ia,"Book Appointment"))],8,na)])])):k("",!0)])]}),_:1},8,["modelValue"]))}},ua=["data-fieldname"],ca={class:"block text-sm font-medium text-gray-700 mb-2"},ma={key:0,class:"text-red-500 ml-1"},pa={key:0,class:"space-y-3"},va={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},fa={class:"flex items-start justify-between"},ga={class:"flex items-start space-x-3"},ba={class:"text-sm text-green-800 mt-1"},ya={class:"font-medium"},ha={class:"text-sm text-green-800"},xa={key:0,class:"text-sm text-green-800"},ka={key:2,class:"mt-2 text-sm text-red-600"},_a={__name:"PickupScheduleField",props:{field:{type:Object,required:!0},modelValue:{type:Object,default:()=>({})},teamCode:{type:String,default:"PAYMENTS"},appointmentType:{type:String,default:"Pickup"},councilCode:{type:String,default:null},requestId:{type:String,default:null},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t,{emit:f}){const n=t,y=f,o=j(!1),C=P({get:()=>n.modelValue||{},set:g=>y("update:modelValue",g)}),w=P(()=>{var g,b;return((g=C.value)==null?void 0:g.appointment_id)||((b=C.value)==null?void 0:b.scheduled_start)}),m=P(()=>{var b;return(b=C.value)!=null&&b.scheduled_start?new Date(C.value.scheduled_start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""}),v=P(()=>{var c;if(!((c=C.value)!=null&&c.scheduled_start))return"";const g=new Date(C.value.scheduled_start),b=C.value.scheduled_end?new Date(C.value.scheduled_end):null,V=g.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});if(b){const $=b.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${V} - ${$}`}return V}),x=()=>{o.value=!0},S=g=>{C.value={appointment_id:g.appointment_id,scheduled_start:g.scheduled_start,scheduled_end:g.scheduled_end,location:g.location,status:g.status},y("validate")},B=()=>{C.value={},y("validate")};return(g,b)=>(a(),r("div",{class:"form-group","data-fieldname":t.field.field_name},[e("label",ca,[T(h(t.field.field_label)+" ",1),t.field.is_required?(a(),r("span",ma,"*")):k("",!0)]),w.value?(a(),r("div",va,[e("div",fa,[e("div",ga,[b[6]||(b[6]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[b[5]||(b[5]=e("p",{class:"text-sm font-medium text-green-900"},"Pickup Scheduled",-1)),e("p",ba,[e("span",ya,h(m.value),1)]),e("p",ha,[b[3]||(b[3]=e("span",{class:"font-medium"},"Time:",-1)),T(" "+h(v.value),1)]),C.value.location?(a(),r("p",xa,[b[4]||(b[4]=e("span",{class:"font-medium"},"Location:",-1)),T(" "+h(C.value.location),1)])):k("",!0)])]),e("button",{type:"button",onClick:B,class:"text-sm text-green-700 hover:text-green-900 underline"}," Change ")])])):(a(),r("div",pa,[b[2]||(b[2]=e("p",{class:"text-sm text-gray-600"}," Please schedule a pickup date and time for collecting your payment. ",-1)),e("button",{type:"button",onClick:x,class:"inline-flex items-center px-4 py-2 border border-blue-600 rounded-lg text-sm font-medium text-blue-600 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors"},[...b[1]||(b[1]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),T(" Schedule Pickup Time ",-1)])])])),t.validationError?(a(),r("p",ka,h(t.validationError),1)):k("",!0),M(da,{show:o.value,"onUpdate:show":b[0]||(b[0]=V=>o.value=V),"team-code":t.teamCode,"appointment-type":t.appointmentType,"council-code":t.councilCode,"request-id":t.requestId,title:"Schedule Pickup Time","show-purpose":!1,onBooked:S},null,8,["show","team-code","appointment-type","council-code","request-id"])],8,ua))}},wa={class:"form-group"},$a={class:"relative"},Va=["id","name","value","required"],Ca={value:""},Sa=["value"],qa={__name:"SelectField",props:{field:{type:Object,required:!0},modelValue:{type:[String,Number],default:""},validationError:{type:String,default:""},options:{type:Array,default:()=>[]}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",wa,[M(Y,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",$a,[e("select",{id:t.field.field_name,name:t.field.field_name,value:t.modelValue,onChange:n[0]||(n[0]=y=>f.$emit("update:modelValue",y.target.value)),onBlur:n[1]||(n[1]=y=>f.$emit("validate")),required:t.field.is_required,class:D(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}])},[e("option",Ca,"Select "+h(t.field.field_label),1),(a(!0),r(E,null,L(t.options,y=>(a(),r("option",{key:y,value:y},h(y),9,Sa))),128))],42,Va),n[2]||(n[2]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),M(W,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Ba={class:"form-group"},Ma={class:"relative"},Fa=["id","name","value","required","placeholder"],ja={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},Pa=["innerHTML"],Ta={__name:"TextField",props:{field:{type:Object,required:!0},modelValue:{type:[String,Number],default:""},validationError:{type:String,default:""},placeholder:{type:String,default:""},icon:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",Ba,[M(Y,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",Ma,[e("input",{id:t.field.field_name,name:t.field.field_name,type:"text",value:t.modelValue,onInput:n[0]||(n[0]=y=>f.$emit("update:modelValue",y.target.value)),onBlur:n[1]||(n[1]=y=>f.$emit("validate")),required:t.field.is_required,class:D(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}]),placeholder:t.placeholder},null,42,Fa),t.icon?(a(),r("div",ja,[e("span",{innerHTML:t.icon,class:"text-gray-400"},null,8,Pa)])):k("",!0)]),M(W,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Da={class:"form-group"},Ua=["id","name","value","required","placeholder"],za={__name:"TextareaField",props:{field:{type:Object,required:!0},modelValue:{type:String,default:""},validationError:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",Da,[M(Y,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("textarea",{id:t.field.field_name,name:t.field.field_name,value:t.modelValue,onInput:n[0]||(n[0]=y=>f.$emit("update:modelValue",y.target.value)),onBlur:n[1]||(n[1]=y=>f.$emit("validate")),required:t.field.is_required,rows:"4",class:D(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}]),placeholder:t.placeholder},null,42,Ua),M(W,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Aa={class:"space-y-6"},Ea={key:0,class:"form-group"},La={key:9,class:"form-group"},Ra={key:11,class:"form-group"},Ia={class:"text-sm text-gray-500 italic"},Oa={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:f}){const n=t,y=f,o=P({get:()=>n.modelValue,set:p=>y("update:modelValue",p)}),C=P(()=>n.fields.filter(p=>{var R;const s=((R=p.parent_section_code)==null?void 0:R.toLowerCase())||"",u=["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(s),U=["barangay","municipality","province","city","region","zip_code","postal_code"];return u&&n.fields.some(_=>_.parent_section_code===p.parent_section_code&&_.field_name==="address_line")&&U.includes(p.field_name)?!1:ge(p,o.value)})),w=p=>{var _,i,d;const s=((_=p.field_name)==null?void 0:_.toLowerCase())||"",l=((i=p.field_label)==null?void 0:i.toLowerCase())||"",u=((d=p.parent_section_code)==null?void 0:d.toLowerCase())||"",U=["address_line","street","residential_address","property_address","home_address","current_address","permanent_address"],R=["address","residential_address","permanent_address","property_address","current_address","home_address"],J=["residential address","property address","home address","current address","permanent address","street / house number","street address"];return U.includes(s)&&p.field_type==="Data"||R.includes(u)&&(s==="address_line"||s==="street")&&p.field_type==="Data"||J.some(F=>l.includes(F))&&p.field_type==="Data"&&!l.includes("zip")&&!l.includes("postal")},m=p=>{var l;if(p.placeholder)return p.placeholder;const s=((l=p.field_label)==null?void 0:l.toLowerCase())||"";return s.includes("name")?"e.g., Juan Dela Cruz":s.includes("email")?"e.g., juan@example.com":s.includes("phone")||s.includes("mobile")||s.includes("contact")?"e.g., 0917 123 4567":s.includes("age")?"e.g., 25":s.includes("occupation")?"e.g., Teacher":s.includes("income")||s.includes("salary")?"e.g., 15000":`Enter ${p.field_label}`},v=p=>{var l;const s=((l=p.field_label)==null?void 0:l.toLowerCase())||"";return s.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':s.includes("phone")||s.includes("mobile")||s.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':s.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},x=p=>p?p.split(`
`).map(s=>s.trim()).filter(Boolean):[],{errors:S,validateConfigField:B,clearFieldError:g}=be(),b=p=>{if(!p.validation&&!p.is_required){g(p.field_name);return}const s=o.value[p.field_name];B(p.field_name,s,p,o.value)},V=p=>S.value[p]||"",c=p=>{const s=o.value[p];return Array.isArray(s)?s:s?typeof s=="string"?[{file_url:s,name:s.split("/").pop(),preview:s}]:[]:[]},$=(p,s)=>{if(console.log("[DynamicFieldRenderer] updateFileField called:",p,s),Array.isArray(s)&&s.length>0){const l=s.filter(u=>u.file_url);if(l.length>0){const u=l[0].file_url;console.log("[DynamicFieldRenderer] Converting uploaded file to URL:",u),o.value[p]=u;return}}o.value[p]=s},H=(p,s)=>N(this,null,function*(){console.log("[DynamicFieldRenderer] handleFileUploadToFrappe called with:",p);try{console.log("[DynamicFieldRenderer] Starting file upload:",p.name);const l=new FormData;l.append("file",p.file),l.append("is_private","0"),l.append("folder","Home/Attachments"),console.log("[DynamicFieldRenderer] Uploading to /api/method/upload_file...");const u=yield fetch("/api/method/upload_file",{method:"POST",credentials:"include",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:l});if(console.log("[DynamicFieldRenderer] Upload response status:",u.status),!u.ok){const R=yield u.text();throw console.error("[DynamicFieldRenderer] Upload failed:",R),new Error(`Upload failed (${u.status}): ${R}`)}const U=yield u.json();console.log("[DynamicFieldRenderer] Upload response:",U),U.message&&U.message.file_url&&(console.log("[DynamicFieldRenderer] File uploaded successfully:",U.message.file_url),p.file_url=U.message.file_url,p.file_name=U.message.file_name,console.log("[DynamicFieldRenderer] Updated fileData:",p)),console.log("[DynamicFieldRenderer] Calling resolveCallback()"),s(),console.log("[DynamicFieldRenderer] File upload completed successfully")}catch(l){console.error("[DynamicFieldRenderer] File upload error:",l),alert(`Failed to upload file: ${l.message}`),console.log("[DynamicFieldRenderer] Calling resolveCallback() after error"),s()}});return G(()=>o.value,p=>{Object.entries(p).forEach(([s,l])=>{if(Array.isArray(l)&&l.length>0&&l[0].file_url){const u=l.map(U=>U.file_url).filter(Boolean);u.length>0&&(o.value[s]=u.length===1?u[0]:u,console.log(`[DynamicFieldRenderer] Converted file array to URL for ${s}:`,o.value[s]))}})},{deep:!0}),G(()=>n.fields,p=>{p.forEach(s=>{s.default_value&&!o.value[s.field_name]&&(s.default_value==="Today"&&s.field_type==="Date"?o.value[s.field_name]=new Date().toISOString().split("T")[0]:o.value[s.field_name]=s.default_value)})},{immediate:!0}),(p,s)=>(a(),r("div",Aa,[(a(!0),r(E,null,L(C.value,l=>(a(),r("div",{key:l.field_name,class:"field-wrapper"},[w(l)?(a(),r("div",Ea,[M(ol,{modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,label:l.field_label,required:!!l.is_required},null,8,["modelValue","onUpdate:modelValue","label","required"])])):l.field_type==="Data"?(a(),z(Ta,{key:1,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,"validation-error":V(l.field_name),placeholder:m(l),icon:v(l),onValidate:u=>b(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","icon","onValidate"])):l.field_type==="Select"?(a(),z(qa,{key:2,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,"validation-error":V(l.field_name),options:x(l.options),onValidate:u=>b(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","options","onValidate"])):l.field_type==="Check"?(a(),z(gl,{key:3,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,"validation-error":V(l.field_name),onValidate:u=>b(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):["Text","Text Editor","Small Text","Long Text"].includes(l.field_type)?(a(),z(za,{key:4,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,"validation-error":V(l.field_name),placeholder:m(l),onValidate:u=>b(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):l.field_type==="Date"?(a(),z(_l,{key:5,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,"validation-error":V(l.field_name),onValidate:u=>b(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):l.field_type==="Int"?(a(),z(te,{key:6,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,"validation-error":V(l.field_name),placeholder:m(l),variant:"int",onValidate:u=>b(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):l.field_type==="Float"?(a(),z(te,{key:7,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,"validation-error":V(l.field_name),placeholder:m(l),variant:"float",onValidate:u=>b(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):l.field_type==="Currency"?(a(),z(te,{key:8,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,"validation-error":V(l.field_name),variant:"currency",onValidate:u=>b(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):l.field_type==="Attach"||l.field_type==="Attach Image"?(a(),r("div",La,[M(ft,{label:l.field_label,required:l.is_required,accept:l.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:c(l.field_name),"onUpdate:modelValue":u=>$(l.field_name,u),onUpload:H},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):l.field_type==="Pickup Schedule"?(a(),z(_a,{key:10,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":u=>o.value[l.field_name]=u,"team-code":l.team_code||"PAYMENTS","appointment-type":l.appointment_type||"Pickup","validation-error":V(l.field_name),onValidate:u=>b(l)},null,8,["field","modelValue","onUpdate:modelValue","team-code","appointment-type","validation-error","onValidate"])):(a(),r("div",Ra,[e("div",Ia,' Field type "'+h(l.field_type)+'" not yet supported for '+h(l.field_label),1)]))]))),128))]))}},le=Z(Oa,[["__scopeId","data-v-e9592afd"]]),Na={class:"dynamic-step max-w-4xl mx-auto"},Ha={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},Ja={class:"flex items-start"},Qa={class:"ml-4 flex-1"},Ga={class:"text-2xl font-bold text-blue-900"},Ka={key:0,class:"mt-2 text-sm text-blue-700"},Wa={class:"space-y-6"},Xa={class:"mb-4 pb-3 border-b-2 border-gray-200"},Ya={class:"flex items-center"},Za={class:"text-lg font-semibold text-gray-900"},eo={key:0,class:"text-red-500 ml-1"},to={key:0,class:"text-sm text-gray-600 mt-0.5"},lo={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},ao={class:"section-content"},oo={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},ro={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:f}){const n=t,y=f,o=P({get:()=>n.modelValue,set:m=>y("update:modelValue",m)}),C=P(()=>n.stepConfig.sections?n.stepConfig.sections.filter(m=>{if(!m.depends_on)return!0;try{return ye(m,o.value)}catch(v){return console.error(`Error evaluating section visibility for ${m.section_code}:`,v),!0}}):[]),w=m=>[m.section_title];return G(()=>n.stepConfig,m=>{m.sections&&m.sections.forEach(v=>{v.fields.forEach(x=>{if(x.default_value&&!o.value[x.field_name]){const S=Q({},o.value);x.default_value==="Today"&&x.field_type==="Date"?S[x.field_name]=new Date().toISOString().split("T")[0]:S[x.field_name]=x.default_value,y("update:modelValue",S)}})})},{immediate:!0,deep:!0}),(m,v)=>(a(),r("div",Na,[e("div",Ha,[e("div",Ja,[v[3]||(v[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Qa,[e("h2",Ga,h(t.stepConfig.step_title),1),t.stepDescription?(a(),r("p",Ka,h(t.stepDescription),1)):k("",!0)])])]),e("div",Wa,[(a(!0),r(E,null,L(C.value,x=>(a(),r("div",{key:x.section_code,class:"section"},[e("div",Xa,[e("div",Ya,[v[4]||(v[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",Za,[T(h(x.section_title)+" ",1),x.is_required?(a(),r("span",eo,"*")):k("",!0)]),x.section_description?(a(),r("p",to,h(x.section_description),1)):k("",!0)])]),x.is_required?(a(),r("div",lo,[...v[5]||(v[5]=[T(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),T(" are required ",-1)])])):k("",!0)]),e("div",ao,[x.section_type==="Tab"?(a(),z(A(Me),{key:0},{default:O(()=>[M(A(Ce),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:O(()=>[(a(!0),r(E,null,L(w(x),(S,B)=>(a(),z(A(Se),{key:B,class:D(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",m.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:O(({selected:g})=>[T(h(S),1)]),_:2},1032,["class"]))),128))]),_:2},1024),M(A(qe),null,{default:O(()=>[(a(!0),r(E,null,L(w(x),(S,B)=>(a(),z(A(Be),{key:B},{default:O(()=>[M(le,{fields:x.fields,modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=g=>o.value=g)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):x.section_type==="Accordion"?(a(),z(A(Pe),{key:1},{default:O(({open:S})=>[M(A(Fe),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:O(()=>[e("span",null,h(x.section_title),1),M(A(Te),{class:D([S?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),M(A(je),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:O(()=>[M(le,{fields:x.fields,modelValue:o.value,"onUpdate:modelValue":v[1]||(v[1]=B=>o.value=B)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(a(),r("div",oo,[M(le,{fields:x.fields,modelValue:o.value,"onUpdate:modelValue":v[2]||(v[2]=S=>o.value=S)},null,8,["fields","modelValue"])]))])]))),128))])]))}},go=Z(ro,[["__scopeId","data-v-aac49f57"]]);export{go as default};
//# sourceMappingURL=DynamicStepRenderer-CSySqgNr.js.map
