{"version":3,"file":"NewRequest-v2bF4PWx.js","sources":["../../../../frontend/node_modules/@headlessui/vue/dist/hooks/use-resolve-button-type.js","../../../../frontend/node_modules/@headlessui/vue/dist/components/disclosure/disclosure.js","../../../../frontend/node_modules/@headlessui/vue/dist/internal/focus-sentinel.js","../../../../frontend/node_modules/@headlessui/vue/dist/components/tabs/tabs.js","../../../../frontend/src/stores/requestStore.js","../../../../frontend/src/utils/fieldValidation.js","../../../../frontend/src/composables/useStepValidation.ts","../../../../frontend/src/composables/useUserProfile.js","../../../../frontend/src/components/request/RequestProgress.vue","../../../../frontend/src/components/request/StepNavigation.vue","../../../../frontend/src/components/modals/SaveDraftModal.vue","../../../../frontend/src/components/modals/ValidationErrorModal.vue","../../../../frontend/src/components/modals/SubmissionSuccessModal.vue","../../../../frontend/src/components/request-steps/Step1CouncilSelection.vue","../../../../frontend/src/components/request-steps/Step2RequestType.vue","../../../../frontend/src/components/request-steps/Step3ProcessInfo.vue","../../../../frontend/node_modules/@heroicons/vue/20/solid/esm/ChevronUpIcon.js","../../../../frontend/src/components/CameraUpload.vue","../../../../frontend/src/components/PhilippinesAddressInput.vue","../../../../frontend/src/components/PropertyAddressSelector.vue","../../../../frontend/src/components/Tooltip.vue","../../../../frontend/src/utils/conditionalLogic.js","../../../../frontend/src/components/DynamicFieldRenderer.vue","../../../../frontend/src/components/DynamicStepRenderer.vue","../../../../frontend/src/components/request-steps/ReviewStep.vue","../../../../frontend/src/pages/NewRequest.vue"],"sourcesContent":["import{onMounted as i,ref as f,watchEffect as l}from\"vue\";import{dom as o}from'../utils/dom.js';function r(t,e){if(t)return t;let n=e!=null?e:\"button\";if(typeof n==\"string\"&&n.toLowerCase()===\"button\")return\"button\"}function s(t,e){let n=f(r(t.value.type,t.value.as));return i(()=>{n.value=r(t.value.type,t.value.as)}),l(()=>{var u;n.value||o(e)&&o(e)instanceof HTMLButtonElement&&!((u=o(e))!=null&&u.hasAttribute(\"type\"))&&(n.value=\"button\")}),n}export{s as useResolveButtonType};\n","import{computed as m,defineComponent as b,inject as I,onMounted as P,onUnmounted as h,provide as R,ref as d,watchEffect as w}from\"vue\";import{useId as E}from'../../hooks/use-id.js';import{useResolveButtonType as H}from'../../hooks/use-resolve-button-type.js';import{State as y,useOpenClosed as L,useOpenClosedProvider as j}from'../../internal/open-closed.js';import{Keys as f}from'../../keyboard.js';import{dom as p}from'../../utils/dom.js';import{match as x}from'../../utils/match.js';import{Features as B,render as g}from'../../utils/render.js';var $=(o=>(o[o.Open=0]=\"Open\",o[o.Closed=1]=\"Closed\",o))($||{});let T=Symbol(\"DisclosureContext\");function O(t){let r=I(T,null);if(r===null){let o=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,O),o}return r}let k=Symbol(\"DisclosurePanelContext\");function U(){return I(k,null)}let N=b({name:\"Disclosure\",props:{as:{type:[Object,String],default:\"template\"},defaultOpen:{type:[Boolean],default:!1}},setup(t,{slots:r,attrs:o}){let s=d(t.defaultOpen?0:1),e=d(null),i=d(null),n={buttonId:d(`headlessui-disclosure-button-${E()}`),panelId:d(`headlessui-disclosure-panel-${E()}`),disclosureState:s,panel:e,button:i,toggleDisclosure(){s.value=x(s.value,{[0]:1,[1]:0})},closeDisclosure(){s.value!==1&&(s.value=1)},close(l){n.closeDisclosure();let a=(()=>l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?p(l):p(n.button):p(n.button))();a==null||a.focus()}};return R(T,n),j(m(()=>x(s.value,{[0]:y.Open,[1]:y.Closed}))),()=>{let{defaultOpen:l,...a}=t,c={open:s.value===0,close:n.close};return g({theirProps:a,ourProps:{},slot:c,slots:r,attrs:o,name:\"Disclosure\"})}}}),Q=b({name:\"DisclosureButton\",props:{as:{type:[Object,String],default:\"button\"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:o,expose:s}){let e=O(\"DisclosureButton\"),i=U(),n=m(()=>i===null?!1:i.value===e.panelId.value);P(()=>{n.value||t.id!==null&&(e.buttonId.value=t.id)}),h(()=>{n.value||(e.buttonId.value=null)});let l=d(null);s({el:l,$el:l}),n.value||w(()=>{e.button.value=l.value});let a=H(m(()=>({as:t.as,type:r.type})),l);function c(){var u;t.disabled||(n.value?(e.toggleDisclosure(),(u=p(e.button))==null||u.focus()):e.toggleDisclosure())}function D(u){var S;if(!t.disabled)if(n.value)switch(u.key){case f.Space:case f.Enter:u.preventDefault(),u.stopPropagation(),e.toggleDisclosure(),(S=p(e.button))==null||S.focus();break}else switch(u.key){case f.Space:case f.Enter:u.preventDefault(),u.stopPropagation(),e.toggleDisclosure();break}}function v(u){switch(u.key){case f.Space:u.preventDefault();break}}return()=>{var C;let u={open:e.disclosureState.value===0},{id:S,...K}=t,M=n.value?{ref:l,type:a.value,onClick:c,onKeydown:D}:{id:(C=e.buttonId.value)!=null?C:S,ref:l,type:a.value,\"aria-expanded\":e.disclosureState.value===0,\"aria-controls\":e.disclosureState.value===0||p(e.panel)?e.panelId.value:void 0,disabled:t.disabled?!0:void 0,onClick:c,onKeydown:D,onKeyup:v};return g({ourProps:M,theirProps:K,slot:u,attrs:r,slots:o,name:\"DisclosureButton\"})}}}),V=b({name:\"DisclosurePanel\",props:{as:{type:[Object,String],default:\"div\"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:r,slots:o,expose:s}){let e=O(\"DisclosurePanel\");P(()=>{t.id!==null&&(e.panelId.value=t.id)}),h(()=>{e.panelId.value=null}),s({el:e.panel,$el:e.panel}),R(k,e.panelId);let i=L(),n=m(()=>i!==null?(i.value&y.Open)===y.Open:e.disclosureState.value===0);return()=>{var v;let l={open:e.disclosureState.value===0,close:e.close},{id:a,...c}=t,D={id:(v=e.panelId.value)!=null?v:a,ref:e.panel};return g({ourProps:D,theirProps:c,slot:l,attrs:r,slots:o,features:B.RenderStrategy|B.Static,visible:n.value,name:\"DisclosurePanel\"})}}});export{N as Disclosure,Q as DisclosureButton,V as DisclosurePanel};\n","import{defineComponent as i,h as m,ref as f}from\"vue\";import{Features as l,Hidden as F}from'./hidden.js';let d=i({props:{onFocus:{type:Function,required:!0}},setup(t){let n=f(!0);return()=>n.value?m(F,{as:\"button\",type:\"button\",features:l.Focusable,onFocus(o){o.preventDefault();let e,a=50;function r(){var u;if(a--<=0){e&&cancelAnimationFrame(e);return}if((u=t.onFocus)!=null&&u.call(t)){n.value=!1,cancelAnimationFrame(e);return}e=requestAnimationFrame(r)}e=requestAnimationFrame(r)}}):null}});export{d as FocusSentinel};\n","import{computed as v,defineComponent as L,Fragment as z,h as A,inject as j,onMounted as F,onUnmounted as K,provide as N,ref as P,watch as _,watchEffect as J}from\"vue\";import{useId as $}from'../../hooks/use-id.js';import{useResolveButtonType as Q}from'../../hooks/use-resolve-button-type.js';import{FocusSentinel as V}from'../../internal/focus-sentinel.js';import{Hidden as X}from'../../internal/hidden.js';import{Keys as S}from'../../keyboard.js';import{dom as f}from'../../utils/dom.js';import{Focus as g,focusIn as D,FocusResult as B,sortByDomNode as k}from'../../utils/focus-management.js';import{match as H}from'../../utils/match.js';import{microTask as Y}from'../../utils/micro-task.js';import{getOwnerDocument as Z}from'../../utils/owner.js';import{Features as q,omit as ee,render as M}from'../../utils/render.js';var te=(s=>(s[s.Forwards=0]=\"Forwards\",s[s.Backwards=1]=\"Backwards\",s))(te||{}),le=(d=>(d[d.Less=-1]=\"Less\",d[d.Equal=0]=\"Equal\",d[d.Greater=1]=\"Greater\",d))(le||{});let U=Symbol(\"TabsContext\");function C(a){let b=j(U,null);if(b===null){let s=new Error(`<${a} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,C),s}return b}let G=Symbol(\"TabsSSRContext\"),me=L({name:\"TabGroup\",emits:{change:a=>!0},props:{as:{type:[Object,String],default:\"template\"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:b,attrs:s,emit:d}){var E;let i=P((E=a.selectedIndex)!=null?E:a.defaultIndex),l=P([]),r=P([]),p=v(()=>a.selectedIndex!==null),R=v(()=>p.value?a.selectedIndex:i.value);function y(t){var c;let n=k(u.tabs.value,f),o=k(u.panels.value,f),e=n.filter(I=>{var m;return!((m=f(I))!=null&&m.hasAttribute(\"disabled\"))});if(t<0||t>n.length-1){let I=H(i.value===null?0:Math.sign(t-i.value),{[-1]:()=>1,[0]:()=>H(Math.sign(t),{[-1]:()=>0,[0]:()=>0,[1]:()=>1}),[1]:()=>0}),m=H(I,{[0]:()=>n.indexOf(e[0]),[1]:()=>n.indexOf(e[e.length-1])});m!==-1&&(i.value=m),u.tabs.value=n,u.panels.value=o}else{let I=n.slice(0,t),h=[...n.slice(t),...I].find(W=>e.includes(W));if(!h)return;let O=(c=n.indexOf(h))!=null?c:u.selectedIndex.value;O===-1&&(O=u.selectedIndex.value),i.value=O,u.tabs.value=n,u.panels.value=o}}let u={selectedIndex:v(()=>{var t,n;return(n=(t=i.value)!=null?t:a.defaultIndex)!=null?n:null}),orientation:v(()=>a.vertical?\"vertical\":\"horizontal\"),activation:v(()=>a.manual?\"manual\":\"auto\"),tabs:l,panels:r,setSelectedIndex(t){R.value!==t&&d(\"change\",t),p.value||y(t)},registerTab(t){var o;if(l.value.includes(t))return;let n=l.value[i.value];if(l.value.push(t),l.value=k(l.value,f),!p.value){let e=(o=l.value.indexOf(n))!=null?o:i.value;e!==-1&&(i.value=e)}},unregisterTab(t){let n=l.value.indexOf(t);n!==-1&&l.value.splice(n,1)},registerPanel(t){r.value.includes(t)||(r.value.push(t),r.value=k(r.value,f))},unregisterPanel(t){let n=r.value.indexOf(t);n!==-1&&r.value.splice(n,1)}};N(U,u);let T=P({tabs:[],panels:[]}),x=P(!1);F(()=>{x.value=!0}),N(G,v(()=>x.value?null:T.value));let w=v(()=>a.selectedIndex);return F(()=>{_([w],()=>{var t;return y((t=a.selectedIndex)!=null?t:a.defaultIndex)},{immediate:!0})}),J(()=>{if(!p.value||R.value==null||u.tabs.value.length<=0)return;let t=k(u.tabs.value,f);t.some((o,e)=>f(u.tabs.value[e])!==f(o))&&u.setSelectedIndex(t.findIndex(o=>f(o)===f(u.tabs.value[R.value])))}),()=>{let t={selectedIndex:i.value};return A(z,[l.value.length<=0&&A(V,{onFocus:()=>{for(let n of l.value){let o=f(n);if((o==null?void 0:o.tabIndex)===0)return o.focus(),!0}return!1}}),M({theirProps:{...s,...ee(a,[\"selectedIndex\",\"defaultIndex\",\"manual\",\"vertical\",\"onChange\"])},ourProps:{},slot:t,slots:b,attrs:s,name:\"TabGroup\"})])}}}),pe=L({name:\"TabList\",props:{as:{type:[Object,String],default:\"div\"}},setup(a,{attrs:b,slots:s}){let d=C(\"TabList\");return()=>{let i={selectedIndex:d.selectedIndex.value},l={role:\"tablist\",\"aria-orientation\":d.orientation.value};return M({ourProps:l,theirProps:a,slot:i,attrs:b,slots:s,name:\"TabList\"})}}}),xe=L({name:\"Tab\",props:{as:{type:[Object,String],default:\"button\"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(a,{attrs:b,slots:s,expose:d}){var o;let i=(o=a.id)!=null?o:`headlessui-tabs-tab-${$()}`,l=C(\"Tab\"),r=P(null);d({el:r,$el:r}),F(()=>l.registerTab(r)),K(()=>l.unregisterTab(r));let p=j(G),R=v(()=>{if(p.value){let e=p.value.tabs.indexOf(i);return e===-1?p.value.tabs.push(i)-1:e}return-1}),y=v(()=>{let e=l.tabs.value.indexOf(r);return e===-1?R.value:e}),u=v(()=>y.value===l.selectedIndex.value);function T(e){var I;let c=e();if(c===B.Success&&l.activation.value===\"auto\"){let m=(I=Z(r))==null?void 0:I.activeElement,h=l.tabs.value.findIndex(O=>f(O)===m);h!==-1&&l.setSelectedIndex(h)}return c}function x(e){let c=l.tabs.value.map(m=>f(m)).filter(Boolean);if(e.key===S.Space||e.key===S.Enter){e.preventDefault(),e.stopPropagation(),l.setSelectedIndex(y.value);return}switch(e.key){case S.Home:case S.PageUp:return e.preventDefault(),e.stopPropagation(),T(()=>D(c,g.First));case S.End:case S.PageDown:return e.preventDefault(),e.stopPropagation(),T(()=>D(c,g.Last))}if(T(()=>H(l.orientation.value,{vertical(){return e.key===S.ArrowUp?D(c,g.Previous|g.WrapAround):e.key===S.ArrowDown?D(c,g.Next|g.WrapAround):B.Error},horizontal(){return e.key===S.ArrowLeft?D(c,g.Previous|g.WrapAround):e.key===S.ArrowRight?D(c,g.Next|g.WrapAround):B.Error}}))===B.Success)return e.preventDefault()}let w=P(!1);function E(){var e;w.value||(w.value=!0,!a.disabled&&((e=f(r))==null||e.focus({preventScroll:!0}),l.setSelectedIndex(y.value),Y(()=>{w.value=!1})))}function t(e){e.preventDefault()}let n=Q(v(()=>({as:a.as,type:b.type})),r);return()=>{var m,h;let e={selected:u.value,disabled:(m=a.disabled)!=null?m:!1},{...c}=a,I={ref:r,onKeydown:x,onMousedown:t,onClick:E,id:i,role:\"tab\",type:n.value,\"aria-controls\":(h=f(l.panels.value[y.value]))==null?void 0:h.id,\"aria-selected\":u.value,tabIndex:u.value?0:-1,disabled:a.disabled?!0:void 0};return M({ourProps:I,theirProps:c,slot:e,attrs:b,slots:s,name:\"Tab\"})}}}),Ie=L({name:\"TabPanels\",props:{as:{type:[Object,String],default:\"div\"}},setup(a,{slots:b,attrs:s}){let d=C(\"TabPanels\");return()=>{let i={selectedIndex:d.selectedIndex.value};return M({theirProps:a,ourProps:{},slot:i,attrs:s,slots:b,name:\"TabPanels\"})}}}),ye=L({name:\"TabPanel\",props:{as:{type:[Object,String],default:\"div\"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(a,{attrs:b,slots:s,expose:d}){var T;let i=(T=a.id)!=null?T:`headlessui-tabs-panel-${$()}`,l=C(\"TabPanel\"),r=P(null);d({el:r,$el:r}),F(()=>l.registerPanel(r)),K(()=>l.unregisterPanel(r));let p=j(G),R=v(()=>{if(p.value){let x=p.value.panels.indexOf(i);return x===-1?p.value.panels.push(i)-1:x}return-1}),y=v(()=>{let x=l.panels.value.indexOf(r);return x===-1?R.value:x}),u=v(()=>y.value===l.selectedIndex.value);return()=>{var n;let x={selected:u.value},{tabIndex:w,...E}=a,t={ref:r,id:i,role:\"tabpanel\",\"aria-labelledby\":(n=f(l.tabs.value[y.value]))==null?void 0:n.id,tabIndex:u.value?w:-1};return!u.value&&a.unmount&&!a.static?A(X,{as:\"span\",\"aria-hidden\":!0,...t}):M({ourProps:t,theirProps:E,slot:x,attrs:b,slots:s,features:q.Static|q.RenderStrategy,visible:u.value,name:\"TabPanel\"})}}});export{xe as Tab,me as TabGroup,pe as TabList,ye as TabPanel,Ie as TabPanels};\n","import { defineStore } from 'pinia'\nimport { requestService } from '../services'\n\nexport const useRequestStore = defineStore('request', {\n    state: () => ({\n        // Current request being edited\n        currentRequestId: null,\n        requestTypeCode: null,\n        requestTypeConfig: null,\n\n        // Form state\n        formData: {},\n        currentStep: 0,\n\n        // Validation\n        stepValidationStatus: {}, // { 0: true, 1: false, ... }\n\n        // UI state\n        isSaving: false,\n        isSubmitting: false,\n        lastSaved: null,\n\n        // Error state\n        error: null\n    }),\n\n    getters: {\n        isFirstStep: (state) => state.currentStep === 0,\n\n        // === NEW GETTER: Total Steps (matches logic in NewRequest.vue) ===\n        totalSteps: (state) => {\n            if (state.requestTypeConfig?.steps) {\n                // 3 Static Steps (Council, Type, Process Info) + Dynamic Steps + 1 Review Step\n                return state.requestTypeConfig.steps.length + 4\n            }\n            return 4 // Default: 3 Static + 1 Review\n        },\n        // =================================================================\n\n        // === FIXED GETTER: isLastStep ===\n        isLastStep: (state) => {\n            // Use the new, correct totalSteps getter\n            return state.currentStep === state.totalSteps - 1\n        },\n        // ================================\n\n        currentStepConfig: (state) => {\n            // NOTE: This getter still uses the wrong index if totalSteps were used, \n            // but the parent component uses its own calculation. Keeping it as-is \n            // since it is not currently used by the parent for dynamic steps.\n            return state.requestTypeConfig?.steps?.[state.currentStep]\n        },\n\n        canNavigateNext: (state) => {\n            return state.stepValidationStatus[state.currentStep] === true\n        },\n\n        completionPercentage: (state) => {\n            if (state.totalSteps === 0) return 0\n            return Math.round(((state.currentStep + 1) / state.totalSteps) * 100)\n        },\n\n        hasUnsavedChanges: (state) => {\n            // Check if form data exists and last saved is more than 30 seconds ago\n            if (!state.lastSaved) return Object.keys(state.formData).length > 0\n            const now = new Date()\n            const diff = now - state.lastSaved\n            return diff > 30000 // 30 seconds\n        }\n    },\n\n    actions: {\n        // ... (initialize, loadDraft, saveProgress, saveDraft, submitRequest actions remain unchanged)\n\n        /**\n         * Navigate to next step\n         */\n        nextStep() {\n            if (!this.isLastStep) {\n                this.currentStep++\n            }\n        },\n\n        /**\n         * Navigate to previous step\n         */\n        previousStep() {\n            if (!this.isFirstStep) {\n                this.currentStep--\n            }\n        },\n\n        /**\n         * Jump to specific step\n         */\n        goToStep(stepIndex) {\n            // Use the correct totalSteps getter\n            if (stepIndex >= 0 && stepIndex < this.totalSteps) {\n                this.currentStep = stepIndex\n            }\n        },\n        // ... (updateField, updateFields, setStepValidation, clearError, reset actions remain unchanged)\n\n        // All the boilerplate logic for initialize, loadDraft, saveProgress, etc. goes here\n        // ...\n        async initialize(requestTypeCode, draftId = null) {\n            try {\n                this.requestTypeCode = requestTypeCode\n                this.error = null\n\n                console.log('[RequestStore] initialize called:', { requestTypeCode, draftId })\n\n                // Load request type config\n                const configResource = requestService.getRequestTypeConfig(requestTypeCode)\n\n                // Wait for config to load\n                await new Promise((resolve) => {\n                    const checkLoaded = setInterval(() => {\n                        if (!configResource.loading) {\n                            clearInterval(checkLoaded)\n                            resolve()\n                        }\n                    }, 100)\n                })\n\n                this.requestTypeConfig = configResource.data\n\n                if (draftId) {\n                    // Load existing draft\n                    await this.loadDraft(draftId)\n                }\n            } catch (error) {\n                console.error('Failed to initialize request:', error)\n                this.error = error.message || 'Failed to load request type'\n            }\n        },\n\n        async loadDraft(draftId) {\n            try {\n                const resource = requestService.getRequest(draftId)\n\n                // Wait for load\n                await new Promise((resolve) => {\n                    const checkLoaded = setInterval(() => {\n                        if (!resource.loading) {\n                            clearInterval(checkLoaded)\n                            resolve()\n                        }\n                    }, 100)\n                })\n\n                const draft = resource.data\n                this.currentRequestId = draftId\n\n                // Parse the full form data from draft_full_data JSON field\n                if (draft.draft_full_data) {\n                    try {\n                        this.formData = JSON.parse(draft.draft_full_data)\n                    } catch (error) {\n                        console.error('Failed to parse draft_full_data:', error)\n                        this.formData = draft.form_data || {}\n                    }\n                } else {\n                    this.formData = draft.form_data || {}\n                }\n\n                // Use draft_current_step from the document\n                this.currentStep = draft.draft_current_step || 0\n            } catch (error) {\n                console.error('Failed to load draft:', error)\n                this.error = error.message || 'Failed to load draft'\n            }\n        },\n\n        async saveProgress() {\n            // Prevent concurrent saves\n            if (this.isSaving) {\n                console.log('[RequestStore] Save already in progress, skipping')\n                return\n            }\n\n            // Ensure formData has request_id if store has one\n            if (this.currentRequestId && !this.formData.request_id) {\n                console.warn('[RequestStore] Syncing request_id to formData')\n                this.formData.request_id = this.currentRequestId\n            }\n\n            console.log('[RequestStore] saveProgress called', {\n                hasRequestId: !!this.currentRequestId,\n                formDataHasId: !!this.formData.request_id,\n                currentStep: this.currentStep,\n                isSaving: this.isSaving\n            })\n\n            this.isSaving = true\n            this.error = null\n\n            try {\n                // Sanitize formData to remove File objects (files need separate upload)\n                const sanitizedData = {}\n                for (const [key, value] of Object.entries(this.formData)) {\n                    // Skip File objects - they should be uploaded separately\n                    if (value instanceof File) {\n                        console.warn(`[RequestStore] Skipping File object for key: ${key}`)\n                        continue\n                    }\n                    // Skip undefined/null but allow empty strings and false\n                    if (value !== undefined && value !== null) {\n                        sanitizedData[key] = value\n                    }\n                }\n\n                // Ensure we have some data to send\n                if (Object.keys(sanitizedData).length === 0 && !this.currentRequestId) {\n                    throw new Error('No form data to save. Please fill in at least one field.')\n                }\n\n                console.log('[RequestStore] Sending sanitized data with', Object.keys(sanitizedData).length, 'fields')\n\n                const result = await requestService.createDraft(\n                    sanitizedData,\n                    this.currentStep\n                )\n\n                if (!this.currentRequestId) {\n                    this.currentRequestId = result.request_id\n                    // Ensure subsequent saves include request_id to update existing draft\n                    this.formData.request_id = result.request_id\n\n                    // Backup to localStorage\n                    localStorage.setItem('current_draft_id', result.request_id)\n                }\n\n                this.lastSaved = new Date()\n\n                return result  // Return for caller\n            } catch (error) {\n                console.error('Save failed:', error)\n                this.error = error.message || 'Failed to save progress'\n                throw error\n            } finally {\n                this.isSaving = false\n            }\n        },\n\n        async saveDraft() {\n            return this.saveProgress()\n        },\n\n        async submitRequest() {\n            this.isSubmitting = true\n            this.error = null\n\n            try {\n                // Save current progress first\n                if (!this.currentRequestId) {\n                    await this.saveProgress()\n                }\n\n                // Submit the request and get result\n                const result = await requestService.submitRequest(this.currentRequestId)\n\n                // Clear state\n                this.reset()\n\n                // Return submission result with SLA info\n                return result\n            } catch (error) {\n                console.error('Submit failed:', error)\n                this.error = error.message || 'Failed to submit request'\n                throw error\n            } finally {\n                this.isSubmitting = false\n            }\n        },\n\n        updateField(fieldName, value) {\n            this.formData[fieldName] = value\n        },\n\n        updateFields(fields) {\n            Object.assign(this.formData, fields)\n        },\n\n        setStepValidation(stepIndex, isValid) {\n            this.stepValidationStatus[stepIndex] = isValid\n        },\n\n        clearError() {\n            this.error = null\n        },\n\n        reset() {\n            console.log('[RequestStore] reset() called - clearing all state')\n\n            this.currentRequestId = null\n            this.requestTypeCode = null\n            this.requestTypeConfig = null\n\n            // Clear formData completely - don't just reassign\n            Object.keys(this.formData).forEach(key => {\n                delete this.formData[key]\n            })\n            this.formData = {}  // Reset to empty object\n\n            this.currentStep = 0\n            this.stepValidationStatus = {}\n            this.isSaving = false\n            this.isSubmitting = false\n            this.lastSaved = null\n            this.error = null\n\n            // Clear localStorage backup\n            localStorage.removeItem('current_draft_id')\n        }\n    }\n})","/**\n * Field Validation Utility for Request Type Configuration\n *\n * Executes validation JavaScript from step_fields configuration\n *\n * Validation formats supported:\n * - \"email\" - Email format validation\n * - \"phone\" - Phone number validation\n * - \"url\" - URL format validation\n * - \"number\" - Numeric validation\n * - \"eval:formData.age >= 18\" - Custom JavaScript expression\n * - \"eval:formData.password === formData.confirm_password\" - Field comparison\n */\n\n/**\n * Validates an email address\n * @param {string} value - Email to validate\n * @returns {boolean} - True if valid email\n */\nfunction validateEmail(value) {\n\tif (!value) return true // Empty is valid (use is_required for mandatory)\n\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n\treturn emailRegex.test(value)\n}\n\n/**\n * Validates a phone number\n * @param {string} value - Phone to validate\n * @returns {boolean} - True if valid phone\n */\nfunction validatePhone(value) {\n\tif (!value) return true\n\t// Accepts: +64 21 123 4567, 021234567, (021) 123-4567, etc.\n\tconst phoneRegex = /^[\\+]?[(]?[0-9]{1,4}[)]?[-\\s\\.]?[(]?[0-9]{1,4}[)]?[-\\s\\.]?[0-9]{1,9}$/\n\treturn phoneRegex.test(value.replace(/\\s/g, ''))\n}\n\n/**\n * Validates a URL\n * @param {string} value - URL to validate\n * @returns {boolean} - True if valid URL\n */\nfunction validateUrl(value) {\n\tif (!value) return true\n\ttry {\n\t\tnew URL(value)\n\t\treturn true\n\t} catch {\n\t\treturn false\n\t}\n}\n\n/**\n * Validates a number\n * @param {*} value - Value to validate\n * @returns {boolean} - True if valid number\n */\nfunction validateNumber(value) {\n\tif (value === '' || value === null || value === undefined) return true\n\treturn !isNaN(parseFloat(value)) && isFinite(value)\n}\n\n/**\n * Safely evaluates a custom validation expression\n *\n * @param {string} expression - The validation expression (e.g., \"eval:formData.age >= 18\")\n * @param {*} value - The field value\n * @param {object} formData - The current form data\n * @returns {boolean} - True if validation passes\n */\nfunction evaluateCustomValidation(expression, value, formData) {\n\t// Remove 'eval:' prefix if present\n\tlet cleanExpression = expression.trim()\n\tif (cleanExpression.startsWith('eval:')) {\n\t\tcleanExpression = cleanExpression.substring(5).trim()\n\t}\n\n\ttry {\n\t\t// Create a safe evaluation context with formData and value\n\t\t// This prevents access to dangerous globals like window, document, etc.\n\t\tconst safeEval = new Function('formData', 'value', `\n\t\t\t'use strict';\n\t\t\ttry {\n\t\t\t\treturn Boolean(${cleanExpression});\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn('[Field Validation] Evaluation error:', e.message);\n\t\t\t\treturn true; // Fail open on evaluation error\n\t\t\t}\n\t\t`)\n\n\t\tconst result = safeEval(formData, value)\n\t\treturn result\n\t} catch (error) {\n\t\tconsole.error('[Field Validation] Failed to evaluate expression:', expression, error)\n\t\t// On error, default to passing validation (fail open)\n\t\treturn true\n\t}\n}\n\n/**\n * Validates a field value based on validation rule\n *\n * @param {*} value - The field value to validate\n * @param {string} validation - Validation rule (email, phone, url, number, or eval:expression)\n * @param {object} formData - Current form data (for custom validations)\n * @returns {object} - {valid: boolean, message: string}\n */\nexport function validateField(value, validation, formData = {}) {\n\tif (!validation) {\n\t\treturn { valid: true, message: '' }\n\t}\n\n\tconst validationType = validation.toLowerCase()\n\n\t// Built-in validation types\n\tswitch (validationType) {\n\t\tcase 'email':\n\t\t\tif (!validateEmail(value)) {\n\t\t\t\treturn { valid: false, message: 'Please enter a valid email address' }\n\t\t\t}\n\t\t\tbreak\n\n\t\tcase 'phone':\n\t\t\tif (!validatePhone(value)) {\n\t\t\t\treturn { valid: false, message: 'Please enter a valid phone number' }\n\t\t\t}\n\t\t\tbreak\n\n\t\tcase 'url':\n\t\t\tif (!validateUrl(value)) {\n\t\t\t\treturn { valid: false, message: 'Please enter a valid URL' }\n\t\t\t}\n\t\t\tbreak\n\n\t\tcase 'number':\n\t\t\tif (!validateNumber(value)) {\n\t\t\t\treturn { valid: false, message: 'Please enter a valid number' }\n\t\t\t}\n\t\t\tbreak\n\n\t\tdefault:\n\t\t\t// Custom validation expression (starts with eval:)\n\t\t\tif (validation.startsWith('eval:')) {\n\t\t\t\tif (!evaluateCustomValidation(validation, value, formData)) {\n\t\t\t\t\treturn { valid: false, message: 'Validation failed' }\n\t\t\t\t}\n\t\t\t}\n\t}\n\n\treturn { valid: true, message: '' }\n}\n\n/**\n * Validates all fields in a section\n *\n * @param {array} fields - Array of field objects with validation rules\n * @param {object} formData - Current form data\n * @returns {object} - {valid: boolean, errors: {fieldName: message}}\n */\nexport function validateSection(fields, formData) {\n\tconst errors = {}\n\tlet valid = true\n\n\tfields.forEach(field => {\n\t\tconst value = formData[field.field_name]\n\n\t\t// Check required\n\t\tif (field.is_required && (value === '' || value === null || value === undefined)) {\n\t\t\terrors[field.field_name] = `${field.field_label} is required`\n\t\t\tvalid = false\n\t\t\treturn\n\t\t}\n\n\t\t// Check validation rule\n\t\tif (field.validation) {\n\t\t\tconst result = validateField(value, field.validation, formData)\n\t\t\tif (!result.valid) {\n\t\t\t\terrors[field.field_name] = result.message\n\t\t\t\tvalid = false\n\t\t\t}\n\t\t}\n\t})\n\n\treturn { valid, errors }\n}\n\n/**\n * Validates all fields in a step\n *\n * @param {object} stepConfig - Step configuration with sections and fields\n * @param {object} formData - Current form data\n * @returns {object} - {valid: boolean, errors: {fieldName: message}}\n */\nexport function validateStep(stepConfig, formData) {\n\tif (!stepConfig || !stepConfig.sections) {\n\t\treturn { valid: true, errors: {} }\n\t}\n\n\tlet allErrors = {}\n\tlet allValid = true\n\n\tstepConfig.sections.forEach(section => {\n\t\tif (section.fields && Array.isArray(section.fields)) {\n\t\t\tconst sectionResult = validateSection(section.fields, formData)\n\t\t\tif (!sectionResult.valid) {\n\t\t\t\tallValid = false\n\t\t\t\tallErrors = { ...allErrors, ...sectionResult.errors }\n\t\t\t}\n\t\t}\n\t})\n\n\treturn { valid: allValid, errors: allErrors }\n}\n\n/**\n * Example validation expressions:\n *\n * Email validation:\n *   validation: \"email\"\n *\n * Phone validation:\n *   validation: \"phone\"\n *\n * Age requirement:\n *   validation: \"eval:value >= 18\"\n *\n * Password confirmation:\n *   validation: \"eval:value === formData.password\"\n *\n * Conditional validation:\n *   validation: \"eval:formData.requester_type !== 'Individual' || value.length > 0\"\n *\n * Date range:\n *   validation: \"eval:new Date(value) >= new Date('2020-01-01')\"\n */\n","/**\n * Step-based validation for Request Type configuration\n * Integrates with existing fieldValidation.js utility\n */\n\nimport { ref, type Ref } from 'vue'\nimport { validateField as utilValidateField } from '../utils/fieldValidation'\n\nexport interface StepValidationReturn {\n\t/** Object containing field names and error messages */\n\terrors: Ref<Record<string, string>>\n\n\t/** Whether validation is in progress */\n\tisValidating: Ref<boolean>\n\n\t/** Validate single field with config */\n\tvalidateConfigField: (\n\t\tfieldName: string,\n\t\tvalue: any,\n\t\tfieldConfig: any,\n\t\tformData?: any\n\t) => boolean\n\n\t/** Validate entire step */\n\tvalidateStep: (stepConfig: any, formData: any) => Promise<boolean>\n\n\t/** Clear all errors */\n\tclearErrors: () => void\n\n\t/** Clear specific field error */\n\tclearFieldError: (fieldName: string) => void\n}\n\nexport function useStepValidation(): StepValidationReturn {\n\tconst errors = ref<Record<string, string>>({})\n\tconst isValidating = ref(false)\n\n\t/**\n\t * Validate single field with Request Type config\n\t */\n\tfunction validateConfigField(\n\t\tfieldName: string,\n\t\tvalue: any,\n\t\tfieldConfig: any,\n\t\tformData: any = {}\n\t): boolean {\n\t\t// Use utility validation\n\t\tconst result = utilValidateField(value, fieldConfig.validation, formData)\n\n\t\tif (!result.valid) {\n\t\t\terrors.value[fieldName] = result.message\n\t\t\treturn false\n\t\t}\n\n\t\t// Check required\n\t\tif (fieldConfig.is_required && (value === '' || value === null || value === undefined)) {\n\t\t\terrors.value[fieldName] = `${fieldConfig.field_label} is required`\n\t\t\treturn false\n\t\t}\n\n\t\t// Clear error if valid\n\t\tdelete errors.value[fieldName]\n\t\treturn true\n\t}\n\n\t/**\n\t * Validate entire step based on config\n\t */\n\tasync function validateStep(\n\t\tstepConfig: any,\n\t\tformData: any\n\t): Promise<boolean> {\n\t\tisValidating.value = true\n\t\terrors.value = {}\n\n\t\tlet isValid = true\n\n\t\tfor (const section of stepConfig.sections || []) {\n\t\t\t// Check section depends_on\n\t\t\tif (section.depends_on) {\n\t\t\t\tconst shouldShow = evaluateDependsOn(section.depends_on, formData)\n\t\t\t\tif (!shouldShow) continue\n\t\t\t}\n\n\t\t\tfor (const field of section.fields || []) {\n\t\t\t\t// Check field depends_on\n\t\t\t\tif (field.depends_on) {\n\t\t\t\t\tconst shouldShow = evaluateDependsOn(field.depends_on, formData)\n\t\t\t\t\tif (!shouldShow) continue\n\t\t\t\t}\n\n\t\t\t\t// Get field value - check for nested address fields\n\t\t\t\tlet value = formData[field.field_name]\n\n\t\t\t\t// Philippine address component fields are nested in address_line object\n\t\t\t\tconst addressComponentFields = ['barangay', 'municipality', 'province', 'city', 'region', 'zip_code', 'postal_code']\n\t\t\t\tif (addressComponentFields.includes(field.field_name) && !value) {\n\t\t\t\t\t// Check if there's an address_line object containing this field\n\t\t\t\t\tconst addressLineData = formData['address_line'] || formData['street'] || formData['residential_address'] || formData['property_address']\n\t\t\t\t\tif (addressLineData && typeof addressLineData === 'object') {\n\t\t\t\t\t\tvalue = addressLineData[field.field_name]\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst fieldValid = validateConfigField(field.field_name, value, field, formData)\n\n\t\t\t\tif (!fieldValid) {\n\t\t\t\t\tisValid = false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tisValidating.value = false\n\t\treturn isValid\n\t}\n\n\t/**\n\t * Evaluate depends_on expression\n\t */\n\tfunction evaluateDependsOn(expression: string, formData: any): boolean {\n\t\ttry {\n\t\t\tconst { evaluateCondition } = require('../utils/conditionalLogic')\n\t\t\treturn evaluateCondition(expression, formData)\n\t\t} catch (error) {\n\t\t\tconsole.error('Error evaluating depends_on:', error)\n\t\t\treturn true // Show field on error\n\t\t}\n\t}\n\n\t/**\n\t * Clear all errors\n\t */\n\tfunction clearErrors() {\n\t\terrors.value = {}\n\t}\n\n\t/**\n\t * Clear specific field error\n\t */\n\tfunction clearFieldError(fieldName: string) {\n\t\tdelete errors.value[fieldName]\n\t}\n\n\treturn {\n\t\terrors,\n\t\tisValidating,\n\t\tvalidateConfigField,\n\t\tvalidateStep,\n\t\tclearErrors,\n\t\tclearFieldError\n\t}\n}\n\n/**\n * Example usage in NewRequest.vue:\n *\n * ```typescript\n * import { useStepValidation } from '@/composables/useStepValidation'\n *\n * const { errors, validateStep, clearErrors } = useStepValidation()\n *\n * async function handleNext() {\n *   const isValid = await validateStep(currentStepConfig.value, formData.value)\n *   if (!isValid) {\n *     showValidationModal.value = true\n *     return\n *   }\n *   // Continue...\n * }\n * ```\n */\n","/**\n * Composable for User Profile management and auto-fill functionality\n * Loads user profile data and provides auto-fill for application forms\n */\n\nimport { ref, computed } from 'vue'\n\nconst userProfile = ref(null)\nconst loading = ref(false)\nconst error = ref(null)\n\nexport function useUserProfile() {\n  /**\n   * Fetch user profile from backend\n   */\n  const loadUserProfile = async () => {\n    loading.value = true\n    error.value = null\n\n    try {\n      const headers = {\n        'Content-Type': 'application/json'\n      };\n\n      // Add CSRF token if available\n      if (window.csrf_token) {\n        headers['X-Frappe-CSRF-Token'] = window.csrf_token;\n      }\n\n      const response = await fetch('/api/method/lodgeick.api.get_user_profile', {\n        method: 'GET',\n        headers: headers,\n        credentials: 'include'\n      })\n\n      const result = await response.json()\n\n      // Backend returns profile data directly in result.message\n      // No need to check for success flag\n      if (result.message) {\n        userProfile.value = result.message\n        return userProfile.value\n      } else {\n        throw new Error('Failed to load profile')\n      }\n    } catch (err) {\n      error.value = err.message\n      console.error('Error loading user profile:', err)\n      return null\n    } finally {\n      loading.value = false\n    }\n  }\n\n  /**\n   * Get default property\n   */\n  const defaultProperty = computed(() => {\n    if (!userProfile.value?.properties) return null\n    return userProfile.value.properties.find(p => p.is_default) || userProfile.value.properties[0]\n  })\n\n  /**\n   * Get default council\n   */\n  const defaultCouncil = computed(() => {\n    if (!userProfile.value?.councils) return null\n    return userProfile.value.councils.find(c => c.is_default) || userProfile.value.councils[0]\n  })\n\n  /**\n   * Get auto-fill data for Resource Consent Application\n   * Returns object with all fields that can be auto-filled from profile\n   */\n  const getApplicationAutoFill = () => {\n    if (!userProfile.value) return {}\n\n    const profile = userProfile.value\n    const autoFillData = {}\n\n    // STEP 1: Council Selection\n    if (defaultCouncil.value) {\n      autoFillData.council = defaultCouncil.value.council_id\n      autoFillData.council_name = defaultCouncil.value.council_name\n    }\n\n    // STEP 4: Applicant & Proposal (FRD Step 1)\n    // Basic Applicant Details\n    autoFillData.requester_name = profile.full_name\n    autoFillData.requester_email = profile.user // Email from User account\n    autoFillData.requester_phone = profile.phone\n    autoFillData.requester_type = profile.user_role // 'Individual' or 'Agent'\n\n    // Individual: Postal Address\n    if (profile.user_role === 'Individual') {\n      if (profile.postal_street) {\n        autoFillData.applicant_address = `${profile.postal_street}, ${profile.postal_suburb || ''}, ${profile.postal_city || ''} ${profile.postal_postcode || ''}`.trim()\n      }\n    }\n\n    // Agent: Business Details\n    if (profile.user_role === 'Agent') {\n      autoFillData.agent_required = true\n      autoFillData.agent_id = profile.user\n      autoFillData.agent_company = profile.company_name\n      autoFillData.agent_email = profile.business_email || profile.user\n      autoFillData.agent_phone = profile.business_phone || profile.phone\n\n      if (profile.business_street) {\n        autoFillData.agent_address = `${profile.business_street}, ${profile.business_suburb || ''}, ${profile.business_city || ''} ${profile.business_postcode || ''}`.trim()\n      }\n\n      // Agent preferences\n      if (profile.default_communication_route) {\n        autoFillData.correspondence_recipient = profile.default_communication_route === 'Agent Only' ? 'Agent' : 'Both'\n      }\n\n      if (profile.default_invoice_recipient) {\n        autoFillData.invoice_responsible_party = profile.default_invoice_recipient\n      }\n    }\n\n    // Default Property\n    if (defaultProperty.value) {\n      const prop = defaultProperty.value\n      autoFillData.property = `${prop.street}, ${prop.suburb || ''}, ${prop.city || ''} ${prop.postcode || ''}`.trim()\n      autoFillData.property_address = autoFillData.property\n      autoFillData.property_legal_description = prop.legal_description\n      autoFillData.ownership_status = prop.ownership_status\n    }\n\n    // Communication Preferences\n    if (profile.comm_email || profile.comm_phone || profile.comm_post) {\n      autoFillData.communication_preferences = {\n        email: profile.comm_email || false,\n        phone: profile.comm_phone || false,\n        post: profile.comm_post || false\n      }\n    }\n\n    // Invoice Preference\n    if (profile.invoice_preference) {\n      autoFillData.invoice_delivery_method = profile.invoice_preference\n    }\n\n    return autoFillData\n  }\n\n  /**\n   * Apply auto-fill to form data\n   * @param {Object} formData - The form data object to update\n   * @param {Object} options - Options for auto-fill behavior\n   * @returns {Object} Updated form data\n   */\n  const applyAutoFill = (formData, options = {}) => {\n    const {\n      overrideExisting = false, // If true, override existing values\n      fieldsToSkip = [] // Array of field names to skip\n    } = options\n\n    const autoFillData = getApplicationAutoFill()\n\n    Object.keys(autoFillData).forEach(key => {\n      // Skip if field is in skip list\n      if (fieldsToSkip.includes(key)) return\n\n      // Skip if field already has value and we're not overriding\n      if (!overrideExisting && formData[key]) return\n\n      // Apply auto-fill value\n      formData[key] = autoFillData[key]\n    })\n\n    return formData\n  }\n\n  /**\n   * Get all properties for dropdown/selection\n   */\n  const getAllProperties = computed(() => {\n    return userProfile.value?.properties || []\n  })\n\n  /**\n   * Get all councils for dropdown/selection\n   */\n  const getAllCouncils = computed(() => {\n    return userProfile.value?.councils || []\n  })\n\n  /**\n   * Get all clients (Agent only)\n   */\n  const getAllClients = computed(() => {\n    return userProfile.value?.clients || []\n  })\n\n  /**\n   * Check if profile is complete\n   */\n  const isProfileComplete = computed(() => {\n    if (!userProfile.value) return false\n\n    const profile = userProfile.value\n\n    // Basic required fields\n    const hasBasicInfo = profile.full_name && profile.phone && profile.user_role\n\n    // Role-specific completeness\n    if (profile.user_role === 'Individual') {\n      return hasBasicInfo &&\n             (profile.properties?.length > 0 || false) &&\n             (profile.councils?.length > 0 || false)\n    } else if (profile.user_role === 'Agent') {\n      return hasBasicInfo &&\n             profile.company_name &&\n             (profile.councils?.length > 0 || false)\n    }\n\n    return hasBasicInfo\n  })\n\n  /**\n   * Get profile completion percentage\n   */\n  const profileCompletionPercentage = computed(() => {\n    if (!userProfile.value) return 0\n\n    const profile = userProfile.value\n    let completed = 0\n    let total = 0\n\n    // Basic fields (weight: 30%)\n    const basicFields = ['full_name', 'phone', 'user_role']\n    basicFields.forEach(field => {\n      total++\n      if (profile[field]) completed++\n    })\n\n    // Contact preferences (weight: 10%)\n    total++\n    if (profile.comm_email || profile.comm_phone || profile.comm_post) completed++\n\n    // Properties (weight: 30%)\n    total++\n    if (profile.properties && profile.properties.length > 0) completed++\n\n    // Councils (weight: 20%)\n    total++\n    if (profile.councils && profile.councils.length > 0) completed++\n\n    // Role-specific (weight: 10%)\n    if (profile.user_role === 'Agent') {\n      total++\n      if (profile.company_name) completed++\n    } else {\n      total++\n      if (profile.postal_street) completed++\n    }\n\n    return Math.round((completed / total) * 100)\n  })\n\n  return {\n    userProfile,\n    loading,\n    error,\n    loadUserProfile,\n    getApplicationAutoFill,\n    applyAutoFill,\n    defaultProperty,\n    defaultCouncil,\n    getAllProperties,\n    getAllCouncils,\n    getAllClients,\n    isProfileComplete,\n    profileCompletionPercentage\n  }\n}\n\n// Export singleton instance for global state\nlet instance = null\n\nexport function useGlobalUserProfile() {\n  if (!instance) {\n    instance = useUserProfile()\n  }\n  return instance\n}\n","<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps({\n\tcurrentStep: {\n\t\ttype: Number,\n\t\trequired: true\n\t},\n\ttotalSteps: {\n\t\ttype: Number,\n\t\trequired: true\n\t},\n\tstepTitles: {\n\t\ttype: Array,\n\t\tdefault: () => []\n\t}\n})\n\nconst progressPercentage = computed(() => {\n\tif (props.totalSteps === 0) return 0\n\treturn Math.round(((props.currentStep + 1) / props.totalSteps) * 100)\n})\n\nconst getStepStatus = (stepIndex) => {\n\tif (stepIndex < props.currentStep) return 'completed'\n\tif (stepIndex === props.currentStep) return 'current'\n\treturn 'upcoming'\n}\n</script>\n\n<template>\n\t<div class=\"mb-8\">\n\t\t<!-- Progress Bar -->\n\t\t<div class=\"relative mb-6\">\n\t\t\t<div class=\"overflow-hidden h-2 text-xs flex rounded bg-gray-200\">\n\t\t\t\t<div\n\t\t\t\t\t:style=\"{ width: progressPercentage + '%' }\"\n\t\t\t\t\tclass=\"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-600 transition-all duration-500\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t\t<div class=\"flex justify-between mt-2\">\n\t\t\t\t<span class=\"text-sm font-medium text-gray-700\">\n\t\t\t\t\t{{ stepTitles[currentStep] || `Step ${currentStep + 1}` }}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"text-sm font-medium text-gray-700\">\n\t\t\t\t\t{{ progressPercentage }}% Complete\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Step Indicators (temporarily hidden) -->\n\t\t<!-- <nav aria-label=\"Progress\" v-if=\"stepTitles.length > 0\">\n\t\t\t<ol class=\"flex items-center\">\n\t\t\t\t<li\n\t\t\t\t\tv-for=\"(title, index) in stepTitles\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t'relative',\n\t\t\t\t\t\tindex !== stepTitles.length - 1 ? 'pr-8 sm:pr-20 flex-1' : ''\n\t\t\t\t\t]\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"index !== stepTitles.length - 1\"\n\t\t\t\t\t\tclass=\"absolute inset-0 flex items-center\"\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t'h-0.5 w-full',\n\t\t\t\t\t\t\t\tgetStepStatus(index) === 'completed' ? 'bg-blue-600' : 'bg-gray-200'\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"relative flex items-center group\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t'h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold',\n\t\t\t\t\t\t\t\tgetStepStatus(index) === 'completed'\n\t\t\t\t\t\t\t\t\t? 'bg-blue-600 text-white'\n\t\t\t\t\t\t\t\t\t: getStepStatus(index) === 'current'\n\t\t\t\t\t\t\t\t\t? 'bg-white border-2 border-blue-600 text-blue-600'\n\t\t\t\t\t\t\t\t\t: 'bg-white border-2 border-gray-300 text-gray-500'\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-if=\"getStepStatus(index) === 'completed'\">\n\t\t\t\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\td=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t{{ index + 1 }}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"title\"\n\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t'ml-3 text-sm font-medium hidden sm:block',\n\t\t\t\t\t\t\t\tgetStepStatus(index) === 'current'\n\t\t\t\t\t\t\t\t\t? 'text-blue-600'\n\t\t\t\t\t\t\t\t\t: getStepStatus(index) === 'completed'\n\t\t\t\t\t\t\t\t\t? 'text-gray-900'\n\t\t\t\t\t\t\t\t\t: 'text-gray-500'\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ol>\n\t\t</nav> -->\n\t</div>\n</template>\n","<script setup>\nimport { Button } from 'frappe-ui'\n\nconst props = defineProps({\n\tcurrentStep: {\n\t\ttype: Number,\n\t\trequired: true\n\t},\n\ttotalSteps: {\n\t\ttype: Number,\n\t\trequired: true\n\t},\n\tisLastStep: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\tcanGoNext: {\n\t\ttype: Boolean,\n\t\tdefault: true\n\t},\n\tcanSaveDraft: {\n\t\ttype: Boolean,\n\t\tdefault: true\n\t},\n\tisSaving: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\tisSubmitting: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t}\n})\n\nconst emit = defineEmits(['next', 'previous', 'save-draft', 'submit'])\n\nconst handleNext = () => {\n\temit('next')\n}\n\nconst handlePrevious = () => {\n\temit('previous')\n}\n\nconst handleSaveDraft = () => {\n\temit('save-draft')\n}\n\nconst handleSubmit = () => {\n\temit('submit')\n}\n</script>\n\n<template>\n\t<div class=\"mt-8 pt-6 border-t border-gray-200\">\n\t\t<div class=\"flex items-center justify-between\">\n\t\t\t<!-- Previous Button -->\n\t\t\t<div>\n\t\t\t\t<Button\n\t\t\t\t\tv-if=\"currentStep > 0\"\n\t\t\t\t\t@click=\"handlePrevious\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t:disabled=\"isSaving || isSubmitting\"\n\t\t\t\t>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</template>\n\t\t\t\t\tPrevious\n\t\t\t\t</Button>\n\t\t\t</div>\n\n\t\t\t<!-- Right side buttons -->\n\t\t\t<div class=\"flex items-center space-x-3\">\n\t\t\t\t<!-- Save Draft Button - Only show after council, type, and process info steps -->\n\t\t\t\t<Button\n\t\t\t\t\tv-if=\"canSaveDraft\"\n\t\t\t\t\t@click=\"handleSaveDraft\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t:loading=\"isSaving\"\n\t\t\t\t\t:disabled=\"isSubmitting\"\n\t\t\t\t>\n\t\t\t\t\t<template v-if=\"!isSaving\" #prefix>\n\t\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ isSaving ? 'Saving...' : 'Save Draft' }}\n\t\t\t\t</Button>\n\n\t\t\t\t<!-- Next or Submit Button -->\n\t\t\t\t<Button\n\t\t\t\t\tv-if=\"!isLastStep\"\n\t\t\t\t\t@click=\"handleNext\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\ttheme=\"blue\"\n\t\t\t\t\t:disabled=\"!canGoNext || isSaving || isSubmitting\"\n\t\t\t\t>\n\t\t\t\t\tNext\n\t\t\t\t\t<template #suffix>\n\t\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</template>\n\t\t\t\t</Button>\n\n\t\t\t\t<Button\n\t\t\t\t\tv-else\n\t\t\t\t\t@click=\"handleSubmit\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\ttheme=\"green\"\n\t\t\t\t\t:loading=\"isSubmitting\"\n\t\t\t\t\t:disabled=\"!canGoNext || isSaving\"\n\t\t\t\t>\n\t\t\t\t\t<template v-if=\"!isSubmitting\" #prefix>\n\t\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ isSubmitting ? 'Submitting...' : 'Submit Application' }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Help Text -->\n\t\t<div class=\"mt-4 text-center\">\n\t\t\t<p class=\"text-sm text-gray-500\">\n\t\t\t\tYour progress is automatically saved. You can return to complete this application later.\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</template>\n","<script setup>\nimport { computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { Dialog } from 'frappe-ui'\n\nconst router = useRouter()\n\nconst props = defineProps({\n\tshow: {\n\t\ttype: Boolean,\n\t\trequired: true\n\t},\n\tdraftId: {\n\t\ttype: String,\n\t\tdefault: null\n\t}\n})\n\nconst emit = defineEmits(['update:show', 'close'])\n\nconst isOpen = computed({\n\tget: () => props.show,\n\tset: (value) => emit('update:show', value)\n})\n\nconst handleClose = () => {\n\temit('update:show', false)\n\temit('close')\n}\n\nconst handleViewDraft = () => {\n\tif (props.draftId) {\n\t\temit('update:show', false)\n\t\trouter.push(`/request/${props.draftId}`)\n\t}\n}\n</script>\n\n<template>\n\t<Dialog v-model=\"isOpen\" :options=\"{ size: 'sm' }\">\n\t\t<template #body>\n\t\t\t<div class=\"text-center py-6\">\n\t\t\t\t<div class=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4\">\n\t\t\t\t\t<svg class=\"h-6 w-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<h3 class=\"text-lg font-medium text-gray-900 mb-2\">Draft Saved Successfully</h3>\n\t\t\t\t<p class=\"text-sm text-gray-500 mb-4\">\n\t\t\t\t\tYour progress has been saved. You can return to complete this application later.\n\t\t\t\t</p>\n\t\t\t\t<div v-if=\"draftId\" class=\"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6\">\n\t\t\t\t\t<p class=\"text-xs text-gray-500 mb-2\">Draft ID</p>\n\t\t\t\t\t<p class=\"text-sm font-mono text-gray-900 mb-3\">{{ draftId }}</p>\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"handleViewDraft\"\n\t\t\t\t\t\tclass=\"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\tView Draft Details\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Buttons inside body to avoid overlay issues -->\n\t\t\t\t<div class=\"flex justify-between w-full space-x-3 px-4\">\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"handleClose\"\n\t\t\t\t\t\tclass=\"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n\t\t\t\t\t>\n\t\t\t\t\t\tClose\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"handleClose\"\n\t\t\t\t\t\tclass=\"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n\t\t\t\t\t>\n\t\t\t\t\t\tContinue Editing\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n","<script setup>\nimport { computed } from 'vue'\nimport { Dialog } from 'frappe-ui'\n\nconst props = defineProps({\n\tshow: {\n\t\ttype: Boolean,\n\t\trequired: true\n\t},\n\terrors: {\n\t\ttype: Object,\n\t\tdefault: () => ({})\n\t}\n})\n\nconst emit = defineEmits(['update:show', 'close'])\n\nconst isOpen = computed({\n\tget: () => props.show,\n\tset: (value) => emit('update:show', value)\n})\n\nconst errorList = computed(() => {\n\treturn Object.entries(props.errors).map(([field, message]) => ({\n\t\tfield,\n\t\tmessage\n\t}))\n})\n\nconst handleClose = () => {\n\temit('update:show', false)\n\temit('close')\n}\n</script>\n\n<template>\n\t<Dialog v-model=\"isOpen\" :options=\"{ size: 'md' }\">\n\t\t<template #body>\n\t\t\t<div class=\"py-4\">\n\t\t\t\t<div class=\"flex items-start mb-4\">\n\t\t\t\t\t<div class=\"flex-shrink-0\">\n\t\t\t\t\t\t<div class=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n\t\t\t\t\t\t\t<svg class=\"h-6 w-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ml-4\">\n\t\t\t\t\t\t<h3 class=\"text-lg font-medium text-gray-900 mb-1\">Validation Errors</h3>\n\t\t\t\t\t\t<p class=\"text-sm text-gray-500\">\n\t\t\t\t\t\t\tPlease fix the following errors before continuing:\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div v-if=\"errorList.length > 0\" class=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n\t\t\t\t\t<ul class=\"list-disc list-inside space-y-2\">\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-for=\"(error, index) in errorList\"\n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\tclass=\"text-sm text-red-800\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"font-medium\">{{ error.field }}:</span>\n\t\t\t\t\t\t\t{{ error.message }}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t<div v-else class=\"text-sm text-gray-500 text-center py-4\">\n\t\t\t\t\tNo validation errors found.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #actions>\n\t\t\t<div class=\"flex justify-end\">\n\t\t\t\t<button\n\t\t\t\t\t@click=\"handleClose\"\n\t\t\t\t\tclass=\"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500\"\n\t\t\t\t>\n\t\t\t\t\tClose and Fix Errors\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n","<template>\n\t<Dialog v-model=\"isOpen\" :options=\"{ title: 'Request Submitted Successfully', size: 'md' }\">\n\t\t<template #body-content>\n\t\t\t<div class=\"success-content text-center py-6\">\n\t\t\t\t<!-- Success Icon -->\n\t\t\t\t<div class=\"flex justify-center mb-4\">\n\t\t\t\t\t<svg\n\t\t\t\t\t\tclass=\"w-16 h-16 text-green-500\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\td=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Request Number -->\n\t\t\t\t<h3 class=\"text-xl font-semibold text-gray-900 mb-2\">\n\t\t\t\t\tRequest {{ requestNumber }} Submitted\n\t\t\t\t</h3>\n\n\t\t\t\t<!-- SLA Information -->\n\t\t\t\t<div v-if=\"slaInfo\" class=\"mt-4 space-y-2\">\n\t\t\t\t\t<p class=\"text-gray-600\">\n\t\t\t\t\t\tYour request will be processed within\n\t\t\t\t\t\t<span class=\"font-semibold text-gray-900\">\n\t\t\t\t\t\t\t{{ slaInfo.processing_days }} business days\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<p v-if=\"slaInfo.expected_completion_date\" class=\"text-gray-600\">\n\t\t\t\t\t\tExpected completion:\n\t\t\t\t\t\t<span class=\"font-semibold text-gray-900\">\n\t\t\t\t\t\t\t{{ formatDate(slaInfo.expected_completion_date) }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Next Steps -->\n\t\t\t\t<div class=\"mt-6 p-4 bg-blue-50 rounded-lg text-left\">\n\t\t\t\t\t<h4 class=\"text-sm font-semibold text-blue-900 mb-2\">Next Steps:</h4>\n\t\t\t\t\t<ul class=\"text-sm text-blue-800 space-y-1\">\n\t\t\t\t\t\t<li class=\"flex items-start\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4 mr-2 mt-0.5 flex-shrink-0\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>You will receive email updates on your request status</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"flex items-start\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4 mr-2 mt-0.5 flex-shrink-0\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>Track your request progress from the dashboard</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"flex items-start\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4 mr-2 mt-0.5 flex-shrink-0\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>Council staff will review your application and contact you if needed</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Action Buttons -->\n\t\t\t\t<div class=\"mt-6 flex gap-3 justify-center\">\n\t\t\t\t\t<Button variant=\"outline\" @click=\"handleViewRequest\">\n\t\t\t\t\t\tView Request Details\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button appearance=\"primary\" @click=\"handleGoToDashboard\">\n\t\t\t\t\t\tGo to Dashboard\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport { Dialog, Button } from 'frappe-ui'\n\nconst props = defineProps({\n\topen: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\trequestNumber: {\n\t\ttype: String,\n\t\tdefault: ''\n\t},\n\trequestId: {\n\t\ttype: String,\n\t\tdefault: ''\n\t},\n\tslaInfo: {\n\t\ttype: Object,\n\t\tdefault: () => ({})\n\t}\n})\n\nconst emit = defineEmits(['close', 'viewRequest', 'goToDashboard'])\n\nconst isOpen = computed({\n\tget: () => props.open,\n\tset: (value) => {\n\t\tif (!value) {\n\t\t\temit('close')\n\t\t}\n\t}\n})\n\n/**\n * Format date for display\n */\nfunction formatDate(dateStr) {\n\tif (!dateStr) return 'N/A'\n\ttry {\n\t\tconst date = new Date(dateStr)\n\t\treturn date.toLocaleDateString('en-NZ', {\n\t\t\tyear: 'numeric',\n\t\t\tmonth: 'long',\n\t\t\tday: 'numeric'\n\t\t})\n\t} catch (error) {\n\t\treturn dateStr\n\t}\n}\n\n/**\n * Handle view request details\n */\nfunction handleViewRequest() {\n\temit('viewRequest', props.requestId)\n\tisOpen.value = false\n}\n\n/**\n * Handle go to dashboard\n */\nfunction handleGoToDashboard() {\n\temit('goToDashboard')\n\tisOpen.value = false\n}\n</script>\n\n<style scoped>\n.success-content {\n\tmin-height: 300px;\n}\n</style>\n","<template>\n  <div>\n    <h2 class=\"text-2xl font-bold text-gray-900 mb-2\">Select Council</h2>\n    <p class=\"text-gray-600 mb-8\">Choose the council that will process your application</p>\n\n    <CouncilSelector\n      :model-value=\"modelValue.council\"\n      @update:model-value=\"updateCouncil\"\n      display-mode=\"cards\"\n      :required=\"true\"\n      :show-selected-info=\"true\"\n      label=\"\"\n      :show-label=\"false\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { defineProps, defineEmits } from 'vue'\nimport CouncilSelector from '../CouncilSelector.vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: Object,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'council-change'])\n\nconst updateCouncil = (council) => {\n  console.log('[Step1CouncilSelection] updateCouncil called with:', council)\n  console.log('[Step1CouncilSelection] Current modelValue:', props.modelValue)\n\n  emit('update:modelValue', {\n    ...props.modelValue,\n    council: council\n  })\n  emit('council-change', council)\n\n  console.log('[Step1CouncilSelection] Emitted events')\n}\n</script>\n","<template>\n  <div>\n    <h2 class=\"text-2xl font-bold text-gray-900 mb-2\">Select Application Type</h2>\n    <p class=\"text-gray-600 mb-8\">Choose the type of consent you wish to apply for</p>\n\n    <div v-if=\"requestTypes.loading\" class=\"text-center py-12\">\n      <div class=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n    </div>\n\n    <div v-else class=\"grid md:grid-cols-2 gap-4\">\n      <div\n        v-for=\"type in requestTypes.data\"\n        :key=\"type.name\"\n        @click=\"selectType(type)\"\n        class=\"border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md\"\n        :class=\"modelValue.request_type === type.name ? 'border-blue-600 bg-blue-50' : 'border-gray-200 hover:border-blue-300'\"\n      >\n        <div class=\"flex items-start justify-between\">\n          <div class=\"flex-1\">\n            <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">{{ type.type_name }}</h3>\n            <p class=\"text-sm text-gray-600\" v-html=\"type.description || 'No description available'\"></p>\n            <div class=\"mt-4 flex items-center space-x-4 text-xs text-gray-500\">\n              <span v-if=\"type.base_fee\">Fee: ${{ type.base_fee }}</span>\n              <span v-if=\"type.processing_sla_days\">{{ type.processing_sla_days }} days</span>\n              <span v-if=\"type.category\" class=\"px-2 py-1 bg-gray-100 rounded\">{{ type.category }}</span>\n            </div>\n          </div>\n          <div v-if=\"modelValue.request_type === type.name\" class=\"ml-4\">\n            <div class=\"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center\">\n              <svg class=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n              </svg>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { defineProps, defineEmits } from 'vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: Object,\n    required: true\n  },\n  requestTypes: {\n    type: Object,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'type-selected'])\n\nconst selectType = (type) => {\n  console.log('[Step2RequestType] selectType called with:', type.name)\n  console.log('[Step2RequestType] props.modelValue:', props.modelValue)\n  console.log('[Step2RequestType] props.modelValue.council:', props.modelValue.council)\n\n  const updatedValue = {\n    ...props.modelValue,\n    request_type: type.name\n  }\n\n  console.log('[Step2RequestType] Emitting updatedValue:', updatedValue)\n  emit('update:modelValue', updatedValue)\n  emit('type-selected', type.name)\n}\n</script>\n","<template>\n  <div>\n    <h2 class=\"text-2xl font-bold text-gray-900 mb-2\">Council Process Information</h2>\n    <p class=\"text-gray-600 mb-6\">Understanding {{ councilName }}'s process for this application</p>\n\n    <div v-if=\"requestTypeDetails\" class=\"space-y-6\">\n\n      <!-- Note: Pre-Application Meeting booking has been moved to before the application starts -->\n      <!-- Users can book meetings from the request type selection page -->\n\n      <div class=\"bg-white border border-gray-200 rounded-lg p-6\">\n        <div class=\"flex items-start justify-between mb-4\">\n          <div>\n            <h3 class=\"text-xl font-semibold text-gray-900\">{{ requestTypeDetails.request_type_name }}</h3>\n            <p v-if=\"requestTypeDetails.category\" class=\"text-sm text-gray-500 mt-1\">\n              {{ requestTypeDetails.category }}\n            </p>\n          </div>\n        </div>\n\n        <div class=\"grid md:grid-cols-3 gap-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n          <div>\n            <div class=\"text-xs text-blue-600 font-medium uppercase\">Application Fee</div>\n            <div class=\"text-2xl font-bold text-blue-900 mt-1\">\n              ${{ requestTypeDetails.base_fee || '0' }}\n            </div>\n            <div class=\"text-xs text-blue-600 mt-1\">Plus any additional costs</div>\n          </div>\n          <div>\n            <div class=\"text-xs text-blue-600 font-medium uppercase\">Processing Time</div>\n            <div class=\"text-2xl font-bold text-blue-900 mt-1\">\n              {{ requestTypeDetails.sla_days || 'N/A' }} <span class=\"text-base\">days</span>\n            </div>\n            <div class=\"text-xs text-blue-600 mt-1\">Standard timeframe</div>\n          </div>\n          <div>\n            <div class=\"text-xs text-blue-600 font-medium uppercase\">Payment Required</div>\n            <div class=\"text-2xl font-bold text-blue-900 mt-1\">\n              {{ requestTypeDetails.requires_payment ? 'Yes' : 'No' }}\n            </div>\n            <div class=\"text-xs text-blue-600 mt-1\">Before processing</div>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"requestTypeDetails.process_description\" class=\"bg-white border border-gray-200 rounded-lg p-6\">\n        <h4 class=\"text-lg font-semibold text-gray-900 mb-4\">How This Works</h4>\n        <div class=\"prose prose-sm max-w-none text-gray-700\" v-html=\"requestTypeDetails.process_description\"></div>\n      </div>\n\n      <div v-else-if=\"requestTypeDetails.description\" class=\"bg-white border border-gray-200 rounded-lg p-6\">\n        <h4 class=\"text-lg font-semibold text-gray-900 mb-4\">About This Application</h4>\n        <div class=\"prose prose-sm max-w-none text-gray-700\" v-html=\"requestTypeDetails.description\"></div>\n      </div>\n\n      <div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n        <div class=\"flex items-start\">\n          <svg class=\"w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n          </svg>\n          <div>\n            <h5 class=\"font-semibold text-yellow-900 text-sm\">Before You Continue</h5>\n            <p class=\"text-yellow-800 text-sm mt-1\">\n              Please review this information carefully. Make sure you understand the process, fees, and timeframes before proceeding with your application.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"flex justify-center pt-4\">\n        <button\n          type=\"button\"\n          @click=\"handleContinue\"\n          class=\"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          I Understand - Continue to Application\n        </button>\n      </div>\n    </div>\n\n    <div v-else class=\"text-center py-12\">\n      <p class=\"text-gray-500\">No request type selected. Please go back and select a request type.</p>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { defineProps, defineEmits } from 'vue'\nimport { session } from '@/data/session'\nimport { useRouter } from 'vue-router'\n\nconst router = useRouter()\n\nconst props = defineProps({\n  requestTypeDetails: {\n    type: Object,\n    default: null\n  },\n  councilName: {\n    type: String,\n    default: ''\n  },\n  modelValue: {\n    type: Object,\n    default: () => ({})\n  }\n})\n\nconst emit = defineEmits(['continue', 'update:modelValue'])\n\nconst handleContinue = () => {\n  // Check if user is logged in before allowing them to continue\n  if (!session.isLoggedIn) {\n    // Save current URL to redirect back after login\n    const currentPath = window.location.pathname + window.location.search\n    router.push({\n      name: 'Login',\n      query: { redirect: currentPath }\n    })\n    return\n  }\n\n  // User is logged in, proceed normally\n  emit('continue')\n}\n</script>\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\"\n  }, [\n    _createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z\",\n      \"clip-rule\": \"evenodd\"\n    })\n  ]))\n}","<template>\n  <div class=\"space-y-4\">\n    <!-- Upload Label -->\n    <label class=\"block\">\n      <span class=\"text-sm font-medium text-gray-900\">\n        {{ label }}\n        <span v-if=\"required\" class=\"text-red-500\">*</span>\n      </span>\n      <p v-if=\"helpText\" class=\"text-xs text-gray-500 mt-1\">{{ helpText }}</p>\n    </label>\n\n    <!-- Upload Options -->\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n      <!-- Camera Capture Button -->\n      <button\n        v-if=\"allowCamera\"\n        @click=\"openCamera\"\n        type=\"button\"\n        class=\"relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group\"\n        :class=\"{ 'opacity-50 cursor-not-allowed': uploading }\"\n        :disabled=\"uploading\"\n      >\n        <div class=\"text-center\">\n          <svg class=\"mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" />\n          </svg>\n          <p class=\"mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700\">Take Photo</p>\n          <p class=\"text-xs text-gray-500\">Use camera</p>\n        </div>\n      </button>\n\n      <!-- File Upload Button -->\n      <button\n        @click=\"triggerFileInput\"\n        type=\"button\"\n        class=\"relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group\"\n        :class=\"{ 'opacity-50 cursor-not-allowed': uploading }\"\n        :disabled=\"uploading\"\n      >\n        <div class=\"text-center\">\n          <svg class=\"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n          </svg>\n          <p class=\"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700\">Upload File</p>\n          <p class=\"text-xs text-gray-500\">Browse {{ multiple ? 'files' : 'file' }}</p>\n        </div>\n        <input\n          ref=\"fileInput\"\n          type=\"file\"\n          :accept=\"accept\"\n          :multiple=\"multiple\"\n          @change=\"handleFileSelect\"\n          class=\"hidden\"\n        />\n      </button>\n    </div>\n\n    <!-- Upload Progress -->\n    <div v-if=\"uploading\" class=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n      <div class=\"flex items-center space-x-3\">\n        <svg class=\"animate-spin h-5 w-5 text-blue-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n          <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n        <div class=\"flex-1\">\n          <p class=\"text-sm font-medium text-blue-900\">Uploading...</p>\n          <div class=\"mt-1 w-full bg-blue-200 rounded-full h-2\">\n            <div class=\"bg-blue-600 h-2 rounded-full transition-all\" :style=\"{ width: uploadProgress + '%' }\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Uploaded Files List -->\n    <div v-if=\"files.length > 0\" class=\"space-y-2\">\n      <TransitionGroup name=\"list\">\n        <div\n          v-for=\"(file, index) in files\"\n          :key=\"file.name + index\"\n          class=\"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors\"\n        >\n          <div class=\"flex items-center space-x-3 flex-1 min-w-0\">\n            <!-- File Icon/Preview -->\n            <div class=\"flex-shrink-0\">\n              <div v-if=\"file.preview\" class=\"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300\">\n                <img :src=\"file.preview\" :alt=\"file.name\" class=\"w-full h-full object-cover\" />\n              </div>\n              <div v-else class=\"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center\">\n                <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n              </div>\n            </div>\n\n            <!-- File Info -->\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-medium text-gray-900 truncate\">{{ file.name }}</p>\n              <p class=\"text-xs text-gray-500\">{{ formatFileSize(file.size) }}</p>\n            </div>\n\n            <!-- Remove Button -->\n            <button\n              @click=\"removeFile(index)\"\n              type=\"button\"\n              class=\"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors\"\n              title=\"Remove\"\n            >\n              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </TransitionGroup>\n    </div>\n\n    <!-- Camera Modal -->\n    <Teleport to=\"body\">\n      <div\n        v-if=\"showCamera\"\n        class=\"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4\"\n        @click.self=\"closeCamera\"\n      >\n        <div class=\"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl\">\n          <!-- Camera Header -->\n          <div class=\"bg-gray-900 px-6 py-4 flex items-center justify-between\">\n            <h3 class=\"text-white font-semibold text-lg\">Take Photo</h3>\n            <button\n              @click=\"closeCamera\"\n              class=\"text-gray-400 hover:text-white transition-colors\"\n            >\n              <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          <!-- Camera View -->\n          <div class=\"relative bg-black aspect-video\">\n            <video\n              v-if=\"!capturedImage\"\n              ref=\"videoElement\"\n              autoplay\n              playsinline\n              class=\"w-full h-full object-contain\"\n            ></video>\n            <img\n              v-else\n              :src=\"capturedImage\"\n              alt=\"Captured\"\n              class=\"w-full h-full object-contain\"\n            />\n\n            <!-- Camera Overlay Grid -->\n            <div v-if=\"!capturedImage\" class=\"absolute inset-0 pointer-events-none\">\n              <div class=\"w-full h-full grid grid-cols-3 grid-rows-3\">\n                <div v-for=\"i in 9\" :key=\"i\" class=\"border border-white/20\"></div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Camera Controls -->\n          <div class=\"bg-gray-900 px-6 py-6\">\n            <div v-if=\"!capturedImage\" class=\"flex items-center justify-center space-x-6\">\n              <button\n                @click=\"capturePhoto\"\n                type=\"button\"\n                class=\"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105\"\n              >\n                <div class=\"w-12 h-12 rounded-full bg-blue-500\"></div>\n              </button>\n            </div>\n            <div v-else class=\"flex items-center justify-center space-x-4\">\n              <button\n                @click=\"retakePhoto\"\n                type=\"button\"\n                class=\"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium\"\n              >\n                Retake\n              </button>\n              <button\n                @click=\"usePhoto\"\n                type=\"button\"\n                class=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\n              >\n                Use Photo\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Teleport>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\n\nconst props = defineProps({\n  label: {\n    type: String,\n    required: true\n  },\n  helpText: {\n    type: String,\n    default: ''\n  },\n  modelValue: {\n    type: Array,\n    default: () => []\n  },\n  accept: {\n    type: String,\n    default: 'image/*,.pdf'\n  },\n  multiple: {\n    type: Boolean,\n    default: false\n  },\n  required: {\n    type: Boolean,\n    default: false\n  },\n  allowCamera: {\n    type: Boolean,\n    default: true\n  },\n  maxSize: {\n    type: Number,\n    default: 20 * 1024 * 1024 // 20MB\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'upload'])\n\nconst fileInput = ref(null)\nconst videoElement = ref(null)\nconst showCamera = ref(false)\nconst capturedImage = ref(null)\nconst mediaStream = ref(null)\nconst uploading = ref(false)\nconst uploadProgress = ref(0)\n\nconst files = computed({\n  get: () => props.modelValue,\n  set: (value) => emit('update:modelValue', value)\n})\n\n// Trigger file input\nconst triggerFileInput = () => {\n  fileInput.value?.click()\n}\n\n// Handle file selection\nconst handleFileSelect = async (event) => {\n  const selectedFiles = Array.from(event.target.files)\n  await processFiles(selectedFiles)\n  event.target.value = '' // Reset input\n}\n\n// Process files\nconst processFiles = async (selectedFiles) => {\n  const validFiles = []\n\n  for (const file of selectedFiles) {\n    // Validate file size\n    if (file.size > props.maxSize) {\n      alert(`File ${file.name} exceeds maximum size of ${formatFileSize(props.maxSize)}`)\n      continue\n    }\n\n    // Create preview for images\n    let preview = null\n    if (file.type.startsWith('image/')) {\n      preview = await createImagePreview(file)\n    }\n\n    validFiles.push({\n      file: file,\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      preview: preview,\n      uploadDate: new Date().toISOString()\n    })\n  }\n\n  if (validFiles.length > 0) {\n    const newFiles = props.multiple ? [...files.value, ...validFiles] : validFiles\n    emit('update:modelValue', newFiles)\n\n    // Auto-upload files\n    await uploadFiles(validFiles)\n  }\n}\n\n// Create image preview\nconst createImagePreview = (file) => {\n  return new Promise((resolve) => {\n    const reader = new FileReader()\n    reader.onload = (e) => resolve(e.target.result)\n    reader.onerror = () => resolve(null)\n    reader.readAsDataURL(file)\n  })\n}\n\n// Upload files\nconst uploadFiles = async (filesToUpload) => {\n  uploading.value = true\n  uploadProgress.value = 0\n\n  try {\n    for (let i = 0; i < filesToUpload.length; i++) {\n      const fileData = filesToUpload[i]\n\n      // Simulate upload progress\n      const progressInterval = setInterval(() => {\n        uploadProgress.value = Math.min(uploadProgress.value + 10, 90)\n      }, 100)\n\n      // Emit upload event (parent component should handle actual upload)\n      await new Promise((resolve) => {\n        emit('upload', fileData, resolve)\n      })\n\n      clearInterval(progressInterval)\n      uploadProgress.value = ((i + 1) / filesToUpload.length) * 100\n    }\n  } catch (error) {\n    console.error('Upload error:', error)\n    alert('Failed to upload files. Please try again.')\n  } finally {\n    uploading.value = false\n    uploadProgress.value = 0\n  }\n}\n\n// Remove file\nconst removeFile = (index) => {\n  const newFiles = [...files.value]\n  newFiles.splice(index, 1)\n  emit('update:modelValue', newFiles)\n}\n\n// Open camera\nconst openCamera = async () => {\n  try {\n    showCamera.value = true\n    await startCamera()\n  } catch (error) {\n    console.error('Camera error:', error)\n    alert('Unable to access camera. Please check permissions or upload a file instead.')\n    showCamera.value = false\n  }\n}\n\n// Start camera\nconst startCamera = async () => {\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia({\n      video: { facingMode: 'environment', width: { ideal: 1920 }, height: { ideal: 1080 } },\n      audio: false\n    })\n\n    mediaStream.value = stream\n\n    if (videoElement.value) {\n      videoElement.value.srcObject = stream\n    }\n  } catch (error) {\n    throw error\n  }\n}\n\n// Capture photo\nconst capturePhoto = () => {\n  const video = videoElement.value\n  const canvas = document.createElement('canvas')\n  canvas.width = video.videoWidth\n  canvas.height = video.videoHeight\n\n  const context = canvas.getContext('2d')\n  context.drawImage(video, 0, 0, canvas.width, canvas.height)\n\n  capturedImage.value = canvas.toDataURL('image/jpeg', 0.9)\n}\n\n// Retake photo\nconst retakePhoto = () => {\n  capturedImage.value = null\n}\n\n// Use photo\nconst usePhoto = async () => {\n  if (!capturedImage.value) return\n\n  // Convert base64 to File\n  const blob = await (await fetch(capturedImage.value)).blob()\n  const file = new File([blob], `photo-${Date.now()}.jpg`, { type: 'image/jpeg' })\n\n  await processFiles([file])\n  closeCamera()\n}\n\n// Close camera\nconst closeCamera = () => {\n  if (mediaStream.value) {\n    mediaStream.value.getTracks().forEach(track => track.stop())\n    mediaStream.value = null\n  }\n  capturedImage.value = null\n  showCamera.value = false\n}\n\n// Format file size\nconst formatFileSize = (bytes) => {\n  if (bytes === 0) return '0 Bytes'\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i]\n}\n</script>\n\n<style scoped>\n.list-enter-active,\n.list-leave-active {\n  transition: all 0.3s ease;\n}\n.list-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n.list-leave-to {\n  opacity: 0;\n  transform: translateX(30px);\n}\n</style>\n","<template>\n  <div class=\"space-y-4\">\n    <div class=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200\">\n      <div class=\"flex items-start\">\n        <svg class=\"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"/>\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"/>\n        </svg>\n        <div class=\"flex-1\">\n          <h3 class=\"text-sm font-semibold text-blue-900\">Residential Address</h3>\n          <p class=\"text-xs text-blue-700 mt-0.5\">Please provide your complete address details</p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n      <!-- Province -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Province\n          <span v-if=\"required\" class=\"text-red-500\">*</span>\n        </label>\n        <div class=\"relative\">\n          <select\n            v-model=\"localAddress.province\"\n            @change=\"onProvinceChange\"\n            :required=\"required\"\n            class=\"block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all\"\n            :class=\"{'border-blue-500 ring-2 ring-blue-100': localAddress.province}\"\n          >\n            <option value=\"\">Select Province</option>\n            <option v-for=\"province in provinces\" :key=\"province\" :value=\"province\">\n              {{ province }}\n            </option>\n          </select>\n          <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n            </svg>\n          </div>\n        </div>\n      </div>\n\n      <!-- Municipality/City -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Municipality/City\n          <span v-if=\"required\" class=\"text-red-500\">*</span>\n        </label>\n        <div class=\"relative\">\n          <select\n            v-model=\"localAddress.municipality\"\n            @change=\"onMunicipalityChange\"\n            :required=\"required\"\n            :disabled=\"!localAddress.province\"\n            class=\"block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed\"\n            :class=\"{'border-blue-500 ring-2 ring-blue-100': localAddress.municipality}\"\n          >\n            <option value=\"\">Select Municipality/City</option>\n            <option v-for=\"municipality in municipalities\" :key=\"municipality\" :value=\"municipality\">\n              {{ municipality }}\n            </option>\n          </select>\n          <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n            </svg>\n          </div>\n        </div>\n        <p v-if=\"!localAddress.province\" class=\"mt-1 text-xs text-gray-500\">Select province first</p>\n      </div>\n\n      <!-- Barangay -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Barangay\n          <span v-if=\"required\" class=\"text-red-500\">*</span>\n        </label>\n        <div class=\"relative\">\n          <select\n            v-model=\"localAddress.barangay\"\n            @change=\"updateAddress\"\n            :required=\"required\"\n            :disabled=\"!localAddress.municipality\"\n            class=\"block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed\"\n            :class=\"{'border-blue-500 ring-2 ring-blue-100': localAddress.barangay}\"\n          >\n            <option value=\"\">Select Barangay</option>\n            <option v-for=\"barangay in barangays\" :key=\"barangay\" :value=\"barangay\">\n              {{ barangay }}\n            </option>\n          </select>\n          <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n            </svg>\n          </div>\n        </div>\n        <p v-if=\"!localAddress.municipality\" class=\"mt-1 text-xs text-gray-500\">Select municipality first</p>\n      </div>\n\n      <!-- Street Address -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Street / House No.\n          <span v-if=\"required\" class=\"text-red-500\">*</span>\n        </label>\n        <input\n          v-model=\"localAddress.street\"\n          @input=\"updateAddress\"\n          type=\"text\"\n          :required=\"required\"\n          placeholder=\"e.g., 123 Main Street, Blk 5 Lot 10\"\n          class=\"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n          :class=\"{'border-blue-500 ring-2 ring-blue-100': localAddress.street}\"\n        />\n      </div>\n\n      <!-- ZIP Code -->\n      <div class=\"md:col-span-2\">\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          ZIP Code\n          <span class=\"text-gray-500 text-xs font-normal\">(Optional)</span>\n        </label>\n        <input\n          v-model=\"localAddress.zipCode\"\n          @input=\"updateAddress\"\n          type=\"text\"\n          placeholder=\"e.g., 1630\"\n          maxlength=\"4\"\n          class=\"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs\"\n        />\n      </div>\n    </div>\n\n    <!-- Address Preview -->\n    <div v-if=\"fullAddress\" class=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n      <div class=\"flex items-start\">\n        <svg class=\"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n        </svg>\n        <div class=\"flex-1\">\n          <p class=\"text-sm font-medium text-green-900\">Complete Address</p>\n          <p class=\"text-sm text-green-700 mt-1\">{{ fullAddress }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: [String, Object],\n    default: ''\n  },\n  required: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst localAddress = ref({\n  street: '',\n  barangay: '',\n  municipality: '',\n  province: '',\n  zipCode: ''\n})\n\n// Philippines provinces (major ones - can be expanded)\nconst provinces = [\n  'Metro Manila',\n  'Rizal',\n  'Cavite',\n  'Laguna',\n  'Bulacan',\n  'Pampanga',\n  'Batangas',\n  'Quezon',\n  'Cebu',\n  'Davao del Sur',\n  'Benguet',\n  'Iloilo',\n  'Negros Occidental',\n  'Pangasinan',\n  'Albay'\n]\n\n// Municipalities by province (can be expanded with API)\nconst municipalitiesData = {\n  'Metro Manila': [\n    'Manila City',\n    'Quezon City',\n    'Makati City',\n    'Pasig City',\n    'Taguig City',\n    'Mandaluyong City',\n    'Pasay City',\n    'Paraaque City',\n    'Las Pias City',\n    'Muntinlupa City',\n    'Caloocan City',\n    'Malabon City',\n    'Navotas City',\n    'Valenzuela City',\n    'Marikina City',\n    'San Juan City',\n    'Pateros'\n  ],\n  'Rizal': [\n    'Taytay',\n    'Antipolo City',\n    'Cainta',\n    'Binangonan',\n    'San Mateo',\n    'Rodriguez (Montalban)',\n    'Angono',\n    'Cardona',\n    'Jalajala',\n    'Morong',\n    'Pililla',\n    'Tanay',\n    'Teresa',\n    'Baras'\n  ],\n  'Cavite': [\n    'Bacoor City',\n    'Cavite City',\n    'Dasmarinas City',\n    'Imus City',\n    'Tagaytay City',\n    'Trece Martires City',\n    'General Trias',\n    'Silang',\n    'Kawit',\n    'Noveleta',\n    'Rosario',\n    'Tanza',\n    'Naic'\n  ]\n}\n\n// Barangays by municipality (sample data - Taytay as example)\nconst barangaysData = {\n  'Taytay': [\n    'Dolores',\n    'San Juan',\n    'Muzon',\n    'San Isidro',\n    'Sta. Ana',\n    'Poblacion',\n    'Bagumbayan',\n    'Bamban',\n    'Calumpang',\n    'Dalig',\n    'Dolores',\n    'San Juan',\n    'Muzon'\n  ],\n  'Manila City': [\n    'Ermita',\n    'Intramuros',\n    'Malate',\n    'Paco',\n    'Pandacan',\n    'Port Area',\n    'Quiapo',\n    'Sampaloc',\n    'San Andres',\n    'San Miguel',\n    'San Nicolas',\n    'Santa Ana',\n    'Santa Cruz',\n    'Santa Mesa',\n    'Tondo'\n  ],\n  'Quezon City': [\n    'Bagong Pag-asa',\n    'Bahay Toro',\n    'Batasan Hills',\n    'Commonwealth',\n    'Cubao',\n    'Fairview',\n    'Kamuning',\n    'Novaliches',\n    'Project 4',\n    'Tatalon',\n    'Teacher\\'s Village'\n  ]\n}\n\nconst municipalities = computed(() => {\n  if (!localAddress.value.province) return []\n  return municipalitiesData[localAddress.value.province] || []\n})\n\nconst barangays = computed(() => {\n  if (!localAddress.value.municipality) return []\n  return barangaysData[localAddress.value.municipality] || ['Other - Please specify in Street field']\n})\n\nconst fullAddress = computed(() => {\n  const parts = []\n  if (localAddress.value.street) parts.push(localAddress.value.street)\n  if (localAddress.value.barangay) parts.push(`Brgy. ${localAddress.value.barangay}`)\n  if (localAddress.value.municipality) parts.push(localAddress.value.municipality)\n  if (localAddress.value.province) parts.push(localAddress.value.province)\n  if (localAddress.value.zipCode) parts.push(localAddress.value.zipCode)\n\n  return parts.length > 0 ? parts.join(', ') : ''\n})\n\nconst onProvinceChange = () => {\n  // Reset dependent fields when province changes\n  localAddress.value.municipality = ''\n  localAddress.value.barangay = ''\n  updateAddress()\n}\n\nconst onMunicipalityChange = () => {\n  // Reset barangay when municipality changes\n  localAddress.value.barangay = ''\n  updateAddress()\n}\n\nconst updateAddress = () => {\n  // Emit both the full address string and individual fields\n  emit('update:modelValue', {\n    full_address: fullAddress.value,\n    address_line: localAddress.value.street,\n    barangay: localAddress.value.barangay,\n    municipality: localAddress.value.municipality,\n    province: localAddress.value.province,\n    zip_code: localAddress.value.zipCode\n  })\n}\n\n// Initialize from modelValue if provided\nonMounted(() => {\n  if (props.modelValue) {\n    if (typeof props.modelValue === 'string') {\n      // Try to parse string address\n      // This is a simple parser - can be enhanced\n      const parts = props.modelValue.split(',').map(p => p.trim())\n      if (parts.length >= 3) {\n        localAddress.value.street = parts[0] || ''\n        localAddress.value.barangay = parts[1]?.replace('Brgy. ', '') || ''\n        localAddress.value.municipality = parts[2] || ''\n        localAddress.value.province = parts[3] || ''\n        localAddress.value.zipCode = parts[4] || ''\n      }\n    } else if (typeof props.modelValue === 'object') {\n      localAddress.value = { ...localAddress.value, ...props.modelValue }\n    }\n  }\n})\n\n// Watch for external changes\nwatch(() => props.modelValue, (newVal) => {\n  if (newVal && typeof newVal === 'object') {\n    localAddress.value = { ...localAddress.value, ...newVal }\n  }\n})\n</script>\n","<template>\n  <div class=\"space-y-4\">\n    <!-- Property Selector Header -->\n    <div class=\"flex items-center justify-between mb-4\">\n      <label class=\"block text-sm font-medium text-gray-700\">\n        {{ label }}\n        <span v-if=\"required\" class=\"text-red-500\">*</span>\n      </label>\n      <button\n        v-if=\"userProperties.length > 0\"\n        @click=\"showPropertySelector = !showPropertySelector\"\n        type=\"button\"\n        class=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\n      >\n        {{ showPropertySelector ? 'Enter manually' : 'Select from my properties' }}\n      </button>\n    </div>\n\n    <!-- Property Selector Dropdown (if user has properties) -->\n    <div v-if=\"showPropertySelector && userProperties.length > 0\" class=\"space-y-3\">\n      <select\n        v-model=\"selectedPropertyId\"\n        @change=\"onPropertySelected\"\n        class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n      >\n        <option value=\"\">Select a property</option>\n        <option\n          v-for=\"property in userProperties\"\n          :key=\"property.name\"\n          :value=\"property.name\"\n        >\n          {{ formatPropertyOption(property) }}\n        </option>\n        <option value=\"__new__\">+ Add New Property</option>\n      </select>\n\n      <!-- Selected Property Display -->\n      <div v-if=\"selectedProperty && selectedPropertyId !== '__new__'\" class=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n        <div class=\"flex items-start justify-between\">\n          <div class=\"flex-1 space-y-1\">\n            <p class=\"text-sm font-medium text-gray-900\">{{ selectedProperty.property_name || 'Property' }}</p>\n            <p class=\"text-sm text-gray-700\">{{ formatPropertyAddress(selectedProperty) }}</p>\n            <p v-if=\"selectedProperty.legal_description\" class=\"text-xs text-gray-600\">{{ selectedProperty.legal_description }}</p>\n          </div>\n          <div class=\"flex space-x-2\">\n            <button\n              @click=\"editProperty\"\n              type=\"button\"\n              class=\"text-sm text-blue-600 hover:text-blue-700\"\n              title=\"Edit property\"\n            >\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n              </svg>\n            </button>\n            <button\n              @click=\"deleteProperty\"\n              type=\"button\"\n              class=\"text-sm text-red-600 hover:text-red-700\"\n              title=\"Remove property\"\n            >\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Manual Address Input or New Property Form -->\n    <div v-if=\"!showPropertySelector || selectedPropertyId === '__new__' || userProperties.length === 0\">\n      <PhilippinesAddressInput\n        :modelValue=\"localAddress\"\n        @update:modelValue=\"onAddressChange\"\n        :required=\"required\"\n      />\n    </div>\n\n    <!-- Add to My Properties Checkbox (when entering manually) -->\n    <div v-if=\"(!showPropertySelector || selectedPropertyId === '__new__') && !selectedPropertyId\" class=\"flex items-center space-x-2\">\n      <input\n        v-model=\"saveToProfile\"\n        type=\"checkbox\"\n        id=\"save-property\"\n        class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n      />\n      <label for=\"save-property\" class=\"text-sm text-gray-700\">\n        Save this property to my profile for future use\n      </label>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\nimport PhilippinesAddressInput from './PhilippinesAddressInput.vue'\nimport { useUserProfile } from '../composables/useUserProfile'\n\nconst props = defineProps({\n  modelValue: {\n    type: Object,\n    default: () => ({})\n  },\n  label: {\n    type: String,\n    default: 'Residential Address'\n  },\n  required: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst { userProfile, loadUserProfile, getAllProperties, defaultProperty } = useUserProfile()\n\n// State\nconst showPropertySelector = ref(false)\nconst selectedPropertyId = ref('')\nconst saveToProfile = ref(false)\nconst localAddress = ref(props.modelValue || {})\n\n// Computed\nconst userProperties = computed(() => getAllProperties.value || [])\n\nconst selectedProperty = computed(() => {\n  if (!selectedPropertyId.value || selectedPropertyId.value === '__new__') return null\n  return userProperties.value.find(p => p.name === selectedPropertyId.value)\n})\n\n// Methods\nfunction formatPropertyOption(property) {\n  const parts = []\n  if (property.property_name) parts.push(property.property_name)\n  if (property.street) parts.push(property.street)\n  if (property.suburb) parts.push(property.suburb)\n  if (property.city) parts.push(property.city)\n  return parts.join(', ') || 'Unnamed Property'\n}\n\nfunction formatPropertyAddress(property) {\n  const parts = []\n  if (property.street) parts.push(property.street)\n  if (property.barangay) parts.push(`Brgy. ${property.barangay}`)\n  if (property.municipality) parts.push(property.municipality)\n  if (property.province) parts.push(property.province)\n  if (property.zip_code || property.postcode) parts.push(property.zip_code || property.postcode)\n  return parts.join(', ')\n}\n\nfunction onPropertySelected() {\n  if (selectedPropertyId.value === '__new__') {\n    // Reset to manual entry mode\n    localAddress.value = {}\n    showPropertySelector.value = false\n    return\n  }\n\n  if (selectedProperty.value) {\n    // Map property to address format\n    localAddress.value = {\n      full_address: formatPropertyAddress(selectedProperty.value),\n      address_line: selectedProperty.value.street || '',\n      barangay: selectedProperty.value.barangay || '',\n      municipality: selectedProperty.value.municipality || selectedProperty.value.city || '',\n      province: selectedProperty.value.province || '',\n      zip_code: selectedProperty.value.zip_code || selectedProperty.value.postcode || ''\n    }\n\n    emit('update:modelValue', localAddress.value)\n  }\n}\n\nfunction onAddressChange(newAddress) {\n  localAddress.value = newAddress\n  emit('update:modelValue', newAddress)\n}\n\nfunction editProperty() {\n  // Switch to manual mode with current property data\n  showPropertySelector.value = false\n  // Keep the current localAddress values for editing\n}\n\nfunction deleteProperty() {\n  if (confirm('Are you sure you want to remove this property from selection?')) {\n    selectedPropertyId.value = ''\n    localAddress.value = {}\n    emit('update:modelValue', {})\n  }\n}\n\n// Initialize\nonMounted(async () => {\n  await loadUserProfile()\n\n  // Auto-select default property if no value provided\n  if (!props.modelValue || Object.keys(props.modelValue).length === 0) {\n    if (defaultProperty.value) {\n      selectedPropertyId.value = defaultProperty.value.name\n      onPropertySelected()\n    }\n  }\n\n  // Show property selector by default if user has properties\n  if (userProperties.value.length > 0) {\n    showPropertySelector.value = true\n  }\n})\n\n// Watch for external changes\nwatch(() => props.modelValue, (newVal) => {\n  if (newVal && Object.keys(newVal).length > 0) {\n    localAddress.value = newVal\n  }\n}, { deep: true })\n</script>\n","<template>\n  <div class=\"inline-block relative group\">\n    <slot name=\"trigger\">\n      <button\n        type=\"button\"\n        class=\"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help\"\n        @mouseenter=\"showTooltip = true\"\n        @mouseleave=\"showTooltip = false\"\n      >\n        <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z\" clip-rule=\"evenodd\"/>\n        </svg>\n      </button>\n    </slot>\n\n    <Transition name=\"tooltip\">\n      <div\n        v-if=\"showTooltip\"\n        class=\"absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none\"\n        :class=\"tooltipPositionClass\"\n        style=\"max-width: 300px; white-space: normal;\"\n      >\n        <slot>{{ text }}</slot>\n        <div class=\"tooltip-arrow\" :class=\"arrowPositionClass\"></div>\n      </div>\n    </Transition>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\n\nconst props = defineProps({\n  text: {\n    type: String,\n    default: ''\n  },\n  position: {\n    type: String,\n    default: 'top',\n    validator: (value) => ['top', 'bottom', 'left', 'right'].includes(value)\n  }\n})\n\nconst showTooltip = ref(false)\n\nconst tooltipPositionClass = computed(() => {\n  switch (props.position) {\n    case 'top':\n      return 'bottom-full left-1/2 -translate-x-1/2 mb-2'\n    case 'bottom':\n      return 'top-full left-1/2 -translate-x-1/2 mt-2'\n    case 'left':\n      return 'right-full top-1/2 -translate-y-1/2 mr-2'\n    case 'right':\n      return 'left-full top-1/2 -translate-y-1/2 ml-2'\n    default:\n      return 'bottom-full left-1/2 -translate-x-1/2 mb-2'\n  }\n})\n\nconst arrowPositionClass = computed(() => {\n  switch (props.position) {\n    case 'top':\n      return 'tooltip-arrow-bottom'\n    case 'bottom':\n      return 'tooltip-arrow-top'\n    case 'left':\n      return 'tooltip-arrow-right'\n    case 'right':\n      return 'tooltip-arrow-left'\n    default:\n      return 'tooltip-arrow-bottom'\n  }\n})\n</script>\n\n<style scoped>\n.tooltip-enter-active,\n.tooltip-leave-active {\n  transition: opacity 0.2s ease;\n}\n\n.tooltip-enter-from,\n.tooltip-leave-to {\n  opacity: 0;\n}\n\n.tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-style: solid;\n}\n\n.tooltip-arrow-bottom {\n  bottom: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  border-width: 4px 4px 0 4px;\n  border-color: #1f2937 transparent transparent transparent;\n}\n\n.tooltip-arrow-top {\n  top: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  border-width: 0 4px 4px 4px;\n  border-color: transparent transparent #1f2937 transparent;\n}\n\n.tooltip-arrow-right {\n  right: -4px;\n  top: 50%;\n  transform: translateY(-50%);\n  border-width: 4px 0 4px 4px;\n  border-color: transparent transparent transparent #1f2937;\n}\n\n.tooltip-arrow-left {\n  left: -4px;\n  top: 50%;\n  transform: translateY(-50%);\n  border-width: 4px 4px 4px 0;\n  border-color: transparent #1f2937 transparent transparent;\n}\n</style>\n","/**\n * Conditional Logic Utility for Request Type Configuration\n *\n * Evaluates `depends_on` expressions from step_configs, step_sections, and step_fields\n *\n * Expression formats supported:\n * - eval:formData.field_name=='value'\n * - eval:formData.field_name!='value'\n * - eval:formData.field_name\n * - eval:!formData.field_name\n * - eval:formData.field_name>5\n * - eval:formData.field_name=='value1' || formData.field_name=='value2'\n * - eval:formData.field_name=='value1' && formData.other_field=='value2'\n */\n\n/**\n * Safely evaluates a depends_on expression\n *\n * @param {string} expression - The depends_on expression (e.g., \"eval:formData.requester_type=='Company'\")\n * @param {object} formData - The current form data\n * @returns {boolean} - True if condition is met, false otherwise\n */\nexport function evaluateCondition(expression, formData) {\n  // If no expression, always show\n  if (!expression || expression.trim() === '') {\n    return true\n  }\n\n  // Remove 'eval:' prefix if present\n  let cleanExpression = expression.trim()\n  if (cleanExpression.startsWith('eval:')) {\n    cleanExpression = cleanExpression.substring(5).trim()\n  }\n\n  try {\n    // Create a safe evaluation context with only formData\n    // This prevents access to dangerous globals like window, document, etc.\n    const safeEval = new Function('formData', `\n      'use strict';\n      try {\n        return Boolean(${cleanExpression});\n      } catch (e) {\n        console.warn('[Conditional Logic] Evaluation error:', e.message);\n        return false;\n      }\n    `)\n\n    const result = safeEval(formData)\n    return result\n  } catch (error) {\n    console.error('[Conditional Logic] Failed to evaluate expression:', expression, error)\n    // On error, default to showing the field/section (fail open)\n    return true\n  }\n}\n\n/**\n * Evaluates step visibility based on depends_on\n *\n * @param {object} step - Step config object with optional depends_on\n * @param {object} formData - Current form data\n * @returns {boolean} - Whether step should be visible\n */\nexport function isStepVisible(step, formData) {\n  if (!step) return false\n  if (!step.is_enabled) return false\n  if (!step.depends_on) return true\n\n  return evaluateCondition(step.depends_on, formData)\n}\n\n/**\n * Evaluates section visibility based on depends_on\n *\n * @param {object} section - Section config object with optional depends_on\n * @param {object} formData - Current form data\n * @returns {boolean} - Whether section should be visible\n */\nexport function isSectionVisible(section, formData) {\n  if (!section) return false\n  if (!section.is_enabled) return false\n  if (!section.depends_on) return true\n\n  return evaluateCondition(section.depends_on, formData)\n}\n\n/**\n * Evaluates field visibility based on depends_on\n *\n * @param {object} field - Field config object with optional depends_on\n * @param {object} formData - Current form data\n * @returns {boolean} - Whether field should be visible\n */\nexport function isFieldVisible(field, formData) {\n  if (!field) return false\n  if (!field.depends_on) return true\n\n  return evaluateCondition(field.depends_on, formData)\n}\n\n/**\n * Filters an array of items based on their depends_on conditions\n *\n * @param {array} items - Array of steps/sections/fields with optional depends_on\n * @param {object} formData - Current form data\n * @param {function} visibilityFn - Function to check visibility (isStepVisible, isSectionVisible, isFieldVisible)\n * @returns {array} - Filtered array of visible items\n */\nexport function filterVisibleItems(items, formData, visibilityFn) {\n  if (!items || !Array.isArray(items)) return []\n\n  return items.filter(item => visibilityFn(item, formData))\n}\n\n/**\n * Example expressions and their evaluations:\n *\n * Expression: \"eval:formData.requester_type=='Company'\"\n * formData: { applicant_type: 'Company' }\n * Result: true\n *\n * Expression: \"eval:formData.has_agent\"\n * formData: { has_agent: 1 }\n * Result: true\n *\n * Expression: \"eval:!formData.has_agent\"\n * formData: { has_agent: 0 }\n * Result: true\n *\n * Expression: \"eval:formData.age>65\"\n * formData: { age: 70 }\n * Result: true\n *\n * Expression: \"eval:formData.consent_type=='Land Use' || formData.consent_type=='Subdivision'\"\n * formData: { consent_type: 'Land Use' }\n * Result: true\n */\n","<template>\n  <div class=\"space-y-6\">\n    <div v-for=\"field in visibleFields\" :key=\"field.field_name\" class=\"field-wrapper\">\n      <!-- Property Address Selector (special handling for address fields) -->\n      <div v-if=\"isAddressField(field)\" class=\"form-group\">\n        <PropertyAddressSelector\n          v-model=\"localData[field.field_name]\"\n          :label=\"field.field_label\"\n          :required=\"Boolean(field.is_required)\"\n        />\n      </div>\n\n      <!-- Data / Text Input -->\n      <div v-else-if=\"field.field_type === 'Data'\" class=\"form-group\">\n        <label :for=\"field.field_name\" class=\"block text-sm font-medium text-gray-700 mb-2 flex items-center\">\n          <span>{{ field.field_label }}</span>\n          <span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n          <Tooltip v-if=\"field.help_text || field.description\" :text=\"field.help_text || field.description\" />\n        </label>\n        <div class=\"relative\">\n          <input\n            :id=\"field.field_name\"\n            :name=\"field.field_name\"\n            type=\"text\"\n            v-model=\"localData[field.field_name]\"\n            @blur=\"handleFieldValidation(field)\"\n            :required=\"field.is_required\"\n            class=\"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n            :class=\"{\n              'border-blue-500 ring-2 ring-blue-100': localData[field.field_name] && !getValidationError(field.field_name),\n              'border-red-500 ring-2 ring-red-100': getValidationError(field.field_name)\n            }\"\n            :placeholder=\"getPlaceholder(field)\"\n          />\n          <div v-if=\"getFieldIcon(field)\" class=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n            <span v-html=\"getFieldIcon(field)\" class=\"text-gray-400\"></span>\n          </div>\n        </div>\n        <p v-if=\"getValidationError(field.field_name)\" class=\"mt-1 text-xs text-red-600\">\n          {{ getValidationError(field.field_name) }}\n        </p>\n        <p v-else-if=\"field.description\" class=\"mt-1 text-xs text-gray-500\">{{ field.description }}</p>\n      </div>\n\n      <!-- Select Dropdown -->\n      <div v-else-if=\"field.field_type === 'Select'\" class=\"form-group\">\n        <label :for=\"field.field_name\" class=\"block text-sm font-medium text-gray-700 mb-2 flex items-center\">\n          <span>{{ field.field_label }}</span>\n          <span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n          <Tooltip v-if=\"field.help_text || field.description\" :text=\"field.help_text || field.description\" />\n        </label>\n        <div class=\"relative\">\n          <select\n            :id=\"field.field_name\"\n            :name=\"field.field_name\"\n            v-model=\"localData[field.field_name]\"\n            @blur=\"handleFieldValidation(field)\"\n            :required=\"field.is_required\"\n            class=\"block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white\"\n            :class=\"{\n              'border-blue-500 ring-2 ring-blue-100': localData[field.field_name] && !getValidationError(field.field_name),\n              'border-red-500 ring-2 ring-red-100': getValidationError(field.field_name)\n            }\"\n          >\n            <option value=\"\">Select {{ field.field_label }}</option>\n            <option\n              v-for=\"option in getSelectOptions(field.options)\"\n              :key=\"option\"\n              :value=\"option\"\n            >\n              {{ option }}\n            </option>\n          </select>\n          <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n            </svg>\n          </div>\n        </div>\n        <p v-if=\"getValidationError(field.field_name)\" class=\"mt-1 text-xs text-red-600\">\n          {{ getValidationError(field.field_name) }}\n        </p>\n        <p v-else-if=\"field.description\" class=\"mt-1 text-xs text-gray-500\">{{ field.description }}</p>\n      </div>\n\n      <!-- Checkbox -->\n      <div v-else-if=\"field.field_type === 'Check'\" class=\"form-group\">\n        <div class=\"flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors\"\n          :class=\"{\n            'border-gray-200': !getValidationError(field.field_name),\n            'border-red-500 bg-red-50': getValidationError(field.field_name)\n          }\">\n          <div class=\"flex items-center h-5\">\n            <input\n              :id=\"field.field_name\"\n              :name=\"field.field_name\"\n              type=\"checkbox\"\n              v-model=\"localData[field.field_name]\"\n              @change=\"handleFieldValidation(field)\"\n              :required=\"field.is_required\"\n              class=\"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer\"\n            />\n          </div>\n          <div class=\"ml-3 text-sm\">\n            <label :for=\"field.field_name\" class=\"font-medium text-gray-700 cursor-pointer\">\n              {{ field.field_label }}\n              <span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n            </label>\n            <p v-if=\"getValidationError(field.field_name)\" class=\"mt-1 text-xs text-red-600\">\n              {{ getValidationError(field.field_name) }}\n            </p>\n            <p v-else-if=\"field.description\" class=\"mt-1 text-xs text-gray-500\">{{ field.description }}</p>\n          </div>\n        </div>\n      </div>\n\n      <!-- Text / Textarea -->\n      <div v-else-if=\"field.field_type === 'Text'\" class=\"form-group\">\n        <label :for=\"field.field_name\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n          {{ field.field_label }}\n          <span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n        </label>\n        <textarea\n          :id=\"field.field_name\"\n          :name=\"field.field_name\"\n          v-model=\"localData[field.field_name]\"\n          @blur=\"handleFieldValidation(field)\"\n          :required=\"field.is_required\"\n          rows=\"4\"\n          class=\"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y\"\n          :class=\"{\n            'border-blue-500 ring-2 ring-blue-100': localData[field.field_name] && !getValidationError(field.field_name),\n            'border-red-500 ring-2 ring-red-100': getValidationError(field.field_name)\n          }\"\n          :placeholder=\"getPlaceholder(field)\"\n        ></textarea>\n        <p v-if=\"getValidationError(field.field_name)\" class=\"mt-1 text-xs text-red-600\">\n          {{ getValidationError(field.field_name) }}\n        </p>\n        <p v-else-if=\"field.description\" class=\"mt-1 text-xs text-gray-500\">{{ field.description }}</p>\n      </div>\n\n      <!-- Date -->\n      <div v-else-if=\"field.field_type === 'Date'\" class=\"form-group\">\n        <label :for=\"field.field_name\" class=\"block text-sm font-medium text-gray-700 mb-2 flex items-center\">\n          <span>{{ field.field_label }}</span>\n          <span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n          <Tooltip v-if=\"field.help_text || field.description\" :text=\"field.help_text || field.description\" />\n        </label>\n        <div class=\"relative\">\n          <input\n            :id=\"field.field_name\"\n            :name=\"field.field_name\"\n            type=\"date\"\n            v-model=\"localData[field.field_name]\"\n            @blur=\"handleFieldValidation(field)\"\n            :required=\"field.is_required\"\n            class=\"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n            :class=\"{\n              'border-blue-500 ring-2 ring-blue-100': localData[field.field_name] && !getValidationError(field.field_name),\n              'border-red-500 ring-2 ring-red-100': getValidationError(field.field_name)\n            }\"\n          />\n          <div class=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"/>\n            </svg>\n          </div>\n        </div>\n        <p v-if=\"getValidationError(field.field_name)\" class=\"mt-1 text-xs text-red-600\">\n          {{ getValidationError(field.field_name) }}\n        </p>\n        <p v-else-if=\"field.description\" class=\"mt-1 text-xs text-gray-500\">{{ field.description }}</p>\n      </div>\n\n      <!-- Integer -->\n      <div v-else-if=\"field.field_type === 'Int'\" class=\"form-group\">\n        <label :for=\"field.field_name\" class=\"block text-sm font-medium text-gray-700 mb-2 flex items-center\">\n          <span>{{ field.field_label }}</span>\n          <span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n          <Tooltip v-if=\"field.help_text || field.description\" :text=\"field.help_text || field.description\" />\n        </label>\n        <div class=\"relative\">\n          <input\n            :id=\"field.field_name\"\n            :name=\"field.field_name\"\n            type=\"number\"\n            v-model.number=\"localData[field.field_name]\"\n            :required=\"field.is_required\"\n            step=\"1\"\n            class=\"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n            :class=\"{'border-blue-500 ring-2 ring-blue-100': localData[field.field_name]}\"\n            :placeholder=\"getPlaceholder(field)\"\n          />\n          <div class=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"/>\n            </svg>\n          </div>\n        </div>\n        <p v-if=\"field.description\" class=\"mt-1 text-xs text-gray-500\">{{ field.description }}</p>\n      </div>\n\n      <!-- Float -->\n      <div v-else-if=\"field.field_type === 'Float'\" class=\"form-group\">\n        <label :for=\"field.field_name\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n          {{ field.field_label }}\n          <span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n        </label>\n        <div class=\"relative\">\n          <input\n            :id=\"field.field_name\"\n            :name=\"field.field_name\"\n            type=\"number\"\n            v-model.number=\"localData[field.field_name]\"\n            :required=\"field.is_required\"\n            step=\"0.01\"\n            class=\"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n            :class=\"{'border-blue-500 ring-2 ring-blue-100': localData[field.field_name]}\"\n            :placeholder=\"getPlaceholder(field)\"\n          />\n          <div class=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"/>\n            </svg>\n          </div>\n        </div>\n        <p v-if=\"field.description\" class=\"mt-1 text-xs text-gray-500\">{{ field.description }}</p>\n      </div>\n\n      <!-- Currency -->\n      <div v-else-if=\"field.field_type === 'Currency'\" class=\"form-group\">\n        <label :for=\"field.field_name\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n          {{ field.field_label }}\n          <span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n        </label>\n        <div class=\"relative\">\n          <div class=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n            <span class=\"text-gray-500 text-base font-medium\"></span>\n          </div>\n          <input\n            :id=\"field.field_name\"\n            :name=\"field.field_name\"\n            type=\"number\"\n            v-model.number=\"localData[field.field_name]\"\n            @blur=\"handleFieldValidation(field)\"\n            :required=\"field.is_required\"\n            step=\"0.01\"\n            class=\"block w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n            :class=\"{\n              'border-blue-500 ring-2 ring-blue-100': localData[field.field_name] && !getValidationError(field.field_name),\n              'border-red-500 ring-2 ring-red-100': getValidationError(field.field_name)\n            }\"\n            placeholder=\"0.00\"\n          />\n        </div>\n        <p v-if=\"getValidationError(field.field_name)\" class=\"mt-1 text-xs text-red-600\">\n          {{ getValidationError(field.field_name) }}\n        </p>\n        <p v-else-if=\"field.description\" class=\"mt-1 text-xs text-gray-500\">{{ field.description }}</p>\n      </div>\n\n      <!-- Attach / File Upload with Camera Support -->\n      <div v-else-if=\"field.field_type === 'Attach' || field.field_type === 'Attach Image'\" class=\"form-group\">\n        <CameraUpload\n          :label=\"field.field_label\"\n          :required=\"field.is_required\"\n          :accept=\"field.field_type === 'Attach Image' ? 'image/*' : '*'\"\n          :multiple=\"false\"\n          v-model=\"localData[field.field_name]\"\n        />\n      </div>\n\n      <!-- Unsupported field type -->\n      <div v-else class=\"form-group\">\n        <div class=\"text-sm text-gray-500 italic\">\n          Field type \"{{ field.field_type }}\" not yet supported for {{ field.field_label }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, watch, ref } from 'vue'\nimport CameraUpload from './CameraUpload.vue'\nimport PhilippinesAddressInput from './PhilippinesAddressInput.vue'\nimport PropertyAddressSelector from './PropertyAddressSelector.vue'\nimport Tooltip from './Tooltip.vue'\nimport { isFieldVisible } from '../utils/conditionalLogic'\nimport { validateField } from '../utils/fieldValidation'\n\nconst props = defineProps({\n  fields: {\n    type: Array,\n    required: true\n  },\n  modelValue: {\n    type: Object,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst localData = computed({\n  get: () => props.modelValue,\n  set: (value) => emit('update:modelValue', value)\n})\n\n// Filter visible fields based on depends_on logic\nconst visibleFields = computed(() => {\n  return props.fields.filter(field => {\n    // Hide individual address component fields if Philippines Address Input is being used\n    const parentSection = field.parent_section_code?.toLowerCase() || ''\n    const addressSections = ['address', 'residential_address', 'permanent_address', 'property_address', 'current_address', 'home_address']\n    const isInAddressSection = addressSections.includes(parentSection)\n    const addressComponentFields = ['barangay', 'municipality', 'province', 'city', 'region', 'zip_code', 'postal_code']\n\n    // Check if this section has an address_line field (which triggers PhilippinesAddressInput)\n    if (isInAddressSection) {\n      const hasAddressLineField = props.fields.some(f =>\n        f.parent_section_code === field.parent_section_code &&\n        f.field_name === 'address_line'\n      )\n\n      // If this section has address_line AND this field is one of the component fields, hide it\n      if (hasAddressLineField && addressComponentFields.includes(field.field_name)) {\n        return false\n      }\n    }\n\n    return isFieldVisible(field, localData.value)\n  })\n})\n\n// Check if field is an address field\nconst isAddressField = (field) => {\n  // Check if this is an address field that should use the PropertyAddressSelector\n  const fieldName = field.field_name?.toLowerCase() || ''\n  const fieldLabel = field.field_label?.toLowerCase() || ''\n  const parentSection = field.parent_section_code?.toLowerCase() || ''\n\n  // Address field indicators\n  const addressFieldNames = ['address_line', 'street', 'residential_address', 'property_address', 'home_address', 'current_address', 'permanent_address']\n  const addressSections = ['address', 'residential_address', 'permanent_address', 'property_address', 'current_address', 'home_address']\n  const addressLabels = ['residential address', 'property address', 'home address', 'current address', 'permanent address', 'street / house number', 'street address']\n\n  // Trigger PropertyAddressSelector if:\n  // 1. Field name matches address patterns, OR\n  // 2. Parent section is an address section and this is the first field (address_line or street), OR\n  // 3. Field label indicates it's a main address field\n  return (\n    (addressFieldNames.includes(fieldName) && field.field_type === 'Data') ||\n    (addressSections.includes(parentSection) && (fieldName === 'address_line' || fieldName === 'street') && field.field_type === 'Data') ||\n    (addressLabels.some(label => fieldLabel.includes(label)) && field.field_type === 'Data' && !fieldLabel.includes('zip') && !fieldLabel.includes('postal'))\n  )\n}\n\n// Get placeholder text for field\nconst getPlaceholder = (field) => {\n  if (field.placeholder) return field.placeholder\n\n  // Generate smart placeholders based on field name/label\n  const label = field.field_label?.toLowerCase() || ''\n\n  if (label.includes('name')) return 'e.g., Juan Dela Cruz'\n  if (label.includes('email')) return 'e.g., juan@example.com'\n  if (label.includes('phone') || label.includes('mobile') || label.includes('contact')) {\n    return 'e.g., 0917 123 4567'\n  }\n  if (label.includes('age')) return 'e.g., 25'\n  if (label.includes('occupation')) return 'e.g., Teacher'\n  if (label.includes('income') || label.includes('salary')) return 'e.g., 15000'\n\n  return `Enter ${field.field_label}`\n}\n\n// Get icon for field based on type\nconst getFieldIcon = (field) => {\n  const label = field.field_label?.toLowerCase() || ''\n\n  if (label.includes('email')) {\n    return '<svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207\"/></svg>'\n  }\n  if (label.includes('phone') || label.includes('mobile') || label.includes('contact')) {\n    return '<svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"/></svg>'\n  }\n  if (label.includes('name')) {\n    return '<svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"/></svg>'\n  }\n\n  return null\n}\n\n// Parse select options from newline-separated string\nconst getSelectOptions = (optionsString) => {\n  if (!optionsString) return []\n  return optionsString.split('\\n').map(opt => opt.trim()).filter(Boolean)\n}\n\n// Use step validation composable\nimport { useStepValidation } from '../composables/useStepValidation'\nconst { errors: validationErrors, validateConfigField, clearFieldError } = useStepValidation()\n\n// Validate a single field\nconst handleFieldValidation = (field) => {\n  if (!field.validation && !field.is_required) {\n    // Clear any existing error if no validation rule\n    clearFieldError(field.field_name)\n    return\n  }\n\n  const value = localData.value[field.field_name]\n  validateConfigField(field.field_name, value, field, localData.value)\n}\n\n// Get validation error message for a field\nconst getValidationError = (fieldName) => {\n  return validationErrors.value[fieldName] || ''\n}\n\n// Handle file upload\nconst handleFileUpload = (event, fieldName) => {\n  const file = event.target.files[0]\n  if (file) {\n    // TODO: Implement actual file upload to Frappe\n    // For now, just store the filename\n    localData.value[fieldName] = file.name\n  }\n}\n\n// Set default values on mount\nwatch(() => props.fields, (fields) => {\n  fields.forEach(field => {\n    if (field.default_value && !localData.value[field.field_name]) {\n      if (field.default_value === 'Today' && field.field_type === 'Date') {\n        localData.value[field.field_name] = new Date().toISOString().split('T')[0]\n      } else {\n        localData.value[field.field_name] = field.default_value\n      }\n    }\n  })\n}, { immediate: true })\n</script>\n\n<style scoped>\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\ninput:focus, select:focus, textarea:focus {\n  outline: none;\n}\n\n/* Remove default number input spinners for cleaner look */\ninput[type=\"number\"]::-webkit-inner-spin-button,\ninput[type=\"number\"]::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n\n/* Ensure date input has proper cursor */\ninput[type=\"date\"] {\n  cursor: pointer;\n}\n\n/* Smooth transitions */\ninput, select, textarea {\n  transition: all 0.2s ease-in-out;\n}\n</style>\n","<template>\n<div class=\"dynamic-step max-w-4xl mx-auto\">\n    <div class=\"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200\">\n        <div class=\"flex items-start\">\n            <div class=\"flex-shrink-0\">\n                <svg class=\"h-8 w-8 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"/>\n                </svg>\n            </div>\n            <div class=\"ml-4 flex-1\">\n                <h2 class=\"text-2xl font-bold text-blue-900\">{{ stepConfig.step_title }}</h2>\n                <p v-if=\"stepDescription\" class=\"mt-2 text-sm text-blue-700\">{{ stepDescription }}</p>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"space-y-6\">\n        <div v-for=\"section in visibleSections\" :key=\"section.section_code\" class=\"section\">\n            <div class=\"mb-4 pb-3 border-b-2 border-gray-200\">\n                <div class=\"flex items-center\">\n                    <div class=\"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3\">\n                        <svg class=\"h-5 w-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"/>\n                        </svg>\n                    </div>\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900\">\n                            {{ section.section_title }}\n                            <span v-if=\"section.is_required\" class=\"text-red-500 ml-1\">*</span>\n                        </h3>\n                        <p v-if=\"section.section_description\" class=\"text-sm text-gray-600 mt-0.5\">\n                            {{ section.section_description }}\n                        </p>\n                    </div>\n                </div>\n                <div v-if=\"section.is_required\" class=\"text-xs text-gray-500 mt-2 ml-11\">\n                    All fields marked with <span class=\"text-red-500\">*</span> are required\n                </div>\n            </div>\n\n            <div class=\"section-content\">\n                <TabGroup v-if=\"section.section_type === 'Tab'\">\n                    <TabList class=\"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4\">\n                        <Tab\n                            v-for=\"(tab, idx) in getTabsForSection(section)\"\n                            :key=\"idx\"\n                            v-slot=\"{ selected }\"\n                            class=\"w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2\"\n                            :class=\"selected ? 'bg-white shadow' : 'text-blue-100 hover:bg-white/[0.12] hover:text-white'\"\n                        >\n                            {{ tab }}\n                        </Tab>\n                    </TabList>\n                    <TabPanels>\n                        <TabPanel v-for=\"(tab, idx) in getTabsForSection(section)\" :key=\"idx\">\n                            <DynamicFieldRenderer\n                                :fields=\"section.fields\"\n                                v-model=\"localData\"\n                            />\n                        </TabPanel>\n                    </TabPanels>\n                </TabGroup>\n\n                <Disclosure v-else-if=\"section.section_type === 'Accordion'\" v-slot=\"{ open }\">\n                    <DisclosureButton\n                        class=\"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2\"\n                    >\n                        <span>{{ section.section_title }}</span>\n                        <ChevronUpIcon\n                            :class=\"open ? 'rotate-180 transform' : ''\"\n                            class=\"h-5 w-5 text-blue-500\"\n                        />\n                    </DisclosureButton>\n                    <DisclosurePanel class=\"px-4 pt-4 pb-2 text-sm text-gray-500\">\n                        <DynamicFieldRenderer\n                            :fields=\"section.fields\"\n                            v-model=\"localData\"\n                        />\n                    </DisclosurePanel>\n                </Disclosure>\n\n                <div v-else class=\"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow\">\n                    <DynamicFieldRenderer\n                        :fields=\"section.fields\"\n                        v-model=\"localData\"\n                    />\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"mt-8 pt-4 border-t border-gray-200\">\n        <button\n            @click=\"logCurrentData\"\n            class=\"px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition\"\n        >\n             Log Current Data (Debug)\n        </button>\n        <p class=\"text-xs text-gray-500 mt-2\">Use this button to check if data is being saved correctly to localData/formData.</p>\n    </div>\n    </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { TabGroup, TabList, Tab, TabPanels, TabPanel, Disclosure, DisclosureButton, DisclosurePanel } from '@headlessui/vue'\nimport { ChevronUpIcon } from '@heroicons/vue/20/solid'\nimport DynamicFieldRenderer from './DynamicFieldRenderer.vue'\n// The import for the utility function is commented out to effectively disable the filter\n// import { isSectionVisible } from '../utils/conditionalLogic'\n\nconst props = defineProps({\n    stepConfig: {\n        type: Object,\n        required: true\n    },\n    modelValue: {\n        type: Object,\n        required: true\n    },\n    stepDescription: {\n        type: String,\n        default: ''\n    }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst localData = computed({\n    get: () => props.modelValue,\n    set: (value) => emit('update:modelValue', value)\n})\n\n// === DEBUG CHANGE 1: Conditional Visibility Filter DISABLED ===\nconst visibleSections = computed(() => {\n    if (!props.stepConfig.sections) return []\n\n    // Temporarily return all sections to check if conditional logic is hiding them.\n    return props.stepConfig.sections // .filter(section => {\n    //  return isSectionVisible(section, localData.value)\n    // })\n})\n// =============================================================\n\n// Get tabs for tab-based sections (placeholder)\nconst getTabsForSection = (section) => {\n    // For now, return single tab\n    // In future, could parse section structure for multiple tabs\n    return [section.section_title]\n}\n\n// === DEBUG CHANGE 2: Add Debug Function ===\nconst logCurrentData = () => {\n    // Stringify and parse to clone the object and ensure reactivity is not confusing the log\n    console.log('--- DYNAMIC STEP DATA LOG ---')\n    console.log('Full Form Data (localData):', JSON.parse(JSON.stringify(localData.value)))\n    console.log('-----------------------------')\n    alert('Data logged to console. Check browser console (F12) for the Full Form Data.')\n}\n// ===========================================\n\n// Initialize default values\nwatch(() => props.stepConfig, (config) => {\n    if (!config.sections) return\n\n    config.sections.forEach(section => {\n        section.fields.forEach(field => {\n            if (field.default_value && !localData.value[field.field_name]) {\n                // To safely update the computed 'localData' (which runs an emit to update the parent's store)\n                const newLocalData = { ...localData.value }; \n\n                if (field.default_value === 'Today' && field.field_type === 'Date') {\n                    newLocalData[field.field_name] = new Date().toISOString().split('T')[0];\n                } else {\n                    newLocalData[field.field_name] = field.default_value;\n                }\n                \n                // Emit the new object to update the parent's modelValue/store.formData\n                emit('update:modelValue', newLocalData);\n            }\n        })\n    })\n}, { immediate: true, deep: true })\n</script>\n\n<style scoped>\n.dynamic-step {\n    max-width: 100%;\n}\n\n.section {\n    margin-bottom: 2rem;\n    scroll-margin-top: 100px; /* For smooth scrolling with fixed headers */\n}\n\n.section-content {\n    margin-top: 1rem;\n}\n\n/* Enhanced tab styling */\n:deep(.tab-active) {\n    background: white;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n/* Smooth transitions for all interactive elements */\n.section-content > div {\n    transition: all 0.2s ease-in-out;\n}\n</style>","<template>\n  <div class=\"px-4 sm:px-0\">\n    <h2 class=\"text-xl sm:text-2xl font-bold text-gray-900 mb-2\">Review & Submit</h2>\n    <p class=\"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8\">Review your application details before submitting</p>\n\n    <div class=\"space-y-4 sm:space-y-6\">\n      <!-- Application Summary -->\n      <div class=\"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6\">\n        <div class=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-0\">\n          <div>\n            <h3 class=\"text-base sm:text-lg font-semibold text-blue-900\">{{ requestTypeName }}</h3>\n            <p class=\"text-xs sm:text-sm text-blue-700 mt-1\">{{ councilName }}</p>\n          </div>\n          <div class=\"sm:text-right\">\n            <div class=\"text-xs sm:text-sm text-blue-600 font-medium\">Application Fee</div>\n            <div class=\"text-xl sm:text-2xl font-bold text-blue-900\">{{ applicationFee }}</div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Applicant Details -->\n      <div class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n        <div class=\"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200\">\n          <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Applicant Details</h3>\n        </div>\n        <div class=\"p-4 sm:p-6 space-y-3\">\n          <div class=\"grid md:grid-cols-2 gap-4\">\n            <div>\n              <span class=\"text-sm text-gray-500\">Name:</span>\n              <p class=\"font-medium\">{{ modelValue.requester_name || 'Not provided' }}</p>\n            </div>\n            <div>\n              <span class=\"text-sm text-gray-500\">Email:</span>\n              <p class=\"font-medium\">{{ modelValue.requester_email || 'Not provided' }}</p>\n            </div>\n            <div>\n              <span class=\"text-sm text-gray-500\">Phone:</span>\n              <p class=\"font-medium\">{{ modelValue.requester_phone || 'Not provided' }}</p>\n            </div>\n            <div v-if=\"modelValue.applicant_company\">\n              <span class=\"text-sm text-gray-500\">Company:</span>\n              <p class=\"font-medium\">{{ modelValue.applicant_company }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Property Details (only show if request type has property information) -->\n      <div v-if=\"hasPropertyDetails\" class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n        <div class=\"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200\">\n          <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Property Details</h3>\n        </div>\n        <div class=\"p-4 sm:p-6\">\n          <div v-if=\"modelValue.property_address\" class=\"space-y-2\">\n            <div>\n              <span class=\"text-sm text-gray-500\">Address:</span>\n              <p class=\"font-medium\">{{ modelValue.property_address }}</p>\n            </div>\n            <div v-if=\"modelValue.legal_description\">\n              <span class=\"text-sm text-gray-500\">Legal Description:</span>\n              <p class=\"font-medium\">{{ modelValue.legal_description }}</p>\n            </div>\n          </div>\n          <p v-else class=\"text-gray-500\">No property selected</p>\n        </div>\n      </div>\n\n      <!-- Delivery Preference (only show if request type collects payment) -->\n      <div v-if=\"requestTypeDetails?.collect_payment\" class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n        <div class=\"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200\">\n          <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Delivery & Payment</h3>\n        </div>\n        <div class=\"p-4 sm:p-6 space-y-3\">\n          <div>\n            <span class=\"text-sm text-gray-500\">Delivery Preference:</span>\n            <p class=\"font-medium\">{{ modelValue.delivery_preference || 'Not selected' }}</p>\n          </div>\n          <div>\n            <span class=\"text-sm text-gray-500\">Invoice To:</span>\n            <p class=\"font-medium\">{{ modelValue.invoice_to || 'Not specified' }}</p>\n          </div>\n        </div>\n      </div>\n\n      <!-- Dynamic Review Sections (for configured request types) -->\n      <template v-if=\"usesConfigurableSteps && reviewSections.length > 0\">\n        <div\n          v-for=\"step in reviewSections\"\n          :key=\"step.step_code\"\n          class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\"\n        >\n          <div class=\"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200\">\n            <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">{{ step.step_title }}</h3>\n          </div>\n          <div class=\"p-4 sm:p-6 space-y-4\">\n            <div\n              v-for=\"section in step.sections.filter(s => s.show_on_review)\"\n              :key=\"section.section_code\"\n            >\n              <h4 v-if=\"section.section_title\" class=\"text-sm font-medium text-gray-700 mb-2\">\n                {{ section.section_title }}\n              </h4>\n              <div class=\"grid md:grid-cols-2 gap-4\">\n                <div\n                  v-for=\"field in section.fields.filter(f => f.show_on_review)\"\n                  :key=\"field.field_name\"\n                >\n                  <span class=\"text-sm text-gray-500\">{{ field.review_label || field.field_label }}:</span>\n                  <p class=\"font-medium\">{{ formatFieldValue(field, modelValue[field.field_name]) }}</p>\n                </div>\n              </div>\n            </div>\n            <p v-if=\"!hasReviewContent(step)\" class=\"text-gray-500 text-sm\">\n              No information to display for review\n            </p>\n          </div>\n        </div>\n      </template>\n\n      <!-- Resource Consent Specific Details -->\n      <template v-if=\"isResourceConsent\">\n        <!-- Consent Types -->\n        <div class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n          <div class=\"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200\">\n            <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Consent Types & Activity Status</h3>\n          </div>\n          <div class=\"p-4 sm:p-6\">\n            <div class=\"space-y-3\">\n              <div>\n                <span class=\"text-sm text-gray-500\">Consent Types:</span>\n                <div class=\"mt-2 flex flex-wrap gap-2\">\n                  <span\n                    v-if=\"modelValue.consent_type_land_use\"\n                    class=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"\n                  >\n                    Land Use Consent\n                  </span>\n                  <span\n                    v-if=\"modelValue.consent_type_subdivision\"\n                    class=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium\"\n                  >\n                    Subdivision Consent\n                  </span>\n                  <span\n                    v-if=\"modelValue.consent_type_discharge\"\n                    class=\"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"\n                  >\n                    Discharge Permit\n                  </span>\n                  <span\n                    v-if=\"modelValue.consent_type_water\"\n                    class=\"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium\"\n                  >\n                    Water Permit\n                  </span>\n                  <span\n                    v-if=\"modelValue.consent_type_coastal\"\n                    class=\"px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium\"\n                  >\n                    Coastal Permit\n                  </span>\n                  <span v-if=\"!hasAnyConsentType\" class=\"text-gray-500\">\n                    None selected\n                  </span>\n                </div>\n              </div>\n              <div>\n                <span class=\"text-sm text-gray-500\">Activity Status:</span>\n                <div class=\"mt-1 inline-flex items-center\">\n                  <span\n                    class=\"px-3 py-1 rounded-full text-sm font-medium\"\n                    :class=\"activityStatusClass\"\n                  >\n                    {{ modelValue.activity_status_type || 'Not specified' }}\n                  </span>\n                </div>\n              </div>\n              <div v-if=\"modelValue.activity_title\">\n                <span class=\"text-sm text-gray-500\">Activity Title:</span>\n                <p class=\"font-medium break-words\">{{ modelValue.activity_title }}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Natural Hazards -->\n        <div v-if=\"hasNaturalHazards\" class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n          <div class=\"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200\">\n            <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Natural Hazards</h3>\n          </div>\n          <div class=\"p-4 sm:p-6\">\n            <div class=\"flex flex-wrap gap-2\">\n              <span\n                v-if=\"modelValue.hazard_flooding\"\n                class=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium inline-flex items-center gap-1\"\n              >\n                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707\" />\n                </svg>\n                Flood Hazard\n              </span>\n              <span\n                v-if=\"modelValue.hazard_earthquake\"\n                class=\"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium inline-flex items-center gap-1\"\n              >\n                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                </svg>\n                Earthquake/Fault Line\n              </span>\n              <span\n                v-if=\"modelValue.hazard_landslip\"\n                class=\"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium inline-flex items-center gap-1\"\n              >\n                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\n                </svg>\n                Landslip/Slope Instability\n              </span>\n              <span\n                v-if=\"modelValue.hazard_coastal\"\n                class=\"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium inline-flex items-center gap-1\"\n              >\n                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5\" />\n                </svg>\n                Coastal Hazard\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Consultation & Affected Parties -->\n        <div v-if=\"hasConsultation\" class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n          <div class=\"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200\">\n            <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Consultation & Affected Parties</h3>\n          </div>\n          <div class=\"p-4 sm:p-6\">\n            <div class=\"space-y-3\">\n              <div>\n                <span class=\"text-sm text-gray-500\">Consultation Undertaken:</span>\n                <p class=\"font-medium\">{{ modelValue.consultation_undertaken || 'Not specified' }}</p>\n              </div>\n              <div v-if=\"modelValue.consultation_summary\">\n                <span class=\"text-sm text-gray-500\">Consultation Summary:</span>\n                <p class=\"text-sm mt-1 line-clamp-3\">{{ modelValue.consultation_summary }}</p>\n              </div>\n              <div v-if=\"modelValue.affected_parties_details\">\n                <span class=\"text-sm text-gray-500\">Affected Parties:</span>\n                <p class=\"text-sm mt-1 line-clamp-3\">{{ stripHtml(modelValue.affected_parties_details) }}</p>\n              </div>\n              <div class=\"flex items-center gap-2\">\n                <svg\n                  class=\"w-5 h-5\"\n                  :class=\"modelValue.written_approvals_obtained ? 'text-green-600' : 'text-gray-400'\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <span :class=\"modelValue.written_approvals_obtained ? 'text-gray-900' : 'text-gray-500'\">\n                  Written Approvals {{ modelValue.written_approvals_obtained ? 'Obtained' : 'Not Obtained' }}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- AEE Summary -->\n        <div class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n          <div class=\"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200\">\n            <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Assessment of Environmental Effects</h3>\n          </div>\n          <div class=\"p-4 sm:p-6\">\n            <div class=\"space-y-4\">\n              <div v-if=\"modelValue.activity_description\">\n                <span class=\"text-sm text-gray-500\">Activity Description:</span>\n                <div class=\"text-sm mt-1 line-clamp-3\" v-html=\"modelValue.activity_description\"></div>\n              </div>\n              <div v-if=\"modelValue.aee_full_assessment\">\n                <span class=\"text-sm text-gray-500\">Full Assessment:</span>\n                <div class=\"text-sm mt-1 line-clamp-3\" v-html=\"modelValue.aee_full_assessment\"></div>\n              </div>\n              <div v-if=\"modelValue.positive_effects_description\">\n                <span class=\"text-sm text-gray-500\">Positive Effects:</span>\n                <p class=\"text-sm mt-1 line-clamp-3\">{{ modelValue.positive_effects_description }}</p>\n              </div>\n              <div v-if=\"modelValue.effects_visual_amenity || modelValue.effects_traffic_parking || modelValue.effects_noise\">\n                <span class=\"text-sm text-gray-500\">Adverse Effects Summary:</span>\n                <ul class=\"text-sm mt-1 space-y-1 list-disc list-inside\">\n                  <li v-if=\"modelValue.effects_visual_amenity\">Visual/Amenity: {{ truncate(modelValue.effects_visual_amenity, 50) }}</li>\n                  <li v-if=\"modelValue.effects_traffic_parking\">Traffic/Parking: {{ truncate(modelValue.effects_traffic_parking, 50) }}</li>\n                  <li v-if=\"modelValue.effects_noise\">Noise: {{ truncate(modelValue.effects_noise, 50) }}</li>\n                </ul>\n              </div>\n              <div v-if=\"modelValue.mitigation_measures\">\n                <span class=\"text-sm text-gray-500\">Mitigation Measures:</span>\n                <div class=\"text-sm mt-1 line-clamp-3\" v-html=\"modelValue.mitigation_measures\"></div>\n              </div>\n              <p v-if=\"!hasAEEContent\" class=\"text-gray-500 text-sm\">\n                AEE not yet completed\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Statutory Declarations -->\n        <div class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n          <div class=\"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200\">\n            <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Statutory Declarations</h3>\n          </div>\n          <div class=\"p-4 sm:p-6\">\n            <div class=\"space-y-2\">\n              <div class=\"flex items-start gap-2\">\n                <svg\n                  class=\"w-5 h-5 flex-shrink-0 mt-0.5\"\n                  :class=\"(modelValue.declaration_accuracy || modelValue.declaration_rma_compliance) ? 'text-green-600' : 'text-gray-400'\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <span class=\"text-sm\" :class=\"(modelValue.declaration_accuracy || modelValue.declaration_rma_compliance) ? 'text-gray-900' : 'text-gray-500'\">\n                  Declaration of Accuracy & RMA Compliance\n                </span>\n              </div>\n              <div class=\"flex items-start gap-2\">\n                <svg\n                  class=\"w-5 h-5 flex-shrink-0 mt-0.5\"\n                  :class=\"(modelValue.declaration_authority || modelValue.declaration_authorized) ? 'text-green-600' : 'text-gray-400'\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <span class=\"text-sm\" :class=\"(modelValue.declaration_authority || modelValue.declaration_authorized) ? 'text-gray-900' : 'text-gray-500'\">\n                  Declaration of Authority to Apply\n                </span>\n              </div>\n              <div class=\"flex items-start gap-2\">\n                <svg\n                  class=\"w-5 h-5 flex-shrink-0 mt-0.5\"\n                  :class=\"(modelValue.declaration_acknowledgment || modelValue.declaration_public_information) ? 'text-green-600' : 'text-gray-400'\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <span class=\"text-sm\" :class=\"(modelValue.declaration_acknowledgment || modelValue.declaration_public_information) ? 'text-gray-900' : 'text-gray-500'\">\n                  Public Information & Privacy Acknowledgment\n                </span>\n              </div>\n              <div v-if=\"modelValue.requester_signature\" class=\"mt-4 pt-4 border-t border-gray-200\">\n                <span class=\"text-sm text-gray-500\">Signed by:</span>\n                <p class=\"font-medium\">{{ modelValue.requester_signature }}</p>\n                <p v-if=\"modelValue.signature_date\" class=\"text-sm text-gray-500\">\n                  Date: {{ formatSignatureDate(modelValue.signature_date) }}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </template>\n\n      <!-- Important Notice -->\n      <div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6\">\n        <div class=\"flex items-start gap-2 sm:gap-3\">\n          <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-yellow-600 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n          </svg>\n          <div>\n            <h4 class=\"font-semibold text-yellow-900 text-sm sm:text-base\">Before You Submit</h4>\n            <ul class=\"mt-2 text-xs sm:text-sm text-yellow-800 space-y-1 list-disc list-inside\">\n              <li>Review all information carefully for accuracy and completeness</li>\n              <li>Ensure all required fields are completed</li>\n              <li>For Resource Consent applications, verify all statutory declarations are confirmed</li>\n              <li>Once submitted, you cannot edit the application (you may need to withdraw and resubmit)</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <!-- Completeness Check -->\n      <div v-if=\"!isComplete\" class=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n        <div class=\"flex items-start gap-2 sm:gap-3\">\n          <svg class=\"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <div>\n            <h5 class=\"font-semibold text-red-900 text-xs sm:text-sm\">Application Incomplete</h5>\n            <p class=\"text-red-800 text-xs sm:text-sm mt-1\">\n              Please complete all required sections before submitting. Use the Previous button to go back and fill in missing information.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { defineProps, computed } from 'vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: Object,\n    required: true\n  },\n  councilName: {\n    type: String,\n    default: 'Council'\n  },\n  requestTypeName: {\n    type: String,\n    default: 'Application'\n  },\n  applicationFee: {\n    type: String,\n    default: 'TBD'\n  },\n  isResourceConsent: {\n    type: Boolean,\n    default: false\n  },\n  stepConfigs: {\n    type: Array,\n    default: () => []\n  },\n  usesConfigurableSteps: {\n    type: Boolean,\n    default: false\n  },\n  requestTypeDetails: {\n    type: Object,\n    default: null\n  }\n})\n\n// Filter steps that should show on review\nconst reviewSections = computed(() => {\n  if (!props.usesConfigurableSteps || !props.stepConfigs) {\n    return []\n  }\n\n  return props.stepConfigs.filter(step => step.show_on_review)\n})\n\n// Check if property details should be displayed\nconst hasPropertyDetails = computed(() => {\n  // Always show for resource consent\n  if (props.isResourceConsent) {\n    return true\n  }\n\n  // Check if property data actually exists in the request\n  return !!(props.modelValue.property || props.modelValue.property_address)\n})\n\n// Check if a step has any content to show on review\nconst hasReviewContent = (step) => {\n  if (!step.sections) return false\n\n  for (const section of step.sections) {\n    if (!section.show_on_review) continue\n\n    for (const field of section.fields) {\n      if (field.show_on_review && props.modelValue[field.field_name]) {\n        return true\n      }\n    }\n  }\n\n  return false\n}\n\n// Format field value for display\nconst formatFieldValue = (field, value) => {\n  if (value === undefined || value === null || value === '') {\n    return 'Not provided'\n  }\n\n  // Check field type\n  if (field.field_type === 'Check') {\n    return value ? 'Yes' : 'No'\n  }\n\n  if (field.field_type === 'Date' && value) {\n    // Format date nicely\n    try {\n      return new Date(value).toLocaleDateString('en-NZ', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      })\n    } catch (e) {\n      return value\n    }\n  }\n\n  if (field.field_type === 'Currency' && value) {\n    return `${Number(value).toLocaleString('en-PH', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`\n  }\n\n  if (field.field_type === 'Select') {\n    return value\n  }\n\n  if (field.field_type === 'Attach' || field.field_type === 'Attach Image') {\n    return value ? ' File attached' : 'Not provided'\n  }\n\n  return value\n}\n\n// RC-specific computed properties\nconst hasAnyConsentType = computed(() => {\n  return !!(\n    props.modelValue.consent_type_land_use ||\n    props.modelValue.consent_type_subdivision ||\n    props.modelValue.consent_type_discharge ||\n    props.modelValue.consent_type_water ||\n    props.modelValue.consent_type_coastal\n  )\n})\n\nconst activityStatusClass = computed(() => {\n  const status = props.modelValue.activity_status_type\n  if (status === 'Permitted') return 'bg-green-100 text-green-800'\n  if (status === 'Controlled') return 'bg-blue-100 text-blue-800'\n  if (status === 'Restricted Discretionary') return 'bg-yellow-100 text-yellow-800'\n  if (status === 'Discretionary') return 'bg-orange-100 text-orange-800'\n  if (status === 'Non-Complying') return 'bg-red-100 text-red-800'\n  if (status === 'Prohibited') return 'bg-gray-800 text-white'\n  return 'bg-gray-100 text-gray-800'\n})\n\nconst hasNaturalHazards = computed(() => {\n  return !!(\n    props.modelValue.hazard_flooding ||\n    props.modelValue.hazard_earthquake ||\n    props.modelValue.hazard_landslip ||\n    props.modelValue.hazard_coastal\n  )\n})\n\nconst hasConsultation = computed(() => {\n  return !!(\n    props.modelValue.consultation_undertaken ||\n    props.modelValue.consultation_summary ||\n    props.modelValue.affected_parties_details ||\n    props.modelValue.written_approvals_obtained\n  )\n})\n\nconst hasAEEContent = computed(() => {\n  return !!(\n    props.modelValue.activity_description ||\n    props.modelValue.aee_full_assessment ||\n    props.modelValue.positive_effects_description ||\n    props.modelValue.effects_visual_amenity ||\n    props.modelValue.effects_traffic_parking ||\n    props.modelValue.effects_noise ||\n    props.modelValue.mitigation_measures ||\n    // Legacy fields\n    props.modelValue.aee_activity_description ||\n    props.modelValue.aee_existing_environment ||\n    props.modelValue.assessment_of_effects ||\n    props.modelValue.aee_document\n  )\n})\n\n// Helper functions\nconst stripHtml = (html) => {\n  if (!html) return ''\n  const tmp = document.createElement('div')\n  tmp.innerHTML = html\n  return tmp.textContent || tmp.innerText || ''\n}\n\nconst truncate = (text, maxLength) => {\n  if (!text) return ''\n  const clean = stripHtml(text)\n  if (clean.length <= maxLength) return clean\n  return clean.substring(0, maxLength) + '...'\n}\n\nconst formatSignatureDate = (dateStr) => {\n  if (!dateStr) return ''\n  try {\n    return new Date(dateStr).toLocaleDateString('en-NZ', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    })\n  } catch (e) {\n    return dateStr\n  }\n}\n\nconst isComplete = computed(() => {\n  // Basic required fields\n  const hasBasicInfo = !!(\n    props.modelValue.council &&\n    props.modelValue.request_type &&\n    props.modelValue.requester_name &&\n    props.modelValue.requester_email &&\n    props.modelValue.property_address &&\n    props.modelValue.delivery_preference\n  )\n\n  // If RC, check additional requirements\n  if (props.isResourceConsent) {\n    const hasRCRequirements = !!(\n      hasAnyConsentType.value &&\n      props.modelValue.activity_status_type &&\n      props.modelValue.activity_description &&\n      props.modelValue.aee_full_assessment &&\n      props.modelValue.declaration_accuracy &&\n      props.modelValue.declaration_authority &&\n      props.modelValue.declaration_acknowledgment\n    )\n    return hasBasicInfo && hasRCRequirements\n  }\n\n  return hasBasicInfo\n})\n</script>\n\n<style scoped>\n.line-clamp-3 {\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n</style>\n","<template>\n    <div class=\"min-h-screen bg-gray-50\">\n        <header class=\"bg-white shadow-sm border-b border-gray-200\">\n            <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                <div class=\"flex items-center justify-between py-4\">\n                    <div class=\"flex items-center space-x-3\">\n                        <button @click=\"goBack\" class=\"text-gray-500 hover:text-gray-700\">\n                            <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                            </svg>\n                        </button>\n                        <div>\n                            <h1 class=\"text-xl font-bold text-gray-900\">New Application</h1>\n                        </div>\n                    </div>\n                    <div class=\"flex items-center gap-2\">\n                        <Button\n                            v-if=\"canSaveDraft\"\n                            @click=\"handleSaveDraft\"\n                            variant=\"outline\"\n                            theme=\"gray\"\n                            :loading=\"store.isSaving\"\n                        >\n                            Save Draft\n                        </Button>\n                        <Button\n                            v-if=\"canSaveDraft\"\n                            @click=\"handleSaveAndClose\"\n                            variant=\"outline\"\n                            theme=\"gray\"\n                            :loading=\"store.isSaving\"\n                        >\n                            Save and Close\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </header>\n\n        <div class=\"bg-white border-b border-gray-200\">\n            <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n                <RequestProgress\n                    :current-step=\"store.currentStep\"\n                    :total-steps=\"totalSteps\"\n                    :step-titles=\"stepTitles\"\n                />\n            </div>\n        </div>\n\n        <main class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n            <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\">\n                <div v-if=\"getCurrentStepTitle() === 'Council'\">\n                    <Step1CouncilSelection\n                        v-model=\"store.formData\"\n                        @council-change=\"onCouncilChange\"\n                    />\n                </div>\n\n                <div v-else-if=\"getCurrentStepTitle() === 'Type'\">\n                    <Step2RequestType\n                        v-model=\"store.formData\"\n                        :request-types=\"requestTypes\"\n                        @type-selected=\"selectRequestType\"\n                    />\n                </div>\n\n                <div v-else-if=\"getCurrentStepTitle() === 'Process Info'\">\n                    <Step3ProcessInfo\n                        :request-type-details=\"selectedRequestTypeDetails\"\n                        :council-name=\"getCouncilName()\"\n                        v-model=\"store.formData\"\n                        @continue=\"handleNext\"\n                    />\n                </div>\n\n                <div v-else-if=\"getCurrentStepTitle() === 'Review'\">\n                    <ReviewStep\n                        v-model=\"store.formData\"\n                        :request-type-config=\"store.requestTypeConfig\"\n                    />\n                </div>\n\n                <DynamicStepRenderer\n                    v-else-if=\"usesConfigurableSteps && getCurrentStepConfig()\"\n                    :stepConfig=\"getCurrentStepConfig()\"\n                    v-model=\"store.formData\"\n                />\n                \n                <div v-else>\n                    <h2 class=\"text-xl font-bold text-red-600\">ERROR: Step {{ store.currentStep }} Fallback Hit!</h2>\n                    <p class=\"mt-2\">The dynamic step condition failed to render. Check the following values:</p>\n                    <ul class=\"list-disc list-inside mt-2 space-y-1 text-sm text-gray-700\">\n                        <li><strong>Current Step Title:</strong> {{ getCurrentStepTitle() }}</li>\n                        <li><strong>Request Config Loaded:</strong> {{ !!store.requestTypeConfig }}</li>\n                        <li><strong>Calculated Total Steps:</strong> {{ totalSteps }}</li>\n                        <li><strong>Uses Configurable Steps:</strong> {{ usesConfigurableSteps }}</li>\n                        <li><strong>Current Step Config:</strong> {{ JSON.stringify(getCurrentStepConfig()) }}</li>\n                    </ul>\n                    <p class=\"mt-4 text-sm text-gray-500\">If 'Current Step Config' is not null, the issue is likely within DynamicStepRenderer or component registration.</p>\n                </div>\n            </div>\n\n            <!-- Council Meeting Banner (shown after Process Info step) -->\n            <div\n                v-if=\"shouldShowMeetingBanner\"\n                class=\"mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6 shadow-sm\"\n            >\n                <div class=\"flex items-start justify-between\">\n                    <div class=\"flex-1\">\n                        <div class=\"flex items-center gap-2 mb-2\">\n                            <svg class=\"w-5 h-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                            </svg>\n                            <h3 class=\"text-lg font-semibold text-gray-900\">Pre-Application Meeting Available</h3>\n                        </div>\n                        <p class=\"text-sm text-gray-700 mb-3\">\n                            Schedule a meeting with council planners to discuss your application before submitting.\n                            This optional step can help clarify requirements and improve your application.\n                        </p>\n                        <button\n                            @click=\"handleBookMeeting\"\n                            class=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium\"\n                        >\n                            Request Council Meeting\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <StepNavigation\n                :current-step=\"store.currentStep\"\n                :total-steps=\"totalSteps\"\n                :is-last-step=\"store.isLastStep\"\n                :can-go-next=\"canNavigateNext\"\n                :can-save-draft=\"canSaveDraft\"\n                :is-saving=\"store.isSaving\"\n                :is-submitting=\"store.isSubmitting\"\n                @next=\"handleNext\"\n                @previous=\"handlePrevious\"\n                @save-draft=\"handleSaveDraft\"\n                @submit=\"handleSubmit\"\n            />\n        </main>\n\n        <SaveDraftModal\n            v-model:show=\"showSaveDraftModal\"\n            :draft-id=\"store.currentRequestId\"\n        />\n\n        <ValidationErrorModal\n            v-model:show=\"showValidationModal\"\n            :errors=\"validationErrors\"\n        />\n\n        <BookMeetingModal\n            v-model:show=\"showMeetingModal\"\n            :request-id=\"store.currentRequestId\"\n            :request-type-code=\"store.formData.request_type\"\n            :council-code=\"store.formData.council\"\n            @booked=\"handleMeetingBooked\"\n        />\n\n        <SubmissionSuccessModal\n            :open=\"showSubmissionSuccessModal\"\n            :request-number=\"submissionResult?.request_number\"\n            :request-id=\"submissionResult?.request_id\"\n            :sla-info=\"submissionResult?.sla_info\"\n            @close=\"showSubmissionSuccessModal = false\"\n            @view-request=\"handleViewRequestFromModal\"\n            @go-to-dashboard=\"handleGoToDashboardFromModal\"\n        />\n    </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRoute, useRouter, onBeforeRouteLeave } from 'vue-router'\nimport { Button } from 'frappe-ui'\n\n// Store and composables\nimport { useRequestStore } from '../stores/requestStore'\nimport { useCouncilStore } from '../stores/councilStore'\nimport { useStepValidation } from '../composables/useStepValidation'\nimport { useUserProfile } from '../composables/useUserProfile'\n\n// Components\nimport RequestProgress from '../components/request/RequestProgress.vue'\nimport StepNavigation from '../components/request/StepNavigation.vue'\nimport SaveDraftModal from '../components/modals/SaveDraftModal.vue'\nimport ValidationErrorModal from '../components/modals/ValidationErrorModal.vue'\nimport BookMeetingModal from '../components/modals/BookMeetingModal.vue'\nimport SubmissionSuccessModal from '../components/modals/SubmissionSuccessModal.vue'\n\n// Step components\nimport Step1CouncilSelection from '../components/request-steps/Step1CouncilSelection.vue'\nimport Step2RequestType from '../components/request-steps/Step2RequestType.vue'\nimport Step3ProcessInfo from '../components/request-steps/Step3ProcessInfo.vue'\nimport DynamicStepRenderer from '../components/DynamicStepRenderer.vue'\nimport ReviewStep from '../components/request-steps/ReviewStep.vue'\n\nconst route = useRoute()\nconst router = useRouter()\n\n// Stores\nconst store = useRequestStore()\nconst councilStore = useCouncilStore()\n\n// Validation\nconst { errors: validationErrors, validateStep } = useStepValidation()\n\n// UI state\nconst showSaveDraftModal = ref(false)\nconst showValidationModal = ref(false)\nconst showMeetingModal = ref(false)\nconst showSubmissionSuccessModal = ref(false)\nconst submissionResult = ref(null)\nconst requestTypes = ref({ loading: false, data: [] })\nconst selectedRequestTypeDetails = ref(null)\n\n// Computed\nconst totalSteps = computed(() => {\n    if (store.requestTypeConfig?.steps) {\n        // Council (0) + Type (1) + Process Info (2) + Dynamic Steps + Review (Last)\n        return store.requestTypeConfig.steps.length + 4\n    }\n    return 4 // Default: Council, Type, Process Info, Review\n})\n\nconst stepTitles = computed(() => {\n    const titles = ['Council', 'Type', 'Process Info']\n    if (store.requestTypeConfig?.steps) {\n        titles.push(...store.requestTypeConfig.steps.map(s => s.step_title))\n    }\n    titles.push('Review') // Always add Review as the last step\n    return titles\n})\n\nconst usesConfigurableSteps = computed(() => {\n    return store.requestTypeConfig?.steps && store.requestTypeConfig.steps.length > 0\n})\n\nconst canNavigateNext = computed(() => {\n    // Always allow navigation for now (validation happens on attempt)\n    return true\n})\n\n/**\n * Can only save draft after:\n * - Step 1: Council selected\n * - Step 2: Request type selected\n * - Step 3: Process info read and confirmed\n * So allow saving from step 4 onwards (step index >= 3)\n */\nconst canSaveDraft = computed(() => {\n    return store.currentStep >= 3\n})\n\n// Get configuration for current step (for dynamic validation)\nconst currentStepConfig = computed(() => {\n    if (!store.requestTypeConfig?.steps) return null\n\n    // Steps 0-2 are fixed (Council, Type, Process Info)\n    // Dynamic steps start at index 3\n    const dynamicStepIndex = store.currentStep - 3\n\n    if (dynamicStepIndex >= 0 && dynamicStepIndex < store.requestTypeConfig.steps.length) {\n        return store.requestTypeConfig.steps[dynamicStepIndex]\n    }\n\n    return null\n})\n\n// Show meeting banner after Process Info (step 3) if council meetings are available\nconst shouldShowMeetingBanner = computed(() => {\n    return store.currentStep > 2 && // After Process Info step\n           store.currentStep < totalSteps.value - 1 && // Before Review step\n           store.requestTypeConfig?.council_meeting_available === 1\n})\n\n// Methods\nfunction handleBookMeeting() {\n    showMeetingModal.value = true\n}\n\nfunction handleMeetingBooked(meetingData) {\n    console.log('Meeting booked:', meetingData)\n    // Optionally show a success message or refresh data\n}\n\nfunction getCurrentStepTitle() {\n    const index = store.currentStep\n    if (index >= 0 && index < stepTitles.value.length) {\n        return stepTitles.value[index]\n    }\n    return ''\n}\n\nfunction getCurrentStepConfig() {\n    const index = store.currentStep\n    const dynamicStepsStart = 3;\n\n    // Check if the current step is within the dynamic steps range (3 up to totalSteps - 2)\n    // totalSteps - 1 is the Review step index.\n    if (index < dynamicStepsStart || index >= totalSteps.value - 1) {\n        return null\n    }\n\n    if (store.requestTypeConfig?.steps) {\n        const stepIndex = index - dynamicStepsStart\n\n        if (stepIndex >= 0 && stepIndex < store.requestTypeConfig.steps.length) {\n            return store.requestTypeConfig.steps[stepIndex]\n        }\n    }\n\n    return null\n}\n\nfunction getCouncilName() {\n    const councilCode = store.formData.council\n    if (!councilCode) return ''\n\n    const council = councilStore.councils.find(c => c.council_code === councilCode)\n    return council?.council_name || councilCode\n}\n\nasync function onCouncilChange(councilCode) {\n    // Load request types for selected council\n    requestTypes.value.loading = true\n    await councilStore.loadRequestTypesForCouncil(councilCode)\n    requestTypes.value = {\n        loading: false,\n        data: councilStore.requestTypes || []\n    }\n}\n\nasync function selectRequestType(requestTypeCode) {\n    // Store request type in formData (required for draft creation)\n    store.updateField('request_type', requestTypeCode)\n\n    // Load request type configuration\n    await store.initialize(requestTypeCode)\n    selectedRequestTypeDetails.value = store.requestTypeConfig\n\n    // Validate config loaded\n    if (!store.requestTypeConfig) {\n        console.error('[NewRequest] Failed to load request type config')\n        return\n    }\n}\n\nasync function handleNext() {\n    // Validation for Step 0 (Council Selection)\n    if (store.currentStep === 0 && !store.formData.council) {\n        alert('Please select a council before continuing.')\n        return\n    }\n\n    // Validation for Step 1 (Request Type Selection)\n    if (store.currentStep === 1 && !store.formData.request_type) {\n        alert('Please select a request type before continuing.')\n        return\n    }\n\n    // Validate current step before allowing navigation (for dynamic steps)\n    if (store.currentStep >= 2 && usesConfigurableSteps.value && currentStepConfig.value) {\n        const isValid = await validateStep(\n            currentStepConfig.value,\n            store.formData\n        )\n\n        if (!isValid) {\n            console.error('[NewRequest] Validation failed:', validationErrors.value)\n            showValidationModal.value = true\n            return // Block navigation\n        }\n    }\n\n    // Auto-save after Process Info step (step 2) to create draft\n    // This ensures the request has an ID for features like \"Book Meeting\" and \"Send Message\"\n    if (store.currentStep === 2 && !store.currentRequestId) {\n        console.log('[NewRequest] Auto-saving draft after Process Info step...')\n        console.log('[NewRequest] requestTypeConfig:', store.requestTypeConfig)\n        console.log('[NewRequest] usesConfigurableSteps:', usesConfigurableSteps.value)\n        console.log('[NewRequest] config steps:', store.requestTypeConfig?.steps)\n\n        await store.saveDraft()\n        console.log('[NewRequest] Draft saved with ID:', store.currentRequestId)\n\n        // Only redirect if there are NO dynamic steps configured\n        // If there are dynamic steps, user needs to fill them out first\n        if (!usesConfigurableSteps.value) {\n            // No dynamic steps - redirect to detail page\n            if (store.currentRequestId) {\n                console.log('[NewRequest] No dynamic steps configured, redirecting to detail page...')\n                router.push(`/request/${store.currentRequestId}`)\n                return // Don't call nextStep, the redirect will handle navigation\n            }\n        } else {\n            console.log('[NewRequest] Dynamic steps configured, continuing to next step...')\n        }\n    }\n\n    // Auto-save existing drafts before navigation\n    if (store.currentRequestId) {\n        await store.saveProgress()\n    }\n\n    store.nextStep()\n}\n\nfunction handlePrevious() {\n    store.previousStep()\n}\n\nasync function handleSaveDraft() {\n    try {\n        await store.saveDraft()\n        // Redirect to request detail page to show Send Message and Book Meeting buttons\n        if (store.currentRequestId) {\n            router.push(`/request/${store.currentRequestId}`)\n        } else {\n            showSaveDraftModal.value = true\n        }\n    } catch (error) {\n        console.error('Failed to save draft:', error)\n    }\n}\n\nasync function handleSaveAndClose() {\n    try {\n        await store.saveDraft()\n        store.reset()  // Clear state after successful save\n        // Redirect to dashboard\n        router.push({ name: 'Dashboard' })\n    } catch (error) {\n        console.error('Failed to save draft:', error)\n        // Don't reset on error - preserve state for retry\n    }\n}\n\nasync function handleSubmit() {\n    // Validation logic (omitted for brevity)\n\n    try {\n        const result = await store.submitRequest()\n\n        // Store submission result for modal\n        submissionResult.value = result\n\n        // Show success modal with SLA info\n        showSubmissionSuccessModal.value = true\n    } catch (error) {\n        console.error('Failed to submit request:', error)\n    }\n}\n\nfunction goBack() {\n    store.reset()  // Clear all state before navigation\n    router.push('/dashboard')\n}\n\n/**\n * Handle view request from success modal\n */\nfunction handleViewRequestFromModal(requestId) {\n    showSubmissionSuccessModal.value = false\n    router.push(`/request/${requestId}`)\n}\n\n/**\n * Handle go to dashboard from success modal\n */\nfunction handleGoToDashboardFromModal() {\n    showSubmissionSuccessModal.value = false\n    // Redirect to council-specific dashboard if available\n    const councilCode = store.formData.council\n    if (councilCode) {\n        router.push(`/council/${councilCode}/dashboard`)\n    } else {\n        router.push('/dashboard')\n    }\n}\n\n// Watch block for step changes\nwatch(() => store.currentStep, () => {\n    // Step changed - trigger reactivity\n}, { immediate: true })\n\n// Watch birth_date for age calculation (SPISC applications)\nwatch(() => store.formData.birth_date, (newDate) => {\n    if (newDate && store.formData.request_type?.includes('SPISC')) {\n        // Calculate age\n        const today = new Date()\n        const born = new Date(newDate)\n        let age = today.getFullYear() - born.getFullYear()\n        const m = today.getMonth() - born.getMonth()\n        if (m < 0 || (m === 0 && today.getDate() < born.getDate())) {\n            age--\n        }\n\n        // Update age in form data\n        store.updateField('age', age)\n\n        // Validate minimum age for SPISC (60 years)\n        if (age < 60) {\n            validationErrors.value['birth_date'] = 'Applicant must be 60 years or older for SPISC'\n        } else {\n            // Clear birth_date validation errors if age is valid\n            delete validationErrors.value['birth_date']\n        }\n    }\n})\n\n// Initialize\nonMounted(async () => {\n    const requestTypeCode = route.query.type\n    const draftId = route.query.draft\n    const councilCode = route.query.council\n    const isLocked = route.query.locked === 'true'\n\n    console.log('[NewRequest] Initialization - locked:', isLocked, 'council:', councilCode, 'type:', requestTypeCode)\n\n    // If starting fresh request (no draft ID), ensure clean state\n    if (!draftId && !route.query.draft) {\n        store.reset()  // Clear any lingering state\n    }\n\n    // Auto-fill user profile data for new requests (not drafts)\n    if (!draftId) {\n        const { getApplicationAutoFill, applyAutoFill } = useUserProfile()\n        try {\n            await getApplicationAutoFill()\n            applyAutoFill(store.formData, {\n                overrideExisting: false // Don't overwrite user input\n            })\n        } catch (error) {\n            console.warn('[NewRequest] Failed to load user profile for auto-fill:', error)\n        }\n    }\n\n    // Handle draft loading (this takes precedence)\n    if (draftId && requestTypeCode) {\n        await store.initialize(requestTypeCode, draftId)\n        selectedRequestTypeDetails.value = store.requestTypeConfig\n        // Draft loading sets the step automatically, so return early\n        return\n    }\n\n    // Handle locked request flow from council website (council + type both locked)\n    if (isLocked && councilCode && requestTypeCode && !draftId) {\n        console.log('[NewRequest] Locked flow detected - skipping to step 2')\n\n        // Set council (locked)\n        store.updateField('council', councilCode)\n\n        // Pre-load request types for this council\n        await onCouncilChange(councilCode)\n\n        // Initialize request type config\n        await store.initialize(requestTypeCode)\n        selectedRequestTypeDetails.value = store.requestTypeConfig\n        store.updateField('request_type', requestTypeCode)\n\n        // Skip directly to step 2 (Process Info)\n        store.currentStep = 2\n        console.log('[NewRequest] Locked flow complete - currentStep:', store.currentStep)\n        return\n    }\n\n    // Handle council pre-selection from URL (not locked, just pre-selected)\n    if (councilCode && !draftId && !isLocked) {\n        store.updateField('council', councilCode)\n\n        // Pre-load request types for this council\n        await onCouncilChange(councilCode)\n\n        // If request type is also provided, advance to step 2\n        if (requestTypeCode) {\n            await store.initialize(requestTypeCode)\n            selectedRequestTypeDetails.value = store.requestTypeConfig\n            store.updateField('request_type', requestTypeCode)\n            store.currentStep = 2\n        } else {\n            // Just council provided, advance to step 1 (Type selection)\n            store.currentStep = 1\n        }\n    } else if (requestTypeCode && !draftId && !councilCode) {\n        // Just request type provided (unusual case, but handle it)\n        await store.initialize(requestTypeCode)\n        selectedRequestTypeDetails.value = store.requestTypeConfig\n        store.updateField('request_type', requestTypeCode)\n    }\n})\n\n// Navigation guard - warn about unsaved changes\nonBeforeRouteLeave((to, from, next) => {\n    // Allow navigation if submitting or no draft exists\n    if (store.isSubmitting || !store.currentRequestId) {\n        store.reset()  // Clear state when leaving without draft\n        next()\n        return\n    }\n\n    // Check if there are unsaved changes\n    const hasChanges = store.formData && Object.keys(store.formData).some(key =>\n        store.formData[key] !== undefined && store.formData[key] !== null && store.formData[key] !== ''\n    )\n\n    if (hasChanges && !confirm('You have unsaved changes. Do you want to leave without saving?')) {\n        next(false) // Cancel navigation\n    } else {\n        // User confirmed or no unsaved changes\n        if (!to.path.includes('/request/')) {\n            store.reset()  // Clear state when navigating away from requests\n        }\n        next() // Allow navigation\n    }\n})\n</script>"],"names":["r","e","n","s","f","i","l","u","o","$","T","O","I","k","U","N","b","t","d","E","x","a","p","R","j","m","y","__objRest","c","g","Q","P","h","w","H","D","S","C","_a","K","M","V","L","v","B","F","te","le","G","me","W","_","J","A","z","__spreadValues","ee","pe","xe","Z","Y","Ie","ye","X","q","useRequestStore","defineStore","state","_b","stepIndex","requestTypeCode","draftId","__async","configResource","requestService","resolve","checkLoaded","error","resource","draft","sanitizedData","key","value","result","fieldName","fields","isValid","validateEmail","validatePhone","validateUrl","validateNumber","evaluateCustomValidation","expression","formData","cleanExpression","validateField","validation","useStepValidation","errors","ref","isValidating","validateConfigField","fieldConfig","utilValidateField","validateStep","stepConfig","section","evaluateDependsOn","field","addressLineData","evaluateCondition","clearErrors","clearFieldError","userProfile","loading","useUserProfile","loadUserProfile","headers","err","defaultProperty","computed","defaultCouncil","getApplicationAutoFill","profile","autoFillData","prop","applyAutoFill","options","overrideExisting","fieldsToSkip","getAllProperties","getAllCouncils","getAllClients","isProfileComplete","hasBasicInfo","_c","profileCompletionPercentage","completed","total","props","__props","progressPercentage","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","emit","__emit","handleNext","handlePrevious","handleSaveDraft","handleSubmit","_createBlock","_unref","Button","_cache","_createTextVNode","router","useRouter","isOpen","handleClose","handleViewDraft","Dialog","$event","errorList","message","_Fragment","_renderList","index","formatDate","dateStr","handleViewRequest","handleGoToDashboard","_hoisted_7","_hoisted_8","_createVNode","updateCouncil","council","__spreadProps","CouncilSelector","selectType","type","updatedValue","_normalizeClass","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","handleContinue","session","currentPath","_hoisted_13","_hoisted_15","render","_ctx","fileInput","videoElement","showCamera","capturedImage","mediaStream","uploading","uploadProgress","files","triggerFileInput","handleFileSelect","event","selectedFiles","processFiles","validFiles","file","formatFileSize","preview","createImagePreview","newFiles","uploadFiles","reader","filesToUpload","fileData","progressInterval","removeFile","openCamera","startCamera","stream","capturePhoto","video","canvas","retakePhoto","usePhoto","blob","closeCamera","track","bytes","sizes","_hoisted_14","_hoisted_16","_TransitionGroup","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_Teleport","_hoisted_26","_hoisted_27","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_33","_hoisted_32","localAddress","provinces","municipalitiesData","barangaysData","municipalities","barangays","fullAddress","parts","onProvinceChange","updateAddress","onMunicipalityChange","onMounted","watch","newVal","province","_vModelSelect","municipality","barangay","_hoisted_20","_vModelText","_hoisted_25","showPropertySelector","selectedPropertyId","saveToProfile","userProperties","selectedProperty","formatPropertyOption","property","formatPropertyAddress","onPropertySelected","onAddressChange","newAddress","editProperty","deleteProperty","PhilippinesAddressInput","showTooltip","tooltipPositionClass","arrowPositionClass","_renderSlot","_Transition","isFieldVisible","localData","visibleFields","parentSection","isInAddressSection","addressComponentFields","isAddressField","fieldLabel","addressFieldNames","addressSections","addressLabels","label","getPlaceholder","getFieldIcon","getSelectOptions","optionsString","opt","validationErrors","handleFieldValidation","getValidationError","PropertyAddressSelector","Tooltip","option","_hoisted_28","_hoisted_34","_hoisted_35","_hoisted_37","_hoisted_38","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_44","_hoisted_45","_hoisted_47","_hoisted_48","_hoisted_50","_hoisted_51","_hoisted_53","_hoisted_54","_hoisted_56","_hoisted_57","_hoisted_59","_hoisted_60","_hoisted_61","CameraUpload","_hoisted_62","_hoisted_63","visibleSections","getTabsForSection","logCurrentData","config","newLocalData","TabGroup","TabList","tab","idx","Tab","selected","_withCtx","TabPanels","TabPanel","DynamicFieldRenderer","Disclosure","open","DisclosureButton","ChevronUpIcon","DisclosurePanel","reviewSections","step","hasPropertyDetails","hasReviewContent","formatFieldValue","hasAnyConsentType","activityStatusClass","status","hasNaturalHazards","hasConsultation","hasAEEContent","stripHtml","html","tmp","truncate","text","maxLength","clean","formatSignatureDate","isComplete","hasRCRequirements","_hoisted_36","_hoisted_39","_hoisted_43","_hoisted_46","_hoisted_49","_hoisted_52","_hoisted_55","_hoisted_58","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_70","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_79","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","route","useRoute","store","councilStore","useCouncilStore","showSaveDraftModal","showValidationModal","showMeetingModal","showSubmissionSuccessModal","submissionResult","requestTypes","selectedRequestTypeDetails","totalSteps","stepTitles","titles","usesConfigurableSteps","canNavigateNext","canSaveDraft","currentStepConfig","dynamicStepIndex","shouldShowMeetingBanner","handleBookMeeting","handleMeetingBooked","meetingData","getCurrentStepTitle","getCurrentStepConfig","dynamicStepsStart","getCouncilName","councilCode","onCouncilChange","selectRequestType","handleSaveAndClose","goBack","handleViewRequestFromModal","requestId","handleGoToDashboardFromModal","newDate","today","born","age","isLocked","onBeforeRouteLeave","to","from","next","RequestProgress","Step1CouncilSelection","Step2RequestType","Step3ProcessInfo","ReviewStep","DynamicStepRenderer","StepNavigation","SaveDraftModal","ValidationErrorModal","BookMeetingModal","SubmissionSuccessModal"],"mappings":"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EACR,KAAK,SACL,MAAM,uMAENpF,EAAsD,MAAA,CAAjD,MAAM,oCAAoC,EAAA,KAAA,EAAA,ioCCjB/D,MAAMN,EAAQC,EAWRY,EAAOC,EAEPwG,EAAe9J,EAAI,CACvB,OAAQ,GACR,SAAU,GACV,aAAc,GACd,SAAU,GACV,QAAS,EACX,CAAC,EAGK+J,EAAY,CAChB,eACA,QACA,SACA,SACA,UACA,WACA,WACA,SACA,OACA,gBACA,UACA,SACA,oBACA,aACA,OACF,EAGMC,EAAqB,CACzB,eAAgB,CACd,cACA,cACA,cACA,aACA,cACA,mBACA,aACA,iBACA,iBACA,kBACA,gBACA,eACA,eACA,kBACA,gBACA,gBACA,SACJ,EACE,MAAS,CACP,SACA,gBACA,SACA,aACA,YACA,wBACA,SACA,UACA,WACA,SACA,UACA,QACA,SACA,OACJ,EACE,OAAU,CACR,cACA,cACA,kBACA,YACA,gBACA,sBACA,gBACA,SACA,QACA,WACA,UACA,QACA,MACJ,CACA,EAGMC,EAAgB,CACpB,OAAU,CACR,UACA,WACA,QACA,aACA,WACA,YACA,aACA,SACA,YACA,QACA,UACA,WACA,OACJ,EACE,cAAe,CACb,SACA,aACA,SACA,OACA,WACA,YACA,SACA,WACA,aACA,aACA,cACA,YACA,aACA,aACA,OACJ,EACE,cAAe,CACb,iBACA,aACA,gBACA,eACA,QACA,WACA,WACA,aACA,YACA,UACA,mBACJ,CACA,EAEMC,EAAiB7I,EAAS,IACzByI,EAAa,MAAM,SACjBE,EAAmBF,EAAa,MAAM,QAAQ,GAAK,CAAA,EADjB,CAAA,CAE1C,EAEKK,EAAY9I,EAAS,IACpByI,EAAa,MAAM,aACjBG,EAAcH,EAAa,MAAM,YAAY,GAAK,CAAC,wCAAwC,EADrD,CAAA,CAE9C,EAEKM,EAAc/I,EAAS,IAAM,CACjC,MAAMgJ,EAAQ,CAAA,EACd,OAAIP,EAAa,MAAM,QAAQO,EAAM,KAAKP,EAAa,MAAM,MAAM,EAC/DA,EAAa,MAAM,UAAUO,EAAM,KAAK,SAASP,EAAa,MAAM,QAAQ,EAAE,EAC9EA,EAAa,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","x_google_ignoreList":[0,1,2,3,16]}