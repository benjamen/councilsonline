var ts=Object.defineProperty,ss=Object.defineProperties;var ls=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var vt=(l,c,g)=>c in l?ts(l,c,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[c]=g,E=(l,c)=>{for(var g in c||(c={}))gt.call(c,g)&&vt(l,g,c[g]);if(Ie)for(var g of Ie(c))ft.call(c,g)&&vt(l,g,c[g]);return l},Ce=(l,c)=>ss(l,ls(c));var fe=(l,c)=>{var g={};for(var b in l)gt.call(l,b)&&c.indexOf(b)<0&&(g[b]=l[b]);if(l!=null&&Ie)for(var b of Ie(l))c.indexOf(b)<0&&ft.call(l,b)&&(g[b]=l[b]);return g};var K=(l,c,g)=>new Promise((b,r)=>{var k=w=>{try{p(g.next(w))}catch($){r($)}},y=w=>{try{p(g.throw(w))}catch($){r($)}},p=w=>w.done?b(w.value):Promise.resolve(w.value).then(k,y);p((g=g.apply(l,c)).next())});import{r as h,q as de,x as tt,y as U,z as ce,j as T,A as He,B as ve,C as Le,E as os,G as Ue,H as ze,J as as,K as xe,L as Ve,M as X,N as Ee,O as Oe,P as ns,Q as ht,R as se,S as $e,T as rs,F as z,U as Be,V as is,W as us,X as ye,Y as re,c as n,o as a,a as e,b as W,m as O,Z as I,d as f,t as m,f as wt,g as me,l as M,$ as ee,h as R,n as be,v as ie,a0 as L,s as et,e as Se,a1 as ue,a2 as ds,w as te,a3 as cs,a4 as ps,a5 as yt,a6 as ms,u as oe,a7 as vs,a8 as gs,k as bt,a9 as Ne,i as xt}from"./index-UEJ1IlOF.js";import{C as fs}from"./CouncilSelector-FIyiFEG6.js";function _t(l,c){if(l)return l;let g=c!=null?c:"button";if(typeof g=="string"&&g.toLowerCase()==="button")return"button"}function kt(l,c){let g=h(_t(l.value.type,l.value.as));return de(()=>{g.value=_t(l.value.type,l.value.as)}),tt(()=>{var b;g.value||U(c)&&U(c)instanceof HTMLButtonElement&&!((b=U(c))!=null&&b.hasAttribute("type"))&&(g.value="button")}),g}var ys=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(ys||{});let Ct=Symbol("DisclosureContext");function st(l){let c=Ve(Ct,null);if(c===null){let g=new Error(`<${l} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,st),g}return c}let $t=Symbol("DisclosurePanelContext");function bs(){return Ve($t,null)}let xs=ce({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(l,{slots:c,attrs:g}){let b=h(l.defaultOpen?0:1),r=h(null),k=h(null),y={buttonId:h(`headlessui-disclosure-button-${ze()}`),panelId:h(`headlessui-disclosure-panel-${ze()}`),disclosureState:b,panel:r,button:k,toggleDisclosure(){b.value=xe(b.value,{0:1,1:0})},closeDisclosure(){b.value!==1&&(b.value=1)},close(p){y.closeDisclosure();let w=p?p instanceof HTMLElement?p:p.value instanceof HTMLElement?U(p):U(y.button):U(y.button);w==null||w.focus()}};return Le(Ct,y),as(T(()=>xe(b.value,{0:Ue.Open,1:Ue.Closed}))),()=>{let q=l,{defaultOpen:p}=q,w=fe(q,["defaultOpen"]),$={open:b.value===0,close:y.close};return ve({theirProps:w,ourProps:{},slot:$,slots:c,attrs:g,name:"Disclosure"})}}}),_s=ce({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(l,{attrs:c,slots:g,expose:b}){let r=st("DisclosureButton"),k=bs(),y=T(()=>k===null?!1:k.value===r.panelId.value);de(()=>{y.value||l.id!==null&&(r.buttonId.value=l.id)}),He(()=>{y.value||(r.buttonId.value=null)});let p=h(null);b({el:p,$el:p}),y.value||tt(()=>{r.button.value=p.value});let w=kt(T(()=>({as:l.as,type:c.type})),p);function $(){var _;l.disabled||(y.value?(r.toggleDisclosure(),(_=U(r.button))==null||_.focus()):r.toggleDisclosure())}function q(_){var C;if(!l.disabled)if(y.value)switch(_.key){case X.Space:case X.Enter:_.preventDefault(),_.stopPropagation(),r.toggleDisclosure(),(C=U(r.button))==null||C.focus();break}else switch(_.key){case X.Space:case X.Enter:_.preventDefault(),_.stopPropagation(),r.toggleDisclosure();break}}function S(_){switch(_.key){case X.Space:_.preventDefault();break}}return()=>{var _;let C={open:r.disclosureState.value===0},i=l,{id:x}=i,s=fe(i,["id"]),o=y.value?{ref:p,type:w.value,onClick:$,onKeydown:q}:{id:(_=r.buttonId.value)!=null?_:x,ref:p,type:w.value,"aria-expanded":r.disclosureState.value===0,"aria-controls":r.disclosureState.value===0||U(r.panel)?r.panelId.value:void 0,disabled:l.disabled?!0:void 0,onClick:$,onKeydown:q,onKeyup:S};return ve({ourProps:o,theirProps:s,slot:C,attrs:c,slots:g,name:"DisclosureButton"})}}}),hs=ce({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(l,{attrs:c,slots:g,expose:b}){let r=st("DisclosurePanel");de(()=>{l.id!==null&&(r.panelId.value=l.id)}),He(()=>{r.panelId.value=null}),b({el:r.panel,$el:r.panel}),Le($t,r.panelId);let k=os(),y=T(()=>k!==null?(k.value&Ue.Open)===Ue.Open:r.disclosureState.value===0);return()=>{var p;let w={open:r.disclosureState.value===0,close:r.close},_=l,{id:$}=_,q=fe(_,["id"]),S={id:(p=r.panelId.value)!=null?p:$,ref:r.panel};return ve({ourProps:S,theirProps:q,slot:w,attrs:c,slots:g,features:Ee.RenderStrategy|Ee.Static,visible:y.value,name:"DisclosurePanel"})}}}),ws=ce({props:{onFocus:{type:Function,required:!0}},setup(l){let c=h(!0);return()=>c.value?Oe(ht,{as:"button",type:"button",features:ns.Focusable,onFocus(g){g.preventDefault();let b,r=50;function k(){var y;if(r--<=0){b&&cancelAnimationFrame(b);return}if((y=l.onFocus)!=null&&y.call(l)){c.value=!1,cancelAnimationFrame(b);return}b=requestAnimationFrame(k)}b=requestAnimationFrame(k)}}):null}});var ks=(l=>(l[l.Forwards=0]="Forwards",l[l.Backwards=1]="Backwards",l))(ks||{}),Cs=(l=>(l[l.Less=-1]="Less",l[l.Equal=0]="Equal",l[l.Greater=1]="Greater",l))(Cs||{});let Vt=Symbol("TabsContext");function qe(l){let c=Ve(Vt,null);if(c===null){let g=new Error(`<${l} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,qe),g}return c}let lt=Symbol("TabsSSRContext"),$s=ce({name:"TabGroup",emits:{change:l=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(l,{slots:c,attrs:g,emit:b}){var r;let k=h((r=l.selectedIndex)!=null?r:l.defaultIndex),y=h([]),p=h([]),w=T(()=>l.selectedIndex!==null),$=T(()=>w.value?l.selectedIndex:k.value);function q(s){var o;let i=$e(S.tabs.value,U),v=$e(S.panels.value,U),A=i.filter(B=>{var G;return!((G=U(B))!=null&&G.hasAttribute("disabled"))});if(s<0||s>i.length-1){let B=xe(k.value===null?0:Math.sign(s-k.value),{[-1]:()=>1,0:()=>xe(Math.sign(s),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),G=xe(B,{0:()=>i.indexOf(A[0]),1:()=>i.indexOf(A[A.length-1])});G!==-1&&(k.value=G),S.tabs.value=i,S.panels.value=v}else{let B=i.slice(0,s),G=[...i.slice(s),...B].find(Z=>A.includes(Z));if(!G)return;let Y=(o=i.indexOf(G))!=null?o:S.selectedIndex.value;Y===-1&&(Y=S.selectedIndex.value),k.value=Y,S.tabs.value=i,S.panels.value=v}}let S={selectedIndex:T(()=>{var s,o;return(o=(s=k.value)!=null?s:l.defaultIndex)!=null?o:null}),orientation:T(()=>l.vertical?"vertical":"horizontal"),activation:T(()=>l.manual?"manual":"auto"),tabs:y,panels:p,setSelectedIndex(s){$.value!==s&&b("change",s),w.value||q(s)},registerTab(s){var o;if(y.value.includes(s))return;let i=y.value[k.value];if(y.value.push(s),y.value=$e(y.value,U),!w.value){let v=(o=y.value.indexOf(i))!=null?o:k.value;v!==-1&&(k.value=v)}},unregisterTab(s){let o=y.value.indexOf(s);o!==-1&&y.value.splice(o,1)},registerPanel(s){p.value.includes(s)||(p.value.push(s),p.value=$e(p.value,U))},unregisterPanel(s){let o=p.value.indexOf(s);o!==-1&&p.value.splice(o,1)}};Le(Vt,S);let _=h({tabs:[],panels:[]}),C=h(!1);de(()=>{C.value=!0}),Le(lt,T(()=>C.value?null:_.value));let x=T(()=>l.selectedIndex);return de(()=>{se([x],()=>{var s;return q((s=l.selectedIndex)!=null?s:l.defaultIndex)},{immediate:!0})}),tt(()=>{if(!w.value||$.value==null||S.tabs.value.length<=0)return;let s=$e(S.tabs.value,U);s.some((o,i)=>U(S.tabs.value[i])!==U(o))&&S.setSelectedIndex(s.findIndex(o=>U(o)===U(S.tabs.value[$.value])))}),()=>{let s={selectedIndex:k.value};return Oe(z,[y.value.length<=0&&Oe(ws,{onFocus:()=>{for(let o of y.value){let i=U(o);if((i==null?void 0:i.tabIndex)===0)return i.focus(),!0}return!1}}),ve({theirProps:E(E({},g),rs(l,["selectedIndex","defaultIndex","manual","vertical","onChange"])),ourProps:{},slot:s,slots:c,attrs:g,name:"TabGroup"})])}}}),Vs=ce({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(l,{attrs:c,slots:g}){let b=qe("TabList");return()=>{let r={selectedIndex:b.selectedIndex.value},k={role:"tablist","aria-orientation":b.orientation.value};return ve({ourProps:k,theirProps:l,slot:r,attrs:c,slots:g,name:"TabList"})}}}),Ss=ce({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(l,{attrs:c,slots:g,expose:b}){var r;let k=(r=l.id)!=null?r:`headlessui-tabs-tab-${ze()}`,y=qe("Tab"),p=h(null);b({el:p,$el:p}),de(()=>y.registerTab(p)),He(()=>y.unregisterTab(p));let w=Ve(lt),$=T(()=>{if(w.value){let v=w.value.tabs.indexOf(k);return v===-1?w.value.tabs.push(k)-1:v}return-1}),q=T(()=>{let v=y.tabs.value.indexOf(p);return v===-1?$.value:v}),S=T(()=>q.value===y.selectedIndex.value);function _(v){var A;let B=v();if(B===Be.Success&&y.activation.value==="auto"){let G=(A=us(p))==null?void 0:A.activeElement,Y=y.tabs.value.findIndex(Z=>U(Z)===G);Y!==-1&&y.setSelectedIndex(Y)}return B}function C(v){let A=y.tabs.value.map(B=>U(B)).filter(Boolean);if(v.key===X.Space||v.key===X.Enter){v.preventDefault(),v.stopPropagation(),y.setSelectedIndex(q.value);return}switch(v.key){case X.Home:case X.PageUp:return v.preventDefault(),v.stopPropagation(),_(()=>ye(A,re.First));case X.End:case X.PageDown:return v.preventDefault(),v.stopPropagation(),_(()=>ye(A,re.Last))}if(_(()=>xe(y.orientation.value,{vertical(){return v.key===X.ArrowUp?ye(A,re.Previous|re.WrapAround):v.key===X.ArrowDown?ye(A,re.Next|re.WrapAround):Be.Error},horizontal(){return v.key===X.ArrowLeft?ye(A,re.Previous|re.WrapAround):v.key===X.ArrowRight?ye(A,re.Next|re.WrapAround):Be.Error}}))===Be.Success)return v.preventDefault()}let x=h(!1);function s(){var v;x.value||(x.value=!0,!l.disabled&&((v=U(p))==null||v.focus({preventScroll:!0}),y.setSelectedIndex(q.value),is(()=>{x.value=!1})))}function o(v){v.preventDefault()}let i=kt(T(()=>({as:l.as,type:c.type})),p);return()=>{var v,A;let B={selected:S.value,disabled:(v=l.disabled)!=null?v:!1},G=fe(l,[]),Y={ref:p,onKeydown:C,onMousedown:o,onClick:s,id:k,role:"tab",type:i.value,"aria-controls":(A=U(y.panels.value[q.value]))==null?void 0:A.id,"aria-selected":S.value,tabIndex:S.value?0:-1,disabled:l.disabled?!0:void 0};return ve({ourProps:Y,theirProps:G,slot:B,attrs:c,slots:g,name:"Tab"})}}}),qs=ce({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(l,{slots:c,attrs:g}){let b=qe("TabPanels");return()=>{let r={selectedIndex:b.selectedIndex.value};return ve({theirProps:l,ourProps:{},slot:r,attrs:g,slots:c,name:"TabPanels"})}}}),Ts=ce({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(l,{attrs:c,slots:g,expose:b}){var r;let k=(r=l.id)!=null?r:`headlessui-tabs-panel-${ze()}`,y=qe("TabPanel"),p=h(null);b({el:p,$el:p}),de(()=>y.registerPanel(p)),He(()=>y.unregisterPanel(p));let w=Ve(lt),$=T(()=>{if(w.value){let _=w.value.panels.indexOf(k);return _===-1?w.value.panels.push(k)-1:_}return-1}),q=T(()=>{let _=y.panels.value.indexOf(p);return _===-1?$.value:_}),S=T(()=>q.value===y.selectedIndex.value);return()=>{var _;let C={selected:S.value},i=l,{tabIndex:x}=i,s=fe(i,["tabIndex"]),o={ref:p,id:k,role:"tabpanel","aria-labelledby":(_=U(y.tabs.value[q.value]))==null?void 0:_.id,tabIndex:S.value?x:-1};return!S.value&&l.unmount&&!l.static?Oe(ht,E({as:"span","aria-hidden":!0},o)):ve({ourProps:o,theirProps:s,slot:C,attrs:c,slots:g,features:Ee.Static|Ee.RenderStrategy,visible:S.value,name:"TabPanel"})}}});const Ms={__name:"Step1CouncilSelection",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","council-change"],setup(l,{emit:c}){const g=l,b=c,r=k=>{console.log("[Step1CouncilSelection] updateCouncil called with:",k),console.log("[Step1CouncilSelection] Current modelValue:",g.modelValue),b("update:modelValue",Ce(E({},g.modelValue),{council:k})),b("council-change",k),console.log("[Step1CouncilSelection] Emitted events")};return(k,y)=>(a(),n("div",null,[y[0]||(y[0]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Council",-1)),y[1]||(y[1]=e("p",{class:"text-gray-600 mb-8"},"Choose the council that will process your application",-1)),W(fs,{"model-value":l.modelValue.council,"onUpdate:modelValue":r,"display-mode":"cards",required:!0,"show-selected-info":!0,label:"","show-label":!1},null,8,["model-value"])]))}},Ps={key:0,class:"text-center py-12"},As={key:1,class:"grid md:grid-cols-2 gap-4"},Ds=["onClick"],Rs={class:"flex items-start justify-between"},js={class:"flex-1"},Is={class:"text-lg font-semibold text-gray-900 mb-2"},Bs=["innerHTML"],Ns={class:"mt-4 flex items-center space-x-4 text-xs text-gray-500"},Fs={key:0},Ls={key:1},Us={key:2,class:"px-2 py-1 bg-gray-100 rounded"},zs={key:0,class:"ml-4"},Es={__name:"Step2RequestType",props:{modelValue:{type:Object,required:!0},requestTypes:{type:Object,required:!0}},emits:["update:modelValue","type-selected"],setup(l,{emit:c}){const g=l,b=c,r=k=>{console.log("[Step2RequestType] selectType called with:",k.name),console.log("[Step2RequestType] props.modelValue:",g.modelValue),console.log("[Step2RequestType] props.modelValue.council:",g.modelValue.council);const y=Ce(E({},g.modelValue),{request_type:k.name});console.log("[Step2RequestType] Emitting updatedValue:",y),b("update:modelValue",y),b("type-selected",k)};return(k,y)=>(a(),n("div",null,[y[2]||(y[2]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Application Type",-1)),y[3]||(y[3]=e("p",{class:"text-gray-600 mb-8"},"Choose the type of consent you wish to apply for",-1)),l.requestTypes.loading?(a(),n("div",Ps,[...y[0]||(y[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(a(),n("div",As,[(a(!0),n(z,null,O(l.requestTypes.data,p=>(a(),n("div",{key:p.name,onClick:w=>r(p),class:I(["border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",l.modelValue.request_type===p.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",Rs,[e("div",js,[e("h3",Is,m(p.type_name),1),e("p",{class:"text-sm text-gray-600",innerHTML:p.description||"No description available"},null,8,Bs),e("div",Ns,[p.base_fee?(a(),n("span",Fs,"Fee: $"+m(p.base_fee),1)):f("",!0),p.processing_sla_days?(a(),n("span",Ls,m(p.processing_sla_days)+" days",1)):f("",!0),p.category?(a(),n("span",Us,m(p.category),1)):f("",!0)])]),l.modelValue.request_type===p.name?(a(),n("div",zs,[...y[1]||(y[1]=[e("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):f("",!0)])],10,Ds))),128))]))]))}},Os={class:"text-gray-600 mb-6"},Hs={key:0,class:"space-y-6"},Ws={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},Gs={class:"flex items-center gap-4 mb-4"},Js={class:"flex items-center"},Ks={key:1,class:"mt-4"},Qs={class:"space-y-2"},Xs={class:"flex-1"},Ys={class:"text-sm font-medium text-gray-900"},Zs={class:"text-xs text-gray-600 mt-1"},el={key:0,class:"text-xs text-gray-500 mt-1"},tl=["onClick"],sl={class:"bg-white border border-gray-200 rounded-lg p-6"},ll={class:"flex items-start justify-between mb-4"},ol={class:"text-xl font-semibold text-gray-900"},al={key:0,class:"text-sm text-gray-500 mt-1"},nl={class:"grid md:grid-cols-3 gap-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},rl={class:"text-2xl font-bold text-blue-900 mt-1"},il={class:"text-2xl font-bold text-blue-900 mt-1"},ul={class:"text-2xl font-bold text-blue-900 mt-1"},dl={key:1,class:"bg-white border border-gray-200 rounded-lg p-6"},cl=["innerHTML"],pl={key:2,class:"bg-white border border-gray-200 rounded-lg p-6"},ml=["innerHTML"],vl={key:1,class:"text-center py-12"},gl={class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-hidden"},fl={class:"overflow-y-auto max-h-[calc(90vh-140px)] px-6 py-4"},yl={class:"space-y-4"},bl={class:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t border-gray-200"},xl=["disabled"],_l={__name:"Step3ProcessInfo",props:{requestTypeDetails:{type:Object,default:null},councilName:{type:String,default:""},modelValue:{type:Object,default:()=>({})}},emits:["continue","update:modelValue"],setup(l,{emit:c}){var s,o;const g=wt(),b=l,r=c,k=h(((s=b.modelValue)==null?void 0:s.pre_app_meeting_not_required)||!1),y=h(((o=b.modelValue)==null?void 0:o.pre_app_meetings)||[]),p=h(!1),w=h({meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",preferred_time_slot_1_start:null});se([k,y],()=>{r("update:modelValue",Ce(E({},b.modelValue),{pre_app_meeting_not_required:k.value,pre_app_meetings:y.value}))},{deep:!0});const $=()=>{w.value={meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",preferred_time_slot_1_start:null},p.value=!0},q=()=>{p.value=!1},S=()=>{y.value.push(E({},w.value)),q()},_=i=>{confirm("Remove this council meeting request?")&&y.value.splice(i,1)},C=i=>i?new Date(i).toLocaleString("en-NZ",{dateStyle:"medium",timeStyle:"short"}):"",x=()=>{if(!et.isLoggedIn){const i=window.location.pathname+window.location.search;g.push({name:"Login",query:{redirect:i}});return}r("continue")};return(i,v)=>(a(),n("div",null,[v[27]||(v[27]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Council Process Information",-1)),e("p",Os,"Understanding "+m(l.councilName)+"'s process for this application",1),l.requestTypeDetails?(a(),n("div",Hs,[l.requestTypeDetails.council_meeting_available?(a(),n("div",Ws,[v[6]||(v[6]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Council Meeting",-1)),v[7]||(v[7]=e("p",{class:"text-sm text-gray-600 mb-4"}," You may schedule a Council Meeting with the Council to seek further clarifications in respect of your application before proceeding. ",-1)),e("div",Gs,[e("label",Js,[M(e("input",{type:"checkbox","onUpdate:modelValue":v[0]||(v[0]=A=>k.value=A),class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[ee,k.value]]),v[4]||(v[4]=e("span",{class:"ml-2 text-sm text-gray-700"},"I do not require a council meeting",-1))])]),k.value?f("",!0):(a(),n("button",{key:0,onClick:$,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Request Council Meeting ")),y.value&&y.value.length>0?(a(),n("div",Ks,[v[5]||(v[5]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Requested Meetings",-1)),e("div",Qs,[(a(!0),n(z,null,O(y.value,(A,B)=>(a(),n("div",{key:B,class:"p-3 bg-gray-50 border border-gray-200 rounded-lg flex items-start justify-between"},[e("div",Xs,[e("span",Ys,m(A.meeting_type||"Council Meeting"),1),e("p",Zs,m(A.meeting_format),1),A.preferred_time_slot_1_start?(a(),n("p",el," Preferred: "+m(C(A.preferred_time_slot_1_start)),1)):f("",!0)]),e("button",{onClick:G=>_(B),type:"button",class:"text-red-600 hover:text-red-800 text-sm ml-4"}," Remove ",8,tl)]))),128))])])):f("",!0)])):f("",!0),e("div",sl,[e("div",ll,[e("div",null,[e("h3",ol,m(l.requestTypeDetails.request_type_name),1),l.requestTypeDetails.category?(a(),n("p",al,m(l.requestTypeDetails.category),1)):f("",!0)])]),e("div",nl,[e("div",null,[v[8]||(v[8]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Application Fee",-1)),e("div",rl," $"+m(l.requestTypeDetails.base_fee||"0"),1),v[9]||(v[9]=e("div",{class:"text-xs text-blue-600 mt-1"},"Plus any additional costs",-1))]),e("div",null,[v[11]||(v[11]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Processing Time",-1)),e("div",il,[R(m(l.requestTypeDetails.sla_days||"N/A")+" ",1),v[10]||(v[10]=e("span",{class:"text-base"},"days",-1))]),v[12]||(v[12]=e("div",{class:"text-xs text-blue-600 mt-1"},"Standard timeframe",-1))]),e("div",null,[v[13]||(v[13]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Payment Required",-1)),e("div",ul,m(l.requestTypeDetails.requires_payment?"Yes":"No"),1),v[14]||(v[14]=e("div",{class:"text-xs text-blue-600 mt-1"},"Before processing",-1))])])]),l.requestTypeDetails.process_description?(a(),n("div",dl,[v[15]||(v[15]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"How This Works",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:l.requestTypeDetails.process_description},null,8,cl)])):l.requestTypeDetails.description?(a(),n("div",pl,[v[16]||(v[16]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"About This Application",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:l.requestTypeDetails.description},null,8,ml)])):f("",!0),v[17]||(v[17]=me('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Before You Continue</h5><p class="text-yellow-800 text-sm mt-1"> Please review this information carefully. Make sure you understand the process, fees, and timeframes before proceeding with your application. </p></div></div></div>',1)),e("div",{class:"flex justify-center pt-4"},[e("button",{type:"button",onClick:x,class:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"}," I Understand - Continue to Application ")])])):(a(),n("div",vl,[...v[18]||(v[18]=[e("p",{class:"text-gray-500"},"No request type selected. Please go back and select a request type.",-1)])])),p.value?(a(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:be(q,["self"])},[e("div",gl,[e("div",{class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},[v[20]||(v[20]=e("h3",{class:"text-xl font-bold text-gray-900"},"Request Council Meeting",-1)),e("button",{onClick:q,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...v[19]||(v[19]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",fl,[e("div",yl,[v[26]||(v[26]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("p",{class:"text-sm text-blue-900"}," A council meeting allows you to discuss your proposal with council planners before formally submitting your application. ")],-1)),e("div",null,[v[22]||(v[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Format *",-1)),M(e("select",{"onUpdate:modelValue":v[1]||(v[1]=A=>w.value.meeting_format=A),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...v[21]||(v[21]=[e("option",{value:"In Person"},"In Person",-1),e("option",{value:"Video Call"},"Video Call",-1),e("option",{value:"Phone Call"},"Phone Call",-1)])],512),[[ie,w.value.meeting_format]])]),e("div",null,[v[23]||(v[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Purpose *",-1)),M(e("textarea",{"onUpdate:modelValue":v[2]||(v[2]=A=>w.value.meeting_purpose=A),rows:"4",placeholder:"Describe what you'd like to discuss in this meeting...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[L,w.value.meeting_purpose]])]),e("div",null,[v[24]||(v[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Preferred Date & Time",-1)),M(e("input",{"onUpdate:modelValue":v[3]||(v[3]=A=>w.value.preferred_time_slot_1_start=A),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,w.value.preferred_time_slot_1_start]]),v[25]||(v[25]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select your preferred date and time. The council will confirm or propose an alternative.",-1))])])]),e("div",bl,[e("button",{onClick:q,type:"button",class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors"}," Cancel "),e("button",{onClick:S,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:!w.value.meeting_purpose}," Request Meeting ",8,xl)])])])):f("",!0)]))}},hl={class:"px-4 sm:px-0"},wl={class:"space-y-4 sm:space-y-6"},kl={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6"},Cl={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-0"},$l={class:"text-base sm:text-lg font-semibold text-blue-900"},Vl={class:"text-xs sm:text-sm text-blue-700 mt-1"},Sl={class:"sm:text-right"},ql={class:"text-xl sm:text-2xl font-bold text-blue-900"},Tl={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Ml={class:"p-4 sm:p-6 space-y-3"},Pl={class:"grid md:grid-cols-2 gap-4"},Al={class:"font-medium"},Dl={class:"font-medium"},Rl={class:"font-medium"},jl={key:0},Il={class:"font-medium"},Bl={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Nl={class:"p-4 sm:p-6"},Fl={key:0,class:"space-y-2"},Ll={class:"font-medium"},Ul={key:0},zl={class:"font-medium"},El={key:1,class:"text-gray-500"},Ol={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Hl={class:"p-4 sm:p-6 space-y-3"},Wl={class:"font-medium"},Gl={class:"font-medium"},Jl={class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},Kl={class:"font-semibold text-gray-900 text-sm sm:text-base"},Ql={class:"p-4 sm:p-6 space-y-4"},Xl={key:0,class:"text-sm font-medium text-gray-700 mb-2"},Yl={class:"grid md:grid-cols-2 gap-4"},Zl={class:"text-sm text-gray-500"},eo={class:"font-medium"},to={key:0,class:"text-gray-500 text-sm"},so={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},lo={class:"p-4 sm:p-6"},oo={class:"space-y-3"},ao={class:"mt-2 flex flex-wrap gap-2"},no={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},ro={key:1,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},io={key:2,class:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium"},uo={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium"},co={key:4,class:"px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium"},po={key:5,class:"text-gray-500"},mo={class:"mt-1 inline-flex items-center"},vo={key:0},go={class:"font-medium break-words"},fo={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},yo={class:"p-4 sm:p-6"},bo={class:"flex flex-wrap gap-2"},xo={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},_o={key:1,class:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},ho={key:2,class:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},wo={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},ko={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Co={class:"p-4 sm:p-6"},$o={class:"space-y-3"},Vo={class:"font-medium"},So={key:0},qo={class:"text-sm mt-1 line-clamp-3"},To={key:1},Mo={class:"text-sm mt-1 line-clamp-3"},Po={class:"flex items-center gap-2"},Ao={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Do={class:"p-4 sm:p-6"},Ro={class:"space-y-4"},jo={key:0},Io=["innerHTML"],Bo={key:1},No=["innerHTML"],Fo={key:2},Lo={class:"text-sm mt-1 line-clamp-3"},Uo={key:3},zo={class:"text-sm mt-1 space-y-1 list-disc list-inside"},Eo={key:0},Oo={key:1},Ho={key:2},Wo={key:4},Go=["innerHTML"],Jo={key:5,class:"text-gray-500 text-sm"},Ko={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Qo={class:"p-4 sm:p-6"},Xo={class:"space-y-2"},Yo={class:"flex items-start gap-2"},Zo={class:"flex items-start gap-2"},ea={class:"flex items-start gap-2"},ta={key:0,class:"mt-4 pt-4 border-t border-gray-200"},sa={class:"font-medium"},la={key:0,class:"text-sm text-gray-500"},oa={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},aa={__name:"Step17Review",props:{modelValue:{type:Object,required:!0},councilName:{type:String,default:"Council"},requestTypeName:{type:String,default:"Application"},applicationFee:{type:String,default:"TBD"},isResourceConsent:{type:Boolean,default:!1},stepConfigs:{type:Array,default:()=>[]},usesConfigurableSteps:{type:Boolean,default:!1},requestTypeDetails:{type:Object,default:null}},setup(l){const c=l,g=T(()=>!c.usesConfigurableSteps||!c.stepConfigs?[]:c.stepConfigs.filter(s=>s.show_on_review)),b=T(()=>c.isResourceConsent?!0:!!(c.modelValue.property||c.modelValue.property_address)),r=s=>{if(!s.sections)return!1;for(const o of s.sections)if(o.show_on_review){for(const i of o.fields)if(i.show_on_review&&c.modelValue[i.field_name])return!0}return!1},k=(s,o)=>{if(o==null||o==="")return"Not provided";if(s.field_type==="Check")return o?"Yes":"No";if(s.field_type==="Date"&&o)try{return new Date(o).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(i){return o}return s.field_type==="Currency"&&o?`₱${Number(o).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`:s.field_type==="Select"?o:s.field_type==="Attach"||s.field_type==="Attach Image"?o?"✓ File attached":"Not provided":o},y=T(()=>!!(c.modelValue.consent_type_land_use||c.modelValue.consent_type_subdivision||c.modelValue.consent_type_discharge||c.modelValue.consent_type_water||c.modelValue.consent_type_coastal)),p=T(()=>{const s=c.modelValue.activity_status_type;return s==="Permitted"?"bg-green-100 text-green-800":s==="Controlled"?"bg-blue-100 text-blue-800":s==="Restricted Discretionary"?"bg-yellow-100 text-yellow-800":s==="Discretionary"?"bg-orange-100 text-orange-800":s==="Non-Complying"?"bg-red-100 text-red-800":s==="Prohibited"?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}),w=T(()=>!!(c.modelValue.hazard_flooding||c.modelValue.hazard_earthquake||c.modelValue.hazard_landslip||c.modelValue.hazard_coastal)),$=T(()=>!!(c.modelValue.consultation_undertaken||c.modelValue.consultation_summary||c.modelValue.affected_parties_details||c.modelValue.written_approvals_obtained)),q=T(()=>!!(c.modelValue.activity_description||c.modelValue.aee_full_assessment||c.modelValue.positive_effects_description||c.modelValue.effects_visual_amenity||c.modelValue.effects_traffic_parking||c.modelValue.effects_noise||c.modelValue.mitigation_measures||c.modelValue.aee_activity_description||c.modelValue.aee_existing_environment||c.modelValue.assessment_of_effects||c.modelValue.aee_document)),S=s=>{if(!s)return"";const o=document.createElement("div");return o.innerHTML=s,o.textContent||o.innerText||""},_=(s,o)=>{if(!s)return"";const i=S(s);return i.length<=o?i:i.substring(0,o)+"..."},C=s=>{if(!s)return"";try{return new Date(s).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(o){return s}},x=T(()=>{const s=!!(c.modelValue.council&&c.modelValue.request_type&&c.modelValue.applicant_name&&c.modelValue.applicant_email&&c.modelValue.property_address&&c.modelValue.delivery_preference);if(c.isResourceConsent){const o=!!(y.value&&c.modelValue.activity_status_type&&c.modelValue.activity_description&&c.modelValue.aee_full_assessment&&c.modelValue.declaration_accuracy&&c.modelValue.declaration_authority&&c.modelValue.declaration_acknowledgment);return s&&o}return s});return(s,o)=>{var i;return a(),n("div",hl,[o[39]||(o[39]=e("h2",{class:"text-xl sm:text-2xl font-bold text-gray-900 mb-2"},"Review & Submit",-1)),o[40]||(o[40]=e("p",{class:"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8"},"Review your application details before submitting",-1)),e("div",wl,[e("div",kl,[e("div",Cl,[e("div",null,[e("h3",$l,m(l.requestTypeName),1),e("p",Vl,m(l.councilName),1)]),e("div",Sl,[o[0]||(o[0]=e("div",{class:"text-xs sm:text-sm text-blue-600 font-medium"},"Application Fee",-1)),e("div",ql,m(l.applicationFee),1)])])]),e("div",Tl,[o[5]||(o[5]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Applicant Details")],-1)),e("div",Ml,[e("div",Pl,[e("div",null,[o[1]||(o[1]=e("span",{class:"text-sm text-gray-500"},"Name:",-1)),e("p",Al,m(l.modelValue.applicant_name||"Not provided"),1)]),e("div",null,[o[2]||(o[2]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("p",Dl,m(l.modelValue.applicant_email||"Not provided"),1)]),e("div",null,[o[3]||(o[3]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("p",Rl,m(l.modelValue.applicant_phone||"Not provided"),1)]),l.modelValue.applicant_company?(a(),n("div",jl,[o[4]||(o[4]=e("span",{class:"text-sm text-gray-500"},"Company:",-1)),e("p",Il,m(l.modelValue.applicant_company),1)])):f("",!0)])])]),b.value?(a(),n("div",Bl,[o[8]||(o[8]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Property Details")],-1)),e("div",Nl,[l.modelValue.property_address?(a(),n("div",Fl,[e("div",null,[o[6]||(o[6]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",Ll,m(l.modelValue.property_address),1)]),l.modelValue.legal_description?(a(),n("div",Ul,[o[7]||(o[7]=e("span",{class:"text-sm text-gray-500"},"Legal Description:",-1)),e("p",zl,m(l.modelValue.legal_description),1)])):f("",!0)])):(a(),n("p",El,"No property selected"))])])):f("",!0),(i=l.requestTypeDetails)!=null&&i.collect_payment?(a(),n("div",Ol,[o[11]||(o[11]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Delivery & Payment")],-1)),e("div",Hl,[e("div",null,[o[9]||(o[9]=e("span",{class:"text-sm text-gray-500"},"Delivery Preference:",-1)),e("p",Wl,m(l.modelValue.delivery_preference||"Not selected"),1)]),e("div",null,[o[10]||(o[10]=e("span",{class:"text-sm text-gray-500"},"Invoice To:",-1)),e("p",Gl,m(l.modelValue.invoice_to||"Not specified"),1)])])])):f("",!0),l.usesConfigurableSteps&&g.value.length>0?(a(!0),n(z,{key:2},O(g.value,v=>(a(),n("div",{key:v.step_code,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},[e("div",Jl,[e("h3",Kl,m(v.step_title),1)]),e("div",Ql,[(a(!0),n(z,null,O(v.sections.filter(A=>A.show_on_review),A=>(a(),n("div",{key:A.section_code},[A.section_title?(a(),n("h4",Xl,m(A.section_title),1)):f("",!0),e("div",Yl,[(a(!0),n(z,null,O(A.fields.filter(B=>B.show_on_review),B=>(a(),n("div",{key:B.field_name},[e("span",Zl,m(B.review_label||B.field_label)+":",1),e("p",eo,m(k(B,l.modelValue[B.field_name])),1)]))),128))])]))),128)),r(v)?f("",!0):(a(),n("p",to," No information to display for review "))])]))),128)):f("",!0),l.isResourceConsent?(a(),n(z,{key:3},[e("div",so,[o[15]||(o[15]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consent Types & Activity Status")],-1)),e("div",lo,[e("div",oo,[e("div",null,[o[12]||(o[12]=e("span",{class:"text-sm text-gray-500"},"Consent Types:",-1)),e("div",ao,[l.modelValue.consent_type_land_use?(a(),n("span",no," Land Use Consent ")):f("",!0),l.modelValue.consent_type_subdivision?(a(),n("span",ro," Subdivision Consent ")):f("",!0),l.modelValue.consent_type_discharge?(a(),n("span",io," Discharge Permit ")):f("",!0),l.modelValue.consent_type_water?(a(),n("span",uo," Water Permit ")):f("",!0),l.modelValue.consent_type_coastal?(a(),n("span",co," Coastal Permit ")):f("",!0),y.value?f("",!0):(a(),n("span",po," None selected "))])]),e("div",null,[o[13]||(o[13]=e("span",{class:"text-sm text-gray-500"},"Activity Status:",-1)),e("div",mo,[e("span",{class:I(["px-3 py-1 rounded-full text-sm font-medium",p.value])},m(l.modelValue.activity_status_type||"Not specified"),3)])]),l.modelValue.activity_title?(a(),n("div",vo,[o[14]||(o[14]=e("span",{class:"text-sm text-gray-500"},"Activity Title:",-1)),e("p",go,m(l.modelValue.activity_title),1)])):f("",!0)])])]),w.value?(a(),n("div",fo,[o[20]||(o[20]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Natural Hazards")],-1)),e("div",yo,[e("div",bo,[l.modelValue.hazard_flooding?(a(),n("span",xo,[...o[16]||(o[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"})],-1),R(" Flood Hazard ",-1)])])):f("",!0),l.modelValue.hazard_earthquake?(a(),n("span",_o,[...o[17]||(o[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),R(" Earthquake/Fault Line ",-1)])])):f("",!0),l.modelValue.hazard_landslip?(a(),n("span",ho,[...o[18]||(o[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1),R(" Landslip/Slope Instability ",-1)])])):f("",!0),l.modelValue.hazard_coastal?(a(),n("span",wo,[...o[19]||(o[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5"})],-1),R(" Coastal Hazard ",-1)])])):f("",!0)])])])):f("",!0),$.value?(a(),n("div",ko,[o[25]||(o[25]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consultation & Affected Parties")],-1)),e("div",Co,[e("div",$o,[e("div",null,[o[21]||(o[21]=e("span",{class:"text-sm text-gray-500"},"Consultation Undertaken:",-1)),e("p",Vo,m(l.modelValue.consultation_undertaken||"Not specified"),1)]),l.modelValue.consultation_summary?(a(),n("div",So,[o[22]||(o[22]=e("span",{class:"text-sm text-gray-500"},"Consultation Summary:",-1)),e("p",qo,m(l.modelValue.consultation_summary),1)])):f("",!0),l.modelValue.affected_parties_details?(a(),n("div",To,[o[23]||(o[23]=e("span",{class:"text-sm text-gray-500"},"Affected Parties:",-1)),e("p",Mo,m(S(l.modelValue.affected_parties_details)),1)])):f("",!0),e("div",Po,[(a(),n("svg",{class:I(["w-5 h-5",l.modelValue.written_approvals_obtained?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[24]||(o[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:I(l.modelValue.written_approvals_obtained?"text-gray-900":"text-gray-500")}," Written Approvals "+m(l.modelValue.written_approvals_obtained?"Obtained":"Not Obtained"),3)])])])])):f("",!0),e("div",Ao,[o[31]||(o[31]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Assessment of Environmental Effects")],-1)),e("div",Do,[e("div",Ro,[l.modelValue.activity_description?(a(),n("div",jo,[o[26]||(o[26]=e("span",{class:"text-sm text-gray-500"},"Activity Description:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:l.modelValue.activity_description},null,8,Io)])):f("",!0),l.modelValue.aee_full_assessment?(a(),n("div",Bo,[o[27]||(o[27]=e("span",{class:"text-sm text-gray-500"},"Full Assessment:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:l.modelValue.aee_full_assessment},null,8,No)])):f("",!0),l.modelValue.positive_effects_description?(a(),n("div",Fo,[o[28]||(o[28]=e("span",{class:"text-sm text-gray-500"},"Positive Effects:",-1)),e("p",Lo,m(l.modelValue.positive_effects_description),1)])):f("",!0),l.modelValue.effects_visual_amenity||l.modelValue.effects_traffic_parking||l.modelValue.effects_noise?(a(),n("div",Uo,[o[29]||(o[29]=e("span",{class:"text-sm text-gray-500"},"Adverse Effects Summary:",-1)),e("ul",zo,[l.modelValue.effects_visual_amenity?(a(),n("li",Eo,"Visual/Amenity: "+m(_(l.modelValue.effects_visual_amenity,50)),1)):f("",!0),l.modelValue.effects_traffic_parking?(a(),n("li",Oo,"Traffic/Parking: "+m(_(l.modelValue.effects_traffic_parking,50)),1)):f("",!0),l.modelValue.effects_noise?(a(),n("li",Ho,"Noise: "+m(_(l.modelValue.effects_noise,50)),1)):f("",!0)])])):f("",!0),l.modelValue.mitigation_measures?(a(),n("div",Wo,[o[30]||(o[30]=e("span",{class:"text-sm text-gray-500"},"Mitigation Measures:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:l.modelValue.mitigation_measures},null,8,Go)])):f("",!0),q.value?f("",!0):(a(),n("p",Jo," AEE not yet completed "))])])]),e("div",Ko,[o[36]||(o[36]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Statutory Declarations")],-1)),e("div",Qo,[e("div",Xo,[e("div",Yo,[(a(),n("svg",{class:I(["w-5 h-5 flex-shrink-0 mt-0.5",l.modelValue.declaration_accuracy||l.modelValue.declaration_rma_compliance?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[32]||(o[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:I(["text-sm",l.modelValue.declaration_accuracy||l.modelValue.declaration_rma_compliance?"text-gray-900":"text-gray-500"])}," Declaration of Accuracy & RMA Compliance ",2)]),e("div",Zo,[(a(),n("svg",{class:I(["w-5 h-5 flex-shrink-0 mt-0.5",l.modelValue.declaration_authority||l.modelValue.declaration_authorized?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[33]||(o[33]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:I(["text-sm",l.modelValue.declaration_authority||l.modelValue.declaration_authorized?"text-gray-900":"text-gray-500"])}," Declaration of Authority to Apply ",2)]),e("div",ea,[(a(),n("svg",{class:I(["w-5 h-5 flex-shrink-0 mt-0.5",l.modelValue.declaration_acknowledgment||l.modelValue.declaration_public_information?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[34]||(o[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:I(["text-sm",l.modelValue.declaration_acknowledgment||l.modelValue.declaration_public_information?"text-gray-900":"text-gray-500"])}," Public Information & Privacy Acknowledgment ",2)]),l.modelValue.applicant_signature?(a(),n("div",ta,[o[35]||(o[35]=e("span",{class:"text-sm text-gray-500"},"Signed by:",-1)),e("p",sa,m(l.modelValue.applicant_signature),1),l.modelValue.signature_date?(a(),n("p",la," Date: "+m(C(l.modelValue.signature_date)),1)):f("",!0)])):f("",!0)])])])],64)):f("",!0),o[38]||(o[38]=me('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6" data-v-3fc986b6><div class="flex items-start gap-2 sm:gap-3" data-v-3fc986b6><svg class="w-5 h-5 sm:w-6 sm:h-6 text-yellow-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3fc986b6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-3fc986b6></path></svg><div data-v-3fc986b6><h4 class="font-semibold text-yellow-900 text-sm sm:text-base" data-v-3fc986b6>Before You Submit</h4><ul class="mt-2 text-xs sm:text-sm text-yellow-800 space-y-1 list-disc list-inside" data-v-3fc986b6><li data-v-3fc986b6>Review all information carefully for accuracy and completeness</li><li data-v-3fc986b6>Ensure all required fields are completed</li><li data-v-3fc986b6>For Resource Consent applications, verify all statutory declarations are confirmed</li><li data-v-3fc986b6>Once submitted, you cannot edit the application (you may need to withdraw and resubmit)</li></ul></div></div></div>',1)),x.value?f("",!0):(a(),n("div",oa,[...o[37]||(o[37]=[me('<div class="flex items-start gap-2 sm:gap-3" data-v-3fc986b6><svg class="w-5 h-5 text-red-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3fc986b6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-3fc986b6></path></svg><div data-v-3fc986b6><h5 class="font-semibold text-red-900 text-xs sm:text-sm" data-v-3fc986b6>Application Incomplete</h5><p class="text-red-800 text-xs sm:text-sm mt-1" data-v-3fc986b6> Please complete all required sections before submitting. Use the Previous button to go back and fill in missing information. </p></div></div>',1)])]))])])}}},na=Se(aa,[["__scopeId","data-v-3fc986b6"]]);function ra(l,c){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const ia={class:"space-y-4"},ua={class:"block"},da={class:"text-sm font-medium text-gray-900"},ca={key:0,class:"text-red-500"},pa={key:0,class:"text-xs text-gray-500 mt-1"},ma={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},va=["disabled"],ga=["disabled"],fa={class:"text-center"},ya={class:"text-xs text-gray-500"},ba=["accept","multiple"],xa={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},_a={class:"flex items-center space-x-3"},ha={class:"flex-1"},wa={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},ka={key:1,class:"space-y-2"},Ca={class:"flex items-center space-x-3 flex-1 min-w-0"},$a={class:"flex-shrink-0"},Va={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},Sa=["src","alt"],qa={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},Ta={class:"flex-1 min-w-0"},Ma={class:"text-sm font-medium text-gray-900 truncate"},Pa={class:"text-xs text-gray-500"},Aa=["onClick"],Da={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},Ra={class:"relative bg-black aspect-video"},ja=["src"],Ia={key:2,class:"absolute inset-0 pointer-events-none"},Ba={class:"w-full h-full grid grid-cols-3 grid-rows-3"},Na={class:"bg-gray-900 px-6 py-6"},Fa={key:0,class:"flex items-center justify-center space-x-6"},La={key:1,class:"flex items-center justify-center space-x-4"},Ua={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(l,{emit:c}){const g=l,b=c,r=h(null),k=h(null),y=h(!1),p=h(null),w=h(null),$=h(!1),q=h(0),S=T({get:()=>g.modelValue,set:D=>b("update:modelValue",D)}),_=()=>{var D;(D=r.value)==null||D.click()},C=D=>K(this,null,function*(){const V=Array.from(D.target.files);yield x(V),D.target.value=""}),x=D=>K(this,null,function*(){const V=[];for(const P of D){if(P.size>g.maxSize){alert(`File ${P.name} exceeds maximum size of ${_e(g.maxSize)}`);continue}let N=null;P.type.startsWith("image/")&&(N=yield s(P)),V.push({file:P,name:P.name,size:P.size,type:P.type,preview:N,uploadDate:new Date().toISOString()})}if(V.length>0){const P=g.multiple?[...S.value,...V]:V;b("update:modelValue",P),yield o(V)}}),s=D=>new Promise(V=>{const P=new FileReader;P.onload=N=>V(N.target.result),P.onerror=()=>V(null),P.readAsDataURL(D)}),o=D=>K(this,null,function*(){$.value=!0,q.value=0;try{for(let V=0;V<D.length;V++){const P=D[V],N=setInterval(()=>{q.value=Math.min(q.value+10,90)},100);yield new Promise(Te=>{b("upload",P,Te)}),clearInterval(N),q.value=(V+1)/D.length*100}}catch(V){console.error("Upload error:",V),alert("Failed to upload files. Please try again.")}finally{$.value=!1,q.value=0}}),i=D=>{const V=[...S.value];V.splice(D,1),b("update:modelValue",V)},v=()=>K(this,null,function*(){try{y.value=!0,yield A()}catch(D){console.error("Camera error:",D),alert("Unable to access camera. Please check permissions or upload a file instead."),y.value=!1}}),A=()=>K(this,null,function*(){try{const D=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});w.value=D,k.value&&(k.value.srcObject=D)}catch(D){throw D}}),B=()=>{const D=k.value,V=document.createElement("canvas");V.width=D.videoWidth,V.height=D.videoHeight,V.getContext("2d").drawImage(D,0,0,V.width,V.height),p.value=V.toDataURL("image/jpeg",.9)},G=()=>{p.value=null},Y=()=>K(this,null,function*(){if(!p.value)return;const D=yield(yield fetch(p.value)).blob(),V=new File([D],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield x([V]),Z()}),Z=()=>{w.value&&(w.value.getTracks().forEach(D=>D.stop()),w.value=null),p.value=null,y.value=!1},_e=D=>{if(D===0)return"0 Bytes";const V=1024,P=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(D)/Math.log(V));return Math.round(D/Math.pow(V,N)*100)/100+" "+P[N]};return(D,V)=>(a(),n("div",ia,[e("label",ua,[e("span",da,[R(m(l.label)+" ",1),l.required?(a(),n("span",ca,"*")):f("",!0)]),l.helpText?(a(),n("p",pa,m(l.helpText),1)):f("",!0)]),e("div",ma,[l.allowCamera?(a(),n("button",{key:0,onClick:v,type:"button",class:I(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":$.value}]),disabled:$.value},[...V[0]||(V[0]=[me('<div class="text-center" data-v-2bd160e5><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2bd160e5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2bd160e5></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2bd160e5></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2bd160e5>Take Photo</p><p class="text-xs text-gray-500" data-v-2bd160e5>Use camera</p></div>',1)])],10,va)):f("",!0),e("button",{onClick:_,type:"button",class:I(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":$.value}]),disabled:$.value},[e("div",fa,[V[1]||(V[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),V[2]||(V[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",ya,"Browse "+m(l.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:r,type:"file",accept:l.accept,multiple:l.multiple,onChange:C,class:"hidden"},null,40,ba)],10,ga)]),$.value?(a(),n("div",xa,[e("div",_a,[V[4]||(V[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",ha,[V[3]||(V[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",wa,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:ds({width:q.value+"%"})},null,4)])])])])):f("",!0),S.value.length>0?(a(),n("div",ka,[W(cs,{name:"list"},{default:te(()=>[(a(!0),n(z,null,O(S.value,(P,N)=>(a(),n("div",{key:P.name+N,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",Ca,[e("div",$a,[P.preview?(a(),n("div",Va,[e("img",{src:P.preview,alt:P.name,class:"w-full h-full object-cover"},null,8,Sa)])):(a(),n("div",qa,[...V[5]||(V[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",Ta,[e("p",Ma,m(P.name),1),e("p",Pa,m(_e(P.size)),1)]),e("button",{onClick:Te=>i(N),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...V[6]||(V[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Aa)])]))),128))]),_:1})])):f("",!0),(a(),ue(ps,{to:"body"},[y.value?(a(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:be(Z,["self"])},[e("div",Da,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[V[8]||(V[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:Z,class:"text-gray-400 hover:text-white transition-colors"},[...V[7]||(V[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ra,[p.value?(a(),n("img",{key:1,src:p.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,ja)):(a(),n("video",{key:0,ref_key:"videoElement",ref:k,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),p.value?f("",!0):(a(),n("div",Ia,[e("div",Ba,[(a(),n(z,null,O(9,P=>e("div",{key:P,class:"border border-white/20"})),64))])]))]),e("div",Na,[p.value?(a(),n("div",La,[e("button",{onClick:G,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:Y,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(a(),n("div",Fa,[e("button",{onClick:B,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...V[9]||(V[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):f("",!0)]))]))}},za=Se(Ua,[["__scopeId","data-v-2bd160e5"]]),Ea={class:"space-y-4"},Oa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ha={class:"block text-sm font-medium text-gray-700 mb-2"},Wa={key:0,class:"text-red-500"},Ga={class:"relative"},Ja=["required"],Ka=["value"],Qa={class:"block text-sm font-medium text-gray-700 mb-2"},Xa={key:0,class:"text-red-500"},Ya={class:"relative"},Za=["required","disabled"],en=["value"],tn={key:0,class:"mt-1 text-xs text-gray-500"},sn={class:"block text-sm font-medium text-gray-700 mb-2"},ln={key:0,class:"text-red-500"},on={class:"relative"},an=["required","disabled"],nn=["value"],rn={key:0,class:"mt-1 text-xs text-gray-500"},un={class:"block text-sm font-medium text-gray-700 mb-2"},dn={key:0,class:"text-red-500"},cn=["required"],pn={class:"md:col-span-2"},mn={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},vn={class:"flex items-start"},gn={class:"flex-1"},fn={class:"text-sm text-green-700 mt-1"},yn={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:c}){const g=l,b=c,r=h({street:"",barangay:"",municipality:"",province:"",zipCode:""}),k=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],y={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Parañaque City","Las Piñas City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},p={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},w=T(()=>r.value.province?y[r.value.province]||[]:[]),$=T(()=>r.value.municipality?p[r.value.municipality]||["Other - Please specify in Street field"]:[]),q=T(()=>{const x=[];return r.value.street&&x.push(r.value.street),r.value.barangay&&x.push(`Brgy. ${r.value.barangay}`),r.value.municipality&&x.push(r.value.municipality),r.value.province&&x.push(r.value.province),r.value.zipCode&&x.push(r.value.zipCode),x.length>0?x.join(", "):""}),S=()=>{r.value.municipality="",r.value.barangay="",C()},_=()=>{r.value.barangay="",C()},C=()=>{b("update:modelValue",q.value)};return de(()=>{var x;if(g.modelValue)if(typeof g.modelValue=="string"){const s=g.modelValue.split(",").map(o=>o.trim());s.length>=3&&(r.value.street=s[0]||"",r.value.barangay=((x=s[1])==null?void 0:x.replace("Brgy. ",""))||"",r.value.municipality=s[2]||"",r.value.province=s[3]||"",r.value.zipCode=s[4]||"")}else typeof g.modelValue=="object"&&(r.value=E(E({},r.value),g.modelValue))}),se(()=>g.modelValue,x=>{x&&typeof x=="object"&&(r.value=E(E({},r.value),x))}),(x,s)=>(a(),n("div",Ea,[s[18]||(s[18]=me('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",Oa,[e("div",null,[e("label",Ha,[s[5]||(s[5]=R(" Province ",-1)),l.required?(a(),n("span",Wa,"*")):f("",!0)]),e("div",Ga,[M(e("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>r.value.province=o),onChange:S,required:l.required,class:I(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value.province}])},[s[6]||(s[6]=e("option",{value:""},"Select Province",-1)),(a(),n(z,null,O(k,o=>e("option",{key:o,value:o},m(o),9,Ka)),64))],42,Ja),[[ie,r.value.province]]),s[7]||(s[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",Qa,[s[8]||(s[8]=R(" Municipality/City ",-1)),l.required?(a(),n("span",Xa,"*")):f("",!0)]),e("div",Ya,[M(e("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>r.value.municipality=o),onChange:_,required:l.required,disabled:!r.value.province,class:I(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":r.value.municipality}])},[s[9]||(s[9]=e("option",{value:""},"Select Municipality/City",-1)),(a(!0),n(z,null,O(w.value,o=>(a(),n("option",{key:o,value:o},m(o),9,en))),128))],42,Za),[[ie,r.value.municipality]]),s[10]||(s[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),r.value.province?f("",!0):(a(),n("p",tn,"Select province first"))]),e("div",null,[e("label",sn,[s[11]||(s[11]=R(" Barangay ",-1)),l.required?(a(),n("span",ln,"*")):f("",!0)]),e("div",on,[M(e("select",{"onUpdate:modelValue":s[2]||(s[2]=o=>r.value.barangay=o),onChange:C,required:l.required,disabled:!r.value.municipality,class:I(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":r.value.barangay}])},[s[12]||(s[12]=e("option",{value:""},"Select Barangay",-1)),(a(!0),n(z,null,O($.value,o=>(a(),n("option",{key:o,value:o},m(o),9,nn))),128))],42,an),[[ie,r.value.barangay]]),s[13]||(s[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),r.value.municipality?f("",!0):(a(),n("p",rn,"Select municipality first"))]),e("div",null,[e("label",un,[s[14]||(s[14]=R(" Street / House No. ",-1)),l.required?(a(),n("span",dn,"*")):f("",!0)]),M(e("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>r.value.street=o),onInput:C,type:"text",required:l.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:I(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value.street}])},null,42,cn),[[L,r.value.street]])]),e("div",pn,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[R(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),M(e("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>r.value.zipCode=o),onInput:C,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[L,r.value.zipCode]])])]),q.value?(a(),n("div",mn,[e("div",vn,[s[17]||(s[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",gn,[s[16]||(s[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",fn,m(q.value),1)])])])):f("",!0)]))}},bn={class:"inline-block relative group"},xn={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:l=>["top","bottom","left","right"].includes(l)}},setup(l){const c=l,g=h(!1),b=T(()=>{switch(c.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),r=T(()=>{switch(c.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(k,y)=>(a(),n("div",bn,[yt(k.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:y[0]||(y[0]=p=>g.value=!0),onMouseleave:y[1]||(y[1]=p=>g.value=!1)},[...y[2]||(y[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),W(ms,{name:"tooltip"},{default:te(()=>[g.value?(a(),n("div",{key:0,class:I(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",b.value]),style:{"max-width":"300px","white-space":"normal"}},[yt(k.$slots,"default",{},()=>[R(m(l.text),1)],!0),e("div",{class:I(["tooltip-arrow",r.value])},null,2)],2)):f("",!0)]),_:3})]))}},Fe=Se(xn,[["__scopeId","data-v-1fa5e90e"]]);function St(l,c){if(!l||l.trim()==="")return!0;let g=l.trim();g.startsWith("eval:")&&(g=g.substring(5).trim());try{return new Function("formData",`
      'use strict';
      try {
        return Boolean(${g});
      } catch (e) {
        console.warn('[Conditional Logic] Evaluation error:', e.message);
        return false;
      }
    `)(c)}catch(b){return console.error("[Conditional Logic] Failed to evaluate expression:",l,b),!0}}function _n(l,c){return!l||!l.is_enabled?!1:l.depends_on?St(l.depends_on,c):!0}function hn(l,c){return l?l.depends_on?St(l.depends_on,c):!0:!1}function wn(l){return l?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l):!0}function kn(l){return l?/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(l.replace(/\s/g,"")):!0}function Cn(l){if(!l)return!0;try{return new URL(l),!0}catch(c){return!1}}function $n(l){return l===""||l===null||l===void 0?!0:!isNaN(parseFloat(l))&&isFinite(l)}function Vn(l,c,g){let b=l.trim();b.startsWith("eval:")&&(b=b.substring(5).trim());try{return new Function("formData","value",`
			'use strict';
			try {
				return Boolean(${b});
			} catch (e) {
				console.warn('[Field Validation] Evaluation error:', e.message);
				return true; // Fail open on evaluation error
			}
		`)(g,c)}catch(r){return console.error("[Field Validation] Failed to evaluate expression:",l,r),!0}}function Sn(l,c,g={}){if(!c)return{valid:!0,message:""};switch(c.toLowerCase()){case"email":if(!wn(l))return{valid:!1,message:"Please enter a valid email address"};break;case"phone":if(!kn(l))return{valid:!1,message:"Please enter a valid phone number"};break;case"url":if(!Cn(l))return{valid:!1,message:"Please enter a valid URL"};break;case"number":if(!$n(l))return{valid:!1,message:"Please enter a valid number"};break;default:if(c.startsWith("eval:")&&!Vn(c,l,g))return{valid:!1,message:"Validation failed"}}return{valid:!0,message:""}}const qn={class:"space-y-6"},Tn={key:0,class:"form-group"},Mn={key:1,class:"form-group"},Pn=["for"],An={key:0,class:"text-red-500 ml-1"},Dn={class:"relative"},Rn=["id","onUpdate:modelValue","onBlur","required","placeholder"],jn={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},In=["innerHTML"],Bn={key:0,class:"mt-1 text-xs text-red-600"},Nn={key:1,class:"mt-1 text-xs text-gray-500"},Fn={key:2,class:"form-group"},Ln=["for"],Un={key:0,class:"text-red-500 ml-1"},zn={class:"relative"},En=["id","onUpdate:modelValue","onBlur","required"],On={value:""},Hn=["value"],Wn={key:0,class:"mt-1 text-xs text-red-600"},Gn={key:1,class:"mt-1 text-xs text-gray-500"},Jn={key:3,class:"form-group"},Kn={class:"flex items-center h-5"},Qn=["id","onUpdate:modelValue","onChange","required"],Xn={class:"ml-3 text-sm"},Yn=["for"],Zn={key:0,class:"text-red-500 ml-1"},er={key:0,class:"mt-1 text-xs text-red-600"},tr={key:1,class:"mt-1 text-xs text-gray-500"},sr={key:4,class:"form-group"},lr=["for"],or={key:0,class:"text-red-500 ml-1"},ar=["id","onUpdate:modelValue","onBlur","required","placeholder"],nr={key:0,class:"mt-1 text-xs text-red-600"},rr={key:1,class:"mt-1 text-xs text-gray-500"},ir={key:5,class:"form-group"},ur=["for"],dr={key:0,class:"text-red-500 ml-1"},cr={class:"relative"},pr=["id","onUpdate:modelValue","onBlur","required"],mr={key:0,class:"mt-1 text-xs text-red-600"},vr={key:1,class:"mt-1 text-xs text-gray-500"},gr={key:6,class:"form-group"},fr=["for"],yr={key:0,class:"text-red-500 ml-1"},br={class:"relative"},xr=["id","onUpdate:modelValue","required","placeholder"],_r={key:0,class:"mt-1 text-xs text-gray-500"},hr={key:7,class:"form-group"},wr=["for"],kr={key:0,class:"text-red-500 ml-1"},Cr={class:"relative"},$r=["id","onUpdate:modelValue","required","placeholder"],Vr={key:0,class:"mt-1 text-xs text-gray-500"},Sr={key:8,class:"form-group"},qr=["for"],Tr={key:0,class:"text-red-500 ml-1"},Mr={class:"relative"},Pr=["id","onUpdate:modelValue","onBlur","required"],Ar={key:0,class:"mt-1 text-xs text-red-600"},Dr={key:1,class:"mt-1 text-xs text-gray-500"},Rr={key:9,class:"form-group"},jr={key:10,class:"form-group"},Ir={class:"text-sm text-gray-500 italic"},Br={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(l,{emit:c}){const g=l,b=c,r=T({get:()=>g.modelValue,set:C=>b("update:modelValue",C)}),k=T(()=>g.fields.filter(C=>hn(C,r.value))),y=C=>{var o;const x=((o=C.parent_section_code)==null?void 0:o.toLowerCase())||"";return["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(x)&&C.field_name==="address_line"&&C.field_type==="Data"},p=C=>{var s;if(C.placeholder)return C.placeholder;const x=((s=C.field_label)==null?void 0:s.toLowerCase())||"";return x.includes("name")?"e.g., Juan Dela Cruz":x.includes("email")?"e.g., juan@example.com":x.includes("phone")||x.includes("mobile")||x.includes("contact")?"e.g., 0917 123 4567":x.includes("age")?"e.g., 25":x.includes("occupation")?"e.g., Teacher":x.includes("income")||x.includes("salary")?"e.g., 15000":`Enter ${C.field_label}`},w=C=>{var s;const x=((s=C.field_label)==null?void 0:s.toLowerCase())||"";return x.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':x.includes("phone")||x.includes("mobile")||x.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':x.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},$=C=>C?C.split(`
`).map(x=>x.trim()).filter(Boolean):[],q=h({}),S=C=>{if(!C.validation){delete q.value[C.field_name];return}const x=r.value[C.field_name],s=Sn(x,C.validation,r.value);s.valid?delete q.value[C.field_name]:q.value[C.field_name]=s.message},_=C=>q.value[C]||"";return se(()=>g.fields,C=>{C.forEach(x=>{x.default_value&&!r.value[x.field_name]&&(x.default_value==="Today"&&x.field_type==="Date"?r.value[x.field_name]=new Date().toISOString().split("T")[0]:r.value[x.field_name]=x.default_value)})},{immediate:!0}),(C,x)=>(a(),n("div",qn,[(a(!0),n(z,null,O(k.value,s=>(a(),n("div",{key:s.field_name,class:"field-wrapper"},[y(s)?(a(),n("div",Tn,[W(yn,{modelValue:r.value[s.field_name],"onUpdate:modelValue":o=>r.value[s.field_name]=o,required:s.is_required},null,8,["modelValue","onUpdate:modelValue","required"])])):s.field_type==="Data"?(a(),n("div",Mn,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,m(s.field_label),1),s.is_required?(a(),n("span",An,"*")):f("",!0),s.help_text||s.description?(a(),ue(Fe,{key:1,text:s.help_text||s.description},null,8,["text"])):f("",!0)],8,Pn),e("div",Dn,[M(e("input",{id:s.field_name,type:"text","onUpdate:modelValue":o=>r.value[s.field_name]=o,onBlur:o=>S(s),required:s.is_required,class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}]),placeholder:p(s)},null,42,Rn),[[L,r.value[s.field_name]]]),w(s)?(a(),n("div",jn,[e("span",{innerHTML:w(s),class:"text-gray-400"},null,8,In)])):f("",!0)]),_(s.field_name)?(a(),n("p",Bn,m(_(s.field_name)),1)):s.description?(a(),n("p",Nn,m(s.description),1)):f("",!0)])):s.field_type==="Select"?(a(),n("div",Fn,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,m(s.field_label),1),s.is_required?(a(),n("span",Un,"*")):f("",!0),s.help_text||s.description?(a(),ue(Fe,{key:1,text:s.help_text||s.description},null,8,["text"])):f("",!0)],8,Ln),e("div",zn,[M(e("select",{id:s.field_name,"onUpdate:modelValue":o=>r.value[s.field_name]=o,onBlur:o=>S(s),required:s.is_required,class:I(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":r.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}])},[e("option",On,"Select "+m(s.field_label),1),(a(!0),n(z,null,O($(s.options),o=>(a(),n("option",{key:o,value:o},m(o),9,Hn))),128))],42,En),[[ie,r.value[s.field_name]]]),x[0]||(x[0]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),_(s.field_name)?(a(),n("p",Wn,m(_(s.field_name)),1)):s.description?(a(),n("p",Gn,m(s.description),1)):f("",!0)])):s.field_type==="Check"?(a(),n("div",Jn,[e("div",{class:I(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!_(s.field_name),"border-red-500 bg-red-50":_(s.field_name)}])},[e("div",Kn,[M(e("input",{id:s.field_name,type:"checkbox","onUpdate:modelValue":o=>r.value[s.field_name]=o,onChange:o=>S(s),required:s.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,Qn),[[ee,r.value[s.field_name]]])]),e("div",Xn,[e("label",{for:s.field_name,class:"font-medium text-gray-700 cursor-pointer"},[R(m(s.field_label)+" ",1),s.is_required?(a(),n("span",Zn,"*")):f("",!0)],8,Yn),_(s.field_name)?(a(),n("p",er,m(_(s.field_name)),1)):s.description?(a(),n("p",tr,m(s.description),1)):f("",!0)])],2)])):s.field_type==="Text"?(a(),n("div",sr,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[R(m(s.field_label)+" ",1),s.is_required?(a(),n("span",or,"*")):f("",!0)],8,lr),M(e("textarea",{id:s.field_name,"onUpdate:modelValue":o=>r.value[s.field_name]=o,onBlur:o=>S(s),required:s.is_required,rows:"4",class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":r.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}]),placeholder:p(s)},null,42,ar),[[L,r.value[s.field_name]]]),_(s.field_name)?(a(),n("p",nr,m(_(s.field_name)),1)):s.description?(a(),n("p",rr,m(s.description),1)):f("",!0)])):s.field_type==="Date"?(a(),n("div",ir,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,m(s.field_label),1),s.is_required?(a(),n("span",dr,"*")):f("",!0),s.help_text||s.description?(a(),ue(Fe,{key:1,text:s.help_text||s.description},null,8,["text"])):f("",!0)],8,ur),e("div",cr,[M(e("input",{id:s.field_name,type:"date","onUpdate:modelValue":o=>r.value[s.field_name]=o,onBlur:o=>S(s),required:s.is_required,class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}])},null,42,pr),[[L,r.value[s.field_name]]]),x[1]||(x[1]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),_(s.field_name)?(a(),n("p",mr,m(_(s.field_name)),1)):s.description?(a(),n("p",vr,m(s.description),1)):f("",!0)])):s.field_type==="Int"?(a(),n("div",gr,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,m(s.field_label),1),s.is_required?(a(),n("span",yr,"*")):f("",!0),s.help_text||s.description?(a(),ue(Fe,{key:1,text:s.help_text||s.description},null,8,["text"])):f("",!0)],8,fr),e("div",br,[M(e("input",{id:s.field_name,type:"number","onUpdate:modelValue":o=>r.value[s.field_name]=o,required:s.is_required,step:"1",class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[s.field_name]}]),placeholder:p(s)},null,10,xr),[[L,r.value[s.field_name],void 0,{number:!0}]]),x[2]||(x[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),s.description?(a(),n("p",_r,m(s.description),1)):f("",!0)])):s.field_type==="Float"?(a(),n("div",hr,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[R(m(s.field_label)+" ",1),s.is_required?(a(),n("span",kr,"*")):f("",!0)],8,wr),e("div",Cr,[M(e("input",{id:s.field_name,type:"number","onUpdate:modelValue":o=>r.value[s.field_name]=o,required:s.is_required,step:"0.01",class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[s.field_name]}]),placeholder:p(s)},null,10,$r),[[L,r.value[s.field_name],void 0,{number:!0}]]),x[3]||(x[3]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),s.description?(a(),n("p",Vr,m(s.description),1)):f("",!0)])):s.field_type==="Currency"?(a(),n("div",Sr,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[R(m(s.field_label)+" ",1),s.is_required?(a(),n("span",Tr,"*")):f("",!0)],8,qr),e("div",Mr,[x[4]||(x[4]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-base font-medium"},"₱")],-1)),M(e("input",{id:s.field_name,type:"number","onUpdate:modelValue":o=>r.value[s.field_name]=o,onBlur:o=>S(s),required:s.is_required,step:"0.01",class:I(["block w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}]),placeholder:"0.00"},null,42,Pr),[[L,r.value[s.field_name],void 0,{number:!0}]])]),_(s.field_name)?(a(),n("p",Ar,m(_(s.field_name)),1)):s.description?(a(),n("p",Dr,m(s.description),1)):f("",!0)])):s.field_type==="Attach"||s.field_type==="Attach Image"?(a(),n("div",Rr,[W(za,{label:s.field_label,required:s.is_required,accept:s.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:r.value[s.field_name],"onUpdate:modelValue":o=>r.value[s.field_name]=o},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):(a(),n("div",jr,[e("div",Ir,' Field type "'+m(s.field_type)+'" not yet supported for '+m(s.field_label),1)]))]))),128))]))}},Ze=Se(Br,[["__scopeId","data-v-e598721a"]]),Nr={class:"dynamic-step max-w-4xl mx-auto"},Fr={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},Lr={class:"flex items-start"},Ur={class:"ml-4 flex-1"},zr={class:"text-2xl font-bold text-blue-900"},Er={key:0,class:"mt-2 text-sm text-blue-700"},Or={class:"space-y-6"},Hr={class:"mb-4 pb-3 border-b-2 border-gray-200"},Wr={class:"flex items-center"},Gr={class:"text-lg font-semibold text-gray-900"},Jr={key:0,class:"text-red-500 ml-1"},Kr={key:0,class:"text-sm text-gray-600 mt-0.5"},Qr={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},Xr={class:"section-content"},Yr={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},Zr={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(l,{emit:c}){const g=l,b=c,r=T({get:()=>g.modelValue,set:p=>b("update:modelValue",p)}),k=T(()=>g.stepConfig.sections?g.stepConfig.sections.filter(p=>_n(p,formData.value)):[]),y=p=>[p.section_title];return se(()=>g.stepConfig,p=>{p.sections&&p.sections.forEach(w=>{w.fields.forEach($=>{$.default_value&&!r.value[$.field_name]&&($.default_value==="Today"&&$.field_type==="Date"?r.value[$.field_name]=new Date().toISOString().split("T")[0]:r.value[$.field_name]=$.default_value)})})},{immediate:!0,deep:!0}),(p,w)=>(a(),n("div",Nr,[e("div",Fr,[e("div",Lr,[w[3]||(w[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Ur,[e("h2",zr,m(l.stepConfig.step_title),1),l.stepDescription?(a(),n("p",Er,m(l.stepDescription),1)):f("",!0)])])]),e("div",Or,[(a(!0),n(z,null,O(k.value,$=>(a(),n("div",{key:$.section_code,class:"section"},[e("div",Hr,[e("div",Wr,[w[4]||(w[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",Gr,[R(m($.section_title)+" ",1),$.is_required?(a(),n("span",Jr,"*")):f("",!0)]),$.section_description?(a(),n("p",Kr,m($.section_description),1)):f("",!0)])]),$.is_required?(a(),n("div",Qr,[...w[5]||(w[5]=[R(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),R(" are required ",-1)])])):f("",!0)]),e("div",Xr,[$.section_type==="Tab"?(a(),ue(oe($s),{key:0},{default:te(()=>[W(oe(Vs),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:te(()=>[(a(!0),n(z,null,O(y($),(q,S)=>(a(),ue(oe(Ss),{key:S,class:I(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",p.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:te(({selected:_})=>[R(m(q),1)]),_:2},1032,["class"]))),128))]),_:2},1024),W(oe(qs),null,{default:te(()=>[(a(!0),n(z,null,O(y($),(q,S)=>(a(),ue(oe(Ts),{key:S},{default:te(()=>[W(Ze,{fields:$.fields,modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=_=>r.value=_)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):$.section_type==="Accordion"?(a(),ue(oe(xs),{key:1},{default:te(({open:q})=>[W(oe(_s),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:te(()=>[e("span",null,m($.section_title),1),W(oe(ra),{class:I([q?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),W(oe(hs),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:te(()=>[W(Ze,{fields:$.fields,modelValue:r.value,"onUpdate:modelValue":w[1]||(w[1]=S=>r.value=S)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(a(),n("div",Yr,[W(Ze,{fields:$.fields,modelValue:r.value,"onUpdate:modelValue":w[2]||(w[2]=q=>r.value=q)},null,8,["fields","modelValue"])]))])]))),128))])]))}},ei=Se(Zr,[["__scopeId","data-v-6bf799f6"]]),ti={class:"min-h-screen bg-gray-50"},si={class:"bg-white shadow-sm border-b border-gray-200"},li={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},oi={class:"flex items-center justify-between py-4"},ai={class:"flex items-center space-x-3"},ni={class:"text-sm text-gray-500"},ri={class:"flex items-center gap-2"},ii={class:"bg-white border-b border-gray-200"},ui={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},di={class:"flex items-center justify-between mb-2"},ci={class:"flex flex-col items-center"},pi={key:0},mi={key:1},vi={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},gi={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},fi={key:0},yi={key:1},bi={key:2},xi={key:4},_i={class:"mt-8 flex justify-between items-center"},hi={key:1},wi=["disabled"],ki=["disabled"],Ci={key:0},$i={key:1},Vi={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Si={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},qi={class:"flex items-center justify-between"},Ti={class:"text-lg font-semibold text-gray-900"},Mi={class:"px-6 py-4 space-y-4"},Pi={class:"border-t border-gray-200 pt-4"},Ai={class:"grid md:grid-cols-2 gap-4"},Di={class:"border-t border-gray-200 pt-4"},Ri={class:"space-y-3"},ji={class:"border-t border-gray-200 pt-4"},Ii={class:"flex items-start mb-3"},Bi={key:0,class:"ml-7 space-y-3"},Ni={key:0,class:"mt-2 text-xs text-green-600 flex items-center gap-1"},Fi={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Li={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Ui={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},zi={class:"flex items-center justify-between"},Ei={class:"text-lg font-semibold text-gray-900"},Oi={class:"px-6 py-4 space-y-4"},Hi={class:"border-t border-gray-200 pt-4"},Wi={class:"space-y-3"},Gi={class:"border-t border-gray-200 pt-4"},Ji={class:"space-y-3"},Ki={key:0,class:"mt-2 text-xs text-green-600 flex items-center gap-1"},Qi={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Xi={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"},Yi={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},Zi={class:"flex items-center justify-between"},eu={class:"text-lg font-semibold text-gray-900"},tu={class:"px-6 py-4 space-y-4"},su={class:"border-t border-gray-200 pt-4"},lu={class:"grid md:grid-cols-3 gap-3"},ou={class:"flex items-center"},au={class:"flex items-center"},nu={class:"flex items-center"},ru={class:"flex items-center"},iu={class:"border-t border-gray-200 pt-4"},uu={class:"space-y-2 p-3 border border-gray-200 rounded bg-gray-50"},du={class:"flex items-center"},cu={class:"flex items-center"},pu={class:"flex items-center"},mu={class:"flex items-center"},vu={class:"flex items-center"},gu={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},fu={class:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col"},yu={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},bu={class:"flex items-center justify-between"},xu={class:"flex-1 overflow-y-auto"},_u={class:"grid md:grid-cols-3 gap-6 p-6"},hu={class:"md:col-span-2 space-y-4"},wu={class:"flex items-center gap-2 mb-4 pb-4 border-b border-gray-200"},ku=["value"],Cu={class:"ml-auto text-xs text-gray-500"},$u={key:0,class:"text-center py-12"},Vu={key:1,class:"space-y-3"},Su={class:"flex items-start justify-between mb-2"},qu={class:"flex-1"},Tu={class:"flex items-center gap-2 mb-1"},Mu={class:"text-sm font-semibold text-gray-900"},Pu={key:0,class:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-mono rounded"},Au={class:"flex items-center gap-2 mb-2"},Du={class:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded"},Ru={key:0,class:"px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded"},ju={key:1,class:"px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded"},Iu=["innerHTML"],Bu=["onClick"],Nu={key:2,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},Fu={class:"md:col-span-1 bg-gray-50 rounded-lg p-4 border border-gray-200"},Lu={class:"text-sm font-semibold text-gray-900 mb-3 flex items-center justify-between"},Uu={class:"px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full"},zu={key:0,class:"space-y-2 max-h-[600px] overflow-y-auto"},Eu={class:"flex items-start justify-between mb-1"},Ou={class:"flex items-center gap-1"},Hu={class:"px-1.5 py-0.5 bg-gray-100 text-gray-700 font-mono text-xs rounded"},Wu={class:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded"},Gu=["onClick"],Ju=["innerHTML"],Ku={key:1,class:"text-center py-8 text-xs text-gray-500"},Qu={key:0,class:"border-t border-gray-200 bg-gray-50 p-6"},Xu={class:"text-sm font-semibold text-gray-900 mb-4"},Yu={class:"grid md:grid-cols-2 gap-4 mb-4"},Zu=["value"],ed={class:"mb-4"},td={class:"flex justify-end gap-2 mt-4"},sd={class:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end"},rd={__name:"NewRequest",setup(l){const c=wt(),g=vs(),b=gs(),r=h(null),k=h(!1),y=h(null),p=h(0),w=T(()=>o.value.length),$=h(!1),q=h(!1),S=h([]);h(null),h(!1);const _=h(!1);h(!1);const C=h([]),x=h(!1),s=h(!1),o=T(()=>{const d=[];console.log("[Steps] Computing steps..."),console.log("[Steps] councilStore.isCouncilLocked:",b.isCouncilLocked),console.log("[Steps] route.query.type:",g.query.type),console.log("[Steps] formData.value.request_type:",i.value.request_type),b.isCouncilLocked?console.log("[Steps] Skipped Council step (locked)"):(d.push({title:"Council",number:d.length+1}),console.log("[Steps] Added Council step"));const t=g.query.type||g.query.locked==="true"&&i.value.request_type,u=b.isCouncilLocked&&t;return console.log("[Steps] hasPreselectedType:",t),console.log("[Steps] skipTypeStep:",u),u?console.log("[Steps] Skipped Type step (locked + preselected)"):(d.push({title:"Type",number:d.length+1}),console.log("[Steps] Added Type step")),d.push({title:"Process Info",number:d.length+1}),console.log("[Steps] Added Process Info step"),s.value&&C.value.length>0&&C.value.forEach((j,ne)=>{d.push({title:j.step_title,number:d.length+1,code:j.step_code,config:j,isDynamic:!0})}),d.push({title:"Review",number:d.length+1}),console.log("[Steps] Final steps:",d.map(j=>j.title).join(" → ")),console.log("[Steps] Total steps:",d.length),d}),i=h({council:"",request_type:"",request_category:"",property:"",property_address:"",legal_description:"",valuation_reference:"",parcel_id:"",ct_reference:"",property_coordinates:"",hazard_data:null,zone:"",activity_zone:"",brief_description:"",detailed_description:"",estimated_value:null,proposed_start_date:"",terms_accepted:!1,applicant_phone:"",applicant_type:"",submitted_on_behalf_of:"Myself",company_account:null,acting_on_behalf:!1,applicant_name:"",applicant_email:"",consent_types:[],activity_status:"",applicant_reference_number:"",delivery_preference:"",pim_reference:"",building_height:null,building_floor_area:null,earthworks_volume:null,earthworks_vertical_alteration:null,vehicle_movements_daily:null,parking_spaces_provided:null,hours_of_operation:"",consent_term_requested:"",site_topography:"",existing_vegetation_description:"",watercourses_present:!1,watercourse_description:"",existing_infrastructure:"",contamination_status_hail:"",boundary_description:"",boundary_activity_description:"",boundary_owner_approval_obtained:!1,boundary_approval_date:"",boundary_approval_document:null,natural_hazards:[],nes_assessments:[],hail_activities:[],confidential_information_claimed:!1,confidential_information_reason:"",assessment_of_effects:"",effects_on_people:"",physical_effects:"",earthworks_effects:"",discharge_contaminants_effects:"",ecosystem_effects:"",hazard_risk_assessment:"",cultural_effects:"",aee_document:null,aee_activity_description:"",aee_activity_status:"",aee_existing_environment:"",aee_site_area:null,aee_current_use:"",aee_zoning:"",aee_overlays:"",aee_designations:"",aee_part2_assessment:"",aee_plan_rules:[],aee_compliance_standards:[],aee_written_approvals:[],aee_proposed_conditions:[],aee_consultation_summary:"",alternatives_considered:"",mitigation_proposed:"",applicant_is_not_owner:!1,owner_name:"",owner_email:"",owner_phone:"",owner_address:"",certificate_of_title_document:null,declaration_rma_compliance:!1,declaration_public_information:!1,declaration_authorized:!1,invoice_to:"Applicant",invoice_name:"",invoice_email:"",invoice_address:"",purchase_order_number:"",transfer_deposit_required:!1,transfer_deposit_consent_number:"",affected_parties:[],written_approvals_obtained:0,iwi_consultation_undertaken:!1,iwi_consulted:"",cultural_impact_assessment:null,iwi_response_summary:"",specialist_reports:[],proposed_conditions:[]});h(""),h([]),h(!1),h(!1);const v=h(null),A=h([]),B=h({}),G=d=>(B.value[d]||(B.value[d]={hazard_type:d,present:!0,risk_level:"",assessment_notes:"",mitigation_required:!1}),B.value[d]);se(A,d=>{i.value.natural_hazards=d.map(t=>G(t))},{deep:!0}),se(B,()=>{i.value.natural_hazards=A.value.map(d=>G(d))},{deep:!0});const Y=[{value:"Contaminated Soil (HAIL)",label:"NES for Assessing and Managing Contaminants in Soil (HAIL)"},{value:"Air Quality",label:"NES for Air Quality"},{value:"Drinking Water",label:"NES for Sources of Human Drinking Water"},{value:"Freshwater",label:"NES for Freshwater Management"},{value:"Plantation Forestry",label:"NES for Plantation Forestry"},{value:"Electricity Transmission",label:"NES for Electricity Transmission Activities"},{value:"Telecommunications",label:"NES for Telecommunication Facilities"},{value:"Other",label:"Other NES"}],Z=h({}),_e=d=>(Z.value[d]||(Z.value[d]={nes_type:d,applies:!1,description:"",compliance_notes:""}),Z.value[d]);se(Z,()=>{i.value.nes_assessments=Y.filter(d=>_e(d.value).applies).map(d=>_e(d.value))},{deep:!0}),T(()=>i.value.nes_assessments.some(d=>d.nes_type&&d.nes_type.includes("HAIL")));const D=h(!1),V=h(null),P=h({activity_description:"",hail_category:"",currently_undertaken:!1,previously_undertaken:!1,likely_undertaken:!1,preliminary_investigation_done:!1,proposed_activities:[],notes:""}),N=h({fuel:!1,disturb:!1,sample:!1,subdivide:!1,change:!1}),Te=()=>{if(!P.value.activity_description){alert("Please enter activity description");return}const d=[];N.value.fuel&&d.push({activity_type:"Removing or replacing fuel storage system"}),N.value.disturb&&d.push({activity_type:"Disturbing soil"}),N.value.sample&&d.push({activity_type:"Sampling soil"}),N.value.subdivide&&d.push({activity_type:"Subdividing land"}),N.value.change&&d.push({activity_type:"Changing use of land"});const t=Ce(E({},P.value),{proposed_activities:d});V.value!==null?i.value.hail_activities[V.value]=t:i.value.hail_activities.push(t),D.value=!1},We=()=>{D.value=!1};h({building:!0,earthworks:!1,traffic:!1,operations:!1});const qt=h(JSON.parse(JSON.stringify(i.value))),Tt=T(()=>{const d=E({},i.value),t=E({},qt.value);delete d.terms_accepted,delete t.terms_accepted;const u=JSON.stringify(d),j=JSON.stringify(t);return u!==j}),he=T(()=>i.value.request_category==="Resource Consent"),we=d=>{var t;return((t=i.value.consent_types)==null?void 0:t.some(u=>u.consent_type===d))||!1},ot=T(()=>we("Land Use")),Ge=T(()=>we("Subdivision")),Mt=T(()=>we("Water Permit")),Pt=T(()=>we("Discharge Permit")),At=T(()=>we("Coastal Permit"));T(()=>ot.value||Ge.value),T(()=>{const d=i.value.activity_status==="Controlled",t=!Ge.value;return d&&t&&he.value}),T(()=>(ot.value||Ge.value)&&!(Mt.value||Pt.value||At.value)),T(()=>{if(!i.value.activity_status)return null;switch(i.value.activity_status){case"Non-Complying":return"⚠️ Non-complying activities face higher scrutiny and longer processing times. Consider council meeting.";case"Discretionary":return"ℹ️ Discretionary activities may require public notification depending on effects assessment.";case"Controlled":return"✓ Controlled activities must be granted consent. Council will focus on appropriate conditions.";default:return null}});const at=T(()=>Tt.value||S.value.length>0),ae=h({data:[],loading:!1,error:null}),Dt=bt({url:"frappe.client.get_list",params:{doctype:"Property",fields:["name","property_id","street_address","suburb","city","legal_description","certificate_of_title"],limit_page_length:100},auto:!1}),Me=d=>K(this,null,function*(){if(console.log("[NewRequest] onCouncilChange called with:",d),console.log("[NewRequest] formData.value.council is now:",i.value.council),!d){ae.value={data:[],loading:!1,error:null};return}ae.value.loading=!0,ae.value.error=null;try{yield b.loadRequestTypesForCouncil(d),ae.value.data=b.availableRequestTypes,console.log(`[NewRequest] Loaded ${ae.value.data.length} request types for council ${d}`)}catch(t){ae.value.error=t.message||"Failed to load request types",console.error("[NewRequest] Failed to load request types:",t)}finally{ae.value.loading=!1}}),Rt=()=>{confirm("Are you sure you want to leave? Any unsaved changes will be lost.")&&c.push({name:"Dashboard"})},jt=d=>d<p.value||d===p.value?"bg-blue-600 text-white":"bg-gray-200 text-gray-600",It=d=>K(this,null,function*(){console.log("[NewRequest] Selecting Request Type:",d.name,d.type_name),i.value.request_type=d.name,i.value.request_category=d.category||"",v.value=d,console.log("[NewRequest] Form data updated:"),console.log("  request_type:",i.value.request_type),console.log("  request_category:",i.value.request_category),console.log("  council:",i.value.council),console.log("  formData.value:",i.value),d.category==="Resource Consent"&&et.user&&et.user!=="Guest"&&Dt.fetch(),yield nt(d.name)}),nt=d=>K(this,null,function*(){if(!d||!i.value.council){console.log("[NewRequest] Skipping step config load - missing requestType or council");return}try{x.value=!0,console.log("[NewRequest] Loading step config for:",d,"council:",i.value.council);const t=yield Ne("lodgeick.api.get_request_type_steps",{request_type:d,council_code:i.value.council});console.log("[NewRequest] Step config API result:",t),t&&t.uses_config&&t.steps&&t.steps.length>0?(C.value=t.steps,s.value=!0,console.log("[NewRequest] Loaded",C.value.length,"configured steps")):(C.value=[],s.value=!1,console.log("[NewRequest] No step configuration found - using hardcoded flow"))}catch(t){console.error("[NewRequest] Error loading step configuration:",t),C.value=[],s.value=!1}finally{x.value=!1}}),Je=T(()=>{var t,u,j,ne,J;switch(p.value){case 1:return!!i.value.council;case 2:return!!i.value.request_type;case 3:return!0;case 4:return!0;case 5:if(he.value){const le=i.value.consent_types;if(le==null?void 0:le.some(ke=>ke.consent_type==="Land Use"||ke.consent_type==="Subdivision")){const ke=i.value.natural_hazards,es=i.value.no_natural_hazards_confirmed;return ke&&ke.length>0||es}return!0}return!0;case 6:return!0;case 7:return!0;case 8:return!0;case 9:return!0;case 10:return he.value?i.value.aee_completion_method==="upload"?!!i.value.aee_document&&!!i.value.aee_document_confirmed:!!((t=i.value.aee_activity_description)!=null&&t.trim())&&!!((u=i.value.aee_existing_environment)!=null&&u.trim())&&!!((j=i.value.assessment_of_effects)!=null&&j.trim())&&!!i.value.aee_inline_confirmed:!0;case 11:if(he.value){const le=i.value.declaration_rma_compliance&&i.value.declaration_public_information&&i.value.declaration_authorized,mt=!!((ne=i.value.applicant_signature_first_name)!=null&&ne.trim())&&!!((J=i.value.applicant_signature_last_name)!=null&&J.trim())&&!!i.value.applicant_signature_date;return le&&mt}return!0;default:return!0}}),Bt=d=>K(this,null,function*(){try{const u=yield(yield fetch("/api/method/lodgeick.api.load_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:d})})).json();if(u.message&&u.message.success)i.value=u.message.form_data||{},p.value=u.message.current_step||1,console.log(`Draft loaded successfully. Resuming at step ${p.value}`);else throw new Error(u.message||"Failed to load draft")}catch(t){console.error("Error loading draft:",t),alert("Failed to load draft. Starting new application.")}}),rt=(d=!1)=>K(this,null,function*(){$.value=!0;try{const u=yield(yield fetch("/api/method/lodgeick.api.create_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({data:i.value,current_step:p.value,total_steps:w.value})})).json();if(u.message&&u.message.success)return u.message.request_id&&!i.value.request_id&&(i.value.request_id=u.message.request_id),alert(`Draft saved successfully! Request ID: ${u.message.request_number}`),d&&c.push({name:"Dashboard"}),u.message;throw new Error(u.message||"Failed to save draft")}catch(t){return console.error("Error saving draft:",t),alert("Failed to save draft. Please try again."),null}finally{$.value=!1}}),it=()=>{var t;const d=(t=b.councils)==null?void 0:t.find(u=>u.council_code===i.value.council);return(d==null?void 0:d.council_name)||"Council"},Nt=()=>{var t;const d=(t=ae.data)==null?void 0:t.find(u=>u.name===i.value.request_type);return(d==null?void 0:d.type_name)||"N/A"},Ft=()=>{var t;const d=(t=ae.data)==null?void 0:t.find(u=>u.name===i.value.request_type);return d!=null&&d.base_fee?`$${d.base_fee}`:"TBD"},ut=()=>{Je.value&&p.value++},dt=()=>{if(!s.value||C.value.length===0)return null;const d=o.value.findIndex(u=>u.title==="Process Info"),t=p.value-d-1;return t>=0&&t<C.value.length?C.value[t]:null},ge=()=>{const d=p.value>=0&&p.value<o.value.length?o.value[p.value].title:"";return console.log("[getCurrentStepTitle] currentStep:",p.value,"title:",d,"allSteps:",o.value.map(t=>t.title).join(" → ")),d},Lt=()=>K(this,null,function*(){yield Ut()}),Ut=()=>K(this,null,function*(){if(!i.value.declaration_rma_compliance||!i.value.declaration_public_information||!i.value.declaration_authorized){alert("Please confirm all three statutory declarations before submitting your application");return}q.value=!0;try{const t=yield(yield fetch("/api/method/lodgeick.api.create_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({data:i.value})})).json();if(!t.message||!t.message.success)throw new Error("Failed to create request");const u=t.message.request_id;if(S.value.length>0)for(const J of S.value){const le=new FormData;le.append("file",J),le.append("doctype","Request"),le.append("docname",u),le.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:le})}if(i.value.certificate_of_title_document){const J=new FormData;J.append("file",i.value.certificate_of_title_document),J.append("doctype","Request"),J.append("docname",u),J.append("fieldname","certificate_of_title_document"),J.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:J})}if(i.value.aee_document){const J=new FormData;J.append("file",i.value.aee_document),J.append("doctype","Resource Consent Application"),J.append("docname",u),J.append("fieldname","aee_document"),J.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:J})}const ne=yield(yield fetch("/api/method/lodgeick.lodgeick.doctype.request.request.submit_application",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:u})})).json();if(ne.message&&ne.message.success)alert(`Application submitted successfully! Request Number: ${ne.message.request_number}`),c.push({name:"Dashboard"});else throw new Error("Failed to submit application")}catch(d){console.error("Error submitting application:",d),alert("Failed to submit application")}finally{q.value=!1}});h(null);const Ke=h(!1),Pe=h(null),F=h({party_name:"",relationship:"",property_address:"",email:"",phone:"",postal_address:"",approval_obtained:!1,approval_date:"",approval_document:null,comments:""}),zt=()=>{if(!F.value.party_name||!F.value.relationship){alert("Please enter party name and relationship");return}Pe.value!==null?i.value.affected_parties[Pe.value]=E({},F.value):i.value.affected_parties.push(E({},F.value)),Ke.value=!1},Qe=()=>{Ke.value=!1},Et=d=>{const t=d.target.files[0];if(t){if(t.size>10*1024*1024){alert("File size must be less than 10MB"),d.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/jpg","image/png"].includes(t.type)){alert("Only PDF, Word documents, and images (JPG, PNG) are allowed"),d.target.value="";return}F.value.approval_document=t}},Xe=h(!1),Ae=h(null),H=h({report_type:"",specialist_name:"",specialist_company:"",report_date:"",document:null,summary:""}),Ot=()=>{if(!H.value.report_type||!H.value.specialist_name||!H.value.report_date){alert("Please enter report type, specialist name, and report date");return}Ae.value!==null?i.value.specialist_reports[Ae.value]=E({},H.value):i.value.specialist_reports.push(E({},H.value)),Xe.value=!1},Ye=()=>{Xe.value=!1},Ht=d=>{const t=d.target.files[0];if(t){if(t.size>10*1024*1024){alert("File size must be less than 10MB"),d.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type)){alert("Only PDF and Word documents are allowed"),d.target.value="";return}H.value.document=t}},De=h(!1),pe=h(null),ct=h([]),Wt=h(!1),Re=h("All"),Q=h({condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""}),pt=["All","General","Timing","Lapse","Review","Financial Contribution","Bonds","Monitoring","Environmental Management","Construction","Operation","Landscape","Ecology","Archaeology","Cultural","Traffic","Parking","Noise","Discharge","Earthworks","Heritage","Water","Coastal","Other"],je=T(()=>Re.value==="All"?ct.value:ct.value.filter(d=>d.condition_category===Re.value)),Gt=d=>{const u={condition_number:(i.value.proposed_conditions.length+1).toString(),condition_category:d.condition_category,condition_text:d.condition_text,compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""};i.value.proposed_conditions.push(u)},Jt=()=>{Q.value={condition_number:(i.value.proposed_conditions.length+1).toString(),condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},pe.value=null},Kt=()=>{if(!Q.value.condition_category||!Q.value.condition_text){alert("Please enter condition category and text");return}pe.value!==null?i.value.proposed_conditions[pe.value]=E({},Q.value):i.value.proposed_conditions.push(E({},Q.value)),Q.value={condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},pe.value=null},Qt=()=>{Q.value={condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},pe.value=null},Xt=d=>{confirm("Remove this condition?")&&(i.value.proposed_conditions.splice(d,1),i.value.proposed_conditions.forEach((t,u)=>{t.condition_number=(u+1).toString()}))};bt({url:"lodgeick.api.book_council_meeting",makeParams:d=>d,onSuccess:d=>{d&&d.success?alert(`✅ Council Meeting Request Sent!

Task #${d.task_id} has been created for the planning team.

They will contact you within 2 business days to schedule.`):alert("Meeting request sent successfully! The planning team will contact you soon."),_.value=!1},onError:d=>{console.error("Error requesting meeting:",d),alert("Failed to request council meeting. Please try again or contact the planning team directly."),_.value=!1}});const Yt=()=>K(this,null,function*(){try{k.value=!0;const d=yield Ne("lodgeick.api.get_user_profile");r.value=d,d.applicant_type&&!i.value.applicant_type&&(i.value.applicant_type=d.applicant_type),d.phone&&!i.value.applicant_phone&&!i.value.acting_on_behalf&&(i.value.applicant_phone=d.phone),i.value.acting_on_behalf||(i.value.applicant_name=`${d.first_name||""} ${d.last_name||""}`.trim()||d.email,i.value.applicant_email=d.email)}catch(d){console.error("Error loading user profile:",d)}finally{k.value=!1}}),Zt=()=>K(this,null,function*(){try{const d=yield Ne("lodgeick.api.get_user_company_account");d&&(y.value=d)}catch(d){console.error("Error loading company account:",d)}});return se(()=>i.value.submitted_on_behalf_of,d=>{d==="Company"&&y.value?i.value.company_account=y.value.name:i.value.company_account=null}),se(()=>i.value.acting_on_behalf,d=>{!d&&r.value?(i.value.applicant_name=`${r.value.first_name||""} ${r.value.last_name||""}`.trim()||r.value.email,i.value.applicant_email=r.value.email,r.value.phone&&(i.value.applicant_phone=r.value.phone),r.value.applicant_type&&(i.value.applicant_type=r.value.applicant_type)):d&&(i.value.applicant_name="",i.value.applicant_email="",i.value.applicant_phone="")}),se(()=>i.value.applicant_phone,(d,t)=>K(this,null,function*(){if(!i.value.acting_on_behalf&&r.value&&d&&d!==t&&d!==r.value.phone)try{yield Ne("lodgeick.api.update_user_profile",{phone:d}),r.value.phone=d,console.log("[NewRequest] Phone number saved to profile:",d)}catch(u){console.error("[NewRequest] Error saving phone to profile:",u)}})),se(()=>i.value.council,(d,t)=>{console.log("[NewRequest] formData.council changed from:",t,"to:",d),console.trace("[NewRequest] Stack trace for council change")}),de(()=>K(this,null,function*(){console.log("[NewRequest] onMounted - starting initialization"),yield Yt(),yield Zt();const d=g.params.id||g.query.draft_id;if(d){yield Bt(d);return}console.log("[NewRequest] Before loadLockedCouncil - isCouncilLocked:",b.isCouncilLocked);const t=yield b.loadLockedCouncil();console.log("[NewRequest] After loadLockedCouncil - result:",t),console.log("[NewRequest] After loadLockedCouncil - isCouncilLocked:",b.isCouncilLocked),console.log("[NewRequest] After loadLockedCouncil - lockedCouncil:",b.lockedCouncil);const u=g.query.type;if(console.log("[NewRequest] preselectedType from URL:",u),b.isCouncilLocked)if(console.log("[NewRequest] Council is locked:",b.lockedCouncil),i.value.council=b.lockedCouncil,yield Me(b.lockedCouncil),u){console.log("[NewRequest] Request type is pre-selected:",u),i.value.request_type=u;const j=b.requestTypes.find(ne=>ne.name===u);j&&(v.value=j,i.value.request_category=j.category||"",console.log("[NewRequest] Set selectedRequestTypeDetails:",j)),yield nt(u),p.value=0}else p.value=0;else if(b.preselectedFromUrl)console.log("[NewRequest] Setting council from URL:",b.preselectedFromUrl),i.value.council=b.preselectedFromUrl,yield Me(b.preselectedFromUrl);else{const j=yield b.getUserCouncils();j.default_council&&(console.log("[NewRequest] Setting council from user default:",j.default_council),i.value.council=j.default_council,yield Me(j.default_council))}console.log("[NewRequest] onMounted - initialization complete"),console.log("  Council:",i.value.council),console.log("  Type:",i.value.request_type),console.log("  Current Step:",p.value)})),(d,t)=>(a(),n("div",ti,[e("header",si,[e("div",li,[e("div",oi,[e("div",ai,[e("button",{onClick:Rt,class:"text-gray-500 hover:text-gray-700"},[...t[42]||(t[42]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),e("div",null,[t[43]||(t[43]=e("h1",{class:"text-xl font-bold text-gray-900"},"New Application",-1)),e("p",ni,"Step "+m(p.value+1)+" of "+m(w.value),1)])]),e("div",ri,[W(oe(xt),{onClick:t[0]||(t[0]=u=>rt(!1)),variant:"outline",theme:"gray",loading:$.value},{default:te(()=>[...t[44]||(t[44]=[R(" Save Draft ",-1)])]),_:1},8,["loading"]),W(oe(xt),{onClick:t[1]||(t[1]=u=>rt(!0)),variant:"outline",theme:"gray",loading:$.value},{default:te(()=>[...t[45]||(t[45]=[R(" Save Draft & Close ",-1)])]),_:1},8,["loading"])])])])]),e("div",ii,[e("div",ui,[e("div",di,[(a(!0),n(z,null,O(o.value,(u,j)=>(a(),n("div",{key:j,class:I(["flex items-center",{"flex-1":j<o.value.length-1}])},[e("div",ci,[e("div",{class:I(["w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm",jt(j)])},[j<p.value?(a(),n("span",pi,"✓")):(a(),n("span",mi,m(j+1),1))],2),e("span",{class:I(["text-xs mt-2 text-center",j===p.value?"text-blue-600 font-medium":"text-gray-500"])},m(u.title),3)]),j<o.value.length-1?(a(),n("div",{key:0,class:I(["flex-1 h-1 mx-4 rounded",j<p.value?"bg-blue-600":"bg-gray-200"])},null,2)):f("",!0)],2))),128))])])]),e("main",vi,[e("div",gi,[ge()==="Council"?(a(),n("div",fi,[W(Ms,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=u=>i.value=u),onCouncilChange:Me},null,8,["modelValue"])])):f("",!0),ge()==="Type"?(a(),n("div",yi,[W(Es,{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=u=>i.value=u),"request-types":ae.value,onTypeSelected:It},null,8,["modelValue","request-types"])])):f("",!0),ge()==="Process Info"?(a(),n("div",bi,[W(_l,{"request-type-details":v.value,"council-name":it(),modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=u=>i.value=u),onContinue:ut},null,8,["request-type-details","council-name","modelValue"])])):f("",!0),s.value&&dt()&&ge()!=="Process Info"&&ge()!=="Review"?(a(),ue(ei,{key:3,stepConfig:dt(),modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=u=>i.value=u)},null,8,["stepConfig","modelValue"])):f("",!0),ge()==="Review"?(a(),n("div",xi,[W(na,{modelValue:i.value,"onUpdate:modelValue":t[6]||(t[6]=u=>i.value=u),"council-name":it(),"request-type-name":Nt(),"application-fee":Ft(),"is-resource-consent":he.value,"step-configs":C.value,"uses-configurable-steps":s.value,"request-type-details":v.value},null,8,["modelValue","council-name","request-type-name","application-fee","is-resource-consent","step-configs","uses-configurable-steps","request-type-details"])])):f("",!0)]),e("div",_i,[p.value>0?(a(),n("button",{key:0,onClick:t[7]||(t[7]=u=>p.value--),class:"px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center"},[...t[46]||(t[46]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),R(" Previous ",-1)])])):(a(),n("div",hi)),p.value<o.value.length-1?(a(),n("button",{key:2,type:"button",onClick:ut,disabled:!Je.value,class:I(["px-6 py-3 font-medium rounded-lg transition-colors flex items-center",Je.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[...t[47]||(t[47]=[R(" Next ",-1),e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],10,wi)):(a(),n("button",{key:3,onClick:Lt,disabled:!at.value||q.value,class:I(["px-6 py-3 font-medium rounded-lg transition-colors",at.value&&!q.value?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[q.value?(a(),n("span",Ci,"Submitting...")):(a(),n("span",$i,"Submit Application"))],10,ki))])]),Ke.value?(a(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:be(Qe,["self"])},[e("div",Vi,[e("div",Si,[e("div",qi,[e("h3",Ti,m(Pe.value!==null?"Edit":"Add")+" Affected Party ",1),e("button",{onClick:Qe,class:"text-gray-400 hover:text-gray-600"},[...t[48]||(t[48]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Mi,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Party Name "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[8]||(t[8]=u=>F.value.party_name=u),type:"text",required:"",placeholder:"e.g., John Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,F.value.party_name]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Relationship "),e("span",{class:"text-red-500"},"*")],-1)),M(e("select",{"onUpdate:modelValue":t[9]||(t[9]=u=>F.value.relationship=u),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[50]||(t[50]=[me('<option value="">Select relationship</option><option value="Adjacent Property Owner">Adjacent Property Owner</option><option value="Neighbor">Neighbor</option><option value="Iwi">Iwi</option><option value="Infrastructure Provider">Infrastructure Provider</option><option value="Other">Other</option>',6)])],512),[[ie,F.value.relationship]])]),e("div",Pi,[t[54]||(t[54]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Contact Information",-1)),e("div",Ai,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Email",-1)),M(e("input",{"onUpdate:modelValue":t[10]||(t[10]=u=>F.value.email=u),type:"email",placeholder:"email@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,F.value.email]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Phone",-1)),M(e("input",{"onUpdate:modelValue":t[11]||(t[11]=u=>F.value.phone=u),type:"tel",placeholder:"021 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,F.value.phone]])])])]),e("div",Di,[t[59]||(t[59]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Addresses",-1)),e("div",Ri,[e("div",null,[t[55]||(t[55]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Property Address",-1)),M(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=u=>F.value.property_address=u),rows:"2",placeholder:"123 Main Street, Suburb, City",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,F.value.property_address]]),t[56]||(t[56]=e("p",{class:"mt-1 text-xs text-gray-500"},"The property address affected by this proposal",-1))]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Postal Address",-1)),M(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=u=>F.value.postal_address=u),rows:"2",placeholder:"PO Box 123, Suburb, City",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,F.value.postal_address]]),t[58]||(t[58]=e("p",{class:"mt-1 text-xs text-gray-500"},"For correspondence (if different from property address)",-1))])])]),e("div",ji,[t[65]||(t[65]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Written Approval",-1)),e("div",Ii,[M(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=u=>F.value.approval_obtained=u),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,F.value.approval_obtained]]),t[60]||(t[60]=e("label",{class:"ml-3 text-sm text-gray-700"}," Written approval obtained from this party ",-1))]),F.value.approval_obtained?(a(),n("div",Bi,[e("div",null,[t[61]||(t[61]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Approval Date",-1)),M(e("input",{"onUpdate:modelValue":t[15]||(t[15]=u=>F.value.approval_date=u),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,F.value.approval_date]])]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Approval Document",-1)),e("input",{type:"file",onChange:Et,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),t[64]||(t[64]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload written approval (PDF, Word, or image, max 10MB)",-1)),F.value.approval_document?(a(),n("div",Ni,[t[62]||(t[62]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,m(typeof F.value.approval_document=="object"?F.value.approval_document.name:"Document attached"),1)])):f("",!0)])])):f("",!0)]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Comments",-1)),M(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=u=>F.value.comments=u),rows:"3",placeholder:"Any additional notes about this party or their concerns...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,F.value.comments]])])]),e("div",Fi,[e("button",{onClick:Qe,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:zt,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},m(Pe.value!==null?"Update":"Add")+" Party ",1)])])])):f("",!0),Xe.value?(a(),n("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:be(Ye,["self"])},[e("div",Li,[e("div",Ui,[e("div",zi,[e("h3",Ei,m(Ae.value!==null?"Edit":"Add")+" Specialist Report ",1),e("button",{onClick:Ye,class:"text-gray-400 hover:text-gray-600"},[...t[67]||(t[67]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Oi,[e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Report Type "),e("span",{class:"text-red-500"},"*")],-1)),M(e("select",{"onUpdate:modelValue":t[17]||(t[17]=u=>H.value.report_type=u),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[68]||(t[68]=[me('<option value="">Select report type</option><option value="Traffic Impact Assessment">Traffic Impact Assessment</option><option value="Acoustic Assessment">Acoustic Assessment</option><option value="Geotechnical Report">Geotechnical Report</option><option value="Ecological Assessment">Ecological Assessment</option><option value="Archaeological Assessment">Archaeological Assessment</option><option value="Landscape Assessment">Landscape Assessment</option><option value="Contaminated Land Assessment">Contaminated Land Assessment</option><option value="Flood Risk Assessment">Flood Risk Assessment</option><option value="Other">Other</option>',10)])],512),[[ie,H.value.report_type]])]),e("div",Hi,[t[72]||(t[72]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Consultant Details",-1)),e("div",Wi,[e("div",null,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Specialist Name "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[18]||(t[18]=u=>H.value.specialist_name=u),type:"text",required:"",placeholder:"e.g., Dr. Jane Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,H.value.specialist_name]])]),e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Company/Organization",-1)),M(e("input",{"onUpdate:modelValue":t[19]||(t[19]=u=>H.value.specialist_company=u),type:"text",placeholder:"e.g., ABC Consultants Ltd",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,H.value.specialist_company]])])])]),e("div",Gi,[t[80]||(t[80]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Report Details",-1)),e("div",Ji,[e("div",null,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Report Date "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[20]||(t[20]=u=>H.value.report_date=u),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,H.value.report_date]]),t[74]||(t[74]=e("p",{class:"mt-1 text-xs text-gray-500"},"Date the report was prepared or finalized",-1))]),e("div",null,[t[76]||(t[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Document "),e("span",{class:"text-red-500"},"*")],-1)),e("input",{type:"file",onChange:Ht,accept:".pdf,.doc,.docx",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),t[77]||(t[77]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload the specialist report (PDF or Word, max 10MB)",-1)),H.value.document?(a(),n("div",Ki,[t[75]||(t[75]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,m(typeof H.value.document=="object"?H.value.document.name:"Document attached"),1)])):f("",!0)]),e("div",null,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Summary",-1)),M(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=u=>H.value.summary=u),rows:"4",placeholder:"Brief summary of key findings and recommendations...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,H.value.summary]]),t[79]||(t[79]=e("p",{class:"mt-1 text-xs text-gray-500"},"Optional: Provide a brief summary of the report's key findings",-1))])])])]),e("div",Qi,[e("button",{onClick:Ye,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Ot,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},m(Ae.value!==null?"Update":"Add")+" Report ",1)])])])):f("",!0),D.value?(a(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:be(We,["self"])},[e("div",Xi,[e("div",Yi,[e("div",Zi,[e("h3",eu,m(V.value!==null?"Edit":"Add")+" HAIL Activity ",1),e("button",{onClick:We,class:"text-gray-400 hover:text-gray-600"},[...t[81]||(t[81]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",tu,[e("div",null,[t[82]||(t[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Activity Description "),e("span",{class:"text-red-500"},"*")],-1)),M(e("textarea",{"onUpdate:modelValue":t[22]||(t[22]=u=>P.value.activity_description=u),rows:"3",required:"",placeholder:"Describe the HAIL activity (e.g., Former service station, industrial site)...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,P.value.activity_description]])]),e("div",null,[t[84]||(t[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," HAIL Category ",-1)),M(e("select",{"onUpdate:modelValue":t[23]||(t[23]=u=>P.value.hail_category=u),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[83]||(t[83]=[me('<option value="">Select HAIL category</option><option value="Category A - Petroleum/Oil Storage">Category A - Petroleum/Oil Storage</option><option value="Category B - Asbestos Products">Category B - Asbestos Products</option><option value="Category C - Chemicals">Category C - Chemicals</option><option value="Category D - Engineering Workshops">Category D - Engineering Workshops</option><option value="Category E - Gasworks/Coke Works">Category E - Gasworks/Coke Works</option><option value="Category F - Horticulture">Category F - Horticulture</option><option value="Category G - Landfills/Waste Disposal">Category G - Landfills/Waste Disposal</option><option value="Category H - Metal Treatment">Category H - Metal Treatment</option><option value="Category I - Timber Treatment">Category I - Timber Treatment</option>',10)])],512),[[ie,P.value.hail_category]])]),e("div",su,[t[88]||(t[88]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Activity Status",-1)),e("div",lu,[e("div",ou,[M(e("input",{type:"checkbox",id:"hail-current","onUpdate:modelValue":t[24]||(t[24]=u=>P.value.currently_undertaken=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,P.value.currently_undertaken]]),t[85]||(t[85]=e("label",{for:"hail-current",class:"ml-2 text-sm text-gray-700"},"Currently Being Undertaken",-1))]),e("div",au,[M(e("input",{type:"checkbox",id:"hail-previous","onUpdate:modelValue":t[25]||(t[25]=u=>P.value.previously_undertaken=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,P.value.previously_undertaken]]),t[86]||(t[86]=e("label",{for:"hail-previous",class:"ml-2 text-sm text-gray-700"},"Previously Undertaken",-1))]),e("div",nu,[M(e("input",{type:"checkbox",id:"hail-likely","onUpdate:modelValue":t[26]||(t[26]=u=>P.value.likely_undertaken=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,P.value.likely_undertaken]]),t[87]||(t[87]=e("label",{for:"hail-likely",class:"ml-2 text-sm text-gray-700"},"Likely to Have Been Undertaken",-1))])])]),e("div",ru,[M(e("input",{type:"checkbox",id:"hail-investigated","onUpdate:modelValue":t[27]||(t[27]=u=>P.value.preliminary_investigation_done=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,P.value.preliminary_investigation_done]]),t[89]||(t[89]=e("label",{for:"hail-investigated",class:"ml-2 text-sm text-gray-700"},"Preliminary Investigation Completed",-1))]),e("div",iu,[t[95]||(t[95]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Proposed Activities",-1)),e("div",uu,[e("div",du,[M(e("input",{type:"checkbox",id:"hail-activity-fuel","onUpdate:modelValue":t[28]||(t[28]=u=>N.value.fuel=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,N.value.fuel]]),t[90]||(t[90]=e("label",{for:"hail-activity-fuel",class:"ml-2 text-sm text-gray-700"},"Removing or replacing fuel storage system",-1))]),e("div",cu,[M(e("input",{type:"checkbox",id:"hail-activity-disturb","onUpdate:modelValue":t[29]||(t[29]=u=>N.value.disturb=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,N.value.disturb]]),t[91]||(t[91]=e("label",{for:"hail-activity-disturb",class:"ml-2 text-sm text-gray-700"},"Disturbing soil",-1))]),e("div",pu,[M(e("input",{type:"checkbox",id:"hail-activity-sample","onUpdate:modelValue":t[30]||(t[30]=u=>N.value.sample=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,N.value.sample]]),t[92]||(t[92]=e("label",{for:"hail-activity-sample",class:"ml-2 text-sm text-gray-700"},"Sampling soil",-1))]),e("div",mu,[M(e("input",{type:"checkbox",id:"hail-activity-subdivide","onUpdate:modelValue":t[31]||(t[31]=u=>N.value.subdivide=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,N.value.subdivide]]),t[93]||(t[93]=e("label",{for:"hail-activity-subdivide",class:"ml-2 text-sm text-gray-700"},"Subdividing land",-1))]),e("div",vu,[M(e("input",{type:"checkbox",id:"hail-activity-change","onUpdate:modelValue":t[32]||(t[32]=u=>N.value.change=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,N.value.change]]),t[94]||(t[94]=e("label",{for:"hail-activity-change",class:"ml-2 text-sm text-gray-700"},"Changing use of land",-1))])]),t[96]||(t[96]=e("p",{class:"text-xs text-gray-500 mt-2"},"Select all proposed activities that apply",-1))]),e("div",null,[t[97]||(t[97]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Additional Notes",-1)),M(e("textarea",{"onUpdate:modelValue":t[33]||(t[33]=u=>P.value.notes=u),rows:"3",placeholder:"Additional notes about the HAIL activity...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,P.value.notes]])])]),e("div",gu,[e("button",{onClick:We,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Te,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},m(V.value!==null?"Update":"Add")+" Activity ",1)])])])):f("",!0),De.value?(a(),n("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[41]||(t[41]=be(u=>De.value=!1,["self"]))},[e("div",fu,[e("div",yu,[e("div",bu,[t[99]||(t[99]=e("h3",{class:"text-lg font-semibold text-gray-900"}," Browse Condition Templates ",-1)),e("button",{onClick:t[34]||(t[34]=u=>De.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[98]||(t[98]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",xu,[e("div",_u,[e("div",hu,[e("div",wu,[t[100]||(t[100]=e("label",{class:"text-sm font-medium text-gray-700"},"Filter by Category:",-1)),M(e("select",{"onUpdate:modelValue":t[35]||(t[35]=u=>Re.value=u),class:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(a(),n(z,null,O(pt,u=>e("option",{key:u,value:u},m(u),9,ku)),64))],512),[[ie,Re.value]]),e("span",Cu,m(je.value.length)+" template"+m(je.value.length!==1?"s":""),1)]),Wt.value?(a(),n("div",$u,[...t[101]||(t[101]=[e("svg",{class:"animate-spin h-8 w-8 mx-auto text-blue-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading templates...",-1)])])):je.value.length>0?(a(),n("div",Vu,[(a(!0),n(z,null,O(je.value,u=>(a(),n("div",{key:u.name,class:"p-4 bg-white border border-gray-300 rounded-lg hover:border-blue-400 hover:shadow-sm transition-all"},[e("div",Su,[e("div",qu,[e("div",Tu,[e("h4",Mu,m(u.template_name),1),u.condition_code?(a(),n("span",Pu,m(u.condition_code),1)):f("",!0)]),e("div",Au,[e("span",Du,m(u.condition_category),1),u.timing?(a(),n("span",Ru,m(u.timing),1)):f("",!0),u.monitoring_required?(a(),n("span",ju," Monitoring Required ")):f("",!0)]),e("div",{class:"text-xs text-gray-700 line-clamp-3",innerHTML:u.condition_text},null,8,Iu)]),e("button",{onClick:j=>Gt(u),type:"button",class:"ml-3 px-3 py-1.5 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 flex items-center gap-1 flex-shrink-0"},[...t[102]||(t[102]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),R(" Add ",-1)])],8,Bu)])]))),128))])):(a(),n("div",Nu,[...t[103]||(t[103]=[e("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-sm text-gray-500"},"No templates found for selected category",-1)])])),e("div",{class:"pt-4 border-t border-gray-200"},[e("button",{onClick:Jt,type:"button",class:"w-full px-4 py-2.5 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 flex items-center justify-center gap-2 border-2 border-dashed border-gray-300"},[...t[104]||(t[104]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),R(" Add Custom Condition ",-1)])])])]),e("div",Fu,[e("h4",Lu,[t[105]||(t[105]=e("span",null,"Selected Conditions",-1)),e("span",Uu,m(i.value.proposed_conditions.length),1)]),i.value.proposed_conditions.length>0?(a(),n("div",zu,[(a(!0),n(z,null,O(i.value.proposed_conditions,(u,j)=>(a(),n("div",{key:j,class:"p-2 bg-white rounded border border-gray-300 text-xs"},[e("div",Eu,[e("div",Ou,[e("span",Hu,m(u.condition_number),1),e("span",Wu,m(u.condition_category),1)]),e("button",{onClick:ne=>Xt(j),type:"button",class:"text-red-600 hover:bg-red-50 rounded p-0.5",title:"Remove"},[...t[106]||(t[106]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Gu)]),e("div",{class:"text-gray-700 line-clamp-2",innerHTML:u.condition_text},null,8,Ju)]))),128))])):(a(),n("div",Ku,[...t[107]||(t[107]=[e("svg",{class:"w-8 h-8 mx-auto text-gray-300 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),R(" No conditions selected ",-1)])]))])]),pe.value!==null||Q.value.condition_text||Q.value.condition_category?(a(),n("div",Qu,[e("h4",Xu,m(pe.value!==null?"Edit":"Add Custom")+" Condition ",1),e("div",Yu,[e("div",null,[t[108]||(t[108]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[R(" Condition Number "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[36]||(t[36]=u=>Q.value.condition_number=u),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1"},null,512),[[L,Q.value.condition_number]])]),e("div",null,[t[110]||(t[110]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[R(" Category "),e("span",{class:"text-red-500"},"*")],-1)),M(e("select",{"onUpdate:modelValue":t[37]||(t[37]=u=>Q.value.condition_category=u),class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[109]||(t[109]=e("option",{value:""},"Select category",-1)),(a(!0),n(z,null,O(pt.filter(u=>u!=="All"),u=>(a(),n("option",{key:u,value:u},m(u),9,Zu))),128))],512),[[ie,Q.value.condition_category]])])]),e("div",ed,[t[111]||(t[111]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[R(" Condition Text "),e("span",{class:"text-red-500"},"*")],-1)),M(e("textarea",{"onUpdate:modelValue":t[38]||(t[38]=u=>Q.value.condition_text=u),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter the condition text..."},null,512),[[L,Q.value.condition_text]])]),e("div",null,[t[112]||(t[112]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Notes",-1)),M(e("textarea",{"onUpdate:modelValue":t[39]||(t[39]=u=>Q.value.compliance_notes=u),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional notes about this condition..."},null,512),[[L,Q.value.compliance_notes]])]),e("div",td,[e("button",{onClick:Qt,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Kt,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},m(pe.value!==null?"Update":"Add")+" Condition ",1)])])):f("",!0)]),e("div",sd,[e("button",{onClick:t[40]||(t[40]=u=>De.value=!1),type:"button",class:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"}," Done ")])])])):f("",!0)]))}};export{rd as default};
//# sourceMappingURL=NewRequest-95_9gwzc.js.map
