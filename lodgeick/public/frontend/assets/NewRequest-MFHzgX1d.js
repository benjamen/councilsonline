var ct=Object.defineProperty,mt=Object.defineProperties;var bt=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable;var Me=(v,k,c)=>k in v?ct(v,k,{enumerable:!0,configurable:!0,writable:!0,value:c}):v[k]=c,R=(v,k)=>{for(var c in k||(k={}))gt.call(k,c)&&Me(v,c,k[c]);if(Re)for(var c of Re(k))vt.call(k,c)&&Me(v,c,k[c]);return v},X=(v,k)=>mt(v,bt(k));var ee=(v,k,c)=>new Promise((C,s)=>{var d=i=>{try{l(c.next(i))}catch(S){s(S)}},t=i=>{try{l(c.throw(i))}catch(S){s(S)}},l=i=>i.done?C(i.value):Promise.resolve(i.value).then(d,t);l((c=c.apply(v,k)).next())});import{c as r,o as a,a as e,b as Y,F as L,m as F,q as j,d as _,t as f,g as T,h as N,r as A,x as z,l as m,y as ne,z as h,v as B,A as I,B as pe,j as M,C as ye,E as Te,n as le,e as yt,f as ft,G as xt,k as Ne,H as _t,w as ht,u as ze,i as wt,J as Ce}from"./index-BbWWjAlW.js";import{C as kt}from"./CouncilSelector-C8Nl7Xf8.js";const $t={__name:"Step1CouncilSelection",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","council-change"],setup(v,{emit:k}){const c=v,C=k,s=d=>{C("update:modelValue",X(R({},c.modelValue),{council:d})),C("council-change",d)};return(d,t)=>(a(),r("div",null,[t[0]||(t[0]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Council",-1)),t[1]||(t[1]=e("p",{class:"text-gray-600 mb-8"},"Choose the council that will process your application",-1)),Y(kt,{"model-value":v.modelValue.council,"onUpdate:modelValue":s,"display-mode":"cards",required:!0,"show-selected-info":!0,label:"","show-label":!1},null,8,["model-value"])]))}},Ct={key:0,class:"text-center py-12"},Vt={key:1,class:"grid md:grid-cols-2 gap-4"},At=["onClick"],St={class:"flex items-start justify-between"},Dt={class:"flex-1"},Ut={class:"text-lg font-semibold text-gray-900 mb-2"},qt=["innerHTML"],Pt={class:"mt-4 flex items-center space-x-4 text-xs text-gray-500"},Rt={key:0},Mt={key:1},Tt={key:2,class:"px-2 py-1 bg-gray-100 rounded"},Nt={key:0,class:"ml-4"},zt={__name:"Step2RequestType",props:{modelValue:{type:Object,required:!0},requestTypes:{type:Object,required:!0}},emits:["update:modelValue","type-selected"],setup(v,{emit:k}){const c=v,C=k,s=d=>{C("update:modelValue",X(R({},c.modelValue),{request_type:d.name})),C("type-selected",d)};return(d,t)=>(a(),r("div",null,[t[2]||(t[2]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Application Type",-1)),t[3]||(t[3]=e("p",{class:"text-gray-600 mb-8"},"Choose the type of consent you wish to apply for",-1)),v.requestTypes.loading?(a(),r("div",Ct,[...t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(a(),r("div",Vt,[(a(!0),r(L,null,F(v.requestTypes.data,l=>(a(),r("div",{key:l.name,onClick:i=>s(l),class:j(["border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",v.modelValue.request_type===l.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",St,[e("div",Dt,[e("h3",Ut,f(l.type_name),1),e("p",{class:"text-sm text-gray-600",innerHTML:l.description||"No description available"},null,8,qt),e("div",Pt,[l.base_fee?(a(),r("span",Rt,"Fee: $"+f(l.base_fee),1)):_("",!0),l.processing_sla_days?(a(),r("span",Mt,f(l.processing_sla_days)+" days",1)):_("",!0),l.category?(a(),r("span",Tt,f(l.category),1)):_("",!0)])]),v.modelValue.request_type===l.name?(a(),r("div",Nt,[...t[1]||(t[1]=[e("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):_("",!0)])],10,At))),128))]))]))}},Et={class:"text-gray-600 mb-6"},jt={key:0,class:"space-y-6"},It={class:"bg-white border border-gray-200 rounded-lg p-6"},Lt={class:"flex items-start justify-between mb-4"},Ft={class:"text-xl font-semibold text-gray-900"},Ot={key:0,class:"text-sm text-gray-500 mt-1"},Bt={class:"grid md:grid-cols-3 gap-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},Ht={class:"text-2xl font-bold text-blue-900 mt-1"},Wt={class:"text-2xl font-bold text-blue-900 mt-1"},Gt={class:"text-2xl font-bold text-blue-900 mt-1"},Jt={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},Yt=["innerHTML"],Zt={key:1,class:"bg-white border border-gray-200 rounded-lg p-6"},Xt={class:"text-gray-700"},Kt={class:"flex justify-center pt-4"},Qt={key:1,class:"text-center py-12"},eo={__name:"Step3ProcessInfo",props:{requestTypeDetails:{type:Object,default:null},councilName:{type:String,default:""}},emits:["continue"],setup(v,{emit:k}){const c=k;return(C,s)=>(a(),r("div",null,[s[12]||(s[12]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Council Process Information",-1)),e("p",Et,"Understanding "+f(v.councilName)+"'s process for this application",1),v.requestTypeDetails?(a(),r("div",jt,[e("div",It,[e("div",Lt,[e("div",null,[e("h3",Ft,f(v.requestTypeDetails.request_type_name),1),v.requestTypeDetails.category?(a(),r("p",Ot,f(v.requestTypeDetails.category),1)):_("",!0)])]),e("div",Bt,[e("div",null,[s[1]||(s[1]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Application Fee",-1)),e("div",Ht," $"+f(v.requestTypeDetails.base_fee||"0"),1),s[2]||(s[2]=e("div",{class:"text-xs text-blue-600 mt-1"},"Plus any additional costs",-1))]),e("div",null,[s[4]||(s[4]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Processing Time",-1)),e("div",Wt,[N(f(v.requestTypeDetails.sla_days||"N/A")+" ",1),s[3]||(s[3]=e("span",{class:"text-base"},"days",-1))]),s[5]||(s[5]=e("div",{class:"text-xs text-blue-600 mt-1"},"Standard timeframe",-1))]),e("div",null,[s[6]||(s[6]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Payment Required",-1)),e("div",Gt,f(v.requestTypeDetails.requires_payment?"Yes":"No"),1),s[7]||(s[7]=e("div",{class:"text-xs text-blue-600 mt-1"},"Before processing",-1))])])]),v.requestTypeDetails.process_description?(a(),r("div",Jt,[s[8]||(s[8]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"How This Works",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:v.requestTypeDetails.process_description},null,8,Yt)])):v.requestTypeDetails.description?(a(),r("div",Zt,[s[9]||(s[9]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"About This Application",-1)),e("p",Xt,f(v.requestTypeDetails.description),1)])):_("",!0),s[10]||(s[10]=T('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Before You Continue</h5><p class="text-yellow-800 text-sm mt-1"> Please review this information carefully. Make sure you understand the process, fees, and timeframes before proceeding with your application. </p></div></div></div>',1)),e("div",Kt,[e("button",{onClick:s[0]||(s[0]=d=>c("continue")),class:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"}," I Understand - Continue to Application ")])])):(a(),r("div",Qt,[...s[11]||(s[11]=[e("p",{class:"text-gray-500"},"No request type selected. Please go back and select a request type.",-1)])]))]))}},to={class:"space-y-6"},oo={key:0},so={class:"mb-6"},lo={class:"space-y-3"},ao={class:"flex-1"},ro={class:"font-medium text-gray-900"},no={class:"text-xs text-blue-600 mt-1"},io={class:"border-t border-gray-200 pt-6 mt-6"},uo={class:"mb-6"},po={class:"space-y-3"},co={class:"flex items-start space-x-3 cursor-pointer"},mo={class:"flex items-start space-x-3 cursor-pointer"},bo={class:"text-sm font-semibold text-gray-900 mb-4"},go={class:"space-y-4"},vo={class:"grid md:grid-cols-2 gap-4"},yo=["disabled"],fo={key:0,class:"mt-1 text-xs text-gray-500"},xo=["disabled"],_o={key:0,class:"mt-1 text-xs text-gray-500"},ho={class:"grid md:grid-cols-2 gap-4"},wo={class:"mt-1 text-xs text-gray-500"},ko={class:"mt-6 border-t border-gray-200 pt-6"},$o={class:"flex items-start mb-4"},Co={key:0,class:"space-y-4 pl-7"},Vo={class:"grid md:grid-cols-2 gap-4"},Ao=["required"],So={class:"grid md:grid-cols-2 gap-4"},Do={__name:"Step4ApplicantDetails",props:{modelValue:{type:Object,required:!0},userProfile:{type:Object,default:null},userCompanyAccount:{type:Object,default:null}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=A({submitted_on_behalf_of:c.modelValue.submitted_on_behalf_of||"Myself",acting_on_behalf:c.modelValue.acting_on_behalf||!1,applicant_name:c.modelValue.applicant_name||"",applicant_email:c.modelValue.applicant_email||"",applicant_phone:c.modelValue.applicant_phone||"",applicant_type:c.modelValue.applicant_type||"",applicant_is_not_owner:c.modelValue.applicant_is_not_owner||!1,owner_name:c.modelValue.owner_name||"",owner_email:c.modelValue.owner_email||"",owner_phone:c.modelValue.owner_phone||"",owner_address:c.modelValue.owner_address||""});return z(()=>c.modelValue,d=>{s.value.submitted_on_behalf_of=d.submitted_on_behalf_of||"Myself",s.value.acting_on_behalf=d.acting_on_behalf||!1,s.value.applicant_name=d.applicant_name||"",s.value.applicant_email=d.applicant_email||"",s.value.applicant_phone=d.applicant_phone||"",s.value.applicant_type=d.applicant_type||"",s.value.applicant_is_not_owner=d.applicant_is_not_owner||!1,s.value.owner_name=d.owner_name||"",s.value.owner_email=d.owner_email||"",s.value.owner_phone=d.owner_phone||"",s.value.owner_address=d.owner_address||""},{deep:!0}),z(s,d=>{C("update:modelValue",X(R({},c.modelValue),{submitted_on_behalf_of:d.submitted_on_behalf_of,acting_on_behalf:d.acting_on_behalf,applicant_name:d.applicant_name,applicant_email:d.applicant_email,applicant_phone:d.applicant_phone,applicant_type:d.applicant_type,applicant_is_not_owner:d.applicant_is_not_owner,owner_name:d.owner_name,owner_email:d.owner_email,owner_phone:d.owner_phone,owner_address:d.owner_address}))},{deep:!0}),(d,t)=>(a(),r("div",null,[t[31]||(t[31]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Who is this application for?",-1)),t[32]||(t[32]=e("p",{class:"text-gray-600 mb-8"},"Provide applicant and property owner information",-1)),e("div",to,[v.userCompanyAccount?(a(),r("div",oo,[e("div",so,[t[15]||(t[15]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-3"},"Submitting As",-1)),e("div",lo,[e("label",{class:j(["flex items-start space-x-3 cursor-pointer p-4 border-2 rounded-lg transition-colors",s.value.submitted_on_behalf_of==="Myself"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[m(e("input",{type:"radio",value:"Myself","onUpdate:modelValue":t[0]||(t[0]=l=>s.value.submitted_on_behalf_of=l),class:"mt-1"},null,512),[[ne,s.value.submitted_on_behalf_of]]),t[13]||(t[13]=e("div",{class:"flex-1"},[e("div",{class:"font-medium text-gray-900"},"Individual - Submit for Myself"),e("div",{class:"text-sm text-gray-500"},"This application is submitted as an individual")],-1))],2),e("label",{class:j(["flex items-start space-x-3 cursor-pointer p-4 border-2 rounded-lg transition-colors",s.value.submitted_on_behalf_of==="Company"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[m(e("input",{type:"radio",value:"Company","onUpdate:modelValue":t[1]||(t[1]=l=>s.value.submitted_on_behalf_of=l),class:"mt-1"},null,512),[[ne,s.value.submitted_on_behalf_of]]),e("div",ao,[e("div",ro,"Company - "+f(v.userCompanyAccount.company_name),1),t[14]||(t[14]=e("div",{class:"text-sm text-gray-500"},"Submit on behalf of your company account",-1)),e("div",no,"You are logged in as: "+f(v.userCompanyAccount.user_role),1)])],2)])])])):_("",!0),e("div",io,[e("div",uo,[t[18]||(t[18]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-3"},"Who is this application for?",-1)),e("div",po,[e("label",co,[m(e("input",{type:"radio",value:!1,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.acting_on_behalf=l),class:"mt-1"},null,512),[[ne,s.value.acting_on_behalf]]),t[16]||(t[16]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"This application is for myself"),e("div",{class:"text-sm text-gray-500"},"I am the applicant submitting this request")],-1))]),e("label",mo,[m(e("input",{type:"radio",value:!0,"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.acting_on_behalf=l),class:"mt-1"},null,512),[[ne,s.value.acting_on_behalf]]),t[17]||(t[17]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"I am acting on behalf of a client"),e("div",{class:"text-sm text-gray-500"},"I am an agent submitting this request for someone else")],-1))])])]),e("div",null,[e("h3",bo,f(s.value.acting_on_behalf?"Client Information *":"Applicant Contact Information *"),1),e("div",go,[e("div",vo,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name *",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.applicant_name=l),type:"text",placeholder:"John Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!s.value.acting_on_behalf&&v.userProfile,required:""},null,8,yo),[[h,s.value.applicant_name]]),s.value.acting_on_behalf?_("",!0):(a(),r("p",fo,"Auto-populated from your profile"))]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Address *",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.applicant_email=l),type:"email",placeholder:"john@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!s.value.acting_on_behalf&&v.userProfile,required:""},null,8,xo),[[h,s.value.applicant_email]]),s.value.acting_on_behalf?_("",!0):(a(),r("p",_o,"Auto-populated from your profile"))])]),e("div",ho,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Phone *",-1)),m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.applicant_phone=l),type:"tel",placeholder:"021 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[h,s.value.applicant_phone]]),e("p",wo,f(s.value.acting_on_behalf?"Required for application processing":"Will be saved to your profile for future applications"),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Applicant Type *",-1)),m(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.applicant_type=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...t[22]||(t[22]=[T('<option value="">Select applicant type</option><option value="Individual">Individual</option><option value="Company">Company</option><option value="Trust">Trust</option><option value="Partnership">Partnership</option><option value="Other">Other</option>',6)])],512),[[B,s.value.applicant_type]]),t[24]||(t[24]=e("p",{class:"mt-1 text-xs text-gray-500"},"Type of entity making this application",-1))])])])]),e("div",ko,[e("div",$o,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=l=>s.value.applicant_is_not_owner=l),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,s.value.applicant_is_not_owner]]),t[25]||(t[25]=e("label",{class:"ml-3 text-sm font-medium text-gray-700"}," I am not the property owner ",-1))]),s.value.applicant_is_not_owner?(a(),r("div",Co,[t[30]||(t[30]=e("p",{class:"text-xs text-gray-600 mb-4"}," Under Section 88 of the RMA, you must provide the property owner's contact details. ",-1)),e("div",Vo,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Owner Name *",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>s.value.owner_name=l),type:"text",placeholder:"Property owner's full name",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:s.value.applicant_is_not_owner},null,8,Ao),[[h,s.value.owner_name]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Owner Email",-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>s.value.owner_email=l),type:"email",placeholder:"owner@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.owner_email]])])]),e("div",So,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Owner Phone",-1)),m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>s.value.owner_phone=l),type:"tel",placeholder:"021 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.owner_phone]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Owner Address",-1)),m(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=l=>s.value.owner_address=l),rows:"3",placeholder:"Owner's postal address",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.owner_address]])])])])):_("",!0)])])])]))}},Uo={class:"space-y-6"},qo=["value"],Po={class:"space-y-4"},Ro={key:0,class:"relative"},Mo={class:"flex gap-2"},To={key:1,class:"relative"},No={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-96 overflow-y-auto"},zo={key:0,class:"p-4 text-center text-gray-500"},Eo={key:1},jo=["onClick"],Io={class:"font-medium text-gray-900"},Lo={class:"text-sm text-gray-600 mt-1"},Fo={key:0,class:"text-xs text-gray-500 mt-1"},Oo={key:2,class:"p-4 text-center text-gray-500"},Bo={class:"grid md:grid-cols-2 gap-4"},Ho={key:0,class:"mt-1 text-xs text-green-600"},Wo={key:0,class:"mt-1 text-xs text-green-600"},Go={key:0,class:"text-xs text-green-600 mt-1"},Jo={class:"grid md:grid-cols-2 gap-4"},Yo={key:0,class:"mt-1 text-xs text-green-600"},Zo={key:1,class:"mt-1 text-xs text-gray-500"},Xo={key:0,class:"mt-1 text-xs text-green-600"},Ko={class:"grid md:grid-cols-1 gap-4"},Qo={key:0,class:"mt-1 text-xs text-green-600"},es={key:1,class:"mt-1 text-xs text-gray-500"},ts={__name:"Step5PropertyDetails",props:{modelValue:{type:Object,required:!0},properties:{type:Object,required:!0}},emits:["update:modelValue","property-select"],setup(v,{emit:k}){const c=v,C=k,s=A({property:c.modelValue.property||"",property_address:c.modelValue.property_address||"",legal_description:c.modelValue.legal_description||"",ct_reference:c.modelValue.ct_reference||"",certificate_of_title_document:c.modelValue.certificate_of_title_document||"",valuation_reference:c.modelValue.valuation_reference||"",parcel_id:c.modelValue.parcel_id||"",zone:c.modelValue.zone||""}),d=A(""),t=A([]),l=A(!1),i=A(!1);let S=null;z(()=>c.modelValue,b=>{s.value.property=b.property||"",s.value.property_address=b.property_address||"",s.value.legal_description=b.legal_description||"",s.value.ct_reference=b.ct_reference||"",s.value.certificate_of_title_document=b.certificate_of_title_document||"",s.value.valuation_reference=b.valuation_reference||"",s.value.parcel_id=b.parcel_id||"",s.value.zone=b.zone||""},{deep:!0}),z(s,b=>{C("update:modelValue",X(R({},c.modelValue),{property:b.property,property_address:b.property_address,legal_description:b.legal_description,ct_reference:b.ct_reference,certificate_of_title_document:b.certificate_of_title_document,valuation_reference:b.valuation_reference,parcel_id:b.parcel_id,zone:b.zone}))},{deep:!0});const x=()=>{C("property-select")},D=()=>ee(this,null,function*(){S&&clearTimeout(S);const b=d.value.trim();if(b.length<3){t.value=[];return}S=setTimeout(()=>ee(this,null,function*(){l.value=!0;try{const g=yield pe("lodgeick.api.search_property_addresses",{query:b});t.value=g||[]}catch(g){console.error("[Step5PropertyDetails] Error searching properties:",g),t.value=[]}finally{l.value=!1}}),300)}),q=b=>{var g,V,H,Q,te;s.value.property_address=b.address,s.value.legal_description=((g=b.property)==null?void 0:g.legal_description)||"",s.value.ct_reference=((V=b.property)==null?void 0:V.title_no)||"",s.value.valuation_reference=((H=b.property)==null?void 0:H.valuation_reference)||"",s.value.parcel_id=((Q=b.property)==null?void 0:Q.parcel_id)||"",s.value.zone=((te=b.property)==null?void 0:te.zone)||"",i.value=!1,d.value="",t.value=[]},n=()=>{s.value.property="",s.value.property_address="",s.value.legal_description="",s.value.ct_reference="",s.value.valuation_reference="",s.value.parcel_id="",s.value.zone="",d.value=""},y=b=>{const g=b.target.files[0];g&&C("update:modelValue",X(R({},c.modelValue),{certificate_of_title_document:g.name}))};return(b,g)=>(a(),r("div",null,[g[24]||(g[24]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Property Details",-1)),g[25]||(g[25]=e("p",{class:"text-gray-600 mb-8"},"Provide details about the property for this application",-1)),e("div",Uo,[e("div",null,[g[10]||(g[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Select Existing Property or Enter New ",-1)),m(e("select",{"onUpdate:modelValue":g[0]||(g[0]=V=>s.value.property=V),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:x},[g[9]||(g[9]=e("option",{value:""},"-- Select a property or enter new --",-1)),(a(!0),r(L,null,F(v.properties.data,V=>(a(),r("option",{key:V.name,value:V.name},f(V.street_address)+", "+f(V.suburb)+f(V.legal_description?" - "+V.legal_description:""),9,qo))),128))],544),[[B,s.value.property]])]),e("div",Po,[s.value.property_address?(a(),r("div",Ro,[g[11]||(g[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Property Address *",-1)),e("div",Mo,[m(e("input",{"onUpdate:modelValue":g[1]||(g[1]=V=>s.value.property_address=V),type:"text",readonly:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-900"},null,512),[[h,s.value.property_address]]),e("button",{onClick:n,type:"button",class:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 border border-blue-600 rounded-lg hover:bg-blue-50"}," Change ")]),g[12]||(g[12]=e("p",{class:"mt-1 text-xs text-green-600"},"✓ Address selected from LINZ database",-1))])):(a(),r("div",To,[g[15]||(g[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Property Address *",-1)),m(e("input",{"onUpdate:modelValue":g[2]||(g[2]=V=>d.value=V),onInput:D,onFocus:g[3]||(g[3]=V=>i.value=!0),type:"text",placeholder:"Start typing address... e.g., 123 Main Street",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autocomplete:"off"},null,544),[[h,d.value]]),g[16]||(g[16]=e("p",{class:"mt-1 text-xs text-gray-500"},"Type to search LINZ property database",-1)),i.value&&(t.value.length>0||l.value)?(a(),r("div",No,[l.value?(a(),r("div",zo,[...g[13]||(g[13]=[e("div",{class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mb-2"},null,-1),e("p",{class:"text-sm"},"Searching properties...",-1)])])):(a(),r("div",Eo,[(a(!0),r(L,null,F(t.value,(V,H)=>{var Q,te;return a(),r("button",{key:H,onClick:ie=>q(V),type:"button",class:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors focus:outline-none focus:bg-blue-50"},[e("div",Io,f(V.address),1),e("div",Lo,f(((Q=V.property)==null?void 0:Q.legal_description)||"Legal description not available"),1),(te=V.property)!=null&&te.title_no?(a(),r("div",Fo," Title: "+f(V.property.title_no),1)):_("",!0)],8,jo)}),128))])),!l.value&&t.value.length===0&&d.value.length>=3?(a(),r("div",Oo,[...g[14]||(g[14]=[e("p",{class:"text-sm"},"No properties found. Try a different search.",-1)])])):_("",!0)])):_("",!0)])),e("div",Bo,[e("div",null,[g[17]||(g[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Legal Description",-1)),m(e("input",{"onUpdate:modelValue":g[4]||(g[4]=V=>s.value.legal_description=V),type:"text",placeholder:"Lot 1 DP 12345",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",readonly:""},null,512),[[h,s.value.legal_description]]),s.value.legal_description?(a(),r("p",Ho," ✓ Auto-populated from LINZ ")):_("",!0)]),e("div",null,[g[18]||(g[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Certificate of Title",-1)),m(e("input",{"onUpdate:modelValue":g[5]||(g[5]=V=>s.value.ct_reference=V),type:"text",placeholder:"WN123/456",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",readonly:""},null,512),[[h,s.value.ct_reference]]),s.value.ct_reference?(a(),r("p",Wo," ✓ Auto-populated from LINZ ")):_("",!0)])]),e("div",null,[g[19]||(g[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Upload Certificate of Title (Optional) ",-1)),e("input",{type:"file",onChange:y,accept:".pdf,.jpg,.jpeg,.png",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"},null,32),s.value.certificate_of_title_document?(a(),r("p",Go," ✓ Document uploaded ")):_("",!0),g[20]||(g[20]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload a copy of the Certificate of Title if available",-1))]),e("div",Jo,[e("div",null,[g[21]||(g[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Valuation Reference",-1)),m(e("input",{"onUpdate:modelValue":g[6]||(g[6]=V=>s.value.valuation_reference=V),type:"text",placeholder:"Auto-populated",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",readonly:""},null,512),[[h,s.value.valuation_reference]]),s.value.valuation_reference?(a(),r("p",Yo," ✓ Valuation Reference ")):(a(),r("p",Zo," Will be populated when address is selected "))]),e("div",null,[g[22]||(g[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Parcel ID",-1)),m(e("input",{"onUpdate:modelValue":g[7]||(g[7]=V=>s.value.parcel_id=V),type:"text",placeholder:"Auto-populated",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",readonly:""},null,512),[[h,s.value.parcel_id]]),s.value.parcel_id?(a(),r("p",Xo," ✓ LINZ Parcel ID ")):_("",!0)])]),e("div",Ko,[e("div",null,[g[23]||(g[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Zone",-1)),m(e("input",{"onUpdate:modelValue":g[8]||(g[8]=V=>s.value.zone=V),type:"text",placeholder:"Auto-populated from District Plan",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",readonly:""},null,512),[[h,s.value.zone]]),s.value.zone?(a(),r("p",Qo," ✓ District Plan zone ")):(a(),r("p",es," Will be populated when address is selected "))])])])])]))}},os={class:"space-y-6"},ss={class:"border-t border-gray-200 pt-6"},ls={class:"flex items-start mb-4"},as={key:0,class:"pl-7"},rs=["required"],ns={class:"border-t border-gray-200 pt-6"},is={class:"space-y-4"},ds={key:0,class:"space-y-4 pl-4 border-l-4 border-blue-200"},us=["required"],ps=["required"],cs={__name:"Step6DeliveryPayment",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=A({delivery_preference:c.modelValue.delivery_preference||"",transfer_deposit_required:c.modelValue.transfer_deposit_required||!1,transfer_deposit_consent_number:c.modelValue.transfer_deposit_consent_number||"",invoice_to:c.modelValue.invoice_to||"",invoice_name:c.modelValue.invoice_name||"",invoice_email:c.modelValue.invoice_email||"",invoice_address:c.modelValue.invoice_address||"",invoice_tax_id:c.modelValue.invoice_tax_id||""});return z(()=>c.modelValue,d=>{s.value.delivery_preference=d.delivery_preference||"",s.value.transfer_deposit_required=d.transfer_deposit_required||!1,s.value.transfer_deposit_consent_number=d.transfer_deposit_consent_number||"",s.value.invoice_to=d.invoice_to||"",s.value.invoice_name=d.invoice_name||"",s.value.invoice_email=d.invoice_email||"",s.value.invoice_address=d.invoice_address||"",s.value.invoice_tax_id=d.invoice_tax_id||""},{deep:!0}),z(s,d=>{C("update:modelValue",X(R({},c.modelValue),{delivery_preference:d.delivery_preference,transfer_deposit_required:d.transfer_deposit_required,transfer_deposit_consent_number:d.transfer_deposit_consent_number,invoice_to:d.invoice_to,invoice_name:d.invoice_name,invoice_email:d.invoice_email,invoice_address:d.invoice_address,invoice_tax_id:d.invoice_tax_id}))},{deep:!0}),(d,t)=>(a(),r("div",null,[t[22]||(t[22]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Delivery & Payment",-1)),t[23]||(t[23]=e("p",{class:"text-gray-600 mb-8"},"Choose how you'd like to receive documents and specify payment details",-1)),e("div",os,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Delivery Preference * ",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.value.delivery_preference=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...t[8]||(t[8]=[e("option",{value:""},"Select preference",-1),e("option",{value:"Email"},"Email",-1),e("option",{value:"Post"},"Post",-1),e("option",{value:"Portal"},"Portal (online account)",-1)])],512),[[B,s.value.delivery_preference]]),t[10]||(t[10]=e("p",{class:"mt-1 text-xs text-gray-500"},"How you'd like to receive council correspondence and decision documents",-1))]),e("div",ss,[e("div",ls,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=l=>s.value.transfer_deposit_required=l),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,s.value.transfer_deposit_required]]),t[11]||(t[11]=e("label",{class:"ml-3 text-sm font-medium text-gray-700"}," Transfer deposit from existing consent ",-1))]),s.value.transfer_deposit_required?(a(),r("div",as,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Existing Consent Number * ",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.transfer_deposit_consent_number=l),type:"text",placeholder:"e.g., RC123456",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:s.value.transfer_deposit_required},null,8,rs),[[h,s.value.transfer_deposit_consent_number]]),t[13]||(t[13]=e("p",{class:"mt-1 text-xs text-gray-500"}," Enter the consent number from which the deposit should be transferred ",-1))])):_("",!0)]),e("div",ns,[t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Invoice Details",-1)),e("div",is,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Invoice To * ",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.invoice_to=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...t[14]||(t[14]=[e("option",{value:""},"Select who should receive the invoice",-1),e("option",{value:"Applicant"},"Applicant",-1),e("option",{value:"Other"},"Other (specify below)",-1)])],512),[[B,s.value.invoice_to]])]),s.value.invoice_to==="Other"?(a(),r("div",ds,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Invoice Recipient Name * ",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.invoice_name=l),type:"text",placeholder:"Full name or company name",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:s.value.invoice_to==="Other"},null,8,us),[[h,s.value.invoice_name]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Invoice Recipient Email * ",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.invoice_email=l),type:"email",placeholder:"invoice@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:s.value.invoice_to==="Other"},null,8,ps),[[h,s.value.invoice_email]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Invoice Recipient Address ",-1)),m(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.invoice_address=l),rows:"3",placeholder:"Recipient postal address",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.invoice_address]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Invoice Recipient GST/VAT Number ",-1)),m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.invoice_tax_id=l),type:"text",placeholder:"e.g., 123-456-789",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.invoice_tax_id]]),t[20]||(t[20]=e("p",{class:"mt-1 text-xs text-gray-500"},"Provide if applicable",-1))])])):_("",!0)])])])]))}},ms={class:"space-y-6"},bs={class:"grid md:grid-cols-2 gap-4"},gs=["onClick"],vs={class:"flex items-start"},ys=["checked"],fs={class:"ml-3 flex-1"},xs={class:"text-base font-semibold text-gray-900"},_s={class:"text-sm text-gray-600 mt-1"},hs={class:"border-t border-gray-200 pt-6"},ws={class:"space-y-2"},ks=["value"],$s={class:"ml-3"},Cs={class:"font-medium text-gray-900"},Vs={class:"text-xs text-gray-600 mt-1"},As={__name:"Step7ConsentType",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=[{value:"Land Use",label:"Land Use",description:"For buildings, structures, and use of land"},{value:"Subdivision",label:"Subdivision",description:"For dividing land into separate lots or titles"},{value:"Discharge Permit",label:"Discharge Permit",description:"For discharges to land, water, or air"},{value:"Water Permit",label:"Water Permit",description:"For taking, using, damming, or diverting water"},{value:"Coastal Permit",label:"Coastal Permit",description:"For activities in the coastal marine area"}],d=[{value:"Unsure",label:"Unsure / To Be Determined by Council",description:"Council planner will assess and determine the correct status"},{value:"Permitted",label:"Permitted Activity",description:"Complies with all permitted activity standards"},{value:"Controlled",label:"Controlled Activity",description:"Council must grant consent, can impose conditions"},{value:"Restricted Discretionary",label:"Restricted Discretionary Activity",description:"Council's discretion limited to specified matters"},{value:"Discretionary",label:"Discretionary Activity",description:"Council has full discretion to grant or decline"},{value:"Non-Complying",label:"Non-Complying Activity",description:"Does not comply with plan, requires special consideration"}],t=A({consent_types:c.modelValue.consent_types||[],activity_status:c.modelValue.activity_status||""});z(()=>[c.modelValue.consent_types,c.modelValue.activity_status],([S,x])=>{t.value.consent_types=S||[],t.value.activity_status=x||""},{deep:!0}),z(t,S=>{C("update:modelValue",X(R({},c.modelValue),{consent_types:S.consent_types,activity_status:S.activity_status}))},{deep:!0});const l=S=>{const x=t.value.consent_types.findIndex(D=>D.consent_type===S);x>-1?t.value.consent_types.splice(x,1):t.value.consent_types.push({consent_type:S})},i=S=>t.value.consent_types.some(x=>x.consent_type===S);return(S,x)=>(a(),r("div",null,[x[3]||(x[3]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Consent Type & Activity Status",-1)),x[4]||(x[4]=e("p",{class:"text-gray-600 mb-8"},"Select the types of consent you're applying for and the activity status",-1)),e("div",ms,[e("div",null,[x[1]||(x[1]=e("label",{class:"block text-sm font-medium text-gray-700 mb-4"},[N(" Consent Types Required * "),e("span",{class:"text-xs text-gray-500"},"(Select all that apply)")],-1)),e("div",bs,[(a(),r(L,null,F(s,D=>e("div",{key:D.value,onClick:q=>l(D.value),class:j(["border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md",i(D.value)?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",vs,[e("input",{type:"checkbox",checked:i(D.value),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",readonly:""},null,8,ys),e("div",fs,[e("h3",xs,f(D.label),1),e("p",_s,f(D.description),1)])])],10,gs)),64))])]),e("div",hs,[x[2]||(x[2]=T('<label class="block text-sm font-medium text-gray-700 mb-3"> Activity Status Under District/Regional Plan (Optional) </label><div class="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Not sure? That&#39;s okay!</h5><p class="text-blue-800 text-sm mt-1"> If you&#39;re unsure about your activity status, you can leave this blank. The council planner will determine the correct status when processing your application. Alternatively, you can book a free pre-application meeting with the council to discuss this. </p></div></div></div>',2)),e("div",ws,[(a(),r(L,null,F(d,D=>e("label",{key:D.value,class:j(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-all hover:bg-gray-50",t.value.activity_status===D.value?"border-blue-600 bg-blue-50":"border-gray-200"])},[m(e("input",{type:"radio","onUpdate:modelValue":x[0]||(x[0]=q=>t.value.activity_status=q),value:D.value,class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,ks),[[ne,t.value.activity_status]]),e("div",$s,[e("span",Cs,f(D.label),1),e("p",Vs,f(D.description),1)])],2)),64))])])])]))}},Ss={class:"space-y-6"},Ds={class:"space-y-4"},Us=["for"],qs={class:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:items-start"},Ps={class:"flex-1"},Rs={class:"flex items-center gap-2"},Ms=["id","onUpdate:modelValue","max","disabled","aria-label","aria-describedby","aria-invalid","onBlur","onInput"],Ts=["id"],Ns={key:0,role:"alert",class:"text-xs text-red-600 flex items-center gap-1.5 font-medium"},zs={key:1,class:"text-xs text-green-600 flex items-center gap-1.5 font-medium"},Es={key:2,class:"text-xs text-gray-500"},js=["for"],Is=["id","onUpdate:modelValue","aria-label","onChange"],Ls={key:0,value:3},Fs={key:0,class:"border-t border-gray-200 pt-6"},Os={class:"space-y-3"},Bs={key:0,class:"pl-7"},Hs=["required"],Ws={key:1,class:"border-t border-gray-200 pt-6"},Gs={class:"space-y-3"},Js={key:2,class:"border-t border-gray-200 pt-6"},Ys={key:0,class:"space-y-3"},Zs={key:1,class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},Xs={__name:"Step7BConsentDetails",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=w=>{var $;return(($=c.modelValue.consent_types)==null?void 0:$.some(U=>U.consent_type===w))||!1},d=M(()=>s("Subdivision")),t=M(()=>s("Coastal Permit"));M(()=>s("Land Use")),M(()=>s("Water Permit")),M(()=>s("Discharge Permit"));const l=w=>w==="Land Use"||w==="Subdivision",i=w=>l(w)?999:35,S=w=>l(w)?"Land Use and Subdivision consents can be granted for unlimited duration (s.123 RMA)":"Water Permits, Discharge Permits, and Coastal Permits have a maximum duration of 35 years (s.123 RMA)",x=ye({}),D=w=>{var $;if(!x[w]){const U=($=c.modelValue.consent_type_durations)==null?void 0:$.find(K=>K.consent_type===w);U?x[w]=R({},U):x[w]={consent_type:w,duration_years:10,duration_unlimited:!1}}return x[w]},q=ye({}),n=ye({}),y=w=>{q[w]=!0;const $=D(w);if($.duration_unlimited){n[w]=null;return}const U=i(w),K=$.duration_years;!K||K<1?n[w]="Duration must be at least 1 year":K>U?l(w)?n[w]=`Maximum ${U} years, or select "Unlimited" (s.123 RMA)`:n[w]=`${w} cannot exceed ${U} years (s.123 RMA)`:n[w]=null},b=w=>q[w]?n[w]?"border-2 border-red-300 bg-red-50":D(w).duration_years&&!D(w).duration_unlimited?"border-2 border-green-300 bg-green-50":"border border-gray-300 bg-white":"border border-gray-300 bg-white",g=w=>n[w],V=w=>{y(w)},H=w=>`duration-${w.toLowerCase().replace(/\s+/g,"-")}`,Q=w=>`duration-help-${w.toLowerCase().replace(/\s+/g,"-")}`,te=w=>`unlimited-${w.toLowerCase().replace(/\s+/g,"-")}`;z(x,()=>{const w=Object.values(x);C("update:modelValue",X(R({},c.modelValue),{consent_type_durations:w}))},{deep:!0});const ie=M(()=>{const w=c.modelValue.activity_status==="Controlled",$=!d.value;return w&&$}),de=M(()=>!0),P=A({lapsing_period_years:c.modelValue.lapsing_period_years||5,consent_notice_required:c.modelValue.consent_notice_required||!1,consent_notice_details:c.modelValue.consent_notice_details||"",coastal_occupation_charge_acknowledged:c.modelValue.coastal_occupation_charge_acknowledged||!1,request_fast_track:c.modelValue.request_fast_track||!1});return z(()=>c.modelValue,w=>{P.value.lapsing_period_years=w.lapsing_period_years||5,P.value.consent_notice_required=w.consent_notice_required||!1,P.value.consent_notice_details=w.consent_notice_details||"",P.value.coastal_occupation_charge_acknowledged=w.coastal_occupation_charge_acknowledged||!1,P.value.request_fast_track=w.request_fast_track||!1},{deep:!0}),z(P,w=>{C("update:modelValue",X(R({},c.modelValue),{lapsing_period_years:w.lapsing_period_years,consent_notice_required:w.consent_notice_required,consent_notice_details:w.consent_notice_details,coastal_occupation_charge_acknowledged:w.coastal_occupation_charge_acknowledged,request_fast_track:w.request_fast_track}))},{deep:!0}),(w,$)=>(a(),r("div",null,[$[28]||($[28]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Consent Details",-1)),$[29]||($[29]=e("p",{class:"text-gray-600 mb-8"},"Additional details specific to your consent type(s)",-1)),e("div",Ss,[e("div",null,[$[9]||($[9]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Requested Duration",-1)),$[10]||($[10]=e("p",{class:"text-sm text-gray-600 mb-4"}," Specify the duration for each consent type selected ",-1)),e("div",Ds,[(a(!0),r(L,null,F(c.modelValue.consent_types,U=>(a(),r("div",{key:U.consent_type,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("label",{for:H(U.consent_type),class:"block text-sm font-medium text-gray-700 mb-2"},f(U.consent_type)+" Duration ",9,Us),e("div",qs,[e("div",Ps,[e("div",Rs,[m(e("input",{id:H(U.consent_type),"onUpdate:modelValue":K=>D(U.consent_type).duration_years=K,type:"number",min:1,max:i(U.consent_type),placeholder:"e.g., 10",disabled:D(U.consent_type).duration_unlimited,"aria-label":`Duration in years for ${U.consent_type} consent`,"aria-describedby":Q(U.consent_type),"aria-invalid":!!g(U.consent_type),class:j(["flex-1 min-w-0 px-3 py-2 rounded-lg transition-colors","focus:ring-2 focus:ring-blue-500 focus:outline-none",b(U.consent_type)]),onBlur:K=>y(U.consent_type),onInput:K=>y(U.consent_type)},null,42,Ms),[[h,D(U.consent_type).duration_years,void 0,{number:!0}]]),$[5]||($[5]=e("span",{class:"text-gray-600 whitespace-nowrap"},"years",-1))]),e("div",{id:Q(U.consent_type),class:"mt-1.5 min-h-[20px]"},[g(U.consent_type)?(a(),r("p",Ns,[$[6]||($[6]=e("svg",{class:"w-3.5 h-3.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),N(" "+f(g(U.consent_type)),1)])):q[U.consent_type]&&D(U.consent_type).duration_years&&!D(U.consent_type).duration_unlimited?(a(),r("p",zs,[...$[7]||($[7]=[e("svg",{class:"w-3.5 h-3.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),N(" Valid duration ",-1)])])):(a(),r("p",Es,f(S(U.consent_type)),1))],8,Ts)]),l(U.consent_type)?(a(),r("label",{key:0,for:te(U.consent_type),class:"flex items-center gap-2 whitespace-nowrap pl-4 sm:pl-0 border-l-2 sm:border-l-0 border-gray-200 sm:pt-2"},[m(e("input",{id:te(U.consent_type),"onUpdate:modelValue":K=>D(U.consent_type).duration_unlimited=K,type:"checkbox","aria-label":`Unlimited duration for ${U.consent_type} consent`,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:K=>V(U.consent_type)},null,40,Is),[[I,D(U.consent_type).duration_unlimited]]),$[8]||($[8]=e("span",{class:"text-sm font-medium"},"Unlimited",-1))],8,js)):_("",!0)])]))),128))])]),e("div",null,[$[13]||($[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Lapsing Period ",-1)),m(e("select",{"onUpdate:modelValue":$[0]||($[0]=U=>P.value.lapsing_period_years=U),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[$[11]||($[11]=e("option",{value:5},"5 years (standard)",-1)),$[12]||($[12]=e("option",{value:10},"10 years (renewable energy)",-1)),t.value?(a(),r("option",Ls,"3 years (aquaculture)")):_("",!0)],512),[[B,P.value.lapsing_period_years,void 0,{number:!0}]]),$[14]||($[14]=e("p",{class:"mt-1 text-xs text-gray-500"}," Time period before consent lapses if not given effect to (s.125 RMA) ",-1))]),d.value?(a(),r("div",Fs,[$[17]||($[17]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Consent Notice (s.221 RMA)",-1)),$[18]||($[18]=e("p",{class:"text-sm text-gray-600 mb-4"}," For subdivision consents, indicate whether a consent notice should be placed on the record of title ",-1)),e("div",Os,[e("label",{class:j(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",P.value.consent_notice_required?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[m(e("input",{"onUpdate:modelValue":$[1]||($[1]=U=>P.value.consent_notice_required=U),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,P.value.consent_notice_required]]),$[15]||($[15]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Consent notice required"),e("p",{class:"text-xs text-gray-600 mt-1"}," Check if ongoing conditions need to be recorded on the certificate of title ")],-1))],2),P.value.consent_notice_required?(a(),r("div",Bs,[$[16]||($[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Consent Notice Details * ",-1)),m(e("textarea",{"onUpdate:modelValue":$[2]||($[2]=U=>P.value.consent_notice_details=U),rows:"4",placeholder:"Describe the matters to be included in the consent notice...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:P.value.consent_notice_required},null,8,Hs),[[h,P.value.consent_notice_details]])])):_("",!0)])])):_("",!0),t.value?(a(),r("div",Ws,[$[20]||($[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Coastal Occupation Charge",-1)),$[21]||($[21]=e("p",{class:"text-sm text-gray-600 mb-4"}," For occupation of the coastal marine area, councils may impose a coastal occupation charge ",-1)),e("div",Gs,[e("label",{class:j(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",P.value.coastal_occupation_charge_acknowledged?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[m(e("input",{"onUpdate:modelValue":$[3]||($[3]=U=>P.value.coastal_occupation_charge_acknowledged=U),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,P.value.coastal_occupation_charge_acknowledged]]),$[19]||($[19]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"I acknowledge that a coastal occupation charge may apply"),e("p",{class:"text-xs text-gray-600 mt-1"}," The council will determine the applicable charge based on the nature and extent of occupation ")],-1))],2)])])):_("",!0),$[27]||($[27]=T('<div class="border-t border-gray-200 pt-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Financial Contribution (s.108(2)(a) RMA)</h3><p class="text-sm text-gray-600 mb-4"> Council may impose financial contributions as a condition of consent </p><div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Information Only</h5><p class="text-blue-800 text-sm mt-1"> Financial contributions are determined by council policy and will be advised during processing if applicable. No action required at this stage. </p></div></div></div></div>',1)),de.value?(a(),r("div",Js,[$[25]||($[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Fast-Track Processing (s.87AAB RMA)",-1)),$[26]||($[26]=e("p",{class:"text-sm text-gray-600 mb-4"}," Controlled activities may be eligible for fast-track processing with reduced timeframes ",-1)),ie.value?(a(),r("div",Ys,[$[23]||($[23]=T('<div class="bg-green-50 border border-green-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-green-900 text-sm">Eligible for Fast-Track</h5><p class="text-green-800 text-sm mt-1"> Based on your consent type and activity status (Controlled), this application is eligible for fast-track processing. </p></div></div></div>',1)),e("label",{class:j(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",P.value.request_fast_track?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[m(e("input",{"onUpdate:modelValue":$[4]||($[4]=U=>P.value.request_fast_track=U),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,P.value.request_fast_track]]),$[22]||($[22]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Request fast-track processing"),e("p",{class:"text-xs text-gray-600 mt-1"}," I would like this application to be processed under fast-track provisions (subject to council availability) ")],-1))],2)])):(a(),r("div",Zs,[...$[24]||($[24]=[e("p",{class:"text-sm text-gray-600"}," Fast-track processing is only available for Controlled activities (excluding Subdivision consents). Your current selections do not qualify for fast-track. ",-1)])]))])):_("",!0)])]))}},Ks={class:"space-y-6"},Qs={class:"mt-1 text-xs text-gray-500"},el={key:0,class:"space-y-4"},tl={class:"flex justify-between items-start mb-4"},ol={class:"text-lg font-semibold text-gray-900"},sl=["onClick"],ll={class:"mb-4"},al=["onUpdate:modelValue"],rl={key:0,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},nl={class:"grid md:grid-cols-2 gap-4"},il=["onUpdate:modelValue"],dl=["onUpdate:modelValue"],ul={key:1,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},pl=["onUpdate:modelValue"],cl={key:2,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},ml=["onUpdate:modelValue"],bl={key:3,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},gl=["onUpdate:modelValue"],vl={key:4,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},yl={class:"grid md:grid-cols-2 gap-4"},fl=["onUpdate:modelValue"],xl=["onUpdate:modelValue"],_l={key:5,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},hl={class:"space-y-4"},wl=["onUpdate:modelValue"],kl=["onUpdate:modelValue"],$l=["onUpdate:modelValue"],Cl={key:6,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Vl={class:"space-y-4"},Al=["onUpdate:modelValue"],Sl={class:"grid md:grid-cols-2 gap-4"},Dl=["onUpdate:modelValue"],Ul=["onUpdate:modelValue"],ql={key:7,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Pl={class:"space-y-4"},Rl=["onUpdate:modelValue"],Ml=["onUpdate:modelValue"],Tl={key:1,class:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},Nl={__name:"Step8ProposalDetails",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=A({brief_description:c.modelValue.brief_description||"",detailed_description:c.modelValue.detailed_description||""});z(()=>[c.modelValue.brief_description,c.modelValue.detailed_description],([l,i])=>{s.value.brief_description=l||"",s.value.detailed_description=i||""}),z(s,l=>{C("update:modelValue",X(R({},c.modelValue),{brief_description:l.brief_description,detailed_description:l.detailed_description}))},{deep:!0});const d=()=>{const l=R({},c.modelValue);l.proposal_details||(l.proposal_details=[]),l.proposal_details.push({detail_type:"",building_height_m:null,total_floor_area_m2:null,earthworks_description:"",traffic_description:"",operations_description:"",subdivision_lots:null,subdivision_lot_sizes:"",discharge_type:"",discharge_receiver:"",discharge_treatment:"",water_source:"",water_max_take_m3:null,water_rate:"",coastal_structure_type:"",coastal_navigation_effects:""}),C("update:modelValue",l)},t=l=>{if(confirm("Remove this proposal detail?")){const i=R({},c.modelValue);i.proposal_details.splice(l,1),C("update:modelValue",i)}};return(l,i)=>{var S;return a(),r("div",null,[i[36]||(i[36]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Proposal Details",-1)),i[37]||(i[37]=e("p",{class:"text-gray-600 mb-8"},"Describe your proposed activity in detail",-1)),e("div",Ks,[e("div",null,[i[2]||(i[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Brief Description * ",-1)),m(e("textarea",{"onUpdate:modelValue":i[0]||(i[0]=x=>s.value.brief_description=x),rows:"2",maxlength:"200",placeholder:"Provide a short summary of your proposal (max 200 characters)",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[h,s.value.brief_description]]),e("p",Qs,f(((S=s.value.brief_description)==null?void 0:S.length)||0)+"/200 characters ",1)]),e("div",null,[i[3]||(i[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Detailed Description * ",-1)),m(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=x=>s.value.detailed_description=x),rows:"6",placeholder:"Provide a comprehensive description of your proposal including scope, materials, dimensions, environmental considerations, and any other relevant information for the planner's assessment",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[h,s.value.detailed_description]]),i[4]||(i[4]=e("p",{class:"mt-1 text-xs text-gray-500"}," Full description of the proposed work for planner assessment ",-1))]),i[35]||(i[35]=e("div",{class:"border-t border-gray-200 pt-6"},[e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Detailed Breakdown (Optional)"),e("p",{class:"text-sm text-gray-600 mb-4"}," Add specific details for different aspects of your proposal ")],-1)),e("div",{class:"flex justify-between items-center"},[i[6]||(i[6]=e("p",{class:"text-sm text-gray-700"}," Add details about different aspects of your proposal (building, earthworks, traffic, etc.) ",-1)),e("button",{onClick:d,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[...i[5]||(i[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),N(" Add Proposal Detail ",-1)])])]),v.modelValue.proposal_details&&v.modelValue.proposal_details.length>0?(a(),r("div",el,[(a(!0),r(L,null,F(v.modelValue.proposal_details,(x,D)=>(a(),r("div",{key:D,class:"border border-gray-200 rounded-lg p-6 bg-white shadow-sm"},[e("div",tl,[e("h3",ol,f(x.detail_type||"Proposal Detail")+" #"+f(D+1),1),e("button",{onClick:q=>t(D),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...i[7]||(i[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,sl)]),e("div",ll,[i[9]||(i[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Detail Type * ",-1)),m(e("select",{"onUpdate:modelValue":q=>x.detail_type=q,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...i[8]||(i[8]=[T('<option value="">Select type</option><option value="Building">Building</option><option value="Earthworks">Earthworks</option><option value="Traffic">Traffic &amp; Parking</option><option value="Operations">Operations</option><option value="Subdivision">Subdivision</option><option value="Discharge">Discharge</option><option value="Water">Water Take/Use</option><option value="Coastal">Coastal Activity</option>',9)])],8,al),[[B,x.detail_type]])]),x.detail_type==="Building"?(a(),r("div",rl,[i[12]||(i[12]=e("h4",{class:"font-medium text-gray-900"},"Building Details",-1)),e("div",nl,[e("div",null,[i[10]||(i[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Building Height (m)",-1)),m(e("input",{"onUpdate:modelValue":q=>x.building_height_m=q,type:"number",step:"0.1",placeholder:"e.g., 8.5",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,il),[[h,x.building_height_m,void 0,{number:!0}]])]),e("div",null,[i[11]||(i[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Total Floor Area (m²)",-1)),m(e("input",{"onUpdate:modelValue":q=>x.total_floor_area_m2=q,type:"number",step:"0.1",placeholder:"e.g., 250.5",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,dl),[[h,x.total_floor_area_m2,void 0,{number:!0}]])])])])):_("",!0),x.detail_type==="Earthworks"?(a(),r("div",ul,[i[14]||(i[14]=e("h4",{class:"font-medium text-gray-900"},"Earthworks Details",-1)),e("div",null,[i[13]||(i[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":q=>x.earthworks_description=q,rows:"4",placeholder:"Describe the earthworks proposed...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,pl),[[h,x.earthworks_description]])])])):_("",!0),x.detail_type==="Traffic"?(a(),r("div",cl,[i[16]||(i[16]=e("h4",{class:"font-medium text-gray-900"},"Traffic & Parking Details",-1)),e("div",null,[i[15]||(i[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":q=>x.traffic_description=q,rows:"4",placeholder:"Describe traffic generation, parking provision, access arrangements...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,ml),[[h,x.traffic_description]])])])):_("",!0),x.detail_type==="Operations"?(a(),r("div",bl,[i[18]||(i[18]=e("h4",{class:"font-medium text-gray-900"},"Operations Details",-1)),e("div",null,[i[17]||(i[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":q=>x.operations_description=q,rows:"4",placeholder:"Describe hours of operation, activities, processes...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,gl),[[h,x.operations_description]])])])):_("",!0),x.detail_type==="Subdivision"?(a(),r("div",vl,[i[21]||(i[21]=e("h4",{class:"font-medium text-gray-900"},"Subdivision Details",-1)),e("div",yl,[e("div",null,[i[19]||(i[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Number of Lots",-1)),m(e("input",{"onUpdate:modelValue":q=>x.subdivision_lots=q,type:"number",placeholder:"e.g., 5",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,fl),[[h,x.subdivision_lots,void 0,{number:!0}]])]),e("div",null,[i[20]||(i[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Lot Sizes",-1)),m(e("input",{"onUpdate:modelValue":q=>x.subdivision_lot_sizes=q,type:"text",placeholder:"e.g., 800m², 1000m², 1200m²",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,xl),[[h,x.subdivision_lot_sizes]])])])])):_("",!0),x.detail_type==="Discharge"?(a(),r("div",_l,[i[26]||(i[26]=e("h4",{class:"font-medium text-gray-900"},"Discharge Details",-1)),e("div",hl,[e("div",null,[i[23]||(i[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Discharge Type",-1)),m(e("select",{"onUpdate:modelValue":q=>x.discharge_type=q,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...i[22]||(i[22]=[T('<option value="">Select type</option><option value="Stormwater">Stormwater</option><option value="Wastewater">Wastewater</option><option value="Air">Air</option><option value="Other">Other</option>',5)])],8,wl),[[B,x.discharge_type]])]),e("div",null,[i[24]||(i[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Receiving Environment",-1)),m(e("input",{"onUpdate:modelValue":q=>x.discharge_receiver=q,type:"text",placeholder:"e.g., Reticulated network, stream, land",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,kl),[[h,x.discharge_receiver]])]),e("div",null,[i[25]||(i[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Treatment System",-1)),m(e("textarea",{"onUpdate:modelValue":q=>x.discharge_treatment=q,rows:"3",placeholder:"Describe treatment systems and methods...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,$l),[[h,x.discharge_treatment]])])])])):_("",!0),x.detail_type==="Water"?(a(),r("div",Cl,[i[30]||(i[30]=e("h4",{class:"font-medium text-gray-900"},"Water Take/Use Details",-1)),e("div",Vl,[e("div",null,[i[27]||(i[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Water Source",-1)),m(e("input",{"onUpdate:modelValue":q=>x.water_source=q,type:"text",placeholder:"e.g., River, bore, stream",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Al),[[h,x.water_source]])]),e("div",Sl,[e("div",null,[i[28]||(i[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Maximum Take (m³/day)",-1)),m(e("input",{"onUpdate:modelValue":q=>x.water_max_take_m3=q,type:"number",step:"0.1",placeholder:"e.g., 50",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Dl),[[h,x.water_max_take_m3,void 0,{number:!0}]])]),e("div",null,[i[29]||(i[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rate",-1)),m(e("input",{"onUpdate:modelValue":q=>x.water_rate=q,type:"text",placeholder:"e.g., 2 L/s",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Ul),[[h,x.water_rate]])])])])])):_("",!0),x.detail_type==="Coastal"?(a(),r("div",ql,[i[33]||(i[33]=e("h4",{class:"font-medium text-gray-900"},"Coastal Activity Details",-1)),e("div",Pl,[e("div",null,[i[31]||(i[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Structure Type",-1)),m(e("input",{"onUpdate:modelValue":q=>x.coastal_structure_type=q,type:"text",placeholder:"e.g., Jetty, mooring, seawall",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Rl),[[h,x.coastal_structure_type]])]),e("div",null,[i[32]||(i[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Navigation Effects",-1)),m(e("textarea",{"onUpdate:modelValue":q=>x.coastal_navigation_effects=q,rows:"3",placeholder:"Describe potential effects on navigation...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Ml),[[h,x.coastal_navigation_effects]])])])])):_("",!0)]))),128))])):(a(),r("div",Tl,[...i[34]||(i[34]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-600"},"No proposal details added yet",-1),e("p",{class:"text-xs text-gray-500 mt-1"},'Click "Add Proposal Detail" to describe your proposed activity',-1)])]))])])}}},zl={class:"space-y-6"},El={class:"bg-white border border-gray-200 rounded-lg p-6"},jl={class:"grid md:grid-cols-2 gap-4"},Il={class:"bg-white border border-gray-200 rounded-lg p-6"},Ll={class:"grid md:grid-cols-2 gap-4"},Fl={class:"mt-4"},Ol={class:"bg-white border border-gray-200 rounded-lg p-6"},Bl={class:"space-y-4"},Hl={class:"flex items-start"},Wl={class:"bg-white border border-gray-200 rounded-lg p-6"},Gl={class:"space-y-4"},Jl={class:"flex items-start"},Yl={key:0,class:"pl-7"},Zl={class:"bg-white border border-gray-200 rounded-lg p-6"},Xl={class:"space-y-4"},Kl={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Ql={class:"bg-white border border-gray-200 rounded-lg p-6"},ea={__name:"Step9SiteEnvironment",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=M({get:()=>c.modelValue,set:d=>C("update:modelValue",d)});return(d,t)=>(a(),r("div",null,[t[35]||(t[35]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Site & Environment",-1)),t[36]||(t[36]=e("p",{class:"text-gray-600 mb-8"},"Describe the site and existing environment",-1)),e("div",zl,[e("div",El,[t[14]||(t[14]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Site Information",-1)),e("div",jl,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Site Area (m²)",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.value.site_area_m2=l),type:"number",step:"0.1",placeholder:"e.g., 800",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.site_area_m2,void 0,{number:!0}]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Use",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.current_use=l),type:"text",placeholder:"e.g., Residential dwelling",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.current_use]])])])]),e("div",Il,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Planning Context",-1)),e("div",Ll,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Zoning",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.zoning=l),type:"text",placeholder:"e.g., Residential, Rural, Mixed Use",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.zoning]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Overlays",-1)),m(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.overlays=l),rows:"2",placeholder:"e.g., Heritage overlay, flood zone, outstanding natural landscape",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.overlays]]),t[17]||(t[17]=e("p",{class:"mt-1 text-xs text-gray-500"},"List any planning overlays that apply to the site",-1))])]),e("div",Fl,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Designations",-1)),m(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.designations=l),rows:"2",placeholder:"e.g., Road designation, network utilities",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.designations]]),t[19]||(t[19]=e("p",{class:"mt-1 text-xs text-gray-500"},"List any designations affecting the property",-1))])]),e("div",Ol,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Site Description",-1)),e("div",Bl,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Site Topography",-1)),m(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.site_topography=l),rows:"4",placeholder:"Describe the topography (flat, sloping, rolling, steep), aspect, elevation changes...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.site_topography]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Existing Vegetation",-1)),m(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.existing_vegetation=l),rows:"4",placeholder:"Describe vegetation on the site (lawns, gardens, mature trees, bush, etc.)",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.existing_vegetation]])]),e("div",Hl,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=l=>s.value.significant_vegetation=l),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,s.value.significant_vegetation]]),t[23]||(t[23]=e("label",{class:"ml-3 text-sm font-medium text-gray-700"},[N(" Significant Indigenous Vegetation Present "),e("p",{class:"text-xs text-gray-500 font-normal mt-1"},"Check if the site contains significant indigenous vegetation or habitats")],-1))])])]),e("div",Wl,[t[27]||(t[27]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Watercourses / Wetlands",-1)),e("div",Gl,[e("div",Jl,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=l=>s.value.watercourses_present=l),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,s.value.watercourses_present]]),t[25]||(t[25]=e("label",{class:"ml-3 text-sm font-medium text-gray-700"},[N(" Watercourses or Wetlands Present "),e("p",{class:"text-xs text-gray-500 font-normal mt-1"},"Check if there are streams, rivers, wetlands, or water bodies on or adjacent to the site")],-1))]),s.value.watercourses_present?(a(),r("div",Yl,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=l=>s.value.watercourses_description=l),rows:"4",placeholder:"Describe the watercourse/wetland (type, location, size, condition, flow characteristics)...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.watercourses_description]])])):_("",!0)])]),e("div",Zl,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"HAIL Contamination Status",-1)),t[32]||(t[32]=e("p",{class:"text-sm text-gray-600 mb-4"}," Hazardous Activities and Industries List (HAIL) - indicate if the site has been used for activities that may have caused contamination ",-1)),e("div",Xl,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"HAIL Status *",-1)),m(e("select",{"onUpdate:modelValue":t[10]||(t[10]=l=>s.value.hail_status=l),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[28]||(t[28]=[T('<option value="">Select status</option><option value="Not Applicable">Not Applicable - Site never used for HAIL activities</option><option value="No Known Contamination">No Known Contamination - HAIL use but no evidence of contamination</option><option value="Potential">Potential Contamination - HAIL use, contamination possible</option><option value="Confirmed">Confirmed Contamination - Contamination identified</option>',5)])],512),[[B,s.value.hail_status]])]),s.value.hail_status==="Potential"||s.value.hail_status==="Confirmed"?(a(),r("div",Kl,[...t[30]||(t[30]=[T('<div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Contaminated Site Notice</h5><p class="text-yellow-800 text-sm mt-1"> You may need a Preliminary or Detailed Site Investigation (PSI/DSI) by a qualified contaminated land specialist. Consult the council&#39;s environmental health team. </p></div></div>',1)])])):_("",!0)])]),e("div",Ql,[t[34]||(t[34]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Existing Infrastructure",-1)),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Infrastructure Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=l=>s.value.existing_infrastructure=l),rows:"4",placeholder:"Describe existing infrastructure on the site (buildings, driveways, fences, services - water, wastewater, stormwater, power, telecommunications)...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.existing_infrastructure]])])])])]))}},ta={class:"space-y-8"},oa={class:"space-y-3"},sa=["aria-checked","aria-label","onClick","onKeydown"],la={class:"flex items-start"},aa=["checked"],ra={class:"ml-3 flex-1"},na={class:"text-base font-semibold text-gray-900"},ia={key:0,class:"mt-3 space-y-3"},da=["onUpdate:modelValue"],ua=["onUpdate:modelValue"],pa={class:"border-t border-gray-200 pt-8"},ca={key:0,class:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-lg"},ma={key:1,class:"mb-4"},ba={key:2,class:"space-y-4"},ga={class:"flex justify-between items-start mb-4"},va={class:"text-base font-semibold text-gray-900"},ya=["onClick"],fa={class:"grid md:grid-cols-2 gap-4"},xa=["onUpdate:modelValue"],_a=["onUpdate:modelValue"],ha={class:"mt-4"},wa=["onUpdate:modelValue"],ka={key:3,class:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},$a={__name:"Step10NESHazards",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=M({get:()=>c.modelValue,set:n=>C("update:modelValue",n)}),d=n=>{var y;return((y=c.modelValue.consent_types)==null?void 0:y.some(b=>b.consent_type===n))||!1},t=M(()=>d("Land Use")||d("Subdivision"));z(()=>s.value.no_natural_hazards_confirmed,n=>{if(n&&t.value){const y=R({},c.modelValue);y.natural_hazards=[],y.no_natural_hazards_confirmed=!0,C("update:modelValue",y)}});const l=[{value:"Contaminated Soil (HAIL)",label:"NES for Assessing and Managing Contaminants in Soil (HAIL)"},{value:"Air Quality",label:"NES for Air Quality"},{value:"Drinking Water",label:"NES for Sources of Human Drinking Water"},{value:"Freshwater",label:"NES for Freshwater Management"},{value:"Plantation Forestry",label:"NES for Plantation Forestry"},{value:"Electricity Transmission",label:"NES for Electricity Transmission Activities"},{value:"Telecommunications",label:"NES for Telecommunication Facilities"},{value:"Other",label:"Other NES"}];if(!s.value.nes_items){const n=R({},c.modelValue);n.nes_items=[],C("update:modelValue",n)}const i=ye({}),S=n=>{var y;if(!i[n]){const b=(y=s.value.nes_items)==null?void 0:y.find(g=>g.nes_type===n);b?i[n]=R({},b):i[n]={nes_type:n,applies:!1,description:"",compliance_notes:""}}return i[n]},x=n=>{const y=S(n);y.applies=!y.applies;const b=R({},c.modelValue);b.nes_items||(b.nes_items=[]);const g=b.nes_items.findIndex(V=>V.nes_type===n);y.applies?g>=0?b.nes_items[g]=R({},y):b.nes_items.push(R({},y)):g>=0&&b.nes_items.splice(g,1),C("update:modelValue",b)},D=()=>{const n=R({},c.modelValue);n.natural_hazards||(n.natural_hazards=[]),n.natural_hazards.push({hazard_type:"",risk_level:"",mitigation_measures:""}),C("update:modelValue",n)},q=n=>{if(confirm("Remove this natural hazard?")){const y=R({},c.modelValue);y.natural_hazards.splice(n,1),C("update:modelValue",y)}};return(n,y)=>(a(),r("div",null,[y[20]||(y[20]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"National Environmental Standards & Natural Hazards",-1)),y[21]||(y[21]=e("p",{class:"text-gray-600 mb-8"},"Assess compliance with NES and identify natural hazards",-1)),e("div",ta,[e("div",null,[y[5]||(y[5]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"National Environmental Standards (NES)",-1)),y[6]||(y[6]=e("p",{class:"text-sm text-gray-600 mb-4"}," Indicate which NES may apply to your proposal and confirm compliance ",-1)),e("div",oa,[(a(),r(L,null,F(l,b=>e("div",{key:b.value,role:"checkbox","aria-checked":S(b.value).applies,"aria-label":`${b.label} - Click to toggle applicability`,tabindex:0,class:j(["border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md focus:ring-2 focus:ring-blue-500 focus:outline-none",S(b.value).applies?"border-blue-600 bg-blue-50":"border-gray-200"]),onClick:g=>x(b.value),onKeydown:[Te(le(g=>x(b.value),["prevent"]),["space"]),Te(le(g=>x(b.value),["prevent"]),["enter"])]},[e("div",la,[e("input",{type:"checkbox",checked:S(b.value).applies,class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",readonly:"","aria-hidden":"true"},null,8,aa),e("div",ra,[e("h4",na,f(b.label),1),S(b.value).applies?(a(),r("div",ia,[e("div",null,[y[3]||(y[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description / Compliance Status",-1)),m(e("textarea",{"onUpdate:modelValue":g=>S(b.value).description=g,onClick:y[0]||(y[0]=le(()=>{},["stop"])),rows:"3",placeholder:"Describe how this NES applies and how you will comply...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,8,da),[[h,S(b.value).description]])]),e("div",null,[y[4]||(y[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Compliance Notes",-1)),m(e("textarea",{"onUpdate:modelValue":g=>S(b.value).compliance_notes=g,onClick:y[1]||(y[1]=le(()=>{},["stop"])),rows:"2",placeholder:"Additional compliance notes or assessment...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,8,ua),[[h,S(b.value).compliance_notes]])])])):_("",!0)])])],42,sa)),64))])]),e("div",pa,[y[18]||(y[18]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Natural Hazards (RMA s.104 & s.106)",-1)),t.value?(a(),r("div",ca,[...y[7]||(y[7]=[T('<div class="flex items-start"><svg class="w-5 h-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-amber-900 text-sm">Critical Assessment Required - s.106 RMA</h5><p class="text-amber-800 text-sm mt-1"><strong>Important:</strong> Under s.106 RMA, councils <strong>must refuse</strong> Land Use and Subdivision consents if building on land subject to certain natural hazards would: </p><ul class="text-amber-800 text-sm mt-2 ml-4 list-disc"><li>Accelerate, worsen, or result in material damage</li><li>Create or worsen a natural hazard on the property or other property</li></ul><p class="text-amber-800 text-sm mt-2"> Please carefully identify all natural hazards affecting the site and detail mitigation measures. </p></div></div>',1)])])):_("",!0),y[19]||(y[19]=e("p",{class:"text-sm text-gray-600 mb-4"}," Under s.104(1)(c) RMA, councils must consider the risk of natural hazards. Identify any hazards that may affect the site. ",-1)),t.value&&(!s.value.natural_hazards||s.value.natural_hazards.length===0)?(a(),r("div",ma,[e("label",{for:"no-hazards-confirmation",class:j(["flex items-start p-3 border-2 rounded-lg cursor-pointer bg-white transition-colors",s.value.no_natural_hazards_confirmed?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[m(e("input",{id:"no-hazards-confirmation","onUpdate:modelValue":y[2]||(y[2]=b=>s.value.no_natural_hazards_confirmed=b),type:"checkbox","aria-describedby":"no-hazards-description",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,s.value.no_natural_hazards_confirmed]]),y[8]||(y[8]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"I confirm there are no natural hazards affecting this site"),e("p",{id:"no-hazards-description",class:"text-xs text-gray-600 mt-1"}," By checking this box, I confirm that I have considered all potential natural hazards (flooding, erosion, landslip, earthquake, tsunami, etc.) and none are applicable to this site. ")],-1))],2)])):_("",!0),e("div",{class:"flex justify-between items-center mb-4"},[y[10]||(y[10]=e("p",{class:"text-sm text-gray-700"}," Select hazard types that may affect your site and describe mitigation measures ",-1)),e("button",{onClick:D,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[...y[9]||(y[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),N(" Add Natural Hazard ",-1)])])]),s.value.natural_hazards&&s.value.natural_hazards.length>0?(a(),r("div",ba,[(a(!0),r(L,null,F(s.value.natural_hazards,(b,g)=>(a(),r("div",{key:g,class:"border border-gray-200 rounded-lg p-4 bg-white"},[e("div",ga,[e("h4",va," Hazard #"+f(g+1),1),e("button",{onClick:V=>q(g),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...y[11]||(y[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ya)]),e("div",fa,[e("div",null,[y[13]||(y[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Hazard Type *",-1)),m(e("select",{"onUpdate:modelValue":V=>b.hazard_type=V,required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...y[12]||(y[12]=[T('<option value="">Select hazard type</option><option value="Earthquake">Earthquake</option><option value="Fire">Fire</option><option value="Tsunami">Tsunami</option><option value="Erosion">Erosion</option><option value="Volcanic">Volcanic &amp; Geothermal</option><option value="Flood">Flood</option><option value="Sedimentation">Sedimentation</option><option value="Subsidence">Subsidence</option><option value="Wind">Wind</option><option value="Landslip">Landslip</option><option value="Drought">Drought</option>',12)])],8,xa),[[B,b.hazard_type]])]),e("div",null,[y[15]||(y[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Risk Level",-1)),m(e("select",{"onUpdate:modelValue":V=>b.risk_level=V,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...y[14]||(y[14]=[e("option",{value:""},"Select risk level",-1),e("option",{value:"Low"},"Low",-1),e("option",{value:"Medium"},"Medium",-1),e("option",{value:"High"},"High",-1)])],8,_a),[[B,b.risk_level]])])]),e("div",ha,[y[16]||(y[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mitigation Measures",-1)),m(e("textarea",{"onUpdate:modelValue":V=>b.mitigation_measures=V,rows:"3",placeholder:"Describe mitigation measures to address this hazard (design features, engineering solutions, management plans)...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,wa),[[h,b.mitigation_measures]])])]))),128))])):(a(),r("div",ka,[...y[17]||(y[17]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),e("p",{class:"mt-2 text-sm text-gray-600"},"No natural hazards identified",-1),e("p",{class:"text-xs text-gray-500 mt-1"},'Click "Add Natural Hazard" if any hazards may affect the site',-1)])]))])])]))}},Ca={class:"space-y-8"},Va={class:"bg-white border border-gray-200 rounded-lg p-6"},Aa={class:"bg-white border border-gray-200 rounded-lg p-6"},Sa={class:"bg-white border border-gray-200 rounded-lg p-6"},Da={class:"space-y-6"},Ua={class:"border-t border-gray-200 pt-6"},qa={class:"border-t border-gray-200 pt-6"},Pa={class:"bg-white border border-gray-200 rounded-lg p-6"},Ra={key:0,class:"mt-3 flex items-center gap-2 text-sm text-green-600"},Ma={__name:"Step11AEE",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=M({get:()=>c.modelValue,set:t=>C("update:modelValue",t)}),d=t=>{const l=t.target.files[0];if(l){if(l.size>50*1024*1024){alert("File size must be less than 50MB"),t.target.value="";return}const i=R({},c.modelValue);i.aee_document=l,C("update:modelValue",i)}};return(t,l)=>(a(),r("div",null,[l[23]||(l[23]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Assessment of Environmental Effects (AEE)",-1)),l[24]||(l[24]=e("p",{class:"text-gray-600 mb-8"},"Assess the actual and potential effects of your proposal on the environment",-1)),e("div",Ca,[l[21]||(l[21]=T('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Schedule 4 RMA Requirements</h5><p class="text-blue-800 text-sm mt-1"> Your AEE must address the matters in Schedule 4 of the RMA, scaled to the nature and scale of the proposal. </p></div></div></div>',1)),e("div",Va,[l[5]||(l[5]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"1. Description of Activity *",-1)),l[6]||(l[6]=e("p",{class:"text-sm text-gray-600 mb-4"},"Describe the proposed activity including its location, design, and how it will be carried out",-1)),m(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=i=>s.value.aee_activity_description=i),rows:"6",required:"",placeholder:"Provide a detailed description of what you're proposing to do, where it will be located, and how it will be undertaken...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.aee_activity_description]])]),e("div",Aa,[l[7]||(l[7]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"2. Description of Existing Environment *",-1)),l[8]||(l[8]=e("p",{class:"text-sm text-gray-600 mb-4"},"Describe the current state of the site and surrounding environment",-1)),m(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=i=>s.value.aee_existing_environment=i),rows:"6",required:"",placeholder:"Describe the site's current characteristics, land use, vegetation, topography, nearby activities, surrounding development...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.aee_existing_environment]])]),e("div",Sa,[l[14]||(l[14]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"3. Assessment of Actual and Potential Effects *",-1)),l[15]||(l[15]=e("p",{class:"text-sm text-gray-600 mb-4"}," Identify and assess the actual and potential effects on the environment, including positive and negative effects, temporary and permanent effects ",-1)),e("div",Da,[e("div",null,[l[9]||(l[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Overall Effects Assessment *",-1)),m(e("textarea",{"onUpdate:modelValue":l[2]||(l[2]=i=>s.value.assessment_of_effects=i),rows:"10",required:"",placeholder:`Address effects on:
• Physical environment (land, water, air, noise, vibration)
• Ecological environment (vegetation, wildlife, habitats)
• Social and cultural environment (amenity, heritage, iwi values)
• Economic environment
• Cumulative effects
• Risk of natural hazards

Include consideration of:
• Magnitude and scale of effects
• Duration (temporary vs permanent)
• Reversibility
• Mitigation measures proposed`,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.assessment_of_effects]])]),e("div",Ua,[l[10]||(l[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Part 2 RMA Assessment (s5-s8) ",-1)),l[11]||(l[11]=e("p",{class:"text-xs text-gray-500 mb-3"}," Consider: sustainable management (s5), matters of national importance (s6), other matters (s7), Treaty of Waitangi (s8) ",-1)),m(e("textarea",{"onUpdate:modelValue":l[3]||(l[3]=i=>s.value.aee_part2_assessment=i),rows:"6",placeholder:"Assess how your proposal aligns with Part 2 principles of the RMA...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.aee_part2_assessment]])]),e("div",qa,[l[12]||(l[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Consultation Undertaken ",-1)),l[13]||(l[13]=e("p",{class:"text-xs text-gray-500 mb-3"}," Summarize consultation with affected parties, iwi, and other stakeholders ",-1)),m(e("textarea",{"onUpdate:modelValue":l[4]||(l[4]=i=>s.value.aee_consultation_summary=i),rows:"4",placeholder:"Describe who you've consulted with, feedback received, and how you've addressed concerns...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.aee_consultation_summary]])])])]),e("div",Pa,[l[19]||(l[19]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"4. AEE Document (Optional)",-1)),l[20]||(l[20]=e("p",{class:"text-sm text-gray-600 mb-4"}," For complex proposals, you may upload a comprehensive AEE document prepared by a qualified expert ",-1)),e("div",null,[l[17]||(l[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Upload AEE Report",-1)),e("input",{type:"file",onChange:d,accept:".pdf,.doc,.docx",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),l[18]||(l[18]=e("p",{class:"mt-1 text-xs text-gray-500"},"PDF or Word document, max 50MB",-1)),s.value.aee_document?(a(),r("div",Ra,[l[16]||(l[16]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,f(typeof s.value.aee_document=="object"?s.value.aee_document.name:"Document attached"),1)])):_("",!0)])]),l[22]||(l[22]=T('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Need Help?</h5><p class="text-yellow-800 text-sm mt-1"> For complex proposals or activities with significant effects, consider engaging a qualified environmental consultant to prepare your AEE. </p></div></div></div>',1))])]))}},Ta={class:"space-y-6"},Na={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},za={class:"p-6"},Ea={key:0,class:"space-y-4"},ja={class:"flex justify-between items-start mb-4"},Ia={class:"font-medium text-gray-900"},La=["onClick"],Fa={class:"grid md:grid-cols-2 gap-4"},Oa=["onUpdate:modelValue"],Ba=["onUpdate:modelValue"],Ha={class:"mt-4"},Wa=["onUpdate:modelValue"],Ga={class:"mt-4"},Ja={class:"flex gap-4"},Ya={class:"flex items-center"},Za=["onUpdate:modelValue"],Xa={class:"flex items-center"},Ka=["onUpdate:modelValue"],Qa={class:"mt-4"},er=["onUpdate:modelValue"],tr={key:1,class:"text-center py-8"},or={__name:"Step12PlanAssessment",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=A({plan_rules:c.modelValue.plan_rules||[]});z(()=>c.modelValue.plan_rules,l=>{l!==s.value.plan_rules&&(s.value.plan_rules=l||[])},{deep:!0}),z(s,l=>{C("update:modelValue",X(R({},c.modelValue),{plan_rules:l.plan_rules}))},{deep:!0});const d=()=>{s.value.plan_rules.push({plan_type:"",rule_reference:"",description:"",compliant:null,notes:""})},t=l=>{s.value.plan_rules.splice(l,1)};return(l,i)=>(a(),r("div",null,[i[11]||(i[11]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Plan Assessment",-1)),i[12]||(i[12]=e("p",{class:"text-gray-600 mb-8"},"Identify relevant district/regional plan rules and assess compliance",-1)),e("div",Ta,[e("div",Na,[e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[i[0]||(i[0]=e("h3",{class:"font-semibold text-gray-900"},"District/Regional Plan Rules",-1)),e("button",{onClick:d,type:"button",class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors"}," + Add Plan Rule ")])]),e("div",za,[s.value.plan_rules&&s.value.plan_rules.length>0?(a(),r("div",Ea,[(a(!0),r(L,null,F(s.value.plan_rules,(S,x)=>(a(),r("div",{key:x,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("div",ja,[e("h4",Ia,"Plan Rule "+f(x+1),1),e("button",{onClick:D=>t(x),type:"button",class:"text-red-600 hover:text-red-800 text-sm font-medium"}," Remove ",8,La)]),e("div",Fa,[e("div",null,[i[2]||(i[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[N(" Plan Type "),e("span",{class:"text-red-500"},"*")],-1)),m(e("select",{"onUpdate:modelValue":D=>S.plan_type=D,required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...i[1]||(i[1]=[T('<option value="">Select plan type...</option><option value="District Plan">District Plan</option><option value="Regional Plan">Regional Plan</option><option value="Proposed Plan">Proposed Plan</option><option value="Plan Change">Plan Change</option><option value="National Policy Statement">National Policy Statement</option><option value="National Environmental Standard">National Environmental Standard</option>',7)])],8,Oa),[[B,S.plan_type]])]),e("div",null,[i[3]||(i[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[N(" Rule Reference "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{"onUpdate:modelValue":D=>S.rule_reference=D,type:"text",required:"",placeholder:"e.g., Rule 14.2.3.1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Ba),[[h,S.rule_reference]])])]),e("div",Ha,[i[4]||(i[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[N(" Rule Description "),e("span",{class:"text-red-500"},"*")],-1)),m(e("textarea",{"onUpdate:modelValue":D=>S.description=D,required:"",rows:"3",placeholder:"Describe what the rule requires or controls...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Wa),[[h,S.description]])]),e("div",Ga,[i[7]||(i[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[N(" Compliance Status "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ja,[e("label",Ya,[m(e("input",{type:"radio",value:!0,"onUpdate:modelValue":D=>S.compliant=D,class:"mr-2"},null,8,Za),[[ne,S.compliant]]),i[5]||(i[5]=e("span",{class:"text-sm"},"Complies",-1))]),e("label",Xa,[m(e("input",{type:"radio",value:!1,"onUpdate:modelValue":D=>S.compliant=D,class:"mr-2"},null,8,Ka),[[ne,S.compliant]]),i[6]||(i[6]=e("span",{class:"text-sm"},"Does Not Comply",-1))])])]),e("div",Qa,[i[8]||(i[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Assessment Notes ",-1)),m(e("textarea",{"onUpdate:modelValue":D=>S.notes=D,rows:"3",placeholder:"Explain how your proposal complies or why consent is required...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,er),[[h,S.notes]])])]))),128))])):(a(),r("div",tr,[...i[9]||(i[9]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No plan rules added yet",-1),e("p",{class:"text-sm text-gray-500"},'Click "Add Plan Rule" to identify relevant planning rules',-1)])]))])]),i[10]||(i[10]=T('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Planning Assessment Guidance</h5><ul class="text-blue-800 text-sm mt-2 space-y-1 list-disc list-inside"><li>Identify all relevant district and regional plan rules that apply to your proposal</li><li>Check zone rules, overlays, designations, and any relevant standards</li><li>Assess whether your proposal complies with permitted activity standards</li><li>If non-compliant, explain why consent is required and the nature of the breach</li><li>Consider relevant objectives, policies, and assessment criteria</li></ul></div></div></div>',1))])]))}},sr={class:"space-y-6"},lr={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},ar={class:"p-6"},rr={key:0,class:"space-y-3"},nr={class:"grid md:grid-cols-2 gap-4"},ir={class:"font-medium"},dr={class:"font-medium"},ur={class:"font-medium"},pr={class:"font-medium"},cr={key:0,class:"text-green-600"},mr={key:1,class:"text-gray-500"},br={key:0,class:"mt-3"},gr={class:"text-sm mt-1"},vr={key:1,class:"text-center py-8"},yr={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},fr={class:"p-6"},xr={key:0},_r={class:"text-sm text-gray-600 mb-4"},hr={class:"space-y-2"},wr={key:1},kr={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},$r={class:"p-6"},Cr={__name:"Step13AffectedParties",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=A({aee_consultation_summary:c.modelValue.aee_consultation_summary||""}),d=M(()=>c.modelValue.affected_parties?c.modelValue.affected_parties.filter(t=>t.written_approval===!0):[]);return z(()=>c.modelValue.aee_consultation_summary,t=>{t!==s.value.aee_consultation_summary&&(s.value.aee_consultation_summary=t||"")}),z(s,t=>{C("update:modelValue",X(R({},c.modelValue),{aee_consultation_summary:t.aee_consultation_summary}))},{deep:!0}),(t,l)=>(a(),r("div",null,[l[18]||(l[18]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Affected Parties",-1)),l[19]||(l[19]=e("p",{class:"text-gray-600 mb-8"},"Identify parties potentially affected by your proposal and any written approvals obtained",-1)),e("div",sr,[l[16]||(l[16]=T('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">About Affected Parties</h5><p class="text-blue-800 text-sm mt-1"> List all parties (neighbors, landowners, infrastructure providers, etc.) who may be affected by your proposal. If you have obtained written approvals, upload them as supporting documents. </p></div></div></div>',1)),e("div",lr,[l[8]||(l[8]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Identified Affected Parties")],-1)),e("div",ar,[l[7]||(l[7]=e("p",{class:"text-sm text-gray-600 mb-4"}," This functionality uses the Affected Parties section you may have already filled in earlier. Use the main form's affected parties section to manage this list. ",-1)),v.modelValue.affected_parties&&v.modelValue.affected_parties.length>0?(a(),r("div",rr,[(a(!0),r(L,null,F(v.modelValue.affected_parties,(i,S)=>(a(),r("div",{key:S,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("div",nr,[e("div",null,[l[1]||(l[1]=e("span",{class:"text-sm text-gray-500"},"Name:",-1)),e("p",ir,f(i.party_name||"Not specified"),1)]),e("div",null,[l[2]||(l[2]=e("span",{class:"text-sm text-gray-500"},"Relationship:",-1)),e("p",dr,f(i.relationship||"Not specified"),1)]),e("div",null,[l[3]||(l[3]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",ur,f(i.address||"Not specified"),1)]),e("div",null,[l[4]||(l[4]=e("span",{class:"text-sm text-gray-500"},"Written Approval:",-1)),e("p",pr,[i.written_approval?(a(),r("span",cr,"✓ Obtained")):(a(),r("span",mr,"Not obtained"))])])]),i.effects?(a(),r("div",br,[l[5]||(l[5]=e("span",{class:"text-sm text-gray-500"},"Effects:",-1)),e("p",gr,f(i.effects),1)])):_("",!0)]))),128))])):(a(),r("div",vr,[...l[6]||(l[6]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No affected parties identified yet",-1),e("p",{class:"text-sm text-gray-500"},"Add affected parties in the Delivery & Payment step (Step 6)",-1)])]))])]),e("div",yr,[l[12]||(l[12]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Written Approvals Summary")],-1)),e("div",fr,[d.value.length>0?(a(),r("div",xr,[e("p",_r," You have obtained written approvals from "+f(d.value.length)+" affected "+f(d.value.length===1?"party":"parties")+". ",1),e("div",hr,[(a(!0),r(L,null,F(d.value,i=>(a(),r("div",{key:i.party_name,class:"flex items-center text-sm"},[l[9]||(l[9]=e("svg",{class:"w-4 h-4 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,f(i.party_name)+" ("+f(i.relationship)+")",1)]))),128))]),l[10]||(l[10]=e("div",{class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},[e("p",{class:"text-sm text-green-800"}," Remember to upload written approval documents in the supporting documents section. ")],-1))])):(a(),r("div",wr,[...l[11]||(l[11]=[e("p",{class:"text-sm text-gray-600"}," No written approvals have been obtained yet. If you obtain written approvals from affected parties, this can reduce notification requirements and processing timeframes. ",-1)])]))])]),e("div",kr,[l[15]||(l[15]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Consultation Summary")],-1)),e("div",$r,[l[13]||(l[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Describe any consultation you have undertaken with affected parties ",-1)),m(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=i=>s.value.aee_consultation_summary=i),rows:"6",placeholder:"Describe who you consulted with, when, how, and the outcomes of consultation. Include any mitigation measures agreed to address concerns...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,s.value.aee_consultation_summary]]),l[14]||(l[14]=e("p",{class:"text-sm text-gray-500 mt-2"}," Documenting consultation efforts can demonstrate good faith engagement and help the council understand community views. ",-1))])]),l[17]||(l[17]=T('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Affected Parties Guidance</h5><ul class="text-yellow-800 text-sm mt-2 space-y-1 list-disc list-inside"><li>Consider immediate neighbors, landowners with shared boundaries</li><li>Infrastructure providers (e.g., power, water, telecommunications)</li><li>Parties with interests over the land (e.g., easements, covenants)</li><li>Anyone who may experience effects from your proposal</li><li>Written approvals can help reduce notification and costs</li></ul></div></div></div>',1))])]))}},Vr={class:"space-y-6"},Ar={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Sr={class:"p-6"},Dr={key:0,class:"space-y-3"},Ur={class:"flex-1"},qr={class:"flex items-start justify-between"},Pr={class:"font-medium text-gray-900"},Rr={key:0,class:"text-sm text-gray-600 mt-1"},Mr={key:1,class:"text-xs text-gray-500 mt-1"},Tr={class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded"},Nr={key:1,class:"text-center py-8"},zr={__name:"Step14SpecialistReports",props:{modelValue:{type:Object,required:!0}},setup(v){const k=v,c=M(()=>{if(!k.modelValue.attachments)return[];const C=["Specialist Report","Technical Report","Assessment Report","Engineering Report","Environmental Report"];return k.modelValue.attachments.filter(s=>C.some(d=>{var t,l,i;return((t=s.document_category)==null?void 0:t.includes(d))||((l=s.document_type)==null?void 0:l.includes("Report"))||((i=s.document_type)==null?void 0:i.includes("Assessment"))}))});return(C,s)=>(a(),r("div",null,[s[6]||(s[6]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Specialist Reports",-1)),s[7]||(s[7]=e("p",{class:"text-gray-600 mb-8"},"Upload any specialist reports or assessments supporting your application",-1)),e("div",Vr,[s[4]||(s[4]=T('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">About Specialist Reports</h5><p class="text-blue-800 text-sm mt-1"> Upload any specialist assessments, technical reports, or expert opinions that support your application. These might include traffic assessments, acoustic reports, ecological surveys, geotechnical reports, etc. </p></div></div></div>',1)),e("div",Ar,[s[3]||(s[3]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Uploaded Specialist Reports")],-1)),e("div",Sr,[s[2]||(s[2]=e("p",{class:"text-sm text-gray-600 mb-4"}," Use the Attachments section in the main application form to upload specialist reports. Reports will automatically appear here once uploaded with the appropriate category. ",-1)),c.value.length>0?(a(),r("div",Dr,[(a(!0),r(L,null,F(c.value,(d,t)=>(a(),r("div",{key:t,class:"border border-gray-200 rounded-lg p-4 bg-gray-50 flex items-start"},[s[0]||(s[0]=e("svg",{class:"w-6 h-6 text-blue-600 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",Ur,[e("div",qr,[e("div",null,[e("p",Pr,f(d.document_type||"Specialist Report"),1),d.description?(a(),r("p",Rr,f(d.description),1)):_("",!0),d.file?(a(),r("p",Mr,f(d.file.name),1)):_("",!0)]),e("span",Tr,f(d.document_category),1)])])]))),128))])):(a(),r("div",Nr,[...s[1]||(s[1]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No specialist reports uploaded yet",-1),e("p",{class:"text-sm text-gray-500"},"Add reports in the Attachments section if required",-1)])]))])]),s[5]||(s[5]=T('<div class="bg-white border border-gray-200 rounded-lg overflow-hidden"><div class="bg-gray-50 px-6 py-3 border-b border-gray-200"><h3 class="font-semibold text-gray-900">Common Specialist Report Types</h3></div><div class="p-6"><div class="grid md:grid-cols-2 gap-4"><div class="flex items-start space-x-3"><div class="flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2"></div><div><p class="font-medium text-sm text-gray-900">Traffic &amp; Transportation</p><p class="text-xs text-gray-600">Traffic impact assessments, parking demand studies</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2"></div><div><p class="font-medium text-sm text-gray-900">Acoustic Reports</p><p class="text-xs text-gray-600">Noise assessments, sound insulation reports</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2"></div><div><p class="font-medium text-sm text-gray-900">Ecological Assessments</p><p class="text-xs text-gray-600">Biodiversity surveys, vegetation reports</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2"></div><div><p class="font-medium text-sm text-gray-900">Geotechnical Reports</p><p class="text-xs text-gray-600">Soil investigations, slope stability assessments</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2"></div><div><p class="font-medium text-sm text-gray-900">Landscape &amp; Visual</p><p class="text-xs text-gray-600">Visual impact assessments, landscape plans</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2"></div><div><p class="font-medium text-sm text-gray-900">Engineering Reports</p><p class="text-xs text-gray-600">Structural, civil, stormwater assessments</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2"></div><div><p class="font-medium text-sm text-gray-900">Archaeological Surveys</p><p class="text-xs text-gray-600">Heritage assessments, archaeological reports</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2"></div><div><p class="font-medium text-sm text-gray-900">Economic Assessments</p><p class="text-xs text-gray-600">Economic impact analyses, cost-benefit studies</p></div></div></div></div></div><div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">When Are Specialist Reports Required?</h5><ul class="text-yellow-800 text-sm mt-2 space-y-1 list-disc list-inside"><li>Council may request specific reports based on the nature and scale of your proposal</li><li>Check the district/regional plan for assessment requirements</li><li>Reports should be prepared by qualified professionals</li><li>Ensure reports address the specific effects of your proposal</li><li>Consider pre-application advice to confirm what reports may be needed</li></ul></div></div></div>',2))])]))}},Er={class:"space-y-6"},jr={class:"bg-white border border-gray-200 rounded-lg p-6"},Ir={class:"flex items-center justify-between mb-4"},Lr={key:0,class:"mt-4 border-t border-gray-200 pt-4"},Fr={class:"mb-4"},Or={key:0,class:"text-center py-8"},Br={key:1,class:"text-center py-8 text-gray-500"},Hr={key:2,class:"space-y-2 max-h-96 overflow-y-auto"},Wr=["onClick"],Gr={class:"flex items-start justify-between"},Jr={class:"flex-1"},Yr={class:"flex items-center gap-2 mb-1"},Zr={class:"font-medium text-gray-900"},Xr={key:0,class:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded"},Kr={class:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded"},Qr={class:"text-sm text-gray-700"},en={key:0,class:"text-xs text-gray-500 mt-1"},tn={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},on={class:"p-6"},sn={key:0,class:"space-y-4"},ln={class:"flex justify-between items-start mb-4"},an={class:"font-medium text-gray-900"},rn=["onClick"],nn={class:"grid md:grid-cols-2 gap-4 mb-4"},dn=["onUpdate:modelValue"],un=["onUpdate:modelValue"],pn=["onUpdate:modelValue"],cn={class:"mt-4"},mn=["onUpdate:modelValue"],bn={key:1,class:"text-center py-8"},gn={__name:"Step15ProposedConditions",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=A(!1),d=A(!1),t=A([]),l=A("All"),i=A({proposed_conditions:c.modelValue.proposed_conditions||[]});z(()=>c.modelValue.proposed_conditions,y=>{y!==i.value.proposed_conditions&&(i.value.proposed_conditions=y||[])},{deep:!0}),z(i,y=>{C("update:modelValue",X(R({},c.modelValue),{proposed_conditions:y.proposed_conditions}))},{deep:!0});const S=M(()=>{var g;let y=t.value;l.value!=="All"&&(y=y.filter(V=>V.condition_category===l.value));const b=((g=c.modelValue.consent_types)==null?void 0:g.map(V=>V.consent_type))||[];return b.length>0&&(y=y.filter(V=>V.applies_to_consent_types==="All"||b.includes(V.applies_to_consent_types))),y});z(s,y=>ee(this,null,function*(){y&&t.value.length===0&&(yield x())}));const x=()=>ee(this,null,function*(){d.value=!0;try{const y=yield pe("frappe.client.get_list",{doctype:"Consent Condition Template",fields:["name","template_name","condition_code","condition_category","condition_text","timing","applies_to_consent_types","is_standard"],filters:{is_active:1},limit_page_length:100,order_by:"condition_category asc, template_name asc"});t.value=y||[]}catch(y){console.error("[Step15] Error loading templates:",y),t.value=[]}finally{d.value=!1}}),D=y=>{i.value.proposed_conditions.push({category:y.condition_category,timing:y.timing||"",condition_text:y.condition_text,rationale:y.is_standard?"Standard condition template":"",template_name:y.template_name,condition_code:y.condition_code||""})},q=()=>{i.value.proposed_conditions.push({category:"",timing:"",condition_text:"",rationale:""})},n=y=>{i.value.proposed_conditions.splice(y,1)};return(y,b)=>(a(),r("div",null,[b[18]||(b[18]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Proposed Conditions",-1)),b[19]||(b[19]=e("p",{class:"text-gray-600 mb-8"},"Suggest conditions that could be imposed to address adverse effects",-1)),e("div",Er,[b[16]||(b[16]=T('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">About Proposed Conditions</h5><p class="text-blue-800 text-sm mt-1"> Proposing consent conditions demonstrates a proactive approach to managing effects. Conditions should be specific, measurable, achievable, and directly related to managing adverse effects. </p></div></div></div>',1)),e("div",jr,[e("div",Ir,[b[2]||(b[2]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Select from Standard Conditions"),e("p",{class:"text-sm text-gray-600 mt-1"},"Choose from pre-approved condition templates or create your own")],-1)),e("button",{onClick:b[0]||(b[0]=g=>s.value=!s.value),type:"button",class:"px-4 py-2 text-blue-600 hover:text-blue-700 font-medium text-sm border border-blue-600 rounded-lg hover:bg-blue-50"},f(s.value?"Hide Templates":"Browse Templates"),1)]),s.value?(a(),r("div",Lr,[e("div",Fr,[b[4]||(b[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Filter by Category",-1)),m(e("select",{"onUpdate:modelValue":b[1]||(b[1]=g=>l.value=g),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...b[3]||(b[3]=[T('<option value="All">All Categories</option><option value="General">General</option><option value="Timing">Timing</option><option value="Lapse">Lapse</option><option value="Environmental Management">Environmental Management</option><option value="Construction">Construction</option><option value="Operation">Operation</option><option value="Landscape">Landscape</option><option value="Ecology">Ecology</option><option value="Traffic">Traffic</option><option value="Noise">Noise</option><option value="Discharge">Discharge</option><option value="Earthworks">Earthworks</option><option value="Water">Water</option><option value="Coastal">Coastal</option>',15)])],512),[[B,l.value]])]),d.value?(a(),r("div",Or,[...b[5]||(b[5]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-2"},null,-1),e("p",{class:"text-sm text-gray-600"},"Loading templates...",-1)])])):S.value.length===0?(a(),r("div",Br,[...b[6]||(b[6]=[e("p",{class:"text-sm"},"No templates found for this category",-1)])])):(a(),r("div",Hr,[(a(!0),r(L,null,F(S.value,g=>(a(),r("div",{key:g.name,onClick:V=>D(g),class:"border border-gray-200 rounded-lg p-4 hover:border-blue-600 hover:bg-blue-50 cursor-pointer transition-all"},[e("div",Gr,[e("div",Jr,[e("div",Yr,[e("h4",Zr,f(g.template_name),1),g.condition_code?(a(),r("span",Xr,f(g.condition_code),1)):_("",!0),e("span",Kr,f(g.condition_category),1)]),e("p",Qr,f(g.condition_text),1),g.timing?(a(),r("p",en," ⏱ Timing: "+f(g.timing),1)):_("",!0)]),b[7]||(b[7]=e("button",{class:"ml-4 text-blue-600 hover:text-blue-700 text-sm font-medium whitespace-nowrap"}," + Add ",-1))])],8,Wr))),128))]))])):_("",!0)]),e("div",tn,[e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[b[8]||(b[8]=e("h3",{class:"font-semibold text-gray-900"},"Your Proposed Conditions",-1)),e("button",{onClick:q,type:"button",class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors"}," + Add Custom Condition ")])]),e("div",on,[i.value.proposed_conditions&&i.value.proposed_conditions.length>0?(a(),r("div",sn,[(a(!0),r(L,null,F(i.value.proposed_conditions,(g,V)=>(a(),r("div",{key:V,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("div",ln,[e("h4",an,"Condition "+f(V+1),1),e("button",{onClick:H=>n(V),type:"button",class:"text-red-600 hover:text-red-800 text-sm font-medium"}," Remove ",8,rn)]),e("div",nn,[e("div",null,[b[10]||(b[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Condition Category ",-1)),m(e("select",{"onUpdate:modelValue":H=>g.category=H,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...b[9]||(b[9]=[T('<option value="">Select category...</option><option value="General">General</option><option value="Construction">Construction Management</option><option value="Operational">Operational</option><option value="Landscaping">Landscaping</option><option value="Servicing">Servicing &amp; Infrastructure</option><option value="Traffic">Traffic &amp; Parking</option><option value="Noise">Noise</option><option value="Stormwater">Stormwater</option><option value="Contamination">Contamination</option><option value="Heritage">Heritage</option><option value="Ecology">Ecology &amp; Biodiversity</option><option value="Monitoring">Monitoring &amp; Reporting</option><option value="Other">Other</option>',14)])],8,dn),[[B,g.category]])]),e("div",null,[b[12]||(b[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Timing ",-1)),m(e("select",{"onUpdate:modelValue":H=>g.timing=H,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...b[11]||(b[11]=[T('<option value="">Select timing...</option><option value="Prior to Commencement">Prior to Commencement</option><option value="During Construction">During Construction</option><option value="Prior to Occupation">Prior to Occupation</option><option value="Ongoing">Ongoing</option><option value="On Completion">On Completion</option><option value="Other">Other</option>',7)])],8,un),[[B,g.timing]])])]),e("div",null,[b[13]||(b[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[N(" Condition Wording "),e("span",{class:"text-red-500"},"*")],-1)),m(e("textarea",{"onUpdate:modelValue":H=>g.condition_text=H,required:"",rows:"4",placeholder:`Write the proposed condition in clear, enforceable language...

Example: 'All construction activities shall be limited to the hours of 7:00am to 7:00pm Monday to Saturday, with no work permitted on Sundays or public holidays.'`,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,pn),[[h,g.condition_text]])]),e("div",cn,[b[14]||(b[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Rationale ",-1)),m(e("textarea",{"onUpdate:modelValue":H=>g.rationale=H,rows:"3",placeholder:"Explain the purpose of this condition and how it addresses adverse effects...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,mn),[[h,g.rationale]])])]))),128))])):(a(),r("div",bn,[...b[15]||(b[15]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No conditions proposed yet",-1),e("p",{class:"text-sm text-gray-500"},'Click "Add Condition" to propose consent conditions',-1)])]))])]),b[17]||(b[17]=T('<div class="bg-white border border-gray-200 rounded-lg overflow-hidden"><div class="bg-gray-50 px-6 py-3 border-b border-gray-200"><h3 class="font-semibold text-gray-900">Example Condition Types</h3></div><div class="p-6 space-y-3"><div class="border-l-4 border-blue-600 pl-4 py-2 bg-blue-50"><p class="font-medium text-sm text-gray-900">Construction Hours</p><p class="text-xs text-gray-600 mt-1">Limiting construction activities to specific hours to manage noise effects</p></div><div class="border-l-4 border-blue-600 pl-4 py-2 bg-blue-50"><p class="font-medium text-sm text-gray-900">Landscaping</p><p class="text-xs text-gray-600 mt-1">Requiring planting to screen development or enhance visual amenity</p></div><div class="border-l-4 border-blue-600 pl-4 py-2 bg-blue-50"><p class="font-medium text-sm text-gray-900">Traffic Management</p><p class="text-xs text-gray-600 mt-1">Requiring traffic management plans or parking arrangements</p></div><div class="border-l-4 border-blue-600 pl-4 py-2 bg-blue-50"><p class="font-medium text-sm text-gray-900">Stormwater</p><p class="text-xs text-gray-600 mt-1">Requiring stormwater management devices or erosion control measures</p></div><div class="border-l-4 border-blue-600 pl-4 py-2 bg-blue-50"><p class="font-medium text-sm text-gray-900">Monitoring</p><p class="text-xs text-gray-600 mt-1">Requiring monitoring and reporting of environmental effects</p></div></div></div><div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Writing Good Conditions</h5><ul class="text-yellow-800 text-sm mt-2 space-y-1 list-disc list-inside"><li><strong>Clear:</strong> Unambiguous and easy to understand</li><li><strong>Enforceable:</strong> Able to be monitored and enforced by the council</li><li><strong>Necessary:</strong> Directly related to managing an identified adverse effect</li><li><strong>Reasonable:</strong> Practical and achievable to implement</li><li><strong>Specific:</strong> Include measurable standards, timeframes, or thresholds</li><li>Note: The council may modify, add, or remove conditions during processing</li></ul></div></div></div>',2))])]))}},vn={class:"space-y-6"},yn={class:"space-y-4"},fn={class:"flex items-start cursor-pointer"},xn={class:"flex items-start cursor-pointer"},_n={class:"flex items-start cursor-pointer"},hn={__name:"Step16Declarations",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(v,{emit:k}){const c=v,C=k,s=A({declaration_rma_compliance:c.modelValue.declaration_rma_compliance||!1,declaration_public_information:c.modelValue.declaration_public_information||!1,declaration_authorized:c.modelValue.declaration_authorized||!1});return z(()=>[c.modelValue.declaration_rma_compliance,c.modelValue.declaration_public_information,c.modelValue.declaration_authorized],([d,t,l])=>{s.value.declaration_rma_compliance=d||!1,s.value.declaration_public_information=t||!1,s.value.declaration_authorized=l||!1}),z(s,d=>{C("update:modelValue",X(R({},c.modelValue),{declaration_rma_compliance:d.declaration_rma_compliance,declaration_public_information:d.declaration_public_information,declaration_authorized:d.declaration_authorized}))},{deep:!0}),(d,t)=>(a(),r("div",null,[t[7]||(t[7]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Statutory Declarations",-1)),t[8]||(t[8]=e("p",{class:"text-gray-600 mb-8"},"Confirm compliance with RMA requirements",-1)),e("div",vn,[t[6]||(t[6]=T('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Statutory Declarations Required</h5><p class="text-blue-800 text-sm mt-1"> Under the Resource Management Act 1991, you must confirm the following declarations before submitting your application. </p></div></div></div>',1)),e("div",yn,[e("div",{class:j(["border-2 rounded-lg p-4",s.value.declaration_rma_compliance?"border-green-600 bg-green-50":"border-gray-200"])},[e("label",fn,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=l=>s.value.declaration_rma_compliance=l),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,s.value.declaration_rma_compliance]]),t[3]||(t[3]=e("div",{class:"ml-3 flex-1"},[e("span",{class:"font-medium text-gray-900"},"RMA Compliance Declaration *"),e("p",{class:"text-sm text-gray-600 mt-1"}," I confirm that this application complies with the requirements of Schedule 4 of the Resource Management Act 1991 and contains all required information for the council to process this application. ")],-1))])],2),e("div",{class:j(["border-2 rounded-lg p-4",s.value.declaration_public_information?"border-green-600 bg-green-50":"border-gray-200"])},[e("label",xn,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=l=>s.value.declaration_public_information=l),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,s.value.declaration_public_information]]),t[4]||(t[4]=e("div",{class:"ml-3 flex-1"},[e("span",{class:"font-medium text-gray-900"},"Public Information Declaration *"),e("p",{class:"text-sm text-gray-600 mt-1"}," I understand that this application and supporting documents will become public information and may be made available to any person upon request under the Local Government Official Information and Meetings Act 1987. ")],-1))])],2),e("div",{class:j(["border-2 rounded-lg p-4",s.value.declaration_authorized?"border-green-600 bg-green-50":"border-gray-200"])},[e("label",_n,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=l=>s.value.declaration_authorized=l),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,s.value.declaration_authorized]]),t[5]||(t[5]=e("div",{class:"ml-3 flex-1"},[e("span",{class:"font-medium text-gray-900"},"Authorization Declaration *"),e("p",{class:"text-sm text-gray-600 mt-1"}," I confirm that I am authorized to make this application on behalf of the applicant and that all information provided is true and correct to the best of my knowledge. ")],-1))])],2)])])]))}},wn={class:"space-y-6"},kn={class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},$n={class:"flex items-start justify-between"},Cn={class:"text-lg font-semibold text-blue-900"},Vn={class:"text-sm text-blue-700 mt-1"},An={class:"text-right"},Sn={class:"text-2xl font-bold text-blue-900"},Dn={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Un={class:"p-6 space-y-3"},qn={class:"grid md:grid-cols-2 gap-4"},Pn={class:"font-medium"},Rn={class:"font-medium"},Mn={class:"font-medium"},Tn={key:0},Nn={class:"font-medium"},zn={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},En={class:"p-6"},jn={key:0,class:"space-y-2"},In={class:"font-medium"},Ln={key:0},Fn={class:"font-medium"},On={key:1,class:"text-gray-500"},Bn={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Hn={class:"p-6 space-y-3"},Wn={class:"font-medium"},Gn={class:"font-medium"},Jn={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Yn={class:"p-6"},Zn={class:"space-y-3"},Xn={class:"mt-2 flex flex-wrap gap-2"},Kn={key:0,class:"text-gray-500"},Qn={class:"font-medium"},ei={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},ti={class:"p-6"},oi={class:"space-y-4"},si={key:0},li={class:"text-sm mt-1 line-clamp-3"},ai={key:1},ri={class:"text-sm mt-1 line-clamp-3"},ni={key:2},ii={class:"text-sm mt-1 line-clamp-3"},di={key:3,class:"flex items-center gap-2 text-sm text-green-600"},ui={key:4,class:"text-gray-500 text-sm"},pi={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},ci={class:"p-6"},mi={class:"space-y-2"},bi={class:"flex items-center gap-2"},gi={class:"flex items-center gap-2"},vi={class:"flex items-center gap-2"},yi={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},fi={__name:"Step17Review",props:{modelValue:{type:Object,required:!0},councilName:{type:String,default:"Council"},requestTypeName:{type:String,default:"Application"},applicationFee:{type:String,default:"TBD"},isResourceConsent:{type:Boolean,default:!1}},setup(v){const k=v,c=M(()=>!!(k.modelValue.aee_activity_description||k.modelValue.aee_existing_environment||k.modelValue.assessment_of_effects||k.modelValue.aee_document)),C=M(()=>{const s=!!(k.modelValue.council&&k.modelValue.request_type&&k.modelValue.applicant_name&&k.modelValue.applicant_email&&k.modelValue.property_address&&k.modelValue.delivery_preference);if(k.isResourceConsent){const d=!!(k.modelValue.consent_types&&k.modelValue.consent_types.length>0&&k.modelValue.activity_status&&k.modelValue.aee_activity_description&&k.modelValue.aee_existing_environment&&k.modelValue.assessment_of_effects&&k.modelValue.declaration_rma_compliance&&k.modelValue.declaration_public_information&&k.modelValue.declaration_authorized);return s&&d}return s});return(s,d)=>(a(),r("div",null,[d[26]||(d[26]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Review & Submit",-1)),d[27]||(d[27]=e("p",{class:"text-gray-600 mb-8"},"Review your application details before submitting",-1)),e("div",wn,[e("div",kn,[e("div",$n,[e("div",null,[e("h3",Cn,f(v.requestTypeName),1),e("p",Vn,f(v.councilName),1)]),e("div",An,[d[0]||(d[0]=e("div",{class:"text-sm text-blue-600 font-medium"},"Application Fee",-1)),e("div",Sn,f(v.applicationFee),1)])])]),e("div",Dn,[d[5]||(d[5]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Applicant Details")],-1)),e("div",Un,[e("div",qn,[e("div",null,[d[1]||(d[1]=e("span",{class:"text-sm text-gray-500"},"Name:",-1)),e("p",Pn,f(v.modelValue.applicant_name||"Not provided"),1)]),e("div",null,[d[2]||(d[2]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("p",Rn,f(v.modelValue.applicant_email||"Not provided"),1)]),e("div",null,[d[3]||(d[3]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("p",Mn,f(v.modelValue.applicant_phone||"Not provided"),1)]),v.modelValue.applicant_company?(a(),r("div",Tn,[d[4]||(d[4]=e("span",{class:"text-sm text-gray-500"},"Company:",-1)),e("p",Nn,f(v.modelValue.applicant_company),1)])):_("",!0)])])]),e("div",zn,[d[8]||(d[8]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Property Details")],-1)),e("div",En,[v.modelValue.property_address?(a(),r("div",jn,[e("div",null,[d[6]||(d[6]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",In,f(v.modelValue.property_address),1)]),v.modelValue.legal_description?(a(),r("div",Ln,[d[7]||(d[7]=e("span",{class:"text-sm text-gray-500"},"Legal Description:",-1)),e("p",Fn,f(v.modelValue.legal_description),1)])):_("",!0)])):(a(),r("p",On,"No property selected"))])]),e("div",Bn,[d[11]||(d[11]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Delivery & Payment")],-1)),e("div",Hn,[e("div",null,[d[9]||(d[9]=e("span",{class:"text-sm text-gray-500"},"Delivery Preference:",-1)),e("p",Wn,f(v.modelValue.delivery_preference||"Not selected"),1)]),e("div",null,[d[10]||(d[10]=e("span",{class:"text-sm text-gray-500"},"Invoice To:",-1)),e("p",Gn,f(v.modelValue.invoice_to||"Not specified"),1)])])]),v.isResourceConsent?(a(),r(L,{key:0},[e("div",Jn,[d[14]||(d[14]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Consent Types & Activity Status")],-1)),e("div",Yn,[e("div",Zn,[e("div",null,[d[12]||(d[12]=e("span",{class:"text-sm text-gray-500"},"Consent Types:",-1)),e("div",Xn,[(a(!0),r(L,null,F(v.modelValue.consent_types||[],t=>(a(),r("span",{key:t.consent_type,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},f(t.consent_type),1))),128)),!v.modelValue.consent_types||v.modelValue.consent_types.length===0?(a(),r("span",Kn," None selected ")):_("",!0)])]),e("div",null,[d[13]||(d[13]=e("span",{class:"text-sm text-gray-500"},"Activity Status:",-1)),e("p",Qn,f(v.modelValue.activity_status||"Not specified"),1)])])])]),e("div",ei,[d[19]||(d[19]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Assessment of Environmental Effects")],-1)),e("div",ti,[e("div",oi,[v.modelValue.aee_activity_description?(a(),r("div",si,[d[15]||(d[15]=e("span",{class:"text-sm text-gray-500"},"Activity Description:",-1)),e("p",li,f(v.modelValue.aee_activity_description),1)])):_("",!0),v.modelValue.aee_existing_environment?(a(),r("div",ai,[d[16]||(d[16]=e("span",{class:"text-sm text-gray-500"},"Existing Environment:",-1)),e("p",ri,f(v.modelValue.aee_existing_environment),1)])):_("",!0),v.modelValue.assessment_of_effects?(a(),r("div",ni,[d[17]||(d[17]=e("span",{class:"text-sm text-gray-500"},"Effects Assessment:",-1)),e("p",ii,f(v.modelValue.assessment_of_effects),1)])):_("",!0),v.modelValue.aee_document?(a(),r("div",di,[...d[18]||(d[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("span",null,"AEE Document attached",-1)])])):_("",!0),c.value?_("",!0):(a(),r("p",ui," AEE not yet completed "))])])]),e("div",pi,[d[23]||(d[23]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Statutory Declarations")],-1)),e("div",ci,[e("div",mi,[e("div",bi,[(a(),r("svg",{class:j(["w-5 h-5",v.modelValue.declaration_rma_compliance?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...d[20]||(d[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:j(v.modelValue.declaration_rma_compliance?"text-gray-900":"text-gray-500")}," RMA Compliance Declaration ",2)]),e("div",gi,[(a(),r("svg",{class:j(["w-5 h-5",v.modelValue.declaration_public_information?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...d[21]||(d[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:j(v.modelValue.declaration_public_information?"text-gray-900":"text-gray-500")}," Public Information Declaration ",2)]),e("div",vi,[(a(),r("svg",{class:j(["w-5 h-5",v.modelValue.declaration_authorized?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...d[22]||(d[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:j(v.modelValue.declaration_authorized?"text-gray-900":"text-gray-500")}," Authorization Declaration ",2)])])])])],64)):_("",!0),d[25]||(d[25]=T('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6" data-v-b1b0e055><div class="flex items-start" data-v-b1b0e055><svg class="w-6 h-6 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b1b0e055><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-b1b0e055></path></svg><div data-v-b1b0e055><h4 class="font-semibold text-yellow-900" data-v-b1b0e055>Before You Submit</h4><ul class="mt-2 text-sm text-yellow-800 space-y-1 list-disc list-inside" data-v-b1b0e055><li data-v-b1b0e055>Review all information carefully for accuracy and completeness</li><li data-v-b1b0e055>Ensure all required fields are completed</li><li data-v-b1b0e055>For Resource Consent applications, verify all statutory declarations are confirmed</li><li data-v-b1b0e055>Once submitted, you cannot edit the application (you may need to withdraw and resubmit)</li></ul></div></div></div>',1)),C.value?_("",!0):(a(),r("div",yi,[...d[24]||(d[24]=[T('<div class="flex items-start" data-v-b1b0e055><svg class="w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b1b0e055><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-b1b0e055></path></svg><div data-v-b1b0e055><h5 class="font-semibold text-red-900 text-sm" data-v-b1b0e055>Application Incomplete</h5><p class="text-red-800 text-sm mt-1" data-v-b1b0e055> Please complete all required sections before submitting. Use the Previous button to go back and fill in missing information. </p></div></div>',1)])]))])]))}},xi=yt(fi,[["__scopeId","data-v-b1b0e055"]]),_i={class:"min-h-screen bg-gray-50"},hi={class:"bg-white shadow-sm border-b border-gray-200"},wi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ki={class:"flex items-center justify-between py-4"},$i={class:"flex items-center space-x-3"},Ci={class:"text-sm text-gray-500"},Vi={class:"bg-white border-b border-gray-200"},Ai={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Si={class:"flex items-center justify-between mb-2"},Di={class:"flex flex-col items-center"},Ui={key:0},qi={key:1},Pi={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ri={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},Mi={key:0},Ti={key:1},Ni={key:2},zi={key:6},Ei={key:7},ji={key:8},Ii={key:9},Li={key:10},Fi={key:11},Oi={key:12},Bi={key:13},Hi={key:14},Wi={key:15},Gi={key:16},Ji={key:17},Yi={class:"mt-8 flex justify-between items-center"},Zi={key:1},Xi=["disabled"],Ki=["disabled"],Qi={key:0},ed={key:1},td={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},od={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},sd={class:"flex items-center justify-between"},ld={class:"text-lg font-semibold text-gray-900"},ad={class:"px-6 py-4 space-y-4"},rd={class:"border-t border-gray-200 pt-4"},nd={class:"grid md:grid-cols-2 gap-4"},id={class:"border-t border-gray-200 pt-4"},dd={class:"space-y-3"},ud={class:"border-t border-gray-200 pt-4"},pd={class:"flex items-start mb-3"},cd={key:0,class:"ml-7 space-y-3"},md={key:0,class:"mt-2 text-xs text-green-600 flex items-center gap-1"},bd={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},gd={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},vd={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},yd={class:"flex items-center justify-between"},fd={class:"text-lg font-semibold text-gray-900"},xd={class:"px-6 py-4 space-y-4"},_d={class:"border-t border-gray-200 pt-4"},hd={class:"space-y-3"},wd={class:"border-t border-gray-200 pt-4"},kd={class:"space-y-3"},$d={key:0,class:"mt-2 text-xs text-green-600 flex items-center gap-1"},Cd={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Vd={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"},Ad={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},Sd={class:"flex items-center justify-between"},Dd={class:"text-lg font-semibold text-gray-900"},Ud={class:"px-6 py-4 space-y-4"},qd={class:"border-t border-gray-200 pt-4"},Pd={class:"grid md:grid-cols-3 gap-3"},Rd={class:"flex items-center"},Md={class:"flex items-center"},Td={class:"flex items-center"},Nd={class:"flex items-center"},zd={class:"border-t border-gray-200 pt-4"},Ed={class:"space-y-2 p-3 border border-gray-200 rounded bg-gray-50"},jd={class:"flex items-center"},Id={class:"flex items-center"},Ld={class:"flex items-center"},Fd={class:"flex items-center"},Od={class:"flex items-center"},Bd={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Hd={class:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col"},Wd={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},Gd={class:"flex items-center justify-between"},Jd={class:"flex-1 overflow-y-auto"},Yd={class:"grid md:grid-cols-3 gap-6 p-6"},Zd={class:"md:col-span-2 space-y-4"},Xd={class:"flex items-center gap-2 mb-4 pb-4 border-b border-gray-200"},Kd=["value"],Qd={class:"ml-auto text-xs text-gray-500"},eu={key:0,class:"text-center py-12"},tu={key:1,class:"space-y-3"},ou={class:"flex items-start justify-between mb-2"},su={class:"flex-1"},lu={class:"flex items-center gap-2 mb-1"},au={class:"text-sm font-semibold text-gray-900"},ru={key:0,class:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-mono rounded"},nu={class:"flex items-center gap-2 mb-2"},iu={class:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded"},du={key:0,class:"px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded"},uu={key:1,class:"px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded"},pu=["innerHTML"],cu=["onClick"],mu={key:2,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},bu={class:"md:col-span-1 bg-gray-50 rounded-lg p-4 border border-gray-200"},gu={class:"text-sm font-semibold text-gray-900 mb-3 flex items-center justify-between"},vu={class:"px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full"},yu={key:0,class:"space-y-2 max-h-[600px] overflow-y-auto"},fu={class:"flex items-start justify-between mb-1"},xu={class:"flex items-center gap-1"},_u={class:"px-1.5 py-0.5 bg-gray-100 text-gray-700 font-mono text-xs rounded"},hu={class:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded"},wu=["onClick"],ku=["innerHTML"],$u={key:1,class:"text-center py-8 text-xs text-gray-500"},Cu={key:0,class:"border-t border-gray-200 bg-gray-50 p-6"},Vu={class:"text-sm font-semibold text-gray-900 mb-4"},Au={class:"grid md:grid-cols-2 gap-4 mb-4"},Su=["value"],Du={class:"mb-4"},Uu={class:"flex justify-end gap-2 mt-4"},qu={class:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end"},Tu={__name:"NewRequest",setup(v){const k=ft(),c=xt(),C=A(null),s=A(!1),d=A(null),t=A(1),l=M(()=>q.value.length),i=A(!1),S=A(!1),x=A([]);A(null),A(!1);const D=A(!1);A(!1);const q=M(()=>{const u=[{title:"Council",number:1},{title:"Type",number:2},{title:"Process Info",number:3},{title:"Applicant",number:4},{title:"Property",number:5},{title:"Delivery & Payment",number:6}];return Z.value&&(u.push({title:"Consent Type",number:7}),u.push({title:"Consent Details",number:8}),u.push({title:"Proposal",number:9}),u.push({title:"Site & Environment",number:10}),u.push({title:"NES & Hazards",number:11}),u.push({title:"AEE",number:12}),u.push({title:"Plan Assessment",number:13}),u.push({title:"Affected Parties",number:14}),u.push({title:"Reports",number:15}),u.push({title:"Conditions",number:16}),u.push({title:"Declarations",number:17})),u.push({title:"Review",number:u.length+1}),u}),n=A({council:"",request_type:"",request_category:"",property:"",property_address:"",legal_description:"",valuation_reference:"",parcel_id:"",ct_reference:"",property_coordinates:"",hazard_data:null,zone:"",activity_zone:"",brief_description:"",detailed_description:"",estimated_value:null,proposed_start_date:"",terms_accepted:!1,applicant_phone:"",applicant_type:"",submitted_on_behalf_of:"Myself",company_account:null,acting_on_behalf:!1,applicant_name:"",applicant_email:"",consent_types:[],activity_status:"",applicant_reference_number:"",delivery_preference:"",pim_reference:"",building_height:null,building_floor_area:null,earthworks_volume:null,earthworks_vertical_alteration:null,vehicle_movements_daily:null,parking_spaces_provided:null,hours_of_operation:"",consent_term_requested:"",site_topography:"",existing_vegetation_description:"",watercourses_present:!1,watercourse_description:"",existing_infrastructure:"",contamination_status_hail:"",boundary_description:"",boundary_activity_description:"",boundary_owner_approval_obtained:!1,boundary_approval_date:"",boundary_approval_document:null,natural_hazards:[],nes_assessments:[],hail_activities:[],confidential_information_claimed:!1,confidential_information_reason:"",assessment_of_effects:"",effects_on_people:"",physical_effects:"",earthworks_effects:"",discharge_contaminants_effects:"",ecosystem_effects:"",hazard_risk_assessment:"",cultural_effects:"",aee_document:null,aee_activity_description:"",aee_activity_status:"",aee_existing_environment:"",aee_site_area:null,aee_current_use:"",aee_zoning:"",aee_overlays:"",aee_designations:"",aee_part2_assessment:"",aee_plan_rules:[],aee_compliance_standards:[],aee_written_approvals:[],aee_proposed_conditions:[],aee_consultation_summary:"",alternatives_considered:"",mitigation_proposed:"",applicant_is_not_owner:!1,owner_name:"",owner_email:"",owner_phone:"",owner_address:"",certificate_of_title_document:null,declaration_rma_compliance:!1,declaration_public_information:!1,declaration_authorized:!1,invoice_to:"Applicant",invoice_name:"",invoice_email:"",invoice_address:"",purchase_order_number:"",transfer_deposit_required:!1,transfer_deposit_consent_number:"",affected_parties:[],written_approvals_obtained:0,iwi_consultation_undertaken:!1,iwi_consulted:"",cultural_impact_assessment:null,iwi_response_summary:"",specialist_reports:[],proposed_conditions:[]});A(""),A([]),A(!1),A(!1);const y=A(null),b=A([]),g=A({}),V=u=>(g.value[u]||(g.value[u]={hazard_type:u,present:!0,risk_level:"",assessment_notes:"",mitigation_required:!1}),g.value[u]);z(b,u=>{n.value.natural_hazards=u.map(o=>V(o))},{deep:!0}),z(g,()=>{n.value.natural_hazards=b.value.map(u=>V(u))},{deep:!0});const H=[{value:"Contaminated Soil (HAIL)",label:"NES for Assessing and Managing Contaminants in Soil (HAIL)"},{value:"Air Quality",label:"NES for Air Quality"},{value:"Drinking Water",label:"NES for Sources of Human Drinking Water"},{value:"Freshwater",label:"NES for Freshwater Management"},{value:"Plantation Forestry",label:"NES for Plantation Forestry"},{value:"Electricity Transmission",label:"NES for Electricity Transmission Activities"},{value:"Telecommunications",label:"NES for Telecommunication Facilities"},{value:"Other",label:"Other NES"}],Q=A({}),te=u=>(Q.value[u]||(Q.value[u]={nes_type:u,applies:!1,description:"",compliance_notes:""}),Q.value[u]);z(Q,()=>{n.value.nes_assessments=H.filter(u=>te(u.value).applies).map(u=>te(u.value))},{deep:!0}),M(()=>n.value.nes_assessments.some(u=>u.nes_type&&u.nes_type.includes("HAIL")));const ie=A(!1),de=A(null),P=A({activity_description:"",hail_category:"",currently_undertaken:!1,previously_undertaken:!1,likely_undertaken:!1,preliminary_investigation_done:!1,proposed_activities:[],notes:""}),w=A({fuel:!1,disturb:!1,sample:!1,subdivide:!1,change:!1}),$=()=>{if(!P.value.activity_description){alert("Please enter activity description");return}const u=[];w.value.fuel&&u.push({activity_type:"Removing or replacing fuel storage system"}),w.value.disturb&&u.push({activity_type:"Disturbing soil"}),w.value.sample&&u.push({activity_type:"Sampling soil"}),w.value.subdivide&&u.push({activity_type:"Subdividing land"}),w.value.change&&u.push({activity_type:"Changing use of land"});const o=X(R({},P.value),{proposed_activities:u});de.value!==null?n.value.hail_activities[de.value]=o:n.value.hail_activities.push(o),ie.value=!1},U=()=>{ie.value=!1};A({building:!0,earthworks:!1,traffic:!1,operations:!1});const K=A(JSON.parse(JSON.stringify(n.value))),Ee=M(()=>{const u=R({},n.value),o=R({},K.value);delete u.terms_accepted,delete o.terms_accepted;const p=JSON.stringify(u),G=JSON.stringify(o);return p!==G}),Z=M(()=>n.value.request_category==="Resource Consent"),ue=u=>{var o;return((o=n.value.consent_types)==null?void 0:o.some(p=>p.consent_type===u))||!1},Ve=M(()=>ue("Land Use")),fe=M(()=>ue("Subdivision")),je=M(()=>ue("Water Permit")),Ie=M(()=>ue("Discharge Permit")),Le=M(()=>ue("Coastal Permit"));M(()=>Ve.value||fe.value),M(()=>{const u=n.value.activity_status==="Controlled",o=!fe.value;return u&&o&&Z.value}),M(()=>(Ve.value||fe.value)&&!(je.value||Ie.value||Le.value)),M(()=>{if(!n.value.activity_status)return null;switch(n.value.activity_status){case"Non-Complying":return"⚠️ Non-complying activities face higher scrutiny and longer processing times. Consider pre-application meeting.";case"Discretionary":return"ℹ️ Discretionary activities may require public notification depending on effects assessment.";case"Controlled":return"✓ Controlled activities must be granted consent. Council will focus on appropriate conditions.";default:return null}});const Ae=M(()=>Ee.value||x.value.length>0),oe=A({data:[],loading:!1,error:null}),Se=Ne({url:"frappe.client.get_list",params:{doctype:"Property",fields:["name","property_id","street_address","suburb","city","legal_description","certificate_of_title"],limit_page_length:100},auto:!0}),xe=u=>ee(this,null,function*(){if(!u){oe.value={data:[],loading:!1,error:null};return}oe.value.loading=!0,oe.value.error=null;try{yield c.loadRequestTypesForCouncil(u),oe.value.data=c.availableRequestTypes,console.log(`[NewRequest] Loaded ${oe.value.data.length} request types for council ${u}`)}catch(o){oe.value.error=o.message||"Failed to load request types",console.error("[NewRequest] Failed to load request types:",o)}finally{oe.value.loading=!1}}),Fe=()=>{confirm("Are you sure you want to leave? Any unsaved changes will be lost.")&&k.push({name:"Dashboard"})},Oe=u=>u<t.value||u===t.value?"bg-blue-600 text-white":"bg-gray-200 text-gray-600",Be=u=>{console.log("[NewRequest] Selecting Request Type:",u.name,u.type_name),n.value.request_type=u.name,n.value.request_category=u.category||"",y.value=u,console.log("[NewRequest] Form data updated:",{request_type:n.value.request_type,request_category:n.value.request_category,details:y.value})},He=()=>{if(n.value.property){const u=Se.data.find(o=>o.name===n.value.property);u&&(n.value.property_address=`${u.street_address}, ${u.suburb}, ${u.city}`,n.value.legal_description=u.legal_description||"",n.value.ct_reference=u.certificate_of_title||"",n.value.parcel_id=u.property_id||"",n.value.zone=u.zoning||"",u.latitude&&u.longitude&&(n.value.property_coordinates=`${u.latitude},${u.longitude}`),console.log("[NewRequest] Populated property details from existing property:",{address:n.value.property_address,legal_description:n.value.legal_description,ct_reference:n.value.ct_reference,parcel_id:n.value.parcel_id,zone:n.value.zone}))}},_e=()=>{switch(t.value){case 1:const u=!!n.value.council;return console.log("[NewRequest] canProceed Step 1 (Council):",u,"council:",n.value.council),u;case 2:const o=!!n.value.request_type;return console.log("[NewRequest] canProceed Step 2 (Type):",o,"request_type:",n.value.request_type),o;case 3:return!0;case 4:const p=n.value.applicant_phone&&n.value.applicant_type&&n.value.applicant_name&&n.value.applicant_email,G=!n.value.applicant_is_not_owner||n.value.owner_name&&n.value.owner_email&&n.value.owner_phone&&n.value.owner_address;return!!(p&&G);case 5:const ae=n.value.property||n.value.property_address;return console.log("[NewRequest] canProceed Step 5 (Property):",!!ae,"property:",n.value.property,"address:",n.value.property_address),!!ae;case 6:const J=!!n.value.delivery_preference,re=n.value.invoice_to==="Applicant"||n.value.invoice_to==="Other"&&n.value.invoice_name&&n.value.invoice_email&&n.value.invoice_address,ut=!n.value.transfer_deposit_required||!!n.value.transfer_deposit_consent_number;return!!(J&&re&&ut);case 7:if(Z.value){const Pe=n.value.consent_types&&n.value.consent_types.length>0,pt=!!n.value.activity_status;return!!(Pe&&pt)}return!0;case 8:return!0;case 9:return!0;case 10:return!0;case 11:return!0;case 12:return!0;case 13:return!0;case 14:return!0;case 15:return!0;case 16:return Z.value?!!(n.value.declaration_rma_compliance&&n.value.declaration_public_information&&n.value.declaration_authorized):!0;default:return!0}},We=()=>ee(this,null,function*(){i.value=!0;try{const o=yield(yield fetch("/api/method/lodgeick.api.create_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({data:n.value})})).json();if(o.message&&o.message.success)return alert(`Draft saved successfully! Request ID: ${o.message.request_number}`),o.message;throw new Error(o.message||"Failed to save draft")}catch(u){return console.error("Error saving draft:",u),alert("Failed to save draft. Please try again."),null}finally{i.value=!1}}),De=()=>{var o;const u=(o=c.councils)==null?void 0:o.find(p=>p.council_code===n.value.council);return(u==null?void 0:u.council_name)||"Council"},Ge=()=>{var o;const u=(o=oe.data)==null?void 0:o.find(p=>p.name===n.value.request_type);return(u==null?void 0:u.type_name)||"N/A"},Je=()=>{var o;const u=(o=oe.data)==null?void 0:o.find(p=>p.name===n.value.request_type);return u!=null&&u.base_fee?`$${u.base_fee}`:"TBD"},Ye=()=>{_e()&&t.value++},Ze=()=>ee(this,null,function*(){yield Xe()}),Xe=()=>ee(this,null,function*(){if(!n.value.declaration_rma_compliance||!n.value.declaration_public_information||!n.value.declaration_authorized){alert("Please confirm all three statutory declarations before submitting your application");return}S.value=!0;try{const o=yield(yield fetch("/api/method/lodgeick.api.create_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({data:n.value})})).json();if(!o.message||!o.message.success)throw new Error("Failed to create request");const p=o.message.request_id;if(x.value.length>0)for(const J of x.value){const re=new FormData;re.append("file",J),re.append("doctype","Request"),re.append("docname",p),re.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:re})}if(n.value.certificate_of_title_document){const J=new FormData;J.append("file",n.value.certificate_of_title_document),J.append("doctype","Request"),J.append("docname",p),J.append("fieldname","certificate_of_title_document"),J.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:J})}if(n.value.aee_document){const J=new FormData;J.append("file",n.value.aee_document),J.append("doctype","Resource Consent Application"),J.append("docname",p),J.append("fieldname","aee_document"),J.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:J})}const ae=yield(yield fetch("/api/method/lodgeick.lodgeick.doctype.request.request.submit_application",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:p})})).json();if(ae.message&&ae.message.success)alert(`Application submitted successfully! Request Number: ${ae.message.request_number}`),k.push({name:"Dashboard"});else throw new Error("Failed to submit application")}catch(u){console.error("Error submitting application:",u),alert("Failed to submit application")}finally{S.value=!1}});A(null);const he=A(!1),ce=A(null),E=A({party_name:"",relationship:"",property_address:"",email:"",phone:"",postal_address:"",approval_obtained:!1,approval_date:"",approval_document:null,comments:""}),Ke=()=>{if(!E.value.party_name||!E.value.relationship){alert("Please enter party name and relationship");return}ce.value!==null?n.value.affected_parties[ce.value]=R({},E.value):n.value.affected_parties.push(R({},E.value)),he.value=!1},we=()=>{he.value=!1},Qe=u=>{const o=u.target.files[0];if(o){if(o.size>10*1024*1024){alert("File size must be less than 10MB"),u.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/jpg","image/png"].includes(o.type)){alert("Only PDF, Word documents, and images (JPG, PNG) are allowed"),u.target.value="";return}E.value.approval_document=o}},ke=A(!1),me=A(null),O=A({report_type:"",specialist_name:"",specialist_company:"",report_date:"",document:null,summary:""}),et=()=>{if(!O.value.report_type||!O.value.specialist_name||!O.value.report_date){alert("Please enter report type, specialist name, and report date");return}me.value!==null?n.value.specialist_reports[me.value]=R({},O.value):n.value.specialist_reports.push(R({},O.value)),ke.value=!1},$e=()=>{ke.value=!1},tt=u=>{const o=u.target.files[0];if(o){if(o.size>10*1024*1024){alert("File size must be less than 10MB"),u.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(o.type)){alert("Only PDF and Word documents are allowed"),u.target.value="";return}O.value.document=o}},be=A(!1),se=A(null),Ue=A([]),ot=A(!1),ge=A("All"),W=A({condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""}),qe=["All","General","Timing","Lapse","Review","Financial Contribution","Bonds","Monitoring","Environmental Management","Construction","Operation","Landscape","Ecology","Archaeology","Cultural","Traffic","Parking","Noise","Discharge","Earthworks","Heritage","Water","Coastal","Other"],ve=M(()=>ge.value==="All"?Ue.value:Ue.value.filter(u=>u.condition_category===ge.value)),st=u=>{const p={condition_number:(n.value.proposed_conditions.length+1).toString(),condition_category:u.condition_category,condition_text:u.condition_text,compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""};n.value.proposed_conditions.push(p)},lt=()=>{W.value={condition_number:(n.value.proposed_conditions.length+1).toString(),condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},se.value=null},at=()=>{if(!W.value.condition_category||!W.value.condition_text){alert("Please enter condition category and text");return}se.value!==null?n.value.proposed_conditions[se.value]=R({},W.value):n.value.proposed_conditions.push(R({},W.value)),W.value={condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},se.value=null},rt=()=>{W.value={condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},se.value=null},nt=u=>{confirm("Remove this condition?")&&(n.value.proposed_conditions.splice(u,1),n.value.proposed_conditions.forEach((o,p)=>{o.condition_number=(p+1).toString()}))};Ne({url:"lodgeick.api.book_council_meeting",makeParams:u=>u,onSuccess:u=>{u&&u.success?alert(`✅ Pre-Application Meeting Request Sent!

Task #${u.task_id} has been created for the planning team.

They will contact you within 2 business days to schedule.`):alert("Meeting request sent successfully! The planning team will contact you soon."),D.value=!1},onError:u=>{console.error("Error requesting meeting:",u),alert("Failed to request pre-application meeting. Please try again or contact the planning team directly."),D.value=!1}});const it=()=>ee(this,null,function*(){try{s.value=!0;const u=yield pe("lodgeick.api.get_user_profile");C.value=u,u.applicant_type&&!n.value.applicant_type&&(n.value.applicant_type=u.applicant_type),u.phone&&!n.value.applicant_phone&&!n.value.acting_on_behalf&&(n.value.applicant_phone=u.phone),n.value.acting_on_behalf||(n.value.applicant_name=`${u.first_name||""} ${u.last_name||""}`.trim()||u.email,n.value.applicant_email=u.email)}catch(u){console.error("Error loading user profile:",u)}finally{s.value=!1}}),dt=()=>ee(this,null,function*(){try{const u=yield pe("lodgeick.api.get_user_company_account");u&&(d.value=u)}catch(u){console.error("Error loading company account:",u)}});return z(()=>n.value.submitted_on_behalf_of,u=>{u==="Company"&&d.value?n.value.company_account=d.value.name:n.value.company_account=null}),z(()=>n.value.acting_on_behalf,u=>{!u&&C.value?(n.value.applicant_name=`${C.value.first_name||""} ${C.value.last_name||""}`.trim()||C.value.email,n.value.applicant_email=C.value.email,C.value.phone&&(n.value.applicant_phone=C.value.phone),C.value.applicant_type&&(n.value.applicant_type=C.value.applicant_type)):u&&(n.value.applicant_name="",n.value.applicant_email="",n.value.applicant_phone="")}),z(()=>n.value.applicant_phone,(u,o)=>ee(this,null,function*(){if(!n.value.acting_on_behalf&&C.value&&u&&u!==o&&u!==C.value.phone)try{yield pe("lodgeick.api.update_user_profile",{phone:u}),C.value.phone=u,console.log("[NewRequest] Phone number saved to profile:",u)}catch(p){console.error("[NewRequest] Error saving phone to profile:",p)}})),_t(()=>ee(this,null,function*(){if(yield it(),yield dt(),c.preselectedFromUrl)n.value.council=c.preselectedFromUrl,yield xe(c.preselectedFromUrl);else{const u=yield c.getUserCouncils();u.default_council&&(n.value.council=u.default_council,yield xe(u.default_council))}})),(u,o)=>(a(),r("div",_i,[e("header",hi,[e("div",wi,[e("div",ki,[e("div",$i,[e("button",{onClick:Fe,class:"text-gray-500 hover:text-gray-700"},[...o[53]||(o[53]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),e("div",null,[o[54]||(o[54]=e("h1",{class:"text-xl font-bold text-gray-900"},"New Application",-1)),e("p",Ci,"Step "+f(t.value)+" of "+f(l.value),1)])]),Y(ze(wt),{onClick:We,variant:"outline",theme:"gray",loading:i.value},{default:ht(()=>[...o[55]||(o[55]=[N(" Save Draft ",-1)])]),_:1},8,["loading"])])])]),e("div",Vi,[e("div",Ai,[e("div",Si,[(a(!0),r(L,null,F(q.value,(p,G)=>(a(),r("div",{key:G,class:j(["flex items-center",{"flex-1":G<q.value.length-1}])},[e("div",Di,[e("div",{class:j(["w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm",Oe(G+1)])},[G+1<t.value?(a(),r("span",Ui,"✓")):(a(),r("span",qi,f(G+1),1))],2),e("span",{class:j(["text-xs mt-2 text-center",G+1===t.value?"text-blue-600 font-medium":"text-gray-500"])},f(p.title),3)]),G<q.value.length-1?(a(),r("div",{key:0,class:j(["flex-1 h-1 mx-4 rounded",G+1<t.value?"bg-blue-600":"bg-gray-200"])},null,2)):_("",!0)],2))),128))])])]),e("main",Pi,[e("div",Ri,[t.value===1?(a(),r("div",Mi,[Y($t,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=p=>n.value=p),onCouncilChange:xe},null,8,["modelValue"])])):_("",!0),t.value===2?(a(),r("div",Ti,[Y(zt,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=p=>n.value=p),"request-types":oe.value,onTypeSelected:Be},null,8,["modelValue","request-types"])])):_("",!0),t.value===3?(a(),r("div",Ni,[Y(eo,{"request-type-details":y.value,"council-name":De(),onContinue:o[2]||(o[2]=p=>t.value++)},null,8,["request-type-details","council-name"])])):_("",!0),t.value===4?(a(),Ce(Do,{key:3,modelValue:n.value,"onUpdate:modelValue":o[3]||(o[3]=p=>n.value=p),"user-profile":C.value,"user-company-account":d.value},null,8,["modelValue","user-profile","user-company-account"])):_("",!0),t.value===5?(a(),Ce(ts,{key:4,modelValue:n.value,"onUpdate:modelValue":o[4]||(o[4]=p=>n.value=p),properties:ze(Se),onPropertySelect:He},null,8,["modelValue","properties"])):_("",!0),t.value===6?(a(),Ce(cs,{key:5,modelValue:n.value,"onUpdate:modelValue":o[5]||(o[5]=p=>n.value=p)},null,8,["modelValue"])):_("",!0),t.value===7&&Z.value?(a(),r("div",zi,[Y(As,{modelValue:n.value,"onUpdate:modelValue":o[6]||(o[6]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===8&&Z.value?(a(),r("div",Ei,[Y(Xs,{modelValue:n.value,"onUpdate:modelValue":o[7]||(o[7]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===9&&Z.value?(a(),r("div",ji,[Y(Nl,{modelValue:n.value,"onUpdate:modelValue":o[8]||(o[8]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===10&&Z.value?(a(),r("div",Ii,[Y(ea,{modelValue:n.value,"onUpdate:modelValue":o[9]||(o[9]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===11&&Z.value?(a(),r("div",Li,[Y($a,{modelValue:n.value,"onUpdate:modelValue":o[10]||(o[10]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===12&&Z.value?(a(),r("div",Fi,[Y(Ma,{modelValue:n.value,"onUpdate:modelValue":o[11]||(o[11]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===13&&Z.value?(a(),r("div",Oi,[Y(or,{modelValue:n.value,"onUpdate:modelValue":o[12]||(o[12]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===14&&Z.value?(a(),r("div",Bi,[Y(Cr,{modelValue:n.value,"onUpdate:modelValue":o[13]||(o[13]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===15&&Z.value?(a(),r("div",Hi,[Y(zr,{modelValue:n.value,"onUpdate:modelValue":o[14]||(o[14]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===16&&Z.value?(a(),r("div",Wi,[Y(gn,{modelValue:n.value,"onUpdate:modelValue":o[15]||(o[15]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===17&&Z.value?(a(),r("div",Gi,[Y(hn,{modelValue:n.value,"onUpdate:modelValue":o[16]||(o[16]=p=>n.value=p)},null,8,["modelValue"])])):_("",!0),t.value===l.value?(a(),r("div",Ji,[Y(xi,{modelValue:n.value,"onUpdate:modelValue":o[17]||(o[17]=p=>n.value=p),"council-name":De(),"request-type-name":Ge(),"application-fee":Je(),"is-resource-consent":Z.value},null,8,["modelValue","council-name","request-type-name","application-fee","is-resource-consent"])])):_("",!0)]),e("div",Yi,[t.value>1?(a(),r("button",{key:0,onClick:o[18]||(o[18]=p=>t.value--),class:"px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center"},[...o[56]||(o[56]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),N(" Previous ",-1)])])):(a(),r("div",Zi)),t.value<l.value?(a(),r("button",{key:2,onClick:Ye,disabled:!_e(),class:j(["px-6 py-3 font-medium rounded-lg transition-colors flex items-center",_e()?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[...o[57]||(o[57]=[N(" Next ",-1),e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],10,Xi)):(a(),r("button",{key:3,onClick:Ze,disabled:!Ae.value||S.value,class:j(["px-6 py-3 font-medium rounded-lg transition-colors",Ae.value&&!S.value?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[S.value?(a(),r("span",Qi,"Submitting...")):(a(),r("span",ed,"Submit Application"))],10,Ki))])]),he.value?(a(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:le(we,["self"])},[e("div",td,[e("div",od,[e("div",sd,[e("h3",ld,f(ce.value!==null?"Edit":"Add")+" Affected Party ",1),e("button",{onClick:we,class:"text-gray-400 hover:text-gray-600"},[...o[58]||(o[58]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",ad,[e("div",null,[o[59]||(o[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[N(" Party Name "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{"onUpdate:modelValue":o[19]||(o[19]=p=>E.value.party_name=p),type:"text",required:"",placeholder:"e.g., John Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,E.value.party_name]])]),e("div",null,[o[61]||(o[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[N(" Relationship "),e("span",{class:"text-red-500"},"*")],-1)),m(e("select",{"onUpdate:modelValue":o[20]||(o[20]=p=>E.value.relationship=p),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...o[60]||(o[60]=[T('<option value="">Select relationship</option><option value="Adjacent Property Owner">Adjacent Property Owner</option><option value="Neighbor">Neighbor</option><option value="Iwi">Iwi</option><option value="Infrastructure Provider">Infrastructure Provider</option><option value="Other">Other</option>',6)])],512),[[B,E.value.relationship]])]),e("div",rd,[o[64]||(o[64]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Contact Information",-1)),e("div",nd,[e("div",null,[o[62]||(o[62]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Email",-1)),m(e("input",{"onUpdate:modelValue":o[21]||(o[21]=p=>E.value.email=p),type:"email",placeholder:"email@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[h,E.value.email]])]),e("div",null,[o[63]||(o[63]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Phone",-1)),m(e("input",{"onUpdate:modelValue":o[22]||(o[22]=p=>E.value.phone=p),type:"tel",placeholder:"021 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[h,E.value.phone]])])])]),e("div",id,[o[69]||(o[69]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Addresses",-1)),e("div",dd,[e("div",null,[o[65]||(o[65]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Property Address",-1)),m(e("textarea",{"onUpdate:modelValue":o[23]||(o[23]=p=>E.value.property_address=p),rows:"2",placeholder:"123 Main Street, Suburb, City",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[h,E.value.property_address]]),o[66]||(o[66]=e("p",{class:"mt-1 text-xs text-gray-500"},"The property address affected by this proposal",-1))]),e("div",null,[o[67]||(o[67]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Postal Address",-1)),m(e("textarea",{"onUpdate:modelValue":o[24]||(o[24]=p=>E.value.postal_address=p),rows:"2",placeholder:"PO Box 123, Suburb, City",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[h,E.value.postal_address]]),o[68]||(o[68]=e("p",{class:"mt-1 text-xs text-gray-500"},"For correspondence (if different from property address)",-1))])])]),e("div",ud,[o[75]||(o[75]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Written Approval",-1)),e("div",pd,[m(e("input",{type:"checkbox","onUpdate:modelValue":o[25]||(o[25]=p=>E.value.approval_obtained=p),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,E.value.approval_obtained]]),o[70]||(o[70]=e("label",{class:"ml-3 text-sm text-gray-700"}," Written approval obtained from this party ",-1))]),E.value.approval_obtained?(a(),r("div",cd,[e("div",null,[o[71]||(o[71]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Approval Date",-1)),m(e("input",{"onUpdate:modelValue":o[26]||(o[26]=p=>E.value.approval_date=p),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[h,E.value.approval_date]])]),e("div",null,[o[73]||(o[73]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Approval Document",-1)),e("input",{type:"file",onChange:Qe,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),o[74]||(o[74]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload written approval (PDF, Word, or image, max 10MB)",-1)),E.value.approval_document?(a(),r("div",md,[o[72]||(o[72]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,f(typeof E.value.approval_document=="object"?E.value.approval_document.name:"Document attached"),1)])):_("",!0)])])):_("",!0)]),e("div",null,[o[76]||(o[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Comments",-1)),m(e("textarea",{"onUpdate:modelValue":o[27]||(o[27]=p=>E.value.comments=p),rows:"3",placeholder:"Any additional notes about this party or their concerns...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[h,E.value.comments]])])]),e("div",bd,[e("button",{onClick:we,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Ke,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},f(ce.value!==null?"Update":"Add")+" Party ",1)])])])):_("",!0),ke.value?(a(),r("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:le($e,["self"])},[e("div",gd,[e("div",vd,[e("div",yd,[e("h3",fd,f(me.value!==null?"Edit":"Add")+" Specialist Report ",1),e("button",{onClick:$e,class:"text-gray-400 hover:text-gray-600"},[...o[77]||(o[77]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",xd,[e("div",null,[o[79]||(o[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[N(" Report Type "),e("span",{class:"text-red-500"},"*")],-1)),m(e("select",{"onUpdate:modelValue":o[28]||(o[28]=p=>O.value.report_type=p),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...o[78]||(o[78]=[T('<option value="">Select report type</option><option value="Traffic Impact Assessment">Traffic Impact Assessment</option><option value="Acoustic Assessment">Acoustic Assessment</option><option value="Geotechnical Report">Geotechnical Report</option><option value="Ecological Assessment">Ecological Assessment</option><option value="Archaeological Assessment">Archaeological Assessment</option><option value="Landscape Assessment">Landscape Assessment</option><option value="Contaminated Land Assessment">Contaminated Land Assessment</option><option value="Flood Risk Assessment">Flood Risk Assessment</option><option value="Other">Other</option>',10)])],512),[[B,O.value.report_type]])]),e("div",_d,[o[82]||(o[82]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Consultant Details",-1)),e("div",hd,[e("div",null,[o[80]||(o[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[N(" Specialist Name "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{"onUpdate:modelValue":o[29]||(o[29]=p=>O.value.specialist_name=p),type:"text",required:"",placeholder:"e.g., Dr. Jane Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,O.value.specialist_name]])]),e("div",null,[o[81]||(o[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Company/Organization",-1)),m(e("input",{"onUpdate:modelValue":o[30]||(o[30]=p=>O.value.specialist_company=p),type:"text",placeholder:"e.g., ABC Consultants Ltd",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,O.value.specialist_company]])])])]),e("div",wd,[o[90]||(o[90]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Report Details",-1)),e("div",kd,[e("div",null,[o[83]||(o[83]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[N(" Report Date "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{"onUpdate:modelValue":o[31]||(o[31]=p=>O.value.report_date=p),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,O.value.report_date]]),o[84]||(o[84]=e("p",{class:"mt-1 text-xs text-gray-500"},"Date the report was prepared or finalized",-1))]),e("div",null,[o[86]||(o[86]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[N(" Document "),e("span",{class:"text-red-500"},"*")],-1)),e("input",{type:"file",onChange:tt,accept:".pdf,.doc,.docx",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),o[87]||(o[87]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload the specialist report (PDF or Word, max 10MB)",-1)),O.value.document?(a(),r("div",$d,[o[85]||(o[85]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,f(typeof O.value.document=="object"?O.value.document.name:"Document attached"),1)])):_("",!0)]),e("div",null,[o[88]||(o[88]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Summary",-1)),m(e("textarea",{"onUpdate:modelValue":o[32]||(o[32]=p=>O.value.summary=p),rows:"4",placeholder:"Brief summary of key findings and recommendations...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[h,O.value.summary]]),o[89]||(o[89]=e("p",{class:"mt-1 text-xs text-gray-500"},"Optional: Provide a brief summary of the report's key findings",-1))])])])]),e("div",Cd,[e("button",{onClick:$e,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:et,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},f(me.value!==null?"Update":"Add")+" Report ",1)])])])):_("",!0),ie.value?(a(),r("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:le(U,["self"])},[e("div",Vd,[e("div",Ad,[e("div",Sd,[e("h3",Dd,f(de.value!==null?"Edit":"Add")+" HAIL Activity ",1),e("button",{onClick:U,class:"text-gray-400 hover:text-gray-600"},[...o[91]||(o[91]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Ud,[e("div",null,[o[92]||(o[92]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[N(" Activity Description "),e("span",{class:"text-red-500"},"*")],-1)),m(e("textarea",{"onUpdate:modelValue":o[33]||(o[33]=p=>P.value.activity_description=p),rows:"3",required:"",placeholder:"Describe the HAIL activity (e.g., Former service station, industrial site)...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,P.value.activity_description]])]),e("div",null,[o[94]||(o[94]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," HAIL Category ",-1)),m(e("select",{"onUpdate:modelValue":o[34]||(o[34]=p=>P.value.hail_category=p),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...o[93]||(o[93]=[T('<option value="">Select HAIL category</option><option value="Category A - Petroleum/Oil Storage">Category A - Petroleum/Oil Storage</option><option value="Category B - Asbestos Products">Category B - Asbestos Products</option><option value="Category C - Chemicals">Category C - Chemicals</option><option value="Category D - Engineering Workshops">Category D - Engineering Workshops</option><option value="Category E - Gasworks/Coke Works">Category E - Gasworks/Coke Works</option><option value="Category F - Horticulture">Category F - Horticulture</option><option value="Category G - Landfills/Waste Disposal">Category G - Landfills/Waste Disposal</option><option value="Category H - Metal Treatment">Category H - Metal Treatment</option><option value="Category I - Timber Treatment">Category I - Timber Treatment</option>',10)])],512),[[B,P.value.hail_category]])]),e("div",qd,[o[98]||(o[98]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Activity Status",-1)),e("div",Pd,[e("div",Rd,[m(e("input",{type:"checkbox",id:"hail-current","onUpdate:modelValue":o[35]||(o[35]=p=>P.value.currently_undertaken=p),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,P.value.currently_undertaken]]),o[95]||(o[95]=e("label",{for:"hail-current",class:"ml-2 text-sm text-gray-700"},"Currently Being Undertaken",-1))]),e("div",Md,[m(e("input",{type:"checkbox",id:"hail-previous","onUpdate:modelValue":o[36]||(o[36]=p=>P.value.previously_undertaken=p),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,P.value.previously_undertaken]]),o[96]||(o[96]=e("label",{for:"hail-previous",class:"ml-2 text-sm text-gray-700"},"Previously Undertaken",-1))]),e("div",Td,[m(e("input",{type:"checkbox",id:"hail-likely","onUpdate:modelValue":o[37]||(o[37]=p=>P.value.likely_undertaken=p),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,P.value.likely_undertaken]]),o[97]||(o[97]=e("label",{for:"hail-likely",class:"ml-2 text-sm text-gray-700"},"Likely to Have Been Undertaken",-1))])])]),e("div",Nd,[m(e("input",{type:"checkbox",id:"hail-investigated","onUpdate:modelValue":o[38]||(o[38]=p=>P.value.preliminary_investigation_done=p),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,P.value.preliminary_investigation_done]]),o[99]||(o[99]=e("label",{for:"hail-investigated",class:"ml-2 text-sm text-gray-700"},"Preliminary Investigation Completed",-1))]),e("div",zd,[o[105]||(o[105]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Proposed Activities",-1)),e("div",Ed,[e("div",jd,[m(e("input",{type:"checkbox",id:"hail-activity-fuel","onUpdate:modelValue":o[39]||(o[39]=p=>w.value.fuel=p),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,w.value.fuel]]),o[100]||(o[100]=e("label",{for:"hail-activity-fuel",class:"ml-2 text-sm text-gray-700"},"Removing or replacing fuel storage system",-1))]),e("div",Id,[m(e("input",{type:"checkbox",id:"hail-activity-disturb","onUpdate:modelValue":o[40]||(o[40]=p=>w.value.disturb=p),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,w.value.disturb]]),o[101]||(o[101]=e("label",{for:"hail-activity-disturb",class:"ml-2 text-sm text-gray-700"},"Disturbing soil",-1))]),e("div",Ld,[m(e("input",{type:"checkbox",id:"hail-activity-sample","onUpdate:modelValue":o[41]||(o[41]=p=>w.value.sample=p),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,w.value.sample]]),o[102]||(o[102]=e("label",{for:"hail-activity-sample",class:"ml-2 text-sm text-gray-700"},"Sampling soil",-1))]),e("div",Fd,[m(e("input",{type:"checkbox",id:"hail-activity-subdivide","onUpdate:modelValue":o[42]||(o[42]=p=>w.value.subdivide=p),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,w.value.subdivide]]),o[103]||(o[103]=e("label",{for:"hail-activity-subdivide",class:"ml-2 text-sm text-gray-700"},"Subdividing land",-1))]),e("div",Od,[m(e("input",{type:"checkbox",id:"hail-activity-change","onUpdate:modelValue":o[43]||(o[43]=p=>w.value.change=p),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,w.value.change]]),o[104]||(o[104]=e("label",{for:"hail-activity-change",class:"ml-2 text-sm text-gray-700"},"Changing use of land",-1))])]),o[106]||(o[106]=e("p",{class:"text-xs text-gray-500 mt-2"},"Select all proposed activities that apply",-1))]),e("div",null,[o[107]||(o[107]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Additional Notes",-1)),m(e("textarea",{"onUpdate:modelValue":o[44]||(o[44]=p=>P.value.notes=p),rows:"3",placeholder:"Additional notes about the HAIL activity...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[h,P.value.notes]])])]),e("div",Bd,[e("button",{onClick:U,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:$,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},f(de.value!==null?"Update":"Add")+" Activity ",1)])])])):_("",!0),be.value?(a(),r("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o[52]||(o[52]=le(p=>be.value=!1,["self"]))},[e("div",Hd,[e("div",Wd,[e("div",Gd,[o[109]||(o[109]=e("h3",{class:"text-lg font-semibold text-gray-900"}," Browse Condition Templates ",-1)),e("button",{onClick:o[45]||(o[45]=p=>be.value=!1),class:"text-gray-400 hover:text-gray-600"},[...o[108]||(o[108]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Jd,[e("div",Yd,[e("div",Zd,[e("div",Xd,[o[110]||(o[110]=e("label",{class:"text-sm font-medium text-gray-700"},"Filter by Category:",-1)),m(e("select",{"onUpdate:modelValue":o[46]||(o[46]=p=>ge.value=p),class:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(a(),r(L,null,F(qe,p=>e("option",{key:p,value:p},f(p),9,Kd)),64))],512),[[B,ge.value]]),e("span",Qd,f(ve.value.length)+" template"+f(ve.value.length!==1?"s":""),1)]),ot.value?(a(),r("div",eu,[...o[111]||(o[111]=[e("svg",{class:"animate-spin h-8 w-8 mx-auto text-blue-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading templates...",-1)])])):ve.value.length>0?(a(),r("div",tu,[(a(!0),r(L,null,F(ve.value,p=>(a(),r("div",{key:p.name,class:"p-4 bg-white border border-gray-300 rounded-lg hover:border-blue-400 hover:shadow-sm transition-all"},[e("div",ou,[e("div",su,[e("div",lu,[e("h4",au,f(p.template_name),1),p.condition_code?(a(),r("span",ru,f(p.condition_code),1)):_("",!0)]),e("div",nu,[e("span",iu,f(p.condition_category),1),p.timing?(a(),r("span",du,f(p.timing),1)):_("",!0),p.monitoring_required?(a(),r("span",uu," Monitoring Required ")):_("",!0)]),e("div",{class:"text-xs text-gray-700 line-clamp-3",innerHTML:p.condition_text},null,8,pu)]),e("button",{onClick:G=>st(p),type:"button",class:"ml-3 px-3 py-1.5 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 flex items-center gap-1 flex-shrink-0"},[...o[112]||(o[112]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),N(" Add ",-1)])],8,cu)])]))),128))])):(a(),r("div",mu,[...o[113]||(o[113]=[e("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-sm text-gray-500"},"No templates found for selected category",-1)])])),e("div",{class:"pt-4 border-t border-gray-200"},[e("button",{onClick:lt,type:"button",class:"w-full px-4 py-2.5 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 flex items-center justify-center gap-2 border-2 border-dashed border-gray-300"},[...o[114]||(o[114]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),N(" Add Custom Condition ",-1)])])])]),e("div",bu,[e("h4",gu,[o[115]||(o[115]=e("span",null,"Selected Conditions",-1)),e("span",vu,f(n.value.proposed_conditions.length),1)]),n.value.proposed_conditions.length>0?(a(),r("div",yu,[(a(!0),r(L,null,F(n.value.proposed_conditions,(p,G)=>(a(),r("div",{key:G,class:"p-2 bg-white rounded border border-gray-300 text-xs"},[e("div",fu,[e("div",xu,[e("span",_u,f(p.condition_number),1),e("span",hu,f(p.condition_category),1)]),e("button",{onClick:ae=>nt(G),type:"button",class:"text-red-600 hover:bg-red-50 rounded p-0.5",title:"Remove"},[...o[116]||(o[116]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,wu)]),e("div",{class:"text-gray-700 line-clamp-2",innerHTML:p.condition_text},null,8,ku)]))),128))])):(a(),r("div",$u,[...o[117]||(o[117]=[e("svg",{class:"w-8 h-8 mx-auto text-gray-300 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),N(" No conditions selected ",-1)])]))])]),se.value!==null||W.value.condition_text||W.value.condition_category?(a(),r("div",Cu,[e("h4",Vu,f(se.value!==null?"Edit":"Add Custom")+" Condition ",1),e("div",Au,[e("div",null,[o[118]||(o[118]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[N(" Condition Number "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{"onUpdate:modelValue":o[47]||(o[47]=p=>W.value.condition_number=p),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1"},null,512),[[h,W.value.condition_number]])]),e("div",null,[o[120]||(o[120]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[N(" Category "),e("span",{class:"text-red-500"},"*")],-1)),m(e("select",{"onUpdate:modelValue":o[48]||(o[48]=p=>W.value.condition_category=p),class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[o[119]||(o[119]=e("option",{value:""},"Select category",-1)),(a(!0),r(L,null,F(qe.filter(p=>p!=="All"),p=>(a(),r("option",{key:p,value:p},f(p),9,Su))),128))],512),[[B,W.value.condition_category]])])]),e("div",Du,[o[121]||(o[121]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[N(" Condition Text "),e("span",{class:"text-red-500"},"*")],-1)),m(e("textarea",{"onUpdate:modelValue":o[49]||(o[49]=p=>W.value.condition_text=p),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter the condition text..."},null,512),[[h,W.value.condition_text]])]),e("div",null,[o[122]||(o[122]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Notes",-1)),m(e("textarea",{"onUpdate:modelValue":o[50]||(o[50]=p=>W.value.compliance_notes=p),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional notes about this condition..."},null,512),[[h,W.value.compliance_notes]])]),e("div",Uu,[e("button",{onClick:rt,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:at,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},f(se.value!==null?"Update":"Add")+" Condition ",1)])])):_("",!0)]),e("div",qu,[e("button",{onClick:o[51]||(o[51]=p=>be.value=!1),type:"button",class:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"}," Done ")])])])):_("",!0)]))}};export{Tu as default};
//# sourceMappingURL=NewRequest-MFHzgX1d.js.map
