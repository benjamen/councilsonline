var B=(L,j,v)=>new Promise((S,k)=>{var h=m=>{try{_(v.next(m))}catch(a){k(a)}},w=m=>{try{_(v.throw(m))}catch(a){k(a)}},_=m=>m.done?S(m.value):Promise.resolve(m.value).then(h,w);_((v=v.apply(L,j)).next())});import{j as R,r as b,a0 as $,o as r,w as x,a as e,c as n,d,b as A,u as s,I as xe,k as K,a5 as be,v as _e,t as l,D as ve,a9 as he,f as we,n as E,R as ke,h as q,i as N,a2 as T,F,l as V,g as Q,$ as Ce}from"./index-D5DjY2dQ.js";import{_ as W}from"./StatusBadge-hLsl6NDy.js";import{_ as Me}from"./BookMeetingModal-DfZWqLKQ.js";import{u as qe}from"./useStatutoryClock-DPZdjwG8.js";const je={class:"p-6"},Se={class:"space-y-4"},De=["disabled"],Pe=["disabled"],Ne={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Ae={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Be={class:"text-sm text-red-800"},Fe={class:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200"},Ve=["disabled"],$e=["disabled"],Te={key:0},Re={key:1},Le={__name:"SendMessageModal",props:{show:{type:Boolean,required:!0},requestId:{type:String,required:!0}},emits:["update:show","sent"],setup(L,{emit:j}){const v=L,S=j,k=R({get:()=>v.show,set:C=>S("update:show",C)}),h=b(""),w=b(""),_=b("Email"),m=b(!1),a=b(null),c=b(!1),p=R(()=>h.value.trim()&&w.value.trim()),D=()=>{m.value||(h.value="",w.value="",_.value="Email",a.value=null,c.value=!1,S("update:show",!1))},O=()=>B(this,null,function*(){var C;if(p.value){m.value=!0,a.value=null;try{const y=yield(yield fetch("/api/method/lodgeick.api.send_request_message",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:v.requestId,subject:h.value,message:w.value,communication_type:_.value})})).json();(C=y.message)!=null&&C.success?(c.value=!0,a.value=null,S("sent"),setTimeout(()=>{D()},2e3)):a.value=y.exc||y._server_messages||"Failed to send message"}catch(u){console.error("Send message error:",u),a.value="Network error. Please try again."}finally{m.value=!1}}});return(C,u)=>(r(),$(s(ve),{modelValue:k.value,"onUpdate:modelValue":u[3]||(u[3]=y=>k.value=y),options:{size:"lg"}},{body:x(()=>[e("div",je,[u[10]||(u[10]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Send Message to Council",-1)),e("div",Se,[e("div",null,[u[4]||(u[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Subject *",-1)),A(s(xe),{modelValue:h.value,"onUpdate:modelValue":u[0]||(u[0]=y=>h.value=y),placeholder:"Brief description of your message",disabled:m.value},null,8,["modelValue","disabled"])]),e("div",null,[u[5]||(u[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message *",-1)),K(e("textarea",{"onUpdate:modelValue":u[1]||(u[1]=y=>w.value=y),rows:"8",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Type your message to the council...",disabled:m.value},null,8,De),[[be,w.value]])]),e("div",null,[u[7]||(u[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Communication Type",-1)),K(e("select",{"onUpdate:modelValue":u[2]||(u[2]=y=>_.value=y),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:m.value},[...u[6]||(u[6]=[e("option",{value:"Email"},"Email",-1),e("option",{value:"Phone"},"Phone Call Follow-up",-1),e("option",{value:"Letter"},"Letter",-1),e("option",{value:"Other"},"Other",-1)])],8,Pe),[[_e,_.value]])]),u[9]||(u[9]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("p",{class:"text-sm text-blue-800"}," Your message will be sent to the council processing team. They typically respond within 2-3 business days. ")],-1)),c.value?(r(),n("div",Ne,[...u[8]||(u[8]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("p",{class:"text-sm text-green-800 font-medium"},"Message sent successfully! The council will respond within 2-3 business days.")],-1)])])):d("",!0),a.value?(r(),n("div",Ae,[e("p",Be,l(a.value),1)])):d("",!0),e("div",Fe,[e("button",{onClick:D,disabled:m.value,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}," Cancel ",8,Ve),e("button",{onClick:O,disabled:!p.value||m.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[m.value?(r(),n("span",Te,"Sending...")):(r(),n("span",Re,"Send Message"))],8,$e)])])])]),_:1},8,["modelValue"]))}},ze={class:"min-h-screen bg-gray-50"},Oe={class:"bg-white shadow-sm border-b border-gray-200"},Ee={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ie={class:"flex justify-between items-center py-4"},He={class:"flex items-center space-x-4"},Ue={class:"text-xl font-bold text-gray-900"},Je={class:"text-sm text-gray-500"},Xe={class:"flex items-center space-x-3"},Ye={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Ze={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ge={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ke={class:"lg:col-span-2 space-y-6"},Qe={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},We={class:"grid grid-cols-2 gap-4"},et={class:"mt-1 text-sm text-gray-900"},tt={class:"mt-1 text-sm text-gray-900"},st={class:"mt-1"},at={class:"mt-1 text-sm text-gray-900"},ot={class:"mt-6 pt-6 border-t border-gray-200"},rt={class:"mt-1 text-sm text-gray-900"},nt={class:"mt-4"},lt=["innerHTML"],it={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},dt={class:"grid grid-cols-2 gap-4"},ut={key:0},mt={class:"mt-1 text-sm text-gray-900"},ct={key:1},pt={class:"mt-1 text-sm text-gray-900"},gt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},yt={class:"grid grid-cols-2 gap-4"},ft={class:"mt-1 text-sm text-gray-900"},xt={class:"mt-1 text-sm text-gray-900"},bt={class:"mt-1 text-sm text-gray-900"},_t={class:"mt-1 text-sm text-gray-900"},vt={key:0},ht={class:"mt-1 text-sm text-gray-900"},wt={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},kt={class:"grid grid-cols-2 gap-4"},Ct={key:0},Mt={class:"mt-1 text-sm text-gray-900"},qt={key:1},jt={class:"mt-1 text-sm text-gray-900"},St={key:2},Dt={class:"mt-1 text-sm text-gray-900"},Pt={key:3},Nt={class:"mt-1 text-sm text-gray-900"},At={key:4,class:"col-span-2"},Bt={class:"mt-1 text-sm text-gray-900"},Ft={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Vt={class:"flex justify-between items-start mb-4"},$t={key:0,class:"space-y-3"},Tt={class:"grid grid-cols-2 gap-3 text-sm"},Rt={class:"ml-2 text-gray-900"},Lt={class:"ml-2 text-gray-900"},zt={key:0,class:"col-span-2"},Ot={class:"ml-2 text-gray-900"},Et={key:1,class:"col-span-2"},It={class:"ml-2 text-gray-900"},Ht={key:2,class:"col-span-2"},Ut={class:"ml-2 text-gray-900"},Jt={key:3,class:"col-span-2"},Xt=["href"],Yt={key:0,class:"mt-3 pt-3 border-t border-blue-200"},Zt={class:"mt-1 text-sm text-gray-900"},Gt={key:1,class:"text-center py-6"},Kt={class:"text-lg font-semibold text-gray-900 mb-4"},Qt={class:"space-y-4"},Wt={key:0,class:"text-md font-medium text-gray-700 mb-3"},es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ts={class:"text-sm font-medium text-gray-500"},ss={class:"mt-1 text-sm text-gray-900"},as={key:0,class:"text-gray-500 text-sm"},os={key:4,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},rs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ns={class:"text-sm font-medium text-gray-500"},ls={class:"mt-1 text-sm text-gray-900"},is={key:5,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ds={class:"flex justify-between items-center mb-4"},us={class:"space-y-3"},ms={class:"flex justify-between items-center py-2 border-b border-gray-100"},cs={class:"text-sm font-semibold text-gray-900"},ps={class:"flex justify-between items-center py-2 border-b border-gray-100"},gs={class:"text-sm font-semibold text-green-600"},ys={class:"flex justify-between items-center py-2"},fs={class:"text-sm font-bold text-orange-600"},xs={key:6,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},bs={class:"flex justify-between items-center mb-4"},_s={class:"space-y-3"},vs={class:"flex justify-between items-center py-2 border-b border-gray-100"},hs={class:"text-sm font-semibold text-gray-900"},ws={class:"flex justify-between items-center py-2 border-b border-gray-100"},ks={key:0,class:"flex justify-between items-center py-2"},Cs={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ms={class:"flex justify-between items-center mb-4"},qs={key:0,class:"text-center py-8"},js={class:"space-y-6"},Ss={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ds={key:0,class:"mb-6 p-4 bg-blue-50 rounded-lg"},Ps={class:"flex items-center justify-between mb-2"},Ns={class:"text-xs text-blue-700"},As={class:"w-full bg-blue-200 rounded-full h-2"},Bs={class:"mt-2 text-xs text-blue-700"},Fs={class:"space-y-4"},Vs={class:"flex items-start space-x-3"},$s={class:"flex-1"},Ts={class:"text-xs text-gray-500"},Rs={key:0,class:"flex items-start space-x-3"},Ls={class:"flex-1"},zs={class:"text-xs text-gray-500"},Os={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Es={class:"space-y-3"},Is={class:"flex items-start justify-between mb-2"},Hs={class:"text-sm font-medium text-gray-900"},Us={key:0,class:"flex items-center text-xs text-gray-600 mb-1"},Js={key:1,class:"flex items-center text-xs text-gray-600 mb-1"},Xs={key:2,class:"text-xs text-gray-600"},Ys={key:3,class:"mt-2 text-xs text-gray-500 line-clamp-2"},Zs={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Gs={class:"space-y-3"},sa={__name:"RequestDetail",setup(L){const j=he(),v=we(),S=b(null),k=b(!1),h=b(!1),w=b(!1);b(!1);const _=b(!1),m=b(!1),a=E({url:"frappe.client.get",params:{doctype:"Request",name:j.params.id},auto:!0}),c=E({url:"lodgeick.api.get_request_meetings",params:{request_id:j.params.id},auto:!0}),p=E({url:"lodgeick.api.get_request_type_config",auto:!1});ke(()=>{var o;return(o=a.data)==null?void 0:o.request_type},o=>{o&&p.fetch({request_type_code:o})},{immediate:!0});const{clockData:D,progressPercent:O}=qe(a),C=R(()=>{if(!a.data)return{};try{let o=null;if(a.data.draft_full_data&&(o=typeof a.data.draft_full_data=="string"?JSON.parse(a.data.draft_full_data):a.data.draft_full_data),!o)return{};const t=["name","owner","creation","modified","modified_by","docstatus","idx","council","request_type","request_number","status","requester","requester_name","requester_email","requester_phone","requester_signature","applicant_address","applicant_company","property","property_address","legal_description","brief_description","detailed_description","delivery_preference","invoice_to","invoice_recipient_name","invoice_recipient_email","purchase_order_number","total_fees","total_paid","payment_status","request_category","draft_current_step","draft_total_steps","draft_full_data","form_data","signature_date"],f={};return Object.keys(o).forEach(g=>{!t.includes(g)&&o[g]!==null&&o[g]!==""&&(f[g]=o[g])}),f}catch(o){return console.error("Error parsing form data:",o),{}}}),u=R(()=>{var o;return(o=p.data)!=null&&o.steps?p.data.steps.filter(t=>t.show_on_review):[]}),y=R(()=>{var o,t;return!!((o=a.data)!=null&&o.property_address||(t=p.data)!=null&&t.property_required)}),ee=o=>{if(!o.sections)return!1;for(const t of o.sections)if(t.show_on_review){for(const f of t.fields)if(f.show_on_review&&a.data[f.field_name])return!0}return!1},te=(o,t)=>{if(t==null||t==="")return"Not provided";if(o.field_type==="Check")return t?"Yes":"No";if(o.field_type==="Date"&&t)try{return new Date(t).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(f){return t}return o.field_type==="Currency"&&t?`$${parseFloat(t).toFixed(2)}`:Array.isArray(t)?t.join(", "):t},se=o=>o.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),ae=o=>{if(o==null||o==="")return"Not provided";if(typeof o=="boolean")return o?"Yes":"No";if(Array.isArray(o))return o.join(", ");if(typeof o=="object")return JSON.stringify(o);if(typeof o=="string"&&/^\d{4}-\d{2}-\d{2}/.test(o))try{return new Date(o).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(t){return o}return o},oe=()=>{v.push({name:"Dashboard"})},re=o=>{if(!o)return"Not scheduled";try{return new Date(o).toLocaleString("en-NZ",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return o}},z=o=>o?new Date(o).toLocaleDateString("en-NZ",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ne=()=>{S.value.click()},le=o=>B(this,null,function*(){const t=Array.from(o.target.files);if(t.length!==0){k.value=!0;try{for(const f of t){const g=new FormData;g.append("file",f),g.append("doctype","Request"),g.append("docname",a.data.name),g.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:g})}alert(`${t.length} document(s) uploaded successfully!`),a.reload(),o.target.value=""}catch(f){console.error("Error uploading file:",f),alert("Failed to upload document. Please try again.")}finally{k.value=!1}}}),ie=()=>{_.value=!0},de=()=>{a.reload()},ue=()=>{window.print()},me=()=>{if(!a.data){alert("Error: Request data not loaded");return}if(!a.data.request_type){alert("Error: Request type missing");return}const o=`/request/new?type=${encodeURIComponent(a.data.request_type)}&draft=${encodeURIComponent(a.data.name)}`;v.push(o)},ce=()=>B(this,null,function*(){if(confirm("Are you sure you want to delete this draft application? This action cannot be undone.")){w.value=!0;try{yield fetch("/api/method/frappe.client.delete",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({doctype:"Request",name:a.data.name})}),alert("Draft deleted successfully"),v.push({name:"Dashboard"})}catch(o){console.error("Error deleting draft:",o),alert("Failed to delete draft. Please try again.")}finally{w.value=!1}}}),pe=()=>B(this,null,function*(){if(confirm("Are you sure you want to submit this application? Once submitted, it cannot be edited.")){h.value=!0;try{const t=yield(yield fetch("/api/method/lodgeick.lodgeick.doctype.request.request.submit_application",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:a.data.name})})).json();if(t.message&&t.message.success)alert(`Application submitted successfully! Request Number: ${t.message.request_number}`),a.reload();else throw new Error("Failed to submit application")}catch(o){console.error("Error submitting application:",o),alert("Failed to submit application. Please try again.")}finally{h.value=!1}}}),ge=()=>{alert(`Payment feature - Coming soon!

You will receive an invoice via email.`)},ye=()=>{m.value=!0},fe=o=>B(this,null,function*(){alert(`Meeting request submitted successfully!

Meeting ID: ${o.meeting_id}
Status: ${o.status}

A council planner will contact you within 2 business days.`),yield c.reload()});return(o,t)=>{var f,g,I,H,U,J,X,Y,Z,G;return r(),n("div",ze,[e("header",Oe,[e("div",Ee,[e("div",Ie,[e("div",He,[e("button",{onClick:oe,class:"text-gray-600 hover:text-gray-900"},[...t[2]||(t[2]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),e("div",null,[e("h1",Ue,l(((f=s(a).data)==null?void 0:f.request_number)||"Loading..."),1),e("p",Je,l((g=s(a).data)==null?void 0:g.request_type),1)])]),e("div",Xe,[s(a).data?(r(),$(W,{key:0,status:s(a).data.status},null,8,["status"])):d("",!0),((I=s(a).data)==null?void 0:I.status)==="Draft"?(r(),$(s(N),{key:1,onClick:pe,variant:"solid",theme:"blue",loading:h.value},{default:x(()=>[...t[3]||(t[3]=[q(" Submit Application ",-1)])]),_:1},8,["loading"])):d("",!0)])])])]),e("input",{ref_key:"fileInput",ref:S,type:"file",multiple:"",class:"hidden",onChange:le},null,544),s(a).loading?(r(),n("div",Ye,[...t[4]||(t[4]=[e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e("p",{class:"mt-4 text-gray-500"},"Loading request details...")],-1)])])):s(a).data?(r(),n("div",Ze,[e("div",Ge,[e("div",Ke,[e("div",Qe,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Application Overview",-1)),e("div",We,[e("div",null,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-gray-500"},"Request Number",-1)),e("p",et,l(s(a).data.request_number),1)]),e("div",null,[t[6]||(t[6]=e("label",{class:"text-sm font-medium text-gray-500"},"Type",-1)),e("p",tt,l(s(a).data.request_type),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("div",st,[A(W,{status:s(a).data.status},null,8,["status"])])]),e("div",null,[t[8]||(t[8]=e("label",{class:"text-sm font-medium text-gray-500"},"Submitted Date",-1)),e("p",at,l(z(s(a).data.creation)),1)])]),e("div",ot,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Brief Description",-1)),e("p",rt,l(s(a).data.brief_description||"N/A"),1)]),e("div",nt,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Detailed Description",-1)),e("div",{class:"mt-1 text-sm text-gray-900 prose prose-sm max-w-none",innerHTML:s(a).data.detailed_description||"N/A"},null,8,lt)])]),y.value?(r(),n("div",it,[t[14]||(t[14]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Property Information",-1)),e("div",dt,[s(a).data.property_address?(r(),n("div",ut,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",mt,l(s(a).data.property_address),1)])):d("",!0),s(a).data.legal_description?(r(),n("div",ct,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Legal Description",-1)),e("p",pt,l(s(a).data.legal_description),1)])):d("",!0)])])):d("",!0),e("div",gt,[t[20]||(t[20]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Applicant Information",-1)),e("div",yt,[e("div",null,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-gray-500"},"Name",-1)),e("p",ft,l(s(a).data.requester_name||"N/A"),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("p",xt,l(s(a).data.requester_email||"N/A"),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),e("p",bt,l(s(a).data.requester_phone||"N/A"),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",_t,l(s(a).data.applicant_address||"N/A"),1)]),s(a).data.applicant_company?(r(),n("div",vt,[t[19]||(t[19]=e("label",{class:"text-sm font-medium text-gray-500"},"Company/Organization",-1)),e("p",ht,l(s(a).data.applicant_company),1)])):d("",!0)])]),(H=s(p).data)!=null&&H.collect_payment?(r(),n("div",wt,[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Delivery & Payment Preferences",-1)),e("div",kt,[s(a).data.delivery_preference?(r(),n("div",Ct,[t[21]||(t[21]=e("label",{class:"text-sm font-medium text-gray-500"},"Delivery Preference",-1)),e("p",Mt,l(s(a).data.delivery_preference),1)])):d("",!0),s(a).data.invoice_to?(r(),n("div",qt,[t[22]||(t[22]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice To",-1)),e("p",jt,l(s(a).data.invoice_to),1)])):d("",!0),s(a).data.invoice_recipient_name?(r(),n("div",St,[t[23]||(t[23]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice Recipient Name",-1)),e("p",Dt,l(s(a).data.invoice_recipient_name),1)])):d("",!0),s(a).data.invoice_recipient_email?(r(),n("div",Pt,[t[24]||(t[24]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice Recipient Email",-1)),e("p",Nt,l(s(a).data.invoice_recipient_email),1)])):d("",!0),s(a).data.purchase_order_number?(r(),n("div",At,[t[25]||(t[25]=e("label",{class:"text-sm font-medium text-gray-500"},"Purchase Order Number",-1)),e("p",Bt,l(s(a).data.purchase_order_number),1)])):d("",!0)])])):d("",!0),(U=s(p).data)!=null&&U.council_meeting_available?(r(),n("div",Ft,[e("div",Vt,[t[27]||(t[27]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Council Meeting"),e("p",{class:"text-sm text-gray-600 mt-1"}," Schedule a meeting with council planners to discuss your application ")],-1)),s(c).data&&s(c).data.length>0?(r(),n("span",{key:0,class:T(["px-3 py-1 rounded-full text-sm font-medium",{"bg-yellow-100 text-yellow-800":s(c).data[0].status==="Requested","bg-blue-100 text-blue-800":s(c).data[0].status==="Scheduled","bg-green-100 text-green-800":s(c).data[0].status==="Completed","bg-gray-100 text-gray-800":s(c).data[0].status==="Cancelled"}])},l(s(c).data[0].status),3)):d("",!0)]),s(c).data&&s(c).data.length>0?(r(),n("div",$t,[(r(!0),n(F,null,V(s(c).data,i=>(r(),n("div",{key:i.name,class:"border-l-4 border-blue-500 bg-blue-50 p-4 rounded"},[e("div",Tt,[e("div",null,[t[28]||(t[28]=e("span",{class:"font-medium text-gray-700"},"Type:",-1)),e("span",Rt,l(i.meeting_type),1)]),e("div",null,[t[29]||(t[29]=e("span",{class:"font-medium text-gray-700"},"Status:",-1)),e("span",Lt,l(i.status),1)]),i.scheduled_start?(r(),n("div",zt,[t[30]||(t[30]=e("span",{class:"font-medium text-gray-700"},"Scheduled:",-1)),e("span",Ot,l(re(i.scheduled_start)),1)])):d("",!0),i.meeting_format?(r(),n("div",Et,[t[31]||(t[31]=e("span",{class:"font-medium text-gray-700"},"Format:",-1)),e("span",It,l(i.meeting_format),1)])):d("",!0),i.meeting_location?(r(),n("div",Ht,[t[32]||(t[32]=e("span",{class:"font-medium text-gray-700"},"Location:",-1)),e("span",Ut,l(i.meeting_location),1)])):d("",!0),i.google_meet_link?(r(),n("div",Jt,[t[33]||(t[33]=e("span",{class:"font-medium text-gray-700"},"Meeting Link:",-1)),e("a",{href:i.google_meet_link,target:"_blank",class:"ml-2 text-blue-600 hover:underline"},"Join Meeting",8,Xt)])):d("",!0)]),i.meeting_purpose?(r(),n("div",Yt,[t[34]||(t[34]=e("span",{class:"font-medium text-gray-700 text-sm"},"Purpose:",-1)),e("p",Zt,l(i.meeting_purpose),1)])):d("",!0)]))),128))])):(r(),n("div",Gt,[t[35]||(t[35]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t[36]||(t[36]=e("p",{class:"text-sm text-gray-600 mb-4"}," No meeting scheduled yet. Book a meeting to discuss your application with council planners. ",-1)),e("button",{onClick:ye,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Request Council Meeting ")]))])):d("",!0),u.value.length>0?(r(!0),n(F,{key:3},V(u.value,i=>(r(),n("div",{key:i.step_code,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},[e("h2",Kt,l(i.step_title),1),e("div",Qt,[(r(!0),n(F,null,V(i.sections.filter(M=>M.show_on_review),M=>(r(),n("div",{key:M.section_code},[M.section_title?(r(),n("h3",Wt,l(M.section_title),1)):d("",!0),e("div",es,[(r(!0),n(F,null,V(M.fields.filter(P=>P.show_on_review),P=>(r(),n("div",{key:P.field_name,class:"border-b border-gray-100 pb-3"},[e("label",ts,l(P.review_label||P.field_label),1),e("p",ss,l(te(P,s(a).data[P.field_name])),1)]))),128))])]))),128)),ee(i)?d("",!0):(r(),n("p",as," No information to display "))])]))),128)):C.value&&Object.keys(C.value).length>0?(r(),n("div",os,[t[37]||(t[37]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Application Details",-1)),e("div",rs,[(r(!0),n(F,null,V(C.value,(i,M)=>(r(),n("div",{key:M,class:"border-b border-gray-100 pb-3"},[e("label",ns,l(se(M)),1),e("p",ls,l(ae(i)),1)]))),128))])])):d("",!0),(J=s(p).data)!=null&&J.collect_payment?(r(),n("div",is,[e("div",ds,[t[38]||(t[38]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Fees & Payments",-1)),e("span",{class:T(["text-sm font-medium",s(a).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},l(s(a).data.payment_status||"Unpaid"),3)]),e("div",us,[e("div",ms,[t[39]||(t[39]=e("span",{class:"text-sm text-gray-600"},"Total Fees",-1)),e("span",cs,"$"+l((s(a).data.total_fees||0).toFixed(2)),1)]),e("div",ps,[t[40]||(t[40]=e("span",{class:"text-sm text-gray-600"},"Total Paid",-1)),e("span",gs,"$"+l((s(a).data.total_paid||0).toFixed(2)),1)]),e("div",ys,[t[41]||(t[41]=e("span",{class:"text-sm font-medium text-gray-900"},"Outstanding",-1)),e("span",fs,"$"+l(((s(a).data.total_fees||0)-(s(a).data.total_paid||0)).toFixed(2)),1)])]),(s(a).data.total_fees||0)>(s(a).data.total_paid||0)?(r(),$(s(N),{key:0,onClick:ge,variant:"solid",theme:"blue",class:"w-full mt-4"},{default:x(()=>[...t[42]||(t[42]=[q(" Make Payment ",-1)])]),_:1})):d("",!0)])):d("",!0),(X=s(p).data)!=null&&X.make_payment?(r(),n("div",xs,[e("div",bs,[t[43]||(t[43]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Payment to be Received",-1)),e("span",{class:T(["text-sm font-medium",s(a).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},l(s(a).data.payment_status||"Pending"),3)]),t[47]||(t[47]=Q('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mt-0.5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="flex-1"><p class="text-sm font-medium text-blue-900">Benefit Payment Information</p><p class="text-sm text-blue-700 mt-1"> Once your application is approved, you will receive payment from the council. Please ensure your bank details are up to date. </p></div></div></div>',1)),e("div",_s,[e("div",vs,[t[44]||(t[44]=e("span",{class:"text-sm text-gray-600"},"Benefit Amount",-1)),e("span",hs," $"+l((Y=s(p).data)!=null&&Y.base_fee?s(p).data.base_fee.toFixed(2):"0.00"),1)]),e("div",ws,[t[45]||(t[45]=e("span",{class:"text-sm text-gray-600"},"Payment Status",-1)),e("span",{class:T(["text-sm font-semibold",s(a).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},l(s(a).data.payment_status||"Pending Approval"),3)]),s(a).data.selected_bank_account?(r(),n("div",ks,[...t[46]||(t[46]=[e("span",{class:"text-sm text-gray-600"},"Payment Method",-1),e("span",{class:"text-sm font-medium text-gray-900"},"Bank Transfer",-1)])])):d("",!0)])])):d("",!0),e("div",Cs,[e("div",Ms,[t[50]||(t[50]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Documents",-1)),A(s(N),{onClick:ne,variant:"outline",size:"sm",loading:k.value},{prefix:x(()=>[...t[48]||(t[48]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)])]),default:x(()=>[t[49]||(t[49]=q(" Upload Document ",-1))]),_:1},8,["loading"])]),!s(a).data.attachments||s(a).data.attachments.length===0?(r(),n("div",qs,[...t[51]||(t[51]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No documents uploaded yet",-1)])])):d("",!0)])]),e("div",js,[e("div",Ss,[t[57]||(t[57]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Processing Timeline",-1)),s(D).statutory_clock_started?(r(),n("div",Ds,[e("div",Ps,[t[52]||(t[52]=e("span",{class:"text-sm font-medium text-blue-900"},"Statutory Clock",-1)),e("span",Ns,l(s(D).working_days_elapsed)+" of 20 days",1)]),e("div",As,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Ce({width:`${s(O)}%`})},null,4)]),e("p",Bs,l(s(D).statutory_clock_stopped?"Clock stopped (RFI issued)":`${s(D).working_days_remaining} days remaining`),1)])):d("",!0),e("div",Fs,[e("div",Vs,[t[54]||(t[54]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1)),e("div",$s,[t[53]||(t[53]=e("p",{class:"text-sm font-medium text-gray-900"},"Application Created",-1)),e("p",Ts,l(z(s(a).data.creation)),1)])]),s(a).data.modified!==s(a).data.creation?(r(),n("div",Rs,[t[56]||(t[56]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})])],-1)),e("div",Ls,[t[55]||(t[55]=e("p",{class:"text-sm font-medium text-gray-900"},"Last Updated",-1)),e("p",zs,l(z(s(a).data.modified)),1)])])):d("",!0)])]),s(c).data&&s(c).data.length>0?(r(),n("div",Os,[t[60]||(t[60]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Council Meetings",-1)),e("div",Es,[(r(!0),n(F,null,V(s(c).data,i=>(r(),n("div",{key:i.name,class:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",Is,[e("span",Hs,l(i.meeting_type),1),e("span",{class:T(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",{"bg-yellow-100 text-yellow-800":i.status==="Requested","bg-blue-100 text-blue-800":i.status==="Scheduled","bg-green-100 text-green-800":i.status==="Confirmed"||i.status==="Completed","bg-orange-100 text-orange-800":i.status==="Rescheduled","bg-red-100 text-red-800":i.status==="Cancelled"}])},l(i.status),3)]),i.scheduled_start?(r(),n("div",Us,[t[58]||(t[58]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),q(" "+l(z(i.scheduled_start)),1)])):d("",!0),i.meeting_format?(r(),n("div",Js,[t[59]||(t[59]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),q(" "+l(i.meeting_format),1)])):d("",!0),i.meeting_location?(r(),n("div",Xs,l(i.meeting_location),1)):d("",!0),i.meeting_purpose?(r(),n("div",Ys,l(i.meeting_purpose),1)):d("",!0)]))),128))])])):d("",!0),e("div",Zs,[t[69]||(t[69]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",Gs,[s(a).data.status==="Draft"?(r(),$(s(N),{key:0,onClick:me,variant:"solid",theme:"blue",class:"w-full justify-start"},{prefix:x(()=>[...t[61]||(t[61]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),default:x(()=>[t[62]||(t[62]=q(" Edit Draft ",-1))]),_:1})):d("",!0),A(s(N),{onClick:ie,variant:"outline",class:"w-full justify-start"},{prefix:x(()=>[...t[63]||(t[63]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)])]),default:x(()=>[t[64]||(t[64]=q(" Send Message ",-1))]),_:1}),A(s(N),{onClick:ue,variant:"outline",class:"w-full justify-start"},{prefix:x(()=>[...t[65]||(t[65]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)])]),default:x(()=>[t[66]||(t[66]=q(" Print Application ",-1))]),_:1}),s(a).data.status==="Draft"?(r(),$(s(N),{key:1,onClick:ce,variant:"outline",class:"w-full justify-start text-red-600 hover:text-red-700",loading:w.value},{prefix:x(()=>[...t[67]||(t[67]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 1 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),default:x(()=>[t[68]||(t[68]=q(" Delete Draft ",-1))]),_:1},8,["loading"])):d("",!0)])]),t[70]||(t[70]=Q('<div class="bg-blue-50 rounded-lg border border-blue-200 p-6"><h3 class="text-sm font-semibold text-blue-900 mb-3">Need Help?</h3><p class="text-xs text-blue-800 mb-4">Contact our planning team for assistance with your application.</p><div class="space-y-2 text-xs text-blue-900"><div class="flex items-center space-x-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg><span>consents@council.govt.nz</span></div><div class="flex items-center space-x-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg><span>0800 LODGEICK</span></div></div></div>',1))])])])):d("",!0),A(Le,{show:_.value,"onUpdate:show":t[0]||(t[0]=i=>_.value=i),"request-id":s(j).params.id,onSent:de},null,8,["show","request-id"]),A(Me,{show:m.value,"onUpdate:show":t[1]||(t[1]=i=>m.value=i),"request-id":s(j).params.id,"request-type-code":(Z=s(p).data)==null?void 0:Z.type_code,"council-code":(G=s(a).data)==null?void 0:G.council,onBooked:fe},null,8,["show","request-id","request-type-code","council-code"])])}}};export{sa as default};
//# sourceMappingURL=RequestDetail-E5Uyv4WK.js.map
