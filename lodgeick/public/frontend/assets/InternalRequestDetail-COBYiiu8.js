import{f as J,a7 as P,k as V,r as w,j as y,c as n,o as i,a as t,d as g,u as s,t as o,b as d,w as r,i as u,h as m,Z as _,F as k,m as C,g as H,a2 as O}from"./index-DrbLzKHY.js";import{D as z}from"./Dropdown-CJJ9X1-V.js";import{_ as L}from"./StatusBadge-D7kQVwg9.js";import{u as U}from"./useStatutoryClock-BgXLZ-qZ.js";const E={class:"min-h-screen bg-gray-50"},Z={class:"bg-white shadow-sm border-b border-gray-200"},G={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Q={class:"flex items-center justify-between"},W={class:"flex items-center space-x-3"},K={key:0},X={class:"text-xl font-bold text-gray-900"},Y={class:"text-sm text-gray-500"},tt={key:0,class:"flex items-center space-x-3"},et={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 text-center"},st={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ot={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},at={class:"lg:col-span-2 space-y-6"},lt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},nt={class:"grid grid-cols-2 gap-4"},it={class:"mt-1 text-sm font-medium text-gray-900"},rt={class:"text-xs text-gray-500"},dt={class:"mt-1 text-sm font-medium text-gray-900"},ct={class:"mt-1 text-sm font-medium text-gray-900"},ut={class:"mt-4 pt-4 border-t border-gray-200"},mt={class:"text-sm text-gray-900"},pt={class:"bg-white rounded-lg shadow-sm border border-gray-200"},gt={class:"p-6 border-b border-gray-200 flex justify-between items-center"},xt={class:"p-6"},yt={class:"space-y-4"},_t=["checked"],ft={class:"flex-1"},bt={class:"text-sm font-medium text-gray-900"},ht={class:"mt-1 flex items-center space-x-4 text-xs text-gray-500"},vt={key:0},wt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},kt={class:"space-y-3"},Ct={class:"flex justify-between items-center"},At={class:"text-sm font-medium text-gray-900"},St={class:"flex justify-between items-center"},jt={class:"text-sm font-medium text-gray-900"},Dt={class:"flex justify-between items-center"},Rt={class:"text-sm text-gray-600"},Tt={class:"text-sm font-medium text-gray-900"},qt={class:"pt-3 border-t border-gray-200 flex justify-between items-center"},Ft={class:"text-base font-bold text-green-600"},$t={class:"space-y-6"},Mt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Bt={key:0,class:"mb-6"},It={class:"flex items-center justify-between mb-2"},Nt={class:"text-xs text-gray-600"},Jt={class:"w-full bg-gray-200 rounded-full h-2"},Pt={class:"mt-2 text-xs text-gray-500"},Vt={class:"space-y-3"},Ht={class:"flex-1 min-w-0"},Ot={class:"text-sm font-medium text-gray-900"},zt={class:"text-xs text-gray-500"},Lt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ut={class:"space-y-2"},Kt={__name:"InternalRequestDetail",setup(Et){const A=J(),S=P(),a=V({url:"frappe.client.get",params:{doctype:"Request",name:S.params.id},auto:!0}),{clockData:p,progressPercent:j,isOverdue:f}=U(a),b=w([{id:1,title:"Review application documents",assignee:"John Smith",hours:2,cost:300,completed:!0},{id:2,title:"Site inspection",assignee:"Jane Doe",hours:4,cost:600,completed:!1},{id:3,title:"Prepare decision report",assignee:"John Smith",hours:3,cost:450,completed:!1}]),D=w([{title:"Application Submitted",date:"10 Oct 2025",color:"bg-blue-500"},{title:"Assigned to John Smith",date:"11 Oct 2025",color:"bg-green-500"},{title:"Under Review",date:"12 Oct 2025",color:"bg-yellow-500"}]),h=y(()=>b.value.reduce((c,e)=>c+e.hours,0)),v=y(()=>h.value*150),R=y(()=>{var l,x;const c=parseFloat(((l=a.data)==null?void 0:l.application_fee)||0),e=parseFloat(((x=a.data)==null?void 0:x.additional_charges)||0);return c+e+v.value}),T=()=>{A.push({name:"InternalRequestManagement"})},q=c=>c?new Date(c).toLocaleDateString("en-NZ",{day:"numeric",month:"short",year:"numeric"}):"N/A",F=()=>{console.log("Add task")},$=()=>{console.log("Add charge")},M=()=>{console.log("Issue RFI")},B=()=>{console.log("Approve request")},I=()=>{console.log("Decline request")},N=[{label:"Send Message",onClick:()=>console.log("Message")},{label:"Generate Report",onClick:()=>console.log("Report")},{label:"View History",onClick:()=>console.log("History")}];return(c,e)=>(i(),n("div",E,[t("header",Z,[t("div",G,[t("div",Q,[t("div",W,[t("button",{onClick:T,class:"text-gray-500 hover:text-gray-700"},[...e[0]||(e[0]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),s(a).data?(i(),n("div",K,[t("h1",X,o(s(a).data.request_number),1),t("p",Y,o(s(a).data.request_type),1)])):g("",!0)]),s(a).data?(i(),n("div",tt,[d(L,{status:s(a).data.status},null,8,["status"]),d(s(z),{options:N},{default:r(({open:l})=>[d(s(u),{variant:"outline",theme:"gray"},{suffix:r(()=>[...e[1]||(e[1]=[t("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])]),default:r(()=>[e[2]||(e[2]=m(" Actions ",-1))]),_:1})]),_:1})])):g("",!0)])])]),s(a).loading?(i(),n("div",et,[...e[3]||(e[3]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"},null,-1)])])):s(a).data?(i(),n("div",st,[t("div",ot,[t("div",at,[t("div",lt,[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Request Details",-1)),t("dl",nt,[t("div",null,[e[4]||(e[4]=t("dt",{class:"text-sm text-gray-600"},"Applicant",-1)),t("dd",it,o(s(a).data.applicant_name),1),t("dd",rt,o(s(a).data.applicant_email),1)]),t("div",null,[e[5]||(e[5]=t("dt",{class:"text-sm text-gray-600"},"Property",-1)),t("dd",dt,o(s(a).data.property_address),1)]),t("div",null,[e[6]||(e[6]=t("dt",{class:"text-sm text-gray-600"},"Submitted",-1)),t("dd",ct,o(q(s(a).data.submitted_date)),1)]),t("div",null,[e[7]||(e[7]=t("dt",{class:"text-sm text-gray-600"},"Days Elapsed",-1)),t("dd",{class:_(["mt-1 text-sm font-medium",s(f)?"text-red-600":"text-gray-900"])},o(s(p).working_days_elapsed)+" days ",3)])]),t("div",ut,[e[8]||(e[8]=t("dt",{class:"text-sm text-gray-600 mb-2"},"Description",-1)),t("dd",mt,o(s(a).data.brief_description),1)])]),t("div",pt,[t("div",gt,[e[12]||(e[12]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Tasks & Work",-1)),d(s(u),{onClick:F,variant:"solid",theme:"green",size:"sm"},{prefix:r(()=>[...e[10]||(e[10]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:r(()=>[e[11]||(e[11]=m(" Add Task ",-1))]),_:1})]),t("div",xt,[t("div",yt,[(i(!0),n(k,null,C(b.value,l=>(i(),n("div",{key:l.id,class:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg"},[t("input",{type:"checkbox",checked:l.completed,class:"mt-1 h-5 w-5 text-green-600 rounded"},null,8,_t),t("div",ft,[t("h4",bt,o(l.title),1),t("div",ht,[t("span",null,o(l.assignee),1),t("span",null,o(l.hours)+"h",1),l.cost?(i(),n("span",vt,"$"+o(l.cost),1)):g("",!0)])])]))),128))])])]),t("div",wt,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Costing Summary",-1)),t("div",kt,[t("div",Ct,[e[13]||(e[13]=t("span",{class:"text-sm text-gray-600"},"Application Fee",-1)),t("span",At,"$"+o(s(a).data.application_fee||0),1)]),t("div",St,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-600"},"Additional Charges",-1)),t("span",jt,"$"+o(s(a).data.additional_charges||0),1)]),t("div",Dt,[t("span",Rt,"Staff Time ("+o(h.value)+"h @ $150/h)",1),t("span",Tt,"$"+o(v.value),1)]),t("div",qt,[e[15]||(e[15]=t("span",{class:"text-base font-semibold text-gray-900"},"Total Cost",-1)),t("span",Ft,"$"+o(R.value),1)])]),d(s(u),{onClick:$,variant:"outline",theme:"green",class:"w-full mt-4"},{default:r(()=>[...e[16]||(e[16]=[m(" Add Additional Charge ",-1)])]),_:1})])]),t("div",$t,[e[25]||(e[25]=H('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><h3 class="text-sm font-semibold text-gray-900 mb-4">Assignment</h3><div class="space-y-3"><div><label class="block text-xs font-medium text-gray-700 mb-2">Assigned To</label><select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"><option value="">Unassigned</option><option value="planner1">John Smith (Planner)</option><option value="planner2">Jane Doe (Planner)</option></select></div><div><label class="block text-xs font-medium text-gray-700 mb-2">Priority</label><select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"><option value="low">Low</option><option value="medium">Medium</option><option value="high">High</option><option value="urgent">Urgent</option></select></div></div></div>',1)),t("div",Mt,[e[20]||(e[20]=t("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Timeline",-1)),s(p).statutory_clock_started?(i(),n("div",Bt,[t("div",It,[e[18]||(e[18]=t("span",{class:"text-xs font-medium text-gray-700"},"Statutory Clock",-1)),t("span",Nt,o(s(p).working_days_elapsed)+" / "+o(s(a).data.statutory_timeframe||20)+" days ",1)]),t("div",Jt,[t("div",{class:_(["h-2 rounded-full transition-all",s(f)?"bg-red-600":"bg-green-600"]),style:O({width:`${s(j)}%`})},null,6)]),t("p",Pt,o(s(p).working_days_remaining)+" days remaining "+o(s(p).statutory_clock_stopped?"(Clock stopped)":""),1)])):g("",!0),t("div",Vt,[(i(!0),n(k,null,C(D.value,(l,x)=>(i(),n("div",{key:x,class:"flex items-start space-x-3"},[t("div",{class:_(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",l.color])},[...e[19]||(e[19]=[t("div",{class:"w-2 h-2 rounded-full bg-white"},null,-1)])],2),t("div",Ht,[t("p",Ot,o(l.title),1),t("p",zt,o(l.date),1)])]))),128))])]),t("div",Lt,[e[24]||(e[24]=t("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),t("div",Ut,[d(s(u),{onClick:M,variant:"outline",theme:"orange",class:"w-full justify-center"},{default:r(()=>[...e[21]||(e[21]=[m(" Issue RFI ",-1)])]),_:1}),d(s(u),{onClick:B,variant:"outline",theme:"green",class:"w-full justify-center"},{default:r(()=>[...e[22]||(e[22]=[m(" Approve ",-1)])]),_:1}),d(s(u),{onClick:I,variant:"outline",theme:"red",class:"w-full justify-center"},{default:r(()=>[...e[23]||(e[23]=[m(" Decline ",-1)])]),_:1})])])])])])):g("",!0)]))}};export{Kt as default};
//# sourceMappingURL=InternalRequestDetail-COBYiiu8.js.map
