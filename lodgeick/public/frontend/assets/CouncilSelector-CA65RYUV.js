var S=(o,b,c)=>new Promise((y,m)=>{var s=n=>{try{h(c.next(n))}catch(r){m(r)}},f=n=>{try{h(c.throw(n))}catch(r){m(r)}},h=n=>n.done?y(n.value):Promise.resolve(n.value).then(s,f);h((c=c.apply(o,b)).next())});import{e as F,aa as D,r as I,j as g,R as N,q as $,c as e,o as t,d as i,a,h as E,t as d,k as R,v as T,F as B,l as V,a2 as q,$ as L}from"./index-BoT-C02g.js";const U={class:"council-selector"},W={key:0,class:"mb-2"},A={class:"text-sm font-medium text-gray-700"},G={key:0,class:"text-red-500"},H={key:0,class:"text-xs text-gray-500 mt-1"},J={key:1,class:"animate-pulse"},K={key:2,class:"text-sm text-red-600"},O={key:3,class:"space-y-3"},P=["disabled","required"],Q={value:""},X=["value"],Y={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Z=["onClick","disabled"],ee={class:"flex items-start space-x-3"},te={key:0,class:"w-12 h-12 flex-shrink-0 rounded overflow-hidden"},le=["src","alt"],oe={class:"flex-1 min-w-0"},se={class:"flex items-center justify-between"},ae={key:0,class:"ml-2"},de={key:0,class:"text-xs text-gray-500 truncate mt-1"},ne={key:1,class:"mt-2"},ie={key:2,class:"mt-2"},ce={key:4,class:"mt-4 p-3 bg-gray-50 rounded-lg border border-gray-200"},re={class:"flex items-start space-x-3"},ue={class:"flex-1"},ve={class:"font-medium text-gray-900"},me={key:0,class:"text-xs text-gray-600 mt-1"},fe={__name:"CouncilSelector",props:{modelValue:{type:String,default:null},label:{type:String,default:"Select Council"},description:{type:String,default:""},placeholder:{type:String,default:"Choose a council..."},displayMode:{type:String,default:"dropdown",validator:o=>["dropdown","cards"].includes(o)},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!1},showSelectedInfo:{type:Boolean,default:!1},autoLoad:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(o,{emit:b}){const c=o,y=b,m=D(),s=I(c.modelValue),f=g(()=>m.activeCouncils),h=g(()=>m.loading),n=g(()=>m.error),r=g(()=>s.value?f.value.find(u=>u.council_code===s.value):null),M=u=>u.replace(/^https?:\/\/(www\.)?/,""),j=u=>{c.disabled||(s.value=u,_())},_=()=>{y("update:modelValue",s.value),y("change",s.value)},z=()=>{s.value=null,_()};return N(()=>c.modelValue,u=>{s.value=u}),$(()=>S(this,null,function*(){c.autoLoad&&f.value.length===0&&(yield m.loadCouncils())})),(u,v)=>{var x,p,w,k,C;return t(),e("div",U,[o.showLabel?(t(),e("div",W,[a("label",A,[E(d(o.label)+" ",1),o.required?(t(),e("span",G,"*")):i("",!0)]),o.description?(t(),e("p",H,d(o.description),1)):i("",!0)])):i("",!0),h.value?(t(),e("div",J,[...v[1]||(v[1]=[a("div",{class:"h-10 bg-gray-200 rounded"},null,-1)])])):n.value?(t(),e("div",K,d(n.value),1)):(t(),e("div",O,[o.displayMode==="dropdown"?R((t(),e("select",{key:0,"onUpdate:modelValue":v[0]||(v[0]=l=>s.value=l),onChange:_,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o.disabled,required:o.required},[a("option",Q,d(o.placeholder),1),(t(!0),e(B,null,V(f.value,l=>(t(),e("option",{key:l.council_code,value:l.council_code},d(l.council_name),9,X))),128))],40,P)),[[T,s.value]]):o.displayMode==="cards"?(t(),e("div",Y,[(t(!0),e(B,null,V(f.value,l=>(t(),e("button",{key:l.council_code,onClick:he=>j(l.council_code),disabled:o.disabled,class:q(["p-4 border-2 rounded-lg text-left transition-all relative",[s.value===l.council_code?"border-blue-600 bg-blue-50 ring-2 ring-blue-500 ring-offset-2 shadow-lg":"border-gray-200 hover:border-blue-300 hover:shadow-md"]])},[a("div",ee,[l.logo?(t(),e("div",te,[a("img",{src:l.logo,alt:l.council_name,class:"w-full h-full object-contain"},null,8,le)])):(t(),e("div",{key:1,class:"w-12 h-12 flex-shrink-0 rounded flex items-center justify-center text-white font-bold text-lg",style:L({backgroundColor:l.primary_color||"#3B82F6"})},d(l.council_code),5)),a("div",oe,[a("div",se,[a("h3",{class:q(["font-semibold truncate",s.value===l.council_code?"text-blue-900":"text-gray-900"])},d(l.council_name),3),s.value===l.council_code?(t(),e("div",ae,[...v[2]||(v[2]=[a("svg",{class:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):i("",!0)]),l.website?(t(),e("p",de,d(M(l.website)),1)):i("",!0),s.value===l.council_code?(t(),e("div",ne,[...v[3]||(v[3]=[a("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"}," Selected ",-1)])])):i("",!0)])])],10,Z))),128))])):i("",!0),o.showClearButton&&s.value?(t(),e("div",ie,[a("button",{onClick:z,type:"button",class:"text-sm text-gray-600 hover:text-gray-800 underline"}," Clear selection ")])):i("",!0)])),s.value&&o.showSelectedInfo?(t(),e("div",ce,[a("div",re,[a("div",{class:"w-10 h-10 flex-shrink-0 rounded flex items-center justify-center text-white font-bold",style:L({backgroundColor:((x=r.value)==null?void 0:x.primary_color)||"#3B82F6"})},d((p=r.value)==null?void 0:p.council_code),5),a("div",ue,[a("h4",ve,d((w=r.value)==null?void 0:w.council_name),1),(k=r.value)!=null&&k.contact_email?(t(),e("p",me,d((C=r.value)==null?void 0:C.contact_email),1)):i("",!0)])])])):i("",!0)])}}},be=F(fe,[["__scopeId","data-v-0b335b0c"]]);export{be as C};
//# sourceMappingURL=CouncilSelector-CA65RYUV.js.map
