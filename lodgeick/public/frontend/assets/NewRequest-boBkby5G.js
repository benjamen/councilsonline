var Ge=Object.defineProperty,We=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var Pe=(t,r,d)=>r in t?Ge(t,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[r]=d,Y=(t,r)=>{for(var d in r||(r={}))Be.call(r,d)&&Pe(t,d,r[d]);if(ve)for(var d of ve(r))Ie.call(r,d)&&Pe(t,d,r[d]);return t},$e=(t,r)=>We(t,Je(r));var se=(t,r)=>{var d={};for(var n in t)Be.call(t,n)&&r.indexOf(n)<0&&(d[n]=t[n]);if(t!=null&&ve)for(var n of ve(t))r.indexOf(n)<0&&Ie.call(t,n)&&(d[n]=t[n]);return d};var N=(t,r,d)=>new Promise((n,a)=>{var b=p=>{try{m(d.next(p))}catch(g){a(g)}},c=p=>{try{m(d.throw(p))}catch(g){a(g)}},m=p=>p.done?n(p.value):Promise.resolve(p.value).then(b,c);m((d=d.apply(t,r)).next())});import{r as P,q as Z,x as qe,y as R,z as X,j as $,A as Se,B as te,C as he,E as Ye,G as _e,H as we,J as Ke,K as ae,L as de,M as H,N as ke,O as Ce,P as Qe,Q as Ae,R as ce,S as ue,T as Ze,F as O,U as ge,V as Xe,W as et,X as le,Y as K,Z as tt,c as i,o,a as e,$ as ze,t as f,a0 as L,d as v,w as A,h as M,u as V,i as oe,a1 as je,f as De,D as Ne,l as G,b as z,a2 as j,g as ne,s as st,e as me,a3 as lt,m as ot,a4 as at,k as J,v as xe,a5 as ee,a6 as Fe,a7 as nt,a8 as rt,a9 as it,aa as ut}from"./index-DWx27wDU.js";import{r as ye}from"./request.service-BDj7ptlU.js";import{_ as dt}from"./BookMeetingModal-BPWFWqT7.js";import{C as ct}from"./CouncilSelector-BLBFrbCd.js";function Re(t,r){if(t)return t;let d=r!=null?r:"button";if(typeof d=="string"&&d.toLowerCase()==="button")return"button"}function Le(t,r){let d=P(Re(t.value.type,t.value.as));return Z(()=>{d.value=Re(t.value.type,t.value.as)}),qe(()=>{var n;d.value||R(r)&&R(r)instanceof HTMLButtonElement&&!((n=R(r))!=null&&n.hasAttribute("type"))&&(d.value="button")}),d}var mt=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(mt||{});let Ee=Symbol("DisclosureContext");function Te(t){let r=de(Ee,null);if(r===null){let d=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,Te),d}return r}let Oe=Symbol("DisclosurePanelContext");function pt(){return de(Oe,null)}let ft=X({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(t,{slots:r,attrs:d}){let n=P(t.defaultOpen?0:1),a=P(null),b=P(null),c={buttonId:P(`headlessui-disclosure-button-${we()}`),panelId:P(`headlessui-disclosure-panel-${we()}`),disclosureState:n,panel:a,button:b,toggleDisclosure(){n.value=ae(n.value,{0:1,1:0})},closeDisclosure(){n.value!==1&&(n.value=1)},close(m){c.closeDisclosure();let p=m?m instanceof HTMLElement?m:m.value instanceof HTMLElement?R(m):R(c.button):R(c.button);p==null||p.focus()}};return he(Ee,c),Ke($(()=>ae(n.value,{0:_e.Open,1:_e.Closed}))),()=>{let x=t,{defaultOpen:m}=x,p=se(x,["defaultOpen"]),g={open:n.value===0,close:c.close};return te({theirProps:p,ourProps:{},slot:g,slots:r,attrs:d,name:"Disclosure"})}}}),vt=X({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:d,expose:n}){let a=Te("DisclosureButton"),b=pt(),c=$(()=>b===null?!1:b.value===a.panelId.value);Z(()=>{c.value||t.id!==null&&(a.buttonId.value=t.id)}),Se(()=>{c.value||(a.buttonId.value=null)});let m=P(null);n({el:m,$el:m}),c.value||qe(()=>{a.button.value=m.value});let p=Le($(()=>({as:t.as,type:r.type})),m);function g(){var k;t.disabled||(c.value?(a.toggleDisclosure(),(k=R(a.button))==null||k.focus()):a.toggleDisclosure())}function x(k){var D;if(!t.disabled)if(c.value)switch(k.key){case H.Space:case H.Enter:k.preventDefault(),k.stopPropagation(),a.toggleDisclosure(),(D=R(a.button))==null||D.focus();break}else switch(k.key){case H.Space:case H.Enter:k.preventDefault(),k.stopPropagation(),a.toggleDisclosure();break}}function h(k){switch(k.key){case H.Space:k.preventDefault();break}}return()=>{var k;let D={open:a.disclosureState.value===0},s=t,{id:_}=s,u=se(s,["id"]),l=c.value?{ref:m,type:p.value,onClick:g,onKeydown:x}:{id:(k=a.buttonId.value)!=null?k:_,ref:m,type:p.value,"aria-expanded":a.disclosureState.value===0,"aria-controls":a.disclosureState.value===0||R(a.panel)?a.panelId.value:void 0,disabled:t.disabled?!0:void 0,onClick:g,onKeydown:x,onKeyup:h};return te({ourProps:l,theirProps:u,slot:D,attrs:r,slots:d,name:"DisclosureButton"})}}}),gt=X({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:r,slots:d,expose:n}){let a=Te("DisclosurePanel");Z(()=>{t.id!==null&&(a.panelId.value=t.id)}),Se(()=>{a.panelId.value=null}),n({el:a.panel,$el:a.panel}),he(Oe,a.panelId);let b=Ye(),c=$(()=>b!==null?(b.value&_e.Open)===_e.Open:a.disclosureState.value===0);return()=>{var m;let p={open:a.disclosureState.value===0,close:a.close},k=t,{id:g}=k,x=se(k,["id"]),h={id:(m=a.panelId.value)!=null?m:g,ref:a.panel};return te({ourProps:h,theirProps:x,slot:p,attrs:r,slots:d,features:ke.RenderStrategy|ke.Static,visible:c.value,name:"DisclosurePanel"})}}}),yt=X({props:{onFocus:{type:Function,required:!0}},setup(t){let r=P(!0);return()=>r.value?Ce(Ae,{as:"button",type:"button",features:Qe.Focusable,onFocus(d){d.preventDefault();let n,a=50;function b(){var c;if(a--<=0){n&&cancelAnimationFrame(n);return}if((c=t.onFocus)!=null&&c.call(t)){r.value=!1,cancelAnimationFrame(n);return}n=requestAnimationFrame(b)}n=requestAnimationFrame(b)}}):null}});var bt=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(bt||{}),xt=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(xt||{});let Ue=Symbol("TabsContext");function pe(t){let r=de(Ue,null);if(r===null){let d=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,pe),d}return r}let Me=Symbol("TabsSSRContext"),ht=X({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:r,attrs:d,emit:n}){var a;let b=P((a=t.selectedIndex)!=null?a:t.defaultIndex),c=P([]),m=P([]),p=$(()=>t.selectedIndex!==null),g=$(()=>p.value?t.selectedIndex:b.value);function x(u){var l;let s=ue(h.tabs.value,R),y=ue(h.panels.value,R),T=s.filter(I=>{var E;return!((E=R(I))!=null&&E.hasAttribute("disabled"))});if(u<0||u>s.length-1){let I=ae(b.value===null?0:Math.sign(u-b.value),{[-1]:()=>1,0:()=>ae(Math.sign(u),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),E=ae(I,{0:()=>s.indexOf(T[0]),1:()=>s.indexOf(T[T.length-1])});E!==-1&&(b.value=E),h.tabs.value=s,h.panels.value=y}else{let I=s.slice(0,u),E=[...s.slice(u),...I].find(Q=>T.includes(Q));if(!E)return;let U=(l=s.indexOf(E))!=null?l:h.selectedIndex.value;U===-1&&(U=h.selectedIndex.value),b.value=U,h.tabs.value=s,h.panels.value=y}}let h={selectedIndex:$(()=>{var u,l;return(l=(u=b.value)!=null?u:t.defaultIndex)!=null?l:null}),orientation:$(()=>t.vertical?"vertical":"horizontal"),activation:$(()=>t.manual?"manual":"auto"),tabs:c,panels:m,setSelectedIndex(u){g.value!==u&&n("change",u),p.value||x(u)},registerTab(u){var l;if(c.value.includes(u))return;let s=c.value[b.value];if(c.value.push(u),c.value=ue(c.value,R),!p.value){let y=(l=c.value.indexOf(s))!=null?l:b.value;y!==-1&&(b.value=y)}},unregisterTab(u){let l=c.value.indexOf(u);l!==-1&&c.value.splice(l,1)},registerPanel(u){m.value.includes(u)||(m.value.push(u),m.value=ue(m.value,R))},unregisterPanel(u){let l=m.value.indexOf(u);l!==-1&&m.value.splice(l,1)}};he(Ue,h);let k=P({tabs:[],panels:[]}),D=P(!1);Z(()=>{D.value=!0}),he(Me,$(()=>D.value?null:k.value));let _=$(()=>t.selectedIndex);return Z(()=>{ce([_],()=>{var u;return x((u=t.selectedIndex)!=null?u:t.defaultIndex)},{immediate:!0})}),qe(()=>{if(!p.value||g.value==null||h.tabs.value.length<=0)return;let u=ue(h.tabs.value,R);u.some((l,s)=>R(h.tabs.value[s])!==R(l))&&h.setSelectedIndex(u.findIndex(l=>R(l)===R(h.tabs.value[g.value])))}),()=>{let u={selectedIndex:b.value};return Ce(O,[c.value.length<=0&&Ce(yt,{onFocus:()=>{for(let l of c.value){let s=R(l);if((s==null?void 0:s.tabIndex)===0)return s.focus(),!0}return!1}}),te({theirProps:Y(Y({},d),Ze(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])),ourProps:{},slot:u,slots:r,attrs:d,name:"TabGroup"})])}}}),_t=X({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:r,slots:d}){let n=pe("TabList");return()=>{let a={selectedIndex:n.selectedIndex.value},b={role:"tablist","aria-orientation":n.orientation.value};return te({ourProps:b,theirProps:t,slot:a,attrs:r,slots:d,name:"TabList"})}}}),wt=X({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:d,expose:n}){var a;let b=(a=t.id)!=null?a:`headlessui-tabs-tab-${we()}`,c=pe("Tab"),m=P(null);n({el:m,$el:m}),Z(()=>c.registerTab(m)),Se(()=>c.unregisterTab(m));let p=de(Me),g=$(()=>{if(p.value){let y=p.value.tabs.indexOf(b);return y===-1?p.value.tabs.push(b)-1:y}return-1}),x=$(()=>{let y=c.tabs.value.indexOf(m);return y===-1?g.value:y}),h=$(()=>x.value===c.selectedIndex.value);function k(y){var T;let I=y();if(I===ge.Success&&c.activation.value==="auto"){let E=(T=et(m))==null?void 0:T.activeElement,U=c.tabs.value.findIndex(Q=>R(Q)===E);U!==-1&&c.setSelectedIndex(U)}return I}function D(y){let T=c.tabs.value.map(I=>R(I)).filter(Boolean);if(y.key===H.Space||y.key===H.Enter){y.preventDefault(),y.stopPropagation(),c.setSelectedIndex(x.value);return}switch(y.key){case H.Home:case H.PageUp:return y.preventDefault(),y.stopPropagation(),k(()=>le(T,K.First));case H.End:case H.PageDown:return y.preventDefault(),y.stopPropagation(),k(()=>le(T,K.Last))}if(k(()=>ae(c.orientation.value,{vertical(){return y.key===H.ArrowUp?le(T,K.Previous|K.WrapAround):y.key===H.ArrowDown?le(T,K.Next|K.WrapAround):ge.Error},horizontal(){return y.key===H.ArrowLeft?le(T,K.Previous|K.WrapAround):y.key===H.ArrowRight?le(T,K.Next|K.WrapAround):ge.Error}}))===ge.Success)return y.preventDefault()}let _=P(!1);function u(){var y;_.value||(_.value=!0,!t.disabled&&((y=R(m))==null||y.focus({preventScroll:!0}),c.setSelectedIndex(x.value),Xe(()=>{_.value=!1})))}function l(y){y.preventDefault()}let s=Le($(()=>({as:t.as,type:r.type})),m);return()=>{var y,T;let I={selected:h.value,disabled:(y=t.disabled)!=null?y:!1},E=se(t,[]),U={ref:m,onKeydown:D,onMousedown:l,onClick:u,id:b,role:"tab",type:s.value,"aria-controls":(T=R(c.panels.value[x.value]))==null?void 0:T.id,"aria-selected":h.value,tabIndex:h.value?0:-1,disabled:t.disabled?!0:void 0};return te({ourProps:U,theirProps:E,slot:I,attrs:r,slots:d,name:"Tab"})}}}),kt=X({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:r,attrs:d}){let n=pe("TabPanels");return()=>{let a={selectedIndex:n.selectedIndex.value};return te({theirProps:t,ourProps:{},slot:a,attrs:d,slots:r,name:"TabPanels"})}}}),Ct=X({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(t,{attrs:r,slots:d,expose:n}){var a;let b=(a=t.id)!=null?a:`headlessui-tabs-panel-${we()}`,c=pe("TabPanel"),m=P(null);n({el:m,$el:m}),Z(()=>c.registerPanel(m)),Se(()=>c.unregisterPanel(m));let p=de(Me),g=$(()=>{if(p.value){let k=p.value.panels.indexOf(b);return k===-1?p.value.panels.push(b)-1:k}return-1}),x=$(()=>{let k=c.panels.value.indexOf(m);return k===-1?g.value:k}),h=$(()=>x.value===c.selectedIndex.value);return()=>{var k;let D={selected:h.value},s=t,{tabIndex:_}=s,u=se(s,["tabIndex"]),l={ref:m,id:b,role:"tabpanel","aria-labelledby":(k=R(c.tabs.value[x.value]))==null?void 0:k.id,tabIndex:h.value?_:-1};return!h.value&&t.unmount&&!t.static?Ce(Ae,Y({as:"span","aria-hidden":!0},l)):te({ourProps:l,theirProps:u,slot:D,attrs:r,slots:d,features:ke.Static|ke.RenderStrategy,visible:h.value,name:"TabPanel"})}}});const St=tt("request",{state:()=>({currentRequestId:null,requestTypeCode:null,requestTypeConfig:null,formData:{},currentStep:0,stepValidationStatus:{},isSaving:!1,isSubmitting:!1,lastSaved:null,error:null}),getters:{isFirstStep:t=>t.currentStep===0,totalSteps:t=>{var r;return(r=t.requestTypeConfig)!=null&&r.steps?t.requestTypeConfig.steps.length+4:4},isLastStep:t=>t.currentStep===t.totalSteps-1,currentStepConfig:t=>{var r,d;return(d=(r=t.requestTypeConfig)==null?void 0:r.steps)==null?void 0:d[t.currentStep]},canNavigateNext:t=>t.stepValidationStatus[t.currentStep]===!0,completionPercentage:t=>t.totalSteps===0?0:Math.round((t.currentStep+1)/t.totalSteps*100),hasUnsavedChanges:t=>t.lastSaved?new Date-t.lastSaved>3e4:Object.keys(t.formData).length>0},actions:{nextStep(){this.isLastStep||this.currentStep++},previousStep(){this.isFirstStep||this.currentStep--},goToStep(t){t>=0&&t<this.totalSteps&&(this.currentStep=t)},initialize(t,r=null){return N(this,null,function*(){try{this.requestTypeCode=t,this.error=null,console.log("[RequestStore] initialize called:",{requestTypeCode:t,draftId:r});const d=ye.getRequestTypeConfig(t);yield new Promise(n=>{const a=setInterval(()=>{d.loading||(clearInterval(a),n())},100)}),this.requestTypeConfig=d.data,r&&(yield this.loadDraft(r))}catch(d){console.error("Failed to initialize request:",d),this.error=d.message||"Failed to load request type"}})},loadDraft(t){return N(this,null,function*(){try{const r=ye.getRequest(t);yield new Promise(n=>{const a=setInterval(()=>{r.loading||(clearInterval(a),n())},100)});const d=r.data;if(this.currentRequestId=t,d.draft_full_data)try{this.formData=JSON.parse(d.draft_full_data)}catch(n){console.error("Failed to parse draft_full_data:",n),this.formData=d.form_data||{}}else this.formData=d.form_data||{};this.currentStep=d.draft_current_step||0}catch(r){console.error("Failed to load draft:",r),this.error=r.message||"Failed to load draft"}})},saveProgress(){return N(this,null,function*(){this.isSaving=!0,this.error=null;try{const t=yield ye.createDraft(this.formData,this.currentStep);this.currentRequestId||(this.currentRequestId=t.request_id),this.lastSaved=new Date}catch(t){throw console.error("Save failed:",t),this.error=t.message||"Failed to save progress",t}finally{this.isSaving=!1}})},saveDraft(){return N(this,null,function*(){return this.saveProgress()})},submitRequest(){return N(this,null,function*(){this.isSubmitting=!0,this.error=null;try{return this.currentRequestId||(yield this.saveProgress()),yield ye.submitRequest(this.currentRequestId),this.reset(),!0}catch(t){throw console.error("Submit failed:",t),this.error=t.message||"Failed to submit request",t}finally{this.isSubmitting=!1}})},updateField(t,r){this.formData[t]=r},updateFields(t){Object.assign(this.formData,t)},setStepValidation(t,r){this.stepValidationStatus[t]=r},clearError(){this.error=null},reset(){this.currentRequestId=null,this.requestTypeCode=null,this.requestTypeConfig=null,this.formData={},this.currentStep=0,this.stepValidationStatus={},this.isSaving=!1,this.isSubmitting=!1,this.lastSaved=null,this.error=null}}});function $t(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0}function Vt(t){return t?/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(t.replace(/\s/g,"")):!0}function qt(t){if(!t)return!0;try{return new URL(t),!0}catch(r){return!1}}function Dt(t){return t===""||t===null||t===void 0?!0:!isNaN(parseFloat(t))&&isFinite(t)}function Tt(t,r,d){let n=t.trim();n.startsWith("eval:")&&(n=n.substring(5).trim());try{return new Function("formData","value",`
			'use strict';
			try {
				return Boolean(${n});
			} catch (e) {
				console.warn('[Field Validation] Evaluation error:', e.message);
				return true; // Fail open on evaluation error
			}
		`)(d,r)}catch(a){return console.error("[Field Validation] Failed to evaluate expression:",t,a),!0}}function Mt(t,r,d={}){if(!r)return{valid:!0,message:""};switch(r.toLowerCase()){case"email":if(!$t(t))return{valid:!1,message:"Please enter a valid email address"};break;case"phone":if(!Vt(t))return{valid:!1,message:"Please enter a valid phone number"};break;case"url":if(!qt(t))return{valid:!1,message:"Please enter a valid URL"};break;case"number":if(!Dt(t))return{valid:!1,message:"Please enter a valid number"};break;default:if(r.startsWith("eval:")&&!Tt(r,t,d))return{valid:!1,message:"Validation failed"}}return{valid:!0,message:""}}function He(){const t=P({}),r=P(!1);function d(m,p,g,x={}){const h=Mt(p,g.validation,x);return h.valid?g.is_required&&(p===""||p===null||p===void 0)?(t.value[m]=`${g.field_label} is required`,!1):(delete t.value[m],!0):(t.value[m]=h.message,!1)}function n(m,p){return N(this,null,function*(){r.value=!0,t.value={};let g=!0;for(const x of m.sections||[])if(!(x.depends_on&&!a(x.depends_on,p)))for(const h of x.fields||[]){if(h.depends_on&&!a(h.depends_on,p))continue;const k=p[h.field_name];d(h.field_name,k,h,p)||(g=!1)}return r.value=!1,g})}function a(m,p){try{const{evaluateCondition:g}=require("../utils/conditionalLogic");return g(m,p)}catch(g){return console.error("Error evaluating depends_on:",g),!0}}function b(){t.value={}}function c(m){delete t.value[m]}return{errors:t,isValidating:r,validateConfigField:d,validateStep:n,clearErrors:b,clearFieldError:c}}const Pt={class:"mb-8"},Bt={class:"relative mb-6"},It={class:"overflow-hidden h-2 text-xs flex rounded bg-gray-200"},jt={class:"flex justify-between mt-2"},Ft={class:"text-sm font-medium text-gray-700"},Rt={class:"text-sm font-medium text-gray-700"},At={__name:"RequestProgress",props:{currentStep:{type:Number,required:!0},totalSteps:{type:Number,required:!0},stepTitles:{type:Array,default:()=>[]}},setup(t){const r=t,d=$(()=>r.totalSteps===0?0:Math.round((r.currentStep+1)/r.totalSteps*100));return(n,a)=>(o(),i("div",Pt,[e("div",Bt,[e("div",It,[e("div",{style:ze({width:d.value+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-600 transition-all duration-500"},null,4)]),e("div",jt,[e("span",Ft,f(t.stepTitles[t.currentStep]||`Step ${t.currentStep+1}`),1),e("span",Rt,f(d.value)+"% Complete ",1)])])]))}},zt={class:"mt-8 pt-6 border-t border-gray-200"},Nt={class:"flex items-center justify-between"},Lt={class:"flex items-center space-x-3"},Et={__name:"StepNavigation",props:{currentStep:{type:Number,required:!0},totalSteps:{type:Number,required:!0},isLastStep:{type:Boolean,default:!1},canGoNext:{type:Boolean,default:!0},canSaveDraft:{type:Boolean,default:!0},isSaving:{type:Boolean,default:!1},isSubmitting:{type:Boolean,default:!1}},emits:["next","previous","save-draft","submit"],setup(t,{emit:r}){const d=r,n=()=>{d("next")},a=()=>{d("previous")},b=()=>{d("save-draft")},c=()=>{d("submit")};return(m,p)=>(o(),i("div",zt,[e("div",Nt,[e("div",null,[t.currentStep>0?(o(),L(V(oe),{key:0,onClick:a,variant:"outline",disabled:t.isSaving||t.isSubmitting},{prefix:A(()=>[...p[0]||(p[0]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:A(()=>[p[1]||(p[1]=M(" Previous ",-1))]),_:1},8,["disabled"])):v("",!0)]),e("div",Lt,[t.canSaveDraft?(o(),L(V(oe),{key:0,onClick:b,variant:"outline",loading:t.isSaving,disabled:t.isSubmitting},je({default:A(()=>[M(" "+f(t.isSaving?"Saving...":"Save Draft"),1)]),_:2},[t.isSaving?void 0:{name:"prefix",fn:A(()=>[p[2]||(p[2]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1))]),key:"0"}]),1032,["loading","disabled"])):v("",!0),t.isLastStep?(o(),L(V(oe),{key:2,onClick:c,variant:"solid",theme:"green",loading:t.isSubmitting,disabled:!t.canGoNext||t.isSaving},je({default:A(()=>[M(" "+f(t.isSubmitting?"Submitting...":"Submit Application"),1)]),_:2},[t.isSubmitting?void 0:{name:"prefix",fn:A(()=>[p[5]||(p[5]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1))]),key:"0"}]),1032,["loading","disabled"])):(o(),L(V(oe),{key:1,onClick:n,variant:"solid",theme:"blue",disabled:!t.canGoNext||t.isSaving||t.isSubmitting},{suffix:A(()=>[...p[3]||(p[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),default:A(()=>[p[4]||(p[4]=M(" Next ",-1))]),_:1},8,["disabled"]))])]),p[6]||(p[6]=e("div",{class:"mt-4 text-center"},[e("p",{class:"text-sm text-gray-500"}," Your progress is automatically saved. You can return to complete this application later. ")],-1))]))}},Ot={class:"text-center py-6"},Ut={key:0,class:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6"},Ht={class:"text-sm font-mono text-gray-900 mb-3"},Gt={__name:"SaveDraftModal",props:{show:{type:Boolean,required:!0},draftId:{type:String,default:null}},emits:["update:show","close"],setup(t,{emit:r}){const d=De(),n=t,a=r,b=$({get:()=>n.show,set:p=>a("update:show",p)}),c=()=>{a("update:show",!1),a("close")},m=()=>{n.draftId&&(a("update:show",!1),d.push(`/request/${n.draftId}`))};return(p,g)=>(o(),L(V(Ne),{modelValue:b.value,"onUpdate:modelValue":g[0]||(g[0]=x=>b.value=x),options:{size:"sm"}},{body:A(()=>[e("div",Ot,[g[3]||(g[3]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),g[4]||(g[4]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Draft Saved Successfully",-1)),g[5]||(g[5]=e("p",{class:"text-sm text-gray-500 mb-4"}," Your progress has been saved. You can return to complete this application later. ",-1)),t.draftId?(o(),i("div",Ut,[g[2]||(g[2]=e("p",{class:"text-xs text-gray-500 mb-2"},"Draft ID",-1)),e("p",Ht,f(t.draftId),1),e("button",{onClick:m,class:"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline"},[...g[1]||(g[1]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),M(" View Draft Details ",-1)])])])):v("",!0),e("div",{class:"flex justify-between w-full space-x-3 px-4"},[e("button",{onClick:c,class:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}," Close "),e("button",{onClick:c,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}," Continue Editing ")])])]),_:1},8,["modelValue"]))}},Wt={class:"py-4"},Jt={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Yt={class:"list-disc list-inside space-y-2"},Kt={class:"font-medium"},Qt={key:1,class:"text-sm text-gray-500 text-center py-4"},Zt={__name:"ValidationErrorModal",props:{show:{type:Boolean,required:!0},errors:{type:Object,default:()=>({})}},emits:["update:show","close"],setup(t,{emit:r}){const d=t,n=r,a=$({get:()=>d.show,set:m=>n("update:show",m)}),b=$(()=>Object.entries(d.errors).map(([m,p])=>({field:m,message:p}))),c=()=>{n("update:show",!1),n("close")};return(m,p)=>(o(),L(V(Ne),{modelValue:a.value,"onUpdate:modelValue":p[0]||(p[0]=g=>a.value=g),options:{size:"md"}},{body:A(()=>[e("div",Wt,[p[1]||(p[1]=e("div",{class:"flex items-start mb-4"},[e("div",{class:"flex-shrink-0"},[e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])])]),e("div",{class:"ml-4"},[e("h3",{class:"text-lg font-medium text-gray-900 mb-1"},"Validation Errors"),e("p",{class:"text-sm text-gray-500"}," Please fix the following errors before continuing: ")])],-1)),b.value.length>0?(o(),i("div",Jt,[e("ul",Yt,[(o(!0),i(O,null,G(b.value,(g,x)=>(o(),i("li",{key:x,class:"text-sm text-red-800"},[e("span",Kt,f(g.field)+":",1),M(" "+f(g.message),1)]))),128))])])):(o(),i("div",Qt," No validation errors found. "))])]),actions:A(()=>[e("div",{class:"flex justify-end"},[e("button",{onClick:c,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}," Close and Fix Errors ")])]),_:1},8,["modelValue"]))}},Xt={__name:"Step1CouncilSelection",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","council-change"],setup(t,{emit:r}){const d=t,n=r,a=b=>{console.log("[Step1CouncilSelection] updateCouncil called with:",b),console.log("[Step1CouncilSelection] Current modelValue:",d.modelValue),n("update:modelValue",$e(Y({},d.modelValue),{council:b})),n("council-change",b),console.log("[Step1CouncilSelection] Emitted events")};return(b,c)=>(o(),i("div",null,[c[0]||(c[0]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Council",-1)),c[1]||(c[1]=e("p",{class:"text-gray-600 mb-8"},"Choose the council that will process your application",-1)),z(ct,{"model-value":t.modelValue.council,"onUpdate:modelValue":a,"display-mode":"cards",required:!0,"show-selected-info":!0,label:"","show-label":!1},null,8,["model-value"])]))}},es={key:0,class:"text-center py-12"},ts={key:1,class:"grid md:grid-cols-2 gap-4"},ss=["onClick"],ls={class:"flex items-start justify-between"},os={class:"flex-1"},as={class:"text-lg font-semibold text-gray-900 mb-2"},ns=["innerHTML"],rs={class:"mt-4 flex items-center space-x-4 text-xs text-gray-500"},is={key:0},us={key:1},ds={key:2,class:"px-2 py-1 bg-gray-100 rounded"},cs={key:0,class:"ml-4"},ms={__name:"Step2RequestType",props:{modelValue:{type:Object,required:!0},requestTypes:{type:Object,required:!0}},emits:["update:modelValue","type-selected"],setup(t,{emit:r}){const d=t,n=r,a=b=>{console.log("[Step2RequestType] selectType called with:",b.name),console.log("[Step2RequestType] props.modelValue:",d.modelValue),console.log("[Step2RequestType] props.modelValue.council:",d.modelValue.council);const c=$e(Y({},d.modelValue),{request_type:b.name});console.log("[Step2RequestType] Emitting updatedValue:",c),n("update:modelValue",c),n("type-selected",b.name)};return(b,c)=>(o(),i("div",null,[c[2]||(c[2]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Application Type",-1)),c[3]||(c[3]=e("p",{class:"text-gray-600 mb-8"},"Choose the type of consent you wish to apply for",-1)),t.requestTypes.loading?(o(),i("div",es,[...c[0]||(c[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(o(),i("div",ts,[(o(!0),i(O,null,G(t.requestTypes.data,m=>(o(),i("div",{key:m.name,onClick:p=>a(m),class:j(["border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",t.modelValue.request_type===m.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",ls,[e("div",os,[e("h3",as,f(m.type_name),1),e("p",{class:"text-sm text-gray-600",innerHTML:m.description||"No description available"},null,8,ns),e("div",rs,[m.base_fee?(o(),i("span",is,"Fee: $"+f(m.base_fee),1)):v("",!0),m.processing_sla_days?(o(),i("span",us,f(m.processing_sla_days)+" days",1)):v("",!0),m.category?(o(),i("span",ds,f(m.category),1)):v("",!0)])]),t.modelValue.request_type===m.name?(o(),i("div",cs,[...c[1]||(c[1]=[e("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):v("",!0)])],10,ss))),128))]))]))}},ps={class:"text-gray-600 mb-6"},fs={key:0,class:"space-y-6"},vs={class:"bg-white border border-gray-200 rounded-lg p-6"},gs={class:"flex items-start justify-between mb-4"},ys={class:"text-xl font-semibold text-gray-900"},bs={key:0,class:"text-sm text-gray-500 mt-1"},xs={class:"grid md:grid-cols-3 gap-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},hs={class:"text-2xl font-bold text-blue-900 mt-1"},_s={class:"text-2xl font-bold text-blue-900 mt-1"},ws={class:"text-2xl font-bold text-blue-900 mt-1"},ks={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},Cs=["innerHTML"],Ss={key:1,class:"bg-white border border-gray-200 rounded-lg p-6"},$s=["innerHTML"],Vs={key:1,class:"text-center py-12"},qs={__name:"Step3ProcessInfo",props:{requestTypeDetails:{type:Object,default:null},councilName:{type:String,default:""},modelValue:{type:Object,default:()=>({})}},emits:["continue","update:modelValue"],setup(t,{emit:r}){const d=De(),n=r,a=()=>{if(!st.isLoggedIn){const b=window.location.pathname+window.location.search;d.push({name:"Login",query:{redirect:b}});return}n("continue")};return(b,c)=>(o(),i("div",null,[c[11]||(c[11]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Council Process Information",-1)),e("p",ps,"Understanding "+f(t.councilName)+"'s process for this application",1),t.requestTypeDetails?(o(),i("div",fs,[e("div",vs,[e("div",gs,[e("div",null,[e("h3",ys,f(t.requestTypeDetails.request_type_name),1),t.requestTypeDetails.category?(o(),i("p",bs,f(t.requestTypeDetails.category),1)):v("",!0)])]),e("div",xs,[e("div",null,[c[0]||(c[0]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Application Fee",-1)),e("div",hs," $"+f(t.requestTypeDetails.base_fee||"0"),1),c[1]||(c[1]=e("div",{class:"text-xs text-blue-600 mt-1"},"Plus any additional costs",-1))]),e("div",null,[c[3]||(c[3]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Processing Time",-1)),e("div",_s,[M(f(t.requestTypeDetails.sla_days||"N/A")+" ",1),c[2]||(c[2]=e("span",{class:"text-base"},"days",-1))]),c[4]||(c[4]=e("div",{class:"text-xs text-blue-600 mt-1"},"Standard timeframe",-1))]),e("div",null,[c[5]||(c[5]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Payment Required",-1)),e("div",ws,f(t.requestTypeDetails.requires_payment?"Yes":"No"),1),c[6]||(c[6]=e("div",{class:"text-xs text-blue-600 mt-1"},"Before processing",-1))])])]),t.requestTypeDetails.process_description?(o(),i("div",ks,[c[7]||(c[7]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"How This Works",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:t.requestTypeDetails.process_description},null,8,Cs)])):t.requestTypeDetails.description?(o(),i("div",Ss,[c[8]||(c[8]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"About This Application",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:t.requestTypeDetails.description},null,8,$s)])):v("",!0),c[9]||(c[9]=ne('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Before You Continue</h5><p class="text-yellow-800 text-sm mt-1"> Please review this information carefully. Make sure you understand the process, fees, and timeframes before proceeding with your application. </p></div></div></div>',1)),e("div",{class:"flex justify-center pt-4"},[e("button",{type:"button",onClick:a,class:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"}," I Understand - Continue to Application ")])])):(o(),i("div",Vs,[...c[10]||(c[10]=[e("p",{class:"text-gray-500"},"No request type selected. Please go back and select a request type.",-1)])]))]))}};function Ds(t,r){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const Ts={class:"space-y-4"},Ms={class:"block"},Ps={class:"text-sm font-medium text-gray-900"},Bs={key:0,class:"text-red-500"},Is={key:0,class:"text-xs text-gray-500 mt-1"},js={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fs=["disabled"],Rs=["disabled"],As={class:"text-center"},zs={class:"text-xs text-gray-500"},Ns=["accept","multiple"],Ls={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Es={class:"flex items-center space-x-3"},Os={class:"flex-1"},Us={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},Hs={key:1,class:"space-y-2"},Gs={class:"flex items-center space-x-3 flex-1 min-w-0"},Ws={class:"flex-shrink-0"},Js={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},Ys=["src","alt"],Ks={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},Qs={class:"flex-1 min-w-0"},Zs={class:"text-sm font-medium text-gray-900 truncate"},Xs={class:"text-xs text-gray-500"},el=["onClick"],tl={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},sl={class:"relative bg-black aspect-video"},ll=["src"],ol={key:2,class:"absolute inset-0 pointer-events-none"},al={class:"w-full h-full grid grid-cols-3 grid-rows-3"},nl={class:"bg-gray-900 px-6 py-6"},rl={key:0,class:"flex items-center justify-center space-x-6"},il={key:1,class:"flex items-center justify-center space-x-4"},ul={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(t,{emit:r}){const d=t,n=r,a=P(null),b=P(null),c=P(!1),m=P(null),p=P(null),g=P(!1),x=P(0),h=$({get:()=>d.modelValue,set:q=>n("update:modelValue",q)}),k=()=>{var q;(q=a.value)==null||q.click()},D=q=>N(this,null,function*(){const w=Array.from(q.target.files);yield _(w),q.target.value=""}),_=q=>N(this,null,function*(){const w=[];for(const B of q){if(B.size>d.maxSize){alert(`File ${B.name} exceeds maximum size of ${re(d.maxSize)}`);continue}let W=null;B.type.startsWith("image/")&&(W=yield u(B)),w.push({file:B,name:B.name,size:B.size,type:B.type,preview:W,uploadDate:new Date().toISOString()})}if(w.length>0){const B=d.multiple?[...h.value,...w]:w;n("update:modelValue",B),yield l(w)}}),u=q=>new Promise(w=>{const B=new FileReader;B.onload=W=>w(W.target.result),B.onerror=()=>w(null),B.readAsDataURL(q)}),l=q=>N(this,null,function*(){g.value=!0,x.value=0;try{for(let w=0;w<q.length;w++){const B=q[w],W=setInterval(()=>{x.value=Math.min(x.value+10,90)},100);yield new Promise(fe=>{n("upload",B,fe)}),clearInterval(W),x.value=(w+1)/q.length*100}}catch(w){console.error("Upload error:",w),alert("Failed to upload files. Please try again.")}finally{g.value=!1,x.value=0}}),s=q=>{const w=[...h.value];w.splice(q,1),n("update:modelValue",w)},y=()=>N(this,null,function*(){try{c.value=!0,yield T()}catch(q){console.error("Camera error:",q),alert("Unable to access camera. Please check permissions or upload a file instead."),c.value=!1}}),T=()=>N(this,null,function*(){try{const q=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});p.value=q,b.value&&(b.value.srcObject=q)}catch(q){throw q}}),I=()=>{const q=b.value,w=document.createElement("canvas");w.width=q.videoWidth,w.height=q.videoHeight,w.getContext("2d").drawImage(q,0,0,w.width,w.height),m.value=w.toDataURL("image/jpeg",.9)},E=()=>{m.value=null},U=()=>N(this,null,function*(){if(!m.value)return;const q=yield(yield fetch(m.value)).blob(),w=new File([q],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield _([w]),Q()}),Q=()=>{p.value&&(p.value.getTracks().forEach(q=>q.stop()),p.value=null),m.value=null,c.value=!1},re=q=>{if(q===0)return"0 Bytes";const w=1024,B=["Bytes","KB","MB","GB"],W=Math.floor(Math.log(q)/Math.log(w));return Math.round(q/Math.pow(w,W)*100)/100+" "+B[W]};return(q,w)=>(o(),i("div",Ts,[e("label",Ms,[e("span",Ps,[M(f(t.label)+" ",1),t.required?(o(),i("span",Bs,"*")):v("",!0)]),t.helpText?(o(),i("p",Is,f(t.helpText),1)):v("",!0)]),e("div",js,[t.allowCamera?(o(),i("button",{key:0,onClick:y,type:"button",class:j(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":g.value}]),disabled:g.value},[...w[0]||(w[0]=[ne('<div class="text-center" data-v-2bd160e5><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2bd160e5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2bd160e5></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2bd160e5></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2bd160e5>Take Photo</p><p class="text-xs text-gray-500" data-v-2bd160e5>Use camera</p></div>',1)])],10,Fs)):v("",!0),e("button",{onClick:k,type:"button",class:j(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":g.value}]),disabled:g.value},[e("div",As,[w[1]||(w[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),w[2]||(w[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",zs,"Browse "+f(t.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:a,type:"file",accept:t.accept,multiple:t.multiple,onChange:D,class:"hidden"},null,40,Ns)],10,Rs)]),g.value?(o(),i("div",Ls,[e("div",Es,[w[4]||(w[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",Os,[w[3]||(w[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",Us,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:ze({width:x.value+"%"})},null,4)])])])])):v("",!0),h.value.length>0?(o(),i("div",Hs,[z(lt,{name:"list"},{default:A(()=>[(o(!0),i(O,null,G(h.value,(B,W)=>(o(),i("div",{key:B.name+W,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",Gs,[e("div",Ws,[B.preview?(o(),i("div",Js,[e("img",{src:B.preview,alt:B.name,class:"w-full h-full object-cover"},null,8,Ys)])):(o(),i("div",Ks,[...w[5]||(w[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",Qs,[e("p",Zs,f(B.name),1),e("p",Xs,f(re(B.size)),1)]),e("button",{onClick:fe=>s(W),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...w[6]||(w[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,el)])]))),128))]),_:1})])):v("",!0),(o(),L(at,{to:"body"},[c.value?(o(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:ot(Q,["self"])},[e("div",tl,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[w[8]||(w[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:Q,class:"text-gray-400 hover:text-white transition-colors"},[...w[7]||(w[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",sl,[m.value?(o(),i("img",{key:1,src:m.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,ll)):(o(),i("video",{key:0,ref_key:"videoElement",ref:b,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),m.value?v("",!0):(o(),i("div",ol,[e("div",al,[(o(),i(O,null,G(9,B=>e("div",{key:B,class:"border border-white/20"})),64))])]))]),e("div",nl,[m.value?(o(),i("div",il,[e("button",{onClick:E,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:U,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(o(),i("div",rl,[e("button",{onClick:I,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...w[9]||(w[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):v("",!0)]))]))}},dl=me(ul,[["__scopeId","data-v-2bd160e5"]]),cl={class:"space-y-4"},ml={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pl={class:"block text-sm font-medium text-gray-700 mb-2"},fl={key:0,class:"text-red-500"},vl={class:"relative"},gl=["required"],yl=["value"],bl={class:"block text-sm font-medium text-gray-700 mb-2"},xl={key:0,class:"text-red-500"},hl={class:"relative"},_l=["required","disabled"],wl=["value"],kl={key:0,class:"mt-1 text-xs text-gray-500"},Cl={class:"block text-sm font-medium text-gray-700 mb-2"},Sl={key:0,class:"text-red-500"},$l={class:"relative"},Vl=["required","disabled"],ql=["value"],Dl={key:0,class:"mt-1 text-xs text-gray-500"},Tl={class:"block text-sm font-medium text-gray-700 mb-2"},Ml={key:0,class:"text-red-500"},Pl=["required"],Bl={class:"md:col-span-2"},Il={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},jl={class:"flex items-start"},Fl={class:"flex-1"},Rl={class:"text-sm text-green-700 mt-1"},Al={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:r}){const d=t,n=r,a=P({street:"",barangay:"",municipality:"",province:"",zipCode:""}),b=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],c={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Parañaque City","Las Piñas City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},m={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},p=$(()=>a.value.province?c[a.value.province]||[]:[]),g=$(()=>a.value.municipality?m[a.value.municipality]||["Other - Please specify in Street field"]:[]),x=$(()=>{const _=[];return a.value.street&&_.push(a.value.street),a.value.barangay&&_.push(`Brgy. ${a.value.barangay}`),a.value.municipality&&_.push(a.value.municipality),a.value.province&&_.push(a.value.province),a.value.zipCode&&_.push(a.value.zipCode),_.length>0?_.join(", "):""}),h=()=>{a.value.municipality="",a.value.barangay="",D()},k=()=>{a.value.barangay="",D()},D=()=>{n("update:modelValue",x.value)};return Z(()=>{var _;if(d.modelValue)if(typeof d.modelValue=="string"){const u=d.modelValue.split(",").map(l=>l.trim());u.length>=3&&(a.value.street=u[0]||"",a.value.barangay=((_=u[1])==null?void 0:_.replace("Brgy. ",""))||"",a.value.municipality=u[2]||"",a.value.province=u[3]||"",a.value.zipCode=u[4]||"")}else typeof d.modelValue=="object"&&(a.value=Y(Y({},a.value),d.modelValue))}),ce(()=>d.modelValue,_=>{_&&typeof _=="object"&&(a.value=Y(Y({},a.value),_))}),(_,u)=>(o(),i("div",cl,[u[18]||(u[18]=ne('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",ml,[e("div",null,[e("label",pl,[u[5]||(u[5]=M(" Province ",-1)),t.required?(o(),i("span",fl,"*")):v("",!0)]),e("div",vl,[J(e("select",{"onUpdate:modelValue":u[0]||(u[0]=l=>a.value.province=l),onChange:h,required:t.required,class:j(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.province}])},[u[6]||(u[6]=e("option",{value:""},"Select Province",-1)),(o(),i(O,null,G(b,l=>e("option",{key:l,value:l},f(l),9,yl)),64))],42,gl),[[xe,a.value.province]]),u[7]||(u[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",bl,[u[8]||(u[8]=M(" Municipality/City ",-1)),t.required?(o(),i("span",xl,"*")):v("",!0)]),e("div",hl,[J(e("select",{"onUpdate:modelValue":u[1]||(u[1]=l=>a.value.municipality=l),onChange:k,required:t.required,disabled:!a.value.province,class:j(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.municipality}])},[u[9]||(u[9]=e("option",{value:""},"Select Municipality/City",-1)),(o(!0),i(O,null,G(p.value,l=>(o(),i("option",{key:l,value:l},f(l),9,wl))),128))],42,_l),[[xe,a.value.municipality]]),u[10]||(u[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.province?v("",!0):(o(),i("p",kl,"Select province first"))]),e("div",null,[e("label",Cl,[u[11]||(u[11]=M(" Barangay ",-1)),t.required?(o(),i("span",Sl,"*")):v("",!0)]),e("div",$l,[J(e("select",{"onUpdate:modelValue":u[2]||(u[2]=l=>a.value.barangay=l),onChange:D,required:t.required,disabled:!a.value.municipality,class:j(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.barangay}])},[u[12]||(u[12]=e("option",{value:""},"Select Barangay",-1)),(o(!0),i(O,null,G(g.value,l=>(o(),i("option",{key:l,value:l},f(l),9,ql))),128))],42,Vl),[[xe,a.value.barangay]]),u[13]||(u[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.municipality?v("",!0):(o(),i("p",Dl,"Select municipality first"))]),e("div",null,[e("label",Tl,[u[14]||(u[14]=M(" Street / House No. ",-1)),t.required?(o(),i("span",Ml,"*")):v("",!0)]),J(e("input",{"onUpdate:modelValue":u[3]||(u[3]=l=>a.value.street=l),onInput:D,type:"text",required:t.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:j(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.street}])},null,42,Pl),[[ee,a.value.street]])]),e("div",Bl,[u[15]||(u[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[M(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),J(e("input",{"onUpdate:modelValue":u[4]||(u[4]=l=>a.value.zipCode=l),onInput:D,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[ee,a.value.zipCode]])])]),x.value?(o(),i("div",Il,[e("div",jl,[u[17]||(u[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Fl,[u[16]||(u[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",Rl,f(x.value),1)])])])):v("",!0)]))}},zl={class:"inline-block relative group"},Nl={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:t=>["top","bottom","left","right"].includes(t)}},setup(t){const r=t,d=P(!1),n=$(()=>{switch(r.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),a=$(()=>{switch(r.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(b,c)=>(o(),i("div",zl,[Fe(b.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:c[0]||(c[0]=m=>d.value=!0),onMouseleave:c[1]||(c[1]=m=>d.value=!1)},[...c[2]||(c[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),z(nt,{name:"tooltip"},{default:A(()=>[d.value?(o(),i("div",{key:0,class:j(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",n.value]),style:{"max-width":"300px","white-space":"normal"}},[Fe(b.$slots,"default",{},()=>[M(f(t.text),1)],!0),e("div",{class:j(["tooltip-arrow",a.value])},null,2)],2)):v("",!0)]),_:3})]))}},be=me(Nl,[["__scopeId","data-v-1fa5e90e"]]);function Ll(t,r){if(!t||t.trim()==="")return!0;let d=t.trim();d.startsWith("eval:")&&(d=d.substring(5).trim());try{return new Function("formData",`
      'use strict';
      try {
        return Boolean(${d});
      } catch (e) {
        console.warn('[Conditional Logic] Evaluation error:', e.message);
        return false;
      }
    `)(r)}catch(n){return console.error("[Conditional Logic] Failed to evaluate expression:",t,n),!0}}function El(t,r){return t?t.depends_on?Ll(t.depends_on,r):!0:!1}const Ol={class:"space-y-6"},Ul={key:0,class:"form-group"},Hl={key:1,class:"form-group"},Gl=["for"],Wl={key:0,class:"text-red-500 ml-1"},Jl={class:"relative"},Yl=["id","name","onUpdate:modelValue","onBlur","required","placeholder"],Kl={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},Ql=["innerHTML"],Zl={key:0,class:"mt-1 text-xs text-red-600"},Xl={key:1,class:"mt-1 text-xs text-gray-500"},eo={key:2,class:"form-group"},to=["for"],so={key:0,class:"text-red-500 ml-1"},lo={class:"relative"},oo=["id","name","onUpdate:modelValue","onBlur","required"],ao={value:""},no=["value"],ro={key:0,class:"mt-1 text-xs text-red-600"},io={key:1,class:"mt-1 text-xs text-gray-500"},uo={key:3,class:"form-group"},co={class:"flex items-center h-5"},mo=["id","name","onUpdate:modelValue","onChange","required"],po={class:"ml-3 text-sm"},fo=["for"],vo={key:0,class:"text-red-500 ml-1"},go={key:0,class:"mt-1 text-xs text-red-600"},yo={key:1,class:"mt-1 text-xs text-gray-500"},bo={key:4,class:"form-group"},xo=["for"],ho={key:0,class:"text-red-500 ml-1"},_o=["id","name","onUpdate:modelValue","onBlur","required","placeholder"],wo={key:0,class:"mt-1 text-xs text-red-600"},ko={key:1,class:"mt-1 text-xs text-gray-500"},Co={key:5,class:"form-group"},So=["for"],$o={key:0,class:"text-red-500 ml-1"},Vo={class:"relative"},qo=["id","name","onUpdate:modelValue","onBlur","required"],Do={key:0,class:"mt-1 text-xs text-red-600"},To={key:1,class:"mt-1 text-xs text-gray-500"},Mo={key:6,class:"form-group"},Po=["for"],Bo={key:0,class:"text-red-500 ml-1"},Io={class:"relative"},jo=["id","name","onUpdate:modelValue","required","placeholder"],Fo={key:0,class:"mt-1 text-xs text-gray-500"},Ro={key:7,class:"form-group"},Ao=["for"],zo={key:0,class:"text-red-500 ml-1"},No={class:"relative"},Lo=["id","name","onUpdate:modelValue","required","placeholder"],Eo={key:0,class:"mt-1 text-xs text-gray-500"},Oo={key:8,class:"form-group"},Uo=["for"],Ho={key:0,class:"text-red-500 ml-1"},Go={class:"relative"},Wo=["id","name","onUpdate:modelValue","onBlur","required"],Jo={key:0,class:"mt-1 text-xs text-red-600"},Yo={key:1,class:"mt-1 text-xs text-gray-500"},Ko={key:9,class:"form-group"},Qo={key:10,class:"form-group"},Zo={class:"text-sm text-gray-500 italic"},Xo={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:r}){const d=t,n=r,a=$({get:()=>d.modelValue,set:u=>n("update:modelValue",u)}),b=$(()=>d.fields.filter(u=>{var I;const l=((I=u.parent_section_code)==null?void 0:I.toLowerCase())||"",y=["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(l),T=["barangay","municipality","province","city","region","zip_code","postal_code"];return y&&d.fields.some(U=>U.parent_section_code===u.parent_section_code&&U.field_name==="address_line")&&T.includes(u.field_name)?!1:El(u,a.value)})),c=u=>{var y;const l=((y=u.parent_section_code)==null?void 0:y.toLowerCase())||"";return["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(l)&&u.field_name==="address_line"&&u.field_type==="Data"},m=u=>{var s;if(u.placeholder)return u.placeholder;const l=((s=u.field_label)==null?void 0:s.toLowerCase())||"";return l.includes("name")?"e.g., Juan Dela Cruz":l.includes("email")?"e.g., juan@example.com":l.includes("phone")||l.includes("mobile")||l.includes("contact")?"e.g., 0917 123 4567":l.includes("age")?"e.g., 25":l.includes("occupation")?"e.g., Teacher":l.includes("income")||l.includes("salary")?"e.g., 15000":`Enter ${u.field_label}`},p=u=>{var s;const l=((s=u.field_label)==null?void 0:s.toLowerCase())||"";return l.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':l.includes("phone")||l.includes("mobile")||l.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':l.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},g=u=>u?u.split(`
`).map(l=>l.trim()).filter(Boolean):[],{errors:x,validateConfigField:h,clearFieldError:k}=He(),D=u=>{if(!u.validation&&!u.is_required){k(u.field_name);return}const l=a.value[u.field_name];h(u.field_name,l,u,a.value)},_=u=>x.value[u]||"";return ce(()=>d.fields,u=>{u.forEach(l=>{l.default_value&&!a.value[l.field_name]&&(l.default_value==="Today"&&l.field_type==="Date"?a.value[l.field_name]=new Date().toISOString().split("T")[0]:a.value[l.field_name]=l.default_value)})},{immediate:!0}),(u,l)=>(o(),i("div",Ol,[(o(!0),i(O,null,G(b.value,s=>(o(),i("div",{key:s.field_name,class:"field-wrapper"},[c(s)?(o(),i("div",Ul,[z(Al,{modelValue:a.value[s.field_name],"onUpdate:modelValue":y=>a.value[s.field_name]=y,required:s.is_required},null,8,["modelValue","onUpdate:modelValue","required"])])):s.field_type==="Data"?(o(),i("div",Hl,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,f(s.field_label),1),s.is_required?(o(),i("span",Wl,"*")):v("",!0),s.help_text||s.description?(o(),L(be,{key:1,text:s.help_text||s.description},null,8,["text"])):v("",!0)],8,Gl),e("div",Jl,[J(e("input",{id:s.field_name,name:s.field_name,type:"text","onUpdate:modelValue":y=>a.value[s.field_name]=y,onBlur:y=>D(s),required:s.is_required,class:j(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}]),placeholder:m(s)},null,42,Yl),[[ee,a.value[s.field_name]]]),p(s)?(o(),i("div",Kl,[e("span",{innerHTML:p(s),class:"text-gray-400"},null,8,Ql)])):v("",!0)]),_(s.field_name)?(o(),i("p",Zl,f(_(s.field_name)),1)):s.description?(o(),i("p",Xl,f(s.description),1)):v("",!0)])):s.field_type==="Select"?(o(),i("div",eo,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,f(s.field_label),1),s.is_required?(o(),i("span",so,"*")):v("",!0),s.help_text||s.description?(o(),L(be,{key:1,text:s.help_text||s.description},null,8,["text"])):v("",!0)],8,to),e("div",lo,[J(e("select",{id:s.field_name,name:s.field_name,"onUpdate:modelValue":y=>a.value[s.field_name]=y,onBlur:y=>D(s),required:s.is_required,class:j(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}])},[e("option",ao,"Select "+f(s.field_label),1),(o(!0),i(O,null,G(g(s.options),y=>(o(),i("option",{key:y,value:y},f(y),9,no))),128))],42,oo),[[xe,a.value[s.field_name]]]),l[0]||(l[0]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),_(s.field_name)?(o(),i("p",ro,f(_(s.field_name)),1)):s.description?(o(),i("p",io,f(s.description),1)):v("",!0)])):s.field_type==="Check"?(o(),i("div",uo,[e("div",{class:j(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!_(s.field_name),"border-red-500 bg-red-50":_(s.field_name)}])},[e("div",co,[J(e("input",{id:s.field_name,name:s.field_name,type:"checkbox","onUpdate:modelValue":y=>a.value[s.field_name]=y,onChange:y=>D(s),required:s.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,mo),[[rt,a.value[s.field_name]]])]),e("div",po,[e("label",{for:s.field_name,class:"font-medium text-gray-700 cursor-pointer"},[M(f(s.field_label)+" ",1),s.is_required?(o(),i("span",vo,"*")):v("",!0)],8,fo),_(s.field_name)?(o(),i("p",go,f(_(s.field_name)),1)):s.description?(o(),i("p",yo,f(s.description),1)):v("",!0)])],2)])):s.field_type==="Text"?(o(),i("div",bo,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[M(f(s.field_label)+" ",1),s.is_required?(o(),i("span",ho,"*")):v("",!0)],8,xo),J(e("textarea",{id:s.field_name,name:s.field_name,"onUpdate:modelValue":y=>a.value[s.field_name]=y,onBlur:y=>D(s),required:s.is_required,rows:"4",class:j(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}]),placeholder:m(s)},null,42,_o),[[ee,a.value[s.field_name]]]),_(s.field_name)?(o(),i("p",wo,f(_(s.field_name)),1)):s.description?(o(),i("p",ko,f(s.description),1)):v("",!0)])):s.field_type==="Date"?(o(),i("div",Co,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,f(s.field_label),1),s.is_required?(o(),i("span",$o,"*")):v("",!0),s.help_text||s.description?(o(),L(be,{key:1,text:s.help_text||s.description},null,8,["text"])):v("",!0)],8,So),e("div",Vo,[J(e("input",{id:s.field_name,name:s.field_name,type:"date","onUpdate:modelValue":y=>a.value[s.field_name]=y,onBlur:y=>D(s),required:s.is_required,class:j(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}])},null,42,qo),[[ee,a.value[s.field_name]]]),l[1]||(l[1]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),_(s.field_name)?(o(),i("p",Do,f(_(s.field_name)),1)):s.description?(o(),i("p",To,f(s.description),1)):v("",!0)])):s.field_type==="Int"?(o(),i("div",Mo,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,f(s.field_label),1),s.is_required?(o(),i("span",Bo,"*")):v("",!0),s.help_text||s.description?(o(),L(be,{key:1,text:s.help_text||s.description},null,8,["text"])):v("",!0)],8,Po),e("div",Io,[J(e("input",{id:s.field_name,name:s.field_name,type:"number","onUpdate:modelValue":y=>a.value[s.field_name]=y,required:s.is_required,step:"1",class:j(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]}]),placeholder:m(s)},null,10,jo),[[ee,a.value[s.field_name],void 0,{number:!0}]]),l[2]||(l[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),s.description?(o(),i("p",Fo,f(s.description),1)):v("",!0)])):s.field_type==="Float"?(o(),i("div",Ro,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[M(f(s.field_label)+" ",1),s.is_required?(o(),i("span",zo,"*")):v("",!0)],8,Ao),e("div",No,[J(e("input",{id:s.field_name,name:s.field_name,type:"number","onUpdate:modelValue":y=>a.value[s.field_name]=y,required:s.is_required,step:"0.01",class:j(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]}]),placeholder:m(s)},null,10,Lo),[[ee,a.value[s.field_name],void 0,{number:!0}]]),l[3]||(l[3]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),s.description?(o(),i("p",Eo,f(s.description),1)):v("",!0)])):s.field_type==="Currency"?(o(),i("div",Oo,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[M(f(s.field_label)+" ",1),s.is_required?(o(),i("span",Ho,"*")):v("",!0)],8,Uo),e("div",Go,[l[4]||(l[4]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-base font-medium"},"₱")],-1)),J(e("input",{id:s.field_name,name:s.field_name,type:"number","onUpdate:modelValue":y=>a.value[s.field_name]=y,onBlur:y=>D(s),required:s.is_required,step:"0.01",class:j(["block w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!_(s.field_name),"border-red-500 ring-2 ring-red-100":_(s.field_name)}]),placeholder:"0.00"},null,42,Wo),[[ee,a.value[s.field_name],void 0,{number:!0}]])]),_(s.field_name)?(o(),i("p",Jo,f(_(s.field_name)),1)):s.description?(o(),i("p",Yo,f(s.description),1)):v("",!0)])):s.field_type==="Attach"||s.field_type==="Attach Image"?(o(),i("div",Ko,[z(dl,{label:s.field_label,required:s.is_required,accept:s.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:a.value[s.field_name],"onUpdate:modelValue":y=>a.value[s.field_name]=y},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):(o(),i("div",Qo,[e("div",Zo,' Field type "'+f(s.field_type)+'" not yet supported for '+f(s.field_label),1)]))]))),128))]))}},Ve=me(Xo,[["__scopeId","data-v-2060c3f5"]]),ea={class:"dynamic-step max-w-4xl mx-auto"},ta={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},sa={class:"flex items-start"},la={class:"ml-4 flex-1"},oa={class:"text-2xl font-bold text-blue-900"},aa={key:0,class:"mt-2 text-sm text-blue-700"},na={class:"space-y-6"},ra={class:"mb-4 pb-3 border-b-2 border-gray-200"},ia={class:"flex items-center"},ua={class:"text-lg font-semibold text-gray-900"},da={key:0,class:"text-red-500 ml-1"},ca={key:0,class:"text-sm text-gray-600 mt-0.5"},ma={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},pa={class:"section-content"},fa={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},va={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:r}){const d=t,n=r,a=$({get:()=>d.modelValue,set:p=>n("update:modelValue",p)}),b=$(()=>d.stepConfig.sections?d.stepConfig.sections:[]),c=p=>[p.section_title],m=()=>{console.log("--- DYNAMIC STEP DATA LOG ---"),console.log("Full Form Data (localData):",JSON.parse(JSON.stringify(a.value))),console.log("-----------------------------"),alert("Data logged to console. Check browser console (F12) for the Full Form Data.")};return ce(()=>d.stepConfig,p=>{p.sections&&p.sections.forEach(g=>{g.fields.forEach(x=>{if(x.default_value&&!a.value[x.field_name]){const h=Y({},a.value);x.default_value==="Today"&&x.field_type==="Date"?h[x.field_name]=new Date().toISOString().split("T")[0]:h[x.field_name]=x.default_value,n("update:modelValue",h)}})})},{immediate:!0,deep:!0}),(p,g)=>(o(),i("div",ea,[e("div",ta,[e("div",sa,[g[3]||(g[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",la,[e("h2",oa,f(t.stepConfig.step_title),1),t.stepDescription?(o(),i("p",aa,f(t.stepDescription),1)):v("",!0)])])]),e("div",na,[(o(!0),i(O,null,G(b.value,x=>(o(),i("div",{key:x.section_code,class:"section"},[e("div",ra,[e("div",ia,[g[4]||(g[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",ua,[M(f(x.section_title)+" ",1),x.is_required?(o(),i("span",da,"*")):v("",!0)]),x.section_description?(o(),i("p",ca,f(x.section_description),1)):v("",!0)])]),x.is_required?(o(),i("div",ma,[...g[5]||(g[5]=[M(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),M(" are required ",-1)])])):v("",!0)]),e("div",pa,[x.section_type==="Tab"?(o(),L(V(ht),{key:0},{default:A(()=>[z(V(_t),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:A(()=>[(o(!0),i(O,null,G(c(x),(h,k)=>(o(),L(V(wt),{key:k,class:j(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",p.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:A(({selected:D})=>[M(f(h),1)]),_:2},1032,["class"]))),128))]),_:2},1024),z(V(kt),null,{default:A(()=>[(o(!0),i(O,null,G(c(x),(h,k)=>(o(),L(V(Ct),{key:k},{default:A(()=>[z(Ve,{fields:x.fields,modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=D=>a.value=D)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):x.section_type==="Accordion"?(o(),L(V(ft),{key:1},{default:A(({open:h})=>[z(V(vt),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:A(()=>[e("span",null,f(x.section_title),1),z(V(Ds),{class:j([h?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),z(V(gt),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:A(()=>[z(Ve,{fields:x.fields,modelValue:a.value,"onUpdate:modelValue":g[1]||(g[1]=k=>a.value=k)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(o(),i("div",fa,[z(Ve,{fields:x.fields,modelValue:a.value,"onUpdate:modelValue":g[2]||(g[2]=h=>a.value=h)},null,8,["fields","modelValue"])]))])]))),128))]),e("div",{class:"mt-8 pt-4 border-t border-gray-200"},[e("button",{onClick:m,class:"px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition"}," 🚨 Log Current Data (Debug) "),g[6]||(g[6]=e("p",{class:"text-xs text-gray-500 mt-2"},"Use this button to check if data is being saved correctly to localData/formData.",-1))])]))}},ga=me(va,[["__scopeId","data-v-1145db6a"]]),ya={class:"px-4 sm:px-0"},ba={class:"space-y-4 sm:space-y-6"},xa={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6"},ha={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-0"},_a={class:"text-base sm:text-lg font-semibold text-blue-900"},wa={class:"text-xs sm:text-sm text-blue-700 mt-1"},ka={class:"sm:text-right"},Ca={class:"text-xl sm:text-2xl font-bold text-blue-900"},Sa={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},$a={class:"p-4 sm:p-6 space-y-3"},Va={class:"grid md:grid-cols-2 gap-4"},qa={class:"font-medium"},Da={class:"font-medium"},Ta={class:"font-medium"},Ma={key:0},Pa={class:"font-medium"},Ba={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Ia={class:"p-4 sm:p-6"},ja={key:0,class:"space-y-2"},Fa={class:"font-medium"},Ra={key:0},Aa={class:"font-medium"},za={key:1,class:"text-gray-500"},Na={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},La={class:"p-4 sm:p-6 space-y-3"},Ea={class:"font-medium"},Oa={class:"font-medium"},Ua={class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},Ha={class:"font-semibold text-gray-900 text-sm sm:text-base"},Ga={class:"p-4 sm:p-6 space-y-4"},Wa={key:0,class:"text-sm font-medium text-gray-700 mb-2"},Ja={class:"grid md:grid-cols-2 gap-4"},Ya={class:"text-sm text-gray-500"},Ka={class:"font-medium"},Qa={key:0,class:"text-gray-500 text-sm"},Za={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Xa={class:"p-4 sm:p-6"},en={class:"space-y-3"},tn={class:"mt-2 flex flex-wrap gap-2"},sn={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},ln={key:1,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},on={key:2,class:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium"},an={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium"},nn={key:4,class:"px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium"},rn={key:5,class:"text-gray-500"},un={class:"mt-1 inline-flex items-center"},dn={key:0},cn={class:"font-medium break-words"},mn={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},pn={class:"p-4 sm:p-6"},fn={class:"flex flex-wrap gap-2"},vn={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},gn={key:1,class:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},yn={key:2,class:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},bn={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},xn={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},hn={class:"p-4 sm:p-6"},_n={class:"space-y-3"},wn={class:"font-medium"},kn={key:0},Cn={class:"text-sm mt-1 line-clamp-3"},Sn={key:1},$n={class:"text-sm mt-1 line-clamp-3"},Vn={class:"flex items-center gap-2"},qn={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Dn={class:"p-4 sm:p-6"},Tn={class:"space-y-4"},Mn={key:0},Pn=["innerHTML"],Bn={key:1},In=["innerHTML"],jn={key:2},Fn={class:"text-sm mt-1 line-clamp-3"},Rn={key:3},An={class:"text-sm mt-1 space-y-1 list-disc list-inside"},zn={key:0},Nn={key:1},Ln={key:2},En={key:4},On=["innerHTML"],Un={key:5,class:"text-gray-500 text-sm"},Hn={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Gn={class:"p-4 sm:p-6"},Wn={class:"space-y-2"},Jn={class:"flex items-start gap-2"},Yn={class:"flex items-start gap-2"},Kn={class:"flex items-start gap-2"},Qn={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Zn={class:"font-medium"},Xn={key:0,class:"text-sm text-gray-500"},er={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},tr={__name:"ReviewStep",props:{modelValue:{type:Object,required:!0},councilName:{type:String,default:"Council"},requestTypeName:{type:String,default:"Application"},applicationFee:{type:String,default:"TBD"},isResourceConsent:{type:Boolean,default:!1},stepConfigs:{type:Array,default:()=>[]},usesConfigurableSteps:{type:Boolean,default:!1},requestTypeDetails:{type:Object,default:null}},setup(t){const r=t,d=$(()=>!r.usesConfigurableSteps||!r.stepConfigs?[]:r.stepConfigs.filter(u=>u.show_on_review)),n=$(()=>r.isResourceConsent?!0:!!(r.modelValue.property||r.modelValue.property_address)),a=u=>{if(!u.sections)return!1;for(const l of u.sections)if(l.show_on_review){for(const s of l.fields)if(s.show_on_review&&r.modelValue[s.field_name])return!0}return!1},b=(u,l)=>{if(l==null||l==="")return"Not provided";if(u.field_type==="Check")return l?"Yes":"No";if(u.field_type==="Date"&&l)try{return new Date(l).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(s){return l}return u.field_type==="Currency"&&l?`₱${Number(l).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`:u.field_type==="Select"?l:u.field_type==="Attach"||u.field_type==="Attach Image"?l?"✓ File attached":"Not provided":l},c=$(()=>!!(r.modelValue.consent_type_land_use||r.modelValue.consent_type_subdivision||r.modelValue.consent_type_discharge||r.modelValue.consent_type_water||r.modelValue.consent_type_coastal)),m=$(()=>{const u=r.modelValue.activity_status_type;return u==="Permitted"?"bg-green-100 text-green-800":u==="Controlled"?"bg-blue-100 text-blue-800":u==="Restricted Discretionary"?"bg-yellow-100 text-yellow-800":u==="Discretionary"?"bg-orange-100 text-orange-800":u==="Non-Complying"?"bg-red-100 text-red-800":u==="Prohibited"?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}),p=$(()=>!!(r.modelValue.hazard_flooding||r.modelValue.hazard_earthquake||r.modelValue.hazard_landslip||r.modelValue.hazard_coastal)),g=$(()=>!!(r.modelValue.consultation_undertaken||r.modelValue.consultation_summary||r.modelValue.affected_parties_details||r.modelValue.written_approvals_obtained)),x=$(()=>!!(r.modelValue.activity_description||r.modelValue.aee_full_assessment||r.modelValue.positive_effects_description||r.modelValue.effects_visual_amenity||r.modelValue.effects_traffic_parking||r.modelValue.effects_noise||r.modelValue.mitigation_measures||r.modelValue.aee_activity_description||r.modelValue.aee_existing_environment||r.modelValue.assessment_of_effects||r.modelValue.aee_document)),h=u=>{if(!u)return"";const l=document.createElement("div");return l.innerHTML=u,l.textContent||l.innerText||""},k=(u,l)=>{if(!u)return"";const s=h(u);return s.length<=l?s:s.substring(0,l)+"..."},D=u=>{if(!u)return"";try{return new Date(u).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(l){return u}},_=$(()=>{const u=!!(r.modelValue.council&&r.modelValue.request_type&&r.modelValue.requester_name&&r.modelValue.requester_email&&r.modelValue.property_address&&r.modelValue.delivery_preference);if(r.isResourceConsent){const l=!!(c.value&&r.modelValue.activity_status_type&&r.modelValue.activity_description&&r.modelValue.aee_full_assessment&&r.modelValue.declaration_accuracy&&r.modelValue.declaration_authority&&r.modelValue.declaration_acknowledgment);return u&&l}return u});return(u,l)=>{var s;return o(),i("div",ya,[l[39]||(l[39]=e("h2",{class:"text-xl sm:text-2xl font-bold text-gray-900 mb-2"},"Review & Submit",-1)),l[40]||(l[40]=e("p",{class:"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8"},"Review your application details before submitting",-1)),e("div",ba,[e("div",xa,[e("div",ha,[e("div",null,[e("h3",_a,f(t.requestTypeName),1),e("p",wa,f(t.councilName),1)]),e("div",ka,[l[0]||(l[0]=e("div",{class:"text-xs sm:text-sm text-blue-600 font-medium"},"Application Fee",-1)),e("div",Ca,f(t.applicationFee),1)])])]),e("div",Sa,[l[5]||(l[5]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Applicant Details")],-1)),e("div",$a,[e("div",Va,[e("div",null,[l[1]||(l[1]=e("span",{class:"text-sm text-gray-500"},"Name:",-1)),e("p",qa,f(t.modelValue.requester_name||"Not provided"),1)]),e("div",null,[l[2]||(l[2]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("p",Da,f(t.modelValue.requester_email||"Not provided"),1)]),e("div",null,[l[3]||(l[3]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("p",Ta,f(t.modelValue.requester_phone||"Not provided"),1)]),t.modelValue.applicant_company?(o(),i("div",Ma,[l[4]||(l[4]=e("span",{class:"text-sm text-gray-500"},"Company:",-1)),e("p",Pa,f(t.modelValue.applicant_company),1)])):v("",!0)])])]),n.value?(o(),i("div",Ba,[l[8]||(l[8]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Property Details")],-1)),e("div",Ia,[t.modelValue.property_address?(o(),i("div",ja,[e("div",null,[l[6]||(l[6]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",Fa,f(t.modelValue.property_address),1)]),t.modelValue.legal_description?(o(),i("div",Ra,[l[7]||(l[7]=e("span",{class:"text-sm text-gray-500"},"Legal Description:",-1)),e("p",Aa,f(t.modelValue.legal_description),1)])):v("",!0)])):(o(),i("p",za,"No property selected"))])])):v("",!0),(s=t.requestTypeDetails)!=null&&s.collect_payment?(o(),i("div",Na,[l[11]||(l[11]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Delivery & Payment")],-1)),e("div",La,[e("div",null,[l[9]||(l[9]=e("span",{class:"text-sm text-gray-500"},"Delivery Preference:",-1)),e("p",Ea,f(t.modelValue.delivery_preference||"Not selected"),1)]),e("div",null,[l[10]||(l[10]=e("span",{class:"text-sm text-gray-500"},"Invoice To:",-1)),e("p",Oa,f(t.modelValue.invoice_to||"Not specified"),1)])])])):v("",!0),t.usesConfigurableSteps&&d.value.length>0?(o(!0),i(O,{key:2},G(d.value,y=>(o(),i("div",{key:y.step_code,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},[e("div",Ua,[e("h3",Ha,f(y.step_title),1)]),e("div",Ga,[(o(!0),i(O,null,G(y.sections.filter(T=>T.show_on_review),T=>(o(),i("div",{key:T.section_code},[T.section_title?(o(),i("h4",Wa,f(T.section_title),1)):v("",!0),e("div",Ja,[(o(!0),i(O,null,G(T.fields.filter(I=>I.show_on_review),I=>(o(),i("div",{key:I.field_name},[e("span",Ya,f(I.review_label||I.field_label)+":",1),e("p",Ka,f(b(I,t.modelValue[I.field_name])),1)]))),128))])]))),128)),a(y)?v("",!0):(o(),i("p",Qa," No information to display for review "))])]))),128)):v("",!0),t.isResourceConsent?(o(),i(O,{key:3},[e("div",Za,[l[15]||(l[15]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consent Types & Activity Status")],-1)),e("div",Xa,[e("div",en,[e("div",null,[l[12]||(l[12]=e("span",{class:"text-sm text-gray-500"},"Consent Types:",-1)),e("div",tn,[t.modelValue.consent_type_land_use?(o(),i("span",sn," Land Use Consent ")):v("",!0),t.modelValue.consent_type_subdivision?(o(),i("span",ln," Subdivision Consent ")):v("",!0),t.modelValue.consent_type_discharge?(o(),i("span",on," Discharge Permit ")):v("",!0),t.modelValue.consent_type_water?(o(),i("span",an," Water Permit ")):v("",!0),t.modelValue.consent_type_coastal?(o(),i("span",nn," Coastal Permit ")):v("",!0),c.value?v("",!0):(o(),i("span",rn," None selected "))])]),e("div",null,[l[13]||(l[13]=e("span",{class:"text-sm text-gray-500"},"Activity Status:",-1)),e("div",un,[e("span",{class:j(["px-3 py-1 rounded-full text-sm font-medium",m.value])},f(t.modelValue.activity_status_type||"Not specified"),3)])]),t.modelValue.activity_title?(o(),i("div",dn,[l[14]||(l[14]=e("span",{class:"text-sm text-gray-500"},"Activity Title:",-1)),e("p",cn,f(t.modelValue.activity_title),1)])):v("",!0)])])]),p.value?(o(),i("div",mn,[l[20]||(l[20]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Natural Hazards")],-1)),e("div",pn,[e("div",fn,[t.modelValue.hazard_flooding?(o(),i("span",vn,[...l[16]||(l[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"})],-1),M(" Flood Hazard ",-1)])])):v("",!0),t.modelValue.hazard_earthquake?(o(),i("span",gn,[...l[17]||(l[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),M(" Earthquake/Fault Line ",-1)])])):v("",!0),t.modelValue.hazard_landslip?(o(),i("span",yn,[...l[18]||(l[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1),M(" Landslip/Slope Instability ",-1)])])):v("",!0),t.modelValue.hazard_coastal?(o(),i("span",bn,[...l[19]||(l[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5"})],-1),M(" Coastal Hazard ",-1)])])):v("",!0)])])])):v("",!0),g.value?(o(),i("div",xn,[l[25]||(l[25]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consultation & Affected Parties")],-1)),e("div",hn,[e("div",_n,[e("div",null,[l[21]||(l[21]=e("span",{class:"text-sm text-gray-500"},"Consultation Undertaken:",-1)),e("p",wn,f(t.modelValue.consultation_undertaken||"Not specified"),1)]),t.modelValue.consultation_summary?(o(),i("div",kn,[l[22]||(l[22]=e("span",{class:"text-sm text-gray-500"},"Consultation Summary:",-1)),e("p",Cn,f(t.modelValue.consultation_summary),1)])):v("",!0),t.modelValue.affected_parties_details?(o(),i("div",Sn,[l[23]||(l[23]=e("span",{class:"text-sm text-gray-500"},"Affected Parties:",-1)),e("p",$n,f(h(t.modelValue.affected_parties_details)),1)])):v("",!0),e("div",Vn,[(o(),i("svg",{class:j(["w-5 h-5",t.modelValue.written_approvals_obtained?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[24]||(l[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:j(t.modelValue.written_approvals_obtained?"text-gray-900":"text-gray-500")}," Written Approvals "+f(t.modelValue.written_approvals_obtained?"Obtained":"Not Obtained"),3)])])])])):v("",!0),e("div",qn,[l[31]||(l[31]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Assessment of Environmental Effects")],-1)),e("div",Dn,[e("div",Tn,[t.modelValue.activity_description?(o(),i("div",Mn,[l[26]||(l[26]=e("span",{class:"text-sm text-gray-500"},"Activity Description:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.activity_description},null,8,Pn)])):v("",!0),t.modelValue.aee_full_assessment?(o(),i("div",Bn,[l[27]||(l[27]=e("span",{class:"text-sm text-gray-500"},"Full Assessment:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.aee_full_assessment},null,8,In)])):v("",!0),t.modelValue.positive_effects_description?(o(),i("div",jn,[l[28]||(l[28]=e("span",{class:"text-sm text-gray-500"},"Positive Effects:",-1)),e("p",Fn,f(t.modelValue.positive_effects_description),1)])):v("",!0),t.modelValue.effects_visual_amenity||t.modelValue.effects_traffic_parking||t.modelValue.effects_noise?(o(),i("div",Rn,[l[29]||(l[29]=e("span",{class:"text-sm text-gray-500"},"Adverse Effects Summary:",-1)),e("ul",An,[t.modelValue.effects_visual_amenity?(o(),i("li",zn,"Visual/Amenity: "+f(k(t.modelValue.effects_visual_amenity,50)),1)):v("",!0),t.modelValue.effects_traffic_parking?(o(),i("li",Nn,"Traffic/Parking: "+f(k(t.modelValue.effects_traffic_parking,50)),1)):v("",!0),t.modelValue.effects_noise?(o(),i("li",Ln,"Noise: "+f(k(t.modelValue.effects_noise,50)),1)):v("",!0)])])):v("",!0),t.modelValue.mitigation_measures?(o(),i("div",En,[l[30]||(l[30]=e("span",{class:"text-sm text-gray-500"},"Mitigation Measures:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.mitigation_measures},null,8,On)])):v("",!0),x.value?v("",!0):(o(),i("p",Un," AEE not yet completed "))])])]),e("div",Hn,[l[36]||(l[36]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Statutory Declarations")],-1)),e("div",Gn,[e("div",Wn,[e("div",Jn,[(o(),i("svg",{class:j(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_accuracy||t.modelValue.declaration_rma_compliance?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[32]||(l[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:j(["text-sm",t.modelValue.declaration_accuracy||t.modelValue.declaration_rma_compliance?"text-gray-900":"text-gray-500"])}," Declaration of Accuracy & RMA Compliance ",2)]),e("div",Yn,[(o(),i("svg",{class:j(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_authority||t.modelValue.declaration_authorized?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[33]||(l[33]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:j(["text-sm",t.modelValue.declaration_authority||t.modelValue.declaration_authorized?"text-gray-900":"text-gray-500"])}," Declaration of Authority to Apply ",2)]),e("div",Kn,[(o(),i("svg",{class:j(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_acknowledgment||t.modelValue.declaration_public_information?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[34]||(l[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:j(["text-sm",t.modelValue.declaration_acknowledgment||t.modelValue.declaration_public_information?"text-gray-900":"text-gray-500"])}," Public Information & Privacy Acknowledgment ",2)]),t.modelValue.requester_signature?(o(),i("div",Qn,[l[35]||(l[35]=e("span",{class:"text-sm text-gray-500"},"Signed by:",-1)),e("p",Zn,f(t.modelValue.requester_signature),1),t.modelValue.signature_date?(o(),i("p",Xn," Date: "+f(D(t.modelValue.signature_date)),1)):v("",!0)])):v("",!0)])])])],64)):v("",!0),l[38]||(l[38]=ne('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6" data-v-43d60ff6><div class="flex items-start gap-2 sm:gap-3" data-v-43d60ff6><svg class="w-5 h-5 sm:w-6 sm:h-6 text-yellow-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-43d60ff6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-43d60ff6></path></svg><div data-v-43d60ff6><h4 class="font-semibold text-yellow-900 text-sm sm:text-base" data-v-43d60ff6>Before You Submit</h4><ul class="mt-2 text-xs sm:text-sm text-yellow-800 space-y-1 list-disc list-inside" data-v-43d60ff6><li data-v-43d60ff6>Review all information carefully for accuracy and completeness</li><li data-v-43d60ff6>Ensure all required fields are completed</li><li data-v-43d60ff6>For Resource Consent applications, verify all statutory declarations are confirmed</li><li data-v-43d60ff6>Once submitted, you cannot edit the application (you may need to withdraw and resubmit)</li></ul></div></div></div>',1)),_.value?v("",!0):(o(),i("div",er,[...l[37]||(l[37]=[ne('<div class="flex items-start gap-2 sm:gap-3" data-v-43d60ff6><svg class="w-5 h-5 text-red-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-43d60ff6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-43d60ff6></path></svg><div data-v-43d60ff6><h5 class="font-semibold text-red-900 text-xs sm:text-sm" data-v-43d60ff6>Application Incomplete</h5><p class="text-red-800 text-xs sm:text-sm mt-1" data-v-43d60ff6> Please complete all required sections before submitting. Use the Previous button to go back and fill in missing information. </p></div></div>',1)])]))])])}}},sr=me(tr,[["__scopeId","data-v-43d60ff6"]]),lr={class:"min-h-screen bg-gray-50"},or={class:"bg-white shadow-sm border-b border-gray-200"},ar={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},nr={class:"flex items-center justify-between py-4"},rr={class:"flex items-center gap-2"},ir={class:"bg-white border-b border-gray-200"},ur={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},dr={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},cr={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},mr={key:0},pr={key:1},fr={key:2},vr={key:3},gr={key:5},yr={class:"text-xl font-bold text-red-600"},br={class:"list-disc list-inside mt-2 space-y-1 text-sm text-gray-700"},xr={key:0,class:"mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6 shadow-sm"},Sr={__name:"NewRequest",setup(t){const r=it(),d=De(),n=St(),a=ut(),{errors:b}=He(),c=P(!1),m=P(!1),p=P(!1),g=P({loading:!1,data:[]}),x=P(null),h=$(()=>{var S;return(S=n.requestTypeConfig)!=null&&S.steps?n.requestTypeConfig.steps.length+4:4}),k=$(()=>{var C;const S=["Council","Type","Process Info"];return(C=n.requestTypeConfig)!=null&&C.steps&&S.push(...n.requestTypeConfig.steps.map(F=>F.step_title)),S.push("Review"),S}),D=$(()=>{var S;return((S=n.requestTypeConfig)==null?void 0:S.steps)&&n.requestTypeConfig.steps.length>0}),_=$(()=>!0),u=$(()=>n.currentStep>=3),l=$(()=>{var S;return n.currentStep>2&&n.currentStep<h.value-1&&((S=n.requestTypeConfig)==null?void 0:S.council_meeting_available)===1});function s(){p.value=!0}function y(S){console.log("Meeting booked:",S)}function T(){const S=n.currentStep;return S>=0&&S<k.value.length?k.value[S]:""}function I(){var F;const S=n.currentStep,C=3;if(S<C||S>=h.value-1)return null;if((F=n.requestTypeConfig)!=null&&F.steps){const ie=S-C;if(ie>=0&&ie<n.requestTypeConfig.steps.length)return n.requestTypeConfig.steps[ie]}return null}function E(){const S=n.formData.council;if(!S)return"";const C=a.councils.find(F=>F.council_code===S);return(C==null?void 0:C.council_name)||S}function U(S){return N(this,null,function*(){g.value.loading=!0,yield a.loadRequestTypesForCouncil(S),g.value={loading:!1,data:a.requestTypes||[]}})}function Q(S){return N(this,null,function*(){if(n.updateField("request_type",S),yield n.initialize(S),x.value=n.requestTypeConfig,!n.requestTypeConfig){console.error("[NewRequest] Failed to load request type config");return}})}function re(){return N(this,null,function*(){var S;if(n.currentStep===0&&!n.formData.council){alert("Please select a council before continuing.");return}if(n.currentStep===1&&!n.formData.request_type){alert("Please select a request type before continuing.");return}if(n.currentStep===2&&!n.currentRequestId){if(console.log("[NewRequest] Auto-saving draft after Process Info step..."),console.log("[NewRequest] requestTypeConfig:",n.requestTypeConfig),console.log("[NewRequest] usesConfigurableSteps:",D.value),console.log("[NewRequest] config steps:",(S=n.requestTypeConfig)==null?void 0:S.steps),yield n.saveDraft(),console.log("[NewRequest] Draft saved with ID:",n.currentRequestId),D.value)console.log("[NewRequest] Dynamic steps configured, continuing to next step...");else if(n.currentRequestId){console.log("[NewRequest] No dynamic steps configured, redirecting to detail page..."),d.push(`/request/${n.currentRequestId}`);return}}n.currentRequestId&&(yield n.saveProgress()),n.nextStep()})}function q(){n.previousStep()}function w(){return N(this,null,function*(){try{yield n.saveDraft(),n.currentRequestId?d.push(`/request/${n.currentRequestId}`):c.value=!0}catch(S){console.error("Failed to save draft:",S)}})}function B(){return N(this,null,function*(){try{yield n.saveDraft(),d.push({name:"Dashboard"})}catch(S){console.error("Failed to save draft:",S)}})}function W(){return N(this,null,function*(){try{yield n.submitRequest();const S=n.formData.council;S?d.push(`/council/${S}/dashboard`):d.push("/dashboard")}catch(S){console.error("Failed to submit request:",S)}})}function fe(){d.push("/dashboard")}return ce(()=>n.currentStep,()=>{},{immediate:!0}),Z(()=>N(this,null,function*(){const S=r.query.type,C=r.query.draft,F=r.query.council,ie=r.query.locked==="true";if(C&&S){yield n.initialize(S,C),x.value=n.requestTypeConfig;return}F&&!C?(n.updateField("council",F),yield U(F),ie&&(n.currentStep=1,S&&(yield n.initialize(S),x.value=n.requestTypeConfig,n.updateField("request_type",S),n.currentStep=2))):S&&!C&&!F&&(yield n.initialize(S),x.value=n.requestTypeConfig,n.updateField("request_type",S))})),(S,C)=>(o(),i("div",lr,[e("header",or,[e("div",ar,[e("div",nr,[e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:fe,class:"text-gray-500 hover:text-gray-700"},[...C[8]||(C[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),C[9]||(C[9]=e("div",null,[e("h1",{class:"text-xl font-bold text-gray-900"},"New Application")],-1))]),e("div",rr,[u.value?(o(),L(V(oe),{key:0,onClick:w,variant:"outline",theme:"gray",loading:V(n).isSaving},{default:A(()=>[...C[10]||(C[10]=[M(" Save Draft ",-1)])]),_:1},8,["loading"])):v("",!0),u.value?(o(),L(V(oe),{key:1,onClick:B,variant:"outline",theme:"gray",loading:V(n).isSaving},{default:A(()=>[...C[11]||(C[11]=[M(" Save and Close ",-1)])]),_:1},8,["loading"])):v("",!0)])])])]),e("div",ir,[e("div",ur,[z(At,{"current-step":V(n).currentStep,"total-steps":h.value,"step-titles":k.value},null,8,["current-step","total-steps","step-titles"])])]),e("main",dr,[e("div",cr,[T()==="Council"?(o(),i("div",mr,[z(Xt,{modelValue:V(n).formData,"onUpdate:modelValue":C[0]||(C[0]=F=>V(n).formData=F),onCouncilChange:U},null,8,["modelValue"])])):T()==="Type"?(o(),i("div",pr,[z(ms,{modelValue:V(n).formData,"onUpdate:modelValue":C[1]||(C[1]=F=>V(n).formData=F),"request-types":g.value,onTypeSelected:Q},null,8,["modelValue","request-types"])])):T()==="Process Info"?(o(),i("div",fr,[z(qs,{"request-type-details":x.value,"council-name":E(),modelValue:V(n).formData,"onUpdate:modelValue":C[2]||(C[2]=F=>V(n).formData=F),onContinue:re},null,8,["request-type-details","council-name","modelValue"])])):T()==="Review"?(o(),i("div",vr,[z(sr,{modelValue:V(n).formData,"onUpdate:modelValue":C[3]||(C[3]=F=>V(n).formData=F),"request-type-config":V(n).requestTypeConfig},null,8,["modelValue","request-type-config"])])):D.value&&I()?(o(),L(ga,{key:4,stepConfig:I(),modelValue:V(n).formData,"onUpdate:modelValue":C[4]||(C[4]=F=>V(n).formData=F)},null,8,["stepConfig","modelValue"])):(o(),i("div",gr,[e("h2",yr,"ERROR: Step "+f(V(n).currentStep)+" Fallback Hit!",1),C[17]||(C[17]=e("p",{class:"mt-2"},"The dynamic step condition failed to render. Check the following values:",-1)),e("ul",br,[e("li",null,[C[12]||(C[12]=e("strong",null,"Current Step Title:",-1)),M(" "+f(T()),1)]),e("li",null,[C[13]||(C[13]=e("strong",null,"Request Config Loaded:",-1)),M(" "+f(!!V(n).requestTypeConfig),1)]),e("li",null,[C[14]||(C[14]=e("strong",null,"Calculated Total Steps:",-1)),M(" "+f(h.value),1)]),e("li",null,[C[15]||(C[15]=e("strong",null,"Uses Configurable Steps:",-1)),M(" "+f(D.value),1)]),e("li",null,[C[16]||(C[16]=e("strong",null,"Current Step Config:",-1)),M(" "+f(JSON.stringify(I())),1)])]),C[18]||(C[18]=e("p",{class:"mt-4 text-sm text-gray-500"},"If 'Current Step Config' is not null, the issue is likely within DynamicStepRenderer or component registration.",-1))]))]),l.value?(o(),i("div",xr,[e("div",{class:"flex items-start justify-between"},[e("div",{class:"flex-1"},[C[19]||(C[19]=ne('<div class="flex items-center gap-2 mb-2"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><h3 class="text-lg font-semibold text-gray-900">Pre-Application Meeting Available</h3></div><p class="text-sm text-gray-700 mb-3"> Schedule a meeting with council planners to discuss your application before submitting. This optional step can help clarify requirements and improve your application. </p>',2)),e("button",{onClick:s,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," Request Council Meeting ")])])])):v("",!0),z(Et,{"current-step":V(n).currentStep,"total-steps":h.value,"is-last-step":V(n).isLastStep,"can-go-next":_.value,"can-save-draft":u.value,"is-saving":V(n).isSaving,"is-submitting":V(n).isSubmitting,onNext:re,onPrevious:q,onSaveDraft:w,onSubmit:W},null,8,["current-step","total-steps","is-last-step","can-go-next","can-save-draft","is-saving","is-submitting"])]),z(Gt,{show:c.value,"onUpdate:show":C[5]||(C[5]=F=>c.value=F),"draft-id":V(n).currentRequestId},null,8,["show","draft-id"]),z(Zt,{show:m.value,"onUpdate:show":C[6]||(C[6]=F=>m.value=F),errors:V(b)},null,8,["show","errors"]),z(dt,{show:p.value,"onUpdate:show":C[7]||(C[7]=F=>p.value=F),"request-id":V(n).currentRequestId,"request-type-code":V(n).formData.request_type,"council-code":V(n).formData.council,onBooked:y},null,8,["show","request-id","request-type-code","council-code"])]))}};export{Sr as default};
//# sourceMappingURL=NewRequest-boBkby5G.js.map
