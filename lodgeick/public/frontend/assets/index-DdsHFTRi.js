const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Landing-DHqwYbAm.js","assets/frappe-ui-E4oUKPDc.js","assets/vue-vendor-D9RCx05D.js","assets/ui-components-88qJBhde.js","assets/frappe-ui-BcYQ_VTL.css","assets/Landing-tn0RQdqM.css","assets/Dashboard-Vsjm23d5.js","assets/StatCard-BwumLenT.js","assets/request.service-91aYHjAe.js","assets/Home-BMXAU1Om.js","assets/NewRequest-Bsp6aWRF.js","assets/RequestHeader-CAKatJu2.js","assets/NewRequest-Oa-AT-uZ.css","assets/RequestDetail-C0VuWuFN.js","assets/StatusBadge-CodqynBe.js","assets/useStatutoryClock-D2bVa1LW.js","assets/InternalRequestManagement-BnmWHL7O.js","assets/InternalRequestDetail-BuhDYALe.js","assets/Settings-qqo3jszm.js","assets/RequestTypeBuilder-1visgY_z.js","assets/AssessmentTemplateBuilder-BSUVoTEt.js","assets/CompanyManagement-vG1JiQRB.js","assets/Login-BP3lmvlr.js","assets/Register-BgMAUU2m.js","assets/validation-DTfeOk9t.js","assets/CompanyRegistration-4MsTFgc-.js"])))=>i.map(i=>d[i]);
var A=(e,r,t)=>new Promise((o,n)=>{var i=a=>{try{s(t.next(a))}catch(u){n(u)}},c=a=>{try{s(t.throw(a))}catch(u){n(u)}},s=a=>a.done?o(a.value):Promise.resolve(a.value).then(i,c);s((t=t.apply(e,r)).next())});import{ac as T,a as C,o as N,R as V,z as F,c as q,am as z,an as B,ah as M,ao as U}from"./vue-vendor-D9RCx05D.js";import{_ as K,c as P,a as W,b as l,l as J,s as G,r as Q,p as X,d as Y,e as Z,D as x,f as H,g as j,I as ee,h as te,i as re,j as oe}from"./frappe-ui-E4oUKPDc.js";import"./ui-components-88qJBhde.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();const ne={};function ie(e,r){const t=T("router-view");return N(),C("div",null,[V(t)])}const se=K(ne,[["render",ie]]),R=P({url:"frappe.auth.get_logged_user",cache:"User",onError(e){e&&e.exc_type==="AuthenticationError"&&y.push({name:"LoginPage"})}});function k(){let r=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return r==="Guest"&&(r=null),r}const h=F({login:P({url:"login",makeParams({email:e,password:r}){return{usr:e,pwd:r}},onSuccess(){return A(this,null,function*(){R.reload(),h.user=k(),h.login.reset();try{yield W("lodgeick.api.track_login_event",{source:"web"})}catch(e){console.error("Failed to track login event:",e)}y.replace({name:"Dashboard"})})}}),logout:P({url:"logout",onSuccess(){R.reset(),h.user=k(),y.replace({name:"Login"})}}),user:k(),isLoggedIn:q(()=>!!h.user)}),ae=[{path:"/",name:"Landing",component:()=>l(()=>import("./Landing-DHqwYbAm.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{public:!0}},{path:"/dashboard",name:"Dashboard",component:()=>l(()=>import("./Dashboard-Vsjm23d5.js"),__vite__mapDeps([6,2,1,3,4,7,8]))},{path:"/home",name:"Home",component:()=>l(()=>import("./Home-BMXAU1Om.js"),__vite__mapDeps([9,1,2,3,4]))},{path:"/request/new",name:"NewRequest",component:()=>l(()=>import("./NewRequest-Bsp6aWRF.js").then(e=>e.N),__vite__mapDeps([10,1,2,3,4,8,11,12])),meta:{public:!0}},{path:"/request/:id",name:"RequestDetail",component:()=>l(()=>import("./RequestDetail-C0VuWuFN.js"),__vite__mapDeps([13,1,2,3,4,14,11,15]))},{path:"/internal",name:"InternalRequestManagement",component:()=>l(()=>import("./InternalRequestManagement-BnmWHL7O.js"),__vite__mapDeps([16,2,1,3,4,7,14]))},{path:"/internal/request/:id",name:"InternalRequestDetail",component:()=>l(()=>import("./InternalRequestDetail-BuhDYALe.js"),__vite__mapDeps([17,1,2,3,4,14,11,15]))},{path:"/settings",name:"Settings",component:()=>l(()=>import("./Settings-qqo3jszm.js"),__vite__mapDeps([18,2,1,3,4]))},{path:"/admin/request-type-builder",name:"RequestTypeBuilder",component:()=>l(()=>import("./RequestTypeBuilder-1visgY_z.js"),__vite__mapDeps([19,1,2,3,4])),meta:{requiresAdmin:!0}},{path:"/admin/assessment-template-builder",name:"AssessmentTemplateBuilder",component:()=>l(()=>import("./AssessmentTemplateBuilder-BSUVoTEt.js"),__vite__mapDeps([20,2,1,3,4])),meta:{requiresAdmin:!0}},{path:"/admin/assessment-template-builder/:id",name:"AssessmentTemplateBuilderEdit",component:()=>l(()=>import("./AssessmentTemplateBuilder-BSUVoTEt.js"),__vite__mapDeps([20,2,1,3,4])),meta:{requiresAdmin:!0}},{path:"/company",name:"CompanyManagement",component:()=>l(()=>import("./CompanyManagement-vG1JiQRB.js"),__vite__mapDeps([21,2,1,3,4]))},{name:"Login",path:"/account/login",component:()=>l(()=>import("./Login-BP3lmvlr.js"),__vite__mapDeps([22,2,1,3,4])),meta:{public:!0}},{name:"Register",path:"/account/register",component:()=>l(()=>import("./Register-BgMAUU2m.js"),__vite__mapDeps([23,2,1,3,4,24])),meta:{public:!0}},{name:"CompanyRegistration",path:"/account/register-company",component:()=>l(()=>import("./CompanyRegistration-4MsTFgc-.js"),__vite__mapDeps([25,2,1,3,4,24])),meta:{public:!0}}],y=z({history:B("/frontend"),routes:ae});y.beforeEach((e,r,t)=>A(void 0,null,function*(){if(e.meta.public){t();return}let o=h.isLoggedIn;try{yield R.promise}catch(n){o=!1}e.name==="Login"&&o?t({name:"Dashboard"}):e.name!=="Login"&&!o?t({name:"Login"}):t()}));const ce=9e3;let d=null,E=!1;function le(){if(E)return console.warn("[Socket.io] Skipping initialization - socketio server not available"),null;try{const e=window.location.hostname,r=window.site_name,t=window.location.port?`:${ce}`:"",n=`${t?"http":"https"}://${e}${t}/${r}`;return d=J(n,{withCredentials:!0,reconnectionAttempts:3,reconnectionDelay:2e3,timeout:5e3}),d.on("connect_error",i=>{console.warn("[Socket.io] Connection failed - real-time features disabled:",i.message),E=!0,d&&(d.close(),d=null)}),d.on("connect",()=>{console.log("[Socket.io] Connected successfully"),E=!1}),d}catch(e){return console.warn("[Socket.io] Initialization error:",e),E=!0,null}}function ue(e,r){if(e==null)return;let t=e;for(let o=0;o<r.length;o++){if(t===void 0||t[r[o]]===void 0)return;if(t===null||t[r[o]]===null)return null;t=t[r[o]]}return t}function v(e,r,t){if(t.length===0)return r;const o=t[0];return t.length>1&&(r=v(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,o)?Number.isInteger(Number(t[1]))?[]:{}:e[o],r,Array.prototype.slice.call(t,1))),Number.isInteger(Number(o))&&Array.isArray(e)?e.slice()[o]:Object.assign({},e,{[o]:r})}function O(e,r){if(e==null||r.length===0)return e;if(r.length===1){if(e==null)return e;if(Number.isInteger(r[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(r[0],1);const t={};for(const o in e)t[o]=e[o];return delete t[r[0]],t}if(e[r[0]]==null){if(Number.isInteger(r[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const t={};for(const o in e)t[o]=e[o];return t}return v(e,O(e[r[0]],Array.prototype.slice.call(r,1)),[r[0]])}function S(e,r){return r.map(t=>t.split(".")).map(t=>[t,ue(e,t)]).filter(t=>t[1]!==void 0).reduce((t,o)=>v(t,o[1],o[0]),{})}function D(e,r){return r.map(t=>t.split(".")).reduce((t,o)=>O(t,o),e)}function I(e,{storage:r,serializer:t,key:o,debug:n,pick:i,omit:c,beforeHydrate:s,afterHydrate:a},u,_=!0){try{_&&(s==null||s(u));const p=r.getItem(o);if(p){const g=t.deserialize(p),m=i?S(g,i):g,b=c?D(m,c):m;e.$patch(b)}_&&(a==null||a(u))}catch(p){n&&console.error("[pinia-plugin-persistedstate]",p)}}function w(e,{storage:r,serializer:t,key:o,debug:n,pick:i,omit:c}){try{const s=i?S(e,i):e,a=c?D(s,c):s,u=t.serialize(a);r.setItem(o,u)}catch(s){n&&console.error("[pinia-plugin-persistedstate]",s)}}function me(e,r){return typeof e=="function"?e(r):typeof e=="string"?e:r}function pe(e,r,t){const{pinia:o,store:n,options:{persist:i=t}}=e;if(!i)return;// v8 ignore if -- @preserve
if(!(n.$id in o.state.value)){const s=o._s.get(n.$id.replace("__hot:",""));s&&Promise.resolve().then(()=>s.$persist());return}const c=(Array.isArray(i)?i:i===!0?[{}]:[i]).map(r);n.$hydrate=({runHooks:s=!0}={})=>{c.forEach(a=>{I(n,a,e,s)})},n.$persist=()=>{c.forEach(s=>{w(n.$state,s)})},c.forEach(s=>{I(n,s,e),n.$subscribe((a,u)=>w(u,s),{detached:!0})})}function de(e={}){return function(r){var t;pe(r,o=>{var i,c,s,a,u,_,p,g;const n=me(o.key,r.store.$id);return{key:(e.key?e.key:m=>m)(n),debug:(c=(i=o.debug)!=null?i:e.debug)!=null?c:!1,serializer:(a=(s=o.serializer)!=null?s:e.serializer)!=null?a:{serialize:m=>JSON.stringify(m),deserialize:m=>JSON.parse(m)},storage:(_=(u=o.storage)!=null?u:e.storage)!=null?_:window.localStorage,beforeHydrate:(p=o.beforeHydrate)!=null?p:e.beforeHydrate,afterHydrate:(g=o.afterHydrate)!=null?g:e.afterHydrate,pick:o.pick,omit:o.omit}},(t=e.auto)!=null?t:!1)}}var fe=de();const L={Button:re,TextInput:te,Input:ee,FormControl:j,ErrorMessage:H,Dialog:x,Alert:Z,Badge:Y},f=M(se),$=U();$.use(fe);G("resourceFetcher",oe);f.use($);f.use(y);f.use(Q);f.use(X);function _e(){return A(this,null,function*(){if(window.csrf_token)console.log("[main.js] ✅ CSRF token loaded from boot data");else{console.log("[main.js] No boot CSRF token, trying cookies...");const r=document.cookie.split("; ").find(t=>t.startsWith("csrf_token="));if(r)window.csrf_token=r.split("=")[1],console.log("[main.js] ✅ CSRF token found in cookies");else try{if(console.log("[main.js] Fetching CSRF token from API..."),(yield fetch("/api/method/frappe.auth.get_logged_user",{credentials:"include"})).ok){const o=document.cookie.split("; ").find(n=>n.startsWith("csrf_token="));o?(window.csrf_token=o.split("=")[1],console.log("[main.js] ✅ CSRF token set after API fetch")):console.warn("[main.js] ⚠️ No CSRF token available")}}catch(t){console.error("[main.js] ❌ Could not fetch CSRF token:",t)}}const e=le();f.config.globalProperties.$socket=e;for(const r in L)f.component(r,L[r]);f.mount("#app")})}_e();export{h as s};
//# sourceMappingURL=index-DdsHFTRi.js.map
