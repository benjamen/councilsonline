{"version":3,"file":"CouncilLogin-B7exLFdi.js","sources":["../../../../frontend/src/pages/CouncilLogin.vue"],"sourcesContent":["<template>\n  <div\n    class=\"min-h-screen flex items-center justify-center p-4\"\n    :style=\"backgroundStyle\"\n  >\n    <div class=\"w-full max-w-md\">\n      <!-- Council Logo & Header -->\n      <div class=\"text-center mb-8\">\n        <div v-if=\"councilSettings?.logo\" class=\"mb-4\">\n          <img\n            :src=\"councilSettings.logo\"\n            :alt=\"councilSettings.council_name\"\n            class=\"h-20 mx-auto object-contain\"\n          />\n        </div>\n        <div v-else class=\"inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-4 shadow-lg\" :style=\"{ backgroundColor: primaryColor }\">\n          <svg class=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n          </svg>\n        </div>\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">Welcome Back</h1>\n        <p class=\"text-gray-600\">Sign in to {{ councilSettings?.council_name || 'Council' }} portal</p>\n      </div>\n\n      <!-- Custom HTML Content -->\n      <div\n        v-if=\"councilSettings?.login_page_custom_html\"\n        class=\"mb-6 prose prose-sm max-w-none bg-white rounded-lg p-4 shadow-sm\"\n        v-html=\"councilSettings.login_page_custom_html\"\n      />\n\n      <!-- Login Card -->\n      <div class=\"bg-white rounded-2xl shadow-xl p-8 border border-gray-100\">\n        <form @submit.prevent=\"submit\" class=\"space-y-5\">\n          <!-- Email/Username Input -->\n          <div>\n            <label for=\"email\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n              Email or Username\n            </label>\n            <Input\n              id=\"email\"\n              name=\"email\"\n              type=\"text\"\n              required\n              placeholder=\"you@example.com\"\n              class=\"w-full\"\n            />\n          </div>\n\n          <!-- Password Input -->\n          <div>\n            <div class=\"flex items-center justify-between mb-2\">\n              <label for=\"password\" class=\"block text-sm font-medium text-gray-700\">\n                Password\n              </label>\n              <router-link\n                :to=\"{ name: 'CouncilForgotPassword', params: { councilCode } }\"\n                class=\"text-sm font-medium hover:opacity-80\"\n                :style=\"{ color: primaryColor }\"\n              >\n                Forgot password?\n              </router-link>\n            </div>\n            <Input\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              required\n              placeholder=\"Enter your password\"\n              class=\"w-full\"\n            />\n          </div>\n\n          <!-- Remember Me -->\n          <div class=\"flex items-center\">\n            <input\n              id=\"remember-me\"\n              name=\"remember-me\"\n              type=\"checkbox\"\n              class=\"h-4 w-4 border-gray-300 rounded\"\n              :style=\"{ accentColor: primaryColor }\"\n            />\n            <label for=\"remember-me\" class=\"ml-2 block text-sm text-gray-700\">\n              Remember me for 30 days\n            </label>\n          </div>\n\n          <!-- Error Message -->\n          <div v-if=\"session.login.error\" class=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n            <div class=\"flex items-start\">\n              <svg class=\"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <p class=\"text-sm text-red-700\">{{ session.login.error }}</p>\n            </div>\n          </div>\n\n          <!-- Submit Button -->\n          <Button\n            type=\"submit\"\n            :loading=\"session.login.loading\"\n            variant=\"solid\"\n            class=\"w-full text-white py-3 text-base font-medium\"\n            :style=\"{ backgroundColor: primaryColor, borderColor: primaryColor }\"\n          >\n            <template v-if=\"!session.login.loading\">\n              Sign In\n            </template>\n            <template v-else>\n              Signing in...\n            </template>\n          </Button>\n        </form>\n      </div>\n\n      <!-- Sign Up Link -->\n      <div class=\"text-center mt-6\">\n        <p class=\"text-sm text-gray-600\">\n          Don't have an account?\n          <router-link\n            :to=\"{ name: 'CouncilRegister', params: { councilCode } }\"\n            class=\"font-medium hover:opacity-80\"\n            :style=\"{ color: primaryColor }\"\n          >\n            Create one now\n          </router-link>\n        </p>\n      </div>\n\n      <!-- Back to Council Landing -->\n      <div class=\"text-center mt-4\">\n        <router-link\n          :to=\"{ name: 'CouncilLanding', params: { councilCode } }\"\n          class=\"text-sm text-gray-500 hover:text-gray-700 inline-flex items-center\"\n        >\n          <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n          </svg>\n          Back to {{ councilSettings?.council_name || 'Council' }} home\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from \"vue\"\nimport { useRoute } from \"vue-router\"\nimport { Input, Button } from \"frappe-ui\"\nimport { session } from \"../data/session\"\nimport { useCouncilStore } from \"../stores/councilStore\"\n\nconst route = useRoute()\nconst councilStore = useCouncilStore()\n\nconst councilCode = computed(() => route.params.councilCode?.toUpperCase())\nconst councilSettings = ref(null)\nconst isLoading = ref(true)\n\n// Load council settings on mount\nonMounted(async () => {\n  try {\n    councilSettings.value = await councilStore.getCouncilSettings(councilCode.value)\n  } catch (error) {\n    console.error('Failed to load council settings:', error)\n  } finally {\n    isLoading.value = false\n  }\n})\n\n// Computed styles based on council branding\nconst primaryColor = computed(() => councilSettings.value?.primary_color || '#2563eb')\nconst secondaryColor = computed(() => councilSettings.value?.secondary_color || '#64748b')\n\nconst backgroundStyle = computed(() => {\n  const color = primaryColor.value\n  // Create a light gradient based on primary color\n  return {\n    background: `linear-gradient(to bottom right, ${color}15, ${secondaryColor.value}15)`\n  }\n})\n\nfunction submit(e) {\n  const formData = new FormData(e.target)\n  session.login.submit({\n    email: formData.get(\"email\"),\n    password: formData.get(\"password\"),\n  })\n}\n</script>\n"],"names":["route","useRoute","councilStore","useCouncilStore","councilCode","computed","_a","councilSettings","ref","isLoading","onMounted","__async","error","primaryColor","secondaryColor","backgroundStyle","submit","e","formData","session","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_openBlock","_hoisted_3","_cache","_hoisted_5","_b","_c","_hoisted_7","_createVNode","_unref","Input","_hoisted_8","_component_router_link","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_toDisplayString","Button","_normalizeStyle","_Fragment","_hoisted_13","_hoisted_14","_hoisted_15","_createTextVNode"],"mappings":"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"}