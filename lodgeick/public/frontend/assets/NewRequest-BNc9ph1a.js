var ao=Object.defineProperty,ro=Object.defineProperties;var no=Object.getOwnPropertyDescriptors;var et=Object.getOwnPropertySymbols;var St=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var Vt=(p,q,_)=>q in p?ao(p,q,{enumerable:!0,configurable:!0,writable:!0,value:_}):p[q]=_,N=(p,q)=>{for(var _ in q||(q={}))St.call(q,_)&&Vt(p,_,q[_]);if(et)for(var _ of et(q))Mt.call(q,_)&&Vt(p,_,q[_]);return p},ve=(p,q)=>ro(p,no(q));var je=(p,q)=>{var _={};for(var V in p)St.call(p,V)&&q.indexOf(V)<0&&(_[V]=p[V]);if(p!=null&&et)for(var V of et(p))q.indexOf(V)<0&&Mt.call(p,V)&&(_[V]=p[V]);return _};var le=(p,q,_)=>new Promise((V,t)=>{var u=S=>{try{s(_.next(S))}catch(h){t(h)}},d=S=>{try{s(_.throw(S))}catch(h){t(h)}},s=S=>S.done?V(S.value):Promise.resolve(S.value).then(u,d);s((_=_.apply(p,q)).next())});import{r as U,q as Ve,x as yt,y as de,z as qe,j as H,A as it,B as De,C as st,E as io,G as lt,H as at,J as uo,K as ze,L as Oe,M as fe,N as rt,O as nt,P as po,Q as zt,R as ae,S as Le,T as co,F as Y,U as tt,V as mo,W as go,X as Re,Y as Me,c as l,o,a as e,b as re,m as J,Z as Q,d as y,t as v,g as X,l as f,$ as oe,h as O,n as ye,v as ie,a0 as D,a1 as ce,a2 as Fe,a3 as Te,k as He,e as Ue,a4 as bo,a5 as ue,a6 as qt,a7 as Ie,u as xe,a8 as vo,w as ke,a9 as yo,aa as Pt,ab as fo,f as xo,ac as _o,ad as ho,i as Dt,s as Ut}from"./index-Cl8_4WWW.js";import{C as wo}from"./CouncilSelector-ziWSClwm.js";function jt(p,q){if(p)return p;let _=q!=null?q:"button";if(typeof _=="string"&&_.toLowerCase()==="button")return"button"}function Tt(p,q){let _=U(jt(p.value.type,p.value.as));return Ve(()=>{_.value=jt(p.value.type,p.value.as)}),yt(()=>{var V;_.value||de(q)&&de(q)instanceof HTMLButtonElement&&!((V=de(q))!=null&&V.hasAttribute("type"))&&(_.value="button")}),_}var ko=(p=>(p[p.Open=0]="Open",p[p.Closed=1]="Closed",p))(ko||{});let It=Symbol("DisclosureContext");function ft(p){let q=Oe(It,null);if(q===null){let _=new Error(`<${p} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(_,ft),_}return q}let Bt=Symbol("DisclosurePanelContext");function $o(){return Oe(Bt,null)}let Co=qe({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(p,{slots:q,attrs:_}){let V=U(p.defaultOpen?0:1),t=U(null),u=U(null),d={buttonId:U(`headlessui-disclosure-button-${at()}`),panelId:U(`headlessui-disclosure-panel-${at()}`),disclosureState:V,panel:t,button:u,toggleDisclosure(){V.value=ze(V.value,{0:1,1:0})},closeDisclosure(){V.value!==1&&(V.value=1)},close(s){d.closeDisclosure();let S=s?s instanceof HTMLElement?s:s.value instanceof HTMLElement?de(s):de(d.button):de(d.button);S==null||S.focus()}};return st(It,d),uo(H(()=>ze(V.value,{0:lt.Open,1:lt.Closed}))),()=>{let P=p,{defaultOpen:s}=P,S=je(P,["defaultOpen"]),h={open:V.value===0,close:d.close};return De({theirProps:S,ourProps:{},slot:h,slots:q,attrs:_,name:"Disclosure"})}}}),Ao=qe({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(p,{attrs:q,slots:_,expose:V}){let t=ft("DisclosureButton"),u=$o(),d=H(()=>u===null?!1:u.value===t.panelId.value);Ve(()=>{d.value||p.id!==null&&(t.buttonId.value=p.id)}),it(()=>{d.value||(t.buttonId.value=null)});let s=U(null);V({el:s,$el:s}),d.value||yt(()=>{t.button.value=s.value});let S=Tt(H(()=>({as:p.as,type:q.type})),s);function h(){var r;p.disabled||(d.value?(t.toggleDisclosure(),(r=de(t.button))==null||r.focus()):t.toggleDisclosure())}function P(r){var A;if(!p.disabled)if(d.value)switch(r.key){case fe.Space:case fe.Enter:r.preventDefault(),r.stopPropagation(),t.toggleDisclosure(),(A=de(t.button))==null||A.focus();break}else switch(r.key){case fe.Space:case fe.Enter:r.preventDefault(),r.stopPropagation(),t.toggleDisclosure();break}}function x(r){switch(r.key){case fe.Space:r.preventDefault();break}}return()=>{var r;let A={open:t.disclosureState.value===0},c=p,{id:i}=c,a=je(c,["id"]),b=d.value?{ref:s,type:S.value,onClick:h,onKeydown:P}:{id:(r=t.buttonId.value)!=null?r:i,ref:s,type:S.value,"aria-expanded":t.disclosureState.value===0,"aria-controls":t.disclosureState.value===0||de(t.panel)?t.panelId.value:void 0,disabled:p.disabled?!0:void 0,onClick:h,onKeydown:P,onKeyup:x};return De({ourProps:b,theirProps:a,slot:A,attrs:q,slots:_,name:"DisclosureButton"})}}}),Vo=qe({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(p,{attrs:q,slots:_,expose:V}){let t=ft("DisclosurePanel");Ve(()=>{p.id!==null&&(t.panelId.value=p.id)}),it(()=>{t.panelId.value=null}),V({el:t.panel,$el:t.panel}),st(Bt,t.panelId);let u=io(),d=H(()=>u!==null?(u.value&lt.Open)===lt.Open:t.disclosureState.value===0);return()=>{var s;let S={open:t.disclosureState.value===0,close:t.close},r=p,{id:h}=r,P=je(r,["id"]),x={id:(s=t.panelId.value)!=null?s:h,ref:t.panel};return De({ourProps:x,theirProps:P,slot:S,attrs:q,slots:_,features:rt.RenderStrategy|rt.Static,visible:d.value,name:"DisclosurePanel"})}}}),So=qe({props:{onFocus:{type:Function,required:!0}},setup(p){let q=U(!0);return()=>q.value?nt(zt,{as:"button",type:"button",features:po.Focusable,onFocus(_){_.preventDefault();let V,t=50;function u(){var d;if(t--<=0){V&&cancelAnimationFrame(V);return}if((d=p.onFocus)!=null&&d.call(p)){q.value=!1,cancelAnimationFrame(V);return}V=requestAnimationFrame(u)}V=requestAnimationFrame(u)}}):null}});var Mo=(p=>(p[p.Forwards=0]="Forwards",p[p.Backwards=1]="Backwards",p))(Mo||{}),qo=(p=>(p[p.Less=-1]="Less",p[p.Equal=0]="Equal",p[p.Greater=1]="Greater",p))(qo||{});let Et=Symbol("TabsContext");function We(p){let q=Oe(Et,null);if(q===null){let _=new Error(`<${p} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(_,We),_}return q}let xt=Symbol("TabsSSRContext"),Po=qe({name:"TabGroup",emits:{change:p=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(p,{slots:q,attrs:_,emit:V}){var t;let u=U((t=p.selectedIndex)!=null?t:p.defaultIndex),d=U([]),s=U([]),S=H(()=>p.selectedIndex!==null),h=H(()=>S.value?p.selectedIndex:u.value);function P(a){var b;let c=Le(x.tabs.value,de),F=Le(x.panels.value,de),K=c.filter(W=>{var I;return!((I=de(W))!=null&&I.hasAttribute("disabled"))});if(a<0||a>c.length-1){let W=ze(u.value===null?0:Math.sign(a-u.value),{[-1]:()=>1,0:()=>ze(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),I=ze(W,{0:()=>c.indexOf(K[0]),1:()=>c.indexOf(K[K.length-1])});I!==-1&&(u.value=I),x.tabs.value=c,x.panels.value=F}else{let W=c.slice(0,a),I=[...c.slice(a),...W].find(C=>K.includes(C));if(!I)return;let z=(b=c.indexOf(I))!=null?b:x.selectedIndex.value;z===-1&&(z=x.selectedIndex.value),u.value=z,x.tabs.value=c,x.panels.value=F}}let x={selectedIndex:H(()=>{var a,b;return(b=(a=u.value)!=null?a:p.defaultIndex)!=null?b:null}),orientation:H(()=>p.vertical?"vertical":"horizontal"),activation:H(()=>p.manual?"manual":"auto"),tabs:d,panels:s,setSelectedIndex(a){h.value!==a&&V("change",a),S.value||P(a)},registerTab(a){var b;if(d.value.includes(a))return;let c=d.value[u.value];if(d.value.push(a),d.value=Le(d.value,de),!S.value){let F=(b=d.value.indexOf(c))!=null?b:u.value;F!==-1&&(u.value=F)}},unregisterTab(a){let b=d.value.indexOf(a);b!==-1&&d.value.splice(b,1)},registerPanel(a){s.value.includes(a)||(s.value.push(a),s.value=Le(s.value,de))},unregisterPanel(a){let b=s.value.indexOf(a);b!==-1&&s.value.splice(b,1)}};st(Et,x);let r=U({tabs:[],panels:[]}),A=U(!1);Ve(()=>{A.value=!0}),st(xt,H(()=>A.value?null:r.value));let i=H(()=>p.selectedIndex);return Ve(()=>{ae([i],()=>{var a;return P((a=p.selectedIndex)!=null?a:p.defaultIndex)},{immediate:!0})}),yt(()=>{if(!S.value||h.value==null||x.tabs.value.length<=0)return;let a=Le(x.tabs.value,de);a.some((b,c)=>de(x.tabs.value[c])!==de(b))&&x.setSelectedIndex(a.findIndex(b=>de(b)===de(x.tabs.value[h.value])))}),()=>{let a={selectedIndex:u.value};return nt(Y,[d.value.length<=0&&nt(So,{onFocus:()=>{for(let b of d.value){let c=de(b);if((c==null?void 0:c.tabIndex)===0)return c.focus(),!0}return!1}}),De({theirProps:N(N({},_),co(p,["selectedIndex","defaultIndex","manual","vertical","onChange"])),ourProps:{},slot:a,slots:q,attrs:_,name:"TabGroup"})])}}}),Do=qe({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(p,{attrs:q,slots:_}){let V=We("TabList");return()=>{let t={selectedIndex:V.selectedIndex.value},u={role:"tablist","aria-orientation":V.orientation.value};return De({ourProps:u,theirProps:p,slot:t,attrs:q,slots:_,name:"TabList"})}}}),Uo=qe({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(p,{attrs:q,slots:_,expose:V}){var t;let u=(t=p.id)!=null?t:`headlessui-tabs-tab-${at()}`,d=We("Tab"),s=U(null);V({el:s,$el:s}),Ve(()=>d.registerTab(s)),it(()=>d.unregisterTab(s));let S=Oe(xt),h=H(()=>{if(S.value){let F=S.value.tabs.indexOf(u);return F===-1?S.value.tabs.push(u)-1:F}return-1}),P=H(()=>{let F=d.tabs.value.indexOf(s);return F===-1?h.value:F}),x=H(()=>P.value===d.selectedIndex.value);function r(F){var K;let W=F();if(W===tt.Success&&d.activation.value==="auto"){let I=(K=go(s))==null?void 0:K.activeElement,z=d.tabs.value.findIndex(C=>de(C)===I);z!==-1&&d.setSelectedIndex(z)}return W}function A(F){let K=d.tabs.value.map(W=>de(W)).filter(Boolean);if(F.key===fe.Space||F.key===fe.Enter){F.preventDefault(),F.stopPropagation(),d.setSelectedIndex(P.value);return}switch(F.key){case fe.Home:case fe.PageUp:return F.preventDefault(),F.stopPropagation(),r(()=>Re(K,Me.First));case fe.End:case fe.PageDown:return F.preventDefault(),F.stopPropagation(),r(()=>Re(K,Me.Last))}if(r(()=>ze(d.orientation.value,{vertical(){return F.key===fe.ArrowUp?Re(K,Me.Previous|Me.WrapAround):F.key===fe.ArrowDown?Re(K,Me.Next|Me.WrapAround):tt.Error},horizontal(){return F.key===fe.ArrowLeft?Re(K,Me.Previous|Me.WrapAround):F.key===fe.ArrowRight?Re(K,Me.Next|Me.WrapAround):tt.Error}}))===tt.Success)return F.preventDefault()}let i=U(!1);function a(){var F;i.value||(i.value=!0,!p.disabled&&((F=de(s))==null||F.focus({preventScroll:!0}),d.setSelectedIndex(P.value),mo(()=>{i.value=!1})))}function b(F){F.preventDefault()}let c=Tt(H(()=>({as:p.as,type:q.type})),s);return()=>{var F,K;let W={selected:x.value,disabled:(F=p.disabled)!=null?F:!1},I=je(p,[]),z={ref:s,onKeydown:A,onMousedown:b,onClick:a,id:u,role:"tab",type:c.value,"aria-controls":(K=de(d.panels.value[P.value]))==null?void 0:K.id,"aria-selected":x.value,tabIndex:x.value?0:-1,disabled:p.disabled?!0:void 0};return De({ourProps:z,theirProps:I,slot:W,attrs:q,slots:_,name:"Tab"})}}}),jo=qe({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(p,{slots:q,attrs:_}){let V=We("TabPanels");return()=>{let t={selectedIndex:V.selectedIndex.value};return De({theirProps:p,ourProps:{},slot:t,attrs:_,slots:q,name:"TabPanels"})}}}),Ro=qe({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(p,{attrs:q,slots:_,expose:V}){var t;let u=(t=p.id)!=null?t:`headlessui-tabs-panel-${at()}`,d=We("TabPanel"),s=U(null);V({el:s,$el:s}),Ve(()=>d.registerPanel(s)),it(()=>d.unregisterPanel(s));let S=Oe(xt),h=H(()=>{if(S.value){let r=S.value.panels.indexOf(u);return r===-1?S.value.panels.push(u)-1:r}return-1}),P=H(()=>{let r=d.panels.value.indexOf(s);return r===-1?h.value:r}),x=H(()=>P.value===d.selectedIndex.value);return()=>{var r;let A={selected:x.value},c=p,{tabIndex:i}=c,a=je(c,["tabIndex"]),b={ref:s,id:u,role:"tabpanel","aria-labelledby":(r=de(d.tabs.value[P.value]))==null?void 0:r.id,tabIndex:x.value?i:-1};return!x.value&&p.unmount&&!p.static?nt(zt,N({as:"span","aria-hidden":!0},b)):De({ourProps:b,theirProps:a,slot:A,attrs:q,slots:_,features:rt.Static|rt.RenderStrategy,visible:x.value,name:"TabPanel"})}}});const zo={__name:"Step1CouncilSelection",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","council-change"],setup(p,{emit:q}){const _=p,V=q,t=u=>{console.log("[Step1CouncilSelection] updateCouncil called with:",u),console.log("[Step1CouncilSelection] Current modelValue:",_.modelValue),V("update:modelValue",ve(N({},_.modelValue),{council:u})),V("council-change",u),console.log("[Step1CouncilSelection] Emitted events")};return(u,d)=>(o(),l("div",null,[d[0]||(d[0]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Council",-1)),d[1]||(d[1]=e("p",{class:"text-gray-600 mb-8"},"Choose the council that will process your application",-1)),re(wo,{"model-value":p.modelValue.council,"onUpdate:modelValue":t,"display-mode":"cards",required:!0,"show-selected-info":!0,label:"","show-label":!1},null,8,["model-value"])]))}},To={key:0,class:"text-center py-12"},Io={key:1,class:"grid md:grid-cols-2 gap-4"},Bo=["onClick"],Eo={class:"flex items-start justify-between"},No={class:"flex-1"},Lo={class:"text-lg font-semibold text-gray-900 mb-2"},Fo=["innerHTML"],Ho={class:"mt-4 flex items-center space-x-4 text-xs text-gray-500"},Oo={key:0},Wo={key:1},Qo={key:2,class:"px-2 py-1 bg-gray-100 rounded"},Go={key:0,class:"ml-4"},Yo={__name:"Step2RequestType",props:{modelValue:{type:Object,required:!0},requestTypes:{type:Object,required:!0}},emits:["update:modelValue","type-selected"],setup(p,{emit:q}){const _=p,V=q,t=u=>{console.log("[Step2RequestType] selectType called with:",u.name),console.log("[Step2RequestType] props.modelValue:",_.modelValue),console.log("[Step2RequestType] props.modelValue.council:",_.modelValue.council);const d=ve(N({},_.modelValue),{request_type:u.name});console.log("[Step2RequestType] Emitting updatedValue:",d),V("update:modelValue",d),V("type-selected",u)};return(u,d)=>(o(),l("div",null,[d[2]||(d[2]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Application Type",-1)),d[3]||(d[3]=e("p",{class:"text-gray-600 mb-8"},"Choose the type of consent you wish to apply for",-1)),p.requestTypes.loading?(o(),l("div",To,[...d[0]||(d[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(o(),l("div",Io,[(o(!0),l(Y,null,J(p.requestTypes.data,s=>(o(),l("div",{key:s.name,onClick:S=>t(s),class:Q(["border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",p.modelValue.request_type===s.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",Eo,[e("div",No,[e("h3",Lo,v(s.type_name),1),e("p",{class:"text-sm text-gray-600",innerHTML:s.description||"No description available"},null,8,Fo),e("div",Ho,[s.base_fee?(o(),l("span",Oo,"Fee: $"+v(s.base_fee),1)):y("",!0),s.processing_sla_days?(o(),l("span",Wo,v(s.processing_sla_days)+" days",1)):y("",!0),s.category?(o(),l("span",Qo,v(s.category),1)):y("",!0)])]),p.modelValue.request_type===s.name?(o(),l("div",Go,[...d[1]||(d[1]=[e("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):y("",!0)])],10,Bo))),128))]))]))}},Jo={class:"text-gray-600 mb-6"},Ko={key:0,class:"space-y-6"},Zo={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},Xo={class:"flex items-center gap-4 mb-4"},es={class:"flex items-center"},ts={key:1,class:"mt-4"},os={class:"space-y-2"},ss={class:"flex-1"},ls={class:"text-sm font-medium text-gray-900"},as={class:"text-xs text-gray-600 mt-1"},rs={key:0,class:"text-xs text-gray-500 mt-1"},ns=["onClick"],is={class:"bg-white border border-gray-200 rounded-lg p-6"},ds={class:"flex items-start justify-between mb-4"},us={class:"text-xl font-semibold text-gray-900"},ps={key:0,class:"text-sm text-gray-500 mt-1"},cs={class:"grid md:grid-cols-3 gap-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},ms={class:"text-2xl font-bold text-blue-900 mt-1"},gs={class:"text-2xl font-bold text-blue-900 mt-1"},bs={class:"text-2xl font-bold text-blue-900 mt-1"},vs={key:1,class:"bg-white border border-gray-200 rounded-lg p-6"},ys=["innerHTML"],fs={key:2,class:"bg-white border border-gray-200 rounded-lg p-6"},xs={class:"text-gray-700"},_s={class:"flex justify-center pt-4"},hs={key:1,class:"text-center py-12"},ws={class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-hidden"},ks={class:"overflow-y-auto max-h-[calc(90vh-140px)] px-6 py-4"},$s={class:"space-y-4"},Cs={class:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t border-gray-200"},As=["disabled"],Vs={__name:"Step3ProcessInfo",props:{requestTypeDetails:{type:Object,default:null},councilName:{type:String,default:""},modelValue:{type:Object,default:()=>({})}},emits:["continue","update:modelValue"],setup(p,{emit:q}){var A,i;const _=p,V=q,t=U(((A=_.modelValue)==null?void 0:A.pre_app_meeting_not_required)||!1),u=U(((i=_.modelValue)==null?void 0:i.pre_app_meetings)||[]),d=U(!1),s=U({meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",preferred_time_slot_1_start:null});ae([t,u],()=>{V("update:modelValue",ve(N({},_.modelValue),{pre_app_meeting_not_required:t.value,pre_app_meetings:u.value}))},{deep:!0});const S=()=>{s.value={meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",preferred_time_slot_1_start:null},d.value=!0},h=()=>{d.value=!1},P=()=>{u.value.push(N({},s.value)),h()},x=a=>{confirm("Remove this council meeting request?")&&u.value.splice(a,1)},r=a=>a?new Date(a).toLocaleString("en-NZ",{dateStyle:"medium",timeStyle:"short"}):"";return(a,b)=>(o(),l("div",null,[b[28]||(b[28]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Council Process Information",-1)),e("p",Jo,"Understanding "+v(p.councilName)+"'s process for this application",1),p.requestTypeDetails?(o(),l("div",Ko,[p.requestTypeDetails.council_meeting_available?(o(),l("div",Zo,[b[7]||(b[7]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Council Meeting",-1)),b[8]||(b[8]=e("p",{class:"text-sm text-gray-600 mb-4"}," You may schedule a Council Meeting with the Council to seek further clarifications in respect of your application before proceeding. ",-1)),e("div",Xo,[e("label",es,[f(e("input",{type:"checkbox","onUpdate:modelValue":b[0]||(b[0]=c=>t.value=c),class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[oe,t.value]]),b[5]||(b[5]=e("span",{class:"ml-2 text-sm text-gray-700"},"I do not require a council meeting",-1))])]),t.value?y("",!0):(o(),l("button",{key:0,onClick:S,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Request Council Meeting ")),u.value&&u.value.length>0?(o(),l("div",ts,[b[6]||(b[6]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Requested Meetings",-1)),e("div",os,[(o(!0),l(Y,null,J(u.value,(c,F)=>(o(),l("div",{key:F,class:"p-3 bg-gray-50 border border-gray-200 rounded-lg flex items-start justify-between"},[e("div",ss,[e("span",ls,v(c.meeting_type||"Council Meeting"),1),e("p",as,v(c.meeting_format),1),c.preferred_time_slot_1_start?(o(),l("p",rs," Preferred: "+v(r(c.preferred_time_slot_1_start)),1)):y("",!0)]),e("button",{onClick:K=>x(F),type:"button",class:"text-red-600 hover:text-red-800 text-sm ml-4"}," Remove ",8,ns)]))),128))])])):y("",!0)])):y("",!0),e("div",is,[e("div",ds,[e("div",null,[e("h3",us,v(p.requestTypeDetails.request_type_name),1),p.requestTypeDetails.category?(o(),l("p",ps,v(p.requestTypeDetails.category),1)):y("",!0)])]),e("div",cs,[e("div",null,[b[9]||(b[9]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Application Fee",-1)),e("div",ms," $"+v(p.requestTypeDetails.base_fee||"0"),1),b[10]||(b[10]=e("div",{class:"text-xs text-blue-600 mt-1"},"Plus any additional costs",-1))]),e("div",null,[b[12]||(b[12]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Processing Time",-1)),e("div",gs,[O(v(p.requestTypeDetails.sla_days||"N/A")+" ",1),b[11]||(b[11]=e("span",{class:"text-base"},"days",-1))]),b[13]||(b[13]=e("div",{class:"text-xs text-blue-600 mt-1"},"Standard timeframe",-1))]),e("div",null,[b[14]||(b[14]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Payment Required",-1)),e("div",bs,v(p.requestTypeDetails.requires_payment?"Yes":"No"),1),b[15]||(b[15]=e("div",{class:"text-xs text-blue-600 mt-1"},"Before processing",-1))])])]),p.requestTypeDetails.process_description?(o(),l("div",vs,[b[16]||(b[16]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"How This Works",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:p.requestTypeDetails.process_description},null,8,ys)])):p.requestTypeDetails.description?(o(),l("div",fs,[b[17]||(b[17]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"About This Application",-1)),e("p",xs,v(p.requestTypeDetails.description),1)])):y("",!0),b[18]||(b[18]=X('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Before You Continue</h5><p class="text-yellow-800 text-sm mt-1"> Please review this information carefully. Make sure you understand the process, fees, and timeframes before proceeding with your application. </p></div></div></div>',1)),e("div",_s,[e("button",{type:"button",onClick:b[1]||(b[1]=c=>V("continue")),class:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"}," I Understand - Continue to Application ")])])):(o(),l("div",hs,[...b[19]||(b[19]=[e("p",{class:"text-gray-500"},"No request type selected. Please go back and select a request type.",-1)])])),d.value?(o(),l("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ye(h,["self"])},[e("div",ws,[e("div",{class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},[b[21]||(b[21]=e("h3",{class:"text-xl font-bold text-gray-900"},"Request Council Meeting",-1)),e("button",{onClick:h,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...b[20]||(b[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ks,[e("div",$s,[b[27]||(b[27]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("p",{class:"text-sm text-blue-900"}," A council meeting allows you to discuss your proposal with council planners before formally submitting your application. ")],-1)),e("div",null,[b[23]||(b[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Format *",-1)),f(e("select",{"onUpdate:modelValue":b[2]||(b[2]=c=>s.value.meeting_format=c),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...b[22]||(b[22]=[e("option",{value:"In Person"},"In Person",-1),e("option",{value:"Video Call"},"Video Call",-1),e("option",{value:"Phone Call"},"Phone Call",-1)])],512),[[ie,s.value.meeting_format]])]),e("div",null,[b[24]||(b[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Purpose *",-1)),f(e("textarea",{"onUpdate:modelValue":b[3]||(b[3]=c=>s.value.meeting_purpose=c),rows:"4",placeholder:"Describe what you'd like to discuss in this meeting...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[D,s.value.meeting_purpose]])]),e("div",null,[b[25]||(b[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Preferred Date & Time",-1)),f(e("input",{"onUpdate:modelValue":b[4]||(b[4]=c=>s.value.preferred_time_slot_1_start=c),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.preferred_time_slot_1_start]]),b[26]||(b[26]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select your preferred date and time. The council will confirm or propose an alternative.",-1))])])]),e("div",Cs,[e("button",{onClick:h,type:"button",class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors"}," Cancel "),e("button",{onClick:P,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:!s.value.meeting_purpose}," Request Meeting ",8,As)])])])):y("",!0)]))}},Ss={class:"space-y-6"},Ms={key:0},qs={class:"mb-6"},Ps={class:"space-y-3"},Ds={class:"flex-1"},Us={class:"font-medium text-gray-900"},js={class:"text-xs text-blue-600 mt-1"},Rs={class:"border-t border-gray-200 pt-6 mt-6"},zs={class:"text-sm font-semibold text-gray-900 mb-4"},Ts={class:"space-y-4"},Is={class:"grid md:grid-cols-2 gap-4"},Bs=["disabled"],Es={key:0,class:"mt-1 text-xs text-gray-500"},Ns=["disabled"],Ls={key:0,class:"mt-1 text-xs text-gray-500"},Fs={class:"grid md:grid-cols-2 gap-4"},Hs={class:"mt-1 text-xs text-gray-500"},Os={class:"mt-6 border-t border-gray-200 pt-6"},Ws={class:"flex items-start mb-4"},Qs={key:0,class:"space-y-4 pl-7"},Gs={class:"grid md:grid-cols-2 gap-4"},Ys=["required"],Js={class:"grid md:grid-cols-2 gap-4"},Ks={__name:"Step4ApplicantDetails",props:{modelValue:{type:Object,required:!0},userProfile:{type:Object,default:null},userCompanyAccount:{type:Object,default:null}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=U({submitted_on_behalf_of:_.modelValue.submitted_on_behalf_of||"Myself",acting_on_behalf:_.modelValue.acting_on_behalf||!1,applicant_name:_.modelValue.applicant_name||"",applicant_email:_.modelValue.applicant_email||"",applicant_phone:_.modelValue.applicant_phone||"",applicant_type:_.modelValue.applicant_type||"",applicant_is_not_owner:_.modelValue.applicant_is_not_owner||!1,owner_name:_.modelValue.owner_name||"",owner_email:_.modelValue.owner_email||"",owner_phone:_.modelValue.owner_phone||"",owner_address:_.modelValue.owner_address||""});return ae(()=>_.modelValue,u=>{t.value.submitted_on_behalf_of=u.submitted_on_behalf_of||"Myself",t.value.acting_on_behalf=u.acting_on_behalf||!1,t.value.applicant_name=u.applicant_name||"",t.value.applicant_email=u.applicant_email||"",t.value.applicant_phone=u.applicant_phone||"",t.value.applicant_type=u.applicant_type||"",t.value.applicant_is_not_owner=u.applicant_is_not_owner||!1,t.value.owner_name=u.owner_name||"",t.value.owner_email=u.owner_email||"",t.value.owner_phone=u.owner_phone||"",t.value.owner_address=u.owner_address||""},{deep:!0}),ae(t,u=>{V("update:modelValue",ve(N({},_.modelValue),{submitted_on_behalf_of:u.submitted_on_behalf_of,acting_on_behalf:u.acting_on_behalf,applicant_name:u.applicant_name,applicant_email:u.applicant_email,applicant_phone:u.applicant_phone,applicant_type:u.applicant_type,applicant_is_not_owner:u.applicant_is_not_owner,owner_name:u.owner_name,owner_email:u.owner_email,owner_phone:u.owner_phone,owner_address:u.owner_address,transfer_deposit_required:u.transfer_deposit_required,transfer_deposit_consent_number:u.transfer_deposit_consent_number,invoice_to:u.invoice_to,invoice_name:u.invoice_name,invoice_email:u.invoice_email,invoice_address:u.invoice_address,invoice_tax_id:u.invoice_tax_id}))},{deep:!0}),(u,d)=>(o(),l("div",null,[d[26]||(d[26]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Who is this application for?",-1)),d[27]||(d[27]=e("p",{class:"text-gray-600 mb-8"},"Provide applicant and property owner information",-1)),e("div",Ss,[p.userCompanyAccount?(o(),l("div",Ms,[e("div",qs,[d[13]||(d[13]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-3"},"Submitting As",-1)),e("div",Ps,[e("label",{class:Q(["flex items-start space-x-3 cursor-pointer p-4 border-2 rounded-lg transition-colors",t.value.submitted_on_behalf_of==="Myself"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[f(e("input",{type:"radio",value:"Myself","onUpdate:modelValue":d[0]||(d[0]=s=>t.value.submitted_on_behalf_of=s),class:"mt-1"},null,512),[[ce,t.value.submitted_on_behalf_of]]),d[11]||(d[11]=e("div",{class:"flex-1"},[e("div",{class:"font-medium text-gray-900"},"Individual - Submit for Myself"),e("div",{class:"text-sm text-gray-500"},"This application is submitted as an individual")],-1))],2),e("label",{class:Q(["flex items-start space-x-3 cursor-pointer p-4 border-2 rounded-lg transition-colors",t.value.submitted_on_behalf_of==="Company"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[f(e("input",{type:"radio",value:"Company","onUpdate:modelValue":d[1]||(d[1]=s=>t.value.submitted_on_behalf_of=s),class:"mt-1"},null,512),[[ce,t.value.submitted_on_behalf_of]]),e("div",Ds,[e("div",Us,"Company - "+v(p.userCompanyAccount.company_name),1),d[12]||(d[12]=e("div",{class:"text-sm text-gray-500"},"Submit on behalf of your company account",-1)),e("div",js,"You are logged in as: "+v(p.userCompanyAccount.user_role),1)])],2)])])])):y("",!0),e("div",Rs,[e("div",null,[e("h3",zs,v(t.value.acting_on_behalf?"Client Information *":"Applicant Contact Information *"),1),e("div",Ts,[e("div",Is,[e("div",null,[d[14]||(d[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name *",-1)),f(e("input",{"onUpdate:modelValue":d[2]||(d[2]=s=>t.value.applicant_name=s),type:"text",placeholder:"John Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!t.value.acting_on_behalf&&p.userProfile,required:""},null,8,Bs),[[D,t.value.applicant_name]]),t.value.acting_on_behalf?y("",!0):(o(),l("p",Es,"Auto-populated from your profile"))]),e("div",null,[d[15]||(d[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Address *",-1)),f(e("input",{"onUpdate:modelValue":d[3]||(d[3]=s=>t.value.applicant_email=s),type:"email",placeholder:"john@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!t.value.acting_on_behalf&&p.userProfile,required:""},null,8,Ns),[[D,t.value.applicant_email]]),t.value.acting_on_behalf?y("",!0):(o(),l("p",Ls,"Auto-populated from your profile"))])]),e("div",Fs,[e("div",null,[d[16]||(d[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Phone *",-1)),f(e("input",{"onUpdate:modelValue":d[4]||(d[4]=s=>t.value.applicant_phone=s),type:"tel",placeholder:"021 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[D,t.value.applicant_phone]]),e("p",Hs,v(t.value.acting_on_behalf?"Required for application processing":"Will be saved to your profile for future applications"),1)]),e("div",null,[d[18]||(d[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Applicant Type *",-1)),f(e("select",{"onUpdate:modelValue":d[5]||(d[5]=s=>t.value.applicant_type=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...d[17]||(d[17]=[X('<option value="">Select applicant type</option><option value="Individual">Individual</option><option value="Company">Company</option><option value="Trust">Trust</option><option value="Partnership">Partnership</option><option value="Other">Other</option>',6)])],512),[[ie,t.value.applicant_type]]),d[19]||(d[19]=e("p",{class:"mt-1 text-xs text-gray-500"},"Type of entity making this application",-1))])])])]),e("div",Os,[e("div",Ws,[f(e("input",{type:"checkbox","onUpdate:modelValue":d[6]||(d[6]=s=>t.value.applicant_is_not_owner=s),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,t.value.applicant_is_not_owner]]),d[20]||(d[20]=e("label",{class:"ml-3 text-sm font-medium text-gray-700"}," I am not the property owner ",-1))]),t.value.applicant_is_not_owner?(o(),l("div",Qs,[d[25]||(d[25]=e("p",{class:"text-xs text-gray-600 mb-4"}," Under Section 88 of the RMA, you must provide the property owner's contact details. ",-1)),e("div",Gs,[e("div",null,[d[21]||(d[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Owner Name *",-1)),f(e("input",{"onUpdate:modelValue":d[7]||(d[7]=s=>t.value.owner_name=s),type:"text",placeholder:"Property owner's full name",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:t.value.applicant_is_not_owner},null,8,Ys),[[D,t.value.owner_name]])]),e("div",null,[d[22]||(d[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Owner Email",-1)),f(e("input",{"onUpdate:modelValue":d[8]||(d[8]=s=>t.value.owner_email=s),type:"email",placeholder:"owner@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.owner_email]])])]),e("div",Js,[e("div",null,[d[23]||(d[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Owner Phone",-1)),f(e("input",{"onUpdate:modelValue":d[9]||(d[9]=s=>t.value.owner_phone=s),type:"tel",placeholder:"021 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.owner_phone]])]),e("div",null,[d[24]||(d[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Owner Address",-1)),f(e("textarea",{"onUpdate:modelValue":d[10]||(d[10]=s=>t.value.owner_address=s),rows:"3",placeholder:"Owner's postal address",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.owner_address]])])])])):y("",!0)])])])]))}},Zs={class:"space-y-6"},Xs={class:"flex justify-between items-center mb-4"},el={key:0,class:"space-y-3"},tl={class:"flex-1"},ol={class:"font-medium text-gray-900"},sl={key:0,class:"text-sm text-gray-600 mt-1"},ll={class:"flex gap-4 mt-2 text-xs text-gray-500"},al={key:0},rl={key:1},nl={key:2,class:"px-2 py-1 bg-gray-100 rounded"},il={class:"flex items-center gap-2 ml-4"},dl=["onClick"],ul=["onClick"],pl={key:1,class:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},cl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},ml={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},gl={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},bl={class:"flex justify-between items-center"},vl={class:"text-lg font-semibold text-gray-900"},yl={class:"px-6 py-4 space-y-6"},fl={class:"relative"},xl={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-96 overflow-y-auto"},_l={key:0,class:"p-4 text-center text-gray-500"},hl={key:1},wl=["onClick"],kl={class:"font-medium text-gray-900"},$l={class:"text-sm text-gray-600 mt-1"},Cl={key:0,class:"text-xs text-gray-500 mt-1"},Al={key:2,class:"p-4 text-center text-gray-500"},Vl={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Sl={class:"flex items-start"},Ml={class:"flex-1"},ql={class:"text-sm text-green-700 mt-1"},Pl={class:"grid md:grid-cols-2 gap-4"},Dl={class:"grid md:grid-cols-2 gap-4"},Ul={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},jl=["disabled"],Rl={__name:"Step5PropertyDetailsMulti",props:{modelValue:{type:Object,required:!0},properties:{type:Object,default:()=>({data:[],loading:!1})}},emits:["update:modelValue","property-select"],setup(p,{emit:q}){const _=p,V=q,t=U({properties:_.modelValue.properties||[]}),u=U(!1),d=U(null),s=U({property_address:"",legal_description:"",ct_reference:"",valuation_reference:"",parcel_id:"",zone:""}),S=U(""),h=U([]),P=U(!1),x=U(!1);let r=null;ae(()=>_.modelValue,W=>{t.value.properties=W.properties||[]},{deep:!0}),ae(t,W=>{V("update:modelValue",ve(N({},_.modelValue),{properties:W.properties}))},{deep:!0});const A=()=>le(this,null,function*(){r&&clearTimeout(r);const W=S.value.trim();if(W.length<3){h.value=[];return}r=setTimeout(()=>le(this,null,function*(){P.value=!0;try{const I=yield Fe("lodgeick.api.search_property_addresses",{query:W});h.value=I||[]}catch(I){console.error("[Step5PropertyDetails] Error searching properties:",I),h.value=[]}finally{P.value=!1}}),300)}),i=W=>{var I,z,C,m,M;s.value={property_address:W.address,legal_description:((I=W.property)==null?void 0:I.legal_description)||"",ct_reference:((z=W.property)==null?void 0:z.title_no)||"",valuation_reference:((C=W.property)==null?void 0:C.valuation_reference)||"",parcel_id:((m=W.property)==null?void 0:m.parcel_id)||"",zone:((M=W.property)==null?void 0:M.zone)||""},x.value=!1,S.value="",h.value=[]},a=()=>{s.value={property_address:"",legal_description:"",ct_reference:"",valuation_reference:"",parcel_id:"",zone:""},S.value=""},b=(W=null)=>{d.value=W,W!==null?s.value=N({},t.value.properties[W]):a(),u.value=!0},c=()=>{u.value=!1,d.value=null,a()},F=()=>{s.value.property_address&&(t.value.properties||(t.value.properties=[]),d.value!==null?t.value.properties[d.value]=N({},s.value):t.value.properties.push(N({},s.value)),c())},K=W=>{confirm("Remove this property from the application?")&&t.value.properties.splice(W,1)};return(W,I)=>(o(),l("div",null,[I[24]||(I[24]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Property Details",-1)),I[25]||(I[25]=e("p",{class:"text-gray-600 mb-8"},"Add all properties affected by this application",-1)),e("div",Zs,[e("div",Xs,[I[8]||(I[8]=e("h3",{class:"text-base font-semibold text-gray-900"},"Properties",-1)),e("button",{onClick:I[0]||(I[0]=z=>b()),type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[...I[7]||(I[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Property ",-1)])])]),t.value.properties&&t.value.properties.length>0?(o(),l("div",el,[(o(!0),l(Y,null,J(t.value.properties,(z,C)=>(o(),l("div",{key:C,class:"flex items-start justify-between p-4 border border-gray-200 rounded-lg bg-white"},[e("div",tl,[e("div",ol,v(z.property_address),1),z.legal_description?(o(),l("p",sl," Legal: "+v(z.legal_description),1)):y("",!0),e("div",ll,[z.ct_reference?(o(),l("span",al,"Title: "+v(z.ct_reference),1)):y("",!0),z.valuation_reference?(o(),l("span",rl,"Val Ref: "+v(z.valuation_reference),1)):y("",!0),z.zone?(o(),l("span",nl,v(z.zone),1)):y("",!0)])]),e("div",il,[e("button",{onClick:m=>b(C),type:"button",class:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded transition-colors",title:"Edit"},[...I[9]||(I[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,dl),e("button",{onClick:m=>K(C),type:"button",class:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Remove"},[...I[10]||(I[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ul)])]))),128))])):(o(),l("div",pl,[...I[11]||(I[11]=[e("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),e("p",{class:"text-sm text-gray-600"},"No properties added yet",-1),e("p",{class:"text-xs text-gray-500 mt-1"},'Click "Add Property" to add properties to this application',-1)])]))]),u.value?(o(),l("div",cl,[e("div",ml,[e("div",gl,[e("div",bl,[e("h3",vl,v(d.value!==null?"Edit Property":"Add Property"),1),e("button",{onClick:c,type:"button",class:"text-gray-400 hover:text-gray-600"},[...I[12]||(I[12]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",yl,[e("div",fl,[I[15]||(I[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Property Address *",-1)),f(e("input",{"onUpdate:modelValue":I[1]||(I[1]=z=>S.value=z),onInput:A,onFocus:I[2]||(I[2]=z=>x.value=!0),type:"text",placeholder:"Start typing address... e.g., 123 Main Street",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autocomplete:"off"},null,544),[[D,S.value]]),I[16]||(I[16]=e("p",{class:"mt-1 text-xs text-gray-500"},"Type to search LINZ property database",-1)),x.value&&(h.value.length>0||P.value)?(o(),l("div",xl,[P.value?(o(),l("div",_l,[...I[13]||(I[13]=[e("div",{class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mb-2"},null,-1),e("p",{class:"text-sm"},"Searching properties...",-1)])])):(o(),l("div",hl,[(o(!0),l(Y,null,J(h.value,(z,C)=>{var m,M;return o(),l("button",{key:C,onClick:E=>i(z),type:"button",class:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors"},[e("div",kl,v(z.address),1),e("div",$l,v(((m=z.property)==null?void 0:m.legal_description)||"Legal description not available"),1),(M=z.property)!=null&&M.title_no?(o(),l("div",Cl," Title: "+v(z.property.title_no),1)):y("",!0)],8,wl)}),128))])),!P.value&&h.value.length===0&&S.value.length>=3?(o(),l("div",Al,[...I[14]||(I[14]=[e("p",{class:"text-sm"},"No properties found. Try a different search.",-1)])])):y("",!0)])):y("",!0)]),s.value.property_address?(o(),l("div",Vl,[e("div",Sl,[I[19]||(I[19]=e("svg",{class:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("div",Ml,[I[17]||(I[17]=e("p",{class:"text-sm font-medium text-green-900"},"Property Selected",-1)),e("p",ql,v(s.value.property_address),1)]),e("button",{onClick:a,type:"button",class:"text-green-600 hover:text-green-700"},[...I[18]||(I[18]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):y("",!0),e("div",Pl,[e("div",null,[I[20]||(I[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Legal Description",-1)),f(e("input",{"onUpdate:modelValue":I[3]||(I[3]=z=>s.value.legal_description=z),type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,512),[[D,s.value.legal_description]])]),e("div",null,[I[21]||(I[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Certificate of Title Reference",-1)),f(e("input",{"onUpdate:modelValue":I[4]||(I[4]=z=>s.value.ct_reference=z),type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,512),[[D,s.value.ct_reference]])])]),e("div",Dl,[e("div",null,[I[22]||(I[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Valuation Reference",-1)),f(e("input",{"onUpdate:modelValue":I[5]||(I[5]=z=>s.value.valuation_reference=z),type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,512),[[D,s.value.valuation_reference]])]),e("div",null,[I[23]||(I[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Zone",-1)),f(e("input",{"onUpdate:modelValue":I[6]||(I[6]=z=>s.value.zone=z),type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,512),[[D,s.value.zone]])])])]),e("div",Ul,[e("button",{onClick:c,type:"button",class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{onClick:F,type:"button",disabled:!s.value.property_address,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"},v(d.value!==null?"Update Property":"Add Property"),9,jl)])])])):y("",!0)]))}},zl={class:"space-y-8"},Tl={class:"border-b border-gray-200 pb-8"},Il={class:"space-y-6"},Bl={class:"grid md:grid-cols-2 gap-4"},El=["onClick"],Nl={class:"flex items-start"},Ll=["checked"],Fl={class:"ml-3 flex-1"},Hl={class:"text-base font-semibold text-gray-900"},Ol={class:"text-sm text-gray-600 mt-1"},Wl={class:"border-t border-gray-200 pt-6"},Ql={class:"space-y-2"},Gl=["value"],Yl={class:"ml-3"},Jl={class:"font-medium text-gray-900"},Kl={class:"text-xs text-gray-600 mt-1"},Zl={key:0,class:"border-b border-gray-200 pb-8"},Xl={class:"space-y-6"},ea={class:"space-y-4"},ta=["for"],oa={class:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:items-start"},sa={class:"flex-1"},la={class:"flex items-center gap-2"},aa=["id","onUpdate:modelValue","max","disabled","aria-label","aria-describedby","aria-invalid","onBlur","onInput"],ra=["id"],na={key:0,role:"alert",class:"text-xs text-red-600 flex items-center gap-1.5 font-medium"},ia={key:1,class:"text-xs text-green-600 flex items-center gap-1.5 font-medium"},da={key:2,class:"text-xs text-gray-500"},ua=["for"],pa=["id","onUpdate:modelValue","aria-label","onChange"],ca={class:"block text-sm font-medium text-gray-700 mb-2"},ma=["aria-expanded"],ga={key:0,class:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm"},ba={class:"space-y-1.5 text-blue-800"},va={key:0,class:"flex items-start gap-2"},ya={key:0,value:3},fa={key:0,class:"border-t border-gray-200 pt-6"},xa={class:"space-y-3"},_a={key:0,class:"pl-7"},ha=["required"],wa={key:1,class:"border-t border-gray-200 pt-6"},ka={class:"space-y-3"},$a={key:2,class:"border-t border-gray-200 pt-6"},Ca={key:0,class:"space-y-3"},Aa={key:1,class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},Va={class:"pb-4"},Sa={class:"space-y-6"},Ma={class:"mt-1 text-xs text-gray-500"},qa={key:0,class:"space-y-4"},Pa={class:"flex justify-between items-start mb-4"},Da={class:"text-base font-semibold text-gray-900"},Ua=["onClick"],ja={class:"mb-4"},Ra=["onUpdate:modelValue"],za={key:0,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Ta={class:"grid md:grid-cols-2 gap-4"},Ia=["onUpdate:modelValue"],Ba=["onUpdate:modelValue"],Ea={key:1,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Na=["onUpdate:modelValue"],La={key:2,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Fa=["onUpdate:modelValue"],Ha={key:3,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Oa=["onUpdate:modelValue"],Wa={key:4,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Qa={class:"grid md:grid-cols-2 gap-4"},Ga=["onUpdate:modelValue"],Ya=["onUpdate:modelValue"],Ja={key:5,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Ka={class:"space-y-4"},Za=["onUpdate:modelValue"],Xa=["onUpdate:modelValue"],er=["onUpdate:modelValue"],tr={key:6,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},or={class:"space-y-4"},sr=["onUpdate:modelValue"],lr={class:"grid md:grid-cols-2 gap-4"},ar=["onUpdate:modelValue"],rr=["onUpdate:modelValue"],nr={key:7,class:"space-y-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},ir={class:"space-y-4"},dr=["onUpdate:modelValue"],ur=["onUpdate:modelValue"],pr={key:1,class:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},cr={__name:"Step6ConsentInfo",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=[{value:"Land Use",label:"Land Use",description:"For buildings, structures, and use of land"},{value:"Subdivision",label:"Subdivision",description:"For dividing land into separate lots or titles"},{value:"Discharge Permit",label:"Discharge Permit",description:"For discharges to land, water, or air"},{value:"Water Permit",label:"Water Permit",description:"For taking, using, damming, or diverting water"},{value:"Coastal Permit",label:"Coastal Permit",description:"For activities in the coastal marine area"}],u=[{value:"Unsure",label:"Unsure / To Be Determined by Council",description:"Council planner will assess and determine the correct status"},{value:"Permitted",label:"Permitted Activity",description:"Complies with all permitted activity standards"},{value:"Controlled",label:"Controlled Activity",description:"Council must grant consent, can impose conditions"},{value:"Restricted Discretionary",label:"Restricted Discretionary Activity",description:"Council's discretion limited to specified matters"},{value:"Discretionary",label:"Discretionary Activity",description:"Council has full discretion to grant or decline"},{value:"Non-Complying",label:"Non-Complying Activity",description:"Does not comply with plan, requires special consideration"}],d=U({consent_types:_.modelValue.consent_types||[],activity_status:_.modelValue.activity_status||"",lapsing_period_years:_.modelValue.lapsing_period_years||5,consent_notice_required:_.modelValue.consent_notice_required||!1,consent_notice_details:_.modelValue.consent_notice_details||"",coastal_occupation_charge_acknowledged:_.modelValue.coastal_occupation_charge_acknowledged||!1,request_fast_track:_.modelValue.request_fast_track||!1,brief_description:_.modelValue.brief_description||"",detailed_description:_.modelValue.detailed_description||""}),s=T=>{var w;return((w=d.value.consent_types)==null?void 0:w.some(L=>L.consent_type===T))||!1},S=H(()=>s("Subdivision")),h=H(()=>s("Coastal Permit")),P=T=>T==="Land Use"||T==="Subdivision",x=T=>P(T)?999:35,r=T=>P(T)?"Land Use and Subdivision consents can be granted for unlimited duration (s.123 RMA)":"Water Permits, Discharge Permits, and Coastal Permits have a maximum duration of 35 years (s.123 RMA)",A=Te({}),i=T=>{var w;if(!A[T]){const L=(w=_.modelValue.consent_type_durations)==null?void 0:w.find(R=>R.consent_type===T);L?A[T]=N({},L):A[T]={consent_type:T,duration_years:10,duration_unlimited:!1}}return A[T]},a=Te({}),b=Te({}),c=T=>{a[T]=!0;const w=i(T);if(w.duration_unlimited){b[T]=null;return}const L=x(T),R=w.duration_years;!R||R<1?b[T]="Duration must be at least 1 year":R>L?P(T)?b[T]=`Maximum ${L} years, or select "Unlimited" (s.123 RMA)`:b[T]=`${T} cannot exceed ${L} years (s.123 RMA)`:b[T]=null},F=T=>a[T]?b[T]?"border-2 border-red-300 bg-red-50":i(T).duration_years&&!i(T).duration_unlimited?"border-2 border-green-300 bg-green-50":"border border-gray-300 bg-white":"border border-gray-300 bg-white",K=T=>b[T],W=T=>{c(T)},I=T=>`duration-${T.toLowerCase().replace(/\s+/g,"-")}`,z=T=>`duration-help-${T.toLowerCase().replace(/\s+/g,"-")}`,C=T=>`unlimited-${T.toLowerCase().replace(/\s+/g,"-")}`;ae(A,()=>{const T=Object.values(A);V("update:modelValue",ve(N({},_.modelValue),{consent_type_durations:T}))},{deep:!0}),ae(()=>d.value.consent_types,T=>{T.forEach(L=>{i(L.consent_type)});const w=Object.values(A);V("update:modelValue",ve(N({},_.modelValue),{consent_type_durations:w}))},{deep:!0,immediate:!0}),Ve(()=>{if(d.value.consent_types&&d.value.consent_types.length>0){d.value.consent_types.forEach(w=>{i(w.consent_type)});const T=Object.values(A);T.length>0&&V("update:modelValue",ve(N({},_.modelValue),{consent_type_durations:T}))}});const m=H(()=>{const T=d.value.activity_status==="Controlled",w=!S.value;return T&&w}),M=H(()=>!0),E=U(!1);ae(()=>_.modelValue,T=>{d.value.consent_types=T.consent_types||[],d.value.activity_status=T.activity_status||"",d.value.lapsing_period_years=T.lapsing_period_years||5,d.value.consent_notice_required=T.consent_notice_required||!1,d.value.consent_notice_details=T.consent_notice_details||"",d.value.coastal_occupation_charge_acknowledged=T.coastal_occupation_charge_acknowledged||!1,d.value.request_fast_track=T.request_fast_track||!1,d.value.brief_description=T.brief_description||"",d.value.detailed_description=T.detailed_description||""},{deep:!0}),ae(d,T=>{V("update:modelValue",ve(N({},_.modelValue),{consent_types:T.consent_types,activity_status:T.activity_status,lapsing_period_years:T.lapsing_period_years,consent_notice_required:T.consent_notice_required,consent_notice_details:T.consent_notice_details,coastal_occupation_charge_acknowledged:T.coastal_occupation_charge_acknowledged,request_fast_track:T.request_fast_track,brief_description:T.brief_description,detailed_description:T.detailed_description}))},{deep:!0});const G=T=>{const w=d.value.consent_types.findIndex(L=>L.consent_type===T);w>-1?d.value.consent_types.splice(w,1):d.value.consent_types.push({consent_type:T})},te=T=>d.value.consent_types.some(w=>w.consent_type===T),$e=()=>{const T=N({},_.modelValue);T.proposal_details||(T.proposal_details=[]),T.proposal_details.push({detail_type:"",building_height_m:null,total_floor_area_m2:null,earthworks_description:"",traffic_description:"",operations_description:"",subdivision_lots:null,subdivision_lot_sizes:"",discharge_type:"",discharge_receiver:"",discharge_treatment:"",water_source:"",water_max_take_m3:null,water_rate:"",coastal_structure_type:"",coastal_navigation_effects:""}),V("update:modelValue",T)},Ce=T=>{if(confirm("Remove this proposal detail?")){const w=N({},_.modelValue);w.proposal_details.splice(T,1),V("update:modelValue",w)}};return(T,w)=>{var L;return o(),l("div",null,[w[76]||(w[76]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Consent Information",-1)),w[77]||(w[77]=e("p",{class:"text-gray-600 mb-8"},"Select consent types, provide consent details, and describe your proposal",-1)),e("div",zl,[e("div",Tl,[w[11]||(w[11]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Consent Type & Activity Status",-1)),e("div",Il,[e("div",null,[w[9]||(w[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-4"},[O(" Consent Types Required * "),e("span",{class:"text-xs text-gray-500"},"(Select all that apply)")],-1)),e("div",Bl,[(o(),l(Y,null,J(t,R=>e("div",{key:R.value,onClick:pe=>G(R.value),class:Q(["border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md",te(R.value)?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",Nl,[e("input",{type:"checkbox",checked:te(R.value),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",readonly:""},null,8,Ll),e("div",Fl,[e("h4",Hl,v(R.label),1),e("p",Ol,v(R.description),1)])])],10,El)),64))])]),e("div",Wl,[w[10]||(w[10]=X('<label class="block text-sm font-medium text-gray-700 mb-3"> Activity Status Under District/Regional Plan (Optional) </label><div class="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Not sure? That&#39;s okay!</h5><p class="text-blue-800 text-sm mt-1"> If you&#39;re unsure about your activity status, you can leave this blank. The council planner will determine the correct status when processing your application. Alternatively, you can book a free council meeting with the council to discuss this. </p></div></div></div>',2)),e("div",Ql,[(o(),l(Y,null,J(u,R=>e("label",{key:R.value,class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-all hover:bg-gray-50",d.value.activity_status===R.value?"border-blue-600 bg-blue-50":"border-gray-200"])},[f(e("input",{type:"radio","onUpdate:modelValue":w[0]||(w[0]=pe=>d.value.activity_status=pe),value:R.value,class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,Gl),[[ce,d.value.activity_status]]),e("div",Yl,[e("span",Jl,v(R.label),1),e("p",Kl,v(R.description),1)])],2)),64))])])])]),d.value.consent_types&&d.value.consent_types.length>0?(o(),l("div",Zl,[w[40]||(w[40]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Consent Details",-1)),e("div",Xl,[e("div",null,[w[16]||(w[16]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Requested Duration",-1)),w[17]||(w[17]=e("p",{class:"text-sm text-gray-600 mb-4"}," Specify the duration for each consent type selected ",-1)),e("div",ea,[(o(!0),l(Y,null,J(d.value.consent_types,R=>(o(),l("div",{key:R.consent_type,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("label",{for:I(R.consent_type),class:"block text-sm font-medium text-gray-700 mb-2"},v(R.consent_type)+" Duration ",9,ta),e("div",oa,[e("div",sa,[e("div",la,[f(e("input",{id:I(R.consent_type),"onUpdate:modelValue":pe=>i(R.consent_type).duration_years=pe,type:"number",min:1,max:x(R.consent_type),placeholder:"e.g., 10",disabled:i(R.consent_type).duration_unlimited,"aria-label":`Duration in years for ${R.consent_type} consent`,"aria-describedby":z(R.consent_type),"aria-invalid":!!K(R.consent_type),class:Q(["flex-1 min-w-0 px-3 py-2 rounded-lg transition-colors","focus:ring-2 focus:ring-blue-500 focus:outline-none",F(R.consent_type)]),onBlur:pe=>c(R.consent_type),onInput:pe=>c(R.consent_type)},null,42,aa),[[D,i(R.consent_type).duration_years,void 0,{number:!0}]]),w[12]||(w[12]=e("span",{class:"text-gray-600 whitespace-nowrap"},"years",-1))]),e("div",{id:z(R.consent_type),class:"mt-1.5 min-h-[20px]"},[K(R.consent_type)?(o(),l("p",na,[w[13]||(w[13]=e("svg",{class:"w-3.5 h-3.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),O(" "+v(K(R.consent_type)),1)])):a[R.consent_type]&&i(R.consent_type).duration_years&&!i(R.consent_type).duration_unlimited?(o(),l("p",ia,[...w[14]||(w[14]=[e("svg",{class:"w-3.5 h-3.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),O(" Valid duration ",-1)])])):(o(),l("p",da,v(r(R.consent_type)),1))],8,ra)]),P(R.consent_type)?(o(),l("label",{key:0,for:C(R.consent_type),class:"flex items-center gap-2 whitespace-nowrap pl-4 sm:pl-0 border-l-2 sm:border-l-0 border-gray-200 sm:pt-2"},[f(e("input",{id:C(R.consent_type),"onUpdate:modelValue":pe=>i(R.consent_type).duration_unlimited=pe,type:"checkbox","aria-label":`Unlimited duration for ${R.consent_type} consent`,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:pe=>W(R.consent_type)},null,40,pa),[[oe,i(R.consent_type).duration_unlimited]]),w[15]||(w[15]=e("span",{class:"text-sm font-medium"},"Unlimited",-1))],8,ua)):y("",!0)])]))),128))])]),e("div",null,[e("label",ca,[w[19]||(w[19]=O(" Lapsing Period ",-1)),e("button",{type:"button",onClick:w[1]||(w[1]=R=>E.value=!E.value),class:"ml-2 text-blue-600 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-expanded":E.value,"aria-label":"Toggle lapsing period help"},[...w[18]||(w[18]=[e("svg",{class:"w-4 h-4 inline",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],8,ma)]),E.value?(o(),l("div",ga,[w[23]||(w[23]=e("p",{class:"font-medium text-blue-900 mb-2"},"How to choose lapsing period:",-1)),e("ul",ba,[w[21]||(w[21]=e("li",{class:"flex items-start gap-2"},[e("span",{class:"text-blue-600 font-bold mt-0.5"},""),e("span",null,[e("strong",null,"5 years:"),O(" Standard for most consents - construction/use must begin within 5 years")])],-1)),w[22]||(w[22]=e("li",{class:"flex items-start gap-2"},[e("span",{class:"text-blue-600 font-bold mt-0.5"},""),e("span",null,[e("strong",null,"10 years:"),O(" For renewable energy projects requiring longer development timelines (s.125(1A) RMA)")])],-1)),h.value?(o(),l("li",va,[...w[20]||(w[20]=[e("span",{class:"text-blue-600 font-bold mt-0.5"},"",-1),e("span",null,[e("strong",null,"3 years:"),O(" For aquaculture activities in coastal marine area")],-1)])])):y("",!0)])])):y("",!0),f(e("select",{"onUpdate:modelValue":w[2]||(w[2]=R=>d.value.lapsing_period_years=R),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[w[24]||(w[24]=e("option",{value:5},"5 years - Standard lapsing period",-1)),w[25]||(w[25]=e("option",{value:10},"10 years - Renewable energy projects",-1)),h.value?(o(),l("option",ya,"3 years - Aquaculture activities")):y("",!0)],512),[[ie,d.value.lapsing_period_years,void 0,{number:!0}]]),w[26]||(w[26]=e("p",{class:"mt-1 text-xs text-gray-500"}," Time period before consent lapses if not given effect to (s.125 RMA) ",-1))]),S.value?(o(),l("div",fa,[w[29]||(w[29]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Consent Notice (s.221 RMA)",-1)),w[30]||(w[30]=e("p",{class:"text-sm text-gray-600 mb-4"}," For subdivision consents, indicate whether a consent notice should be placed on the record of title ",-1)),e("div",xa,[e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",d.value.consent_notice_required?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[f(e("input",{"onUpdate:modelValue":w[3]||(w[3]=R=>d.value.consent_notice_required=R),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,d.value.consent_notice_required]]),w[27]||(w[27]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Consent notice required"),e("p",{class:"text-xs text-gray-600 mt-1"}," Check if ongoing conditions need to be recorded on the certificate of title ")],-1))],2),d.value.consent_notice_required?(o(),l("div",_a,[w[28]||(w[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Consent Notice Details * ",-1)),f(e("textarea",{"onUpdate:modelValue":w[4]||(w[4]=R=>d.value.consent_notice_details=R),rows:"4",placeholder:"Describe the matters to be included in the consent notice...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:d.value.consent_notice_required},null,8,ha),[[D,d.value.consent_notice_details]])])):y("",!0)])])):y("",!0),h.value?(o(),l("div",wa,[w[32]||(w[32]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Coastal Occupation Charge",-1)),w[33]||(w[33]=e("p",{class:"text-sm text-gray-600 mb-4"}," For occupation of the coastal marine area, councils may impose a coastal occupation charge ",-1)),e("div",ka,[e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",d.value.coastal_occupation_charge_acknowledged?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[f(e("input",{"onUpdate:modelValue":w[5]||(w[5]=R=>d.value.coastal_occupation_charge_acknowledged=R),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,d.value.coastal_occupation_charge_acknowledged]]),w[31]||(w[31]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"I acknowledge that a coastal occupation charge may apply"),e("p",{class:"text-xs text-gray-600 mt-1"}," The council will determine the applicable charge based on the nature and extent of occupation ")],-1))],2)])])):y("",!0),w[39]||(w[39]=X('<div class="border-t border-gray-200 pt-6"><h4 class="text-lg font-semibold text-gray-900 mb-4">Financial Contribution (s.108(2)(a) RMA)</h4><p class="text-sm text-gray-600 mb-4"> Council may impose financial contributions as a condition of consent </p><div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Information Only</h5><p class="text-blue-800 text-sm mt-1"> Financial contributions are determined by council policy and will be advised during processing if applicable. No action required at this stage. </p></div></div></div></div>',1)),M.value?(o(),l("div",$a,[w[37]||(w[37]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Fast-Track Processing (s.87AAB RMA)",-1)),w[38]||(w[38]=e("p",{class:"text-sm text-gray-600 mb-4"}," Controlled activities may be eligible for fast-track processing with reduced timeframes ",-1)),m.value?(o(),l("div",Ca,[w[35]||(w[35]=X('<div class="bg-green-50 border border-green-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-green-900 text-sm">Eligible for Fast-Track</h5><p class="text-green-800 text-sm mt-1"> Based on your consent type and activity status (Controlled), this application is eligible for fast-track processing. </p></div></div></div>',1)),e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",d.value.request_fast_track?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[f(e("input",{"onUpdate:modelValue":w[6]||(w[6]=R=>d.value.request_fast_track=R),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,d.value.request_fast_track]]),w[34]||(w[34]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Request fast-track processing"),e("p",{class:"text-xs text-gray-600 mt-1"}," I would like this application to be processed under fast-track provisions (subject to council availability) ")],-1))],2)])):(o(),l("div",Aa,[...w[36]||(w[36]=[e("p",{class:"text-sm text-gray-600"}," Fast-track processing is only available for Controlled activities (excluding Subdivision consents). Your current selections do not qualify for fast-track. ",-1)])]))])):y("",!0)])])):y("",!0),e("div",Va,[w[75]||(w[75]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Proposal Details",-1)),e("div",Sa,[e("div",null,[w[41]||(w[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Brief Description * ",-1)),f(e("textarea",{"onUpdate:modelValue":w[7]||(w[7]=R=>d.value.brief_description=R),rows:"2",maxlength:"200",placeholder:"Provide a short summary of your proposal (max 200 characters)",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[D,d.value.brief_description]]),e("p",Ma,v(((L=d.value.brief_description)==null?void 0:L.length)||0)+"/200 characters ",1)]),e("div",null,[w[42]||(w[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Detailed Description * ",-1)),f(e("textarea",{"onUpdate:modelValue":w[8]||(w[8]=R=>d.value.detailed_description=R),rows:"6",placeholder:"Provide a comprehensive description of your proposal including scope, materials, dimensions, environmental considerations, and any other relevant information for the planner's assessment",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[D,d.value.detailed_description]]),w[43]||(w[43]=e("p",{class:"mt-1 text-xs text-gray-500"}," Full description of the proposed work for planner assessment ",-1))]),w[74]||(w[74]=e("div",{class:"border-t border-gray-200 pt-6"},[e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Detailed Breakdown (Optional)"),e("p",{class:"text-sm text-gray-600 mb-4"}," Add specific details for different aspects of your proposal ")],-1)),e("div",{class:"flex justify-between items-center"},[w[45]||(w[45]=e("p",{class:"text-sm text-gray-700"}," Add details about different aspects of your proposal (building, earthworks, traffic, etc.) ",-1)),e("button",{onClick:$e,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[...w[44]||(w[44]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Proposal Detail ",-1)])])]),p.modelValue.proposal_details&&p.modelValue.proposal_details.length>0?(o(),l("div",qa,[(o(!0),l(Y,null,J(p.modelValue.proposal_details,(R,pe)=>(o(),l("div",{key:pe,class:"border border-gray-200 rounded-lg p-6 bg-white shadow-sm"},[e("div",Pa,[e("h5",Da,v(R.detail_type||"Proposal Detail")+" #"+v(pe+1),1),e("button",{onClick:Z=>Ce(pe),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...w[46]||(w[46]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ua)]),e("div",ja,[w[48]||(w[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Detail Type * ",-1)),f(e("select",{"onUpdate:modelValue":Z=>R.detail_type=Z,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...w[47]||(w[47]=[X('<option value="">Select type</option><option value="Building">Building</option><option value="Earthworks">Earthworks</option><option value="Traffic">Traffic &amp; Parking</option><option value="Operations">Operations</option><option value="Subdivision">Subdivision</option><option value="Discharge">Discharge</option><option value="Water">Water Take/Use</option><option value="Coastal">Coastal Activity</option>',9)])],8,Ra),[[ie,R.detail_type]])]),R.detail_type==="Building"?(o(),l("div",za,[w[51]||(w[51]=e("h5",{class:"font-medium text-gray-900"},"Building Details",-1)),e("div",Ta,[e("div",null,[w[49]||(w[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Building Height (m)",-1)),f(e("input",{"onUpdate:modelValue":Z=>R.building_height_m=Z,type:"number",step:"0.1",placeholder:"e.g., 8.5",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Ia),[[D,R.building_height_m,void 0,{number:!0}]])]),e("div",null,[w[50]||(w[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Total Floor Area (m)",-1)),f(e("input",{"onUpdate:modelValue":Z=>R.total_floor_area_m2=Z,type:"number",step:"0.1",placeholder:"e.g., 250.5",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Ba),[[D,R.total_floor_area_m2,void 0,{number:!0}]])])])])):y("",!0),R.detail_type==="Earthworks"?(o(),l("div",Ea,[w[53]||(w[53]=e("h5",{class:"font-medium text-gray-900"},"Earthworks Details",-1)),e("div",null,[w[52]||(w[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),f(e("textarea",{"onUpdate:modelValue":Z=>R.earthworks_description=Z,rows:"4",placeholder:"Describe the earthworks proposed...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Na),[[D,R.earthworks_description]])])])):y("",!0),R.detail_type==="Traffic"?(o(),l("div",La,[w[55]||(w[55]=e("h5",{class:"font-medium text-gray-900"},"Traffic & Parking Details",-1)),e("div",null,[w[54]||(w[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),f(e("textarea",{"onUpdate:modelValue":Z=>R.traffic_description=Z,rows:"4",placeholder:"Describe traffic generation, parking provision, access arrangements...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Fa),[[D,R.traffic_description]])])])):y("",!0),R.detail_type==="Operations"?(o(),l("div",Ha,[w[57]||(w[57]=e("h5",{class:"font-medium text-gray-900"},"Operations Details",-1)),e("div",null,[w[56]||(w[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),f(e("textarea",{"onUpdate:modelValue":Z=>R.operations_description=Z,rows:"4",placeholder:"Describe hours of operation, activities, processes...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Oa),[[D,R.operations_description]])])])):y("",!0),R.detail_type==="Subdivision"?(o(),l("div",Wa,[w[60]||(w[60]=e("h5",{class:"font-medium text-gray-900"},"Subdivision Details",-1)),e("div",Qa,[e("div",null,[w[58]||(w[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Number of Lots",-1)),f(e("input",{"onUpdate:modelValue":Z=>R.subdivision_lots=Z,type:"number",placeholder:"e.g., 5",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Ga),[[D,R.subdivision_lots,void 0,{number:!0}]])]),e("div",null,[w[59]||(w[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Lot Sizes",-1)),f(e("input",{"onUpdate:modelValue":Z=>R.subdivision_lot_sizes=Z,type:"text",placeholder:"e.g., 800m, 1000m, 1200m",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Ya),[[D,R.subdivision_lot_sizes]])])])])):y("",!0),R.detail_type==="Discharge"?(o(),l("div",Ja,[w[65]||(w[65]=e("h5",{class:"font-medium text-gray-900"},"Discharge Details",-1)),e("div",Ka,[e("div",null,[w[62]||(w[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Discharge Type",-1)),f(e("select",{"onUpdate:modelValue":Z=>R.discharge_type=Z,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...w[61]||(w[61]=[X('<option value="">Select type</option><option value="Stormwater">Stormwater</option><option value="Wastewater">Wastewater</option><option value="Air">Air</option><option value="Other">Other</option>',5)])],8,Za),[[ie,R.discharge_type]])]),e("div",null,[w[63]||(w[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Receiving Environment",-1)),f(e("input",{"onUpdate:modelValue":Z=>R.discharge_receiver=Z,type:"text",placeholder:"e.g., Reticulated network, stream, land",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Xa),[[D,R.discharge_receiver]])]),e("div",null,[w[64]||(w[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Treatment System",-1)),f(e("textarea",{"onUpdate:modelValue":Z=>R.discharge_treatment=Z,rows:"3",placeholder:"Describe treatment systems and methods...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,er),[[D,R.discharge_treatment]])])])])):y("",!0),R.detail_type==="Water"?(o(),l("div",tr,[w[69]||(w[69]=e("h5",{class:"font-medium text-gray-900"},"Water Take/Use Details",-1)),e("div",or,[e("div",null,[w[66]||(w[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Water Source",-1)),f(e("input",{"onUpdate:modelValue":Z=>R.water_source=Z,type:"text",placeholder:"e.g., River, bore, stream",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,sr),[[D,R.water_source]])]),e("div",lr,[e("div",null,[w[67]||(w[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Maximum Take (m/day)",-1)),f(e("input",{"onUpdate:modelValue":Z=>R.water_max_take_m3=Z,type:"number",step:"0.1",placeholder:"e.g., 50",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,ar),[[D,R.water_max_take_m3,void 0,{number:!0}]])]),e("div",null,[w[68]||(w[68]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rate",-1)),f(e("input",{"onUpdate:modelValue":Z=>R.water_rate=Z,type:"text",placeholder:"e.g., 2 L/s",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,rr),[[D,R.water_rate]])])])])])):y("",!0),R.detail_type==="Coastal"?(o(),l("div",nr,[w[72]||(w[72]=e("h5",{class:"font-medium text-gray-900"},"Coastal Activity Details",-1)),e("div",ir,[e("div",null,[w[70]||(w[70]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Structure Type",-1)),f(e("input",{"onUpdate:modelValue":Z=>R.coastal_structure_type=Z,type:"text",placeholder:"e.g., Jetty, mooring, seawall",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,dr),[[D,R.coastal_structure_type]])]),e("div",null,[w[71]||(w[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Navigation Effects",-1)),f(e("textarea",{"onUpdate:modelValue":Z=>R.coastal_navigation_effects=Z,rows:"3",placeholder:"Describe potential effects on navigation...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,ur),[[D,R.coastal_navigation_effects]])])])])):y("",!0)]))),128))])):(o(),l("div",pr,[...w[73]||(w[73]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-600"},"No proposal details added yet",-1),e("p",{class:"text-xs text-gray-500 mt-1"},'Click "Add Proposal Detail" to describe your proposed activity',-1)])]))])])])])}}};function mr(p,q){return He({url:"lodgeick.lodgeick.doctype.rfq_agent_details.rfq_agent_details.send_rfq_to_agent",method:"POST",params:{rfq_id:p,agent_id:q},auto:!0})}function gr(p,q=null,_=null){return He({url:"lodgeick.lodgeick.doctype.rfq_agent_details.rfq_agent_details.engage_agent",method:"POST",params:{rfq_id:p,quote_amount:q,quote_details:_},auto:!0})}function br(){return He({url:"lodgeick.lodgeick.doctype.rfq_agent_details.rfq_agent_details.get_available_agents",method:"GET",auto:!0})}function vr(p,q){return new Promise((_,V)=>{frappe.call({method:"frappe.client.set_value",args:{doctype:"RFQ Agent Details",name:p,fieldname:q},callback:t=>{t.message?_(t.message):V(new Error("Failed to update RFQ"))},error:t=>{V(t)}})})}const yr={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"rfq-modal-title",role:"dialog","aria-modal":"true"},fr={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},xr={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full"},_r={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},hr={class:"mb-4"},wr={class:"grid grid-cols-2 gap-4 mb-6"},kr={class:"mt-1 text-sm text-gray-900"},$r={key:0},Cr={class:"mt-1 text-sm text-gray-900"},Ar={class:"mb-6"},Vr={class:"block text-sm font-medium text-gray-700 mb-2"},Sr={key:0,class:"text-xs text-gray-500 ml-2"},Mr={key:0,class:"border rounded-lg p-3"},qr=["disabled"],Pr={key:1,class:"border rounded-lg p-3 bg-gray-50"},Dr=["innerHTML"],Ur={key:0,class:"mb-6"},jr=["value"],Rr={key:1,class:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"},zr={class:"grid grid-cols-2 gap-4"},Tr={class:"text-sm text-blue-900"},Ir={key:0},Br={class:"text-sm text-blue-900"},Er={key:1},Nr={class:"text-sm text-blue-900"},Lr={key:2},Fr={class:"text-sm text-blue-900"},Hr={key:2,class:"mb-6"},Or={class:"grid grid-cols-2 gap-4"},Wr={key:0},Qr={class:"text-sm text-gray-900"},Gr={key:1},Yr={class:"text-sm text-gray-900"},Jr={key:0,class:"mt-3"},Kr={class:"text-sm text-gray-900 bg-gray-50 p-3 rounded border border-gray-200"},Zr={key:3,class:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4"},Xr={key:4,class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4"},en={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-3"},tn=["disabled"],on=["disabled"],sn=["disabled"],ln=["disabled"],an={__name:"RFQModal",props:{isOpen:{type:Boolean,default:!1},rfq:{type:Object,default:()=>({})},requestId:{type:String,default:""}},emits:["close","save","send-to-agent","engage-agent"],setup(p,{emit:q}){const _=p,V=q,t=U(N({},_.rfq)),u=U(_.rfq.agent||""),d=U(!1),s=U([]),S=U(!1);Ve(()=>le(this,null,function*(){yield h()}));const h=()=>le(this,null,function*(){try{S.value=!0;const b=br();yield new Promise(c=>{const F=setInterval(()=>{b.data&&(clearInterval(F),c())},100);setTimeout(()=>{clearInterval(F),c()},5e3)}),b.data&&Array.isArray(b.data)?s.value=b.data:s.value=[{value:"agent-1",label:"Smith Planning Consultants Ltd"},{value:"agent-2",label:"Jones Resource Consent Services"},{value:"agent-3",label:"Wellington Planning Professionals"}]}catch(b){console.error("Failed to load available agents:",b),s.value=[{value:"agent-1",label:"Smith Planning Consultants Ltd"},{value:"agent-2",label:"Jones Resource Consent Services"},{value:"agent-3",label:"Wellington Planning Professionals"}]}finally{S.value=!1}});ae(()=>_.rfq,b=>{t.value=N({},b),u.value=b.agent||""},{deep:!0}),ae(()=>_.isOpen,b=>{b&&(t.value=N({},_.rfq),u.value=_.rfq.agent||"",s.value.length===0&&h())});const P=()=>{d.value||V("close")},x=()=>le(this,null,function*(){d.value=!0;try{yield V("save",t.value)}finally{d.value=!1}}),r=()=>le(this,null,function*(){if(!u.value){alert("Please select an agent first");return}d.value=!0;try{yield V("send-to-agent",{rfq:t.value,agent:u.value}),t.value.status="Sent to Agent",t.value.agent=u.value}finally{d.value=!1}}),A=()=>le(this,null,function*(){if(confirm("Are you sure you want to engage this agent? This will lock your application and you will not be able to make further changes.")){d.value=!0;try{yield V("engage-agent",t.value),t.value.status="Agent Engaged",t.value.agent_engaged=!0}finally{d.value=!1}}}),i=b=>b?new Date(b).toLocaleDateString("en-NZ",{year:"numeric",month:"short",day:"numeric"}):"",a=b=>b?b.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""):"";return(b,c)=>p.isOpen?(o(),l("div",yr,[e("div",fr,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:P}),c[20]||(c[20]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),e("div",xr,[e("div",_r,[e("div",{class:"flex items-center justify-between mb-4"},[c[3]||(c[3]=e("h3",{class:"text-lg font-semibold text-gray-900",id:"rfq-modal-title"}," Request for Quote - Agent Details ",-1)),e("button",{onClick:P,class:"text-gray-400 hover:text-gray-500"},[...c[2]||(c[2]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",hr,[e("span",{class:Q(["inline-flex px-3 py-1 text-sm font-medium rounded-full",t.value.status==="Draft"?"bg-gray-100 text-gray-800":t.value.status==="Sent to Agent"?"bg-blue-100 text-blue-800":t.value.status==="Quote Received"?"bg-yellow-100 text-yellow-800":t.value.status==="Agent Engaged"?"bg-green-100 text-green-800":t.value.status==="Cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"])},v(t.value.status||"Draft"),3)]),e("div",wr,[e("div",null,[c[4]||(c[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"RFQ ID",-1)),e("p",kr,v(t.value.rfq_id||"Not assigned"),1)]),t.value.created_date?(o(),l("div",$r,[c[5]||(c[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Created Date",-1)),e("p",Cr,v(i(t.value.created_date)),1)])):y("",!0)]),e("div",Ar,[e("label",Vr,[c[6]||(c[6]=O(" RFQ Message ",-1)),t.value.agent_engaged?y("",!0):(o(),l("span",Sr,"(Editable)"))]),t.value.status==="Draft"||t.value.status==="Sent to Agent"?(o(),l("div",Mr,[f(e("textarea",{"onUpdate:modelValue":c[0]||(c[0]=F=>t.value.rfq_message=F),rows:"6",class:"w-full border-0 focus:ring-0 text-sm text-gray-700 resize-none",disabled:t.value.agent_engaged,placeholder:"Enter RFQ message..."},null,8,qr),[[D,t.value.rfq_message]])])):(o(),l("div",Pr,[e("div",{class:"text-sm text-gray-700 whitespace-pre-wrap",innerHTML:a(t.value.rfq_message)},null,8,Dr)]))]),!t.value.agent_engaged&&s.value.length>0?(o(),l("div",Ur,[c[8]||(c[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Agent",-1)),f(e("select",{"onUpdate:modelValue":c[1]||(c[1]=F=>u.value=F),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[c[7]||(c[7]=e("option",{value:""},"-- Choose an agent --",-1)),(o(!0),l(Y,null,J(s.value,F=>(o(),l("option",{key:F.value,value:F.value},v(F.label),9,jr))),128))],512),[[ie,u.value]])])):y("",!0),t.value.agent_name?(o(),l("div",Rr,[c[13]||(c[13]=e("h4",{class:"text-sm font-semibold text-blue-900 mb-2"},"Engaged Agent",-1)),e("div",zr,[e("div",null,[c[9]||(c[9]=e("label",{class:"block text-xs font-medium text-blue-700"},"Agent Name",-1)),e("p",Tr,v(t.value.agent_name),1)]),t.value.agent_email?(o(),l("div",Ir,[c[10]||(c[10]=e("label",{class:"block text-xs font-medium text-blue-700"},"Email",-1)),e("p",Br,v(t.value.agent_email),1)])):y("",!0),t.value.agent_phone?(o(),l("div",Er,[c[11]||(c[11]=e("label",{class:"block text-xs font-medium text-blue-700"},"Phone",-1)),e("p",Nr,v(t.value.agent_phone),1)])):y("",!0),t.value.agent_engaged_date?(o(),l("div",Lr,[c[12]||(c[12]=e("label",{class:"block text-xs font-medium text-blue-700"},"Engaged Date",-1)),e("p",Fr,v(i(t.value.agent_engaged_date)),1)])):y("",!0)])])):y("",!0),t.value.status==="Quote Received"||t.value.status==="Agent Engaged"?(o(),l("div",Hr,[c[17]||(c[17]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Quote Details",-1)),e("div",Or,[t.value.quote_amount?(o(),l("div",Wr,[c[14]||(c[14]=e("label",{class:"block text-xs font-medium text-gray-700"},"Quote Amount",-1)),e("p",Qr,"$"+v(t.value.quote_amount),1)])):y("",!0),t.value.quote_received_date?(o(),l("div",Gr,[c[15]||(c[15]=e("label",{class:"block text-xs font-medium text-gray-700"},"Quote Received",-1)),e("p",Yr,v(i(t.value.quote_received_date)),1)])):y("",!0)]),t.value.quote_details?(o(),l("div",Jr,[c[16]||(c[16]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Quote Details",-1)),e("div",Kr,v(t.value.quote_details),1)])):y("",!0)])):y("",!0),t.value.agent_engaged?y("",!0):(o(),l("div",Zr,[...c[18]||(c[18]=[X('<div class="flex" data-v-1b9e54cf><svg class="h-5 w-5 text-orange-400 mr-2" fill="currentColor" viewBox="0 0 20 20" data-v-1b9e54cf><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-1b9e54cf></path></svg><div class="text-sm text-orange-700" data-v-1b9e54cf><p class="font-medium" data-v-1b9e54cf>Important Notice</p><p class="mt-1" data-v-1b9e54cf>Once you engage an agent, you will not be able to make any more changes or complete this application.</p></div></div>',1)])])),t.value.agent_engaged?(o(),l("div",Xr,[...c[19]||(c[19]=[X('<div class="flex" data-v-1b9e54cf><svg class="h-5 w-5 text-green-400 mr-2" fill="currentColor" viewBox="0 0 20 20" data-v-1b9e54cf><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" data-v-1b9e54cf></path></svg><div class="text-sm text-green-700" data-v-1b9e54cf><p class="font-medium" data-v-1b9e54cf>Application Locked</p><p class="mt-1" data-v-1b9e54cf>This application has been locked and is now being managed by the engaged agent.</p></div></div>',1)])])):y("",!0)]),e("div",en,[t.value.status==="Quote Received"&&!t.value.agent_engaged?(o(),l("button",{key:0,onClick:A,disabled:d.value,class:"w-full sm:w-auto inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},v(d.value?"Engaging...":"Engage Agent"),9,tn)):y("",!0),t.value.status==="Draft"&&u.value?(o(),l("button",{key:1,onClick:r,disabled:d.value||!u.value,class:"w-full sm:w-auto inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},v(d.value?"Sending...":"Send to Agent"),9,on)):y("",!0),!t.value.agent_engaged&&(t.value.status==="Draft"||t.value.status==="Sent to Agent")?(o(),l("button",{key:2,onClick:x,disabled:d.value,class:"w-full sm:w-auto inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},v(d.value?"Saving...":"Save Changes"),9,sn)):y("",!0),e("button",{onClick:P,disabled:d.value,class:"mt-3 sm:mt-0 w-full sm:w-auto inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},v(t.value.agent_engaged?"Close":"Cancel"),9,ln)])])])])):y("",!0)}},rn=Ue(an,[["__scopeId","data-v-1b9e54cf"]]),nn={class:"space-y-4"},dn={class:"grid grid-cols-2 gap-4"},un={class:"block text-sm font-medium text-gray-700 mb-2"},pn=["value","min","required"],cn=["value","required"],mn={key:0,class:"flex flex-wrap gap-2"},gn=["onClick"],bn={key:1,class:"text-sm text-gray-600 bg-blue-50 p-2 rounded-lg"},vn={class:"flex items-center"},yn={class:"font-medium"},bt={__name:"DateTimePicker",props:{modelValue:{type:String,default:""},label:{type:String,default:"Select Date & Time"},required:{type:Boolean,default:!1},showPresets:{type:Boolean,default:!0},minDate:{type:String,default:()=>{const p=new Date;return p.setDate(p.getDate()+1),p.toISOString().split("T")[0]}}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=[{label:"9:00 AM",value:"09:00"},{label:"10:00 AM",value:"10:00"},{label:"11:00 AM",value:"11:00"},{label:"1:00 PM",value:"13:00"},{label:"2:00 PM",value:"14:00"},{label:"3:00 PM",value:"15:00"},{label:"4:00 PM",value:"16:00"}],u=U(""),d=U("");ae(()=>_.modelValue,r=>{if(r){const A=new Date(r);isNaN(A.getTime())||(u.value=A.toISOString().split("T")[0],d.value=A.toTimeString().slice(0,5))}},{immediate:!0});const s=r=>{u.value=r.target.value,P()},S=r=>{d.value=r.target.value,P()},h=r=>{d.value=r,P()},P=()=>{if(u.value&&d.value){const r=`${u.value}T${d.value}:00`;V("update:modelValue",r)}},x=H(()=>!u.value||!d.value?"":new Date(`${u.value}T${d.value}`).toLocaleString("en-NZ",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}));return(r,A)=>(o(),l("div",nn,[e("div",dn,[e("div",null,[e("label",un,v(p.label||"Select Date"),1),e("input",{value:u.value,onInput:s,type:"date",min:p.minDate,required:p.required,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,40,pn)]),e("div",null,[A[0]||(A[0]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Time ",-1)),e("input",{value:d.value,onInput:S,type:"time",required:p.required,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,40,cn)])]),p.showPresets?(o(),l("div",mn,[A[1]||(A[1]=e("span",{class:"text-xs text-gray-600 w-full mb-1"},"Quick select:",-1)),(o(),l(Y,null,J(t,i=>e("button",{key:i.value,onClick:ye(a=>h(i.value),["prevent"]),type:"button",class:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full transition-colors"},v(i.label),9,gn)),64))])):y("",!0),u.value&&d.value?(o(),l("div",bn,[e("div",vn,[A[2]||(A[2]=e("svg",{class:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",yn,v(x.value),1)])])):y("",!0)]))}},fn={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"contact-selector-title",role:"dialog","aria-modal":"true"},xn={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},_n={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},hn={class:"bg-white px-4 pt-5 pb-4 sm:p-6"},wn={class:"border-b border-gray-200 mb-6"},kn={class:"-mb-px flex space-x-8"},$n={key:0,class:"space-y-4"},Cn={class:"relative"},An={class:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg"},Vn={key:0,class:"p-8 text-center text-gray-500"},Sn=["onClick"],Mn={class:"flex items-center justify-between"},qn={class:"flex-1"},Pn={class:"font-medium text-gray-900"},Dn={class:"text-sm text-gray-600"},Un={key:0,class:"text-sm text-gray-500"},jn={key:1,class:"text-xs text-gray-500 mt-1"},Rn={key:1,class:"space-y-4"},zn={class:"grid grid-cols-2 gap-4"},Tn={class:"col-span-2"},In={class:"col-span-2"},Bn={class:"col-span-2"},En={class:"flex items-start"},Nn={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-3"},Ln=["disabled"],Fn={__name:"ContactSelector",props:{isOpen:{type:Boolean,default:!1},existingContacts:{type:Array,default:()=>[]}},emits:["close","select"],setup(p,{emit:q}){const _=p,V=q,t=U("existing"),u=U(""),d=U(!0),s=U({name:"",email:"",phone:"",organization:"",role:""}),S=H(()=>{if(!u.value)return _.existingContacts;const A=u.value.toLowerCase();return _.existingContacts.filter(i=>{var a,b,c;return((a=i.name)==null?void 0:a.toLowerCase().includes(A))||((b=i.email)==null?void 0:b.toLowerCase().includes(A))||((c=i.organization)==null?void 0:c.toLowerCase().includes(A))})});ae(()=>_.isOpen,A=>{A&&(t.value="existing",u.value="",r())});const h=()=>{V("close")},P=A=>{V("select",A),h()},x=()=>{!s.value.name||!s.value.email||(V("select",ve(N({},s.value),{isNew:!0,saveToContacts:d.value})),r(),h())},r=()=>{s.value={name:"",email:"",phone:"",organization:"",role:""},d.value=!0};return(A,i)=>p.isOpen?(o(),l("div",fn,[e("div",xn,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:h}),i[20]||(i[20]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),e("div",_n,[e("div",hn,[e("div",{class:"flex items-center justify-between mb-6"},[i[10]||(i[10]=e("h3",{class:"text-lg font-semibold text-gray-900",id:"contact-selector-title"}," Select or Add Contact ",-1)),e("button",{onClick:h,class:"text-gray-400 hover:text-gray-500"},[...i[9]||(i[9]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",wn,[e("nav",kn,[e("button",{onClick:i[0]||(i[0]=a=>t.value="existing"),class:Q(["py-2 px-1 border-b-2 font-medium text-sm",t.value==="existing"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Existing Contacts ",2),e("button",{onClick:i[1]||(i[1]=a=>t.value="new"),class:Q(["py-2 px-1 border-b-2 font-medium text-sm",t.value==="new"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Add New Contact ",2)])]),t.value==="existing"?(o(),l("div",$n,[e("div",Cn,[f(e("input",{"onUpdate:modelValue":i[2]||(i[2]=a=>u.value=a),type:"text",placeholder:"Search contacts by name or email...",class:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,u.value]]),i[11]||(i[11]=e("svg",{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),e("div",An,[S.value.length===0?(o(),l("div",Vn,[...i[12]||(i[12]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("p",{class:"mt-2"},"No contacts found",-1)])])):y("",!0),(o(!0),l(Y,null,J(S.value,a=>(o(),l("div",{key:a.name||a.email,onClick:b=>P(a),class:"p-4 border-b border-gray-200 hover:bg-blue-50 cursor-pointer transition-colors"},[e("div",Mn,[e("div",qn,[e("p",Pn,v(a.name),1),e("p",Dn,v(a.email),1),a.phone?(o(),l("p",Un,v(a.phone),1)):y("",!0),a.organization?(o(),l("p",jn,v(a.organization),1)):y("",!0)]),i[13]||(i[13]=e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,Sn))),128))])])):y("",!0),t.value==="new"?(o(),l("div",Rn,[e("div",zn,[e("div",Tn,[i[14]||(i[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name *",-1)),f(e("input",{"onUpdate:modelValue":i[3]||(i[3]=a=>s.value.name=a),type:"text",required:"",placeholder:"e.g., John Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.name]])]),e("div",null,[i[15]||(i[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),f(e("input",{"onUpdate:modelValue":i[4]||(i[4]=a=>s.value.email=a),type:"email",required:"",placeholder:"john@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.email]])]),e("div",null,[i[16]||(i[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone",-1)),f(e("input",{"onUpdate:modelValue":i[5]||(i[5]=a=>s.value.phone=a),type:"tel",placeholder:"+64 21 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.phone]])]),e("div",In,[i[17]||(i[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organization",-1)),f(e("input",{"onUpdate:modelValue":i[6]||(i[6]=a=>s.value.organization=a),type:"text",placeholder:"e.g., Planning Consultants Ltd",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.organization]])]),e("div",Bn,[i[18]||(i[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),f(e("input",{"onUpdate:modelValue":i[7]||(i[7]=a=>s.value.role=a),type:"text",placeholder:"e.g., Project Manager, Architect",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.role]])])]),e("div",En,[f(e("input",{"onUpdate:modelValue":i[8]||(i[8]=a=>d.value=a),type:"checkbox",id:"save-contact",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1"},null,512),[[oe,d.value]]),i[19]||(i[19]=e("label",{for:"save-contact",class:"ml-2 text-sm text-gray-700"}," Save this contact for future use ",-1))])])):y("",!0)]),e("div",Nn,[t.value==="new"?(o(),l("button",{key:0,onClick:x,disabled:!s.value.name||!s.value.email,class:"w-full sm:w-auto inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Add Contact ",8,Ln)):y("",!0),e("button",{onClick:h,class:"mt-3 sm:mt-0 w-full sm:w-auto inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel ")])])])])):y("",!0)}},Rt=Ue(Fn,[["__scopeId","data-v-2b4300ef"]]),Hn={class:"space-y-8"},On={class:"border-b border-gray-200 pb-8"},Wn={class:"border-b border-gray-200 pb-8"},Qn={class:"border-b border-gray-200 pb-8"},Gn={class:"border-b border-gray-200 pb-8"},Yn={class:"space-y-4"},Jn={class:"flex items-center space-x-4"},Kn={class:"flex items-center cursor-pointer"},Zn={class:"flex items-center cursor-pointer"},Xn={key:0,class:"mt-6"},ei={class:"flex justify-between items-center mb-4"},ti={key:0,class:"space-y-3"},oi={class:"flex-1"},si={class:"flex items-center gap-2"},li={class:"font-medium text-gray-900"},ai={key:0,class:"text-sm text-gray-600 mt-1"},ri={class:"flex items-center gap-2 ml-4"},ni=["onClick"],ii=["onClick"],di={key:1,class:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},ui={class:"border-b border-gray-200 pb-8"},pi={class:"space-y-4"},ci={class:"flex items-center space-x-4"},mi={class:"flex items-center cursor-pointer"},gi={class:"flex items-center cursor-pointer"},bi={key:0,class:"grid md:grid-cols-2 gap-4 mt-4"},vi={class:"border-b border-gray-200 pb-8"},yi={class:"space-y-4"},fi={class:"grid md:grid-cols-2 gap-4"},xi={class:"grid md:grid-cols-2 gap-4"},_i={key:0,class:"mt-4"},hi={key:0,class:"border-b border-gray-200 pb-8"},wi={class:"space-y-4"},ki={key:0,class:"mt-6"},$i={class:"space-y-2"},Ci={class:"flex items-center justify-between"},Ai={class:"flex-1"},Vi={class:"flex items-center gap-2 mb-2"},Si={class:"text-sm font-semibold text-gray-900"},Mi={key:0,class:"text-sm text-gray-600 mb-1"},qi={key:1,class:"text-sm text-gray-600"},Pi={key:2,class:"text-xs text-gray-500 mt-1"},Di={class:"flex gap-2"},Ui=["onClick"],ji=["onClick","disabled"],Ri={key:1,class:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg text-center"},zi={class:"border-b border-gray-200 pb-8"},Ti={class:"flex items-center gap-4"},Ii={class:"flex items-center cursor-pointer"},Bi={key:0,class:"mt-4"},Ei={class:"space-y-2"},Ni={class:"flex-1"},Li={class:"flex items-center gap-2"},Fi={class:"text-sm font-medium text-gray-900"},Hi={key:0,class:"text-xs text-gray-600 mt-1"},Oi=["onClick"],Wi={class:"border-b border-gray-200 pb-8"},Qi={class:"text-sm text-gray-600 mb-4"},Gi={class:"space-y-4"},Yi={class:"space-y-2"},Ji=["disabled"],Ki={class:"ml-3"},Zi={key:0,class:"text-xs text-gray-500 mt-1"},Xi=["value"],ed={class:"ml-3"},td={class:"font-medium text-gray-900"},od={class:"text-xs text-gray-500 mt-1"},sd={class:"pb-4"},ld={key:0,class:"space-y-2"},ad={class:"flex-1"},rd={class:"text-sm font-medium text-gray-900"},nd={class:"text-xs text-gray-600"},id={key:0,class:"text-xs text-gray-500"},dd={key:1,class:"text-xs text-gray-500"},ud=["onClick"],pd={key:1,class:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},cd={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},md={class:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto"},gd={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center"},bd={class:"text-lg font-semibold text-gray-900"},vd={class:"p-6 space-y-4"},yd={class:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t border-gray-200"},fd=["disabled"],xd={class:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},_d={class:"overflow-y-auto max-h-[calc(90vh-140px)] px-6 py-4"},hd={class:"space-y-6"},wd={class:"grid grid-cols-2 gap-4"},kd={class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},$d={class:"space-y-4"},Cd={class:"bg-white p-4 rounded-lg border border-gray-200"},Ad={class:"flex items-center justify-between mb-2"},Vd={class:"bg-white p-4 rounded-lg border border-gray-200"},Sd={class:"flex items-center justify-between mb-2"},Md={class:"bg-white p-4 rounded-lg border border-gray-200"},qd={class:"flex items-center justify-between mb-2"},Pd={key:0},Dd={class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},Ud={key:0,class:"space-y-2"},jd={class:"flex-1"},Rd={class:"text-sm font-medium text-gray-900"},zd={class:"text-xs text-gray-600"},Td={key:0,class:"text-xs text-gray-500"},Id=["onClick"],Bd={key:1,class:"text-sm text-gray-500 italic"},Ed={class:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t border-gray-200"},Nd=["disabled"],Ld={__name:"Step1ApplicantProposal",props:{modelValue:{type:Object,required:!0},userProfile:{type:Object,default:null},userCompanyAccount:{type:Object,default:null},properties:{type:Object,required:!0}},emits:["update:modelValue","property-select"],setup(p,{emit:q}){const _=p,V=q,t=bo(_.modelValue);console.log("[Step1ApplicantProposal] Using toRaw to prevent freeze - fix v2.0");const u=U(ve(N({},t),{additional_consents:t.additional_consents||[],pim_applied:t.pim_applied||!1,pim_number:t.pim_number||"",building_consent_applied:t.building_consent_applied||!1,building_consent_number:t.building_consent_number||"",site_visit_locked_gates:t.site_visit_locked_gates||!1,site_visit_dogs_present:t.site_visit_dogs_present||!1,site_visit_health_safety_issues:t.site_visit_health_safety_issues||!1,site_visit_notice_required:t.site_visit_notice_required||!1,site_visit_details:t.site_visit_details||"",agent_required:t.agent_required||!1,agent_id:t.agent_id||null,agent_rfqs:t.agent_rfqs||[],pre_app_meeting_not_required:t.pre_app_meeting_not_required||!1,pre_app_meetings:t.pre_app_meetings||[],correspondence_recipient:t.correspondence_recipient||"Applicant",invoice_responsible_party:t.invoice_responsible_party||"Applicant",additional_contact_persons:t.additional_contact_persons||[]}));u.value.additional_contact_persons&&u.value.additional_contact_persons.length>0&&(u.value.additional_contact_persons=u.value.additional_contact_persons.map(B=>B.attendee_name||B.attendee_email?B:{attendee_name:B.first_name&&B.last_name?`${B.first_name} ${B.last_name}`:B.first_name||B.last_name||"",attendee_email:B.email||"",attendee_phone:B.phone||"",organization:B.organization||""}));const d=U(u.value.additional_consents&&u.value.additional_consents.length>0);ae(()=>u.value.additional_consents,B=>{B&&B.length>0&&(d.value=!0)},{deep:!0}),ae(d,B=>{B?u.value.additional_consents||(u.value.additional_consents=[]):u.value.additional_consents=[]});const s=U(!1),S=U(null),h=U({consent_type:"",consent_status:"",reference_number:""}),P=(B=null)=>{S.value=B,B!==null?h.value=N({},u.value.additional_consents[B]):h.value={consent_type:"",consent_status:"",reference_number:""},s.value=!0},x=()=>{s.value=!1,S.value=null},r=()=>{u.value.additional_consents||(u.value.additional_consents=[]),S.value!==null?u.value.additional_consents[S.value]=N({},h.value):u.value.additional_consents.push(N({},h.value)),x()},A=B=>{confirm("Remove this additional consent?")&&u.value.additional_consents.splice(B,1)},i=U(!1),a=()=>{i.value=!0},b=B=>{u.value.additional_contact_persons||(u.value.additional_contact_persons=[]),u.value.additional_contact_persons.push({attendee_name:B.name,attendee_email:B.email,attendee_phone:B.phone||"",organization:B.organization||""}),i.value=!1},c=B=>{confirm("Remove this contact person?")&&u.value.additional_contact_persons.splice(B,1)};U(!1);const F=U(!1),K=U({}),W=U(null);U(!1);const I=H(()=>{var j,se,_e;const B=((j=_.modelValue)==null?void 0:j.applicant_type)||((se=_.userProfile)==null?void 0:se.applicant_type);return((_e=_.modelValue)==null?void 0:_e.acting_on_behalf)||!1||B&&B!=="Individual"}),z=()=>{K.value={rfq_id:null,status:"Draft",created_date:new Date().toISOString(),selected_agent:null,agent_name:null,agent_email:null,agent_quote_amount:null,agent_quote_details:"",rfq_message:`You may contact Resource Consent Planning Professionals or Agents from the list available in eRCS to obtain quotes from and engage them to help you prepare and lodge your application by selecting the Engage Agent button.

Please note: You will not be able to make any more changes or complete this application once you engage an Agent.`},W.value=null,F.value=!0},C=B=>{W.value=B,K.value=N({},u.value.agent_rfqs[B]),F.value=!0},m=B=>le(this,null,function*(){const g=u.value.agent_rfqs[B];confirm(`Accept quote from ${g.agent_name} for $${Number(g.agent_quote_amount).toFixed(2)}?`)&&(g.status="Agent Engaged",g.agent_engaged_date=new Date().toISOString(),u.value.agent_id=g.selected_agent,alert("Agent engaged successfully!"))}),M=()=>{F.value=!1,W.value=null,K.value={}},E=B=>le(this,null,function*(){try{if(B.name||B.rfq_id){const g=B.name||B.rfq_id;yield vr(g,{rfq_message:B.rfq_message})}W.value!==null&&(u.value.agent_rfqs[W.value]=N({},B)),M()}catch(g){console.error("Failed to save RFQ:",g),alert("Failed to save RFQ changes. Please try again.")}}),G=j=>le(this,[j],function*({rfq:B,agent:g}){try{const se=B.name||B.rfq_id;if(!se)throw new Error("RFQ ID not found");yield mr(se,g),W.value!==null&&(u.value.agent_rfqs[W.value].status="Sent to Agent",u.value.agent_rfqs[W.value].agent=g,u.value.agent_rfqs[W.value].sent_date=new Date().toISOString()),M()}catch(se){console.error("Failed to send RFQ to agent:",se),alert("Failed to send RFQ to agent. Please try again.")}}),te=B=>le(this,null,function*(){try{const g=B.name||B.rfq_id;if(!g)throw new Error("RFQ ID not found");yield gr(g,B.quote_amount,B.quote_details),W.value!==null&&(u.value.agent_rfqs[W.value].status="Agent Engaged",u.value.agent_rfqs[W.value].agent_engaged=!0,u.value.agent_rfqs[W.value].agent_engaged_date=new Date().toISOString()),u.value.locked_for_editing=!0,u.value.locked_reason="Agent engaged",u.value.agent_engaged=!0,M(),alert("Agent successfully engaged. This application is now locked for editing.")}catch(g){console.error("Failed to engage agent:",g),alert("Failed to engage agent. Please try again.")}}),$e=U(!1),Ce=U(null),T=U(!1),w=U([]),L=U({meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",discussion_points:"",meeting_location:"",preferred_time_slot_1_start:"",preferred_time_slot_2_start:"",preferred_time_slot_3_start:"",meeting_attendees:[],status:"Requested"}),R=B=>{Ce.value=B,L.value=N({},u.value.pre_app_meetings[B]),$e.value=!0},pe=()=>{$e.value=!1,Ce.value=null,L.value={meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",discussion_points:"",meeting_location:"",preferred_time_slot_1_start:"",preferred_time_slot_2_start:"",preferred_time_slot_3_start:"",meeting_attendees:[],status:"Requested"}},Z=()=>{if(!L.value.preferred_time_slot_1_start&&!L.value.preferred_time_slot_2_start&&!L.value.preferred_time_slot_3_start){alert("Please select at least one preferred meeting time");return}u.value.pre_app_meetings||(u.value.pre_app_meetings=[]);const B=ve(N({},L.value),{preferred_time_slots:[]});L.value.preferred_time_slot_1_start&&B.preferred_time_slots.push({preference_order:1,preferred_start:L.value.preferred_time_slot_1_start,preferred_end:Be(L.value.preferred_time_slot_1_start),planner_response:"Pending"}),L.value.preferred_time_slot_2_start&&B.preferred_time_slots.push({preference_order:2,preferred_start:L.value.preferred_time_slot_2_start,preferred_end:Be(L.value.preferred_time_slot_2_start),planner_response:"Pending"}),L.value.preferred_time_slot_3_start&&B.preferred_time_slots.push({preference_order:3,preferred_start:L.value.preferred_time_slot_3_start,preferred_end:Be(L.value.preferred_time_slot_3_start),planner_response:"Pending"}),Ce.value!==null?u.value.pre_app_meetings[Ce.value]=B:u.value.pre_app_meetings.push(B),pe()},Be=B=>{if(!B)return"";const g=new Date(B);return new Date(g.getTime()+60*60*1e3).toISOString()},Ee=B=>{L.value[`preferred_time_slot_${B}_start`]=""},dt=()=>{T.value=!0},Qe=B=>{L.value.meeting_attendees||(L.value.meeting_attendees=[]),L.value.meeting_attendees.push({attendee_name:B.name,attendee_email:B.email,attendee_phone:B.phone||"",organization:B.organization||"",role:B.role||""}),T.value=!1},we=B=>{confirm("Remove this attendee?")&&L.value.meeting_attendees.splice(B,1)},Ge=()=>{V("property-select")};return ae(u,B=>{V("update:modelValue",N({},B))},{deep:!0}),(B,g)=>(o(),l("div",null,[g[105]||(g[105]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Applicant and Proposal Details",-1)),g[106]||(g[106]=e("p",{class:"text-gray-600 mb-8"},"Complete all sections below to provide comprehensive information for your resource consent application",-1)),e("div",Hn,[e("div",On,[re(Ks,{modelValue:u.value,"onUpdate:modelValue":g[0]||(g[0]=j=>u.value=j),"user-profile":p.userProfile,"user-company-account":p.userCompanyAccount},null,8,["modelValue","user-profile","user-company-account"])]),e("div",Wn,[re(cr,{modelValue:u.value,"onUpdate:modelValue":g[1]||(g[1]=j=>u.value=j)},null,8,["modelValue"])]),e("div",Qn,[re(Rl,{modelValue:u.value,"onUpdate:modelValue":g[2]||(g[2]=j=>u.value=j),properties:p.properties,onPropertySelect:Ge},null,8,["modelValue","properties"])]),e("div",Gn,[g[43]||(g[43]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Additional Consents from Other Councils",-1)),g[44]||(g[44]=e("p",{class:"text-sm text-gray-600 mb-4"}," Have you applied for, or are required to apply for, any additional resource consents for this proposal from another council/regional council, but not being applied under this application? ",-1)),e("div",Yn,[e("div",Jn,[e("label",Kn,[f(e("input",{type:"radio",value:!1,"onUpdate:modelValue":g[3]||(g[3]=j=>d.value=j),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,d.value]]),g[36]||(g[36]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"No",-1))]),e("label",Zn,[f(e("input",{type:"radio",value:!0,"onUpdate:modelValue":g[4]||(g[4]=j=>d.value=j),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,d.value]]),g[37]||(g[37]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"Yes",-1))])]),d.value?(o(),l("div",Xn,[e("div",ei,[g[39]||(g[39]=e("h4",{class:"text-base font-semibold text-gray-900"},"Additional Consents List",-1)),e("button",{onClick:g[5]||(g[5]=j=>P()),type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[...g[38]||(g[38]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Additional Consent ",-1)])])]),u.value.additional_consents&&u.value.additional_consents.length>0?(o(),l("div",ti,[(o(!0),l(Y,null,J(u.value.additional_consents,(j,se)=>(o(),l("div",{key:se,class:"flex items-start justify-between p-4 border border-gray-200 rounded-lg bg-white"},[e("div",oi,[e("div",si,[e("span",li,v(j.consent_type),1),e("span",{class:Q(["px-2 py-1 text-xs font-medium rounded-full",{"bg-yellow-100 text-yellow-800":j.consent_status==="Required","bg-blue-100 text-blue-800":j.consent_status==="Applied","bg-green-100 text-green-800":j.consent_status==="Granted","bg-red-100 text-red-800":j.consent_status==="Declined"}])},v(j.consent_status),3)]),j.reference_number?(o(),l("p",ai," Ref: "+v(j.reference_number),1)):y("",!0)]),e("div",ri,[e("button",{onClick:_e=>P(se),type:"button",class:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded transition-colors",title:"Edit"},[...g[40]||(g[40]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,ni),e("button",{onClick:_e=>A(se),type:"button",class:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Remove"},[...g[41]||(g[41]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ii)])]))),128))])):(o(),l("div",di,[...g[42]||(g[42]=[e("p",{class:"text-sm text-gray-600"},"No additional consents added yet",-1),e("p",{class:"text-xs text-gray-500 mt-1"},'Click "Add Additional Consent" to add consents from other councils',-1)])]))])):y("",!0)])]),e("div",ui,[g[49]||(g[49]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"PIM and Building Consent",-1)),g[50]||(g[50]=e("p",{class:"text-sm text-gray-600 mb-4"}," Have you applied for a Project Information Memorandum (PIM) or a Building consent for this project? ",-1)),e("div",pi,[e("div",ci,[e("label",mi,[f(e("input",{type:"radio",value:!1,"onUpdate:modelValue":g[6]||(g[6]=j=>u.value.pim_applied=j),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,u.value.pim_applied]]),g[45]||(g[45]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"No",-1))]),e("label",gi,[f(e("input",{type:"radio",value:!0,"onUpdate:modelValue":g[7]||(g[7]=j=>u.value.pim_applied=j),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,u.value.pim_applied]]),g[46]||(g[46]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"Yes",-1))])]),u.value.pim_applied?(o(),l("div",bi,[e("div",null,[g[47]||(g[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"PIM Number (if applicable)",-1)),f(e("input",{"onUpdate:modelValue":g[8]||(g[8]=j=>u.value.pim_number=j),type:"text",placeholder:"e.g., PIM-2024-001",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,u.value.pim_number]])]),e("div",null,[g[48]||(g[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Building Consent Number (if applicable)",-1)),f(e("input",{"onUpdate:modelValue":g[9]||(g[9]=j=>u.value.building_consent_number=j),type:"text",placeholder:"e.g., BC-2024-001",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,u.value.building_consent_number]])])])):y("",!0)])]),e("div",vi,[g[56]||(g[56]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Site Visit Information",-1)),g[57]||(g[57]=e("p",{class:"text-sm text-gray-600 mb-4"}," In order to assess your application it will generally be necessary for the planning officer to visit your site. This typically involves an outdoor inspection only, and there is no need for you to be home for this purpose. ",-1)),e("div",yi,[e("div",fi,[e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",u.value.site_visit_locked_gates?"border-orange-600 bg-orange-50":"border-gray-200 hover:border-gray-300"])},[f(e("input",{"onUpdate:modelValue":g[10]||(g[10]=j=>u.value.site_visit_locked_gates=j),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,u.value.site_visit_locked_gates]]),g[51]||(g[51]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Locked gates or security systems present"),e("p",{class:"text-xs text-gray-600 mt-1"},"Restricting access by Council staff")],-1))],2),e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",u.value.site_visit_dogs_present?"border-orange-600 bg-orange-50":"border-gray-200 hover:border-gray-300"])},[f(e("input",{"onUpdate:modelValue":g[11]||(g[11]=j=>u.value.site_visit_dogs_present=j),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,u.value.site_visit_dogs_present]]),g[52]||(g[52]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Dogs on the property"),e("p",{class:"text-xs text-gray-600 mt-1"},"Council staff should be aware")],-1))],2)]),e("div",xi,[e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",u.value.site_visit_health_safety_issues?"border-orange-600 bg-orange-50":"border-gray-200 hover:border-gray-300"])},[f(e("input",{"onUpdate:modelValue":g[12]||(g[12]=j=>u.value.site_visit_health_safety_issues=j),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,u.value.site_visit_health_safety_issues]]),g[53]||(g[53]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Other health and safety issues"),e("p",{class:"text-xs text-gray-600 mt-1"},"Council staff should be aware before visiting")],-1))],2),e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",u.value.site_visit_notice_required?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"])},[f(e("input",{"onUpdate:modelValue":g[13]||(g[13]=j=>u.value.site_visit_notice_required=j),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,u.value.site_visit_notice_required]]),g[54]||(g[54]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Notice required prior to site visit"),e("p",{class:"text-xs text-gray-600 mt-1"},"E.g., if the property is tenanted")],-1))],2)]),u.value.site_visit_locked_gates||u.value.site_visit_dogs_present||u.value.site_visit_health_safety_issues||u.value.site_visit_notice_required?(o(),l("div",_i,[g[55]||(g[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Additional Details for Site Visit ",-1)),f(e("textarea",{"onUpdate:modelValue":g[14]||(g[14]=j=>u.value.site_visit_details=j),rows:"3",placeholder:"Provide details so Council staff can take the necessary precautions...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,u.value.site_visit_details]])])):y("",!0)])]),I.value?(o(),l("div",hi,[g[63]||(g[63]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Agent Details",-1)),g[64]||(g[64]=e("p",{class:"text-sm text-gray-600 mb-4"}," You may contact Resource Consent Planning Professionals or Agents from the list available in eRCS to obtain quotes from and engage them to help you prepare and lodge your application by selecting the Request Quote button. ",-1)),g[65]||(g[65]=e("p",{class:"text-sm text-orange-600 mb-4 font-medium"}," Please note: You will not be able to make any more changes or complete this application once you engage an Agent. ",-1)),e("div",wi,[e("div",{class:"flex items-center space-x-4"},[e("button",{type:"button",onClick:z,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},[...g[58]||(g[58]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Request Quote from Agent ",-1)])])]),u.value.agent_rfqs&&u.value.agent_rfqs.length>0?(o(),l("div",ki,[g[61]||(g[61]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Agent Requests for Quote",-1)),e("div",$i,[(o(!0),l(Y,null,J(u.value.agent_rfqs,(j,se)=>(o(),l("div",{key:se,class:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[e("div",Ci,[e("div",Ai,[e("div",Vi,[e("span",Si,"RFQ #"+v(j.rfq_id||se+1),1),e("span",{class:Q(["px-2 py-1 text-xs font-medium rounded-full",j.status==="Draft"?"bg-gray-100 text-gray-800":j.status==="Sent to Agent"?"bg-blue-100 text-blue-800":j.status==="Quote Received"?"bg-yellow-100 text-yellow-800":j.status==="Quote Accepted"?"bg-purple-100 text-purple-800":j.status==="Agent Engaged"?"bg-green-100 text-green-800":j.status==="Cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"])},v(j.status||"Draft"),3)]),j.agent_name?(o(),l("div",Mi,[g[59]||(g[59]=e("span",{class:"font-medium"},"Agent:",-1)),O(" "+v(j.agent_name),1)])):y("",!0),j.agent_quote_amount?(o(),l("div",qi,[g[60]||(g[60]=e("span",{class:"font-medium"},"Quote:",-1)),O(" $"+v(Number(j.agent_quote_amount).toFixed(2)),1)])):y("",!0),j.sent_date?(o(),l("div",Pi," Sent: "+v(new Date(j.sent_date).toLocaleDateString()),1)):y("",!0)]),e("div",Di,[e("button",{type:"button",onClick:_e=>C(se),class:"px-3 py-1.5 text-blue-600 hover:text-blue-800 text-sm font-medium border border-blue-600 rounded hover:bg-blue-50 transition-colors"}," View Details ",8,Ui),j.status==="Quote Received"||j.status==="Quote Accepted"?(o(),l("button",{key:0,type:"button",onClick:_e=>m(se),class:"px-3 py-1.5 bg-green-600 text-white text-sm font-medium rounded hover:bg-green-700 transition-colors",disabled:j.status==="Agent Engaged"},v(j.status==="Agent Engaged"?"Engaged":"Accept Quote"),9,ji)):y("",!0)])])]))),128))])])):(o(),l("div",Ri,[...g[62]||(g[62]=[e("p",{class:"text-sm text-gray-600"},'No agent quotes requested yet. Click "Request Quote from Agent" to get started.',-1)])]))])])):y("",!0),e("div",zi,[g[70]||(g[70]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Council Meeting",-1)),g[71]||(g[71]=e("p",{class:"text-sm text-gray-600 mb-4"}," You may schedule a Council Meeting with the Council to seek further clarifications in respect of your application by selecting the Council Meeting button. ",-1)),g[72]||(g[72]=e("p",{class:"text-sm text-gray-600 mb-4"}," Please include any relevant information or documents such as conceptual plans or draft assessment of environmental effects you have. ",-1)),e("div",Ti,[e("label",Ii,[f(e("input",{"onUpdate:modelValue":g[15]||(g[15]=j=>u.value.pre_app_meeting_not_required=j),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,u.value.pre_app_meeting_not_required]]),g[66]||(g[66]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"No Meeting Required",-1))]),e("button",{type:"button",onClick:g[16]||(g[16]=j=>$e.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},[...g[67]||(g[67]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),O(" Request Council Meeting ",-1)])])]),u.value.pre_app_meetings&&u.value.pre_app_meetings.length>0?(o(),l("div",Bi,[g[69]||(g[69]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Scheduled Meetings",-1)),e("div",Ei,[(o(!0),l(Y,null,J(u.value.pre_app_meetings,(j,se)=>(o(),l("div",{key:se,class:"p-3 bg-gray-50 border border-gray-200 rounded-lg flex items-center justify-between"},[e("div",Ni,[e("div",Li,[e("span",Fi,v(j.meeting_type||"Council Meeting"),1),e("span",{class:Q(["px-2 py-1 text-xs rounded-full",j.status==="Scheduled"?"bg-blue-100 text-blue-800":j.status==="Confirmed"?"bg-green-100 text-green-800":j.status==="Completed"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"])},v(j.status||"Requested"),3)]),j.scheduled_start?(o(),l("div",Hi,[g[68]||(g[68]=e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),O(" "+v(new Date(j.scheduled_start).toLocaleString()),1)])):y("",!0)]),e("button",{type:"button",onClick:_e=>R(se),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," View Details ",8,Oi)]))),128))])])):y("",!0)]),e("div",Wi,[g[76]||(g[76]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Correspondences and Invoices",-1)),e("p",Qi,v(I.value?"All correspondence and notifications will be sent to the Applicant. If an Applicant engages an Agent, they will be sent to both parties.":"All correspondence and notifications will be sent to the Applicant and any additional contacts you specify."),1),e("div",Gi,[e("div",null,[g[75]||(g[75]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," All Invoice to be paid by * ",-1)),e("div",Yi,[e("label",{class:Q(["flex items-center p-3 border-2 rounded-lg cursor-pointer transition-colors",u.value.invoice_responsible_party==="Applicant"?"border-blue-600 bg-blue-50":"border-gray-200"])},[f(e("input",{"onUpdate:modelValue":g[17]||(g[17]=j=>u.value.invoice_responsible_party=j),type:"radio",value:"Applicant",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,u.value.invoice_responsible_party]]),g[73]||(g[73]=e("span",{class:"ml-3 font-medium text-gray-900"},"Applicant",-1))],2),I.value?(o(),l("label",{key:0,class:Q(["flex items-center p-3 border-2 rounded-lg cursor-pointer transition-colors",u.value.invoice_responsible_party==="Agent"?"border-blue-600 bg-blue-50":"border-gray-200"])},[f(e("input",{"onUpdate:modelValue":g[18]||(g[18]=j=>u.value.invoice_responsible_party=j),type:"radio",value:"Agent",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",disabled:!u.value.agent_id},null,8,Ji),[[ce,u.value.invoice_responsible_party]]),e("div",Ki,[g[74]||(g[74]=e("span",{class:"font-medium text-gray-900"},"Agent",-1)),u.value.agent_id?y("",!0):(o(),l("p",Zi," Only available when an agent is engaged "))])],2)):y("",!0),(o(!0),l(Y,null,J(u.value.additional_contacts,(j,se)=>(o(),l("label",{key:`contact-${se}`,class:Q(["flex items-center p-3 border-2 rounded-lg cursor-pointer transition-colors",u.value.invoice_responsible_party===`Contact-${j.contact_id||se}`?"border-blue-600 bg-blue-50":"border-gray-200"])},[f(e("input",{"onUpdate:modelValue":g[19]||(g[19]=_e=>u.value.invoice_responsible_party=_e),type:"radio",value:`Contact-${j.contact_id||se}`,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,Xi),[[ce,u.value.invoice_responsible_party]]),e("div",ed,[e("span",td,v(j.contact_name),1),e("p",od,v(j.contact_email),1)])],2))),128))])])])]),e("div",sd,[g[80]||(g[80]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Add More Contact Persons",-1)),g[81]||(g[81]=e("p",{class:"text-sm text-gray-600 mb-4"}," You can also nominate third parties to be included in the list by selecting their names contact details below. You will not be able remove them from the list once the application is submitted, however you can request Consents Online Limited to do that. ",-1)),e("div",{class:"flex justify-between items-center mb-4"},[g[78]||(g[78]=e("h4",{class:"text-base font-semibold text-gray-900"},"Additional Contacts",-1)),e("button",{onClick:a,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[...g[77]||(g[77]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Contact Person ",-1)])])]),u.value.additional_contact_persons&&u.value.additional_contact_persons.length>0?(o(),l("div",ld,[(o(!0),l(Y,null,J(u.value.additional_contact_persons,(j,se)=>(o(),l("div",{key:se,class:"p-3 bg-white border border-gray-200 rounded-lg flex items-center justify-between"},[e("div",ad,[e("p",rd,v(j.attendee_name),1),e("p",nd,v(j.attendee_email),1),j.attendee_phone?(o(),l("p",id,v(j.attendee_phone),1)):y("",!0),j.organization?(o(),l("p",dd,v(j.organization),1)):y("",!0)]),e("button",{onClick:_e=>c(se),type:"button",class:"text-red-600 hover:text-red-800 text-sm"}," Remove ",8,ud)]))),128))])):(o(),l("div",pd,[...g[79]||(g[79]=[e("p",{class:"text-sm text-gray-600"},"No additional contact persons added yet",-1),e("p",{class:"text-xs text-gray-500 mt-1"},'Click "Add Contact Person" to nominate third parties for correspondence',-1)])]))])]),s.value?(o(),l("div",cd,[e("div",md,[e("div",gd,[e("h3",bd,v(S.value!==null?"Edit":"Add")+" Additional Consent ",1),e("button",{onClick:x,class:"text-gray-400 hover:text-gray-600"},[...g[82]||(g[82]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",vd,[e("div",null,[g[84]||(g[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Consent Type *",-1)),f(e("select",{"onUpdate:modelValue":g[20]||(g[20]=j=>h.value.consent_type=j),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...g[83]||(g[83]=[X('<option value="">Select consent type</option><option value="Discharge Permit">Discharge Permit</option><option value="Coastal Permit">Coastal Permit</option><option value="Water Permit">Water Permit</option><option value="NES Soils">NES Soils</option>',5)])],512),[[ie,h.value.consent_type]])]),e("div",null,[g[86]||(g[86]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Consent Status *",-1)),f(e("select",{"onUpdate:modelValue":g[21]||(g[21]=j=>h.value.consent_status=j),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...g[85]||(g[85]=[X('<option value="">Select status</option><option value="Required">Required</option><option value="Applied">Applied</option><option value="Granted">Granted</option><option value="Declined">Declined</option>',5)])],512),[[ie,h.value.consent_status]])]),e("div",null,[g[87]||(g[87]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reference Number (if applicable)",-1)),f(e("input",{"onUpdate:modelValue":g[22]||(g[22]=j=>h.value.reference_number=j),type:"text",placeholder:"e.g., DP-2024-001",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,h.value.reference_number]])])]),e("div",yd,[e("button",{onClick:x,type:"button",class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors"}," Cancel "),e("button",{onClick:r,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:!h.value.consent_type||!h.value.consent_status},v(S.value!==null?"Update":"Add")+" Consent ",9,fd)])])])):y("",!0),re(Rt,{"is-open":i.value,"existing-contacts":w.value,onClose:g[23]||(g[23]=j=>i.value=!1),onSelect:b},null,8,["is-open","existing-contacts"]),$e.value?(o(),l("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ye(pe,["self"])},[e("div",xd,[e("div",{class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},[g[89]||(g[89]=e("h3",{class:"text-xl font-bold text-gray-900"},"Request Council Meeting",-1)),e("button",{onClick:pe,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...g[88]||(g[88]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",_d,[e("div",hd,[g[104]||(g[104]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("p",{class:"text-sm text-blue-900"}," A council meeting allows you to discuss your proposal with council planners before formally submitting your application. This can help clarify requirements and identify potential issues early. ")],-1)),e("div",wd,[e("div",null,[g[91]||(g[91]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Type *",-1)),f(e("select",{"onUpdate:modelValue":g[24]||(g[24]=j=>L.value.meeting_type=j),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...g[90]||(g[90]=[X('<option value="Council Meeting">Council Meeting</option><option value="Site Visit">Site Visit</option><option value="Technical Review">Technical Review</option><option value="Follow-up Meeting">Follow-up Meeting</option><option value="Other">Other</option>',5)])],512),[[ie,L.value.meeting_type]])]),e("div",null,[g[93]||(g[93]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Format *",-1)),f(e("select",{"onUpdate:modelValue":g[25]||(g[25]=j=>L.value.meeting_format=j),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...g[92]||(g[92]=[e("option",{value:"In Person"},"In Person",-1),e("option",{value:"Video Call"},"Video Call",-1),e("option",{value:"Phone Call"},"Phone Call",-1),e("option",{value:"Hybrid"},"Hybrid",-1)])],512),[[ie,L.value.meeting_format]])])]),e("div",kd,[g[97]||(g[97]=e("div",{class:"flex items-center justify-between mb-3"},[e("h4",{class:"text-sm font-semibold text-gray-900"},"Preferred Meeting Times *"),e("span",{class:"text-xs text-gray-600"},"Select up to 3 time slots")],-1)),g[98]||(g[98]=e("p",{class:"text-xs text-gray-600 mb-4"}," Select your 3 preferred times. The planner will accept one of these times or propose an alternative. ",-1)),e("div",$d,[e("div",Cd,[e("div",Ad,[g[94]||(g[94]=e("span",{class:"text-sm font-medium text-gray-700"},"1st Preference",-1)),L.value.preferred_time_slot_1_start?(o(),l("button",{key:0,onClick:g[26]||(g[26]=j=>Ee(1)),type:"button",class:"text-xs text-red-600 hover:text-red-800"}," Clear ")):y("",!0)]),re(bt,{modelValue:L.value.preferred_time_slot_1_start,"onUpdate:modelValue":g[27]||(g[27]=j=>L.value.preferred_time_slot_1_start=j),label:"Start Time",required:!0},null,8,["modelValue"])]),e("div",Vd,[e("div",Sd,[g[95]||(g[95]=e("span",{class:"text-sm font-medium text-gray-700"},"2nd Preference",-1)),L.value.preferred_time_slot_2_start?(o(),l("button",{key:0,onClick:g[28]||(g[28]=j=>Ee(2)),type:"button",class:"text-xs text-red-600 hover:text-red-800"}," Clear ")):y("",!0)]),re(bt,{modelValue:L.value.preferred_time_slot_2_start,"onUpdate:modelValue":g[29]||(g[29]=j=>L.value.preferred_time_slot_2_start=j),label:"Start Time",required:!0},null,8,["modelValue"])]),e("div",Md,[e("div",qd,[g[96]||(g[96]=e("span",{class:"text-sm font-medium text-gray-700"},"3rd Preference",-1)),L.value.preferred_time_slot_3_start?(o(),l("button",{key:0,onClick:g[30]||(g[30]=j=>Ee(3)),type:"button",class:"text-xs text-red-600 hover:text-red-800"}," Clear ")):y("",!0)]),re(bt,{modelValue:L.value.preferred_time_slot_3_start,"onUpdate:modelValue":g[31]||(g[31]=j=>L.value.preferred_time_slot_3_start=j),label:"Start Time",required:!0},null,8,["modelValue"])])])]),e("div",null,[g[99]||(g[99]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Purpose *",-1)),f(e("textarea",{"onUpdate:modelValue":g[32]||(g[32]=j=>L.value.meeting_purpose=j),rows:"3",placeholder:"Describe the purpose of this meeting and what you'd like to discuss...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[D,L.value.meeting_purpose]])]),e("div",null,[g[100]||(g[100]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Discussion Points",-1)),f(e("textarea",{"onUpdate:modelValue":g[33]||(g[33]=j=>L.value.discussion_points=j),rows:"4",placeholder:"List key topics you'd like to discuss (bullet points or list format)",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,L.value.discussion_points]])]),L.value.meeting_format==="In Person"||L.value.meeting_format==="Hybrid"?(o(),l("div",Pd,[g[101]||(g[101]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Preferred Location",-1)),f(e("input",{"onUpdate:modelValue":g[34]||(g[34]=j=>L.value.meeting_location=j),type:"text",placeholder:"e.g., Council offices, or site address",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,L.value.meeting_location]])])):y("",!0),e("div",Dd,[e("div",{class:"flex items-center justify-between mb-3"},[g[102]||(g[102]=e("h4",{class:"text-sm font-semibold text-gray-900"},"Additional Attendees",-1)),e("button",{onClick:dt,type:"button",class:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," + Add Attendee ")]),L.value.meeting_attendees&&L.value.meeting_attendees.length>0?(o(),l("div",Ud,[(o(!0),l(Y,null,J(L.value.meeting_attendees,(j,se)=>(o(),l("div",{key:se,class:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200"},[e("div",jd,[e("p",Rd,v(j.attendee_name),1),e("p",zd,v(j.attendee_email),1),j.organization?(o(),l("p",Td,v(j.organization),1)):y("",!0)]),e("button",{onClick:_e=>we(se),type:"button",class:"text-red-600 hover:text-red-800 ml-2"},[...g[103]||(g[103]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Id)]))),128))])):(o(),l("p",Bd,"No additional attendees added yet"))])])]),re(Rt,{"is-open":T.value,"existing-contacts":w.value,onClose:g[35]||(g[35]=j=>T.value=!1),onSelect:Qe},null,8,["is-open","existing-contacts"]),e("div",Ed,[e("button",{onClick:pe,type:"button",class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors"}," Cancel "),e("button",{onClick:Z,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:!L.value.meeting_type||!L.value.meeting_format||!L.value.meeting_purpose},v(Ce.value!==null?"Update":"Request")+" Meeting ",9,Nd)])])])):y("",!0),re(rn,{"is-open":F.value,rfq:K.value,"request-id":u.value.name,onClose:M,onSave:E,onSendToAgent:G,onEngageAgent:te},null,8,["is-open","rfq","request-id"])]))}},Fd={class:"space-y-8"},Hd={class:"border-b border-gray-200 pb-8"},Od={key:0,class:"text-xs text-green-600 mt-1"},Wd={key:0,class:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-lg"},Qd={key:1,class:"mb-4"},Gd={key:2,class:"space-y-4"},Yd={class:"flex justify-between items-start mb-4"},Jd={class:"text-base font-semibold text-gray-900"},Kd=["onClick"],Zd={class:"grid md:grid-cols-2 gap-4"},Xd=["onUpdate:modelValue"],eu=["onUpdate:modelValue"],tu={class:"mt-4"},ou=["onUpdate:modelValue"],su={class:"mt-4"},lu=["onUpdate:modelValue"],au={key:3,class:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},ru={key:0,class:"border-t border-gray-200 pt-8"},nu={__name:"Step2NaturalHazards",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=H({get:()=>_.modelValue,set:P=>V("update:modelValue",P)}),u=P=>{var x;return((x=_.modelValue.consent_types)==null?void 0:x.some(r=>r.consent_type===P))||!1},d=H(()=>u("Land Use")||u("Subdivision"));ae(()=>t.value.no_natural_hazards_confirmed,P=>{if(P&&d.value){const x=N({},_.modelValue);x.natural_hazards=[],x.no_natural_hazards_confirmed=!0,V("update:modelValue",x)}});const s=P=>{const x=P.target.files[0];if(x){if(x.size>10485760){alert("File size exceeds 10MB. Please upload a smaller file."),P.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png","image/jpg"].includes(x.type)){alert("Invalid file type. Please upload a PDF, Word document, or image."),P.target.value="";return}V("update:modelValue",ve(N({},_.modelValue),{inundation_advice_document:x.name}))}},S=()=>{const P=N({},_.modelValue);P.natural_hazards||(P.natural_hazards=[]),P.natural_hazards.push({hazard_type:"",risk_level:"",assessment_notes:"",mitigation_measures:""}),P.no_natural_hazards_confirmed=!1,V("update:modelValue",P)},h=P=>{if(confirm("Remove this natural hazard?")){const x=N({},_.modelValue);x.natural_hazards.splice(P,1),V("update:modelValue",x)}};return(P,x)=>(o(),l("div",null,[x[21]||(x[21]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Natural Hazards Assessment",-1)),x[22]||(x[22]=e("p",{class:"text-gray-600 mb-8"},"Identify any natural hazards that may affect the site (RMA s.104 & s.106)",-1)),e("div",Fd,[e("div",Hd,[x[3]||(x[3]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Inundation Advice",-1)),x[4]||(x[4]=e("p",{class:"text-sm text-gray-600 mb-4"}," If your property is subject to inundation then please attach any advice received from Regional Council regarding inundation and your proposals. ",-1)),e("div",null,[x[1]||(x[1]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Upload Inundation Advice (if applicable) ",-1)),e("input",{type:"file",onChange:s,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"},null,32),t.value.inundation_advice_document?(o(),l("p",Od,"  Document uploaded: "+v(t.value.inundation_advice_document),1)):y("",!0),x[2]||(x[2]=e("p",{class:"mt-1 text-xs text-gray-500"},"PDF, Word documents, or images (max 10MB)",-1))])]),e("div",null,[x[17]||(x[17]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Natural Hazards Identification",-1)),x[18]||(x[18]=e("div",{class:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},[e("p",{class:"text-sm text-blue-900 font-medium mb-2"},"Question:"),e("p",{class:"text-sm text-blue-800"}," Would the land, or any structure on the land, for which consent is sought, be or is likely to be subject to any of the following natural hazards listed below: ")],-1)),d.value?(o(),l("div",Wd,[...x[5]||(x[5]=[X('<div class="flex items-start"><svg class="w-5 h-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-amber-900 text-sm">Critical Assessment Required - s.106 RMA</h5><p class="text-amber-800 text-sm mt-1"><strong>Important:</strong> Under s.106 RMA, councils <strong>must refuse</strong> Land Use and Subdivision consents if building on land subject to certain natural hazards would: </p><ul class="text-amber-800 text-sm mt-2 ml-4 list-disc"><li>Accelerate, worsen, or result in material damage</li><li>Create or worsen a natural hazard on the property or other property</li></ul><p class="text-amber-800 text-sm mt-2"> Please carefully identify all natural hazards affecting the site and detail mitigation measures. </p></div></div>',1)])])):y("",!0),x[19]||(x[19]=e("p",{class:"text-sm text-gray-600 mb-4"}," Under s.104(1)(c) RMA, councils must consider the risk of natural hazards. Identify any hazards that may affect the site. ",-1)),d.value&&(!t.value.natural_hazards||t.value.natural_hazards.length===0)?(o(),l("div",Qd,[e("label",{for:"no-hazards-confirmation",class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer bg-white transition-colors",t.value.no_natural_hazards_confirmed?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[f(e("input",{id:"no-hazards-confirmation","onUpdate:modelValue":x[0]||(x[0]=r=>t.value.no_natural_hazards_confirmed=r),type:"checkbox","aria-describedby":"no-hazards-description",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,t.value.no_natural_hazards_confirmed]]),x[6]||(x[6]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"I confirm there are no natural hazards affecting this site"),e("p",{id:"no-hazards-description",class:"text-xs text-gray-600 mt-1"}," By checking this box, I confirm that I have considered all potential natural hazards (flooding, erosion, landslip, earthquake, tsunami, etc.) and none are applicable to this site. ")],-1))],2)])):y("",!0),e("div",{class:"flex justify-between items-center mb-4"},[x[8]||(x[8]=e("p",{class:"text-sm text-gray-700"}," Select hazard types that may affect your site and describe mitigation measures ",-1)),e("button",{onClick:S,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[...x[7]||(x[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Natural Hazard ",-1)])])]),t.value.natural_hazards&&t.value.natural_hazards.length>0?(o(),l("div",Gd,[(o(!0),l(Y,null,J(t.value.natural_hazards,(r,A)=>(o(),l("div",{key:A,class:"border border-gray-200 rounded-lg p-4 bg-white shadow-sm"},[e("div",Yd,[e("h4",Jd," Hazard #"+v(A+1)+v(r.hazard_type?": "+r.hazard_type:""),1),e("button",{onClick:i=>h(A),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...x[9]||(x[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Kd)]),e("div",Zd,[e("div",null,[x[11]||(x[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Hazard Type *",-1)),f(e("select",{"onUpdate:modelValue":i=>r.hazard_type=i,required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...x[10]||(x[10]=[X('<option value="">Select hazard type</option><option value="Earthquake">Earthquake</option><option value="Sedimentation">Sedimentation</option><option value="Fire">Fire</option><option value="Subsidence">Subsidence</option><option value="Tsunami">Tsunami</option><option value="Wind">Wind</option><option value="Erosion">Erosion</option><option value="Landslip">Landslip</option><option value="Volcanic">Volcanic &amp; Geothermal</option><option value="Drought">Drought</option><option value="Flood">Flood Activity</option>',12)])],8,Xd),[[ie,r.hazard_type]])]),e("div",null,[x[13]||(x[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Risk Level",-1)),f(e("select",{"onUpdate:modelValue":i=>r.risk_level=i,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...x[12]||(x[12]=[e("option",{value:""},"Select risk level",-1),e("option",{value:"Low"},"Low",-1),e("option",{value:"Medium"},"Medium",-1),e("option",{value:"High"},"High",-1)])],8,eu),[[ie,r.risk_level]])])]),e("div",tu,[x[14]||(x[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Assessment Notes",-1)),f(e("textarea",{"onUpdate:modelValue":i=>r.assessment_notes=i,rows:"2",placeholder:"Describe the nature and extent of the hazard as it relates to this site...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,ou),[[D,r.assessment_notes]])]),e("div",su,[x[15]||(x[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mitigation Measures",-1)),f(e("textarea",{"onUpdate:modelValue":i=>r.mitigation_measures=i,rows:"3",placeholder:"Describe mitigation measures to address this hazard (design features, engineering solutions, management plans)...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,lu),[[D,r.mitigation_measures]])])]))),128))])):(o(),l("div",au,[...x[16]||(x[16]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),e("p",{class:"mt-2 text-sm text-gray-600"},"No natural hazards identified",-1),e("p",{class:"text-xs text-gray-500 mt-1"},'Click "Add Natural Hazard" if any hazards may affect the site',-1)])]))]),t.value.natural_hazards&&t.value.natural_hazards.length>0?(o(),l("div",ru,[...x[20]||(x[20]=[e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Supporting Documentation",-1),e("p",{class:"text-sm text-gray-600 mb-4"}," Upload any hazard reports, geotechnical assessments, flood studies, or other documentation supporting your hazard assessment. ",-1),e("div",{class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},[e("p",{class:"text-sm text-gray-600"}," Hazard-related documents can be uploaded in Step 6 (Plans & Documents). ")],-1)])])):y("",!0)])]))}},iu={class:"space-y-8"},du={class:"space-y-3"},uu=["aria-checked","aria-label","onClick","onKeydown"],pu={class:"flex items-start"},cu=["checked"],mu={class:"ml-3 flex-1"},gu={class:"text-base font-semibold text-gray-900"},bu={key:0,class:"text-xs text-gray-600 mt-1"},vu={key:1,class:"mt-3 space-y-3"},yu=["onUpdate:modelValue"],fu=["onUpdate:modelValue"],xu={key:0,class:"border-t border-gray-200 pt-8"},_u={class:"flex justify-between items-center mb-4"},hu={key:0,class:"space-y-3 mb-6"},wu={class:"flex-1"},ku={class:"font-medium text-gray-900"},$u={class:"text-sm text-gray-600 mt-1"},Cu={key:0,class:"text-xs text-gray-500 mt-1"},Au={class:"flex gap-2"},Vu=["onClick"],Su=["onClick"],Mu={key:1,class:"text-center py-6 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 mb-6"},qu={class:"border-t border-gray-200 pt-6"},Pu={class:"mb-4"},Du={class:"flex gap-4"},Uu={class:"flex items-center"},ju={class:"flex items-center"},Ru={key:0,class:"space-y-4"},zu={key:0,class:"text-xs text-green-600 mt-1"},Tu={key:1,class:"border-t border-gray-200 pt-6"},Iu={class:"p-4 bg-gray-50 border border-gray-200 rounded-lg"},Bu={class:"flex items-start cursor-pointer"},Eu={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Nu={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center"},Lu={class:"text-lg font-semibold text-gray-900"},Fu={class:"px-6 py-4 space-y-4"},Hu=["value"],Ou={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Wu=["disabled"],Qu={__name:"Step3NESAssessment",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=H({get:()=>_.modelValue,set:z=>V("update:modelValue",z)}),u=[{value:"Contaminated Soil (HAIL)",label:"NES for Assessing and Managing Contaminants in Soil (HAIL)",description:"Applies if site has had hazardous activities or industries"},{value:"Air Quality",label:"NES for Air Quality",description:"Regulates emissions and ambient air quality standards"},{value:"Drinking Water",label:"NES for Sources of Human Drinking Water",description:"Protects drinking water sources from contamination"},{value:"Freshwater",label:"NES for Freshwater Management",description:"Regulates activities affecting lakes, rivers, wetlands, and aquifers"},{value:"Plantation Forestry",label:"NES for Plantation Forestry",description:"Applies to commercial forestry operations"},{value:"Electricity Transmission",label:"NES for Electricity Transmission Activities",description:"Regulates high-voltage transmission lines and infrastructure"},{value:"Telecommunications",label:"NES for Telecommunication Facilities",description:"Applies to cell towers and telecommunication infrastructure"},{value:"Other",label:"Other NES",description:"Any other relevant National Environmental Standard"}],d=["Agriculture - Persistent Pesticide Use","Agriculture - Fertiliser Manufacturing/Storage","Chemicals - Manufacturing/Formulation","Fuel Storage - Petrol Station","Fuel Storage - Bulk Fuel Storage","Gas Works","Landfill/Waste Disposal","Metal Treatment - Electroplating/Galvanizing","Mining/Quarrying","Railway Yards","Sheep Dip","Timber Treatment","Other Industrial Activity"];if(!t.value.nes_items){const z=N({},_.modelValue);z.nes_items=[],V("update:modelValue",z)}const s=Te({}),S=z=>{var C;if(!s[z]){const m=(C=t.value.nes_items)==null?void 0:C.find(M=>M.nes_type===z);m?s[z]=N({},m):s[z]={nes_type:z,applies:!1,description:"",compliance_notes:""}}return s[z]},h=z=>{const C=S(z);C.applies=!C.applies;const m=N({},_.modelValue);m.nes_items||(m.nes_items=[]);const M=m.nes_items.findIndex(E=>E.nes_type===z);C.applies?M>=0?m.nes_items[M]=N({},C):m.nes_items.push(N({},C)):M>=0&&m.nes_items.splice(M,1),C.applies&&(m.no_nes_confirmed=!1),V("update:modelValue",m)},P=H(()=>{var z;return((z=t.value.nes_items)==null?void 0:z.some(C=>C.nes_type==="Contaminated Soil (HAIL)"&&C.applies))||!1}),x=H(()=>{var z;return((z=t.value.nes_items)==null?void 0:z.some(C=>C.applies))||!1}),r=U(!1),A=U(null),i=Te({activity_category:"",activity_description:"",time_period:"",contaminants:"",status:""}),a=()=>{i.activity_category="",i.activity_description="",i.time_period="",i.contaminants="",i.status=""},b=z=>{A.value=z;const C=t.value.hail_activities[z];Object.assign(i,C),r.value=!0},c=z=>{if(confirm("Remove this HAIL activity?")){const C=N({},_.modelValue);C.hail_activities.splice(z,1),V("update:modelValue",C)}},F=H(()=>{var z;return!!(i.activity_category&&((z=i.activity_description)!=null&&z.trim()))}),K=()=>{if(!F.value)return;const z=N({},_.modelValue);z.hail_activities||(z.hail_activities=[]);const C={activity_category:i.activity_category,activity_description:i.activity_description,time_period:i.time_period,contaminants:i.contaminants,status:i.status};A.value!==null?z.hail_activities[A.value]=C:z.hail_activities.push(C),V("update:modelValue",z),W()},W=()=>{r.value=!1,A.value=null,a()},I=z=>{const C=z.target.files[0];if(C){if(C.size>10485760){alert("File size exceeds 10MB. Please upload a smaller file."),z.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(C.type)){alert("Invalid file type. Please upload a PDF or Word document."),z.target.value="";return}V("update:modelValue",ve(N({},_.modelValue),{soil_investigation_document:C.name}))}};return(z,C)=>(o(),l("div",null,[C[38]||(C[38]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"National Environmental Standards Assessment",-1)),C[39]||(C[39]=e("p",{class:"text-gray-600 mb-8"},"Determine which NES may apply to your proposal (RMA Regulations)",-1)),e("div",iu,[e("div",null,[C[14]||(C[14]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"NES Screening",-1)),C[15]||(C[15]=e("p",{class:"text-sm text-gray-600 mb-4"}," Select all National Environmental Standards that may be triggered by your proposal. This initial screening helps determine compliance requirements. ",-1)),e("div",du,[(o(),l(Y,null,J(u,m=>e("div",{key:m.value,role:"checkbox","aria-checked":S(m.value).applies,"aria-label":`${m.label} - Click to toggle applicability`,tabindex:0,class:Q(["border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md focus:ring-2 focus:ring-blue-500 focus:outline-none",S(m.value).applies?"border-blue-600 bg-blue-50":"border-gray-200"]),onClick:M=>h(m.value),onKeydown:[qt(ye(M=>h(m.value),["prevent"]),["space"]),qt(ye(M=>h(m.value),["prevent"]),["enter"])]},[e("div",pu,[e("input",{type:"checkbox",checked:S(m.value).applies,class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",readonly:"","aria-hidden":"true"},null,8,cu),e("div",mu,[e("h4",gu,v(m.label),1),m.description?(o(),l("p",bu,v(m.description),1)):y("",!0),S(m.value).applies?(o(),l("div",vu,[e("div",null,[C[12]||(C[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description / Compliance Status",-1)),f(e("textarea",{"onUpdate:modelValue":M=>S(m.value).description=M,onClick:C[0]||(C[0]=ye(()=>{},["stop"])),rows:"3",placeholder:"Describe how this NES applies and how you will comply...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,8,yu),[[D,S(m.value).description]])]),e("div",null,[C[13]||(C[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Compliance Notes",-1)),f(e("textarea",{"onUpdate:modelValue":M=>S(m.value).compliance_notes=M,onClick:C[1]||(C[1]=ye(()=>{},["stop"])),rows:"2",placeholder:"Additional compliance notes or assessment...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,8,fu),[[D,S(m.value).compliance_notes]])])])):y("",!0)])])],42,uu)),64))])]),P.value?(o(),l("div",xu,[C[28]||(C[28]=X('<div class="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">HAIL Assessment Required</h5><p class="text-blue-800 text-sm mt-1"> Since your site may involve contaminants in soil, you must complete the Hazardous Activities and Industries List (HAIL) assessment below. </p></div></div></div><h3 class="text-lg font-semibold text-gray-900 mb-4">HAIL Activities Assessment</h3><p class="text-sm text-gray-600 mb-4"> Identify any current or historical Hazardous Activities and Industries List (HAIL) activities on the site. </p>',3)),e("div",_u,[C[17]||(C[17]=e("p",{class:"text-sm text-gray-700"}," Add all HAIL activities that have occurred on this site (current or historical) ",-1)),e("button",{onClick:C[2]||(C[2]=m=>r.value=!0),type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[...C[16]||(C[16]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add HAIL Activity ",-1)])])]),t.value.hail_activities&&t.value.hail_activities.length>0?(o(),l("div",hu,[(o(!0),l(Y,null,J(t.value.hail_activities,(m,M)=>(o(),l("div",{key:M,class:"border border-gray-200 rounded-lg p-4 bg-white flex justify-between items-center"},[e("div",wu,[e("div",ku,v(m.activity_category),1),e("div",$u,v(m.activity_description),1),m.time_period?(o(),l("div",Cu,"Time period: "+v(m.time_period),1)):y("",!0)]),e("div",Au,[e("button",{onClick:E=>b(M),type:"button",class:"text-blue-600 hover:text-blue-800 p-1",title:"Edit"},[...C[18]||(C[18]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Vu),e("button",{onClick:E=>c(M),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...C[19]||(C[19]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Su)])]))),128))])):(o(),l("div",Mu,[...C[20]||(C[20]=[e("svg",{class:"mx-auto h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-600"},"No HAIL activities identified",-1),e("p",{class:"text-xs text-gray-500 mt-1"},'Click "Add HAIL Activity" to document any hazardous activities on this site',-1)])])),e("div",qu,[C[27]||(C[27]=e("h4",{class:"text-base font-semibold text-gray-900 mb-3"},"Soil Contamination Assessment",-1)),e("div",Pu,[C[23]||(C[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Has a Preliminary Site Investigation (PSI) or Detailed Site Investigation (DSI) been completed? ",-1)),e("div",Du,[e("label",Uu,[f(e("input",{"onUpdate:modelValue":C[3]||(C[3]=m=>t.value.soil_investigation_completed=m),type:"radio",value:!0,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.soil_investigation_completed]]),C[21]||(C[21]=e("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),e("label",ju,[f(e("input",{"onUpdate:modelValue":C[4]||(C[4]=m=>t.value.soil_investigation_completed=m),type:"radio",value:!1,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.soil_investigation_completed]]),C[22]||(C[22]=e("span",{class:"ml-2 text-sm text-gray-700"},"No",-1))])])]),t.value.soil_investigation_completed?(o(),l("div",Ru,[e("div",null,[C[24]||(C[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Investigation Summary",-1)),f(e("textarea",{"onUpdate:modelValue":C[5]||(C[5]=m=>t.value.soil_investigation_summary=m),rows:"3",placeholder:"Summarize the key findings from the PSI/DSI...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.soil_investigation_summary]])]),e("div",null,[C[25]||(C[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Upload Investigation Report",-1)),e("input",{type:"file",onChange:I,accept:".pdf,.doc,.docx",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"},null,32),t.value.soil_investigation_document?(o(),l("p",zu,"  Document uploaded: "+v(t.value.soil_investigation_document),1)):y("",!0),C[26]||(C[26]=e("p",{class:"mt-1 text-xs text-gray-500"},"PDF or Word documents only (max 10MB)",-1))])])):y("",!0)])])):y("",!0),x.value?y("",!0):(o(),l("div",Tu,[e("div",Iu,[e("label",Bu,[f(e("input",{"onUpdate:modelValue":C[6]||(C[6]=m=>t.value.no_nes_confirmed=m),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,t.value.no_nes_confirmed]]),C[29]||(C[29]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"I confirm that no National Environmental Standards apply to this proposal"),e("p",{class:"text-xs text-gray-600 mt-1"}," By checking this box, I confirm that I have reviewed all NES regulations and none are triggered by this activity. ")],-1))])])]))]),(o(),ue(Ie,{to:"body"},[r.value?(o(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ye(W,["self"])},[e("div",Eu,[e("div",Nu,[e("h3",Lu,v(A.value!==null?"Edit HAIL Activity":"Add HAIL Activity"),1),e("button",{onClick:W,type:"button",class:"text-gray-400 hover:text-gray-600"},[...C[30]||(C[30]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Fu,[e("div",null,[C[32]||(C[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Activity Category *",-1)),f(e("select",{"onUpdate:modelValue":C[7]||(C[7]=m=>i.activity_category=m),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[C[31]||(C[31]=e("option",{value:""},"Select category",-1)),(o(),l(Y,null,J(d,m=>e("option",{key:m,value:m},v(m),9,Hu)),64))],512),[[ie,i.activity_category]])]),e("div",null,[C[33]||(C[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Activity Description *",-1)),f(e("textarea",{"onUpdate:modelValue":C[8]||(C[8]=m=>i.activity_description=m),rows:"3",required:"",placeholder:"Describe the specific HAIL activity that occurred on this site...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,i.activity_description]])]),e("div",null,[C[34]||(C[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Time Period",-1)),f(e("input",{"onUpdate:modelValue":C[9]||(C[9]=m=>i.time_period=m),type:"text",placeholder:"e.g., 1950-1985, Current, Historical",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,i.time_period]])]),e("div",null,[C[35]||(C[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Potential Contaminants",-1)),f(e("input",{"onUpdate:modelValue":C[10]||(C[10]=m=>i.contaminants=m),type:"text",placeholder:"e.g., Heavy metals, Petroleum hydrocarbons, Asbestos",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,i.contaminants]])]),e("div",null,[C[37]||(C[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),f(e("select",{"onUpdate:modelValue":C[11]||(C[11]=m=>i.status=m),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...C[36]||(C[36]=[e("option",{value:""},"Select status",-1),e("option",{value:"Current"},"Current - still operating",-1),e("option",{value:"Historical"},"Historical - no longer operating",-1),e("option",{value:"Remediated"},"Remediated - site cleaned up",-1)])],512),[[ie,i.status]])])]),e("div",Ou,[e("button",{onClick:W,type:"button",class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"}," Cancel "),e("button",{onClick:K,type:"button",disabled:!F.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},v(A.value!==null?"Update":"Add")+" Activity ",9,Wu)])])])):y("",!0)]))]))}},Gu={class:"space-y-8"},Yu={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Ju={class:"p-6 space-y-4"},Ku={class:"mb-4"},Zu={class:"flex gap-4"},Xu={class:"flex items-center"},e0={class:"flex items-center"},t0={key:0,class:"space-y-4 border-t border-gray-200 pt-4"},o0={class:"border-t border-gray-200 pt-4"},s0={class:"flex justify-between items-center mb-3"},l0={key:0,class:"space-y-2"},a0={class:"flex-1"},r0={class:"font-medium text-gray-900"},n0={class:"text-sm text-gray-600 mt-1"},i0={key:0},d0={key:1},u0={key:0,class:"text-xs text-gray-500 mt-1"},p0={class:"flex gap-2"},c0=["onClick"],m0=["onClick"],g0={key:1,class:"text-center py-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},b0={class:"border-t border-gray-200 pt-4"},v0={key:0,class:"text-xs text-green-600 mt-1"},y0={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},f0={class:"p-6 space-y-6"},x0={key:0,class:"space-y-3"},_0={class:"flex items-start justify-between mb-3"},h0={class:"font-semibold text-gray-900"},w0={class:"flex items-center gap-2"},k0=["onClick"],$0=["onClick"],C0={class:"grid md:grid-cols-2 gap-4"},A0={class:"font-medium"},V0={class:"font-medium"},S0={class:"font-medium"},M0={class:"font-medium"},q0={key:0,class:"text-green-600"},P0={key:1,class:"text-gray-500"},D0={key:0,class:"mt-3"},U0={class:"text-sm mt-1"},j0={key:1,class:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},R0={key:2,class:"border-t border-gray-200 pt-4"},z0={class:"text-sm text-gray-600 mb-3"},T0={class:"space-y-2"},I0={class:"border-t border-gray-200 pt-4"},B0={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},E0={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center"},N0={class:"text-lg font-semibold text-gray-900"},L0={class:"px-6 py-4 space-y-4"},F0={class:"grid md:grid-cols-2 gap-4"},H0={class:"grid md:grid-cols-2 gap-4"},O0={class:"grid md:grid-cols-3 gap-4"},W0={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Q0=["disabled"],G0={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4"},Y0={class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},J0={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},K0={class:"text-lg font-semibold text-gray-900"},Z0={class:"p-6 space-y-4"},X0={class:"flex items-start"},ep={class:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200 flex items-center justify-end gap-3"},tp=["disabled"],op={__name:"Step4Approvals",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=H({get:()=>_.modelValue,set:C=>V("update:modelValue",C)}),u=U(!1),d=U(null),s=Te({organisation_name:"",contact_name:"",email:"",phone:"",address:"",rd_number:"",suburb:"",city:"",postcode:""}),S=()=>{Object.assign(s,{organisation_name:"",contact_name:"",email:"",phone:"",address:"",rd_number:"",suburb:"",city:"",postcode:""})},h=C=>{d.value=C,Object.assign(s,t.value.pba_contacts[C]),u.value=!0},P=C=>{if(confirm("Remove this PBA contact?")){const m=N({},_.modelValue);m.pba_contacts.splice(C,1),V("update:modelValue",m)}},x=()=>{if(!s.contact_name)return;const C=N({},_.modelValue);C.pba_contacts||(C.pba_contacts=[]);const m=N({},s);d.value!==null?C.pba_contacts[d.value]=m:C.pba_contacts.push(m),V("update:modelValue",C),r()},r=()=>{u.value=!1,d.value=null,S()},A=C=>{const m=Array.from(C.target.files);if(m.length>0){const M=N({},_.modelValue);M.pba_documents||(M.pba_documents=[]),m.forEach(E=>{if(E.size>10485760){alert(`File ${E.name} exceeds 10MB. Please upload a smaller file.`);return}M.pba_documents.push(E.name)}),V("update:modelValue",M)}},i=U(!1),a=U(null),b=U({party_name:"",relationship:"",contact_info:"",address:"",effects:"",written_approval:!1}),c=H(()=>{var C;return((C=t.value.affected_parties)==null?void 0:C.filter(m=>m.written_approval===!0))||[]}),F=()=>{a.value=null,b.value={party_name:"",relationship:"",contact_info:"",address:"",effects:"",written_approval:!1},i.value=!0},K=C=>{a.value=C,b.value=N({},t.value.affected_parties[C]),i.value=!0},W=()=>{i.value=!1,a.value=null,b.value={party_name:"",relationship:"",contact_info:"",address:"",effects:"",written_approval:!1}},I=()=>{if(!b.value.party_name||!b.value.relationship)return;const C=N({},_.modelValue);C.affected_parties||(C.affected_parties=[]),a.value!==null?C.affected_parties[a.value]=N({},b.value):C.affected_parties.push(N({},b.value)),V("update:modelValue",C),W()},z=C=>{if(confirm("Are you sure you want to remove this affected party?")){const m=N({},_.modelValue);m.affected_parties.splice(C,1),V("update:modelValue",m)}};return(C,m)=>(o(),l("div",null,[m[72]||(m[72]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Boundary Approvals & Affected Parties",-1)),m[73]||(m[73]=e("p",{class:"text-gray-600 mb-8"},"Obtain approvals for boundary activities and identify affected parties (RMA s.95A-s.95F)",-1)),e("div",Gu,[e("div",Yu,[m[35]||(m[35]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Permitted Boundary Activity (PBA) Approvals")],-1)),e("div",Ju,[m[34]||(m[34]=X('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">About Permitted Boundary Activities</h5><p class="text-blue-800 text-sm mt-1"> A Permitted Boundary Activity is an activity within prescribed proximity to a property boundary that would normally be permitted. Under s.87BA RMA, if you obtain written approval from the affected neighbor(s), the activity may be permitted without consent. </p><p class="text-blue-800 text-sm mt-2"><strong>Note:</strong> If you are applying for consent because you could not obtain PBA approval, please complete this section. </p></div></div></div>',1)),e("div",Ku,[m[23]||(m[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Does this application relate to a Permitted Boundary Activity? ",-1)),e("div",Zu,[e("label",Xu,[f(e("input",{"onUpdate:modelValue":m[0]||(m[0]=M=>t.value.pba_approval_required=M),type:"radio",value:!0,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.pba_approval_required]]),m[21]||(m[21]=e("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),e("label",e0,[f(e("input",{"onUpdate:modelValue":m[1]||(m[1]=M=>t.value.pba_approval_required=M),type:"radio",value:!1,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.pba_approval_required]]),m[22]||(m[22]=e("span",{class:"ml-2 text-sm text-gray-700"},"No",-1))])])]),t.value.pba_approval_required?(o(),l("div",t0,[e("div",null,[m[25]||(m[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"PBA Status",-1)),f(e("select",{"onUpdate:modelValue":m[2]||(m[2]=M=>t.value.pba_status=M),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...m[24]||(m[24]=[X('<option value="">Select status</option><option value="Approval sought but not obtained">Approval sought but not obtained</option><option value="Approval obtained from some neighbors">Approval obtained from some neighbors</option><option value="Approval obtained from all neighbors">Approval obtained from all neighbors</option><option value="Approval not sought">Approval not sought</option>',5)])],512),[[ie,t.value.pba_status]])]),e("div",null,[m[26]||(m[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"PBA Details",-1)),f(e("textarea",{"onUpdate:modelValue":m[3]||(m[3]=M=>t.value.pba_details=M),rows:"3",placeholder:"Describe the boundary activity, which neighbors were approached, and the outcome...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.pba_details]])]),e("div",o0,[e("div",s0,[m[28]||(m[28]=e("label",{class:"block text-sm font-medium text-gray-700"}," Neighbors Affected by Boundary Activity ",-1)),e("button",{onClick:m[4]||(m[4]=M=>u.value=!0),type:"button",class:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1"},[...m[27]||(m[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Neighbor ",-1)])])]),t.value.pba_contacts&&t.value.pba_contacts.length>0?(o(),l("div",l0,[(o(!0),l(Y,null,J(t.value.pba_contacts,(M,E)=>(o(),l("div",{key:E,class:"border border-gray-200 rounded-lg p-3 bg-gray-50 flex justify-between items-start"},[e("div",a0,[e("div",r0,v(M.organisation_name||M.contact_name),1),e("div",n0,[O(v(M.contact_name)+" ",1),M.email?(o(),l("span",i0,"  "+v(M.email),1)):y("",!0),M.phone?(o(),l("span",d0,"  "+v(M.phone),1)):y("",!0)]),M.address?(o(),l("div",u0,v([M.address,M.rd_number,M.suburb,M.city,M.postcode].filter(Boolean).join(", ")),1)):y("",!0)]),e("div",p0,[e("button",{onClick:G=>h(E),type:"button",class:"text-blue-600 hover:text-blue-800 p-1",title:"Edit"},[...m[29]||(m[29]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,c0),e("button",{onClick:G=>P(E),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...m[30]||(m[30]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,m0)])]))),128))])):(o(),l("div",g0,[...m[31]||(m[31]=[e("p",{class:"text-sm text-gray-500"},"No neighbors added yet",-1)])]))]),e("div",b0,[m[32]||(m[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Upload PBA Documents (if applicable) ",-1)),e("input",{type:"file",onChange:A,accept:".pdf,.doc,.docx",multiple:"",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"},null,32),t.value.pba_documents&&t.value.pba_documents.length>0?(o(),l("p",v0,"  "+v(t.value.pba_documents.length)+" document(s) uploaded ",1)):y("",!0),m[33]||(m[33]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload PBA forms, neighbor correspondence, or written approvals (PDF or Word)",-1))])])):y("",!0)])]),e("div",y0,[m[52]||(m[52]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Affected Parties (RMA s.95A-s.95F)")],-1)),e("div",f0,[m[51]||(m[51]=X('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">About Affected Parties</h5><p class="text-blue-800 text-sm mt-1"> List all parties (neighbors, landowners, infrastructure providers, etc.) who may be affected by your proposal. If you have obtained written approvals under s.95E, upload them as supporting documents. Written approvals can reduce notification requirements. </p></div></div></div>',1)),e("div",{class:"flex justify-between items-center"},[m[37]||(m[37]=e("p",{class:"text-sm text-gray-700"}," Identify all parties who may experience adverse effects from your proposal ",-1)),e("button",{onClick:F,type:"button",class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...m[36]||(m[36]=[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Affected Party ",-1)])])]),t.value.affected_parties&&t.value.affected_parties.length>0?(o(),l("div",x0,[(o(!0),l(Y,null,J(t.value.affected_parties,(M,E)=>(o(),l("div",{key:E,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("div",_0,[e("h4",h0,v(M.party_name||"Unnamed Party"),1),e("div",w0,[e("button",{onClick:G=>K(E),type:"button",class:"text-blue-600 hover:text-blue-800 p-1",title:"Edit"},[...m[38]||(m[38]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,k0),e("button",{onClick:G=>z(E),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...m[39]||(m[39]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,$0)])]),e("div",C0,[e("div",null,[m[40]||(m[40]=e("span",{class:"text-sm text-gray-500"},"Relationship:",-1)),e("p",A0,v(M.relationship||"Not specified"),1)]),e("div",null,[m[41]||(m[41]=e("span",{class:"text-sm text-gray-500"},"Contact:",-1)),e("p",V0,v(M.contact_info||"Not specified"),1)]),e("div",null,[m[42]||(m[42]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",S0,v(M.address||"Not specified"),1)]),e("div",null,[m[43]||(m[43]=e("span",{class:"text-sm text-gray-500"},"Written Approval (s.95E):",-1)),e("p",M0,[M.written_approval?(o(),l("span",q0," Obtained")):(o(),l("span",P0,"Not obtained"))])])]),M.effects?(o(),l("div",D0,[m[44]||(m[44]=e("span",{class:"text-sm text-gray-500"},"Effects:",-1)),e("p",U0,v(M.effects),1)])):y("",!0)]))),128))])):(o(),l("div",j0,[...m[45]||(m[45]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No affected parties identified yet",-1),e("p",{class:"text-sm text-gray-500 mt-1"},'Click "Add Affected Party" to get started',-1)])])),c.value.length>0?(o(),l("div",R0,[m[47]||(m[47]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-2"},"Written Approvals Summary (s.95E RMA)",-1)),e("p",z0," You have obtained written approvals from "+v(c.value.length)+" affected "+v(c.value.length===1?"party":"parties")+". ",1),e("div",T0,[(o(!0),l(Y,null,J(c.value,M=>(o(),l("div",{key:M.party_name,class:"flex items-center text-sm"},[m[46]||(m[46]=e("svg",{class:"w-4 h-4 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,v(M.party_name)+" ("+v(M.relationship)+")",1)]))),128))]),m[48]||(m[48]=e("div",{class:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg"},[e("p",{class:"text-sm text-green-800"}," Remember to upload written approval documents in Step 6 (Plans & Documents). ")],-1))])):y("",!0),e("div",I0,[m[49]||(m[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Consultation Summary ",-1)),f(e("textarea",{"onUpdate:modelValue":m[5]||(m[5]=M=>t.value.aee_consultation_summary=M),rows:"6",placeholder:"Describe who you consulted with, when, how, and the outcomes of consultation. Include any mitigation measures agreed to address concerns...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.aee_consultation_summary]]),m[50]||(m[50]=e("p",{class:"text-sm text-gray-500 mt-2"}," Documenting consultation efforts can demonstrate good faith engagement and help the council understand community views. ",-1))])])]),m[53]||(m[53]=X('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Affected Parties Guidance</h5><ul class="text-yellow-800 text-sm mt-2 space-y-1 list-disc list-inside"><li>Consider immediate neighbors, landowners with shared boundaries</li><li>Infrastructure providers (e.g., power, water, telecommunications)</li><li>Parties with interests over the land (e.g., easements, covenants)</li><li>Anyone who may experience adverse effects from your proposal</li><li>Written approvals under s.95E can reduce notification requirements and costs</li></ul></div></div></div>',1))]),(o(),ue(Ie,{to:"body"},[u.value?(o(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ye(r,["self"])},[e("div",B0,[e("div",E0,[e("h3",N0,v(d.value!==null?"Edit":"Add")+" PBA Neighbor Contact ",1),e("button",{onClick:r,type:"button",class:"text-gray-400 hover:text-gray-600"},[...m[54]||(m[54]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",L0,[e("div",F0,[e("div",null,[m[55]||(m[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisation Name",-1)),f(e("input",{"onUpdate:modelValue":m[6]||(m[6]=M=>s.organisation_name=M),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.organisation_name]])]),e("div",null,[m[56]||(m[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Name *",-1)),f(e("input",{"onUpdate:modelValue":m[7]||(m[7]=M=>s.contact_name=M),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.contact_name]])])]),e("div",H0,[e("div",null,[m[57]||(m[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),f(e("input",{"onUpdate:modelValue":m[8]||(m[8]=M=>s.email=M),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.email]])]),e("div",null,[m[58]||(m[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone",-1)),f(e("input",{"onUpdate:modelValue":m[9]||(m[9]=M=>s.phone=M),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.phone]])])]),e("div",null,[m[59]||(m[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Street Address",-1)),f(e("input",{"onUpdate:modelValue":m[10]||(m[10]=M=>s.address=M),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.address]])]),e("div",O0,[e("div",null,[m[60]||(m[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RD Number",-1)),f(e("input",{"onUpdate:modelValue":m[11]||(m[11]=M=>s.rd_number=M),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.rd_number]])]),e("div",null,[m[61]||(m[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Suburb",-1)),f(e("input",{"onUpdate:modelValue":m[12]||(m[12]=M=>s.suburb=M),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.suburb]])]),e("div",null,[m[62]||(m[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"City",-1)),f(e("input",{"onUpdate:modelValue":m[13]||(m[13]=M=>s.city=M),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.city]])])]),e("div",null,[m[63]||(m[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Postcode",-1)),f(e("input",{"onUpdate:modelValue":m[14]||(m[14]=M=>s.postcode=M),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.postcode]])])]),e("div",W0,[e("button",{onClick:r,type:"button",class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100"}," Cancel "),e("button",{onClick:x,type:"button",disabled:!s.contact_name,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},v(d.value!==null?"Update":"Add")+" Contact ",9,Q0)])])])):y("",!0)])),(o(),ue(Ie,{to:"body"},[i.value?(o(),l("div",G0,[e("div",Y0,[e("div",J0,[e("h3",K0,v(a.value!==null?"Edit":"Add")+" Affected Party ",1),e("button",{onClick:W,type:"button",class:"text-gray-400 hover:text-gray-600"},[...m[64]||(m[64]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Z0,[e("div",null,[m[65]||(m[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Party Name *",-1)),f(e("input",{"onUpdate:modelValue":m[15]||(m[15]=M=>b.value.party_name=M),type:"text",placeholder:"e.g., John Smith, ABC Infrastructure Ltd",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,b.value.party_name]])]),e("div",null,[m[67]||(m[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Relationship *",-1)),f(e("select",{"onUpdate:modelValue":m[16]||(m[16]=M=>b.value.relationship=M),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...m[66]||(m[66]=[e("option",{value:""},"Select relationship",-1),e("option",{value:"Adjacent neighbor"},"Adjacent neighbor",-1),e("option",{value:"Nearby neighbor"},"Nearby neighbor",-1),e("option",{value:"Property owner"},"Property owner",-1),e("option",{value:"Leaseholder"},"Leaseholder",-1),e("option",{value:"Easement holder"},"Easement holder",-1),e("option",{value:"Infrastructure provider"},"Infrastructure provider",-1),e("option",{value:"Iwi/Hap"},"Iwi/Hap",-1),e("option",{value:"Community group"},"Community group",-1),e("option",{value:"Other"},"Other",-1)])],512),[[ie,b.value.relationship]])]),e("div",null,[m[68]||(m[68]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Information",-1)),f(e("input",{"onUpdate:modelValue":m[17]||(m[17]=M=>b.value.contact_info=M),type:"text",placeholder:"Email or phone number",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,b.value.contact_info]])]),e("div",null,[m[69]||(m[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Address",-1)),f(e("textarea",{"onUpdate:modelValue":m[18]||(m[18]=M=>b.value.address=M),rows:"2",placeholder:"Physical or postal address",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,b.value.address]])]),e("div",null,[m[70]||(m[70]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Potential Effects",-1)),f(e("textarea",{"onUpdate:modelValue":m[19]||(m[19]=M=>b.value.effects=M),rows:"3",placeholder:"Describe how your proposal may affect this party (e.g., visual, noise, access, etc.)",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,b.value.effects]])]),e("div",X0,[f(e("input",{"onUpdate:modelValue":m[20]||(m[20]=M=>b.value.written_approval=M),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,b.value.written_approval]]),m[71]||(m[71]=e("label",{class:"ml-3 text-sm text-gray-700"},[e("span",{class:"font-medium"},"Written approval obtained (s.95E RMA)"),e("p",{class:"text-xs text-gray-500 mt-1"}," Check this if you have obtained written approval from this party (upload approval document in Step 6) ")],-1))])]),e("div",ep,[e("button",{onClick:W,type:"button",class:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:I,type:"button",disabled:!b.value.party_name||!b.value.relationship,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},v(a.value!==null?"Update":"Add")+" Party ",9,tp)])])])):y("",!0)]))]))}},sp={class:"space-y-6"},lp={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},ap={class:"p-6"},rp={class:"mb-4"},np={class:"flex gap-4"},ip={class:"flex items-center"},dp={class:"flex items-center"},up={key:0,class:"mt-4"},pp={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},cp={class:"p-6"},mp={key:0,class:"space-y-3"},gp={class:"flex items-start justify-between mb-3"},bp={class:"font-semibold text-gray-900 flex items-center gap-2"},vp={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800"},yp={key:0,class:"text-sm text-gray-600 mt-1"},fp={class:"flex items-center gap-2"},xp=["onClick"],_p=["onClick"],hp={class:"grid md:grid-cols-2 gap-4"},wp={class:"font-medium"},kp={class:"font-medium"},$p={key:0,class:"text-amber-600"},Cp={key:1,class:"text-green-600"},Ap={key:0,class:"mt-3 border-t border-gray-200 pt-3"},Vp={class:"text-sm mt-1"},Sp={key:1,class:"mt-3 border-t border-gray-200 pt-3"},Mp={class:"text-sm mt-1"},qp={key:1,class:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},Pp={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Dp={class:"p-6"},Up={class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},jp={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},Rp={class:"text-lg font-semibold text-gray-900"},zp={class:"p-6 space-y-4"},Tp={class:"flex items-start"},Ip={class:"grid md:grid-cols-2 gap-4"},Bp={class:"grid md:grid-cols-3 gap-4"},Ep={class:"border-t border-gray-200 pt-4 mt-4"},Np={class:"flex items-start mb-4"},Lp={key:0,class:"space-y-4"},Fp={class:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200 flex items-center justify-end gap-3"},Hp=["disabled"],Op={__name:"Step5Consultation",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=H({get:()=>_.modelValue,set:A=>V("update:modelValue",A)}),u=U(!1),d=U(null),s=U({organisation_name:"",is_iwi:!1,contact_name:"",email:"",phone:"",address:"",rd_number:"",suburb:"",city:"",postcode:"",had_concerns:!1,concern_details:"",resolution_details:""}),S=()=>{d.value=null,s.value={organisation_name:"",is_iwi:!1,contact_name:"",email:"",phone:"",address:"",rd_number:"",suburb:"",city:"",postcode:"",had_concerns:!1,concern_details:"",resolution_details:""},u.value=!0},h=A=>{d.value=A,s.value=N({},t.value.consulted_organizations[A]),u.value=!0},P=()=>{u.value=!1,d.value=null,s.value={organisation_name:"",is_iwi:!1,contact_name:"",email:"",phone:"",address:"",rd_number:"",suburb:"",city:"",postcode:"",had_concerns:!1,concern_details:"",resolution_details:""}},x=()=>{if(!s.value.organisation_name)return;const A=N({},_.modelValue);A.consulted_organizations||(A.consulted_organizations=[]),d.value!==null?A.consulted_organizations[d.value]=N({},s.value):A.consulted_organizations.push(N({},s.value)),V("update:modelValue",A),P()},r=A=>{if(confirm("Are you sure you want to remove this organization?")){const i=N({},_.modelValue);i.consulted_organizations.splice(A,1),V("update:modelValue",i)}};return(A,i)=>(o(),l("div",null,[i[50]||(i[50]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Consultation with Other Parties",-1)),i[51]||(i[51]=e("p",{class:"text-gray-600 mb-8"},"Document consultation undertaken with iwi, community groups, and other relevant organizations (RMA Schedule 4)",-1)),e("div",sp,[i[34]||(i[34]=X('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">About Consultation</h5><p class="text-blue-800 text-sm mt-1"> Under RMA Schedule 4, Assessment of Environmental Effects should include consultation undertaken. Document any consultation with iwi/hap, community groups, infrastructure providers, or other relevant organizations. </p><p class="text-blue-800 text-sm mt-2"><strong>Tip:</strong> Proactive consultation demonstrates good planning and can help identify concerns early, potentially reducing notification requirements and processing timeframes. </p></div></div></div>',1)),e("div",lp,[i[21]||(i[21]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Consultation Undertaken")],-1)),e("div",ap,[e("div",rp,[i[19]||(i[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Have you consulted with any organizations or groups about this proposal? ",-1)),e("div",np,[e("label",ip,[f(e("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>t.value.consultation_undertaken=a),type:"radio",value:!0,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.consultation_undertaken]]),i[17]||(i[17]=e("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),e("label",dp,[f(e("input",{"onUpdate:modelValue":i[1]||(i[1]=a=>t.value.consultation_undertaken=a),type:"radio",value:!1,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.consultation_undertaken]]),i[18]||(i[18]=e("span",{class:"ml-2 text-sm text-gray-700"},"No",-1))])])]),t.value.consultation_undertaken===!1?(o(),l("div",up,[i[20]||(i[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Reason for no consultation (optional) ",-1)),f(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=a=>t.value.no_consultation_reason=a),rows:"3",placeholder:"Explain why consultation was not undertaken (e.g., proposal has minimal effects, consultation not required by council policy, etc.)",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.no_consultation_reason]])])):y("",!0)])]),t.value.consultation_undertaken===!0?(o(),l("div",pp,[e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200 flex items-center justify-between"},[i[23]||(i[23]=e("h3",{class:"font-semibold text-gray-900"},"Organizations Consulted",-1)),e("button",{onClick:S,type:"button",class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...i[22]||(i[22]=[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Organization ",-1)])])]),e("div",cp,[t.value.consulted_organizations&&t.value.consulted_organizations.length>0?(o(),l("div",mp,[(o(!0),l(Y,null,J(t.value.consulted_organizations,(a,b)=>(o(),l("div",{key:b,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("div",gp,[e("div",null,[e("h4",bp,[O(v(a.organisation_name||"Unnamed Organization")+" ",1),a.is_iwi?(o(),l("span",vp," Iwi/Hap ")):y("",!0)]),a.contact_name?(o(),l("p",yp,"Contact: "+v(a.contact_name),1)):y("",!0)]),e("div",fp,[e("button",{onClick:c=>h(b),type:"button",class:"text-blue-600 hover:text-blue-800 p-1",title:"Edit"},[...i[24]||(i[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,xp),e("button",{onClick:c=>r(b),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...i[25]||(i[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,_p)])]),e("div",hp,[e("div",null,[i[26]||(i[26]=e("span",{class:"text-sm text-gray-500"},"Contact:",-1)),e("p",wp,v(a.email||a.phone||"Not specified"),1)]),e("div",null,[i[27]||(i[27]=e("span",{class:"text-sm text-gray-500"},"Concerns Raised:",-1)),e("p",kp,[a.had_concerns?(o(),l("span",$p,"Yes")):(o(),l("span",Cp,"No"))])])]),a.had_concerns&&a.concern_details?(o(),l("div",Ap,[i[28]||(i[28]=e("span",{class:"text-sm text-gray-500"},"Concerns Raised:",-1)),e("p",Vp,v(a.concern_details),1)])):y("",!0),a.resolution_details?(o(),l("div",Sp,[i[29]||(i[29]=e("span",{class:"text-sm text-gray-500"},"Resolution/Response:",-1)),e("p",Mp,v(a.resolution_details),1)])):y("",!0)]))),128))])):(o(),l("div",qp,[...i[30]||(i[30]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No organizations added yet",-1),e("p",{class:"text-sm text-gray-500 mt-1"},'Click "Add Organization" to document your consultation',-1)])]))])])):y("",!0),t.value.consultation_undertaken===!0?(o(),l("div",Pp,[i[33]||(i[33]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Overall Consultation Summary")],-1)),e("div",Dp,[i[31]||(i[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Summary of Consultation Process and Outcomes ",-1)),f(e("textarea",{"onUpdate:modelValue":i[3]||(i[3]=a=>t.value.consultation_summary=a),rows:"6",placeholder:`Provide an overall summary of your consultation process:
 When and how consultation was undertaken
 Key issues raised across all consultees
 How concerns were addressed or why they were not
 Any commitments or agreements made
 Overall feedback on the proposal`,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.consultation_summary]]),i[32]||(i[32]=e("p",{class:"text-sm text-gray-500 mt-2"}," This summary will be included in your Assessment of Environmental Effects (AEE) under Schedule 4 clause 2(1)(d). ",-1))])])):y("",!0),i[35]||(i[35]=X('<div class="bg-purple-50 border border-purple-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-purple-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-purple-900 text-sm">Iwi/Hap Consultation Guidance</h5><p class="text-purple-800 text-sm mt-2"> Under sections 6(e), 7(a), and 8 of the RMA, councils must consider: </p><ul class="text-purple-800 text-sm mt-2 space-y-1 list-disc list-inside"><li>The relationship of Mori and their culture and traditions with ancestral lands, water, sites, whi tapu, and other taonga</li><li>Kaitiakitanga (guardianship)</li><li>The principles of the Treaty of Waitangi</li></ul><p class="text-purple-800 text-sm mt-2"><strong>Check with your council</strong> to identify relevant iwi/hap authorities in your area and their preferred consultation processes. Many councils maintain iwi contact lists and consultation protocols. </p></div></div></div><div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Who to Consider for Consultation</h5><ul class="text-yellow-800 text-sm mt-2 space-y-1 list-disc list-inside"><li><strong>Iwi/Hap:</strong> Local mana whenua with interests in the area</li><li><strong>Infrastructure Providers:</strong> Power companies, telecommunications, water suppliers</li><li><strong>Community Groups:</strong> Resident associations, environmental groups, heritage groups</li><li><strong>Government Agencies:</strong> NZTA, DoC, Heritage NZ (for significant proposals)</li><li><strong>Special Interest Groups:</strong> Organizations with relevant expertise or advocacy roles</li></ul></div></div></div>',2))]),(o(),ue(Ie,{to:"body"},[u.value?(o(),l("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",onClick:ye(P,["self"])},[e("div",Up,[e("div",jp,[e("h3",Rp,v(d.value!==null?"Edit":"Add")+" Consulted Organization ",1),e("button",{onClick:P,type:"button",class:"text-gray-400 hover:text-gray-600"},[...i[36]||(i[36]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",zp,[e("div",null,[i[37]||(i[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisation Name *",-1)),f(e("input",{"onUpdate:modelValue":i[4]||(i[4]=a=>s.value.organisation_name=a),type:"text",placeholder:"e.g., Ngti Whtua, Auckland Residents Association",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.organisation_name]])]),e("div",Tp,[f(e("input",{"onUpdate:modelValue":i[5]||(i[5]=a=>s.value.is_iwi=a),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,s.value.is_iwi]]),i[38]||(i[38]=e("label",{class:"ml-3 text-sm text-gray-700"},[e("span",{class:"font-medium"},"This is an Iwi/Hap organization"),e("p",{class:"text-xs text-gray-500 mt-1"}," Check this if consulting with a mana whenua iwi or hap ")],-1))]),e("div",null,[i[39]||(i[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Name",-1)),f(e("input",{"onUpdate:modelValue":i[6]||(i[6]=a=>s.value.contact_name=a),type:"text",placeholder:"Primary contact person",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.contact_name]])]),e("div",Ip,[e("div",null,[i[40]||(i[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),f(e("input",{"onUpdate:modelValue":i[7]||(i[7]=a=>s.value.email=a),type:"email",placeholder:"contact@organization.nz",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.email]])]),e("div",null,[i[41]||(i[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone",-1)),f(e("input",{"onUpdate:modelValue":i[8]||(i[8]=a=>s.value.phone=a),type:"tel",placeholder:"09 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.phone]])])]),e("div",null,[i[42]||(i[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Address",-1)),f(e("textarea",{"onUpdate:modelValue":i[9]||(i[9]=a=>s.value.address=a),rows:"2",placeholder:"Physical or postal address",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.address]])]),e("div",Bp,[e("div",null,[i[43]||(i[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RD Number",-1)),f(e("input",{"onUpdate:modelValue":i[10]||(i[10]=a=>s.value.rd_number=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.rd_number]])]),e("div",null,[i[44]||(i[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Suburb",-1)),f(e("input",{"onUpdate:modelValue":i[11]||(i[11]=a=>s.value.suburb=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.suburb]])]),e("div",null,[i[45]||(i[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"City",-1)),f(e("input",{"onUpdate:modelValue":i[12]||(i[12]=a=>s.value.city=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.city]])])]),e("div",null,[i[46]||(i[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Postcode",-1)),f(e("input",{"onUpdate:modelValue":i[13]||(i[13]=a=>s.value.postcode=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.postcode]])]),e("div",Ep,[e("div",Np,[f(e("input",{"onUpdate:modelValue":i[14]||(i[14]=a=>s.value.had_concerns=a),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,s.value.had_concerns]]),i[47]||(i[47]=e("label",{class:"ml-3 text-sm text-gray-700"},[e("span",{class:"font-medium"},"This organization raised concerns"),e("p",{class:"text-xs text-gray-500 mt-1"}," Check this if concerns or issues were raised during consultation ")],-1))]),s.value.had_concerns?(o(),l("div",Lp,[e("div",null,[i[48]||(i[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concerns/Issues Raised",-1)),f(e("textarea",{"onUpdate:modelValue":i[15]||(i[15]=a=>s.value.concern_details=a),rows:"3",placeholder:"Describe the specific concerns or issues raised...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.concern_details]])]),e("div",null,[i[49]||(i[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Resolution/Response",-1)),f(e("textarea",{"onUpdate:modelValue":i[16]||(i[16]=a=>s.value.resolution_details=a),rows:"3",placeholder:"Describe how concerns were addressed or responded to...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,s.value.resolution_details]])])])):y("",!0)])]),e("div",Fp,[e("button",{onClick:P,type:"button",class:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:x,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:!s.value.organisation_name},v(d.value!==null?"Update":"Add")+" Organization ",9,Hp)])])])):y("",!0)]))]))}},Wp={class:"space-y-8"},Qp={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Gp={class:"p-6 space-y-4"},Yp={key:0,class:"mt-4 space-y-2"},Jp={class:"flex items-center gap-3"},Kp={class:"text-sm font-medium text-gray-900"},Zp={class:"text-xs text-gray-500"},Xp=["onClick"],ec={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},tc={class:"p-6 space-y-4"},oc={key:0,class:"mt-4 space-y-2"},sc={class:"flex items-center gap-3"},lc={class:"text-sm font-medium text-gray-900"},ac={class:"text-xs text-gray-500"},rc=["onClick"],nc={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},ic={class:"p-6 space-y-4"},dc={key:0,class:"mt-4 space-y-2"},uc={class:"flex items-center gap-3"},pc={class:"text-sm font-medium text-gray-900"},cc={class:"text-xs text-gray-500"},mc=["onClick"],gc={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},bc={class:"p-6"},vc={key:0},yc={class:"grid md:grid-cols-3 gap-4 mb-4"},fc={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},xc={class:"text-2xl font-bold text-blue-900 mt-1"},_c={class:"bg-green-50 border border-green-200 rounded-lg p-4"},hc={class:"text-2xl font-bold text-green-900 mt-1"},wc={class:"bg-purple-50 border border-purple-200 rounded-lg p-4"},kc={class:"text-2xl font-bold text-purple-900 mt-1"},$c={class:"text-sm text-gray-600"},Cc={class:"mt-4 overflow-x-auto"},Ac={class:"min-w-full divide-y divide-gray-200"},Vc={class:"bg-white divide-y divide-gray-200"},Sc={class:"px-4 py-2 text-sm text-gray-900"},Mc={class:"px-4 py-2 text-sm text-gray-600"},qc={class:"px-4 py-2 text-sm text-gray-600"},Pc={class:"px-4 py-2"},Dc=["onClick"],Uc={key:1,class:"text-center py-8"},jc={class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},Rc={class:"space-y-1 text-sm text-gray-700"},zc={class:"flex items-start"},Tc=["checked"],Ic={class:"flex items-start"},Bc=["checked"],Ec={class:"flex items-start"},Nc=["checked"],Lc={class:"flex items-start"},Fc=["checked"],Hc={__name:"Step6Documents",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=H({get:()=>_.modelValue,set:x=>V("update:modelValue",x)}),u=(x,r)=>{const A=Array.from(x.target.files);if(A.length===0)return;const i=N({},_.modelValue);i.application_documents||(i.application_documents=[]),A.forEach(a=>{if(a.size>20971520){alert(`File ${a.name} exceeds 20MB. Please upload a smaller file.`);return}const c=P(a.size);i.application_documents.push({file_name:a.name,category:r,file_size:c,upload_date:new Date().toISOString()})}),V("update:modelValue",i),x.target.value=""},d=x=>{if(confirm("Remove this document?")){const r=N({},_.modelValue);r.application_documents.splice(x,1),V("update:modelValue",r)}},s=x=>{var r;return((r=t.value.application_documents)==null?void 0:r.filter(A=>A.category===x))||[]},S=H(()=>{var x;return((x=t.value.application_documents)==null?void 0:x.some(r=>r.file_name.toLowerCase().includes("approval")||r.file_name.toLowerCase().includes("consent")))||!1}),h=H(()=>s("Supporting Documents").length>0),P=x=>{if(x===0)return"0 Bytes";const r=1024,A=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(x)/Math.log(r));return Math.round(x/Math.pow(r,i)*100)/100+" "+A[i]};return(x,r)=>(o(),l("div",null,[r[34]||(r[34]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Plans & Documents Upload",-1)),r[35]||(r[35]=e("p",{class:"text-gray-600 mb-8"},"Upload all required plans and supporting documents for your application",-1)),e("div",Wp,[r[33]||(r[33]=X('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Document Upload Requirements</h5><p class="text-blue-800 text-sm mt-1"> Please upload all relevant documents to support your application. Documents should be in PDF format where possible, with a maximum file size of 20MB per file. Plans and drawings should be to scale and clearly labelled. </p></div></div></div>',1)),e("div",Qp,[r[8]||(r[8]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Record of Title, Consent Notices & Easements")],-1)),e("div",Gp,[r[7]||(r[7]=e("p",{class:"text-sm text-gray-600"}," Upload the Certificate(s) of Title for the subject property, including any consent notices, covenants, or easements registered on the title. ",-1)),e("div",null,[r[3]||(r[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Upload Record of Title & Legal Documents ",-1)),e("input",{type:"file",onChange:r[0]||(r[0]=A=>u(A,"Record of Title")),accept:".pdf,.jpg,.jpeg,.png",multiple:"",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"},null,32),r[4]||(r[4]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload CT, consent notices, easements, or covenants (PDF or images, max 20MB each)",-1))]),s("Record of Title").length>0?(o(),l("div",Yp,[(o(!0),l(Y,null,J(s("Record of Title"),(A,i)=>(o(),l("div",{key:i,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg bg-gray-50"},[e("div",Jp,[r[5]||(r[5]=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",null,[e("p",Kp,v(A.file_name),1),e("p",Zp,v(A.file_size)+"  "+v(A.category),1)])]),e("button",{onClick:a=>d(i),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...r[6]||(r[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Xp)]))),128))])):y("",!0)])]),e("div",ec,[r[14]||(r[14]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Site Plans & Drawings")],-1)),e("div",tc,[r[13]||(r[13]=e("p",{class:"text-sm text-gray-600"}," Upload site plans, floor plans, elevations, cross-sections, and any other drawings relevant to your proposal. Plans should be to scale and clearly show existing and proposed features. ",-1)),e("div",null,[r[9]||(r[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Upload Site Plans & Architectural Drawings ",-1)),e("input",{type:"file",onChange:r[1]||(r[1]=A=>u(A,"Site Plans")),accept:".pdf,.dwg,.jpg,.jpeg,.png",multiple:"",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-green-100 file:text-green-700 hover:file:bg-green-200"},null,32),r[10]||(r[10]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload plans and drawings (PDF, DWG, or images, max 20MB each)",-1))]),s("Site Plans").length>0?(o(),l("div",oc,[(o(!0),l(Y,null,J(s("Site Plans"),(A,i)=>(o(),l("div",{key:i,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg bg-gray-50"},[e("div",sc,[r[11]||(r[11]=e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",null,[e("p",lc,v(A.file_name),1),e("p",ac,v(A.file_size)+"  "+v(A.category),1)])]),e("button",{onClick:a=>d(s("Site Plans").indexOf(A)),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...r[12]||(r[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,rc)]))),128))])):y("",!0)])]),e("div",nc,[r[20]||(r[20]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Supporting Documents")],-1)),e("div",ic,[r[19]||(r[19]=X('<p class="text-sm text-gray-600"> Upload all supporting documents including specialist reports, written approvals, impact assessments, and any other relevant documentation. </p><div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3"><p class="text-sm text-yellow-800"><strong>Examples of supporting documents:</strong></p><ul class="text-sm text-yellow-800 mt-1 ml-4 list-disc"><li>Engineering reports (geotechnical, structural, civil)</li><li>Environmental assessments (traffic, acoustic, landscape, ecological)</li><li>Written approvals from affected parties (s.95E RMA)</li><li>Heritage impact assessments</li><li>Contaminated land reports (PSI/DSI)</li><li>Stormwater management plans</li><li>Correspondence with council or other parties</li></ul></div>',2)),e("div",null,[r[15]||(r[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Upload Supporting Documents ",-1)),e("input",{type:"file",onChange:r[2]||(r[2]=A=>u(A,"Supporting Documents")),accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",multiple:"",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-purple-100 file:text-purple-700 hover:file:bg-purple-200"},null,32),r[16]||(r[16]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload reports, assessments, and correspondence (PDF, Word, or images, max 20MB each)",-1))]),s("Supporting Documents").length>0?(o(),l("div",dc,[(o(!0),l(Y,null,J(s("Supporting Documents"),(A,i)=>(o(),l("div",{key:i,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg bg-gray-50"},[e("div",uc,[r[17]||(r[17]=e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",null,[e("p",pc,v(A.file_name),1),e("p",cc,v(A.file_size)+"  "+v(A.category),1)])]),e("button",{onClick:a=>d(s("Supporting Documents").indexOf(A)),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...r[18]||(r[18]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,mc)]))),128))])):y("",!0)])]),e("div",gc,[r[27]||(r[27]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Document Summary")],-1)),e("div",bc,[t.value.application_documents&&t.value.application_documents.length>0?(o(),l("div",vc,[e("div",yc,[e("div",fc,[r[21]||(r[21]=e("p",{class:"text-sm text-blue-600 font-medium"},"Record of Title",-1)),e("p",xc,v(s("Record of Title").length),1)]),e("div",_c,[r[22]||(r[22]=e("p",{class:"text-sm text-green-600 font-medium"},"Site Plans",-1)),e("p",hc,v(s("Site Plans").length),1)]),e("div",wc,[r[23]||(r[23]=e("p",{class:"text-sm text-purple-600 font-medium"},"Supporting Documents",-1)),e("p",kc,v(s("Supporting Documents").length),1)])]),e("p",$c,[e("strong",null,"Total: "+v(t.value.application_documents.length)+" document(s)",1),r[24]||(r[24]=O(" uploaded ",-1))]),e("div",Cc,[e("table",Ac,[r[25]||(r[25]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Document Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Category"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Size"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Vc,[(o(!0),l(Y,null,J(t.value.application_documents,(A,i)=>(o(),l("tr",{key:i},[e("td",Sc,v(A.file_name),1),e("td",Mc,v(A.category),1),e("td",qc,v(A.file_size),1),e("td",Pc,[e("button",{onClick:a=>d(i),type:"button",class:"text-red-600 hover:text-red-800 text-sm"}," Remove ",8,Dc)])]))),128))])])])])):(o(),l("div",Uc,[...r[26]||(r[26]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No documents uploaded yet",-1),e("p",{class:"text-sm text-gray-500 mt-1"},"Use the upload buttons above to add your documents",-1)])]))])]),e("div",jc,[r[32]||(r[32]=e("h4",{class:"font-semibold text-gray-900 text-sm mb-2"},"Document Checklist",-1)),e("div",Rc,[e("label",zc,[e("input",{type:"checkbox",checked:s("Record of Title").length>0,disabled:"",class:"mt-0.5 h-4 w-4 text-blue-600 border-gray-300 rounded"},null,8,Tc),r[28]||(r[28]=e("span",{class:"ml-2"},"Certificate of Title (including consent notices, covenants, easements)",-1))]),e("label",Ic,[e("input",{type:"checkbox",checked:s("Site Plans").length>0,disabled:"",class:"mt-0.5 h-4 w-4 text-blue-600 border-gray-300 rounded"},null,8,Bc),r[29]||(r[29]=e("span",{class:"ml-2"},"Site plan showing existing and proposed development",-1))]),e("label",Ec,[e("input",{type:"checkbox",checked:S.value,disabled:"",class:"mt-0.5 h-4 w-4 text-blue-600 border-gray-300 rounded"},null,8,Nc),r[30]||(r[30]=e("span",{class:"ml-2"},"Written approvals from affected parties (if applicable)",-1))]),e("label",Lc,[e("input",{type:"checkbox",checked:h.value,disabled:"",class:"mt-0.5 h-4 w-4 text-blue-600 border-gray-300 rounded"},null,8,Fc),r[31]||(r[31]=e("span",{class:"ml-2"},"Specialist reports and assessments (if required)",-1))])])])])]))}},Oc={class:"space-y-8"},Wc={class:"bg-white border border-gray-200 rounded-lg p-6"},Qc={class:"space-y-3"},Gc={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},Yc={key:0,class:"mt-3 flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg"},Jc={class:"text-sm font-medium text-green-900"},Kc={class:"mt-6 border-t border-gray-200 pt-6"},Zc={key:1,class:"space-y-8"},Xc={class:"bg-white border border-gray-200 rounded-lg p-6"},em={class:"bg-white border border-gray-200 rounded-lg p-6"},tm={class:"bg-white border border-gray-200 rounded-lg p-6"},om={class:"space-y-6"},sm={class:"border-t border-gray-200 pt-6"},lm={class:"border-t border-gray-200 pt-6"},am={class:"border-t border-gray-200 pt-6"},rm={class:"border-t border-gray-200 pt-6"},nm={class:"border-t border-gray-200 pt-6"},im={class:"bg-white border border-gray-200 rounded-lg p-6"},dm={__name:"Step7AEE",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=H({get:()=>_.modelValue,set:d=>V("update:modelValue",d)});if(!t.value.aee_completion_method){const d=N({},_.modelValue);d.aee_completion_method="inline",V("update:modelValue",d)}ae(()=>t.value.aee_completion_method,d=>{const s=N({},_.modelValue);s.aee_inline_confirmed=!1,s.aee_document_confirmed=!1,V("update:modelValue",s)});const u=d=>{const s=d.target.files[0];if(s){if(s.size>50*1024*1024){alert("File size must be less than 50MB"),d.target.value="";return}const S=N({},_.modelValue);S.aee_document=s,V("update:modelValue",S)}};return(d,s)=>(o(),l("div",null,[s[42]||(s[42]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Assessment of Environmental Effects (AEE)",-1)),s[43]||(s[43]=e("p",{class:"text-gray-600 mb-8"},"Assess the actual and potential effects of your proposal on the environment (RMA Schedule 4)",-1)),e("div",Oc,[s[40]||(s[40]=X('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Schedule 4 RMA Requirements</h5><p class="text-blue-800 text-sm mt-1"> Your AEE must address the matters in Schedule 4 of the RMA, scaled to the nature and scale of the proposal. The level of detail should correspond to the scale and significance of environmental effects. </p><a href="https://www.legislation.govt.nz/act/public/1991/0069/latest/whole.html#DLM242504" target="_blank" rel="noopener noreferrer" class="text-blue-700 text-sm font-medium mt-2 inline-flex items-center hover:underline"> View Schedule 4 RMA <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a></div></div></div>',1)),e("div",Wc,[s[14]||(s[14]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"How will you provide your AEE?",-1)),e("div",Qc,[e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",t.value.aee_completion_method==="inline"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[f(e("input",{"onUpdate:modelValue":s[0]||(s[0]=S=>t.value.aee_completion_method=S),type:"radio",value:"inline",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.aee_completion_method]]),s[12]||(s[12]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Complete AEE using form fields below"),e("p",{class:"text-xs text-gray-600 mt-1"}," Suitable for most applications - complete the structured questions below ")],-1))],2),e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors",t.value.aee_completion_method==="upload"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[f(e("input",{"onUpdate:modelValue":s[1]||(s[1]=S=>t.value.aee_completion_method=S),type:"radio",value:"upload",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.aee_completion_method]]),s[13]||(s[13]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"Upload a prepared AEE document"),e("p",{class:"text-xs text-gray-600 mt-1"}," For complex proposals - upload an AEE prepared by a qualified consultant ")],-1))],2)])]),t.value.aee_completion_method==="upload"?(o(),l("div",Gc,[s[19]||(s[19]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Upload AEE Document",-1)),s[20]||(s[20]=e("p",{class:"text-sm text-gray-600 mb-4"}," Upload a comprehensive AEE document prepared by a qualified expert that addresses all Schedule 4 matters ",-1)),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Upload AEE Report *",-1)),e("input",{type:"file",onChange:u,accept:".pdf,.doc,.docx",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"},null,32),s[17]||(s[17]=e("p",{class:"mt-1 text-xs text-gray-500"},"PDF or Word document, max 50MB",-1)),t.value.aee_document?(o(),l("div",Yc,[s[15]||(s[15]=e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",Jc,v(typeof t.value.aee_document=="object"?t.value.aee_document.name:"Document attached"),1)])):y("",!0)]),e("div",Kc,[e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer",t.value.aee_document_confirmed?"border-blue-600 bg-blue-50":"border-gray-200"])},[f(e("input",{"onUpdate:modelValue":s[2]||(s[2]=S=>t.value.aee_document_confirmed=S),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,t.value.aee_document_confirmed]]),s[18]||(s[18]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"I confirm that the uploaded AEE addresses all Schedule 4 matters *"),e("p",{class:"text-xs text-gray-600 mt-1"}," The uploaded document must comprehensively address all matters required under Schedule 4 of the RMA ")],-1))],2)])])):y("",!0),t.value.aee_completion_method==="inline"?(o(),l("div",Zc,[e("div",Xc,[s[21]||(s[21]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"1. Description of Activity *",-1)),s[22]||(s[22]=e("p",{class:"text-sm text-gray-600 mb-4"},[e("strong",null,"Schedule 4 clause 2(1)(a):"),O(" Description of the activity including its location, design, and how it will be carried out ")],-1)),f(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=S=>t.value.aee_activity_description=S),rows:"6",required:"",placeholder:"Provide a detailed description of what you're proposing to do, where it will be located, and how it will be undertaken...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.aee_activity_description]])]),e("div",em,[s[23]||(s[23]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"2. Description of Existing Environment *",-1)),s[24]||(s[24]=e("p",{class:"text-sm text-gray-600 mb-4"},[e("strong",null,"Schedule 4 clause 2(1)(b):"),O(" Description of the current state of the site and surrounding environment ")],-1)),f(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=S=>t.value.aee_existing_environment=S),rows:"6",required:"",placeholder:"Describe the site's current characteristics, land use, vegetation, topography, nearby activities, surrounding development...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.aee_existing_environment]])]),e("div",tm,[s[37]||(s[37]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"3. Assessment of Actual and Potential Effects *",-1)),s[38]||(s[38]=e("p",{class:"text-sm text-gray-600 mb-4"},[e("strong",null,"Schedule 4 clause 2(1)(c):"),O(" Identify and assess the actual and potential effects on the environment ")],-1)),e("div",om,[e("div",null,[s[25]||(s[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Overall Effects Assessment *",-1)),f(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=S=>t.value.assessment_of_effects=S),rows:"10",required:"",placeholder:`Address effects on:
 Physical environment (land, water, air, noise, vibration)
 Ecological environment (vegetation, wildlife, habitats)
 Social and cultural environment (amenity, heritage, iwi values)
 Economic environment
 Cumulative effects
 Risk of natural hazards

Include consideration of:
 Magnitude and scale of effects
 Duration (temporary vs permanent)
 Reversibility
 Mitigation measures proposed`,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.assessment_of_effects]])]),e("div",sm,[s[26]||(s[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Positive Effects (if any) ",-1)),s[27]||(s[27]=e("p",{class:"text-xs text-gray-500 mb-3"}," Describe any positive effects the proposal may have (e.g., employment, amenity improvements, environmental enhancements) ",-1)),f(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=S=>t.value.aee_positive_effects=S),rows:"4",placeholder:"Describe positive environmental, social, or economic effects...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.aee_positive_effects]])]),e("div",lm,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Part 2 RMA Assessment (s5-s8) ",-1)),s[29]||(s[29]=e("p",{class:"text-xs text-gray-500 mb-3"},[e("strong",null,"Schedule 4 clause 2(1)(e):"),O(" Consider sustainable management (s5), matters of national importance (s6), other matters (s7), Treaty of Waitangi (s8) ")],-1)),f(e("textarea",{"onUpdate:modelValue":s[7]||(s[7]=S=>t.value.aee_part2_assessment=S),rows:"6",placeholder:"Assess how your proposal aligns with Part 2 principles of the RMA...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.aee_part2_assessment]])]),e("div",am,[s[30]||(s[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Consultation Undertaken ",-1)),s[31]||(s[31]=e("p",{class:"text-xs text-gray-500 mb-3"},[e("strong",null,"Schedule 4 clause 2(1)(d):"),O(" Summarize consultation with affected parties, iwi, and other stakeholders ")],-1)),f(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=S=>t.value.aee_consultation_summary=S),rows:"4",placeholder:"Describe who you've consulted with, feedback received, and how you've addressed concerns...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.aee_consultation_summary]]),s[32]||(s[32]=e("p",{class:"text-xs text-gray-500 mt-2"}," Note: Consultation details from Step 5 will be automatically included here ",-1))]),e("div",rm,[s[33]||(s[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Alternatives Considered ",-1)),s[34]||(s[34]=e("p",{class:"text-xs text-gray-500 mb-3"},[e("strong",null,"Schedule 4 clause 2(1)(f):"),O(" Describe alternative locations or methods considered (if any) ")],-1)),f(e("textarea",{"onUpdate:modelValue":s[9]||(s[9]=S=>t.value.aee_alternatives_considered=S),rows:"4",placeholder:"Describe any alternative sites, designs, or methods you considered and why you selected the proposed option...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.aee_alternatives_considered]])]),e("div",nm,[s[35]||(s[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Proposed Monitoring (if applicable) ",-1)),s[36]||(s[36]=e("p",{class:"text-xs text-gray-500 mb-3"},[e("strong",null,"Schedule 4 clause 2(1)(g):"),O(" Describe any monitoring proposed to measure effects ")],-1)),f(e("textarea",{"onUpdate:modelValue":s[10]||(s[10]=S=>t.value.aee_monitoring_proposed=S),rows:"4",placeholder:"Describe any environmental monitoring you propose (e.g., water quality, noise levels, ecological surveys)...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.aee_monitoring_proposed]])])])]),e("div",im,[e("label",{class:Q(["flex items-start p-3 border-2 rounded-lg cursor-pointer",t.value.aee_inline_confirmed?"border-blue-600 bg-blue-50":"border-gray-200"])},[f(e("input",{"onUpdate:modelValue":s[11]||(s[11]=S=>t.value.aee_inline_confirmed=S),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,t.value.aee_inline_confirmed]]),s[39]||(s[39]=e("div",{class:"ml-3"},[e("span",{class:"font-medium text-gray-900"},"I confirm that I have completed the AEE to the best of my knowledge *"),e("p",{class:"text-xs text-gray-600 mt-1"}," This AEE addresses Schedule 4 requirements scaled to the nature and significance of my proposal's effects ")],-1))],2)])])):y("",!0),s[41]||(s[41]=X('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Need Help with Your AEE?</h5><p class="text-yellow-800 text-sm mt-1"> For complex proposals or activities with significant effects, consider engaging a qualified environmental consultant to prepare your AEE. The level of detail required depends on the scale and significance of potential environmental effects. </p><p class="text-yellow-800 text-sm mt-2"><strong>Simple activities</strong> (e.g., minor additions, internal alterations) may only need brief responses. <strong>Complex activities</strong> (e.g., subdivisions, significant buildings, discharges) typically require comprehensive assessment. </p></div></div></div>',1))])]))}},um={class:"space-y-8"},pm={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},cm={class:"p-6 space-y-4"},mm={class:"mb-4"},gm={class:"flex gap-4"},bm={class:"flex items-center"},vm={class:"flex items-center"},ym={key:0,class:"border-t border-gray-200 pt-4 space-y-4"},fm={key:0,class:"space-y-2"},xm={class:"flex justify-between items-start"},_m={class:"flex-1"},hm={class:"font-medium text-gray-900"},wm={class:"text-sm text-gray-600 mt-1"},km={key:0},$m={key:1},Cm=["onClick"],Am={class:"border-t-2 border-gray-300 pt-3 mt-3"},Vm={class:"flex justify-between items-center font-semibold text-gray-900"},Sm={key:1,class:"text-center py-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50"},Mm={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},qm={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Pm={class:"p-6 space-y-6"},Dm={class:"space-y-4"},Um={class:"flex items-start cursor-pointer"},jm={class:"flex items-start cursor-pointer"},Rm={class:"flex items-start cursor-pointer"},zm={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Tm={class:"p-6 space-y-4"},Im={class:"grid md:grid-cols-2 gap-4"},Bm=["max"],Em={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Nm={class:"p-6 space-y-4"},Lm={class:"grid md:grid-cols-2 gap-4"},Fm=["max"],Hm={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Om={class:"px-6 py-4 space-y-4"},Wm=["max"],Qm={class:"relative"},Gm={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Ym=["disabled"],Jm={__name:"Step9Submission",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=H({get:()=>_.modelValue,set:i=>V("update:modelValue",i)}),u=new Date().toISOString().split("T")[0],d=U(!1),s=U({payment_type:"",reference_number:"",payment_date:u,amount_excluding_gst:0}),S=()=>{s.value={payment_type:"",reference_number:"",payment_date:u,amount_excluding_gst:0},d.value=!0},h=()=>{d.value=!1},P=()=>{if(!s.value.payment_type||!s.value.amount_excluding_gst)return;const i=N({},_.modelValue);i.lodgement_payments||(i.lodgement_payments=[]),i.lodgement_payments.push(N({},s.value)),V("update:modelValue",i),h()},x=i=>{if(confirm("Remove this payment record?")){const a=N({},_.modelValue);a.lodgement_payments.splice(i,1),V("update:modelValue",a)}},r=()=>t.value.lodgement_payments?t.value.lodgement_payments.reduce((i,a)=>i+(a.amount_excluding_gst||0),0).toFixed(2):0,A=i=>i?new Date(i).toLocaleDateString("en-NZ",{year:"numeric",month:"short",day:"numeric"}):"";return(i,a)=>(o(),l("div",null,[a[51]||(a[51]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Declaration & Submission",-1)),a[52]||(a[52]=e("p",{class:"text-gray-600 mb-8"},"Payment of fees, statutory declarations, and application submission",-1)),e("div",um,[e("div",pm,[a[25]||(a[25]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Lodgement Fees")],-1)),e("div",cm,[a[24]||(a[24]=X('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">About Lodgement Fees</h5><p class="text-blue-800 text-sm mt-1"> Under s.36 RMA, councils can charge fees for processing resource consent applications. Lodgement fees typically cover the initial administrative costs. Additional charges may be invoiced as the application is processed. </p></div></div></div>',1)),e("div",mm,[a[17]||(a[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Have lodgement fees been paid? ",-1)),e("div",gm,[e("label",bm,[f(e("input",{"onUpdate:modelValue":a[0]||(a[0]=b=>t.value.lodgement_fees_paid=b),type:"radio",value:!0,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.lodgement_fees_paid]]),a[15]||(a[15]=e("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),e("label",vm,[f(e("input",{"onUpdate:modelValue":a[1]||(a[1]=b=>t.value.lodgement_fees_paid=b),type:"radio",value:!1,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ce,t.value.lodgement_fees_paid]]),a[16]||(a[16]=e("span",{class:"ml-2 text-sm text-gray-700"},"No - will pay upon submission",-1))])])]),t.value.lodgement_fees_paid?(o(),l("div",ym,[e("div",{class:"flex justify-between items-center"},[a[19]||(a[19]=e("label",{class:"block text-sm font-medium text-gray-700"}," Payment Records ",-1)),e("button",{onClick:S,type:"button",class:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1"},[...a[18]||(a[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Payment ",-1)])])]),t.value.lodgement_payments&&t.value.lodgement_payments.length>0?(o(),l("div",fm,[(o(!0),l(Y,null,J(t.value.lodgement_payments,(b,c)=>(o(),l("div",{key:c,class:"border border-gray-200 rounded-lg p-3 bg-gray-50"},[e("div",xm,[e("div",_m,[e("div",hm,v(b.payment_type),1),e("div",wm,[O(" Amount: $"+v(b.amount_excluding_gst)+" (excl GST) ",1),b.reference_number?(o(),l("span",km,"  Ref: "+v(b.reference_number),1)):y("",!0),b.payment_date?(o(),l("span",$m,"  Date: "+v(A(b.payment_date)),1)):y("",!0)])]),e("button",{onClick:F=>x(c),type:"button",class:"text-red-600 hover:text-red-800 p-1",title:"Remove"},[...a[20]||(a[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Cm)])]))),128)),e("div",Am,[e("div",Vm,[a[21]||(a[21]=e("span",null,"Total Paid (excl GST):",-1)),e("span",null,"$"+v(r()),1)])])])):(o(),l("div",Sm,[...a[22]||(a[22]=[e("p",{class:"text-sm text-gray-500"},"No payments recorded yet",-1)])]))])):(o(),l("div",Mm,[...a[23]||(a[23]=[e("p",{class:"text-sm text-yellow-800"}," Lodgement fees will be calculated and invoiced by the council upon receipt of your application. You will be notified of the amount due and payment methods available. ",-1)])]))])]),e("div",qm,[a[30]||(a[30]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Statutory Declarations")],-1)),e("div",Pm,[a[29]||(a[29]=X('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-blue-900 text-sm">Declarations Required</h5><p class="text-blue-800 text-sm mt-1"> Under the Resource Management Act 1991, you must confirm the following declarations before submitting your application. All three declarations are mandatory. </p></div></div></div>',1)),e("div",Dm,[e("div",{class:Q(["border-2 rounded-lg p-4",t.value.declaration_rma_compliance?"border-green-600 bg-green-50":"border-gray-200"])},[e("label",Um,[f(e("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=b=>t.value.declaration_rma_compliance=b),required:"",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,t.value.declaration_rma_compliance]]),a[26]||(a[26]=e("div",{class:"ml-3 flex-1"},[e("span",{class:"font-medium text-gray-900"},"RMA Compliance Declaration *"),e("p",{class:"text-sm text-gray-600 mt-1"}," I confirm that this application complies with the requirements of Schedule 4 of the Resource Management Act 1991 and contains all required information for the council to process this application. ")],-1))])],2),e("div",{class:Q(["border-2 rounded-lg p-4",t.value.declaration_public_information?"border-green-600 bg-green-50":"border-gray-200"])},[e("label",jm,[f(e("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=b=>t.value.declaration_public_information=b),required:"",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,t.value.declaration_public_information]]),a[27]||(a[27]=e("div",{class:"ml-3 flex-1"},[e("span",{class:"font-medium text-gray-900"},"Public Information Declaration *"),e("p",{class:"text-sm text-gray-600 mt-1"}," I understand that this application and supporting documents will become public information and may be made available to any person upon request under the Local Government Official Information and Meetings Act 1987. ")],-1))])],2),e("div",{class:Q(["border-2 rounded-lg p-4",t.value.declaration_authorized?"border-green-600 bg-green-50":"border-gray-200"])},[e("label",Rm,[f(e("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=b=>t.value.declaration_authorized=b),required:"",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,t.value.declaration_authorized]]),a[28]||(a[28]=e("div",{class:"ml-3 flex-1"},[e("span",{class:"font-medium text-gray-900"},"Authorization Declaration *"),e("p",{class:"text-sm text-gray-600 mt-1"}," I confirm that I am authorized to make this application on behalf of the applicant and that all information provided is true and correct to the best of my knowledge. ")],-1))])],2)])])]),e("div",zm,[a[36]||(a[36]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Applicant Signature(s)")],-1)),e("div",Tm,[a[34]||(a[34]=e("p",{class:"text-sm text-gray-600"}," If the application is being made by multiple applicants (e.g., multiple property owners), each applicant must provide their signature details. ",-1)),e("div",Im,[e("div",null,[a[31]||(a[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"First Name *",-1)),f(e("input",{"onUpdate:modelValue":a[5]||(a[5]=b=>t.value.applicant_signature_first_name=b),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.applicant_signature_first_name]])]),e("div",null,[a[32]||(a[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Last Name *",-1)),f(e("input",{"onUpdate:modelValue":a[6]||(a[6]=b=>t.value.applicant_signature_last_name=b),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.applicant_signature_last_name]])])]),e("div",null,[a[33]||(a[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date *",-1)),f(e("input",{"onUpdate:modelValue":a[7]||(a[7]=b=>t.value.applicant_signature_date=b),type:"date",required:"",max:xe(u),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Bm),[[D,t.value.applicant_signature_date]])]),a[35]||(a[35]=e("div",{class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},[e("p",{class:"text-xs text-gray-600"},[e("strong",null,"Note:"),O(" By providing your name and date above, you are electronically signing this application. This has the same legal effect as a handwritten signature. ")])],-1))])]),t.value.agent_required?(o(),l("div",Em,[a[41]||(a[41]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Agent Signature")],-1)),e("div",Nm,[a[40]||(a[40]=e("p",{class:"text-sm text-gray-600"}," If an agent is acting on behalf of the applicant, the agent must also sign the application. ",-1)),e("div",Lm,[e("div",null,[a[37]||(a[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"First Name *",-1)),f(e("input",{"onUpdate:modelValue":a[8]||(a[8]=b=>t.value.agent_signature_first_name=b),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.agent_signature_first_name]])]),e("div",null,[a[38]||(a[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Last Name *",-1)),f(e("input",{"onUpdate:modelValue":a[9]||(a[9]=b=>t.value.agent_signature_last_name=b),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,t.value.agent_signature_last_name]])])]),e("div",null,[a[39]||(a[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date *",-1)),f(e("input",{"onUpdate:modelValue":a[10]||(a[10]=b=>t.value.agent_signature_date=b),type:"date",required:"",max:xe(u),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,Fm),[[D,t.value.agent_signature_date]])])])])):y("",!0),a[42]||(a[42]=X('<div class="bg-green-50 border border-green-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h5 class="font-semibold text-green-900 text-sm">Ready to Submit</h5><p class="text-green-800 text-sm mt-1"> Once you have completed all declarations and signatures, click &quot;Submit Application&quot; to lodge your resource consent application with the council. You will receive a confirmation email with your application reference number. </p></div></div></div>',1))]),(o(),ue(Ie,{to:"body"},[d.value?(o(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ye(h,["self"])},[e("div",Hm,[e("div",{class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center"},[a[44]||(a[44]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Add Payment Record",-1)),e("button",{onClick:h,type:"button",class:"text-gray-400 hover:text-gray-600"},[...a[43]||(a[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Om,[e("div",null,[a[46]||(a[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payment Type *",-1)),f(e("select",{"onUpdate:modelValue":a[11]||(a[11]=b=>s.value.payment_type=b),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...a[45]||(a[45]=[e("option",{value:""},"Select type",-1),e("option",{value:"Lodgement Fee"},"Lodgement Fee",-1),e("option",{value:"Deposit"},"Deposit",-1),e("option",{value:"Processing Fee"},"Processing Fee",-1),e("option",{value:"Other"},"Other",-1)])],512),[[ie,s.value.payment_type]])]),e("div",null,[a[47]||(a[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reference Number",-1)),f(e("input",{"onUpdate:modelValue":a[12]||(a[12]=b=>s.value.reference_number=b),type:"text",placeholder:"e.g., Invoice #, Transaction ID",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.value.reference_number]])]),e("div",null,[a[48]||(a[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payment Date",-1)),f(e("input",{"onUpdate:modelValue":a[13]||(a[13]=b=>s.value.payment_date=b),type:"date",max:xe(u),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,8,Wm),[[D,s.value.payment_date]])]),e("div",null,[a[50]||(a[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount (excl GST) *",-1)),e("div",Qm,[a[49]||(a[49]=e("span",{class:"absolute left-3 top-2 text-gray-500"},"$",-1)),f(e("input",{"onUpdate:modelValue":a[14]||(a[14]=b=>s.value.amount_excluding_gst=b),type:"number",step:"0.01",min:"0",required:"",placeholder:"0.00",class:"w-full pl-7 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[D,s.value.amount_excluding_gst,void 0,{number:!0}]])])])]),e("div",Gm,[e("button",{onClick:h,type:"button",class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100"}," Cancel "),e("button",{onClick:P,type:"button",disabled:!s.value.payment_type||!s.value.amount_excluding_gst,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"}," Add Payment ",8,Ym)])])])):y("",!0)]))]))}},Km={class:"space-y-6"},Zm={class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},Xm={class:"flex items-start justify-between"},eg={class:"text-lg font-semibold text-blue-900"},tg={class:"text-sm text-blue-700 mt-1"},og={class:"text-right"},sg={class:"text-2xl font-bold text-blue-900"},lg={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},ag={class:"p-6 space-y-3"},rg={class:"grid md:grid-cols-2 gap-4"},ng={class:"font-medium"},ig={class:"font-medium"},dg={class:"font-medium"},ug={key:0},pg={class:"font-medium"},cg={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},mg={class:"p-6"},gg={key:0,class:"space-y-2"},bg={class:"font-medium"},vg={key:0},yg={class:"font-medium"},fg={key:1,class:"text-gray-500"},xg={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},_g={class:"p-6 space-y-3"},hg={class:"font-medium"},wg={class:"font-medium"},kg={class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},$g={class:"font-semibold text-gray-900"},Cg={class:"p-6 space-y-4"},Ag={key:0,class:"text-sm font-medium text-gray-700 mb-2"},Vg={class:"grid md:grid-cols-2 gap-4"},Sg={class:"text-sm text-gray-500"},Mg={class:"font-medium"},qg={key:0,class:"text-gray-500 text-sm"},Pg={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Dg={class:"p-6"},Ug={class:"space-y-3"},jg={class:"mt-2 flex flex-wrap gap-2"},Rg={key:0,class:"text-gray-500"},zg={class:"font-medium"},Tg={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Ig={class:"p-6"},Bg={class:"space-y-4"},Eg={key:0},Ng={class:"text-sm mt-1 line-clamp-3"},Lg={key:1},Fg={class:"text-sm mt-1 line-clamp-3"},Hg={key:2},Og={class:"text-sm mt-1 line-clamp-3"},Wg={key:3,class:"flex items-center gap-2 text-sm text-green-600"},Qg={key:4,class:"text-gray-500 text-sm"},Gg={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Yg={class:"p-6"},Jg={class:"space-y-2"},Kg={class:"flex items-center gap-2"},Zg={class:"flex items-center gap-2"},Xg={class:"flex items-center gap-2"},eb={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},tb={__name:"Step17Review",props:{modelValue:{type:Object,required:!0},councilName:{type:String,default:"Council"},requestTypeName:{type:String,default:"Application"},applicationFee:{type:String,default:"TBD"},isResourceConsent:{type:Boolean,default:!1},stepConfigs:{type:Array,default:()=>[]},usesConfigurableSteps:{type:Boolean,default:!1},requestTypeDetails:{type:Object,default:null}},setup(p){const q=p,_=H(()=>!q.usesConfigurableSteps||!q.stepConfigs?[]:q.stepConfigs.filter(S=>S.show_on_review)),V=H(()=>q.isResourceConsent?!0:!!(q.modelValue.property||q.modelValue.property_address)),t=S=>{if(!S.sections)return!1;for(const h of S.sections)if(h.show_on_review){for(const P of h.fields)if(P.show_on_review&&q.modelValue[P.field_name])return!0}return!1},u=(S,h)=>{if(h==null||h==="")return"Not provided";if(S.field_type==="Check")return h?"Yes":"No";if(S.field_type==="Date"&&h)try{return new Date(h).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(P){return h}return S.field_type==="Currency"&&h?`${Number(h).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`:S.field_type==="Select"?h:S.field_type==="Attach"||S.field_type==="Attach Image"?h?" File attached":"Not provided":h},d=H(()=>!!(q.modelValue.aee_activity_description||q.modelValue.aee_existing_environment||q.modelValue.assessment_of_effects||q.modelValue.aee_document)),s=H(()=>{const S=!!(q.modelValue.council&&q.modelValue.request_type&&q.modelValue.applicant_name&&q.modelValue.applicant_email&&q.modelValue.property_address&&q.modelValue.delivery_preference);if(q.isResourceConsent){const h=!!(q.modelValue.consent_types&&q.modelValue.consent_types.length>0&&q.modelValue.activity_status&&q.modelValue.aee_activity_description&&q.modelValue.aee_existing_environment&&q.modelValue.assessment_of_effects&&q.modelValue.declaration_rma_compliance&&q.modelValue.declaration_public_information&&q.modelValue.declaration_authorized);return S&&h}return S});return(S,h)=>{var P;return o(),l("div",null,[h[26]||(h[26]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Review & Submit",-1)),h[27]||(h[27]=e("p",{class:"text-gray-600 mb-8"},"Review your application details before submitting",-1)),e("div",Km,[e("div",Zm,[e("div",Xm,[e("div",null,[e("h3",eg,v(p.requestTypeName),1),e("p",tg,v(p.councilName),1)]),e("div",og,[h[0]||(h[0]=e("div",{class:"text-sm text-blue-600 font-medium"},"Application Fee",-1)),e("div",sg,v(p.applicationFee),1)])])]),e("div",lg,[h[5]||(h[5]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Applicant Details")],-1)),e("div",ag,[e("div",rg,[e("div",null,[h[1]||(h[1]=e("span",{class:"text-sm text-gray-500"},"Name:",-1)),e("p",ng,v(p.modelValue.applicant_name||"Not provided"),1)]),e("div",null,[h[2]||(h[2]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("p",ig,v(p.modelValue.applicant_email||"Not provided"),1)]),e("div",null,[h[3]||(h[3]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("p",dg,v(p.modelValue.applicant_phone||"Not provided"),1)]),p.modelValue.applicant_company?(o(),l("div",ug,[h[4]||(h[4]=e("span",{class:"text-sm text-gray-500"},"Company:",-1)),e("p",pg,v(p.modelValue.applicant_company),1)])):y("",!0)])])]),V.value?(o(),l("div",cg,[h[8]||(h[8]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Property Details")],-1)),e("div",mg,[p.modelValue.property_address?(o(),l("div",gg,[e("div",null,[h[6]||(h[6]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",bg,v(p.modelValue.property_address),1)]),p.modelValue.legal_description?(o(),l("div",vg,[h[7]||(h[7]=e("span",{class:"text-sm text-gray-500"},"Legal Description:",-1)),e("p",yg,v(p.modelValue.legal_description),1)])):y("",!0)])):(o(),l("p",fg,"No property selected"))])])):y("",!0),(P=p.requestTypeDetails)!=null&&P.collect_payment?(o(),l("div",xg,[h[11]||(h[11]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Delivery & Payment")],-1)),e("div",_g,[e("div",null,[h[9]||(h[9]=e("span",{class:"text-sm text-gray-500"},"Delivery Preference:",-1)),e("p",hg,v(p.modelValue.delivery_preference||"Not selected"),1)]),e("div",null,[h[10]||(h[10]=e("span",{class:"text-sm text-gray-500"},"Invoice To:",-1)),e("p",wg,v(p.modelValue.invoice_to||"Not specified"),1)])])])):y("",!0),p.usesConfigurableSteps&&_.value.length>0?(o(!0),l(Y,{key:2},J(_.value,x=>(o(),l("div",{key:x.step_code,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},[e("div",kg,[e("h3",$g,v(x.step_title),1)]),e("div",Cg,[(o(!0),l(Y,null,J(x.sections.filter(r=>r.show_on_review),r=>(o(),l("div",{key:r.section_code},[r.section_title?(o(),l("h4",Ag,v(r.section_title),1)):y("",!0),e("div",Vg,[(o(!0),l(Y,null,J(r.fields.filter(A=>A.show_on_review),A=>(o(),l("div",{key:A.field_name},[e("span",Sg,v(A.review_label||A.field_label)+":",1),e("p",Mg,v(u(A,p.modelValue[A.field_name])),1)]))),128))])]))),128)),t(x)?y("",!0):(o(),l("p",qg," No information to display for review "))])]))),128)):y("",!0),p.isResourceConsent?(o(),l(Y,{key:3},[e("div",Pg,[h[14]||(h[14]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Consent Types & Activity Status")],-1)),e("div",Dg,[e("div",Ug,[e("div",null,[h[12]||(h[12]=e("span",{class:"text-sm text-gray-500"},"Consent Types:",-1)),e("div",jg,[(o(!0),l(Y,null,J(p.modelValue.consent_types||[],x=>(o(),l("span",{key:x.consent_type,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},v(x.consent_type),1))),128)),!p.modelValue.consent_types||p.modelValue.consent_types.length===0?(o(),l("span",Rg," None selected ")):y("",!0)])]),e("div",null,[h[13]||(h[13]=e("span",{class:"text-sm text-gray-500"},"Activity Status:",-1)),e("p",zg,v(p.modelValue.activity_status||"Not specified"),1)])])])]),e("div",Tg,[h[19]||(h[19]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Assessment of Environmental Effects")],-1)),e("div",Ig,[e("div",Bg,[p.modelValue.aee_activity_description?(o(),l("div",Eg,[h[15]||(h[15]=e("span",{class:"text-sm text-gray-500"},"Activity Description:",-1)),e("p",Ng,v(p.modelValue.aee_activity_description),1)])):y("",!0),p.modelValue.aee_existing_environment?(o(),l("div",Lg,[h[16]||(h[16]=e("span",{class:"text-sm text-gray-500"},"Existing Environment:",-1)),e("p",Fg,v(p.modelValue.aee_existing_environment),1)])):y("",!0),p.modelValue.assessment_of_effects?(o(),l("div",Hg,[h[17]||(h[17]=e("span",{class:"text-sm text-gray-500"},"Effects Assessment:",-1)),e("p",Og,v(p.modelValue.assessment_of_effects),1)])):y("",!0),p.modelValue.aee_document?(o(),l("div",Wg,[...h[18]||(h[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("span",null,"AEE Document attached",-1)])])):y("",!0),d.value?y("",!0):(o(),l("p",Qg," AEE not yet completed "))])])]),e("div",Gg,[h[23]||(h[23]=e("div",{class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900"},"Statutory Declarations")],-1)),e("div",Yg,[e("div",Jg,[e("div",Kg,[(o(),l("svg",{class:Q(["w-5 h-5",p.modelValue.declaration_rma_compliance?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...h[20]||(h[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:Q(p.modelValue.declaration_rma_compliance?"text-gray-900":"text-gray-500")}," RMA Compliance Declaration ",2)]),e("div",Zg,[(o(),l("svg",{class:Q(["w-5 h-5",p.modelValue.declaration_public_information?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...h[21]||(h[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:Q(p.modelValue.declaration_public_information?"text-gray-900":"text-gray-500")}," Public Information Declaration ",2)]),e("div",Xg,[(o(),l("svg",{class:Q(["w-5 h-5",p.modelValue.declaration_authorized?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...h[22]||(h[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:Q(p.modelValue.declaration_authorized?"text-gray-900":"text-gray-500")}," Authorization Declaration ",2)])])])])],64)):y("",!0),h[25]||(h[25]=X('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6" data-v-612e2c52><div class="flex items-start" data-v-612e2c52><svg class="w-6 h-6 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-612e2c52><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-612e2c52></path></svg><div data-v-612e2c52><h4 class="font-semibold text-yellow-900" data-v-612e2c52>Before You Submit</h4><ul class="mt-2 text-sm text-yellow-800 space-y-1 list-disc list-inside" data-v-612e2c52><li data-v-612e2c52>Review all information carefully for accuracy and completeness</li><li data-v-612e2c52>Ensure all required fields are completed</li><li data-v-612e2c52>For Resource Consent applications, verify all statutory declarations are confirmed</li><li data-v-612e2c52>Once submitted, you cannot edit the application (you may need to withdraw and resubmit)</li></ul></div></div></div>',1)),s.value?y("",!0):(o(),l("div",eb,[...h[24]||(h[24]=[X('<div class="flex items-start" data-v-612e2c52><svg class="w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-612e2c52><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-612e2c52></path></svg><div data-v-612e2c52><h5 class="font-semibold text-red-900 text-sm" data-v-612e2c52>Application Incomplete</h5><p class="text-red-800 text-sm mt-1" data-v-612e2c52> Please complete all required sections before submitting. Use the Previous button to go back and fill in missing information. </p></div></div>',1)])]))])])}}},ob=Ue(tb,[["__scopeId","data-v-612e2c52"]]);function sb(p,q){return o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const lb={class:"space-y-4"},ab={class:"block"},rb={class:"text-sm font-medium text-gray-900"},nb={key:0,class:"text-red-500"},ib={key:0,class:"text-xs text-gray-500 mt-1"},db={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ub=["disabled"],pb=["disabled"],cb={class:"text-center"},mb={class:"text-xs text-gray-500"},gb=["accept","multiple"],bb={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},vb={class:"flex items-center space-x-3"},yb={class:"flex-1"},fb={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},xb={key:1,class:"space-y-2"},_b={class:"flex items-center space-x-3 flex-1 min-w-0"},hb={class:"flex-shrink-0"},wb={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},kb=["src","alt"],$b={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},Cb={class:"flex-1 min-w-0"},Ab={class:"text-sm font-medium text-gray-900 truncate"},Vb={class:"text-xs text-gray-500"},Sb=["onClick"],Mb={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},qb={class:"relative bg-black aspect-video"},Pb=["src"],Db={key:2,class:"absolute inset-0 pointer-events-none"},Ub={class:"w-full h-full grid grid-cols-3 grid-rows-3"},jb={class:"bg-gray-900 px-6 py-6"},Rb={key:0,class:"flex items-center justify-center space-x-6"},zb={key:1,class:"flex items-center justify-center space-x-4"},Tb={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(p,{emit:q}){const _=p,V=q,t=U(null),u=U(null),d=U(!1),s=U(null),S=U(null),h=U(!1),P=U(0),x=H({get:()=>_.modelValue,set:M=>V("update:modelValue",M)}),r=()=>{var M;(M=t.value)==null||M.click()},A=M=>le(this,null,function*(){const E=Array.from(M.target.files);yield i(E),M.target.value=""}),i=M=>le(this,null,function*(){const E=[];for(const G of M){if(G.size>_.maxSize){alert(`File ${G.name} exceeds maximum size of ${m(_.maxSize)}`);continue}let te=null;G.type.startsWith("image/")&&(te=yield a(G)),E.push({file:G,name:G.name,size:G.size,type:G.type,preview:te,uploadDate:new Date().toISOString()})}if(E.length>0){const G=_.multiple?[...x.value,...E]:E;V("update:modelValue",G),yield b(E)}}),a=M=>new Promise(E=>{const G=new FileReader;G.onload=te=>E(te.target.result),G.onerror=()=>E(null),G.readAsDataURL(M)}),b=M=>le(this,null,function*(){h.value=!0,P.value=0;try{for(let E=0;E<M.length;E++){const G=M[E],te=setInterval(()=>{P.value=Math.min(P.value+10,90)},100);yield new Promise($e=>{V("upload",G,$e)}),clearInterval(te),P.value=(E+1)/M.length*100}}catch(E){console.error("Upload error:",E),alert("Failed to upload files. Please try again.")}finally{h.value=!1,P.value=0}}),c=M=>{const E=[...x.value];E.splice(M,1),V("update:modelValue",E)},F=()=>le(this,null,function*(){try{d.value=!0,yield K()}catch(M){console.error("Camera error:",M),alert("Unable to access camera. Please check permissions or upload a file instead."),d.value=!1}}),K=()=>le(this,null,function*(){try{const M=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});S.value=M,u.value&&(u.value.srcObject=M)}catch(M){throw M}}),W=()=>{const M=u.value,E=document.createElement("canvas");E.width=M.videoWidth,E.height=M.videoHeight,E.getContext("2d").drawImage(M,0,0,E.width,E.height),s.value=E.toDataURL("image/jpeg",.9)},I=()=>{s.value=null},z=()=>le(this,null,function*(){if(!s.value)return;const M=yield(yield fetch(s.value)).blob(),E=new File([M],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield i([E]),C()}),C=()=>{S.value&&(S.value.getTracks().forEach(M=>M.stop()),S.value=null),s.value=null,d.value=!1},m=M=>{if(M===0)return"0 Bytes";const E=1024,G=["Bytes","KB","MB","GB"],te=Math.floor(Math.log(M)/Math.log(E));return Math.round(M/Math.pow(E,te)*100)/100+" "+G[te]};return(M,E)=>(o(),l("div",lb,[e("label",ab,[e("span",rb,[O(v(p.label)+" ",1),p.required?(o(),l("span",nb,"*")):y("",!0)]),p.helpText?(o(),l("p",ib,v(p.helpText),1)):y("",!0)]),e("div",db,[p.allowCamera?(o(),l("button",{key:0,onClick:F,type:"button",class:Q(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":h.value}]),disabled:h.value},[...E[0]||(E[0]=[X('<div class="text-center" data-v-2bd160e5><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2bd160e5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2bd160e5></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2bd160e5></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2bd160e5>Take Photo</p><p class="text-xs text-gray-500" data-v-2bd160e5>Use camera</p></div>',1)])],10,ub)):y("",!0),e("button",{onClick:r,type:"button",class:Q(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":h.value}]),disabled:h.value},[e("div",cb,[E[1]||(E[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),E[2]||(E[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",mb,"Browse "+v(p.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:t,type:"file",accept:p.accept,multiple:p.multiple,onChange:A,class:"hidden"},null,40,gb)],10,pb)]),h.value?(o(),l("div",bb,[e("div",vb,[E[4]||(E[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",yb,[E[3]||(E[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",fb,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:vo({width:P.value+"%"})},null,4)])])])])):y("",!0),x.value.length>0?(o(),l("div",xb,[re(yo,{name:"list"},{default:ke(()=>[(o(!0),l(Y,null,J(x.value,(G,te)=>(o(),l("div",{key:G.name+te,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",_b,[e("div",hb,[G.preview?(o(),l("div",wb,[e("img",{src:G.preview,alt:G.name,class:"w-full h-full object-cover"},null,8,kb)])):(o(),l("div",$b,[...E[5]||(E[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",Cb,[e("p",Ab,v(G.name),1),e("p",Vb,v(m(G.size)),1)]),e("button",{onClick:$e=>c(te),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...E[6]||(E[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Sb)])]))),128))]),_:1})])):y("",!0),(o(),ue(Ie,{to:"body"},[d.value?(o(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:ye(C,["self"])},[e("div",Mb,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[E[8]||(E[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:C,class:"text-gray-400 hover:text-white transition-colors"},[...E[7]||(E[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",qb,[s.value?(o(),l("img",{key:1,src:s.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,Pb)):(o(),l("video",{key:0,ref_key:"videoElement",ref:u,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),s.value?y("",!0):(o(),l("div",Db,[e("div",Ub,[(o(),l(Y,null,J(9,G=>e("div",{key:G,class:"border border-white/20"})),64))])]))]),e("div",jb,[s.value?(o(),l("div",zb,[e("button",{onClick:I,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:z,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(o(),l("div",Rb,[e("button",{onClick:W,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...E[9]||(E[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):y("",!0)]))]))}},Ib=Ue(Tb,[["__scopeId","data-v-2bd160e5"]]),Bb={class:"space-y-4"},Eb={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Nb={class:"block text-sm font-medium text-gray-700 mb-2"},Lb={key:0,class:"text-red-500"},Fb={class:"relative"},Hb=["required"],Ob=["value"],Wb={class:"block text-sm font-medium text-gray-700 mb-2"},Qb={key:0,class:"text-red-500"},Gb={class:"relative"},Yb=["required","disabled"],Jb=["value"],Kb={key:0,class:"mt-1 text-xs text-gray-500"},Zb={class:"block text-sm font-medium text-gray-700 mb-2"},Xb={key:0,class:"text-red-500"},ev={class:"relative"},tv=["required","disabled"],ov=["value"],sv={key:0,class:"mt-1 text-xs text-gray-500"},lv={class:"block text-sm font-medium text-gray-700 mb-2"},av={key:0,class:"text-red-500"},rv=["required"],nv={class:"md:col-span-2"},iv={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},dv={class:"flex items-start"},uv={class:"flex-1"},pv={class:"text-sm text-green-700 mt-1"},cv={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=U({street:"",barangay:"",municipality:"",province:"",zipCode:""}),u=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],d={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Paraaque City","Las Pias City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},s={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},S=H(()=>t.value.province?d[t.value.province]||[]:[]),h=H(()=>t.value.municipality?s[t.value.municipality]||["Other - Please specify in Street field"]:[]),P=H(()=>{const i=[];return t.value.street&&i.push(t.value.street),t.value.barangay&&i.push(`Brgy. ${t.value.barangay}`),t.value.municipality&&i.push(t.value.municipality),t.value.province&&i.push(t.value.province),t.value.zipCode&&i.push(t.value.zipCode),i.length>0?i.join(", "):""}),x=()=>{t.value.municipality="",t.value.barangay="",A()},r=()=>{t.value.barangay="",A()},A=()=>{V("update:modelValue",P.value)};return Ve(()=>{var i;if(_.modelValue)if(typeof _.modelValue=="string"){const a=_.modelValue.split(",").map(b=>b.trim());a.length>=3&&(t.value.street=a[0]||"",t.value.barangay=((i=a[1])==null?void 0:i.replace("Brgy. ",""))||"",t.value.municipality=a[2]||"",t.value.province=a[3]||"",t.value.zipCode=a[4]||"")}else typeof _.modelValue=="object"&&(t.value=N(N({},t.value),_.modelValue))}),ae(()=>_.modelValue,i=>{i&&typeof i=="object"&&(t.value=N(N({},t.value),i))}),(i,a)=>(o(),l("div",Bb,[a[18]||(a[18]=X('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",Eb,[e("div",null,[e("label",Nb,[a[5]||(a[5]=O(" Province ",-1)),p.required?(o(),l("span",Lb,"*")):y("",!0)]),e("div",Fb,[f(e("select",{"onUpdate:modelValue":a[0]||(a[0]=b=>t.value.province=b),onChange:x,required:p.required,class:Q(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":t.value.province}])},[a[6]||(a[6]=e("option",{value:""},"Select Province",-1)),(o(),l(Y,null,J(u,b=>e("option",{key:b,value:b},v(b),9,Ob)),64))],42,Hb),[[ie,t.value.province]]),a[7]||(a[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",Wb,[a[8]||(a[8]=O(" Municipality/City ",-1)),p.required?(o(),l("span",Qb,"*")):y("",!0)]),e("div",Gb,[f(e("select",{"onUpdate:modelValue":a[1]||(a[1]=b=>t.value.municipality=b),onChange:r,required:p.required,disabled:!t.value.province,class:Q(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":t.value.municipality}])},[a[9]||(a[9]=e("option",{value:""},"Select Municipality/City",-1)),(o(!0),l(Y,null,J(S.value,b=>(o(),l("option",{key:b,value:b},v(b),9,Jb))),128))],42,Yb),[[ie,t.value.municipality]]),a[10]||(a[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),t.value.province?y("",!0):(o(),l("p",Kb,"Select province first"))]),e("div",null,[e("label",Zb,[a[11]||(a[11]=O(" Barangay ",-1)),p.required?(o(),l("span",Xb,"*")):y("",!0)]),e("div",ev,[f(e("select",{"onUpdate:modelValue":a[2]||(a[2]=b=>t.value.barangay=b),onChange:A,required:p.required,disabled:!t.value.municipality,class:Q(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":t.value.barangay}])},[a[12]||(a[12]=e("option",{value:""},"Select Barangay",-1)),(o(!0),l(Y,null,J(h.value,b=>(o(),l("option",{key:b,value:b},v(b),9,ov))),128))],42,tv),[[ie,t.value.barangay]]),a[13]||(a[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),t.value.municipality?y("",!0):(o(),l("p",sv,"Select municipality first"))]),e("div",null,[e("label",lv,[a[14]||(a[14]=O(" Street / House No. ",-1)),p.required?(o(),l("span",av,"*")):y("",!0)]),f(e("input",{"onUpdate:modelValue":a[3]||(a[3]=b=>t.value.street=b),onInput:A,type:"text",required:p.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:Q(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.value.street}])},null,42,rv),[[D,t.value.street]])]),e("div",nv,[a[15]||(a[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[O(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),f(e("input",{"onUpdate:modelValue":a[4]||(a[4]=b=>t.value.zipCode=b),onInput:A,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[D,t.value.zipCode]])])]),P.value?(o(),l("div",iv,[e("div",dv,[a[17]||(a[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",uv,[a[16]||(a[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",pv,v(P.value),1)])])])):y("",!0)]))}},mv={class:"inline-block relative group"},gv={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:p=>["top","bottom","left","right"].includes(p)}},setup(p){const q=p,_=U(!1),V=H(()=>{switch(q.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),t=H(()=>{switch(q.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(u,d)=>(o(),l("div",mv,[Pt(u.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:d[0]||(d[0]=s=>_.value=!0),onMouseleave:d[1]||(d[1]=s=>_.value=!1)},[...d[2]||(d[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),re(fo,{name:"tooltip"},{default:ke(()=>[_.value?(o(),l("div",{key:0,class:Q(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",V.value]),style:{"max-width":"300px","white-space":"normal"}},[Pt(u.$slots,"default",{},()=>[O(v(p.text),1)],!0),e("div",{class:Q(["tooltip-arrow",t.value])},null,2)],2)):y("",!0)]),_:3})]))}},ot=Ue(gv,[["__scopeId","data-v-1fa5e90e"]]),bv={class:"space-y-6"},vv={key:0,class:"form-group"},yv={key:1,class:"form-group"},fv=["for"],xv={key:0,class:"text-red-500 ml-1"},_v={class:"relative"},hv=["id","onUpdate:modelValue","required","placeholder"],wv={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},kv=["innerHTML"],$v={key:0,class:"mt-1 text-xs text-gray-500"},Cv={key:2,class:"form-group"},Av=["for"],Vv={key:0,class:"text-red-500 ml-1"},Sv={class:"relative"},Mv=["id","onUpdate:modelValue","required"],qv={value:""},Pv=["value"],Dv={key:0,class:"mt-1 text-xs text-gray-500"},Uv={key:3,class:"form-group"},jv={class:"flex items-start p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors"},Rv={class:"flex items-center h-5"},zv=["id","onUpdate:modelValue","required"],Tv={class:"ml-3 text-sm"},Iv=["for"],Bv={key:0,class:"text-red-500 ml-1"},Ev={key:0,class:"mt-1 text-xs text-gray-500"},Nv={key:4,class:"form-group"},Lv=["for"],Fv={key:0,class:"text-red-500 ml-1"},Hv=["id","onUpdate:modelValue","required","placeholder"],Ov={key:0,class:"mt-1 text-xs text-gray-500"},Wv={key:5,class:"form-group"},Qv=["for"],Gv={key:0,class:"text-red-500 ml-1"},Yv={class:"relative"},Jv=["id","onUpdate:modelValue","required"],Kv={key:0,class:"mt-1 text-xs text-gray-500"},Zv={key:6,class:"form-group"},Xv=["for"],e1={key:0,class:"text-red-500 ml-1"},t1={class:"relative"},o1=["id","onUpdate:modelValue","required","placeholder"],s1={key:0,class:"mt-1 text-xs text-gray-500"},l1={key:7,class:"form-group"},a1=["for"],r1={key:0,class:"text-red-500 ml-1"},n1={class:"relative"},i1=["id","onUpdate:modelValue","required","placeholder"],d1={key:0,class:"mt-1 text-xs text-gray-500"},u1={key:8,class:"form-group"},p1=["for"],c1={key:0,class:"text-red-500 ml-1"},m1={class:"relative"},g1=["id","onUpdate:modelValue","required"],b1={key:0,class:"mt-1 text-xs text-gray-500"},v1={key:9,class:"form-group"},y1={key:10,class:"form-group"},f1={class:"text-sm text-gray-500 italic"},x1={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=H({get:()=>_.modelValue,set:P=>V("update:modelValue",P)}),u=H(()=>_.fields.filter(P=>(P.depends_on,!0))),d=P=>{var i,a;const x=["address","residential_address","permanent_address","current_address","home_address"],r=((i=P.field_name)==null?void 0:i.toLowerCase())||"",A=((a=P.field_label)==null?void 0:a.toLowerCase())||"";return x.some(b=>r.includes(b)||A.includes(b))},s=P=>{var r;if(P.placeholder)return P.placeholder;const x=((r=P.field_label)==null?void 0:r.toLowerCase())||"";return x.includes("name")?"e.g., Juan Dela Cruz":x.includes("email")?"e.g., juan@example.com":x.includes("phone")||x.includes("mobile")||x.includes("contact")?"e.g., 0917 123 4567":x.includes("age")?"e.g., 25":x.includes("occupation")?"e.g., Teacher":x.includes("income")||x.includes("salary")?"e.g., 15000":`Enter ${P.field_label}`},S=P=>{var r;const x=((r=P.field_label)==null?void 0:r.toLowerCase())||"";return x.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':x.includes("phone")||x.includes("mobile")||x.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':x.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},h=P=>P?P.split(`
`).map(x=>x.trim()).filter(Boolean):[];return ae(()=>_.fields,P=>{P.forEach(x=>{x.default_value&&!t.value[x.field_name]&&(x.default_value==="Today"&&x.field_type==="Date"?t.value[x.field_name]=new Date().toISOString().split("T")[0]:t.value[x.field_name]=x.default_value)})},{immediate:!0}),(P,x)=>(o(),l("div",bv,[(o(!0),l(Y,null,J(u.value,r=>(o(),l("div",{key:r.field_name,class:"field-wrapper"},[d(r)?(o(),l("div",vv,[re(cv,{modelValue:t.value[r.field_name],"onUpdate:modelValue":A=>t.value[r.field_name]=A,required:r.is_required},null,8,["modelValue","onUpdate:modelValue","required"])])):r.field_type==="Data"?(o(),l("div",yv,[e("label",{for:r.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,v(r.field_label),1),r.is_required?(o(),l("span",xv,"*")):y("",!0),r.help_text||r.description?(o(),ue(ot,{key:1,text:r.help_text||r.description},null,8,["text"])):y("",!0)],8,fv),e("div",_v,[f(e("input",{id:r.field_name,type:"text","onUpdate:modelValue":A=>t.value[r.field_name]=A,required:r.is_required,class:Q(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.value[r.field_name]}]),placeholder:s(r)},null,10,hv),[[D,t.value[r.field_name]]]),S(r)?(o(),l("div",wv,[e("span",{innerHTML:S(r),class:"text-gray-400"},null,8,kv)])):y("",!0)]),r.description?(o(),l("p",$v,v(r.description),1)):y("",!0)])):r.field_type==="Select"?(o(),l("div",Cv,[e("label",{for:r.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,v(r.field_label),1),r.is_required?(o(),l("span",Vv,"*")):y("",!0),r.help_text||r.description?(o(),ue(ot,{key:1,text:r.help_text||r.description},null,8,["text"])):y("",!0)],8,Av),e("div",Sv,[f(e("select",{id:r.field_name,"onUpdate:modelValue":A=>t.value[r.field_name]=A,required:r.is_required,class:Q(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":t.value[r.field_name]}])},[e("option",qv,"Select "+v(r.field_label),1),(o(!0),l(Y,null,J(h(r.options),A=>(o(),l("option",{key:A,value:A},v(A),9,Pv))),128))],10,Mv),[[ie,t.value[r.field_name]]]),x[0]||(x[0]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),r.description?(o(),l("p",Dv,v(r.description),1)):y("",!0)])):r.field_type==="Check"?(o(),l("div",Uv,[e("div",jv,[e("div",Rv,[f(e("input",{id:r.field_name,type:"checkbox","onUpdate:modelValue":A=>t.value[r.field_name]=A,required:r.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,8,zv),[[oe,t.value[r.field_name]]])]),e("div",Tv,[e("label",{for:r.field_name,class:"font-medium text-gray-700 cursor-pointer"},[O(v(r.field_label)+" ",1),r.is_required?(o(),l("span",Bv,"*")):y("",!0)],8,Iv),r.description?(o(),l("p",Ev,v(r.description),1)):y("",!0)])])])):r.field_type==="Text"?(o(),l("div",Nv,[e("label",{for:r.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[O(v(r.field_label)+" ",1),r.is_required?(o(),l("span",Fv,"*")):y("",!0)],8,Lv),f(e("textarea",{id:r.field_name,"onUpdate:modelValue":A=>t.value[r.field_name]=A,required:r.is_required,rows:"4",class:Q(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":t.value[r.field_name]}]),placeholder:s(r)},null,10,Hv),[[D,t.value[r.field_name]]]),r.description?(o(),l("p",Ov,v(r.description),1)):y("",!0)])):r.field_type==="Date"?(o(),l("div",Wv,[e("label",{for:r.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,v(r.field_label),1),r.is_required?(o(),l("span",Gv,"*")):y("",!0),r.help_text||r.description?(o(),ue(ot,{key:1,text:r.help_text||r.description},null,8,["text"])):y("",!0)],8,Qv),e("div",Yv,[f(e("input",{id:r.field_name,type:"date","onUpdate:modelValue":A=>t.value[r.field_name]=A,required:r.is_required,class:Q(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.value[r.field_name]}])},null,10,Jv),[[D,t.value[r.field_name]]]),x[1]||(x[1]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),r.description?(o(),l("p",Kv,v(r.description),1)):y("",!0)])):r.field_type==="Int"?(o(),l("div",Zv,[e("label",{for:r.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,v(r.field_label),1),r.is_required?(o(),l("span",e1,"*")):y("",!0),r.help_text||r.description?(o(),ue(ot,{key:1,text:r.help_text||r.description},null,8,["text"])):y("",!0)],8,Xv),e("div",t1,[f(e("input",{id:r.field_name,type:"number","onUpdate:modelValue":A=>t.value[r.field_name]=A,required:r.is_required,step:"1",class:Q(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.value[r.field_name]}]),placeholder:s(r)},null,10,o1),[[D,t.value[r.field_name],void 0,{number:!0}]]),x[2]||(x[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),r.description?(o(),l("p",s1,v(r.description),1)):y("",!0)])):r.field_type==="Float"?(o(),l("div",l1,[e("label",{for:r.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[O(v(r.field_label)+" ",1),r.is_required?(o(),l("span",r1,"*")):y("",!0)],8,a1),e("div",n1,[f(e("input",{id:r.field_name,type:"number","onUpdate:modelValue":A=>t.value[r.field_name]=A,required:r.is_required,step:"0.01",class:Q(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.value[r.field_name]}]),placeholder:s(r)},null,10,i1),[[D,t.value[r.field_name],void 0,{number:!0}]]),x[3]||(x[3]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),r.description?(o(),l("p",d1,v(r.description),1)):y("",!0)])):r.field_type==="Currency"?(o(),l("div",u1,[e("label",{for:r.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[O(v(r.field_label)+" ",1),r.is_required?(o(),l("span",c1,"*")):y("",!0)],8,p1),e("div",m1,[x[4]||(x[4]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-base font-medium"},"")],-1)),f(e("input",{id:r.field_name,type:"number","onUpdate:modelValue":A=>t.value[r.field_name]=A,required:r.is_required,step:"0.01",class:Q(["block w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.value[r.field_name]}]),placeholder:"0.00"},null,10,g1),[[D,t.value[r.field_name],void 0,{number:!0}]])]),r.description?(o(),l("p",b1,v(r.description),1)):y("",!0)])):r.field_type==="Attach"||r.field_type==="Attach Image"?(o(),l("div",v1,[re(Ib,{label:r.field_label,required:r.is_required,accept:r.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:t.value[r.field_name],"onUpdate:modelValue":A=>t.value[r.field_name]=A},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):(o(),l("div",y1,[e("div",f1,' Field type "'+v(r.field_type)+'" not yet supported for '+v(r.field_label),1)]))]))),128))]))}},vt=Ue(x1,[["__scopeId","data-v-bc5352e5"]]),_1={class:"dynamic-step max-w-4xl mx-auto"},h1={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},w1={class:"flex items-start"},k1={class:"ml-4 flex-1"},$1={class:"text-2xl font-bold text-blue-900"},C1={key:0,class:"mt-2 text-sm text-blue-700"},A1={class:"space-y-6"},V1={class:"mb-4 pb-3 border-b-2 border-gray-200"},S1={class:"flex items-center"},M1={class:"text-lg font-semibold text-gray-900"},q1={key:0,class:"text-red-500 ml-1"},P1={key:0,class:"text-sm text-gray-600 mt-0.5"},D1={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},U1={class:"section-content"},j1={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},R1={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(p,{emit:q}){const _=p,V=q,t=H({get:()=>_.modelValue,set:s=>V("update:modelValue",s)}),u=H(()=>_.stepConfig.sections?_.stepConfig.sections.filter(s=>s.is_enabled?(s.depends_on,!0):!1):[]),d=s=>[s.section_title];return ae(()=>_.stepConfig,s=>{s.sections&&s.sections.forEach(S=>{S.fields.forEach(h=>{h.default_value&&!t.value[h.field_name]&&(h.default_value==="Today"&&h.field_type==="Date"?t.value[h.field_name]=new Date().toISOString().split("T")[0]:t.value[h.field_name]=h.default_value)})})},{immediate:!0,deep:!0}),(s,S)=>(o(),l("div",_1,[e("div",h1,[e("div",w1,[S[3]||(S[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",k1,[e("h2",$1,v(p.stepConfig.step_title),1),p.stepDescription?(o(),l("p",C1,v(p.stepDescription),1)):y("",!0)])])]),e("div",A1,[(o(!0),l(Y,null,J(u.value,h=>(o(),l("div",{key:h.section_code,class:"section"},[e("div",V1,[e("div",S1,[S[4]||(S[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",M1,[O(v(h.section_title)+" ",1),h.is_required?(o(),l("span",q1,"*")):y("",!0)]),h.section_description?(o(),l("p",P1,v(h.section_description),1)):y("",!0)])]),h.is_required?(o(),l("div",D1,[...S[5]||(S[5]=[O(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),O(" are required ",-1)])])):y("",!0)]),e("div",U1,[h.section_type==="Tab"?(o(),ue(xe(Po),{key:0},{default:ke(()=>[re(xe(Do),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:ke(()=>[(o(!0),l(Y,null,J(d(h),(P,x)=>(o(),ue(xe(Uo),{key:x,class:Q(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",s.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:ke(({selected:r})=>[O(v(P),1)]),_:2},1032,["class"]))),128))]),_:2},1024),re(xe(jo),null,{default:ke(()=>[(o(!0),l(Y,null,J(d(h),(P,x)=>(o(),ue(xe(Ro),{key:x},{default:ke(()=>[re(vt,{fields:h.fields,modelValue:t.value,"onUpdate:modelValue":S[0]||(S[0]=r=>t.value=r)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):h.section_type==="Accordion"?(o(),ue(xe(Co),{key:1},{default:ke(({open:P})=>[re(xe(Ao),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:ke(()=>[e("span",null,v(h.section_title),1),re(xe(sb),{class:Q([P?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),re(xe(Vo),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:ke(()=>[re(vt,{fields:h.fields,modelValue:t.value,"onUpdate:modelValue":S[1]||(S[1]=x=>t.value=x)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(o(),l("div",j1,[re(vt,{fields:h.fields,modelValue:t.value,"onUpdate:modelValue":S[2]||(S[2]=P=>t.value=P)},null,8,["fields","modelValue"])]))])]))),128))])]))}},z1=Ue(R1,[["__scopeId","data-v-7ca36352"]]),T1={class:"min-h-screen bg-gray-50"},I1={class:"bg-white shadow-sm border-b border-gray-200"},B1={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},E1={class:"flex items-center justify-between py-4"},N1={class:"flex items-center space-x-3"},L1={class:"text-sm text-gray-500"},F1={class:"flex items-center gap-2"},H1={class:"bg-white border-b border-gray-200"},O1={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},W1={class:"flex items-center justify-between mb-2"},Q1={class:"flex flex-col items-center"},G1={key:0},Y1={key:1},J1={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},K1={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},Z1={key:0},X1={key:1},ey={key:2},ty={key:12},oy={class:"mt-8 flex justify-between items-center"},sy={key:1},ly=["disabled"],ay=["disabled"],ry={key:0},ny={key:1},iy={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},dy={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},uy={class:"flex items-center justify-between"},py={class:"text-lg font-semibold text-gray-900"},cy={class:"px-6 py-4 space-y-4"},my={class:"border-t border-gray-200 pt-4"},gy={class:"grid md:grid-cols-2 gap-4"},by={class:"border-t border-gray-200 pt-4"},vy={class:"space-y-3"},yy={class:"border-t border-gray-200 pt-4"},fy={class:"flex items-start mb-3"},xy={key:0,class:"ml-7 space-y-3"},_y={key:0,class:"mt-2 text-xs text-green-600 flex items-center gap-1"},hy={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},wy={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ky={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},$y={class:"flex items-center justify-between"},Cy={class:"text-lg font-semibold text-gray-900"},Ay={class:"px-6 py-4 space-y-4"},Vy={class:"border-t border-gray-200 pt-4"},Sy={class:"space-y-3"},My={class:"border-t border-gray-200 pt-4"},qy={class:"space-y-3"},Py={key:0,class:"mt-2 text-xs text-green-600 flex items-center gap-1"},Dy={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Uy={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"},jy={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},Ry={class:"flex items-center justify-between"},zy={class:"text-lg font-semibold text-gray-900"},Ty={class:"px-6 py-4 space-y-4"},Iy={class:"border-t border-gray-200 pt-4"},By={class:"grid md:grid-cols-3 gap-3"},Ey={class:"flex items-center"},Ny={class:"flex items-center"},Ly={class:"flex items-center"},Fy={class:"flex items-center"},Hy={class:"border-t border-gray-200 pt-4"},Oy={class:"space-y-2 p-3 border border-gray-200 rounded bg-gray-50"},Wy={class:"flex items-center"},Qy={class:"flex items-center"},Gy={class:"flex items-center"},Yy={class:"flex items-center"},Jy={class:"flex items-center"},Ky={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Zy={class:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col"},Xy={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},ef={class:"flex items-center justify-between"},tf={class:"flex-1 overflow-y-auto"},of={class:"grid md:grid-cols-3 gap-6 p-6"},sf={class:"md:col-span-2 space-y-4"},lf={class:"flex items-center gap-2 mb-4 pb-4 border-b border-gray-200"},af=["value"],rf={class:"ml-auto text-xs text-gray-500"},nf={key:0,class:"text-center py-12"},df={key:1,class:"space-y-3"},uf={class:"flex items-start justify-between mb-2"},pf={class:"flex-1"},cf={class:"flex items-center gap-2 mb-1"},mf={class:"text-sm font-semibold text-gray-900"},gf={key:0,class:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-mono rounded"},bf={class:"flex items-center gap-2 mb-2"},vf={class:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded"},yf={key:0,class:"px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded"},ff={key:1,class:"px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded"},xf=["innerHTML"],_f=["onClick"],hf={key:2,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},wf={class:"md:col-span-1 bg-gray-50 rounded-lg p-4 border border-gray-200"},kf={class:"text-sm font-semibold text-gray-900 mb-3 flex items-center justify-between"},$f={class:"px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full"},Cf={key:0,class:"space-y-2 max-h-[600px] overflow-y-auto"},Af={class:"flex items-start justify-between mb-1"},Vf={class:"flex items-center gap-1"},Sf={class:"px-1.5 py-0.5 bg-gray-100 text-gray-700 font-mono text-xs rounded"},Mf={class:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded"},qf=["onClick"],Pf=["innerHTML"],Df={key:1,class:"text-center py-8 text-xs text-gray-500"},Uf={key:0,class:"border-t border-gray-200 bg-gray-50 p-6"},jf={class:"text-sm font-semibold text-gray-900 mb-4"},Rf={class:"grid md:grid-cols-2 gap-4 mb-4"},zf=["value"],Tf={class:"mb-4"},If={class:"flex justify-end gap-2 mt-4"},Bf={class:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end"},Hf={__name:"NewRequest",setup(p){const q=xo(),_=_o(),V=ho(),t=U(null),u=U(!1),d=U(null),s=U(0),S=H(()=>b.value.length),h=U(!1),P=U(!1),x=U([]);U(null),U(!1);const r=U(!1);U(!1);const A=U([]),i=U(!1),a=U(!1),b=H(()=>{const $=[];console.log("[Steps] Computing steps..."),console.log("[Steps] councilStore.isCouncilLocked:",V.isCouncilLocked),console.log("[Steps] route.query.type:",_.query.type),console.log("[Steps] formData.value.request_type:",c.value.request_type),V.isCouncilLocked?console.log("[Steps] Skipped Council step (locked)"):($.push({title:"Council",number:$.length+1}),console.log("[Steps] Added Council step"));const n=_.query.type||_.query.locked==="true"&&c.value.request_type,k=V.isCouncilLocked&&n;return console.log("[Steps] hasPreselectedType:",n),console.log("[Steps] skipTypeStep:",k),k?console.log("[Steps] Skipped Type step (locked + preselected)"):($.push({title:"Type",number:$.length+1}),console.log("[Steps] Added Type step")),$.push({title:"Process Info",number:$.length+1}),console.log("[Steps] Added Process Info step"),a.value&&A.value.length>0?A.value.forEach((ee,Se)=>{$.push({title:ee.step_title,number:$.length+1,code:ee.step_code,config:ee,isDynamic:!0})}):L.value&&($.push({title:"Applicant & Proposal",number:$.length+1}),$.push({title:"Natural Hazards",number:$.length+1}),$.push({title:"NES Assessment",number:$.length+1}),$.push({title:"Approvals",number:$.length+1}),$.push({title:"Consultation",number:$.length+1}),$.push({title:"Documents",number:$.length+1}),$.push({title:"AEE",number:$.length+1}),$.push({title:"Submission",number:$.length+1})),$.push({title:"Review",number:$.length+1}),console.log("[Steps] Final steps:",$.map(ee=>ee.title).join("  ")),console.log("[Steps] Total steps:",$.length),$}),c=U({council:"",request_type:"",request_category:"",property:"",property_address:"",legal_description:"",valuation_reference:"",parcel_id:"",ct_reference:"",property_coordinates:"",hazard_data:null,zone:"",activity_zone:"",brief_description:"",detailed_description:"",estimated_value:null,proposed_start_date:"",terms_accepted:!1,applicant_phone:"",applicant_type:"",submitted_on_behalf_of:"Myself",company_account:null,acting_on_behalf:!1,applicant_name:"",applicant_email:"",consent_types:[],activity_status:"",applicant_reference_number:"",delivery_preference:"",pim_reference:"",building_height:null,building_floor_area:null,earthworks_volume:null,earthworks_vertical_alteration:null,vehicle_movements_daily:null,parking_spaces_provided:null,hours_of_operation:"",consent_term_requested:"",site_topography:"",existing_vegetation_description:"",watercourses_present:!1,watercourse_description:"",existing_infrastructure:"",contamination_status_hail:"",boundary_description:"",boundary_activity_description:"",boundary_owner_approval_obtained:!1,boundary_approval_date:"",boundary_approval_document:null,natural_hazards:[],nes_assessments:[],hail_activities:[],confidential_information_claimed:!1,confidential_information_reason:"",assessment_of_effects:"",effects_on_people:"",physical_effects:"",earthworks_effects:"",discharge_contaminants_effects:"",ecosystem_effects:"",hazard_risk_assessment:"",cultural_effects:"",aee_document:null,aee_activity_description:"",aee_activity_status:"",aee_existing_environment:"",aee_site_area:null,aee_current_use:"",aee_zoning:"",aee_overlays:"",aee_designations:"",aee_part2_assessment:"",aee_plan_rules:[],aee_compliance_standards:[],aee_written_approvals:[],aee_proposed_conditions:[],aee_consultation_summary:"",alternatives_considered:"",mitigation_proposed:"",applicant_is_not_owner:!1,owner_name:"",owner_email:"",owner_phone:"",owner_address:"",certificate_of_title_document:null,declaration_rma_compliance:!1,declaration_public_information:!1,declaration_authorized:!1,invoice_to:"Applicant",invoice_name:"",invoice_email:"",invoice_address:"",purchase_order_number:"",transfer_deposit_required:!1,transfer_deposit_consent_number:"",affected_parties:[],written_approvals_obtained:0,iwi_consultation_undertaken:!1,iwi_consulted:"",cultural_impact_assessment:null,iwi_response_summary:"",specialist_reports:[],proposed_conditions:[]});U(""),U([]),U(!1),U(!1);const F=U(null),K=U([]),W=U({}),I=$=>(W.value[$]||(W.value[$]={hazard_type:$,present:!0,risk_level:"",assessment_notes:"",mitigation_required:!1}),W.value[$]);ae(K,$=>{c.value.natural_hazards=$.map(n=>I(n))},{deep:!0}),ae(W,()=>{c.value.natural_hazards=K.value.map($=>I($))},{deep:!0});const z=[{value:"Contaminated Soil (HAIL)",label:"NES for Assessing and Managing Contaminants in Soil (HAIL)"},{value:"Air Quality",label:"NES for Air Quality"},{value:"Drinking Water",label:"NES for Sources of Human Drinking Water"},{value:"Freshwater",label:"NES for Freshwater Management"},{value:"Plantation Forestry",label:"NES for Plantation Forestry"},{value:"Electricity Transmission",label:"NES for Electricity Transmission Activities"},{value:"Telecommunications",label:"NES for Telecommunication Facilities"},{value:"Other",label:"Other NES"}],C=U({}),m=$=>(C.value[$]||(C.value[$]={nes_type:$,applies:!1,description:"",compliance_notes:""}),C.value[$]);ae(C,()=>{c.value.nes_assessments=z.filter($=>m($.value).applies).map($=>m($.value))},{deep:!0}),H(()=>c.value.nes_assessments.some($=>$.nes_type&&$.nes_type.includes("HAIL")));const M=U(!1),E=U(null),G=U({activity_description:"",hail_category:"",currently_undertaken:!1,previously_undertaken:!1,likely_undertaken:!1,preliminary_investigation_done:!1,proposed_activities:[],notes:""}),te=U({fuel:!1,disturb:!1,sample:!1,subdivide:!1,change:!1}),$e=()=>{if(!G.value.activity_description){alert("Please enter activity description");return}const $=[];te.value.fuel&&$.push({activity_type:"Removing or replacing fuel storage system"}),te.value.disturb&&$.push({activity_type:"Disturbing soil"}),te.value.sample&&$.push({activity_type:"Sampling soil"}),te.value.subdivide&&$.push({activity_type:"Subdividing land"}),te.value.change&&$.push({activity_type:"Changing use of land"});const n=ve(N({},G.value),{proposed_activities:$});E.value!==null?c.value.hail_activities[E.value]=n:c.value.hail_activities.push(n),M.value=!1},Ce=()=>{M.value=!1};U({building:!0,earthworks:!1,traffic:!1,operations:!1});const T=U(JSON.parse(JSON.stringify(c.value))),w=H(()=>{const $=N({},c.value),n=N({},T.value);delete $.terms_accepted,delete n.terms_accepted;const k=JSON.stringify($),ee=JSON.stringify(n);return k!==ee}),L=H(()=>c.value.request_category==="Resource Consent"),R=$=>{var n;return((n=c.value.consent_types)==null?void 0:n.some(k=>k.consent_type===$))||!1},pe=H(()=>R("Land Use")),Z=H(()=>R("Subdivision")),Be=H(()=>R("Water Permit")),Ee=H(()=>R("Discharge Permit")),dt=H(()=>R("Coastal Permit"));H(()=>pe.value||Z.value),H(()=>{const $=c.value.activity_status==="Controlled",n=!Z.value;return $&&n&&L.value}),H(()=>(pe.value||Z.value)&&!(Be.value||Ee.value||dt.value)),H(()=>{if(!c.value.activity_status)return null;switch(c.value.activity_status){case"Non-Complying":return" Non-complying activities face higher scrutiny and longer processing times. Consider council meeting.";case"Discretionary":return" Discretionary activities may require public notification depending on effects assessment.";case"Controlled":return" Controlled activities must be granted consent. Council will focus on appropriate conditions.";default:return null}});const Qe=H(()=>w.value||x.value.length>0),we=U({data:[],loading:!1,error:null}),Ge=He({url:"frappe.client.get_list",params:{doctype:"Property",fields:["name","property_id","street_address","suburb","city","legal_description","certificate_of_title"],limit_page_length:100},auto:!1}),B=$=>le(this,null,function*(){if(console.log("[NewRequest] onCouncilChange called with:",$),console.log("[NewRequest] formData.value.council is now:",c.value.council),!$){we.value={data:[],loading:!1,error:null};return}we.value.loading=!0,we.value.error=null;try{yield V.loadRequestTypesForCouncil($),we.value.data=V.availableRequestTypes,console.log(`[NewRequest] Loaded ${we.value.data.length} request types for council ${$}`)}catch(n){we.value.error=n.message||"Failed to load request types",console.error("[NewRequest] Failed to load request types:",n)}finally{we.value.loading=!1}}),g=()=>{confirm("Are you sure you want to leave? Any unsaved changes will be lost.")&&q.push({name:"Dashboard"})},j=$=>$<s.value||$===s.value?"bg-blue-600 text-white":"bg-gray-200 text-gray-600",se=$=>le(this,null,function*(){console.log("[NewRequest] Selecting Request Type:",$.name,$.type_name),c.value.request_type=$.name,c.value.request_category=$.category||"",F.value=$,console.log("[NewRequest] Form data updated:"),console.log("  request_type:",c.value.request_type),console.log("  request_category:",c.value.request_category),console.log("  council:",c.value.council),console.log("  formData.value:",c.value),$.category==="Resource Consent"&&Ut.user&&Ut.user!=="Guest"&&Ge.fetch(),yield _e($.name)}),_e=$=>le(this,null,function*(){if(!$||!c.value.council){console.log("[NewRequest] Skipping step config load - missing requestType or council");return}try{i.value=!0,console.log("[NewRequest] Loading step config for:",$,"council:",c.value.council);const n=yield Fe("lodgeick.api.get_request_type_steps",{request_type:$,council_code:c.value.council});console.log("[NewRequest] Step config API result:",n),n&&n.uses_config&&n.steps&&n.steps.length>0?(A.value=n.steps,a.value=!0,console.log("[NewRequest] Loaded",A.value.length,"configured steps")):(A.value=[],a.value=!1,console.log("[NewRequest] No step configuration found - using hardcoded flow"))}catch(n){console.error("[NewRequest] Error loading step configuration:",n),A.value=[],a.value=!1}finally{i.value=!1}}),ut=H(()=>{var n,k,ee,Se,ge;switch(s.value){case 1:return!!c.value.council;case 2:return!!c.value.request_type;case 3:return!0;case 4:return!0;case 5:if(L.value){const Ae=c.value.consent_types;if(Ae==null?void 0:Ae.some(Ne=>Ne.consent_type==="Land Use"||Ne.consent_type==="Subdivision")){const Ne=c.value.natural_hazards,lo=c.value.no_natural_hazards_confirmed;return Ne&&Ne.length>0||lo}return!0}return!0;case 6:return!0;case 7:return!0;case 8:return!0;case 9:return!0;case 10:return L.value?c.value.aee_completion_method==="upload"?!!c.value.aee_document&&!!c.value.aee_document_confirmed:!!((n=c.value.aee_activity_description)!=null&&n.trim())&&!!((k=c.value.aee_existing_environment)!=null&&k.trim())&&!!((ee=c.value.assessment_of_effects)!=null&&ee.trim())&&!!c.value.aee_inline_confirmed:!0;case 11:if(L.value){const Ae=c.value.declaration_rma_compliance&&c.value.declaration_public_information&&c.value.declaration_authorized,At=!!((Se=c.value.applicant_signature_first_name)!=null&&Se.trim())&&!!((ge=c.value.applicant_signature_last_name)!=null&&ge.trim())&&!!c.value.applicant_signature_date;return Ae&&At}return!0;default:return!0}}),Nt=$=>le(this,null,function*(){try{const k=yield(yield fetch("/api/method/lodgeick.api.load_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:$})})).json();if(k.message&&k.message.success)c.value=k.message.form_data||{},s.value=k.message.current_step||1,console.log(`Draft loaded successfully. Resuming at step ${s.value}`);else throw new Error(k.message||"Failed to load draft")}catch(n){console.error("Error loading draft:",n),alert("Failed to load draft. Starting new application.")}}),_t=($=!1)=>le(this,null,function*(){h.value=!0;try{const k=yield(yield fetch("/api/method/lodgeick.api.create_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({data:c.value,current_step:s.value,total_steps:S.value})})).json();if(k.message&&k.message.success)return k.message.request_id&&!c.value.request_id&&(c.value.request_id=k.message.request_id),alert(`Draft saved successfully! Request ID: ${k.message.request_number}`),$&&q.push({name:"Dashboard"}),k.message;throw new Error(k.message||"Failed to save draft")}catch(n){return console.error("Error saving draft:",n),alert("Failed to save draft. Please try again."),null}finally{h.value=!1}}),ht=()=>{var n;const $=(n=V.councils)==null?void 0:n.find(k=>k.council_code===c.value.council);return($==null?void 0:$.council_name)||"Council"},Lt=()=>{var n;const $=(n=we.data)==null?void 0:n.find(k=>k.name===c.value.request_type);return($==null?void 0:$.type_name)||"N/A"},Ft=()=>{var n;const $=(n=we.data)==null?void 0:n.find(k=>k.name===c.value.request_type);return $!=null&&$.base_fee?`$${$.base_fee}`:"TBD"},wt=()=>{ut.value&&s.value++},kt=()=>{if(!a.value||A.value.length===0)return null;const $=b.value.findIndex(k=>k.title==="Process Info"),n=s.value-$-1;return n>=0&&n<A.value.length?A.value[n]:null},he=()=>{const $=s.value>=0&&s.value<b.value.length?b.value[s.value].title:"";return console.log("[getCurrentStepTitle] currentStep:",s.value,"title:",$,"allSteps:",b.value.map(n=>n.title).join("  ")),$},Ht=()=>le(this,null,function*(){yield Ot()}),Ot=()=>le(this,null,function*(){if(!c.value.declaration_rma_compliance||!c.value.declaration_public_information||!c.value.declaration_authorized){alert("Please confirm all three statutory declarations before submitting your application");return}P.value=!0;try{const n=yield(yield fetch("/api/method/lodgeick.api.create_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({data:c.value})})).json();if(!n.message||!n.message.success)throw new Error("Failed to create request");const k=n.message.request_id;if(x.value.length>0)for(const ge of x.value){const Ae=new FormData;Ae.append("file",ge),Ae.append("doctype","Request"),Ae.append("docname",k),Ae.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:Ae})}if(c.value.certificate_of_title_document){const ge=new FormData;ge.append("file",c.value.certificate_of_title_document),ge.append("doctype","Request"),ge.append("docname",k),ge.append("fieldname","certificate_of_title_document"),ge.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:ge})}if(c.value.aee_document){const ge=new FormData;ge.append("file",c.value.aee_document),ge.append("doctype","Resource Consent Application"),ge.append("docname",k),ge.append("fieldname","aee_document"),ge.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:ge})}const Se=yield(yield fetch("/api/method/lodgeick.lodgeick.doctype.request.request.submit_application",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:k})})).json();if(Se.message&&Se.message.success)alert(`Application submitted successfully! Request Number: ${Se.message.request_number}`),q.push({name:"Dashboard"});else throw new Error("Failed to submit application")}catch($){console.error("Error submitting application:",$),alert("Failed to submit application")}finally{P.value=!1}});U(null);const pt=U(!1),Ye=U(null),ne=U({party_name:"",relationship:"",property_address:"",email:"",phone:"",postal_address:"",approval_obtained:!1,approval_date:"",approval_document:null,comments:""}),Wt=()=>{if(!ne.value.party_name||!ne.value.relationship){alert("Please enter party name and relationship");return}Ye.value!==null?c.value.affected_parties[Ye.value]=N({},ne.value):c.value.affected_parties.push(N({},ne.value)),pt.value=!1},ct=()=>{pt.value=!1},Qt=$=>{const n=$.target.files[0];if(n){if(n.size>10*1024*1024){alert("File size must be less than 10MB"),$.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/jpg","image/png"].includes(n.type)){alert("Only PDF, Word documents, and images (JPG, PNG) are allowed"),$.target.value="";return}ne.value.approval_document=n}},mt=U(!1),Je=U(null),me=U({report_type:"",specialist_name:"",specialist_company:"",report_date:"",document:null,summary:""}),Gt=()=>{if(!me.value.report_type||!me.value.specialist_name||!me.value.report_date){alert("Please enter report type, specialist name, and report date");return}Je.value!==null?c.value.specialist_reports[Je.value]=N({},me.value):c.value.specialist_reports.push(N({},me.value)),mt.value=!1},gt=()=>{mt.value=!1},Yt=$=>{const n=$.target.files[0];if(n){if(n.size>10*1024*1024){alert("File size must be less than 10MB"),$.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(n.type)){alert("Only PDF and Word documents are allowed"),$.target.value="";return}me.value.document=n}},Ke=U(!1),Pe=U(null),$t=U([]),Jt=U(!1),Ze=U("All"),be=U({condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""}),Ct=["All","General","Timing","Lapse","Review","Financial Contribution","Bonds","Monitoring","Environmental Management","Construction","Operation","Landscape","Ecology","Archaeology","Cultural","Traffic","Parking","Noise","Discharge","Earthworks","Heritage","Water","Coastal","Other"],Xe=H(()=>Ze.value==="All"?$t.value:$t.value.filter($=>$.condition_category===Ze.value)),Kt=$=>{const k={condition_number:(c.value.proposed_conditions.length+1).toString(),condition_category:$.condition_category,condition_text:$.condition_text,compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""};c.value.proposed_conditions.push(k)},Zt=()=>{be.value={condition_number:(c.value.proposed_conditions.length+1).toString(),condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},Pe.value=null},Xt=()=>{if(!be.value.condition_category||!be.value.condition_text){alert("Please enter condition category and text");return}Pe.value!==null?c.value.proposed_conditions[Pe.value]=N({},be.value):c.value.proposed_conditions.push(N({},be.value)),be.value={condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},Pe.value=null},eo=()=>{be.value={condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},Pe.value=null},to=$=>{confirm("Remove this condition?")&&(c.value.proposed_conditions.splice($,1),c.value.proposed_conditions.forEach((n,k)=>{n.condition_number=(k+1).toString()}))};He({url:"lodgeick.api.book_council_meeting",makeParams:$=>$,onSuccess:$=>{$&&$.success?alert(` Council Meeting Request Sent!

Task #${$.task_id} has been created for the planning team.

They will contact you within 2 business days to schedule.`):alert("Meeting request sent successfully! The planning team will contact you soon."),r.value=!1},onError:$=>{console.error("Error requesting meeting:",$),alert("Failed to request council meeting. Please try again or contact the planning team directly."),r.value=!1}});const oo=()=>le(this,null,function*(){try{u.value=!0;const $=yield Fe("lodgeick.api.get_user_profile");t.value=$,$.applicant_type&&!c.value.applicant_type&&(c.value.applicant_type=$.applicant_type),$.phone&&!c.value.applicant_phone&&!c.value.acting_on_behalf&&(c.value.applicant_phone=$.phone),c.value.acting_on_behalf||(c.value.applicant_name=`${$.first_name||""} ${$.last_name||""}`.trim()||$.email,c.value.applicant_email=$.email)}catch($){console.error("Error loading user profile:",$)}finally{u.value=!1}}),so=()=>le(this,null,function*(){try{const $=yield Fe("lodgeick.api.get_user_company_account");$&&(d.value=$)}catch($){console.error("Error loading company account:",$)}});return ae(()=>c.value.submitted_on_behalf_of,$=>{$==="Company"&&d.value?c.value.company_account=d.value.name:c.value.company_account=null}),ae(()=>c.value.acting_on_behalf,$=>{!$&&t.value?(c.value.applicant_name=`${t.value.first_name||""} ${t.value.last_name||""}`.trim()||t.value.email,c.value.applicant_email=t.value.email,t.value.phone&&(c.value.applicant_phone=t.value.phone),t.value.applicant_type&&(c.value.applicant_type=t.value.applicant_type)):$&&(c.value.applicant_name="",c.value.applicant_email="",c.value.applicant_phone="")}),ae(()=>c.value.applicant_phone,($,n)=>le(this,null,function*(){if(!c.value.acting_on_behalf&&t.value&&$&&$!==n&&$!==t.value.phone)try{yield Fe("lodgeick.api.update_user_profile",{phone:$}),t.value.phone=$,console.log("[NewRequest] Phone number saved to profile:",$)}catch(k){console.error("[NewRequest] Error saving phone to profile:",k)}})),ae(()=>c.value.council,($,n)=>{console.log("[NewRequest] formData.council changed from:",n,"to:",$),console.trace("[NewRequest] Stack trace for council change")}),Ve(()=>le(this,null,function*(){console.log("[NewRequest] onMounted - starting initialization"),yield oo(),yield so();const $=_.params.id||_.query.draft_id;if($){yield Nt($);return}console.log("[NewRequest] Before loadLockedCouncil - isCouncilLocked:",V.isCouncilLocked);const n=yield V.loadLockedCouncil();console.log("[NewRequest] After loadLockedCouncil - result:",n),console.log("[NewRequest] After loadLockedCouncil - isCouncilLocked:",V.isCouncilLocked),console.log("[NewRequest] After loadLockedCouncil - lockedCouncil:",V.lockedCouncil);const k=_.query.type;if(console.log("[NewRequest] preselectedType from URL:",k),V.isCouncilLocked)if(console.log("[NewRequest] Council is locked:",V.lockedCouncil),c.value.council=V.lockedCouncil,yield B(V.lockedCouncil),k){console.log("[NewRequest] Request type is pre-selected:",k),c.value.request_type=k;const ee=V.requestTypes.find(Se=>Se.name===k);ee&&(F.value=ee,c.value.request_category=ee.category||"",console.log("[NewRequest] Set selectedRequestTypeDetails:",ee)),yield _e(k),s.value=0}else s.value=0;else if(V.preselectedFromUrl)console.log("[NewRequest] Setting council from URL:",V.preselectedFromUrl),c.value.council=V.preselectedFromUrl,yield B(V.preselectedFromUrl);else{const ee=yield V.getUserCouncils();ee.default_council&&(console.log("[NewRequest] Setting council from user default:",ee.default_council),c.value.council=ee.default_council,yield B(ee.default_council))}console.log("[NewRequest] onMounted - initialization complete"),console.log("  Council:",c.value.council),console.log("  Type:",c.value.request_type),console.log("  Current Step:",s.value)})),($,n)=>(o(),l("div",T1,[e("header",I1,[e("div",B1,[e("div",E1,[e("div",N1,[e("button",{onClick:g,class:"text-gray-500 hover:text-gray-700"},[...n[50]||(n[50]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),e("div",null,[n[51]||(n[51]=e("h1",{class:"text-xl font-bold text-gray-900"},"New Application",-1)),e("p",L1,"Step "+v(s.value+1)+" of "+v(S.value),1)])]),e("div",F1,[re(xe(Dt),{onClick:n[0]||(n[0]=k=>_t(!1)),variant:"outline",theme:"gray",loading:h.value},{default:ke(()=>[...n[52]||(n[52]=[O(" Save Draft ",-1)])]),_:1},8,["loading"]),re(xe(Dt),{onClick:n[1]||(n[1]=k=>_t(!0)),variant:"outline",theme:"gray",loading:h.value},{default:ke(()=>[...n[53]||(n[53]=[O(" Save Draft & Close ",-1)])]),_:1},8,["loading"])])])])]),e("div",H1,[e("div",O1,[e("div",W1,[(o(!0),l(Y,null,J(b.value,(k,ee)=>(o(),l("div",{key:ee,class:Q(["flex items-center",{"flex-1":ee<b.value.length-1}])},[e("div",Q1,[e("div",{class:Q(["w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm",j(ee)])},[ee<s.value?(o(),l("span",G1,"")):(o(),l("span",Y1,v(ee+1),1))],2),e("span",{class:Q(["text-xs mt-2 text-center",ee===s.value?"text-blue-600 font-medium":"text-gray-500"])},v(k.title),3)]),ee<b.value.length-1?(o(),l("div",{key:0,class:Q(["flex-1 h-1 mx-4 rounded",ee<s.value?"bg-blue-600":"bg-gray-200"])},null,2)):y("",!0)],2))),128))])])]),e("main",J1,[e("div",K1,[he()==="Council"?(o(),l("div",Z1,[re(zo,{modelValue:c.value,"onUpdate:modelValue":n[2]||(n[2]=k=>c.value=k),onCouncilChange:B},null,8,["modelValue"])])):y("",!0),he()==="Type"?(o(),l("div",X1,[re(Yo,{modelValue:c.value,"onUpdate:modelValue":n[3]||(n[3]=k=>c.value=k),"request-types":we.value,onTypeSelected:se},null,8,["modelValue","request-types"])])):y("",!0),he()==="Process Info"?(o(),l("div",ey,[re(Vs,{"request-type-details":F.value,"council-name":ht(),modelValue:c.value,"onUpdate:modelValue":n[4]||(n[4]=k=>c.value=k),onContinue:wt},null,8,["request-type-details","council-name","modelValue"])])):y("",!0),a.value&&kt()&&he()!=="Process Info"&&he()!=="Review"?(o(),ue(z1,{key:3,stepConfig:kt(),modelValue:c.value,"onUpdate:modelValue":n[5]||(n[5]=k=>c.value=k)},null,8,["stepConfig","modelValue"])):y("",!0),he()==="Applicant & Proposal"&&L.value&&!a.value?(o(),ue(Ld,{key:4,modelValue:c.value,"onUpdate:modelValue":n[6]||(n[6]=k=>c.value=k),"user-profile":t.value,properties:xe(Ge)},null,8,["modelValue","user-profile","properties"])):y("",!0),he()==="Natural Hazards"&&L.value&&!a.value?(o(),ue(nu,{key:5,modelValue:c.value,"onUpdate:modelValue":n[7]||(n[7]=k=>c.value=k)},null,8,["modelValue"])):y("",!0),he()==="NES Assessment"&&L.value&&!a.value?(o(),ue(Qu,{key:6,modelValue:c.value,"onUpdate:modelValue":n[8]||(n[8]=k=>c.value=k)},null,8,["modelValue"])):y("",!0),he()==="Approvals"&&L.value&&!a.value?(o(),ue(op,{key:7,modelValue:c.value,"onUpdate:modelValue":n[9]||(n[9]=k=>c.value=k)},null,8,["modelValue"])):y("",!0),he()==="Consultation"&&L.value&&!a.value?(o(),ue(Op,{key:8,modelValue:c.value,"onUpdate:modelValue":n[10]||(n[10]=k=>c.value=k)},null,8,["modelValue"])):y("",!0),he()==="Documents"&&L.value&&!a.value?(o(),ue(Hc,{key:9,modelValue:c.value,"onUpdate:modelValue":n[11]||(n[11]=k=>c.value=k)},null,8,["modelValue"])):y("",!0),he()==="AEE"&&L.value&&!a.value?(o(),ue(dm,{key:10,modelValue:c.value,"onUpdate:modelValue":n[12]||(n[12]=k=>c.value=k)},null,8,["modelValue"])):y("",!0),he()==="Submission"&&L.value&&!a.value?(o(),ue(Jm,{key:11,modelValue:c.value,"onUpdate:modelValue":n[13]||(n[13]=k=>c.value=k)},null,8,["modelValue"])):y("",!0),he()==="Review"?(o(),l("div",ty,[re(ob,{modelValue:c.value,"onUpdate:modelValue":n[14]||(n[14]=k=>c.value=k),"council-name":ht(),"request-type-name":Lt(),"application-fee":Ft(),"is-resource-consent":L.value,"step-configs":A.value,"uses-configurable-steps":a.value,"request-type-details":F.value},null,8,["modelValue","council-name","request-type-name","application-fee","is-resource-consent","step-configs","uses-configurable-steps","request-type-details"])])):y("",!0)]),e("div",oy,[s.value>0?(o(),l("button",{key:0,onClick:n[15]||(n[15]=k=>s.value--),class:"px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center"},[...n[54]||(n[54]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),O(" Previous ",-1)])])):(o(),l("div",sy)),s.value<b.value.length-1?(o(),l("button",{key:2,type:"button",onClick:wt,disabled:!ut.value,class:Q(["px-6 py-3 font-medium rounded-lg transition-colors flex items-center",ut.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[...n[55]||(n[55]=[O(" Next ",-1),e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],10,ly)):(o(),l("button",{key:3,onClick:Ht,disabled:!Qe.value||P.value,class:Q(["px-6 py-3 font-medium rounded-lg transition-colors",Qe.value&&!P.value?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[P.value?(o(),l("span",ry,"Submitting...")):(o(),l("span",ny,"Submit Application"))],10,ay))])]),pt.value?(o(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ye(ct,["self"])},[e("div",iy,[e("div",dy,[e("div",uy,[e("h3",py,v(Ye.value!==null?"Edit":"Add")+" Affected Party ",1),e("button",{onClick:ct,class:"text-gray-400 hover:text-gray-600"},[...n[56]||(n[56]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",cy,[e("div",null,[n[57]||(n[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[O(" Party Name "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{"onUpdate:modelValue":n[16]||(n[16]=k=>ne.value.party_name=k),type:"text",required:"",placeholder:"e.g., John Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,ne.value.party_name]])]),e("div",null,[n[59]||(n[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[O(" Relationship "),e("span",{class:"text-red-500"},"*")],-1)),f(e("select",{"onUpdate:modelValue":n[17]||(n[17]=k=>ne.value.relationship=k),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...n[58]||(n[58]=[X('<option value="">Select relationship</option><option value="Adjacent Property Owner">Adjacent Property Owner</option><option value="Neighbor">Neighbor</option><option value="Iwi">Iwi</option><option value="Infrastructure Provider">Infrastructure Provider</option><option value="Other">Other</option>',6)])],512),[[ie,ne.value.relationship]])]),e("div",my,[n[62]||(n[62]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Contact Information",-1)),e("div",gy,[e("div",null,[n[60]||(n[60]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Email",-1)),f(e("input",{"onUpdate:modelValue":n[18]||(n[18]=k=>ne.value.email=k),type:"email",placeholder:"email@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[D,ne.value.email]])]),e("div",null,[n[61]||(n[61]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Phone",-1)),f(e("input",{"onUpdate:modelValue":n[19]||(n[19]=k=>ne.value.phone=k),type:"tel",placeholder:"021 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[D,ne.value.phone]])])])]),e("div",by,[n[67]||(n[67]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Addresses",-1)),e("div",vy,[e("div",null,[n[63]||(n[63]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Property Address",-1)),f(e("textarea",{"onUpdate:modelValue":n[20]||(n[20]=k=>ne.value.property_address=k),rows:"2",placeholder:"123 Main Street, Suburb, City",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[D,ne.value.property_address]]),n[64]||(n[64]=e("p",{class:"mt-1 text-xs text-gray-500"},"The property address affected by this proposal",-1))]),e("div",null,[n[65]||(n[65]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Postal Address",-1)),f(e("textarea",{"onUpdate:modelValue":n[21]||(n[21]=k=>ne.value.postal_address=k),rows:"2",placeholder:"PO Box 123, Suburb, City",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[D,ne.value.postal_address]]),n[66]||(n[66]=e("p",{class:"mt-1 text-xs text-gray-500"},"For correspondence (if different from property address)",-1))])])]),e("div",yy,[n[73]||(n[73]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Written Approval",-1)),e("div",fy,[f(e("input",{type:"checkbox","onUpdate:modelValue":n[22]||(n[22]=k=>ne.value.approval_obtained=k),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,ne.value.approval_obtained]]),n[68]||(n[68]=e("label",{class:"ml-3 text-sm text-gray-700"}," Written approval obtained from this party ",-1))]),ne.value.approval_obtained?(o(),l("div",xy,[e("div",null,[n[69]||(n[69]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Approval Date",-1)),f(e("input",{"onUpdate:modelValue":n[23]||(n[23]=k=>ne.value.approval_date=k),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[D,ne.value.approval_date]])]),e("div",null,[n[71]||(n[71]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Approval Document",-1)),e("input",{type:"file",onChange:Qt,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),n[72]||(n[72]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload written approval (PDF, Word, or image, max 10MB)",-1)),ne.value.approval_document?(o(),l("div",_y,[n[70]||(n[70]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,v(typeof ne.value.approval_document=="object"?ne.value.approval_document.name:"Document attached"),1)])):y("",!0)])])):y("",!0)]),e("div",null,[n[74]||(n[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Comments",-1)),f(e("textarea",{"onUpdate:modelValue":n[24]||(n[24]=k=>ne.value.comments=k),rows:"3",placeholder:"Any additional notes about this party or their concerns...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[D,ne.value.comments]])])]),e("div",hy,[e("button",{onClick:ct,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Wt,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},v(Ye.value!==null?"Update":"Add")+" Party ",1)])])])):y("",!0),mt.value?(o(),l("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ye(gt,["self"])},[e("div",wy,[e("div",ky,[e("div",$y,[e("h3",Cy,v(Je.value!==null?"Edit":"Add")+" Specialist Report ",1),e("button",{onClick:gt,class:"text-gray-400 hover:text-gray-600"},[...n[75]||(n[75]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Ay,[e("div",null,[n[77]||(n[77]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[O(" Report Type "),e("span",{class:"text-red-500"},"*")],-1)),f(e("select",{"onUpdate:modelValue":n[25]||(n[25]=k=>me.value.report_type=k),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...n[76]||(n[76]=[X('<option value="">Select report type</option><option value="Traffic Impact Assessment">Traffic Impact Assessment</option><option value="Acoustic Assessment">Acoustic Assessment</option><option value="Geotechnical Report">Geotechnical Report</option><option value="Ecological Assessment">Ecological Assessment</option><option value="Archaeological Assessment">Archaeological Assessment</option><option value="Landscape Assessment">Landscape Assessment</option><option value="Contaminated Land Assessment">Contaminated Land Assessment</option><option value="Flood Risk Assessment">Flood Risk Assessment</option><option value="Other">Other</option>',10)])],512),[[ie,me.value.report_type]])]),e("div",Vy,[n[80]||(n[80]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Consultant Details",-1)),e("div",Sy,[e("div",null,[n[78]||(n[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[O(" Specialist Name "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{"onUpdate:modelValue":n[26]||(n[26]=k=>me.value.specialist_name=k),type:"text",required:"",placeholder:"e.g., Dr. Jane Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,me.value.specialist_name]])]),e("div",null,[n[79]||(n[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Company/Organization",-1)),f(e("input",{"onUpdate:modelValue":n[27]||(n[27]=k=>me.value.specialist_company=k),type:"text",placeholder:"e.g., ABC Consultants Ltd",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,me.value.specialist_company]])])])]),e("div",My,[n[88]||(n[88]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Report Details",-1)),e("div",qy,[e("div",null,[n[81]||(n[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[O(" Report Date "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{"onUpdate:modelValue":n[28]||(n[28]=k=>me.value.report_date=k),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,me.value.report_date]]),n[82]||(n[82]=e("p",{class:"mt-1 text-xs text-gray-500"},"Date the report was prepared or finalized",-1))]),e("div",null,[n[84]||(n[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[O(" Document "),e("span",{class:"text-red-500"},"*")],-1)),e("input",{type:"file",onChange:Yt,accept:".pdf,.doc,.docx",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),n[85]||(n[85]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload the specialist report (PDF or Word, max 10MB)",-1)),me.value.document?(o(),l("div",Py,[n[83]||(n[83]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,v(typeof me.value.document=="object"?me.value.document.name:"Document attached"),1)])):y("",!0)]),e("div",null,[n[86]||(n[86]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Summary",-1)),f(e("textarea",{"onUpdate:modelValue":n[29]||(n[29]=k=>me.value.summary=k),rows:"4",placeholder:"Brief summary of key findings and recommendations...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[D,me.value.summary]]),n[87]||(n[87]=e("p",{class:"mt-1 text-xs text-gray-500"},"Optional: Provide a brief summary of the report's key findings",-1))])])])]),e("div",Dy,[e("button",{onClick:gt,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Gt,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},v(Je.value!==null?"Update":"Add")+" Report ",1)])])])):y("",!0),M.value?(o(),l("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ye(Ce,["self"])},[e("div",Uy,[e("div",jy,[e("div",Ry,[e("h3",zy,v(E.value!==null?"Edit":"Add")+" HAIL Activity ",1),e("button",{onClick:Ce,class:"text-gray-400 hover:text-gray-600"},[...n[89]||(n[89]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Ty,[e("div",null,[n[90]||(n[90]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[O(" Activity Description "),e("span",{class:"text-red-500"},"*")],-1)),f(e("textarea",{"onUpdate:modelValue":n[30]||(n[30]=k=>G.value.activity_description=k),rows:"3",required:"",placeholder:"Describe the HAIL activity (e.g., Former service station, industrial site)...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,G.value.activity_description]])]),e("div",null,[n[92]||(n[92]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," HAIL Category ",-1)),f(e("select",{"onUpdate:modelValue":n[31]||(n[31]=k=>G.value.hail_category=k),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...n[91]||(n[91]=[X('<option value="">Select HAIL category</option><option value="Category A - Petroleum/Oil Storage">Category A - Petroleum/Oil Storage</option><option value="Category B - Asbestos Products">Category B - Asbestos Products</option><option value="Category C - Chemicals">Category C - Chemicals</option><option value="Category D - Engineering Workshops">Category D - Engineering Workshops</option><option value="Category E - Gasworks/Coke Works">Category E - Gasworks/Coke Works</option><option value="Category F - Horticulture">Category F - Horticulture</option><option value="Category G - Landfills/Waste Disposal">Category G - Landfills/Waste Disposal</option><option value="Category H - Metal Treatment">Category H - Metal Treatment</option><option value="Category I - Timber Treatment">Category I - Timber Treatment</option>',10)])],512),[[ie,G.value.hail_category]])]),e("div",Iy,[n[96]||(n[96]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Activity Status",-1)),e("div",By,[e("div",Ey,[f(e("input",{type:"checkbox",id:"hail-current","onUpdate:modelValue":n[32]||(n[32]=k=>G.value.currently_undertaken=k),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,G.value.currently_undertaken]]),n[93]||(n[93]=e("label",{for:"hail-current",class:"ml-2 text-sm text-gray-700"},"Currently Being Undertaken",-1))]),e("div",Ny,[f(e("input",{type:"checkbox",id:"hail-previous","onUpdate:modelValue":n[33]||(n[33]=k=>G.value.previously_undertaken=k),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,G.value.previously_undertaken]]),n[94]||(n[94]=e("label",{for:"hail-previous",class:"ml-2 text-sm text-gray-700"},"Previously Undertaken",-1))]),e("div",Ly,[f(e("input",{type:"checkbox",id:"hail-likely","onUpdate:modelValue":n[34]||(n[34]=k=>G.value.likely_undertaken=k),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,G.value.likely_undertaken]]),n[95]||(n[95]=e("label",{for:"hail-likely",class:"ml-2 text-sm text-gray-700"},"Likely to Have Been Undertaken",-1))])])]),e("div",Fy,[f(e("input",{type:"checkbox",id:"hail-investigated","onUpdate:modelValue":n[35]||(n[35]=k=>G.value.preliminary_investigation_done=k),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,G.value.preliminary_investigation_done]]),n[97]||(n[97]=e("label",{for:"hail-investigated",class:"ml-2 text-sm text-gray-700"},"Preliminary Investigation Completed",-1))]),e("div",Hy,[n[103]||(n[103]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Proposed Activities",-1)),e("div",Oy,[e("div",Wy,[f(e("input",{type:"checkbox",id:"hail-activity-fuel","onUpdate:modelValue":n[36]||(n[36]=k=>te.value.fuel=k),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,te.value.fuel]]),n[98]||(n[98]=e("label",{for:"hail-activity-fuel",class:"ml-2 text-sm text-gray-700"},"Removing or replacing fuel storage system",-1))]),e("div",Qy,[f(e("input",{type:"checkbox",id:"hail-activity-disturb","onUpdate:modelValue":n[37]||(n[37]=k=>te.value.disturb=k),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,te.value.disturb]]),n[99]||(n[99]=e("label",{for:"hail-activity-disturb",class:"ml-2 text-sm text-gray-700"},"Disturbing soil",-1))]),e("div",Gy,[f(e("input",{type:"checkbox",id:"hail-activity-sample","onUpdate:modelValue":n[38]||(n[38]=k=>te.value.sample=k),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,te.value.sample]]),n[100]||(n[100]=e("label",{for:"hail-activity-sample",class:"ml-2 text-sm text-gray-700"},"Sampling soil",-1))]),e("div",Yy,[f(e("input",{type:"checkbox",id:"hail-activity-subdivide","onUpdate:modelValue":n[39]||(n[39]=k=>te.value.subdivide=k),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,te.value.subdivide]]),n[101]||(n[101]=e("label",{for:"hail-activity-subdivide",class:"ml-2 text-sm text-gray-700"},"Subdividing land",-1))]),e("div",Jy,[f(e("input",{type:"checkbox",id:"hail-activity-change","onUpdate:modelValue":n[40]||(n[40]=k=>te.value.change=k),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[oe,te.value.change]]),n[102]||(n[102]=e("label",{for:"hail-activity-change",class:"ml-2 text-sm text-gray-700"},"Changing use of land",-1))])]),n[104]||(n[104]=e("p",{class:"text-xs text-gray-500 mt-2"},"Select all proposed activities that apply",-1))]),e("div",null,[n[105]||(n[105]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Additional Notes",-1)),f(e("textarea",{"onUpdate:modelValue":n[41]||(n[41]=k=>G.value.notes=k),rows:"3",placeholder:"Additional notes about the HAIL activity...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,G.value.notes]])])]),e("div",Ky,[e("button",{onClick:Ce,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:$e,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},v(E.value!==null?"Update":"Add")+" Activity ",1)])])])):y("",!0),Ke.value?(o(),l("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:n[49]||(n[49]=ye(k=>Ke.value=!1,["self"]))},[e("div",Zy,[e("div",Xy,[e("div",ef,[n[107]||(n[107]=e("h3",{class:"text-lg font-semibold text-gray-900"}," Browse Condition Templates ",-1)),e("button",{onClick:n[42]||(n[42]=k=>Ke.value=!1),class:"text-gray-400 hover:text-gray-600"},[...n[106]||(n[106]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",tf,[e("div",of,[e("div",sf,[e("div",lf,[n[108]||(n[108]=e("label",{class:"text-sm font-medium text-gray-700"},"Filter by Category:",-1)),f(e("select",{"onUpdate:modelValue":n[43]||(n[43]=k=>Ze.value=k),class:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(o(),l(Y,null,J(Ct,k=>e("option",{key:k,value:k},v(k),9,af)),64))],512),[[ie,Ze.value]]),e("span",rf,v(Xe.value.length)+" template"+v(Xe.value.length!==1?"s":""),1)]),Jt.value?(o(),l("div",nf,[...n[109]||(n[109]=[e("svg",{class:"animate-spin h-8 w-8 mx-auto text-blue-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading templates...",-1)])])):Xe.value.length>0?(o(),l("div",df,[(o(!0),l(Y,null,J(Xe.value,k=>(o(),l("div",{key:k.name,class:"p-4 bg-white border border-gray-300 rounded-lg hover:border-blue-400 hover:shadow-sm transition-all"},[e("div",uf,[e("div",pf,[e("div",cf,[e("h4",mf,v(k.template_name),1),k.condition_code?(o(),l("span",gf,v(k.condition_code),1)):y("",!0)]),e("div",bf,[e("span",vf,v(k.condition_category),1),k.timing?(o(),l("span",yf,v(k.timing),1)):y("",!0),k.monitoring_required?(o(),l("span",ff," Monitoring Required ")):y("",!0)]),e("div",{class:"text-xs text-gray-700 line-clamp-3",innerHTML:k.condition_text},null,8,xf)]),e("button",{onClick:ee=>Kt(k),type:"button",class:"ml-3 px-3 py-1.5 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 flex items-center gap-1 flex-shrink-0"},[...n[110]||(n[110]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add ",-1)])],8,_f)])]))),128))])):(o(),l("div",hf,[...n[111]||(n[111]=[e("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-sm text-gray-500"},"No templates found for selected category",-1)])])),e("div",{class:"pt-4 border-t border-gray-200"},[e("button",{onClick:Zt,type:"button",class:"w-full px-4 py-2.5 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 flex items-center justify-center gap-2 border-2 border-dashed border-gray-300"},[...n[112]||(n[112]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Custom Condition ",-1)])])])]),e("div",wf,[e("h4",kf,[n[113]||(n[113]=e("span",null,"Selected Conditions",-1)),e("span",$f,v(c.value.proposed_conditions.length),1)]),c.value.proposed_conditions.length>0?(o(),l("div",Cf,[(o(!0),l(Y,null,J(c.value.proposed_conditions,(k,ee)=>(o(),l("div",{key:ee,class:"p-2 bg-white rounded border border-gray-300 text-xs"},[e("div",Af,[e("div",Vf,[e("span",Sf,v(k.condition_number),1),e("span",Mf,v(k.condition_category),1)]),e("button",{onClick:Se=>to(ee),type:"button",class:"text-red-600 hover:bg-red-50 rounded p-0.5",title:"Remove"},[...n[114]||(n[114]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,qf)]),e("div",{class:"text-gray-700 line-clamp-2",innerHTML:k.condition_text},null,8,Pf)]))),128))])):(o(),l("div",Df,[...n[115]||(n[115]=[e("svg",{class:"w-8 h-8 mx-auto text-gray-300 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),O(" No conditions selected ",-1)])]))])]),Pe.value!==null||be.value.condition_text||be.value.condition_category?(o(),l("div",Uf,[e("h4",jf,v(Pe.value!==null?"Edit":"Add Custom")+" Condition ",1),e("div",Rf,[e("div",null,[n[116]||(n[116]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[O(" Condition Number "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{"onUpdate:modelValue":n[44]||(n[44]=k=>be.value.condition_number=k),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1"},null,512),[[D,be.value.condition_number]])]),e("div",null,[n[118]||(n[118]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[O(" Category "),e("span",{class:"text-red-500"},"*")],-1)),f(e("select",{"onUpdate:modelValue":n[45]||(n[45]=k=>be.value.condition_category=k),class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[n[117]||(n[117]=e("option",{value:""},"Select category",-1)),(o(!0),l(Y,null,J(Ct.filter(k=>k!=="All"),k=>(o(),l("option",{key:k,value:k},v(k),9,zf))),128))],512),[[ie,be.value.condition_category]])])]),e("div",Tf,[n[119]||(n[119]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[O(" Condition Text "),e("span",{class:"text-red-500"},"*")],-1)),f(e("textarea",{"onUpdate:modelValue":n[46]||(n[46]=k=>be.value.condition_text=k),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter the condition text..."},null,512),[[D,be.value.condition_text]])]),e("div",null,[n[120]||(n[120]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Notes",-1)),f(e("textarea",{"onUpdate:modelValue":n[47]||(n[47]=k=>be.value.compliance_notes=k),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional notes about this condition..."},null,512),[[D,be.value.compliance_notes]])]),e("div",If,[e("button",{onClick:eo,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Xt,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},v(Pe.value!==null?"Update":"Add")+" Condition ",1)])])):y("",!0)]),e("div",Bf,[e("button",{onClick:n[48]||(n[48]=k=>Ke.value=!1),type:"button",class:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"}," Done ")])])])):y("",!0)]))}};export{Hf as default};
//# sourceMappingURL=NewRequest-BNc9ph1a.js.map
