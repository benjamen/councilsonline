const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SendMessageModal-CurQSFUd.js","assets/index-CW-VPd7V.js","assets/index-BlUHqveC.css","assets/BookMeetingModal-IPtqYYXT.js"])))=>i.map(i=>d[i]);
var Nt=Object.defineProperty;var ot=Object.getOwnPropertySymbols;var Pt=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable;var rt=(v,p,m)=>p in v?Nt(v,p,{enumerable:!0,configurable:!0,writable:!0,value:m}):v[p]=m,U=(v,p)=>{for(var m in p||(p={}))Pt.call(p,m)&&rt(v,m,p[m]);if(ot)for(var m of ot(p))jt.call(p,m)&&rt(v,m,p[m]);return v};var P=(v,p,m)=>new Promise((A,N)=>{var T=_=>{try{C(m.next(_))}catch(M){N(M)}},F=_=>{try{C(m.throw(_))}catch(M){N(M)}},C=_=>_.done?A(_.value):Promise.resolve(_.value).then(T,F);C((m=m.apply(v,p)).next())});import{B as Bt,f as Ft,r as q,n as I,E as nt,j as O,c as i,o as r,b as S,a as t,d as l,w as f,y as R,u as s,i as D,h as w,t as n,A as V,F as j,l as B,g as Rt,x as Tt,J as it,K as lt}from"./index-CW-VPd7V.js";import{_ as dt}from"./StatusBadge-BWCKEC5C.js";import{_ as Lt}from"./RequestHeader-Ccye1pcx.js";import{u as Et}from"./useStatutoryClock-D2L_niL6.js";const $t={class:"min-h-screen bg-gray-50"},It={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Ot={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Vt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},zt={class:"lg:col-span-2 space-y-6"},Ht={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ut={class:"grid grid-cols-2 gap-4"},Jt={class:"mt-1 text-sm text-gray-900"},Yt={class:"mt-1 text-sm text-gray-900"},Xt={class:"mt-1"},Zt={class:"mt-1 text-sm text-gray-900"},Kt={class:"mt-6 pt-6 border-t border-gray-200"},Qt={class:"mt-1 text-sm text-gray-900"},Gt={class:"mt-4"},Wt=["innerHTML"],te={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ee={class:"grid grid-cols-2 gap-4"},se={key:0},ae={class:"mt-1 text-sm text-gray-900"},oe={key:1},re={class:"mt-1 text-sm text-gray-900"},ne={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ie={class:"grid grid-cols-2 gap-4"},le={class:"mt-1 text-sm text-gray-900"},de={class:"mt-1 text-sm text-gray-900"},ue={class:"mt-1 text-sm text-gray-900"},me={class:"mt-1 text-sm text-gray-900"},ce={key:0},pe={class:"mt-1 text-sm text-gray-900"},ge={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ye={class:"space-y-6"},fe={class:"grid grid-cols-2 gap-4"},xe={class:"mt-1 text-sm text-gray-900"},_e={class:"mt-1 text-sm text-gray-900"},be={class:"mt-1 text-sm text-gray-900"},ve={class:"mt-1 text-sm text-gray-900"},he={class:"grid grid-cols-2 gap-4"},we={class:"mt-1 text-sm text-gray-900"},ke={class:"mt-1 text-sm text-gray-900"},Ce={class:"mt-1 text-sm text-gray-900"},Me={class:"mt-1 text-sm text-gray-900"},qe={class:"mt-1 text-sm text-gray-900"},Se={class:"grid grid-cols-2 gap-4"},De={key:0},Ae={class:"mt-1 text-sm text-gray-900"},Ne={key:1},Pe={class:"mt-1 text-sm text-gray-900"},je={key:2},Be={class:"mt-1 text-sm text-gray-900"},Fe={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Re={class:"grid grid-cols-2 gap-4"},Te={key:0},Le={class:"mt-1 text-sm text-gray-900"},Ee={key:1},$e={class:"mt-1 text-sm text-gray-900"},Ie={key:2},Oe={class:"mt-1 text-sm text-gray-900"},Ve={key:3},ze={class:"mt-1 text-sm text-gray-900"},He={key:4,class:"col-span-2"},Ue={class:"mt-1 text-sm text-gray-900"},Je={key:3,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ye={class:"flex justify-between items-start mb-4"},Xe={key:0,class:"space-y-4"},Ze={class:"grid grid-cols-2 gap-3 text-sm"},Ke={class:"ml-2 text-gray-900"},Qe={class:"ml-2 text-gray-900"},Ge={key:0,class:"col-span-2"},We={class:"ml-2 text-gray-900"},ts={key:1,class:"col-span-2"},es={class:"ml-2 text-gray-900"},ss={key:2,class:"col-span-2"},as={class:"ml-2 text-gray-900"},os={key:3,class:"col-span-2"},rs=["href"],ns={key:0,class:"mt-3 pt-3 border-t border-blue-200"},is={class:"mt-1 text-sm text-gray-900"},ls={key:1,class:"mt-3 pt-3 border-t border-blue-200"},ds={class:"mt-2 space-y-1"},us={key:2,class:"mt-4 pt-3 border-t border-blue-200 flex space-x-3"},ms=["onClick"],cs=["onClick","disabled"],ps={key:1,class:"text-center py-6"},gs={class:"text-lg font-semibold text-gray-900 mb-4"},ys={class:"space-y-4"},fs={key:0,class:"text-md font-medium text-gray-700 mb-3"},xs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_s={class:"text-sm font-medium text-gray-500"},bs={class:"mt-1 text-sm text-gray-900"},vs={key:0,class:"text-gray-500 text-sm"},hs={key:5,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ws={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ks={class:"text-sm font-medium text-gray-500"},Cs={class:"mt-1 text-sm text-gray-900"},Ms={key:6,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},qs={class:"flex justify-between items-center mb-4"},Ss={class:"space-y-3"},Ds={class:"flex justify-between items-center py-2 border-b border-gray-100"},As={class:"text-sm font-semibold text-gray-900"},Ns={class:"flex justify-between items-center py-2 border-b border-gray-100"},Ps={class:"text-sm font-semibold text-green-600"},js={class:"flex justify-between items-center py-2"},Bs={class:"text-sm font-bold text-orange-600"},Fs={key:7,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Rs={class:"flex justify-between items-center mb-4"},Ts={class:"space-y-3"},Ls={class:"flex justify-between items-center py-2 border-b border-gray-100"},Es={class:"text-sm font-semibold text-gray-900"},$s={class:"flex justify-between items-center py-2 border-b border-gray-100"},Is={key:0,class:"flex justify-between items-center py-2"},Os={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Vs={class:"flex justify-between items-center mb-4"},zs={key:0,class:"text-center py-8"},Hs={class:"space-y-6"},Us={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Js={key:0,class:"mb-6 p-4 bg-blue-50 rounded-lg"},Ys={class:"flex items-center justify-between mb-2"},Xs={class:"text-xs text-blue-700"},Zs={class:"w-full bg-blue-200 rounded-full h-2"},Ks={class:"mt-2 text-xs text-blue-700"},Qs={class:"space-y-4"},Gs={class:"flex items-start space-x-3"},Ws={class:"flex-1"},ta={class:"text-xs text-gray-500"},ea={key:0,class:"flex items-start space-x-3"},sa={class:"flex-1"},aa={class:"text-xs text-gray-500"},oa={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ra={class:"space-y-3"},na={class:"bg-blue-50 rounded-lg border border-blue-200 p-6"},ia={class:"text-xs text-blue-800 mb-4"},la={key:0,class:"text-xs text-blue-800"},da={key:1,class:"space-y-2 text-xs text-blue-900"},ua={key:0,class:"flex items-center space-x-2"},ma=["href"],ca={key:1,class:"flex items-center space-x-2"},pa=["href"],ba={__name:"RequestDetail",setup(v){const p=it(()=>lt(()=>import("./SendMessageModal-CurQSFUd.js"),__vite__mapDeps([0,1,2]))),m=it(()=>lt(()=>import("./BookMeetingModal-IPtqYYXT.js"),__vite__mapDeps([3,1,2]))),A=Bt(),N=Ft(),T=q(null),F=q(!1),C=q(!1),_=q(!1),M=q(!1),z=q(!1),L=q(!1),a=I({url:"frappe.client.get",params:{doctype:"Request",name:A.params.id},auto:!0}),g=I({url:"lodgeick.api.get_request_meetings",params:{request_id:A.params.id},auto:!0}),b=I({url:"lodgeick.api.get_request_type_config",auto:!1}),h=I({url:"frappe.client.get",auto:!1});nt(()=>{var o;return(o=a.data)==null?void 0:o.request_type},o=>{o&&b.fetch({request_type_code:o})},{immediate:!0}),nt(()=>{var o;return(o=a.data)==null?void 0:o.council},o=>{o&&h.fetch({doctype:"Council",name:o,fields:["name","council_name","contact_email","contact_phone"]})},{immediate:!0});const{clockData:E,progressPercent:ut}=Et(a),H=O(()=>{if(!a.data)return{};try{let o=null;if(a.data.draft_full_data&&(o=typeof a.data.draft_full_data=="string"?JSON.parse(a.data.draft_full_data):a.data.draft_full_data),!o)return{};const e=["name","owner","creation","modified","modified_by","docstatus","idx","council","request_type","request_number","status","requester","requester_name","requester_email","requester_phone","requester_signature","applicant_address","applicant_company","property","property_address","legal_description","brief_description","detailed_description","delivery_preference","invoice_to","invoice_recipient_name","invoice_recipient_email","purchase_order_number","total_fees","total_paid","payment_status","request_category","draft_current_step","draft_total_steps","draft_full_data","form_data","signature_date"],c={};return Object.keys(o).forEach(u=>{!e.includes(u)&&o[u]!==null&&o[u]!==""&&(c[u]=o[u])}),c}catch(o){return console.error("Error parsing form data:",o),{}}}),x=O(()=>{if(!a.data)return{};try{let o={};return a.data.draft_full_data&&(o=typeof a.data.draft_full_data=="string"?JSON.parse(a.data.draft_full_data):a.data.draft_full_data),U(U({},a.data),o)}catch(o){return console.error("Error merging form data:",o),a.data}}),J=O(()=>{var o;return(o=b.data)!=null&&o.steps?b.data.steps.filter(e=>e.show_on_review):[]}),mt=O(()=>{var o,e;return!!((o=x.value)!=null&&o.property_address||(e=b.data)!=null&&e.property_required)}),ct=o=>{if(!o.sections)return!1;for(const e of o.sections)if(e.show_on_review){for(const c of e.fields)if(c.show_on_review&&a.data[c.field_name])return!0}return!1},pt=(o,e)=>{if(e==null||e==="")return"Not provided";if(o.field_type==="Check")return e?"Yes":"No";if(o.field_type==="Date"&&e)try{return new Date(e).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(c){return e}return o.field_type==="Currency"&&e?`$${Number.parseFloat(e).toFixed(2)}`:Array.isArray(e)?e.join(", "):e},gt=o=>o.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),yt=o=>{if(o==null||o==="")return"Not provided";if(typeof o=="boolean")return o?"Yes":"No";if(Array.isArray(o))return o.join(", ");if(typeof o=="object")return JSON.stringify(o);if(typeof o=="string"&&/^\d{4}-\d{2}-\d{2}/.test(o))try{return new Date(o).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(e){return o}return o},ft=()=>{N.push({name:"Dashboard"})},Y=o=>{if(!o)return"Not scheduled";try{return new Date(o).toLocaleString("en-NZ",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return o}},$=o=>o?new Date(o).toLocaleDateString("en-NZ",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",xt=()=>{T.value.click()},_t=o=>P(this,null,function*(){const e=Array.from(o.target.files);if(e.length!==0){F.value=!0;try{for(const c of e){const u=new FormData;u.append("file",c),u.append("doctype","Request"),u.append("docname",a.data.name),u.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:u})}alert(`${e.length} document(s) uploaded successfully!`),a.reload(),o.target.value=""}catch(c){console.error("Error uploading file:",c),alert("Failed to upload document. Please try again.")}finally{F.value=!1}}}),bt=()=>{z.value=!0},vt=()=>{a.reload()},ht=()=>{window.print()},wt=()=>{if(!a.data){alert("Error: Request data not loaded");return}if(!a.data.request_type){alert("Error: Request type missing");return}const o=`/request/new?type=${encodeURIComponent(a.data.request_type)}&draft=${encodeURIComponent(a.data.name)}`;N.push(o)},kt=()=>P(this,null,function*(){if(confirm("Are you sure you want to delete this draft application? This action cannot be undone.")){_.value=!0;try{yield fetch("/api/method/frappe.client.delete",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({doctype:"Request",name:a.data.name})}),alert("Draft deleted successfully"),N.push({name:"Dashboard"})}catch(o){console.error("Error deleting draft:",o),alert("Failed to delete draft. Please try again.")}finally{_.value=!1}}}),Ct=()=>P(this,null,function*(){if(confirm("Are you sure you want to submit this application? Once submitted, it cannot be edited.")){C.value=!0;try{const e=yield(yield fetch("/api/method/lodgeick.lodgeick.doctype.request.request.submit_application",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:a.data.name})})).json();if(e.message&&e.message.success)alert(`Application submitted successfully! Request Number: ${e.message.request_number}`),a.reload();else throw new Error("Failed to submit application")}catch(o){console.error("Error submitting application:",o),alert("Failed to submit application. Please try again.")}finally{C.value=!1}}}),Mt=()=>{alert(`Payment feature - Coming soon!

You will receive an invoice via email.`)},qt=()=>{L.value=!0},St=o=>P(this,null,function*(){alert(`Meeting request submitted successfully!

Meeting ID: ${o.meeting_id}
Status: ${o.status}

A council planner will contact you within 2 business days.`),yield g.reload()}),Dt=o=>{L.value=!0,alert(`Edit meeting functionality - opening booking modal.

Note: You can submit a new request with updated time slots. The previous request will be updated.`)},At=o=>P(this,null,function*(){var e;if(confirm(`Are you sure you want to cancel this meeting request?

Meeting Type: ${o.meeting_type}
Status: ${o.status}

This action cannot be undone.`)){M.value=!0;try{const u=yield(yield fetch("/api/method/lodgeick.api.cancel_meeting",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({meeting_id:o.name})})).json();if(u.message&&u.message.success)alert("Meeting cancelled successfully."),yield g.reload();else throw new Error(((e=u.message)==null?void 0:e.error)||"Failed to cancel meeting")}catch(c){console.error("Error cancelling meeting:",c),alert(`Failed to cancel meeting: ${c.message}

Please try again or contact support.`)}finally{M.value=!1}}});return(o,e)=>{var c,u,X,Z,K,Q,G,W,tt,et,st,at;return r(),i("div",$t,[S(Lt,{title:((c=s(a).data)==null?void 0:c.request_number)||"Loading...",subtitle:(u=s(a).data)==null?void 0:u.request_type,loading:s(a).loading,onBack:ft},{actions:f(()=>{var d;return[s(a).data?(r(),R(dt,{key:0,status:s(a).data.workflow_state},null,8,["status"])):l("",!0),((d=s(a).data)==null?void 0:d.workflow_state)==="Draft"?(r(),R(s(D),{key:1,onClick:Ct,variant:"solid",theme:"blue",loading:C.value},{default:f(()=>[...e[2]||(e[2]=[w(" Submit Application ",-1)])]),_:1},8,["loading"])):l("",!0)]}),_:1},8,["title","subtitle","loading"]),t("input",{ref_key:"fileInput",ref:T,type:"file",multiple:"",class:"hidden",onChange:_t},null,544),s(a).loading?(r(),i("div",It,[...e[3]||(e[3]=[t("div",{class:"text-center"},[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t("p",{class:"mt-4 text-gray-500"},"Loading request details...")],-1)])])):s(a).data?(r(),i("div",Ot,[t("div",Vt,[t("div",zt,[t("div",Ht,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Application Overview",-1)),t("div",Ut,[t("div",null,[e[4]||(e[4]=t("label",{class:"text-sm font-medium text-gray-500"},"Request Number",-1)),t("p",Jt,n(s(a).data.request_number),1)]),t("div",null,[e[5]||(e[5]=t("label",{class:"text-sm font-medium text-gray-500"},"Type",-1)),t("p",Yt,n(s(a).data.request_type),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("div",Xt,[S(dt,{status:s(a).data.workflow_state},null,8,["status"])])]),t("div",null,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-500"},"Submitted Date",-1)),t("p",Zt,n($(s(a).data.creation)),1)])]),t("div",Kt,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-500"},"Brief Description",-1)),t("p",Qt,n(s(a).data.brief_description||"N/A"),1)]),t("div",Gt,[e[9]||(e[9]=t("label",{class:"text-sm font-medium text-gray-500"},"Detailed Description",-1)),t("div",{class:"mt-1 text-sm text-gray-900 prose prose-sm max-w-none",innerHTML:s(a).data.detailed_description||"N/A"},null,8,Wt)])]),mt.value?(r(),i("div",te,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Property Information",-1)),t("div",ee,[x.value.property_address?(r(),i("div",se,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),t("p",ae,n(x.value.property_address),1)])):l("",!0),x.value.legal_description?(r(),i("div",oe,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-gray-500"},"Legal Description",-1)),t("p",re,n(x.value.legal_description),1)])):l("",!0)])])):l("",!0),t("div",ne,[e[19]||(e[19]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Applicant Information",-1)),t("div",ie,[t("div",null,[e[14]||(e[14]=t("label",{class:"text-sm font-medium text-gray-500"},"Name",-1)),t("p",le,n(x.value.requester_name||"N/A"),1)]),t("div",null,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),t("p",de,n(x.value.requester_email||"N/A"),1)]),t("div",null,[e[16]||(e[16]=t("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),t("p",ue,n(x.value.requester_phone||"N/A"),1)]),t("div",null,[e[17]||(e[17]=t("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),t("p",me,n(x.value.applicant_address||"N/A"),1)]),x.value.applicant_company?(r(),i("div",ce,[e[18]||(e[18]=t("label",{class:"text-sm font-medium text-gray-500"},"Company/Organization",-1)),t("p",pe,n(x.value.applicant_company),1)])):l("",!0)])]),(Z=(X=s(a).data)==null?void 0:X.request_type)!=null&&Z.includes("SPISC")&&s(a).data.application_name?(r(),i("div",ge,[e[35]||(e[35]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"SPISC Application Details",-1)),t("div",ye,[t("div",null,[e[24]||(e[24]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Personal Information",-1)),t("div",fe,[t("div",null,[e[20]||(e[20]=t("label",{class:"text-sm font-medium text-gray-500"},"Birth Date",-1)),t("p",xe,n($(s(a).data.birth_date)||"N/A"),1)]),t("div",null,[e[21]||(e[21]=t("label",{class:"text-sm font-medium text-gray-500"},"Age",-1)),t("p",_e,n(s(a).data.age||"N/A"),1)]),t("div",null,[e[22]||(e[22]=t("label",{class:"text-sm font-medium text-gray-500"},"Sex",-1)),t("p",be,n(s(a).data.sex||"N/A"),1)]),t("div",null,[e[23]||(e[23]=t("label",{class:"text-sm font-medium text-gray-500"},"Civil Status",-1)),t("p",ve,n(s(a).data.civil_status||"N/A"),1)])])]),t("div",null,[e[30]||(e[30]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Household & Economic Information",-1)),t("div",he,[t("div",null,[e[25]||(e[25]=t("label",{class:"text-sm font-medium text-gray-500"},"Household Size",-1)),t("p",we,n(s(a).data.household_size||"N/A"),1)]),t("div",null,[e[26]||(e[26]=t("label",{class:"text-sm font-medium text-gray-500"},"Living Arrangement",-1)),t("p",ke,n(s(a).data.living_arrangement||"N/A"),1)]),t("div",null,[e[27]||(e[27]=t("label",{class:"text-sm font-medium text-gray-500"},"Monthly Income",-1)),t("p",Ce,"â‚±"+n(s(a).data.monthly_income||"0"),1)]),t("div",null,[e[28]||(e[28]=t("label",{class:"text-sm font-medium text-gray-500"},"Income Source",-1)),t("p",Me,n(s(a).data.income_source||"N/A"),1)]),t("div",null,[e[29]||(e[29]=t("label",{class:"text-sm font-medium text-gray-500"},"4Ps Beneficiary",-1)),t("p",qe,n(s(a).data.is_4ps_beneficiary?"Yes":"No"),1)])])]),t("div",null,[e[34]||(e[34]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Identity Documents",-1)),t("div",Se,[s(a).data.philsys_id?(r(),i("div",De,[e[31]||(e[31]=t("label",{class:"text-sm font-medium text-gray-500"},"PhilSys ID",-1)),t("p",Ae,n(s(a).data.philsys_id),1)])):l("",!0),s(a).data.sss_number?(r(),i("div",Ne,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-gray-500"},"SSS Number",-1)),t("p",Pe,n(s(a).data.sss_number),1)])):l("",!0),s(a).data.osca_id?(r(),i("div",je,[e[33]||(e[33]=t("label",{class:"text-sm font-medium text-gray-500"},"OSCA ID",-1)),t("p",Be,n(s(a).data.osca_id),1)])):l("",!0)])])])])):l("",!0),(K=s(b).data)!=null&&K.collect_payment?(r(),i("div",Fe,[e[41]||(e[41]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Delivery & Payment Preferences",-1)),t("div",Re,[s(a).data.delivery_preference?(r(),i("div",Te,[e[36]||(e[36]=t("label",{class:"text-sm font-medium text-gray-500"},"Delivery Preference",-1)),t("p",Le,n(s(a).data.delivery_preference),1)])):l("",!0),s(a).data.invoice_to?(r(),i("div",Ee,[e[37]||(e[37]=t("label",{class:"text-sm font-medium text-gray-500"},"Invoice To",-1)),t("p",$e,n(s(a).data.invoice_to),1)])):l("",!0),s(a).data.invoice_recipient_name?(r(),i("div",Ie,[e[38]||(e[38]=t("label",{class:"text-sm font-medium text-gray-500"},"Invoice Recipient Name",-1)),t("p",Oe,n(s(a).data.invoice_recipient_name),1)])):l("",!0),s(a).data.invoice_recipient_email?(r(),i("div",Ve,[e[39]||(e[39]=t("label",{class:"text-sm font-medium text-gray-500"},"Invoice Recipient Email",-1)),t("p",ze,n(s(a).data.invoice_recipient_email),1)])):l("",!0),s(a).data.purchase_order_number?(r(),i("div",He,[e[40]||(e[40]=t("label",{class:"text-sm font-medium text-gray-500"},"Purchase Order Number",-1)),t("p",Ue,n(s(a).data.purchase_order_number),1)])):l("",!0)])])):l("",!0),(Q=s(b).data)!=null&&Q.council_meeting_available?(r(),i("div",Je,[t("div",Ye,[e[42]||(e[42]=t("div",null,[t("h2",{class:"text-lg font-semibold text-gray-900"},"Council Meeting"),t("p",{class:"text-sm text-gray-600 mt-1"}," Schedule a meeting with council planners to discuss your application ")],-1)),s(g).data&&s(g).data.length>0?(r(),i("span",{key:0,class:V(["px-3 py-1 rounded-full text-sm font-medium",{"bg-yellow-100 text-yellow-800":s(g).data[0].status==="Requested","bg-blue-100 text-blue-800":s(g).data[0].status==="Scheduled"||s(g).data[0].status==="Confirmed","bg-green-100 text-green-800":s(g).data[0].status==="Completed","bg-gray-100 text-gray-800":s(g).data[0].status==="Cancelled"}])},n(s(g).data[0].status),3)):l("",!0)]),s(g).data&&s(g).data.length>0?(r(),i("div",Xe,[(r(!0),i(j,null,B(s(g).data,d=>(r(),i("div",{key:d.name,class:"border-l-4 border-blue-500 bg-blue-50 p-4 rounded"},[t("div",Ze,[t("div",null,[e[43]||(e[43]=t("span",{class:"font-medium text-gray-700"},"Type:",-1)),t("span",Ke,n(d.meeting_type),1)]),t("div",null,[e[44]||(e[44]=t("span",{class:"font-medium text-gray-700"},"Status:",-1)),t("span",Qe,n(d.status),1)]),d.scheduled_start?(r(),i("div",Ge,[e[45]||(e[45]=t("span",{class:"font-medium text-gray-700"},"Scheduled:",-1)),t("span",We,n(Y(d.scheduled_start)),1)])):l("",!0),d.meeting_format?(r(),i("div",ts,[e[46]||(e[46]=t("span",{class:"font-medium text-gray-700"},"Format:",-1)),t("span",es,n(d.meeting_format),1)])):l("",!0),d.meeting_location?(r(),i("div",ss,[e[47]||(e[47]=t("span",{class:"font-medium text-gray-700"},"Location:",-1)),t("span",as,n(d.meeting_location),1)])):l("",!0),d.google_meet_link?(r(),i("div",os,[e[48]||(e[48]=t("span",{class:"font-medium text-gray-700"},"Meeting Link:",-1)),t("a",{href:d.google_meet_link,target:"_blank",class:"ml-2 text-blue-600 hover:underline"},"Join Meeting",8,rs)])):l("",!0)]),d.meeting_purpose?(r(),i("div",ns,[e[49]||(e[49]=t("span",{class:"font-medium text-gray-700 text-sm"},"Purpose:",-1)),t("p",is,n(d.meeting_purpose),1)])):l("",!0),d.status==="Requested"&&d.proposed_slots&&d.proposed_slots.length>0?(r(),i("div",ls,[e[51]||(e[51]=t("span",{class:"font-medium text-gray-700 text-sm"},"Proposed Time Slots:",-1)),t("ul",ds,[(r(!0),i(j,null,B(d.proposed_slots,(y,k)=>(r(),i("li",{key:k,class:"text-sm text-gray-900 flex items-center"},[e[50]||(e[50]=t("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),w(" "+n(Y(y)),1)]))),128))])])):l("",!0),d.status==="Requested"||d.status==="Scheduled"?(r(),i("div",us,[t("button",{onClick:y=>Dt(),class:"flex-1 px-4 py-2 bg-white border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm font-medium"},[...e[52]||(e[52]=[t("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),w(" Edit Request ",-1)])],8,ms),t("button",{onClick:y=>At(d),disabled:M.value,class:"flex-1 px-4 py-2 bg-white border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"},[...e[53]||(e[53]=[t("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),w(" Cancel Meeting ",-1)])],8,cs)])):l("",!0)]))),128))])):(r(),i("div",ps,[e[54]||(e[54]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e[55]||(e[55]=t("p",{class:"text-sm text-gray-600 mb-4"}," No meeting scheduled yet. Book a meeting to discuss your application with council planners. ",-1)),t("button",{onClick:qt,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Request Council Meeting ")]))])):l("",!0),J.value.length>0?(r(!0),i(j,{key:4},B(J.value,d=>(r(),i("div",{key:d.step_code,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},[t("h2",gs,n(d.step_title),1),t("div",ys,[(r(!0),i(j,null,B(d.sections.filter(y=>y.show_on_review),y=>(r(),i("div",{key:y.section_code},[y.section_title?(r(),i("h3",fs,n(y.section_title),1)):l("",!0),t("div",xs,[(r(!0),i(j,null,B(y.fields.filter(k=>k.show_on_review),k=>(r(),i("div",{key:k.field_name,class:"border-b border-gray-100 pb-3"},[t("label",_s,n(k.review_label||k.field_label),1),t("p",bs,n(pt(k,x.value[k.field_name])),1)]))),128))])]))),128)),ct(d)?l("",!0):(r(),i("p",vs," No information to display "))])]))),128)):H.value&&Object.keys(H.value).length>0?(r(),i("div",hs,[e[56]||(e[56]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Application Details",-1)),t("div",ws,[(r(!0),i(j,null,B(H.value,(d,y)=>(r(),i("div",{key:y,class:"border-b border-gray-100 pb-3"},[t("label",ks,n(gt(y)),1),t("p",Cs,n(yt(d)),1)]))),128))])])):l("",!0),(G=s(b).data)!=null&&G.collect_payment?(r(),i("div",Ms,[t("div",qs,[e[57]||(e[57]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Fees & Payments",-1)),t("span",{class:V(["text-sm font-medium",s(a).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},n(s(a).data.payment_status||"Unpaid"),3)]),t("div",Ss,[t("div",Ds,[e[58]||(e[58]=t("span",{class:"text-sm text-gray-600"},"Total Fees",-1)),t("span",As,"$"+n((s(a).data.total_fees||0).toFixed(2)),1)]),t("div",Ns,[e[59]||(e[59]=t("span",{class:"text-sm text-gray-600"},"Total Paid",-1)),t("span",Ps,"$"+n((s(a).data.total_paid||0).toFixed(2)),1)]),t("div",js,[e[60]||(e[60]=t("span",{class:"text-sm font-medium text-gray-900"},"Outstanding",-1)),t("span",Bs,"$"+n(((s(a).data.total_fees||0)-(s(a).data.total_paid||0)).toFixed(2)),1)])]),(s(a).data.total_fees||0)>(s(a).data.total_paid||0)?(r(),R(s(D),{key:0,onClick:Mt,variant:"solid",theme:"blue",class:"w-full mt-4"},{default:f(()=>[...e[61]||(e[61]=[w(" Make Payment ",-1)])]),_:1})):l("",!0)])):l("",!0),(W=s(b).data)!=null&&W.make_payment?(r(),i("div",Fs,[t("div",Rs,[e[62]||(e[62]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Payment to be Received",-1)),t("span",{class:V(["text-sm font-medium",s(a).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},n(s(a).data.payment_status||"Pending"),3)]),e[66]||(e[66]=Rt('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mt-0.5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="flex-1"><p class="text-sm font-medium text-blue-900">Benefit Payment Information</p><p class="text-sm text-blue-700 mt-1"> Once your application is approved, you will receive payment from the council. Please ensure your bank details are up to date. </p></div></div></div>',1)),t("div",Ts,[t("div",Ls,[e[63]||(e[63]=t("span",{class:"text-sm text-gray-600"},"Benefit Amount",-1)),t("span",Es," $"+n((tt=s(b).data)!=null&&tt.base_fee?s(b).data.base_fee.toFixed(2):"0.00"),1)]),t("div",$s,[e[64]||(e[64]=t("span",{class:"text-sm text-gray-600"},"Payment Status",-1)),t("span",{class:V(["text-sm font-semibold",s(a).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},n(s(a).data.payment_status||"Pending Approval"),3)]),s(a).data.selected_bank_account?(r(),i("div",Is,[...e[65]||(e[65]=[t("span",{class:"text-sm text-gray-600"},"Payment Method",-1),t("span",{class:"text-sm font-medium text-gray-900"},"Bank Transfer",-1)])])):l("",!0)])])):l("",!0),t("div",Os,[t("div",Vs,[e[69]||(e[69]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Documents",-1)),S(s(D),{onClick:xt,variant:"outline",size:"sm",loading:F.value},{prefix:f(()=>[...e[67]||(e[67]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)])]),default:f(()=>[e[68]||(e[68]=w(" Upload Document ",-1))]),_:1},8,["loading"])]),!s(a).data.attachments||s(a).data.attachments.length===0?(r(),i("div",zs,[...e[70]||(e[70]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("p",{class:"mt-2 text-sm text-gray-500"},"No documents uploaded yet",-1)])])):l("",!0)])]),t("div",Hs,[t("div",Us,[e[76]||(e[76]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Processing Timeline",-1)),s(E).statutory_clock_started?(r(),i("div",Js,[t("div",Ys,[e[71]||(e[71]=t("span",{class:"text-sm font-medium text-blue-900"},"SLA / Statutory Clock",-1)),t("span",Xs,n(s(E).working_days_elapsed)+" of 20 days",1)]),t("div",Zs,[t("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Tt({width:`${s(ut)}%`})},null,4)]),t("p",Ks,n(s(E).statutory_clock_stopped?"Clock stopped (RFI issued)":`${s(E).working_days_remaining} days remaining`),1)])):l("",!0),t("div",Qs,[t("div",Gs,[e[73]||(e[73]=t("div",{class:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1)),t("div",Ws,[e[72]||(e[72]=t("p",{class:"text-sm font-medium text-gray-900"},"Application Created",-1)),t("p",ta,n($(s(a).data.creation)),1)])]),s(a).data.modified!==s(a).data.creation?(r(),i("div",ea,[e[75]||(e[75]=t("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})])],-1)),t("div",sa,[e[74]||(e[74]=t("p",{class:"text-sm font-medium text-gray-900"},"Last Updated",-1)),t("p",aa,n($(s(a).data.modified)),1)])])):l("",!0)])]),t("div",oa,[e[85]||(e[85]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),t("div",ra,[s(a).data.workflow_state==="Draft"?(r(),R(s(D),{key:0,onClick:wt,variant:"solid",theme:"blue",class:"w-full justify-start"},{prefix:f(()=>[...e[77]||(e[77]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),default:f(()=>[e[78]||(e[78]=w(" Edit Draft ",-1))]),_:1})):l("",!0),S(s(D),{onClick:bt,variant:"outline",class:"w-full justify-start"},{prefix:f(()=>[...e[79]||(e[79]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)])]),default:f(()=>[e[80]||(e[80]=w(" Send Message ",-1))]),_:1}),S(s(D),{onClick:ht,variant:"outline",class:"w-full justify-start"},{prefix:f(()=>[...e[81]||(e[81]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)])]),default:f(()=>[e[82]||(e[82]=w(" Print Application ",-1))]),_:1}),s(a).data.workflow_state==="Draft"?(r(),R(s(D),{key:1,onClick:kt,variant:"outline",class:"w-full justify-start text-red-600 hover:text-red-700",loading:_.value},{prefix:f(()=>[...e[83]||(e[83]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 1 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),default:f(()=>[e[84]||(e[84]=w(" Delete Draft ",-1))]),_:1},8,["loading"])):l("",!0)])]),t("div",na,[e[88]||(e[88]=t("h3",{class:"text-sm font-semibold text-blue-900 mb-3"},"Need Help?",-1)),t("p",ia,"Contact "+n(((et=s(h).data)==null?void 0:et.council_name)||"the council")+" for assistance with your application.",1),s(h).loading?(r(),i("div",la," Loading contact information... ")):s(h).data?(r(),i("div",da,[s(h).data.contact_email?(r(),i("div",ua,[e[86]||(e[86]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),t("a",{href:`mailto:${s(h).data.contact_email}`,class:"hover:underline"},n(s(h).data.contact_email),9,ma)])):l("",!0),s(h).data.contact_phone?(r(),i("div",ca,[e[87]||(e[87]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),t("a",{href:`tel:${s(h).data.contact_phone}`,class:"hover:underline"},n(s(h).data.contact_phone),9,pa)])):l("",!0)])):l("",!0)])])])])):l("",!0),S(s(p),{show:z.value,"onUpdate:show":e[0]||(e[0]=d=>z.value=d),"request-id":s(A).params.id,onSent:vt},null,8,["show","request-id"]),S(s(m),{show:L.value,"onUpdate:show":e[1]||(e[1]=d=>L.value=d),"request-id":s(A).params.id,"request-type-code":(st=s(b).data)==null?void 0:st.type_code,"council-code":(at=s(a).data)==null?void 0:at.council,onBooked:St},null,8,["show","request-id","request-type-code","council-code"])])}}};export{ba as default};
//# sourceMappingURL=RequestDetail-GJyRx_hu.js.map
