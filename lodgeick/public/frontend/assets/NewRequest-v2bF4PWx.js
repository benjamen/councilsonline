var nt=Object.defineProperty,rt=Object.defineProperties;var it=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var ze=(t,r,c)=>r in t?nt(t,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[r]=c,ee=(t,r)=>{for(var c in r||(r={}))Ne.call(r,c)&&ze(t,c,r[c]);if(xe)for(var c of xe(r))Le.call(r,c)&&ze(t,c,r[c]);return t},De=(t,r)=>rt(t,it(r));var ue=(t,r)=>{var c={};for(var s in t)Ne.call(t,s)&&r.indexOf(s)<0&&(c[s]=t[s]);if(t!=null&&xe)for(var s of xe(t))r.indexOf(s)<0&&Le.call(t,s)&&(c[s]=t[s]);return c};var L=(t,r,c)=>new Promise((s,n)=>{var h=m=>{try{f(c.next(m))}catch(g){n(g)}},p=m=>{try{f(c.throw(m))}catch(g){n(g)}},f=m=>m.done?s(m.value):Promise.resolve(m.value).then(h,p);f((c=c.apply(t,r)).next())});import{r as P,q as se,x as Ie,y as N,z as oe,j as V,A as Ve,B as re,C as ke,E as ut,G as Se,H as Ce,J as dt,K as ce,L as ge,M as Q,N as $e,O as qe,P as ct,Q as He,R as ie,S as fe,T as pt,F as G,U as he,V as mt,W as ft,X as de,Y as te,Z as vt,c as u,o as a,a as e,$ as Ge,t as y,a0 as O,d as b,w as z,h as I,u as T,i as ne,a1 as Ee,f as Be,D as je,l as W,e as me,b as A,a2 as R,g as pe,s as gt,a3 as yt,m as bt,a4 as xt,k as Z,v as ve,a5 as ae,a6 as Ye,a7 as Oe,a8 as ht,a9 as _t,aa as wt,ab as kt}from"./index-Be0s0J4n.js";import{r as _e}from"./request.service-D0fsOmM9.js";import{_ as St}from"./BookMeetingModal-CF6HzoWL.js";import{C as Ct}from"./CouncilSelector-C0aTuB4k.js";function Ue(t,r){if(t)return t;let c=r!=null?r:"button";if(typeof c=="string"&&c.toLowerCase()==="button")return"button"}function We(t,r){let c=P(Ue(t.value.type,t.value.as));return se(()=>{c.value=Ue(t.value.type,t.value.as)}),Ie(()=>{var s;c.value||N(r)&&N(r)instanceof HTMLButtonElement&&!((s=N(r))!=null&&s.hasAttribute("type"))&&(c.value="button")}),c}var $t=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))($t||{});let Je=Symbol("DisclosureContext");function Re(t){let r=ge(Je,null);if(r===null){let c=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,Re),c}return r}let Ke=Symbol("DisclosurePanelContext");function qt(){return ge(Ke,null)}let Vt=oe({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(t,{slots:r,attrs:c}){let s=P(t.defaultOpen?0:1),n=P(null),h=P(null),p={buttonId:P(`headlessui-disclosure-button-${Ce()}`),panelId:P(`headlessui-disclosure-panel-${Ce()}`),disclosureState:s,panel:n,button:h,toggleDisclosure(){s.value=ce(s.value,{0:1,1:0})},closeDisclosure(){s.value!==1&&(s.value=1)},close(f){p.closeDisclosure();let m=f?f instanceof HTMLElement?f:f.value instanceof HTMLElement?N(f):N(p.button):N(p.button);m==null||m.focus()}};return ke(Je,p),dt(V(()=>ce(s.value,{0:Se.Open,1:Se.Closed}))),()=>{let d=t,{defaultOpen:f}=d,m=ue(d,["defaultOpen"]),g={open:s.value===0,close:p.close};return re({theirProps:m,ourProps:{},slot:g,slots:r,attrs:c,name:"Disclosure"})}}}),Dt=oe({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:c,expose:s}){let n=Re("DisclosureButton"),h=qt(),p=V(()=>h===null?!1:h.value===n.panelId.value);se(()=>{p.value||t.id!==null&&(n.buttonId.value=t.id)}),Ve(()=>{p.value||(n.buttonId.value=null)});let f=P(null);s({el:f,$el:f}),p.value||Ie(()=>{n.button.value=f.value});let m=We(V(()=>({as:t.as,type:r.type})),f);function g(){var x;t.disabled||(p.value?(n.toggleDisclosure(),(x=N(n.button))==null||x.focus()):n.toggleDisclosure())}function d(x){var D;if(!t.disabled)if(p.value)switch(x.key){case Q.Space:case Q.Enter:x.preventDefault(),x.stopPropagation(),n.toggleDisclosure(),(D=N(n.button))==null||D.focus();break}else switch(x.key){case Q.Space:case Q.Enter:x.preventDefault(),x.stopPropagation(),n.toggleDisclosure();break}}function v(x){switch(x.key){case Q.Space:x.preventDefault();break}}return()=>{var x;let D={open:n.disclosureState.value===0},l=t,{id:w}=l,i=ue(l,["id"]),o=p.value?{ref:f,type:m.value,onClick:g,onKeydown:d}:{id:(x=n.buttonId.value)!=null?x:w,ref:f,type:m.value,"aria-expanded":n.disclosureState.value===0,"aria-controls":n.disclosureState.value===0||N(n.panel)?n.panelId.value:void 0,disabled:t.disabled?!0:void 0,onClick:g,onKeydown:d,onKeyup:v};return re({ourProps:o,theirProps:i,slot:D,attrs:r,slots:c,name:"DisclosureButton"})}}}),Tt=oe({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:r,slots:c,expose:s}){let n=Re("DisclosurePanel");se(()=>{t.id!==null&&(n.panelId.value=t.id)}),Ve(()=>{n.panelId.value=null}),s({el:n.panel,$el:n.panel}),ke(Ke,n.panelId);let h=ut(),p=V(()=>h!==null?(h.value&Se.Open)===Se.Open:n.disclosureState.value===0);return()=>{var f;let m={open:n.disclosureState.value===0,close:n.close},x=t,{id:g}=x,d=ue(x,["id"]),v={id:(f=n.panelId.value)!=null?f:g,ref:n.panel};return re({ourProps:v,theirProps:d,slot:m,attrs:r,slots:c,features:$e.RenderStrategy|$e.Static,visible:p.value,name:"DisclosurePanel"})}}}),Mt=oe({props:{onFocus:{type:Function,required:!0}},setup(t){let r=P(!0);return()=>r.value?qe(He,{as:"button",type:"button",features:ct.Focusable,onFocus(c){c.preventDefault();let s,n=50;function h(){var p;if(n--<=0){s&&cancelAnimationFrame(s);return}if((p=t.onFocus)!=null&&p.call(t)){r.value=!1,cancelAnimationFrame(s);return}s=requestAnimationFrame(h)}s=requestAnimationFrame(h)}}):null}});var Pt=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Pt||{}),It=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(It||{});let Qe=Symbol("TabsContext");function ye(t){let r=ge(Qe,null);if(r===null){let c=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,ye),c}return r}let Fe=Symbol("TabsSSRContext"),Bt=oe({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:r,attrs:c,emit:s}){var n;let h=P((n=t.selectedIndex)!=null?n:t.defaultIndex),p=P([]),f=P([]),m=V(()=>t.selectedIndex!==null),g=V(()=>m.value?t.selectedIndex:h.value);function d(i){var o;let l=fe(v.tabs.value,N),_=fe(v.panels.value,N),C=l.filter($=>{var j;return!((j=N($))!=null&&j.hasAttribute("disabled"))});if(i<0||i>l.length-1){let $=ce(h.value===null?0:Math.sign(i-h.value),{[-1]:()=>1,0:()=>ce(Math.sign(i),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),j=ce($,{0:()=>l.indexOf(C[0]),1:()=>l.indexOf(C[C.length-1])});j!==-1&&(h.value=j),v.tabs.value=l,v.panels.value=_}else{let $=l.slice(0,i),j=[...l.slice(i),...$].find(Y=>C.includes(Y));if(!j)return;let U=(o=l.indexOf(j))!=null?o:v.selectedIndex.value;U===-1&&(U=v.selectedIndex.value),h.value=U,v.tabs.value=l,v.panels.value=_}}let v={selectedIndex:V(()=>{var i,o;return(o=(i=h.value)!=null?i:t.defaultIndex)!=null?o:null}),orientation:V(()=>t.vertical?"vertical":"horizontal"),activation:V(()=>t.manual?"manual":"auto"),tabs:p,panels:f,setSelectedIndex(i){g.value!==i&&s("change",i),m.value||d(i)},registerTab(i){var o;if(p.value.includes(i))return;let l=p.value[h.value];if(p.value.push(i),p.value=fe(p.value,N),!m.value){let _=(o=p.value.indexOf(l))!=null?o:h.value;_!==-1&&(h.value=_)}},unregisterTab(i){let o=p.value.indexOf(i);o!==-1&&p.value.splice(o,1)},registerPanel(i){f.value.includes(i)||(f.value.push(i),f.value=fe(f.value,N))},unregisterPanel(i){let o=f.value.indexOf(i);o!==-1&&f.value.splice(o,1)}};ke(Qe,v);let x=P({tabs:[],panels:[]}),D=P(!1);se(()=>{D.value=!0}),ke(Fe,V(()=>D.value?null:x.value));let w=V(()=>t.selectedIndex);return se(()=>{ie([w],()=>{var i;return d((i=t.selectedIndex)!=null?i:t.defaultIndex)},{immediate:!0})}),Ie(()=>{if(!m.value||g.value==null||v.tabs.value.length<=0)return;let i=fe(v.tabs.value,N);i.some((o,l)=>N(v.tabs.value[l])!==N(o))&&v.setSelectedIndex(i.findIndex(o=>N(o)===N(v.tabs.value[g.value])))}),()=>{let i={selectedIndex:h.value};return qe(G,[p.value.length<=0&&qe(Mt,{onFocus:()=>{for(let o of p.value){let l=N(o);if((l==null?void 0:l.tabIndex)===0)return l.focus(),!0}return!1}}),re({theirProps:ee(ee({},c),pt(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])),ourProps:{},slot:i,slots:r,attrs:c,name:"TabGroup"})])}}}),jt=oe({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:r,slots:c}){let s=ye("TabList");return()=>{let n={selectedIndex:s.selectedIndex.value},h={role:"tablist","aria-orientation":s.orientation.value};return re({ourProps:h,theirProps:t,slot:n,attrs:r,slots:c,name:"TabList"})}}}),Rt=oe({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:c,expose:s}){var n;let h=(n=t.id)!=null?n:`headlessui-tabs-tab-${Ce()}`,p=ye("Tab"),f=P(null);s({el:f,$el:f}),se(()=>p.registerTab(f)),Ve(()=>p.unregisterTab(f));let m=ge(Fe),g=V(()=>{if(m.value){let _=m.value.tabs.indexOf(h);return _===-1?m.value.tabs.push(h)-1:_}return-1}),d=V(()=>{let _=p.tabs.value.indexOf(f);return _===-1?g.value:_}),v=V(()=>d.value===p.selectedIndex.value);function x(_){var C;let $=_();if($===he.Success&&p.activation.value==="auto"){let j=(C=ft(f))==null?void 0:C.activeElement,U=p.tabs.value.findIndex(Y=>N(Y)===j);U!==-1&&p.setSelectedIndex(U)}return $}function D(_){let C=p.tabs.value.map($=>N($)).filter(Boolean);if(_.key===Q.Space||_.key===Q.Enter){_.preventDefault(),_.stopPropagation(),p.setSelectedIndex(d.value);return}switch(_.key){case Q.Home:case Q.PageUp:return _.preventDefault(),_.stopPropagation(),x(()=>de(C,te.First));case Q.End:case Q.PageDown:return _.preventDefault(),_.stopPropagation(),x(()=>de(C,te.Last))}if(x(()=>ce(p.orientation.value,{vertical(){return _.key===Q.ArrowUp?de(C,te.Previous|te.WrapAround):_.key===Q.ArrowDown?de(C,te.Next|te.WrapAround):he.Error},horizontal(){return _.key===Q.ArrowLeft?de(C,te.Previous|te.WrapAround):_.key===Q.ArrowRight?de(C,te.Next|te.WrapAround):he.Error}}))===he.Success)return _.preventDefault()}let w=P(!1);function i(){var _;w.value||(w.value=!0,!t.disabled&&((_=N(f))==null||_.focus({preventScroll:!0}),p.setSelectedIndex(d.value),mt(()=>{w.value=!1})))}function o(_){_.preventDefault()}let l=We(V(()=>({as:t.as,type:r.type})),f);return()=>{var _,C;let $={selected:v.value,disabled:(_=t.disabled)!=null?_:!1},j=ue(t,[]),U={ref:f,onKeydown:D,onMousedown:o,onClick:i,id:h,role:"tab",type:l.value,"aria-controls":(C=N(p.panels.value[d.value]))==null?void 0:C.id,"aria-selected":v.value,tabIndex:v.value?0:-1,disabled:t.disabled?!0:void 0};return re({ourProps:U,theirProps:j,slot:$,attrs:r,slots:c,name:"Tab"})}}}),Ft=oe({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:r,attrs:c}){let s=ye("TabPanels");return()=>{let n={selectedIndex:s.selectedIndex.value};return re({theirProps:t,ourProps:{},slot:n,attrs:c,slots:r,name:"TabPanels"})}}}),At=oe({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(t,{attrs:r,slots:c,expose:s}){var n;let h=(n=t.id)!=null?n:`headlessui-tabs-panel-${Ce()}`,p=ye("TabPanel"),f=P(null);s({el:f,$el:f}),se(()=>p.registerPanel(f)),Ve(()=>p.unregisterPanel(f));let m=ge(Fe),g=V(()=>{if(m.value){let x=m.value.panels.indexOf(h);return x===-1?m.value.panels.push(h)-1:x}return-1}),d=V(()=>{let x=p.panels.value.indexOf(f);return x===-1?g.value:x}),v=V(()=>d.value===p.selectedIndex.value);return()=>{var x;let D={selected:v.value},l=t,{tabIndex:w}=l,i=ue(l,["tabIndex"]),o={ref:f,id:h,role:"tabpanel","aria-labelledby":(x=N(p.tabs.value[d.value]))==null?void 0:x.id,tabIndex:v.value?w:-1};return!v.value&&t.unmount&&!t.static?qe(He,ee({as:"span","aria-hidden":!0},o)):re({ourProps:o,theirProps:i,slot:D,attrs:r,slots:c,features:$e.Static|$e.RenderStrategy,visible:v.value,name:"TabPanel"})}}});const zt=vt("request",{state:()=>({currentRequestId:null,requestTypeCode:null,requestTypeConfig:null,formData:{},currentStep:0,stepValidationStatus:{},isSaving:!1,isSubmitting:!1,lastSaved:null,error:null}),getters:{isFirstStep:t=>t.currentStep===0,totalSteps:t=>{var r;return(r=t.requestTypeConfig)!=null&&r.steps?t.requestTypeConfig.steps.length+4:4},isLastStep:t=>t.currentStep===t.totalSteps-1,currentStepConfig:t=>{var r,c;return(c=(r=t.requestTypeConfig)==null?void 0:r.steps)==null?void 0:c[t.currentStep]},canNavigateNext:t=>t.stepValidationStatus[t.currentStep]===!0,completionPercentage:t=>t.totalSteps===0?0:Math.round((t.currentStep+1)/t.totalSteps*100),hasUnsavedChanges:t=>t.lastSaved?new Date-t.lastSaved>3e4:Object.keys(t.formData).length>0},actions:{nextStep(){this.isLastStep||this.currentStep++},previousStep(){this.isFirstStep||this.currentStep--},goToStep(t){t>=0&&t<this.totalSteps&&(this.currentStep=t)},initialize(t,r=null){return L(this,null,function*(){try{this.requestTypeCode=t,this.error=null,console.log("[RequestStore] initialize called:",{requestTypeCode:t,draftId:r});const c=_e.getRequestTypeConfig(t);yield new Promise(s=>{const n=setInterval(()=>{c.loading||(clearInterval(n),s())},100)}),this.requestTypeConfig=c.data,r&&(yield this.loadDraft(r))}catch(c){console.error("Failed to initialize request:",c),this.error=c.message||"Failed to load request type"}})},loadDraft(t){return L(this,null,function*(){try{const r=_e.getRequest(t);yield new Promise(s=>{const n=setInterval(()=>{r.loading||(clearInterval(n),s())},100)});const c=r.data;if(this.currentRequestId=t,c.draft_full_data)try{this.formData=JSON.parse(c.draft_full_data)}catch(s){console.error("Failed to parse draft_full_data:",s),this.formData=c.form_data||{}}else this.formData=c.form_data||{};this.currentStep=c.draft_current_step||0}catch(r){console.error("Failed to load draft:",r),this.error=r.message||"Failed to load draft"}})},saveProgress(){return L(this,null,function*(){if(this.isSaving){console.log("[RequestStore] Save already in progress, skipping");return}this.currentRequestId&&!this.formData.request_id&&(console.warn("[RequestStore] Syncing request_id to formData"),this.formData.request_id=this.currentRequestId),console.log("[RequestStore] saveProgress called",{hasRequestId:!!this.currentRequestId,formDataHasId:!!this.formData.request_id,currentStep:this.currentStep,isSaving:this.isSaving}),this.isSaving=!0,this.error=null;try{const t={};for(const[c,s]of Object.entries(this.formData)){if(s instanceof File){console.warn(`[RequestStore] Skipping File object for key: ${c}`);continue}s!=null&&(t[c]=s)}if(Object.keys(t).length===0&&!this.currentRequestId)throw new Error("No form data to save. Please fill in at least one field.");console.log("[RequestStore] Sending sanitized data with",Object.keys(t).length,"fields");const r=yield _e.createDraft(t,this.currentStep);return this.currentRequestId||(this.currentRequestId=r.request_id,this.formData.request_id=r.request_id,localStorage.setItem("current_draft_id",r.request_id)),this.lastSaved=new Date,r}catch(t){throw console.error("Save failed:",t),this.error=t.message||"Failed to save progress",t}finally{this.isSaving=!1}})},saveDraft(){return L(this,null,function*(){return this.saveProgress()})},submitRequest(){return L(this,null,function*(){this.isSubmitting=!0,this.error=null;try{this.currentRequestId||(yield this.saveProgress());const t=yield _e.submitRequest(this.currentRequestId);return this.reset(),t}catch(t){throw console.error("Submit failed:",t),this.error=t.message||"Failed to submit request",t}finally{this.isSubmitting=!1}})},updateField(t,r){this.formData[t]=r},updateFields(t){Object.assign(this.formData,t)},setStepValidation(t,r){this.stepValidationStatus[t]=r},clearError(){this.error=null},reset(){console.log("[RequestStore] reset() called - clearing all state"),this.currentRequestId=null,this.requestTypeCode=null,this.requestTypeConfig=null,Object.keys(this.formData).forEach(t=>{delete this.formData[t]}),this.formData={},this.currentStep=0,this.stepValidationStatus={},this.isSaving=!1,this.isSubmitting=!1,this.lastSaved=null,this.error=null,localStorage.removeItem("current_draft_id")}}});function Nt(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0}function Lt(t){return t?/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(t.replace(/\s/g,"")):!0}function Et(t){if(!t)return!0;try{return new URL(t),!0}catch(r){return!1}}function Ot(t){return t===""||t===null||t===void 0?!0:!isNaN(parseFloat(t))&&isFinite(t)}function Ut(t,r,c){let s=t.trim();s.startsWith("eval:")&&(s=s.substring(5).trim());try{return new Function("formData","value",`
			'use strict';
			try {
				return Boolean(${s});
			} catch (e) {
				console.warn('[Field Validation] Evaluation error:', e.message);
				return true; // Fail open on evaluation error
			}
		`)(c,r)}catch(n){return console.error("[Field Validation] Failed to evaluate expression:",t,n),!0}}function Ht(t,r,c={}){if(!r)return{valid:!0,message:""};switch(r.toLowerCase()){case"email":if(!Nt(t))return{valid:!1,message:"Please enter a valid email address"};break;case"phone":if(!Lt(t))return{valid:!1,message:"Please enter a valid phone number"};break;case"url":if(!Et(t))return{valid:!1,message:"Please enter a valid URL"};break;case"number":if(!Ot(t))return{valid:!1,message:"Please enter a valid number"};break;default:if(r.startsWith("eval:")&&!Ut(r,t,c))return{valid:!1,message:"Validation failed"}}return{valid:!0,message:""}}function Ze(){const t=P({}),r=P(!1);function c(f,m,g,d={}){const v=Ht(m,g.validation,d);return v.valid?g.is_required&&(m===""||m===null||m===void 0)?(t.value[f]=`${g.field_label} is required`,!1):(delete t.value[f],!0):(t.value[f]=v.message,!1)}function s(f,m){return L(this,null,function*(){r.value=!0,t.value={};let g=!0;for(const d of f.sections||[])if(!(d.depends_on&&!n(d.depends_on,m)))for(const v of d.fields||[]){if(v.depends_on&&!n(v.depends_on,m))continue;let x=m[v.field_name];if(["barangay","municipality","province","city","region","zip_code","postal_code"].includes(v.field_name)&&!x){const i=m.address_line||m.street||m.residential_address||m.property_address;i&&typeof i=="object"&&(x=i[v.field_name])}c(v.field_name,x,v,m)||(g=!1)}return r.value=!1,g})}function n(f,m){try{const{evaluateCondition:g}=require("../utils/conditionalLogic");return g(f,m)}catch(g){return console.error("Error evaluating depends_on:",g),!0}}function h(){t.value={}}function p(f){delete t.value[f]}return{errors:t,isValidating:r,validateConfigField:c,validateStep:s,clearErrors:h,clearFieldError:p}}const H=P(null),Te=P(!1),Me=P(null);function Xe(){const t=()=>L(this,null,function*(){Te.value=!0,Me.value=null;try{const d={"Content-Type":"application/json"};window.csrf_token&&(d["X-Frappe-CSRF-Token"]=window.csrf_token);const x=yield(yield fetch("/api/method/lodgeick.api.get_user_profile",{method:"GET",headers:d,credentials:"include"})).json();if(x.message)return H.value=x.message,H.value;throw new Error("Failed to load profile")}catch(d){return Me.value=d.message,console.error("Error loading user profile:",d),null}finally{Te.value=!1}}),r=V(()=>{var d;return(d=H.value)!=null&&d.properties?H.value.properties.find(v=>v.is_default)||H.value.properties[0]:null}),c=V(()=>{var d;return(d=H.value)!=null&&d.councils?H.value.councils.find(v=>v.is_default)||H.value.councils[0]:null}),s=()=>{if(!H.value)return{};const d=H.value,v={};if(c.value&&(v.council=c.value.council_id,v.council_name=c.value.council_name),v.requester_name=d.full_name,v.requester_email=d.user,v.requester_phone=d.phone,v.requester_type=d.user_role,d.user_role==="Individual"&&d.postal_street&&(v.applicant_address=`${d.postal_street}, ${d.postal_suburb||""}, ${d.postal_city||""} ${d.postal_postcode||""}`.trim()),d.user_role==="Agent"&&(v.agent_required=!0,v.agent_id=d.user,v.agent_company=d.company_name,v.agent_email=d.business_email||d.user,v.agent_phone=d.business_phone||d.phone,d.business_street&&(v.agent_address=`${d.business_street}, ${d.business_suburb||""}, ${d.business_city||""} ${d.business_postcode||""}`.trim()),d.default_communication_route&&(v.correspondence_recipient=d.default_communication_route==="Agent Only"?"Agent":"Both"),d.default_invoice_recipient&&(v.invoice_responsible_party=d.default_invoice_recipient)),r.value){const x=r.value;v.property=`${x.street}, ${x.suburb||""}, ${x.city||""} ${x.postcode||""}`.trim(),v.property_address=v.property,v.property_legal_description=x.legal_description,v.ownership_status=x.ownership_status}return(d.comm_email||d.comm_phone||d.comm_post)&&(v.communication_preferences={email:d.comm_email||!1,phone:d.comm_phone||!1,post:d.comm_post||!1}),d.invoice_preference&&(v.invoice_delivery_method=d.invoice_preference),v},n=(d,v={})=>{const{overrideExisting:x=!1,fieldsToSkip:D=[]}=v,w=s();return Object.keys(w).forEach(i=>{D.includes(i)||!x&&d[i]||(d[i]=w[i])}),d},h=V(()=>{var d;return((d=H.value)==null?void 0:d.properties)||[]}),p=V(()=>{var d;return((d=H.value)==null?void 0:d.councils)||[]}),f=V(()=>{var d;return((d=H.value)==null?void 0:d.clients)||[]}),m=V(()=>{var x,D,w;if(!H.value)return!1;const d=H.value,v=d.full_name&&d.phone&&d.user_role;return d.user_role==="Individual"?v&&(((x=d.properties)==null?void 0:x.length)>0||!1)&&(((D=d.councils)==null?void 0:D.length)>0||!1):d.user_role==="Agent"?v&&d.company_name&&(((w=d.councils)==null?void 0:w.length)>0||!1):v}),g=V(()=>{if(!H.value)return 0;const d=H.value;let v=0,x=0;return["full_name","phone","user_role"].forEach(w=>{x++,d[w]&&v++}),x++,(d.comm_email||d.comm_phone||d.comm_post)&&v++,x++,d.properties&&d.properties.length>0&&v++,x++,d.councils&&d.councils.length>0&&v++,d.user_role==="Agent"?(x++,d.company_name&&v++):(x++,d.postal_street&&v++),Math.round(v/x*100)});return{userProfile:H,loading:Te,error:Me,loadUserProfile:t,getApplicationAutoFill:s,applyAutoFill:n,defaultProperty:r,defaultCouncil:c,getAllProperties:h,getAllCouncils:p,getAllClients:f,isProfileComplete:m,profileCompletionPercentage:g}}const Gt={class:"mb-8"},Yt={class:"relative mb-6"},Wt={class:"overflow-hidden h-2 text-xs flex rounded bg-gray-200"},Jt={class:"flex justify-between mt-2"},Kt={class:"text-sm font-medium text-gray-700"},Qt={class:"text-sm font-medium text-gray-700"},Zt={__name:"RequestProgress",props:{currentStep:{type:Number,required:!0},totalSteps:{type:Number,required:!0},stepTitles:{type:Array,default:()=>[]}},setup(t){const r=t,c=V(()=>r.totalSteps===0?0:Math.round((r.currentStep+1)/r.totalSteps*100));return(s,n)=>(a(),u("div",Gt,[e("div",Yt,[e("div",Wt,[e("div",{style:Ge({width:c.value+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-600 transition-all duration-500"},null,4)]),e("div",Jt,[e("span",Kt,y(t.stepTitles[t.currentStep]||`Step ${t.currentStep+1}`),1),e("span",Qt,y(c.value)+"% Complete ",1)])])]))}},Xt={class:"mt-8 pt-6 border-t border-gray-200"},es={class:"flex items-center justify-between"},ts={class:"flex items-center space-x-3"},ss={__name:"StepNavigation",props:{currentStep:{type:Number,required:!0},totalSteps:{type:Number,required:!0},isLastStep:{type:Boolean,default:!1},canGoNext:{type:Boolean,default:!0},canSaveDraft:{type:Boolean,default:!0},isSaving:{type:Boolean,default:!1},isSubmitting:{type:Boolean,default:!1}},emits:["next","previous","save-draft","submit"],setup(t,{emit:r}){const c=r,s=()=>{c("next")},n=()=>{c("previous")},h=()=>{c("save-draft")},p=()=>{c("submit")};return(f,m)=>(a(),u("div",Xt,[e("div",es,[e("div",null,[t.currentStep>0?(a(),O(T(ne),{key:0,onClick:n,variant:"outline",disabled:t.isSaving||t.isSubmitting},{prefix:z(()=>[...m[0]||(m[0]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:z(()=>[m[1]||(m[1]=I(" Previous ",-1))]),_:1},8,["disabled"])):b("",!0)]),e("div",ts,[t.canSaveDraft?(a(),O(T(ne),{key:0,onClick:h,variant:"outline",loading:t.isSaving,disabled:t.isSubmitting},Ee({default:z(()=>[I(" "+y(t.isSaving?"Saving...":"Save Draft"),1)]),_:2},[t.isSaving?void 0:{name:"prefix",fn:z(()=>[m[2]||(m[2]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1))]),key:"0"}]),1032,["loading","disabled"])):b("",!0),t.isLastStep?(a(),O(T(ne),{key:2,onClick:p,variant:"solid",theme:"green",loading:t.isSubmitting,disabled:!t.canGoNext||t.isSaving},Ee({default:z(()=>[I(" "+y(t.isSubmitting?"Submitting...":"Submit Application"),1)]),_:2},[t.isSubmitting?void 0:{name:"prefix",fn:z(()=>[m[5]||(m[5]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1))]),key:"0"}]),1032,["loading","disabled"])):(a(),O(T(ne),{key:1,onClick:s,variant:"solid",theme:"blue",disabled:!t.canGoNext||t.isSaving||t.isSubmitting},{suffix:z(()=>[...m[3]||(m[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),default:z(()=>[m[4]||(m[4]=I(" Next ",-1))]),_:1},8,["disabled"]))])]),m[6]||(m[6]=e("div",{class:"mt-4 text-center"},[e("p",{class:"text-sm text-gray-500"}," Your progress is automatically saved. You can return to complete this application later. ")],-1))]))}},ls={class:"text-center py-6"},os={key:0,class:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6"},as={class:"text-sm font-mono text-gray-900 mb-3"},ns={__name:"SaveDraftModal",props:{show:{type:Boolean,required:!0},draftId:{type:String,default:null}},emits:["update:show","close"],setup(t,{emit:r}){const c=Be(),s=t,n=r,h=V({get:()=>s.show,set:m=>n("update:show",m)}),p=()=>{n("update:show",!1),n("close")},f=()=>{s.draftId&&(n("update:show",!1),c.push(`/request/${s.draftId}`))};return(m,g)=>(a(),O(T(je),{modelValue:h.value,"onUpdate:modelValue":g[0]||(g[0]=d=>h.value=d),options:{size:"sm"}},{body:z(()=>[e("div",ls,[g[3]||(g[3]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),g[4]||(g[4]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Draft Saved Successfully",-1)),g[5]||(g[5]=e("p",{class:"text-sm text-gray-500 mb-4"}," Your progress has been saved. You can return to complete this application later. ",-1)),t.draftId?(a(),u("div",os,[g[2]||(g[2]=e("p",{class:"text-xs text-gray-500 mb-2"},"Draft ID",-1)),e("p",as,y(t.draftId),1),e("button",{onClick:f,class:"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline"},[...g[1]||(g[1]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),I(" View Draft Details ",-1)])])])):b("",!0),e("div",{class:"flex justify-between w-full space-x-3 px-4"},[e("button",{onClick:p,class:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}," Close "),e("button",{onClick:p,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}," Continue Editing ")])])]),_:1},8,["modelValue"]))}},rs={class:"py-4"},is={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},us={class:"list-disc list-inside space-y-2"},ds={class:"font-medium"},cs={key:1,class:"text-sm text-gray-500 text-center py-4"},ps={__name:"ValidationErrorModal",props:{show:{type:Boolean,required:!0},errors:{type:Object,default:()=>({})}},emits:["update:show","close"],setup(t,{emit:r}){const c=t,s=r,n=V({get:()=>c.show,set:f=>s("update:show",f)}),h=V(()=>Object.entries(c.errors).map(([f,m])=>({field:f,message:m}))),p=()=>{s("update:show",!1),s("close")};return(f,m)=>(a(),O(T(je),{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=g=>n.value=g),options:{size:"md"}},{body:z(()=>[e("div",rs,[m[1]||(m[1]=e("div",{class:"flex items-start mb-4"},[e("div",{class:"flex-shrink-0"},[e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])])]),e("div",{class:"ml-4"},[e("h3",{class:"text-lg font-medium text-gray-900 mb-1"},"Validation Errors"),e("p",{class:"text-sm text-gray-500"}," Please fix the following errors before continuing: ")])],-1)),h.value.length>0?(a(),u("div",is,[e("ul",us,[(a(!0),u(G,null,W(h.value,(g,d)=>(a(),u("li",{key:d,class:"text-sm text-red-800"},[e("span",ds,y(g.field)+":",1),I(" "+y(g.message),1)]))),128))])])):(a(),u("div",cs," No validation errors found. "))])]),actions:z(()=>[e("div",{class:"flex justify-end"},[e("button",{onClick:p,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}," Close and Fix Errors ")])]),_:1},8,["modelValue"]))}},ms={class:"success-content text-center py-6"},fs={class:"text-xl font-semibold text-gray-900 mb-2"},vs={key:0,class:"mt-4 space-y-2"},gs={class:"text-gray-600"},ys={class:"font-semibold text-gray-900"},bs={key:0,class:"text-gray-600"},xs={class:"font-semibold text-gray-900"},hs={class:"mt-6 flex gap-3 justify-center"},_s={__name:"SubmissionSuccessModal",props:{open:{type:Boolean,default:!1},requestNumber:{type:String,default:""},requestId:{type:String,default:""},slaInfo:{type:Object,default:()=>({})}},emits:["close","viewRequest","goToDashboard"],setup(t,{emit:r}){const c=t,s=r,n=V({get:()=>c.open,set:m=>{m||s("close")}});function h(m){if(!m)return"N/A";try{return new Date(m).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(g){return m}}function p(){s("viewRequest",c.requestId),n.value=!1}function f(){s("goToDashboard"),n.value=!1}return(m,g)=>(a(),O(T(je),{modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=d=>n.value=d),options:{title:"Request Submitted Successfully",size:"md"}},{"body-content":z(()=>[e("div",ms,[g[5]||(g[5]=e("div",{class:"flex justify-center mb-4"},[e("svg",{class:"w-16 h-16 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("h3",fs," Request "+y(t.requestNumber)+" Submitted ",1),t.slaInfo?(a(),u("div",vs,[e("p",gs,[g[1]||(g[1]=I(" Your request will be processed within ",-1)),e("span",ys,y(t.slaInfo.processing_days)+" business days ",1)]),t.slaInfo.expected_completion_date?(a(),u("p",bs,[g[2]||(g[2]=I(" Expected completion: ",-1)),e("span",xs,y(h(t.slaInfo.expected_completion_date)),1)])):b("",!0)])):b("",!0),g[6]||(g[6]=e("div",{class:"mt-6 p-4 bg-blue-50 rounded-lg text-left"},[e("h4",{class:"text-sm font-semibold text-blue-900 mb-2"},"Next Steps:"),e("ul",{class:"text-sm text-blue-800 space-y-1"},[e("li",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",null,"You will receive email updates on your request status")]),e("li",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",null,"Track your request progress from the dashboard")]),e("li",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",null,"Council staff will review your application and contact you if needed")])])],-1)),e("div",hs,[A(T(ne),{variant:"outline",onClick:p},{default:z(()=>[...g[3]||(g[3]=[I(" View Request Details ",-1)])]),_:1}),A(T(ne),{appearance:"primary",onClick:f},{default:z(()=>[...g[4]||(g[4]=[I(" Go to Dashboard ",-1)])]),_:1})])])]),_:1},8,["modelValue"]))}},ws=me(_s,[["__scopeId","data-v-68eda355"]]),ks={__name:"Step1CouncilSelection",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","council-change"],setup(t,{emit:r}){const c=t,s=r,n=h=>{console.log("[Step1CouncilSelection] updateCouncil called with:",h),console.log("[Step1CouncilSelection] Current modelValue:",c.modelValue),s("update:modelValue",De(ee({},c.modelValue),{council:h})),s("council-change",h),console.log("[Step1CouncilSelection] Emitted events")};return(h,p)=>(a(),u("div",null,[p[0]||(p[0]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Council",-1)),p[1]||(p[1]=e("p",{class:"text-gray-600 mb-8"},"Choose the council that will process your application",-1)),A(Ct,{"model-value":t.modelValue.council,"onUpdate:modelValue":n,"display-mode":"cards",required:!0,"show-selected-info":!0,label:"","show-label":!1},null,8,["model-value"])]))}},Ss={key:0,class:"text-center py-12"},Cs={key:1,class:"grid md:grid-cols-2 gap-4"},$s=["onClick"],qs={class:"flex items-start justify-between"},Vs={class:"flex-1"},Ds={class:"text-lg font-semibold text-gray-900 mb-2"},Ts=["innerHTML"],Ms={class:"mt-4 flex items-center space-x-4 text-xs text-gray-500"},Ps={key:0},Is={key:1},Bs={key:2,class:"px-2 py-1 bg-gray-100 rounded"},js={key:0,class:"ml-4"},Rs={__name:"Step2RequestType",props:{modelValue:{type:Object,required:!0},requestTypes:{type:Object,required:!0}},emits:["update:modelValue","type-selected"],setup(t,{emit:r}){const c=t,s=r,n=h=>{console.log("[Step2RequestType] selectType called with:",h.name),console.log("[Step2RequestType] props.modelValue:",c.modelValue),console.log("[Step2RequestType] props.modelValue.council:",c.modelValue.council);const p=De(ee({},c.modelValue),{request_type:h.name});console.log("[Step2RequestType] Emitting updatedValue:",p),s("update:modelValue",p),s("type-selected",h.name)};return(h,p)=>(a(),u("div",null,[p[2]||(p[2]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Application Type",-1)),p[3]||(p[3]=e("p",{class:"text-gray-600 mb-8"},"Choose the type of consent you wish to apply for",-1)),t.requestTypes.loading?(a(),u("div",Ss,[...p[0]||(p[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(a(),u("div",Cs,[(a(!0),u(G,null,W(t.requestTypes.data,f=>(a(),u("div",{key:f.name,onClick:m=>n(f),class:R(["border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",t.modelValue.request_type===f.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",qs,[e("div",Vs,[e("h3",Ds,y(f.type_name),1),e("p",{class:"text-sm text-gray-600",innerHTML:f.description||"No description available"},null,8,Ts),e("div",Ms,[f.base_fee?(a(),u("span",Ps,"Fee: $"+y(f.base_fee),1)):b("",!0),f.processing_sla_days?(a(),u("span",Is,y(f.processing_sla_days)+" days",1)):b("",!0),f.category?(a(),u("span",Bs,y(f.category),1)):b("",!0)])]),t.modelValue.request_type===f.name?(a(),u("div",js,[...p[1]||(p[1]=[e("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):b("",!0)])],10,$s))),128))]))]))}},Fs={class:"text-gray-600 mb-6"},As={key:0,class:"space-y-6"},zs={class:"bg-white border border-gray-200 rounded-lg p-6"},Ns={class:"flex items-start justify-between mb-4"},Ls={class:"text-xl font-semibold text-gray-900"},Es={key:0,class:"text-sm text-gray-500 mt-1"},Os={class:"grid md:grid-cols-3 gap-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},Us={class:"text-2xl font-bold text-blue-900 mt-1"},Hs={class:"text-2xl font-bold text-blue-900 mt-1"},Gs={class:"text-2xl font-bold text-blue-900 mt-1"},Ys={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},Ws=["innerHTML"],Js={key:1,class:"bg-white border border-gray-200 rounded-lg p-6"},Ks=["innerHTML"],Qs={key:1,class:"text-center py-12"},Zs={__name:"Step3ProcessInfo",props:{requestTypeDetails:{type:Object,default:null},councilName:{type:String,default:""},modelValue:{type:Object,default:()=>({})}},emits:["continue","update:modelValue"],setup(t,{emit:r}){const c=Be(),s=r,n=()=>{if(!gt.isLoggedIn){const h=window.location.pathname+window.location.search;c.push({name:"Login",query:{redirect:h}});return}s("continue")};return(h,p)=>(a(),u("div",null,[p[11]||(p[11]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Council Process Information",-1)),e("p",Fs,"Understanding "+y(t.councilName)+"'s process for this application",1),t.requestTypeDetails?(a(),u("div",As,[e("div",zs,[e("div",Ns,[e("div",null,[e("h3",Ls,y(t.requestTypeDetails.request_type_name),1),t.requestTypeDetails.category?(a(),u("p",Es,y(t.requestTypeDetails.category),1)):b("",!0)])]),e("div",Os,[e("div",null,[p[0]||(p[0]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Application Fee",-1)),e("div",Us," $"+y(t.requestTypeDetails.base_fee||"0"),1),p[1]||(p[1]=e("div",{class:"text-xs text-blue-600 mt-1"},"Plus any additional costs",-1))]),e("div",null,[p[3]||(p[3]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Processing Time",-1)),e("div",Hs,[I(y(t.requestTypeDetails.sla_days||"N/A")+" ",1),p[2]||(p[2]=e("span",{class:"text-base"},"days",-1))]),p[4]||(p[4]=e("div",{class:"text-xs text-blue-600 mt-1"},"Standard timeframe",-1))]),e("div",null,[p[5]||(p[5]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Payment Required",-1)),e("div",Gs,y(t.requestTypeDetails.requires_payment?"Yes":"No"),1),p[6]||(p[6]=e("div",{class:"text-xs text-blue-600 mt-1"},"Before processing",-1))])])]),t.requestTypeDetails.process_description?(a(),u("div",Ys,[p[7]||(p[7]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"How This Works",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:t.requestTypeDetails.process_description},null,8,Ws)])):t.requestTypeDetails.description?(a(),u("div",Js,[p[8]||(p[8]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"About This Application",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:t.requestTypeDetails.description},null,8,Ks)])):b("",!0),p[9]||(p[9]=pe('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Before You Continue</h5><p class="text-yellow-800 text-sm mt-1"> Please review this information carefully. Make sure you understand the process, fees, and timeframes before proceeding with your application. </p></div></div></div>',1)),e("div",{class:"flex justify-center pt-4"},[e("button",{type:"button",onClick:n,class:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"}," I Understand - Continue to Application ")])])):(a(),u("div",Qs,[...p[10]||(p[10]=[e("p",{class:"text-gray-500"},"No request type selected. Please go back and select a request type.",-1)])]))]))}};function Xs(t,r){return a(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const el={class:"space-y-4"},tl={class:"block"},sl={class:"text-sm font-medium text-gray-900"},ll={key:0,class:"text-red-500"},ol={key:0,class:"text-xs text-gray-500 mt-1"},al={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nl=["disabled"],rl=["disabled"],il={class:"text-center"},ul={class:"text-xs text-gray-500"},dl=["accept","multiple"],cl={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},pl={class:"flex items-center space-x-3"},ml={class:"flex-1"},fl={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},vl={key:1,class:"space-y-2"},gl={class:"flex items-center space-x-3 flex-1 min-w-0"},yl={class:"flex-shrink-0"},bl={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},xl=["src","alt"],hl={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},_l={class:"flex-1 min-w-0"},wl={class:"text-sm font-medium text-gray-900 truncate"},kl={class:"text-xs text-gray-500"},Sl=["onClick"],Cl={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},$l={class:"relative bg-black aspect-video"},ql=["src"],Vl={key:2,class:"absolute inset-0 pointer-events-none"},Dl={class:"w-full h-full grid grid-cols-3 grid-rows-3"},Tl={class:"bg-gray-900 px-6 py-6"},Ml={key:0,class:"flex items-center justify-center space-x-6"},Pl={key:1,class:"flex items-center justify-center space-x-4"},Il={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(t,{emit:r}){const c=t,s=r,n=P(null),h=P(null),p=P(!1),f=P(null),m=P(null),g=P(!1),d=P(0),v=V({get:()=>c.modelValue,set:M=>s("update:modelValue",M)}),x=()=>{var M;(M=n.value)==null||M.click()},D=M=>L(this,null,function*(){const q=Array.from(M.target.files);yield w(q),M.target.value=""}),w=M=>L(this,null,function*(){const q=[];for(const B of M){if(B.size>c.maxSize){alert(`File ${B.name} exceeds maximum size of ${le(c.maxSize)}`);continue}let J=null;B.type.startsWith("image/")&&(J=yield i(B)),q.push({file:B,name:B.name,size:B.size,type:B.type,preview:J,uploadDate:new Date().toISOString()})}if(q.length>0){const B=c.multiple?[...v.value,...q]:q;s("update:modelValue",B),yield o(q)}}),i=M=>new Promise(q=>{const B=new FileReader;B.onload=J=>q(J.target.result),B.onerror=()=>q(null),B.readAsDataURL(M)}),o=M=>L(this,null,function*(){g.value=!0,d.value=0;try{for(let q=0;q<M.length;q++){const B=M[q],J=setInterval(()=>{d.value=Math.min(d.value+10,90)},100);yield new Promise(be=>{s("upload",B,be)}),clearInterval(J),d.value=(q+1)/M.length*100}}catch(q){console.error("Upload error:",q),alert("Failed to upload files. Please try again.")}finally{g.value=!1,d.value=0}}),l=M=>{const q=[...v.value];q.splice(M,1),s("update:modelValue",q)},_=()=>L(this,null,function*(){try{p.value=!0,yield C()}catch(M){console.error("Camera error:",M),alert("Unable to access camera. Please check permissions or upload a file instead."),p.value=!1}}),C=()=>L(this,null,function*(){try{const M=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});m.value=M,h.value&&(h.value.srcObject=M)}catch(M){throw M}}),$=()=>{const M=h.value,q=document.createElement("canvas");q.width=M.videoWidth,q.height=M.videoHeight,q.getContext("2d").drawImage(M,0,0,q.width,q.height),f.value=q.toDataURL("image/jpeg",.9)},j=()=>{f.value=null},U=()=>L(this,null,function*(){if(!f.value)return;const M=yield(yield fetch(f.value)).blob(),q=new File([M],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield w([q]),Y()}),Y=()=>{m.value&&(m.value.getTracks().forEach(M=>M.stop()),m.value=null),f.value=null,p.value=!1},le=M=>{if(M===0)return"0 Bytes";const q=1024,B=["Bytes","KB","MB","GB"],J=Math.floor(Math.log(M)/Math.log(q));return Math.round(M/Math.pow(q,J)*100)/100+" "+B[J]};return(M,q)=>(a(),u("div",el,[e("label",tl,[e("span",sl,[I(y(t.label)+" ",1),t.required?(a(),u("span",ll,"*")):b("",!0)]),t.helpText?(a(),u("p",ol,y(t.helpText),1)):b("",!0)]),e("div",al,[t.allowCamera?(a(),u("button",{key:0,onClick:_,type:"button",class:R(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":g.value}]),disabled:g.value},[...q[0]||(q[0]=[pe('<div class="text-center" data-v-2bd160e5><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2bd160e5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2bd160e5></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2bd160e5></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2bd160e5>Take Photo</p><p class="text-xs text-gray-500" data-v-2bd160e5>Use camera</p></div>',1)])],10,nl)):b("",!0),e("button",{onClick:x,type:"button",class:R(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":g.value}]),disabled:g.value},[e("div",il,[q[1]||(q[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),q[2]||(q[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",ul,"Browse "+y(t.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:n,type:"file",accept:t.accept,multiple:t.multiple,onChange:D,class:"hidden"},null,40,dl)],10,rl)]),g.value?(a(),u("div",cl,[e("div",pl,[q[4]||(q[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",ml,[q[3]||(q[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",fl,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:Ge({width:d.value+"%"})},null,4)])])])])):b("",!0),v.value.length>0?(a(),u("div",vl,[A(yt,{name:"list"},{default:z(()=>[(a(!0),u(G,null,W(v.value,(B,J)=>(a(),u("div",{key:B.name+J,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",gl,[e("div",yl,[B.preview?(a(),u("div",bl,[e("img",{src:B.preview,alt:B.name,class:"w-full h-full object-cover"},null,8,xl)])):(a(),u("div",hl,[...q[5]||(q[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",_l,[e("p",wl,y(B.name),1),e("p",kl,y(le(B.size)),1)]),e("button",{onClick:be=>l(J),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...q[6]||(q[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Sl)])]))),128))]),_:1})])):b("",!0),(a(),O(xt,{to:"body"},[p.value?(a(),u("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:bt(Y,["self"])},[e("div",Cl,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[q[8]||(q[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:Y,class:"text-gray-400 hover:text-white transition-colors"},[...q[7]||(q[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",$l,[f.value?(a(),u("img",{key:1,src:f.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,ql)):(a(),u("video",{key:0,ref_key:"videoElement",ref:h,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),f.value?b("",!0):(a(),u("div",Vl,[e("div",Dl,[(a(),u(G,null,W(9,B=>e("div",{key:B,class:"border border-white/20"})),64))])]))]),e("div",Tl,[f.value?(a(),u("div",Pl,[e("button",{onClick:j,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:U,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(a(),u("div",Ml,[e("button",{onClick:$,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...q[9]||(q[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):b("",!0)]))]))}},Bl=me(Il,[["__scopeId","data-v-2bd160e5"]]),jl={class:"space-y-4"},Rl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fl={class:"block text-sm font-medium text-gray-700 mb-2"},Al={key:0,class:"text-red-500"},zl={class:"relative"},Nl=["required"],Ll=["value"],El={class:"block text-sm font-medium text-gray-700 mb-2"},Ol={key:0,class:"text-red-500"},Ul={class:"relative"},Hl=["required","disabled"],Gl=["value"],Yl={key:0,class:"mt-1 text-xs text-gray-500"},Wl={class:"block text-sm font-medium text-gray-700 mb-2"},Jl={key:0,class:"text-red-500"},Kl={class:"relative"},Ql=["required","disabled"],Zl=["value"],Xl={key:0,class:"mt-1 text-xs text-gray-500"},eo={class:"block text-sm font-medium text-gray-700 mb-2"},to={key:0,class:"text-red-500"},so=["required"],lo={class:"md:col-span-2"},oo={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},ao={class:"flex items-start"},no={class:"flex-1"},ro={class:"text-sm text-green-700 mt-1"},io={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:r}){const c=t,s=r,n=P({street:"",barangay:"",municipality:"",province:"",zipCode:""}),h=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],p={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Paraaque City","Las Pias City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},f={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},m=V(()=>n.value.province?p[n.value.province]||[]:[]),g=V(()=>n.value.municipality?f[n.value.municipality]||["Other - Please specify in Street field"]:[]),d=V(()=>{const w=[];return n.value.street&&w.push(n.value.street),n.value.barangay&&w.push(`Brgy. ${n.value.barangay}`),n.value.municipality&&w.push(n.value.municipality),n.value.province&&w.push(n.value.province),n.value.zipCode&&w.push(n.value.zipCode),w.length>0?w.join(", "):""}),v=()=>{n.value.municipality="",n.value.barangay="",D()},x=()=>{n.value.barangay="",D()},D=()=>{s("update:modelValue",{full_address:d.value,address_line:n.value.street,barangay:n.value.barangay,municipality:n.value.municipality,province:n.value.province,zip_code:n.value.zipCode})};return se(()=>{var w;if(c.modelValue)if(typeof c.modelValue=="string"){const i=c.modelValue.split(",").map(o=>o.trim());i.length>=3&&(n.value.street=i[0]||"",n.value.barangay=((w=i[1])==null?void 0:w.replace("Brgy. ",""))||"",n.value.municipality=i[2]||"",n.value.province=i[3]||"",n.value.zipCode=i[4]||"")}else typeof c.modelValue=="object"&&(n.value=ee(ee({},n.value),c.modelValue))}),ie(()=>c.modelValue,w=>{w&&typeof w=="object"&&(n.value=ee(ee({},n.value),w))}),(w,i)=>(a(),u("div",jl,[i[18]||(i[18]=pe('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",Rl,[e("div",null,[e("label",Fl,[i[5]||(i[5]=I(" Province ",-1)),t.required?(a(),u("span",Al,"*")):b("",!0)]),e("div",zl,[Z(e("select",{"onUpdate:modelValue":i[0]||(i[0]=o=>n.value.province=o),onChange:v,required:t.required,class:R(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":n.value.province}])},[i[6]||(i[6]=e("option",{value:""},"Select Province",-1)),(a(),u(G,null,W(h,o=>e("option",{key:o,value:o},y(o),9,Ll)),64))],42,Nl),[[ve,n.value.province]]),i[7]||(i[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",El,[i[8]||(i[8]=I(" Municipality/City ",-1)),t.required?(a(),u("span",Ol,"*")):b("",!0)]),e("div",Ul,[Z(e("select",{"onUpdate:modelValue":i[1]||(i[1]=o=>n.value.municipality=o),onChange:x,required:t.required,disabled:!n.value.province,class:R(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":n.value.municipality}])},[i[9]||(i[9]=e("option",{value:""},"Select Municipality/City",-1)),(a(!0),u(G,null,W(m.value,o=>(a(),u("option",{key:o,value:o},y(o),9,Gl))),128))],42,Hl),[[ve,n.value.municipality]]),i[10]||(i[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),n.value.province?b("",!0):(a(),u("p",Yl,"Select province first"))]),e("div",null,[e("label",Wl,[i[11]||(i[11]=I(" Barangay ",-1)),t.required?(a(),u("span",Jl,"*")):b("",!0)]),e("div",Kl,[Z(e("select",{"onUpdate:modelValue":i[2]||(i[2]=o=>n.value.barangay=o),onChange:D,required:t.required,disabled:!n.value.municipality,class:R(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":n.value.barangay}])},[i[12]||(i[12]=e("option",{value:""},"Select Barangay",-1)),(a(!0),u(G,null,W(g.value,o=>(a(),u("option",{key:o,value:o},y(o),9,Zl))),128))],42,Ql),[[ve,n.value.barangay]]),i[13]||(i[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),n.value.municipality?b("",!0):(a(),u("p",Xl,"Select municipality first"))]),e("div",null,[e("label",eo,[i[14]||(i[14]=I(" Street / House No. ",-1)),t.required?(a(),u("span",to,"*")):b("",!0)]),Z(e("input",{"onUpdate:modelValue":i[3]||(i[3]=o=>n.value.street=o),onInput:D,type:"text",required:t.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:R(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":n.value.street}])},null,42,so),[[ae,n.value.street]])]),e("div",lo,[i[15]||(i[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[I(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),Z(e("input",{"onUpdate:modelValue":i[4]||(i[4]=o=>n.value.zipCode=o),onInput:D,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[ae,n.value.zipCode]])])]),d.value?(a(),u("div",oo,[e("div",ao,[i[17]||(i[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",no,[i[16]||(i[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",ro,y(d.value),1)])])])):b("",!0)]))}},uo={class:"space-y-4"},co={class:"flex items-center justify-between mb-4"},po={class:"block text-sm font-medium text-gray-700"},mo={key:0,class:"text-red-500"},fo={key:0,class:"space-y-3"},vo=["value"],go={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},yo={class:"flex items-start justify-between"},bo={class:"flex-1 space-y-1"},xo={class:"text-sm font-medium text-gray-900"},ho={class:"text-sm text-gray-700"},_o={key:0,class:"text-xs text-gray-600"},wo={key:1},ko={key:2,class:"flex items-center space-x-2"},So={__name:"PropertyAddressSelector",props:{modelValue:{type:Object,default:()=>({})},label:{type:String,default:"Residential Address"},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:r}){const c=t,s=r,{loadUserProfile:n,getAllProperties:h,defaultProperty:p}=Xe(),f=P(!1),m=P(""),g=P(!1),d=P(c.modelValue||{}),v=V(()=>h.value||[]),x=V(()=>!m.value||m.value==="__new__"?null:v.value.find(C=>C.name===m.value));function D(C){const $=[];return C.property_name&&$.push(C.property_name),C.street&&$.push(C.street),C.suburb&&$.push(C.suburb),C.city&&$.push(C.city),$.join(", ")||"Unnamed Property"}function w(C){const $=[];return C.street&&$.push(C.street),C.barangay&&$.push(`Brgy. ${C.barangay}`),C.municipality&&$.push(C.municipality),C.province&&$.push(C.province),(C.zip_code||C.postcode)&&$.push(C.zip_code||C.postcode),$.join(", ")}function i(){if(m.value==="__new__"){d.value={},f.value=!1;return}x.value&&(d.value={full_address:w(x.value),address_line:x.value.street||"",barangay:x.value.barangay||"",municipality:x.value.municipality||x.value.city||"",province:x.value.province||"",zip_code:x.value.zip_code||x.value.postcode||""},s("update:modelValue",d.value))}function o(C){d.value=C,s("update:modelValue",C)}function l(){f.value=!1}function _(){confirm("Are you sure you want to remove this property from selection?")&&(m.value="",d.value={},s("update:modelValue",{}))}return se(()=>L(this,null,function*(){yield n(),(!c.modelValue||Object.keys(c.modelValue).length===0)&&p.value&&(m.value=p.value.name,i()),v.value.length>0&&(f.value=!0)})),ie(()=>c.modelValue,C=>{C&&Object.keys(C).length>0&&(d.value=C)},{deep:!0}),(C,$)=>(a(),u("div",uo,[e("div",co,[e("label",po,[I(y(t.label)+" ",1),t.required?(a(),u("span",mo,"*")):b("",!0)]),v.value.length>0?(a(),u("button",{key:0,onClick:$[0]||($[0]=j=>f.value=!f.value),type:"button",class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},y(f.value?"Enter manually":"Select from my properties"),1)):b("",!0)]),f.value&&v.value.length>0?(a(),u("div",fo,[Z(e("select",{"onUpdate:modelValue":$[1]||($[1]=j=>m.value=j),onChange:i,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[$[3]||($[3]=e("option",{value:""},"Select a property",-1)),(a(!0),u(G,null,W(v.value,j=>(a(),u("option",{key:j.name,value:j.name},y(D(j)),9,vo))),128)),$[4]||($[4]=e("option",{value:"__new__"},"+ Add New Property",-1))],544),[[ve,m.value]]),x.value&&m.value!=="__new__"?(a(),u("div",go,[e("div",yo,[e("div",bo,[e("p",xo,y(x.value.property_name||"Property"),1),e("p",ho,y(w(x.value)),1),x.value.legal_description?(a(),u("p",_o,y(x.value.legal_description),1)):b("",!0)]),e("div",{class:"flex space-x-2"},[e("button",{onClick:l,type:"button",class:"text-sm text-blue-600 hover:text-blue-700",title:"Edit property"},[...$[5]||($[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),e("button",{onClick:_,type:"button",class:"text-sm text-red-600 hover:text-red-700",title:"Remove property"},[...$[6]||($[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])])])):b("",!0)])):b("",!0),!f.value||m.value==="__new__"||v.value.length===0?(a(),u("div",wo,[A(io,{modelValue:d.value,"onUpdate:modelValue":o,required:t.required},null,8,["modelValue","required"])])):b("",!0),(!f.value||m.value==="__new__")&&!m.value?(a(),u("div",ko,[Z(e("input",{"onUpdate:modelValue":$[2]||($[2]=j=>g.value=j),type:"checkbox",id:"save-property",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Ye,g.value]]),$[7]||($[7]=e("label",{for:"save-property",class:"text-sm text-gray-700"}," Save this property to my profile for future use ",-1))])):b("",!0)]))}},Co={class:"inline-block relative group"},$o={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:t=>["top","bottom","left","right"].includes(t)}},setup(t){const r=t,c=P(!1),s=V(()=>{switch(r.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),n=V(()=>{switch(r.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(h,p)=>(a(),u("div",Co,[Oe(h.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:p[0]||(p[0]=f=>c.value=!0),onMouseleave:p[1]||(p[1]=f=>c.value=!1)},[...p[2]||(p[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),A(ht,{name:"tooltip"},{default:z(()=>[c.value?(a(),u("div",{key:0,class:R(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",s.value]),style:{"max-width":"300px","white-space":"normal"}},[Oe(h.$slots,"default",{},()=>[I(y(t.text),1)],!0),e("div",{class:R(["tooltip-arrow",n.value])},null,2)],2)):b("",!0)]),_:3})]))}},we=me($o,[["__scopeId","data-v-1fa5e90e"]]);function qo(t,r){if(!t||t.trim()==="")return!0;let c=t.trim();c.startsWith("eval:")&&(c=c.substring(5).trim());try{return new Function("formData",`
      'use strict';
      try {
        return Boolean(${c});
      } catch (e) {
        console.warn('[Conditional Logic] Evaluation error:', e.message);
        return false;
      }
    `)(r)}catch(s){return console.error("[Conditional Logic] Failed to evaluate expression:",t,s),!0}}function Vo(t,r){return t?t.depends_on?qo(t.depends_on,r):!0:!1}const Do={class:"space-y-6"},To={key:0,class:"form-group"},Mo={key:1,class:"form-group"},Po=["for"],Io={key:0,class:"text-red-500 ml-1"},Bo={class:"relative"},jo=["id","name","onUpdate:modelValue","onBlur","required","placeholder"],Ro={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},Fo=["innerHTML"],Ao={key:0,class:"mt-1 text-xs text-red-600"},zo={key:1,class:"mt-1 text-xs text-gray-500"},No={key:2,class:"form-group"},Lo=["for"],Eo={key:0,class:"text-red-500 ml-1"},Oo={class:"relative"},Uo=["id","name","onUpdate:modelValue","onBlur","required"],Ho={value:""},Go=["value"],Yo={key:0,class:"mt-1 text-xs text-red-600"},Wo={key:1,class:"mt-1 text-xs text-gray-500"},Jo={key:3,class:"form-group"},Ko={class:"flex items-center h-5"},Qo=["id","name","onUpdate:modelValue","onChange","required"],Zo={class:"ml-3 text-sm"},Xo=["for"],ea={key:0,class:"text-red-500 ml-1"},ta={key:0,class:"mt-1 text-xs text-red-600"},sa={key:1,class:"mt-1 text-xs text-gray-500"},la={key:4,class:"form-group"},oa=["for"],aa={key:0,class:"text-red-500 ml-1"},na=["id","name","onUpdate:modelValue","onBlur","required","placeholder"],ra={key:0,class:"mt-1 text-xs text-red-600"},ia={key:1,class:"mt-1 text-xs text-gray-500"},ua={key:5,class:"form-group"},da=["for"],ca={key:0,class:"text-red-500 ml-1"},pa={class:"relative"},ma=["id","name","onUpdate:modelValue","onBlur","required"],fa={key:0,class:"mt-1 text-xs text-red-600"},va={key:1,class:"mt-1 text-xs text-gray-500"},ga={key:6,class:"form-group"},ya=["for"],ba={key:0,class:"text-red-500 ml-1"},xa={class:"relative"},ha=["id","name","onUpdate:modelValue","required","placeholder"],_a={key:0,class:"mt-1 text-xs text-gray-500"},wa={key:7,class:"form-group"},ka=["for"],Sa={key:0,class:"text-red-500 ml-1"},Ca={class:"relative"},$a=["id","name","onUpdate:modelValue","required","placeholder"],qa={key:0,class:"mt-1 text-xs text-gray-500"},Va={key:8,class:"form-group"},Da=["for"],Ta={key:0,class:"text-red-500 ml-1"},Ma={class:"relative"},Pa=["id","name","onUpdate:modelValue","onBlur","required"],Ia={key:0,class:"mt-1 text-xs text-red-600"},Ba={key:1,class:"mt-1 text-xs text-gray-500"},ja={key:9,class:"form-group"},Ra={key:10,class:"form-group"},Fa={class:"text-sm text-gray-500 italic"},Aa={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:r}){const c=t,s=r,n=V({get:()=>c.modelValue,set:i=>s("update:modelValue",i)}),h=V(()=>c.fields.filter(i=>{var $;const o=(($=i.parent_section_code)==null?void 0:$.toLowerCase())||"",_=["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(o),C=["barangay","municipality","province","city","region","zip_code","postal_code"];return _&&c.fields.some(U=>U.parent_section_code===i.parent_section_code&&U.field_name==="address_line")&&C.includes(i.field_name)?!1:Vo(i,n.value)})),p=i=>{var U,Y,le;const o=((U=i.field_name)==null?void 0:U.toLowerCase())||"",l=((Y=i.field_label)==null?void 0:Y.toLowerCase())||"",_=((le=i.parent_section_code)==null?void 0:le.toLowerCase())||"",C=["address_line","street","residential_address","property_address","home_address","current_address","permanent_address"],$=["address","residential_address","permanent_address","property_address","current_address","home_address"],j=["residential address","property address","home address","current address","permanent address","street / house number","street address"];return C.includes(o)&&i.field_type==="Data"||$.includes(_)&&(o==="address_line"||o==="street")&&i.field_type==="Data"||j.some(M=>l.includes(M))&&i.field_type==="Data"&&!l.includes("zip")&&!l.includes("postal")},f=i=>{var l;if(i.placeholder)return i.placeholder;const o=((l=i.field_label)==null?void 0:l.toLowerCase())||"";return o.includes("name")?"e.g., Juan Dela Cruz":o.includes("email")?"e.g., juan@example.com":o.includes("phone")||o.includes("mobile")||o.includes("contact")?"e.g., 0917 123 4567":o.includes("age")?"e.g., 25":o.includes("occupation")?"e.g., Teacher":o.includes("income")||o.includes("salary")?"e.g., 15000":`Enter ${i.field_label}`},m=i=>{var l;const o=((l=i.field_label)==null?void 0:l.toLowerCase())||"";return o.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':o.includes("phone")||o.includes("mobile")||o.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':o.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},g=i=>i?i.split(`
`).map(o=>o.trim()).filter(Boolean):[],{errors:d,validateConfigField:v,clearFieldError:x}=Ze(),D=i=>{if(!i.validation&&!i.is_required){x(i.field_name);return}const o=n.value[i.field_name];v(i.field_name,o,i,n.value)},w=i=>d.value[i]||"";return ie(()=>c.fields,i=>{i.forEach(o=>{o.default_value&&!n.value[o.field_name]&&(o.default_value==="Today"&&o.field_type==="Date"?n.value[o.field_name]=new Date().toISOString().split("T")[0]:n.value[o.field_name]=o.default_value)})},{immediate:!0}),(i,o)=>(a(),u("div",Do,[(a(!0),u(G,null,W(h.value,l=>(a(),u("div",{key:l.field_name,class:"field-wrapper"},[p(l)?(a(),u("div",To,[A(So,{modelValue:n.value[l.field_name],"onUpdate:modelValue":_=>n.value[l.field_name]=_,label:l.field_label,required:!!l.is_required},null,8,["modelValue","onUpdate:modelValue","label","required"])])):l.field_type==="Data"?(a(),u("div",Mo,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,y(l.field_label),1),l.is_required?(a(),u("span",Io,"*")):b("",!0),l.help_text||l.description?(a(),O(we,{key:1,text:l.help_text||l.description},null,8,["text"])):b("",!0)],8,Po),e("div",Bo,[Z(e("input",{id:l.field_name,name:l.field_name,type:"text","onUpdate:modelValue":_=>n.value[l.field_name]=_,onBlur:_=>D(l),required:l.is_required,class:R(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":n.value[l.field_name]&&!w(l.field_name),"border-red-500 ring-2 ring-red-100":w(l.field_name)}]),placeholder:f(l)},null,42,jo),[[ae,n.value[l.field_name]]]),m(l)?(a(),u("div",Ro,[e("span",{innerHTML:m(l),class:"text-gray-400"},null,8,Fo)])):b("",!0)]),w(l.field_name)?(a(),u("p",Ao,y(w(l.field_name)),1)):l.description?(a(),u("p",zo,y(l.description),1)):b("",!0)])):l.field_type==="Select"?(a(),u("div",No,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,y(l.field_label),1),l.is_required?(a(),u("span",Eo,"*")):b("",!0),l.help_text||l.description?(a(),O(we,{key:1,text:l.help_text||l.description},null,8,["text"])):b("",!0)],8,Lo),e("div",Oo,[Z(e("select",{id:l.field_name,name:l.field_name,"onUpdate:modelValue":_=>n.value[l.field_name]=_,onBlur:_=>D(l),required:l.is_required,class:R(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":n.value[l.field_name]&&!w(l.field_name),"border-red-500 ring-2 ring-red-100":w(l.field_name)}])},[e("option",Ho,"Select "+y(l.field_label),1),(a(!0),u(G,null,W(g(l.options),_=>(a(),u("option",{key:_,value:_},y(_),9,Go))),128))],42,Uo),[[ve,n.value[l.field_name]]]),o[0]||(o[0]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),w(l.field_name)?(a(),u("p",Yo,y(w(l.field_name)),1)):l.description?(a(),u("p",Wo,y(l.description),1)):b("",!0)])):l.field_type==="Check"?(a(),u("div",Jo,[e("div",{class:R(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!w(l.field_name),"border-red-500 bg-red-50":w(l.field_name)}])},[e("div",Ko,[Z(e("input",{id:l.field_name,name:l.field_name,type:"checkbox","onUpdate:modelValue":_=>n.value[l.field_name]=_,onChange:_=>D(l),required:l.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,Qo),[[Ye,n.value[l.field_name]]])]),e("div",Zo,[e("label",{for:l.field_name,class:"font-medium text-gray-700 cursor-pointer"},[I(y(l.field_label)+" ",1),l.is_required?(a(),u("span",ea,"*")):b("",!0)],8,Xo),w(l.field_name)?(a(),u("p",ta,y(w(l.field_name)),1)):l.description?(a(),u("p",sa,y(l.description),1)):b("",!0)])],2)])):l.field_type==="Text"?(a(),u("div",la,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[I(y(l.field_label)+" ",1),l.is_required?(a(),u("span",aa,"*")):b("",!0)],8,oa),Z(e("textarea",{id:l.field_name,name:l.field_name,"onUpdate:modelValue":_=>n.value[l.field_name]=_,onBlur:_=>D(l),required:l.is_required,rows:"4",class:R(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":n.value[l.field_name]&&!w(l.field_name),"border-red-500 ring-2 ring-red-100":w(l.field_name)}]),placeholder:f(l)},null,42,na),[[ae,n.value[l.field_name]]]),w(l.field_name)?(a(),u("p",ra,y(w(l.field_name)),1)):l.description?(a(),u("p",ia,y(l.description),1)):b("",!0)])):l.field_type==="Date"?(a(),u("div",ua,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,y(l.field_label),1),l.is_required?(a(),u("span",ca,"*")):b("",!0),l.help_text||l.description?(a(),O(we,{key:1,text:l.help_text||l.description},null,8,["text"])):b("",!0)],8,da),e("div",pa,[Z(e("input",{id:l.field_name,name:l.field_name,type:"date","onUpdate:modelValue":_=>n.value[l.field_name]=_,onBlur:_=>D(l),required:l.is_required,class:R(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":n.value[l.field_name]&&!w(l.field_name),"border-red-500 ring-2 ring-red-100":w(l.field_name)}])},null,42,ma),[[ae,n.value[l.field_name]]]),o[1]||(o[1]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),w(l.field_name)?(a(),u("p",fa,y(w(l.field_name)),1)):l.description?(a(),u("p",va,y(l.description),1)):b("",!0)])):l.field_type==="Int"?(a(),u("div",ga,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,y(l.field_label),1),l.is_required?(a(),u("span",ba,"*")):b("",!0),l.help_text||l.description?(a(),O(we,{key:1,text:l.help_text||l.description},null,8,["text"])):b("",!0)],8,ya),e("div",xa,[Z(e("input",{id:l.field_name,name:l.field_name,type:"number","onUpdate:modelValue":_=>n.value[l.field_name]=_,required:l.is_required,step:"1",class:R(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":n.value[l.field_name]}]),placeholder:f(l)},null,10,ha),[[ae,n.value[l.field_name],void 0,{number:!0}]]),o[2]||(o[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),l.description?(a(),u("p",_a,y(l.description),1)):b("",!0)])):l.field_type==="Float"?(a(),u("div",wa,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[I(y(l.field_label)+" ",1),l.is_required?(a(),u("span",Sa,"*")):b("",!0)],8,ka),e("div",Ca,[Z(e("input",{id:l.field_name,name:l.field_name,type:"number","onUpdate:modelValue":_=>n.value[l.field_name]=_,required:l.is_required,step:"0.01",class:R(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":n.value[l.field_name]}]),placeholder:f(l)},null,10,$a),[[ae,n.value[l.field_name],void 0,{number:!0}]]),o[3]||(o[3]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),l.description?(a(),u("p",qa,y(l.description),1)):b("",!0)])):l.field_type==="Currency"?(a(),u("div",Va,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[I(y(l.field_label)+" ",1),l.is_required?(a(),u("span",Ta,"*")):b("",!0)],8,Da),e("div",Ma,[o[4]||(o[4]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-base font-medium"},"")],-1)),Z(e("input",{id:l.field_name,name:l.field_name,type:"number","onUpdate:modelValue":_=>n.value[l.field_name]=_,onBlur:_=>D(l),required:l.is_required,step:"0.01",class:R(["block w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":n.value[l.field_name]&&!w(l.field_name),"border-red-500 ring-2 ring-red-100":w(l.field_name)}]),placeholder:"0.00"},null,42,Pa),[[ae,n.value[l.field_name],void 0,{number:!0}]])]),w(l.field_name)?(a(),u("p",Ia,y(w(l.field_name)),1)):l.description?(a(),u("p",Ba,y(l.description),1)):b("",!0)])):l.field_type==="Attach"||l.field_type==="Attach Image"?(a(),u("div",ja,[A(Bl,{label:l.field_label,required:l.is_required,accept:l.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:n.value[l.field_name],"onUpdate:modelValue":_=>n.value[l.field_name]=_},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):(a(),u("div",Ra,[e("div",Fa,' Field type "'+y(l.field_type)+'" not yet supported for '+y(l.field_label),1)]))]))),128))]))}},Pe=me(Aa,[["__scopeId","data-v-2aa88045"]]),za={class:"dynamic-step max-w-4xl mx-auto"},Na={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},La={class:"flex items-start"},Ea={class:"ml-4 flex-1"},Oa={class:"text-2xl font-bold text-blue-900"},Ua={key:0,class:"mt-2 text-sm text-blue-700"},Ha={class:"space-y-6"},Ga={class:"mb-4 pb-3 border-b-2 border-gray-200"},Ya={class:"flex items-center"},Wa={class:"text-lg font-semibold text-gray-900"},Ja={key:0,class:"text-red-500 ml-1"},Ka={key:0,class:"text-sm text-gray-600 mt-0.5"},Qa={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},Za={class:"section-content"},Xa={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},en={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:r}){const c=t,s=r,n=V({get:()=>c.modelValue,set:m=>s("update:modelValue",m)}),h=V(()=>c.stepConfig.sections?c.stepConfig.sections:[]),p=m=>[m.section_title],f=()=>{console.log("--- DYNAMIC STEP DATA LOG ---"),console.log("Full Form Data (localData):",JSON.parse(JSON.stringify(n.value))),console.log("-----------------------------"),alert("Data logged to console. Check browser console (F12) for the Full Form Data.")};return ie(()=>c.stepConfig,m=>{m.sections&&m.sections.forEach(g=>{g.fields.forEach(d=>{if(d.default_value&&!n.value[d.field_name]){const v=ee({},n.value);d.default_value==="Today"&&d.field_type==="Date"?v[d.field_name]=new Date().toISOString().split("T")[0]:v[d.field_name]=d.default_value,s("update:modelValue",v)}})})},{immediate:!0,deep:!0}),(m,g)=>(a(),u("div",za,[e("div",Na,[e("div",La,[g[3]||(g[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Ea,[e("h2",Oa,y(t.stepConfig.step_title),1),t.stepDescription?(a(),u("p",Ua,y(t.stepDescription),1)):b("",!0)])])]),e("div",Ha,[(a(!0),u(G,null,W(h.value,d=>(a(),u("div",{key:d.section_code,class:"section"},[e("div",Ga,[e("div",Ya,[g[4]||(g[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",Wa,[I(y(d.section_title)+" ",1),d.is_required?(a(),u("span",Ja,"*")):b("",!0)]),d.section_description?(a(),u("p",Ka,y(d.section_description),1)):b("",!0)])]),d.is_required?(a(),u("div",Qa,[...g[5]||(g[5]=[I(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),I(" are required ",-1)])])):b("",!0)]),e("div",Za,[d.section_type==="Tab"?(a(),O(T(Bt),{key:0},{default:z(()=>[A(T(jt),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:z(()=>[(a(!0),u(G,null,W(p(d),(v,x)=>(a(),O(T(Rt),{key:x,class:R(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",m.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:z(({selected:D})=>[I(y(v),1)]),_:2},1032,["class"]))),128))]),_:2},1024),A(T(Ft),null,{default:z(()=>[(a(!0),u(G,null,W(p(d),(v,x)=>(a(),O(T(At),{key:x},{default:z(()=>[A(Pe,{fields:d.fields,modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=D=>n.value=D)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):d.section_type==="Accordion"?(a(),O(T(Vt),{key:1},{default:z(({open:v})=>[A(T(Dt),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:z(()=>[e("span",null,y(d.section_title),1),A(T(Xs),{class:R([v?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),A(T(Tt),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:z(()=>[A(Pe,{fields:d.fields,modelValue:n.value,"onUpdate:modelValue":g[1]||(g[1]=x=>n.value=x)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(a(),u("div",Xa,[A(Pe,{fields:d.fields,modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=v=>n.value=v)},null,8,["fields","modelValue"])]))])]))),128))]),e("div",{class:"mt-8 pt-4 border-t border-gray-200"},[e("button",{onClick:f,class:"px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition"},"  Log Current Data (Debug) "),g[6]||(g[6]=e("p",{class:"text-xs text-gray-500 mt-2"},"Use this button to check if data is being saved correctly to localData/formData.",-1))])]))}},tn=me(en,[["__scopeId","data-v-1145db6a"]]),sn={class:"px-4 sm:px-0"},ln={class:"space-y-4 sm:space-y-6"},on={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6"},an={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-0"},nn={class:"text-base sm:text-lg font-semibold text-blue-900"},rn={class:"text-xs sm:text-sm text-blue-700 mt-1"},un={class:"sm:text-right"},dn={class:"text-xl sm:text-2xl font-bold text-blue-900"},cn={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},pn={class:"p-4 sm:p-6 space-y-3"},mn={class:"grid md:grid-cols-2 gap-4"},fn={class:"font-medium"},vn={class:"font-medium"},gn={class:"font-medium"},yn={key:0},bn={class:"font-medium"},xn={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},hn={class:"p-4 sm:p-6"},_n={key:0,class:"space-y-2"},wn={class:"font-medium"},kn={key:0},Sn={class:"font-medium"},Cn={key:1,class:"text-gray-500"},$n={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},qn={class:"p-4 sm:p-6 space-y-3"},Vn={class:"font-medium"},Dn={class:"font-medium"},Tn={class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},Mn={class:"font-semibold text-gray-900 text-sm sm:text-base"},Pn={class:"p-4 sm:p-6 space-y-4"},In={key:0,class:"text-sm font-medium text-gray-700 mb-2"},Bn={class:"grid md:grid-cols-2 gap-4"},jn={class:"text-sm text-gray-500"},Rn={class:"font-medium"},Fn={key:0,class:"text-gray-500 text-sm"},An={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},zn={class:"p-4 sm:p-6"},Nn={class:"space-y-3"},Ln={class:"mt-2 flex flex-wrap gap-2"},En={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},On={key:1,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},Un={key:2,class:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium"},Hn={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium"},Gn={key:4,class:"px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium"},Yn={key:5,class:"text-gray-500"},Wn={class:"mt-1 inline-flex items-center"},Jn={key:0},Kn={class:"font-medium break-words"},Qn={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Zn={class:"p-4 sm:p-6"},Xn={class:"flex flex-wrap gap-2"},er={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},tr={key:1,class:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},sr={key:2,class:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},lr={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},or={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},ar={class:"p-4 sm:p-6"},nr={class:"space-y-3"},rr={class:"font-medium"},ir={key:0},ur={class:"text-sm mt-1 line-clamp-3"},dr={key:1},cr={class:"text-sm mt-1 line-clamp-3"},pr={class:"flex items-center gap-2"},mr={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},fr={class:"p-4 sm:p-6"},vr={class:"space-y-4"},gr={key:0},yr=["innerHTML"],br={key:1},xr=["innerHTML"],hr={key:2},_r={class:"text-sm mt-1 line-clamp-3"},wr={key:3},kr={class:"text-sm mt-1 space-y-1 list-disc list-inside"},Sr={key:0},Cr={key:1},$r={key:2},qr={key:4},Vr=["innerHTML"],Dr={key:5,class:"text-gray-500 text-sm"},Tr={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Mr={class:"p-4 sm:p-6"},Pr={class:"space-y-2"},Ir={class:"flex items-start gap-2"},Br={class:"flex items-start gap-2"},jr={class:"flex items-start gap-2"},Rr={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Fr={class:"font-medium"},Ar={key:0,class:"text-sm text-gray-500"},zr={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Nr={__name:"ReviewStep",props:{modelValue:{type:Object,required:!0},councilName:{type:String,default:"Council"},requestTypeName:{type:String,default:"Application"},applicationFee:{type:String,default:"TBD"},isResourceConsent:{type:Boolean,default:!1},stepConfigs:{type:Array,default:()=>[]},usesConfigurableSteps:{type:Boolean,default:!1},requestTypeDetails:{type:Object,default:null}},setup(t){const r=t,c=V(()=>!r.usesConfigurableSteps||!r.stepConfigs?[]:r.stepConfigs.filter(i=>i.show_on_review)),s=V(()=>r.isResourceConsent?!0:!!(r.modelValue.property||r.modelValue.property_address)),n=i=>{if(!i.sections)return!1;for(const o of i.sections)if(o.show_on_review){for(const l of o.fields)if(l.show_on_review&&r.modelValue[l.field_name])return!0}return!1},h=(i,o)=>{if(o==null||o==="")return"Not provided";if(i.field_type==="Check")return o?"Yes":"No";if(i.field_type==="Date"&&o)try{return new Date(o).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(l){return o}return i.field_type==="Currency"&&o?`${Number(o).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`:i.field_type==="Select"?o:i.field_type==="Attach"||i.field_type==="Attach Image"?o?" File attached":"Not provided":o},p=V(()=>!!(r.modelValue.consent_type_land_use||r.modelValue.consent_type_subdivision||r.modelValue.consent_type_discharge||r.modelValue.consent_type_water||r.modelValue.consent_type_coastal)),f=V(()=>{const i=r.modelValue.activity_status_type;return i==="Permitted"?"bg-green-100 text-green-800":i==="Controlled"?"bg-blue-100 text-blue-800":i==="Restricted Discretionary"?"bg-yellow-100 text-yellow-800":i==="Discretionary"?"bg-orange-100 text-orange-800":i==="Non-Complying"?"bg-red-100 text-red-800":i==="Prohibited"?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}),m=V(()=>!!(r.modelValue.hazard_flooding||r.modelValue.hazard_earthquake||r.modelValue.hazard_landslip||r.modelValue.hazard_coastal)),g=V(()=>!!(r.modelValue.consultation_undertaken||r.modelValue.consultation_summary||r.modelValue.affected_parties_details||r.modelValue.written_approvals_obtained)),d=V(()=>!!(r.modelValue.activity_description||r.modelValue.aee_full_assessment||r.modelValue.positive_effects_description||r.modelValue.effects_visual_amenity||r.modelValue.effects_traffic_parking||r.modelValue.effects_noise||r.modelValue.mitigation_measures||r.modelValue.aee_activity_description||r.modelValue.aee_existing_environment||r.modelValue.assessment_of_effects||r.modelValue.aee_document)),v=i=>{if(!i)return"";const o=document.createElement("div");return o.innerHTML=i,o.textContent||o.innerText||""},x=(i,o)=>{if(!i)return"";const l=v(i);return l.length<=o?l:l.substring(0,o)+"..."},D=i=>{if(!i)return"";try{return new Date(i).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(o){return i}},w=V(()=>{const i=!!(r.modelValue.council&&r.modelValue.request_type&&r.modelValue.requester_name&&r.modelValue.requester_email&&r.modelValue.property_address&&r.modelValue.delivery_preference);if(r.isResourceConsent){const o=!!(p.value&&r.modelValue.activity_status_type&&r.modelValue.activity_description&&r.modelValue.aee_full_assessment&&r.modelValue.declaration_accuracy&&r.modelValue.declaration_authority&&r.modelValue.declaration_acknowledgment);return i&&o}return i});return(i,o)=>{var l;return a(),u("div",sn,[o[39]||(o[39]=e("h2",{class:"text-xl sm:text-2xl font-bold text-gray-900 mb-2"},"Review & Submit",-1)),o[40]||(o[40]=e("p",{class:"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8"},"Review your application details before submitting",-1)),e("div",ln,[e("div",on,[e("div",an,[e("div",null,[e("h3",nn,y(t.requestTypeName),1),e("p",rn,y(t.councilName),1)]),e("div",un,[o[0]||(o[0]=e("div",{class:"text-xs sm:text-sm text-blue-600 font-medium"},"Application Fee",-1)),e("div",dn,y(t.applicationFee),1)])])]),e("div",cn,[o[5]||(o[5]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Applicant Details")],-1)),e("div",pn,[e("div",mn,[e("div",null,[o[1]||(o[1]=e("span",{class:"text-sm text-gray-500"},"Name:",-1)),e("p",fn,y(t.modelValue.requester_name||"Not provided"),1)]),e("div",null,[o[2]||(o[2]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("p",vn,y(t.modelValue.requester_email||"Not provided"),1)]),e("div",null,[o[3]||(o[3]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("p",gn,y(t.modelValue.requester_phone||"Not provided"),1)]),t.modelValue.applicant_company?(a(),u("div",yn,[o[4]||(o[4]=e("span",{class:"text-sm text-gray-500"},"Company:",-1)),e("p",bn,y(t.modelValue.applicant_company),1)])):b("",!0)])])]),s.value?(a(),u("div",xn,[o[8]||(o[8]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Property Details")],-1)),e("div",hn,[t.modelValue.property_address?(a(),u("div",_n,[e("div",null,[o[6]||(o[6]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",wn,y(t.modelValue.property_address),1)]),t.modelValue.legal_description?(a(),u("div",kn,[o[7]||(o[7]=e("span",{class:"text-sm text-gray-500"},"Legal Description:",-1)),e("p",Sn,y(t.modelValue.legal_description),1)])):b("",!0)])):(a(),u("p",Cn,"No property selected"))])])):b("",!0),(l=t.requestTypeDetails)!=null&&l.collect_payment?(a(),u("div",$n,[o[11]||(o[11]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Delivery & Payment")],-1)),e("div",qn,[e("div",null,[o[9]||(o[9]=e("span",{class:"text-sm text-gray-500"},"Delivery Preference:",-1)),e("p",Vn,y(t.modelValue.delivery_preference||"Not selected"),1)]),e("div",null,[o[10]||(o[10]=e("span",{class:"text-sm text-gray-500"},"Invoice To:",-1)),e("p",Dn,y(t.modelValue.invoice_to||"Not specified"),1)])])])):b("",!0),t.usesConfigurableSteps&&c.value.length>0?(a(!0),u(G,{key:2},W(c.value,_=>(a(),u("div",{key:_.step_code,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},[e("div",Tn,[e("h3",Mn,y(_.step_title),1)]),e("div",Pn,[(a(!0),u(G,null,W(_.sections.filter(C=>C.show_on_review),C=>(a(),u("div",{key:C.section_code},[C.section_title?(a(),u("h4",In,y(C.section_title),1)):b("",!0),e("div",Bn,[(a(!0),u(G,null,W(C.fields.filter($=>$.show_on_review),$=>(a(),u("div",{key:$.field_name},[e("span",jn,y($.review_label||$.field_label)+":",1),e("p",Rn,y(h($,t.modelValue[$.field_name])),1)]))),128))])]))),128)),n(_)?b("",!0):(a(),u("p",Fn," No information to display for review "))])]))),128)):b("",!0),t.isResourceConsent?(a(),u(G,{key:3},[e("div",An,[o[15]||(o[15]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consent Types & Activity Status")],-1)),e("div",zn,[e("div",Nn,[e("div",null,[o[12]||(o[12]=e("span",{class:"text-sm text-gray-500"},"Consent Types:",-1)),e("div",Ln,[t.modelValue.consent_type_land_use?(a(),u("span",En," Land Use Consent ")):b("",!0),t.modelValue.consent_type_subdivision?(a(),u("span",On," Subdivision Consent ")):b("",!0),t.modelValue.consent_type_discharge?(a(),u("span",Un," Discharge Permit ")):b("",!0),t.modelValue.consent_type_water?(a(),u("span",Hn," Water Permit ")):b("",!0),t.modelValue.consent_type_coastal?(a(),u("span",Gn," Coastal Permit ")):b("",!0),p.value?b("",!0):(a(),u("span",Yn," None selected "))])]),e("div",null,[o[13]||(o[13]=e("span",{class:"text-sm text-gray-500"},"Activity Status:",-1)),e("div",Wn,[e("span",{class:R(["px-3 py-1 rounded-full text-sm font-medium",f.value])},y(t.modelValue.activity_status_type||"Not specified"),3)])]),t.modelValue.activity_title?(a(),u("div",Jn,[o[14]||(o[14]=e("span",{class:"text-sm text-gray-500"},"Activity Title:",-1)),e("p",Kn,y(t.modelValue.activity_title),1)])):b("",!0)])])]),m.value?(a(),u("div",Qn,[o[20]||(o[20]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Natural Hazards")],-1)),e("div",Zn,[e("div",Xn,[t.modelValue.hazard_flooding?(a(),u("span",er,[...o[16]||(o[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"})],-1),I(" Flood Hazard ",-1)])])):b("",!0),t.modelValue.hazard_earthquake?(a(),u("span",tr,[...o[17]||(o[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),I(" Earthquake/Fault Line ",-1)])])):b("",!0),t.modelValue.hazard_landslip?(a(),u("span",sr,[...o[18]||(o[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1),I(" Landslip/Slope Instability ",-1)])])):b("",!0),t.modelValue.hazard_coastal?(a(),u("span",lr,[...o[19]||(o[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5"})],-1),I(" Coastal Hazard ",-1)])])):b("",!0)])])])):b("",!0),g.value?(a(),u("div",or,[o[25]||(o[25]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consultation & Affected Parties")],-1)),e("div",ar,[e("div",nr,[e("div",null,[o[21]||(o[21]=e("span",{class:"text-sm text-gray-500"},"Consultation Undertaken:",-1)),e("p",rr,y(t.modelValue.consultation_undertaken||"Not specified"),1)]),t.modelValue.consultation_summary?(a(),u("div",ir,[o[22]||(o[22]=e("span",{class:"text-sm text-gray-500"},"Consultation Summary:",-1)),e("p",ur,y(t.modelValue.consultation_summary),1)])):b("",!0),t.modelValue.affected_parties_details?(a(),u("div",dr,[o[23]||(o[23]=e("span",{class:"text-sm text-gray-500"},"Affected Parties:",-1)),e("p",cr,y(v(t.modelValue.affected_parties_details)),1)])):b("",!0),e("div",pr,[(a(),u("svg",{class:R(["w-5 h-5",t.modelValue.written_approvals_obtained?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[24]||(o[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:R(t.modelValue.written_approvals_obtained?"text-gray-900":"text-gray-500")}," Written Approvals "+y(t.modelValue.written_approvals_obtained?"Obtained":"Not Obtained"),3)])])])])):b("",!0),e("div",mr,[o[31]||(o[31]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Assessment of Environmental Effects")],-1)),e("div",fr,[e("div",vr,[t.modelValue.activity_description?(a(),u("div",gr,[o[26]||(o[26]=e("span",{class:"text-sm text-gray-500"},"Activity Description:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.activity_description},null,8,yr)])):b("",!0),t.modelValue.aee_full_assessment?(a(),u("div",br,[o[27]||(o[27]=e("span",{class:"text-sm text-gray-500"},"Full Assessment:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.aee_full_assessment},null,8,xr)])):b("",!0),t.modelValue.positive_effects_description?(a(),u("div",hr,[o[28]||(o[28]=e("span",{class:"text-sm text-gray-500"},"Positive Effects:",-1)),e("p",_r,y(t.modelValue.positive_effects_description),1)])):b("",!0),t.modelValue.effects_visual_amenity||t.modelValue.effects_traffic_parking||t.modelValue.effects_noise?(a(),u("div",wr,[o[29]||(o[29]=e("span",{class:"text-sm text-gray-500"},"Adverse Effects Summary:",-1)),e("ul",kr,[t.modelValue.effects_visual_amenity?(a(),u("li",Sr,"Visual/Amenity: "+y(x(t.modelValue.effects_visual_amenity,50)),1)):b("",!0),t.modelValue.effects_traffic_parking?(a(),u("li",Cr,"Traffic/Parking: "+y(x(t.modelValue.effects_traffic_parking,50)),1)):b("",!0),t.modelValue.effects_noise?(a(),u("li",$r,"Noise: "+y(x(t.modelValue.effects_noise,50)),1)):b("",!0)])])):b("",!0),t.modelValue.mitigation_measures?(a(),u("div",qr,[o[30]||(o[30]=e("span",{class:"text-sm text-gray-500"},"Mitigation Measures:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.mitigation_measures},null,8,Vr)])):b("",!0),d.value?b("",!0):(a(),u("p",Dr," AEE not yet completed "))])])]),e("div",Tr,[o[36]||(o[36]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Statutory Declarations")],-1)),e("div",Mr,[e("div",Pr,[e("div",Ir,[(a(),u("svg",{class:R(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_accuracy||t.modelValue.declaration_rma_compliance?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[32]||(o[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:R(["text-sm",t.modelValue.declaration_accuracy||t.modelValue.declaration_rma_compliance?"text-gray-900":"text-gray-500"])}," Declaration of Accuracy & RMA Compliance ",2)]),e("div",Br,[(a(),u("svg",{class:R(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_authority||t.modelValue.declaration_authorized?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[33]||(o[33]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:R(["text-sm",t.modelValue.declaration_authority||t.modelValue.declaration_authorized?"text-gray-900":"text-gray-500"])}," Declaration of Authority to Apply ",2)]),e("div",jr,[(a(),u("svg",{class:R(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_acknowledgment||t.modelValue.declaration_public_information?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[34]||(o[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:R(["text-sm",t.modelValue.declaration_acknowledgment||t.modelValue.declaration_public_information?"text-gray-900":"text-gray-500"])}," Public Information & Privacy Acknowledgment ",2)]),t.modelValue.requester_signature?(a(),u("div",Rr,[o[35]||(o[35]=e("span",{class:"text-sm text-gray-500"},"Signed by:",-1)),e("p",Fr,y(t.modelValue.requester_signature),1),t.modelValue.signature_date?(a(),u("p",Ar," Date: "+y(D(t.modelValue.signature_date)),1)):b("",!0)])):b("",!0)])])])],64)):b("",!0),o[38]||(o[38]=pe('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6" data-v-43d60ff6><div class="flex items-start gap-2 sm:gap-3" data-v-43d60ff6><svg class="w-5 h-5 sm:w-6 sm:h-6 text-yellow-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-43d60ff6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-43d60ff6></path></svg><div data-v-43d60ff6><h4 class="font-semibold text-yellow-900 text-sm sm:text-base" data-v-43d60ff6>Before You Submit</h4><ul class="mt-2 text-xs sm:text-sm text-yellow-800 space-y-1 list-disc list-inside" data-v-43d60ff6><li data-v-43d60ff6>Review all information carefully for accuracy and completeness</li><li data-v-43d60ff6>Ensure all required fields are completed</li><li data-v-43d60ff6>For Resource Consent applications, verify all statutory declarations are confirmed</li><li data-v-43d60ff6>Once submitted, you cannot edit the application (you may need to withdraw and resubmit)</li></ul></div></div></div>',1)),w.value?b("",!0):(a(),u("div",zr,[...o[37]||(o[37]=[pe('<div class="flex items-start gap-2 sm:gap-3" data-v-43d60ff6><svg class="w-5 h-5 text-red-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-43d60ff6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-43d60ff6></path></svg><div data-v-43d60ff6><h5 class="font-semibold text-red-900 text-xs sm:text-sm" data-v-43d60ff6>Application Incomplete</h5><p class="text-red-800 text-xs sm:text-sm mt-1" data-v-43d60ff6> Please complete all required sections before submitting. Use the Previous button to go back and fill in missing information. </p></div></div>',1)])]))])])}}},Lr=me(Nr,[["__scopeId","data-v-43d60ff6"]]),Er={class:"min-h-screen bg-gray-50"},Or={class:"bg-white shadow-sm border-b border-gray-200"},Ur={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Hr={class:"flex items-center justify-between py-4"},Gr={class:"flex items-center gap-2"},Yr={class:"bg-white border-b border-gray-200"},Wr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Jr={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Kr={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},Qr={key:0},Zr={key:1},Xr={key:2},ei={key:3},ti={key:5},si={class:"text-xl font-bold text-red-600"},li={class:"list-disc list-inside mt-2 space-y-1 text-sm text-gray-700"},oi={key:0,class:"mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6 shadow-sm"},di={__name:"NewRequest",setup(t){const r=_t(),c=Be(),s=zt(),n=wt(),{errors:h,validateStep:p}=Ze(),f=P(!1),m=P(!1),g=P(!1),d=P(!1),v=P(null),x=P({loading:!1,data:[]}),D=P(null),w=V(()=>{var k;return(k=s.requestTypeConfig)!=null&&k.steps?s.requestTypeConfig.steps.length+4:4}),i=V(()=>{var S;const k=["Council","Type","Process Info"];return(S=s.requestTypeConfig)!=null&&S.steps&&k.push(...s.requestTypeConfig.steps.map(F=>F.step_title)),k.push("Review"),k}),o=V(()=>{var k;return((k=s.requestTypeConfig)==null?void 0:k.steps)&&s.requestTypeConfig.steps.length>0}),l=V(()=>!0),_=V(()=>s.currentStep>=3),C=V(()=>{var S;if(!((S=s.requestTypeConfig)!=null&&S.steps))return null;const k=s.currentStep-3;return k>=0&&k<s.requestTypeConfig.steps.length?s.requestTypeConfig.steps[k]:null}),$=V(()=>{var k;return s.currentStep>2&&s.currentStep<w.value-1&&((k=s.requestTypeConfig)==null?void 0:k.council_meeting_available)===1});function j(){g.value=!0}function U(k){console.log("Meeting booked:",k)}function Y(){const k=s.currentStep;return k>=0&&k<i.value.length?i.value[k]:""}function le(){var F;const k=s.currentStep,S=3;if(k<S||k>=w.value-1)return null;if((F=s.requestTypeConfig)!=null&&F.steps){const K=k-S;if(K>=0&&K<s.requestTypeConfig.steps.length)return s.requestTypeConfig.steps[K]}return null}function M(){const k=s.formData.council;if(!k)return"";const S=n.councils.find(F=>F.council_code===k);return(S==null?void 0:S.council_name)||k}function q(k){return L(this,null,function*(){x.value.loading=!0,yield n.loadRequestTypesForCouncil(k),x.value={loading:!1,data:n.requestTypes||[]}})}function B(k){return L(this,null,function*(){if(s.updateField("request_type",k),yield s.initialize(k),D.value=s.requestTypeConfig,!s.requestTypeConfig){console.error("[NewRequest] Failed to load request type config");return}})}function J(){return L(this,null,function*(){var k;if(s.currentStep===0&&!s.formData.council){alert("Please select a council before continuing.");return}if(s.currentStep===1&&!s.formData.request_type){alert("Please select a request type before continuing.");return}if(s.currentStep>=2&&o.value&&C.value&&!(yield p(C.value,s.formData))){console.error("[NewRequest] Validation failed:",h.value),m.value=!0;return}if(s.currentStep===2&&!s.currentRequestId){if(console.log("[NewRequest] Auto-saving draft after Process Info step..."),console.log("[NewRequest] requestTypeConfig:",s.requestTypeConfig),console.log("[NewRequest] usesConfigurableSteps:",o.value),console.log("[NewRequest] config steps:",(k=s.requestTypeConfig)==null?void 0:k.steps),yield s.saveDraft(),console.log("[NewRequest] Draft saved with ID:",s.currentRequestId),o.value)console.log("[NewRequest] Dynamic steps configured, continuing to next step...");else if(s.currentRequestId){console.log("[NewRequest] No dynamic steps configured, redirecting to detail page..."),c.push(`/request/${s.currentRequestId}`);return}}s.currentRequestId&&(yield s.saveProgress()),s.nextStep()})}function be(){s.previousStep()}function Ae(){return L(this,null,function*(){try{yield s.saveDraft(),s.currentRequestId?c.push(`/request/${s.currentRequestId}`):f.value=!0}catch(k){console.error("Failed to save draft:",k)}})}function et(){return L(this,null,function*(){try{yield s.saveDraft(),s.reset(),c.push({name:"Dashboard"})}catch(k){console.error("Failed to save draft:",k)}})}function tt(){return L(this,null,function*(){try{const k=yield s.submitRequest();v.value=k,d.value=!0}catch(k){console.error("Failed to submit request:",k)}})}function st(){s.reset(),c.push("/dashboard")}function lt(k){d.value=!1,c.push(`/request/${k}`)}function ot(){d.value=!1;const k=s.formData.council;k?c.push(`/council/${k}/dashboard`):c.push("/dashboard")}return ie(()=>s.currentStep,()=>{},{immediate:!0}),ie(()=>s.formData.birth_date,k=>{var S;if(k&&((S=s.formData.request_type)!=null&&S.includes("SPISC"))){const F=new Date,K=new Date(k);let X=F.getFullYear()-K.getFullYear();const E=F.getMonth()-K.getMonth();(E<0||E===0&&F.getDate()<K.getDate())&&X--,s.updateField("age",X),X<60?h.value.birth_date="Applicant must be 60 years or older for SPISC":delete h.value.birth_date}}),se(()=>L(this,null,function*(){const k=r.query.type,S=r.query.draft,F=r.query.council,K=r.query.locked==="true";if(console.log("[NewRequest] Initialization - locked:",K,"council:",F,"type:",k),!S&&!r.query.draft&&s.reset(),!S){const{getApplicationAutoFill:X,applyAutoFill:E}=Xe();try{yield X(),E(s.formData,{overrideExisting:!1})}catch(at){console.warn("[NewRequest] Failed to load user profile for auto-fill:",at)}}if(S&&k){yield s.initialize(k,S),D.value=s.requestTypeConfig;return}if(K&&F&&k&&!S){console.log("[NewRequest] Locked flow detected - skipping to step 2"),s.updateField("council",F),yield q(F),yield s.initialize(k),D.value=s.requestTypeConfig,s.updateField("request_type",k),s.currentStep=2,console.log("[NewRequest] Locked flow complete - currentStep:",s.currentStep);return}F&&!S&&!K?(s.updateField("council",F),yield q(F),k?(yield s.initialize(k),D.value=s.requestTypeConfig,s.updateField("request_type",k),s.currentStep=2):s.currentStep=1):k&&!S&&!F&&(yield s.initialize(k),D.value=s.requestTypeConfig,s.updateField("request_type",k))})),kt((k,S,F)=>{if(s.isSubmitting||!s.currentRequestId){s.reset(),F();return}s.formData&&Object.keys(s.formData).some(X=>s.formData[X]!==void 0&&s.formData[X]!==null&&s.formData[X]!=="")&&!confirm("You have unsaved changes. Do you want to leave without saving?")?F(!1):(k.path.includes("/request/")||s.reset(),F())}),(k,S)=>{var F,K,X;return a(),u("div",Er,[e("header",Or,[e("div",Ur,[e("div",Hr,[e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:st,class:"text-gray-500 hover:text-gray-700"},[...S[9]||(S[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),S[10]||(S[10]=e("div",null,[e("h1",{class:"text-xl font-bold text-gray-900"},"New Application")],-1))]),e("div",Gr,[_.value?(a(),O(T(ne),{key:0,onClick:Ae,variant:"outline",theme:"gray",loading:T(s).isSaving},{default:z(()=>[...S[11]||(S[11]=[I(" Save Draft ",-1)])]),_:1},8,["loading"])):b("",!0),_.value?(a(),O(T(ne),{key:1,onClick:et,variant:"outline",theme:"gray",loading:T(s).isSaving},{default:z(()=>[...S[12]||(S[12]=[I(" Save and Close ",-1)])]),_:1},8,["loading"])):b("",!0)])])])]),e("div",Yr,[e("div",Wr,[A(Zt,{"current-step":T(s).currentStep,"total-steps":w.value,"step-titles":i.value},null,8,["current-step","total-steps","step-titles"])])]),e("main",Jr,[e("div",Kr,[Y()==="Council"?(a(),u("div",Qr,[A(ks,{modelValue:T(s).formData,"onUpdate:modelValue":S[0]||(S[0]=E=>T(s).formData=E),onCouncilChange:q},null,8,["modelValue"])])):Y()==="Type"?(a(),u("div",Zr,[A(Rs,{modelValue:T(s).formData,"onUpdate:modelValue":S[1]||(S[1]=E=>T(s).formData=E),"request-types":x.value,onTypeSelected:B},null,8,["modelValue","request-types"])])):Y()==="Process Info"?(a(),u("div",Xr,[A(Zs,{"request-type-details":D.value,"council-name":M(),modelValue:T(s).formData,"onUpdate:modelValue":S[2]||(S[2]=E=>T(s).formData=E),onContinue:J},null,8,["request-type-details","council-name","modelValue"])])):Y()==="Review"?(a(),u("div",ei,[A(Lr,{modelValue:T(s).formData,"onUpdate:modelValue":S[3]||(S[3]=E=>T(s).formData=E),"request-type-config":T(s).requestTypeConfig},null,8,["modelValue","request-type-config"])])):o.value&&le()?(a(),O(tn,{key:4,stepConfig:le(),modelValue:T(s).formData,"onUpdate:modelValue":S[4]||(S[4]=E=>T(s).formData=E)},null,8,["stepConfig","modelValue"])):(a(),u("div",ti,[e("h2",si,"ERROR: Step "+y(T(s).currentStep)+" Fallback Hit!",1),S[18]||(S[18]=e("p",{class:"mt-2"},"The dynamic step condition failed to render. Check the following values:",-1)),e("ul",li,[e("li",null,[S[13]||(S[13]=e("strong",null,"Current Step Title:",-1)),I(" "+y(Y()),1)]),e("li",null,[S[14]||(S[14]=e("strong",null,"Request Config Loaded:",-1)),I(" "+y(!!T(s).requestTypeConfig),1)]),e("li",null,[S[15]||(S[15]=e("strong",null,"Calculated Total Steps:",-1)),I(" "+y(w.value),1)]),e("li",null,[S[16]||(S[16]=e("strong",null,"Uses Configurable Steps:",-1)),I(" "+y(o.value),1)]),e("li",null,[S[17]||(S[17]=e("strong",null,"Current Step Config:",-1)),I(" "+y(JSON.stringify(le())),1)])]),S[19]||(S[19]=e("p",{class:"mt-4 text-sm text-gray-500"},"If 'Current Step Config' is not null, the issue is likely within DynamicStepRenderer or component registration.",-1))]))]),$.value?(a(),u("div",oi,[e("div",{class:"flex items-start justify-between"},[e("div",{class:"flex-1"},[S[20]||(S[20]=pe('<div class="flex items-center gap-2 mb-2"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><h3 class="text-lg font-semibold text-gray-900">Pre-Application Meeting Available</h3></div><p class="text-sm text-gray-700 mb-3"> Schedule a meeting with council planners to discuss your application before submitting. This optional step can help clarify requirements and improve your application. </p>',2)),e("button",{onClick:j,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," Request Council Meeting ")])])])):b("",!0),A(ss,{"current-step":T(s).currentStep,"total-steps":w.value,"is-last-step":T(s).isLastStep,"can-go-next":l.value,"can-save-draft":_.value,"is-saving":T(s).isSaving,"is-submitting":T(s).isSubmitting,onNext:J,onPrevious:be,onSaveDraft:Ae,onSubmit:tt},null,8,["current-step","total-steps","is-last-step","can-go-next","can-save-draft","is-saving","is-submitting"])]),A(ns,{show:f.value,"onUpdate:show":S[5]||(S[5]=E=>f.value=E),"draft-id":T(s).currentRequestId},null,8,["show","draft-id"]),A(ps,{show:m.value,"onUpdate:show":S[6]||(S[6]=E=>m.value=E),errors:T(h)},null,8,["show","errors"]),A(St,{show:g.value,"onUpdate:show":S[7]||(S[7]=E=>g.value=E),"request-id":T(s).currentRequestId,"request-type-code":T(s).formData.request_type,"council-code":T(s).formData.council,onBooked:U},null,8,["show","request-id","request-type-code","council-code"]),A(ws,{open:d.value,"request-number":(F=v.value)==null?void 0:F.request_number,"request-id":(K=v.value)==null?void 0:K.request_id,"sla-info":(X=v.value)==null?void 0:X.sla_info,onClose:S[8]||(S[8]=E=>d.value=!1),onViewRequest:lt,onGoToDashboard:ot},null,8,["open","request-number","request-id","sla-info"])])}}};export{di as default};
//# sourceMappingURL=NewRequest-v2bF4PWx.js.map
