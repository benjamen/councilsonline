import{f as I,z as N,k as P,j as h,i as x,c as n,o as i,a as t,b as g,u as s,t as a,d as c,w as r,B as m,h as p,p as y,F as v,m as w,g as J,A as V}from"./index-Dyzsynzr.js";import{D as H}from"./Dropdown-Cluqqs-n.js";import{_ as z}from"./StatusBadge-YeydszwD.js";const O={class:"min-h-screen bg-gray-50"},L={class:"bg-white shadow-sm border-b border-gray-200"},U={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},E={class:"flex items-center justify-between"},G={class:"flex items-center space-x-3"},Q={key:0},W={class:"text-xl font-bold text-gray-900"},Z={class:"text-sm text-gray-500"},K={key:0,class:"flex items-center space-x-3"},X={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 text-center"},Y={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},tt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},et={class:"lg:col-span-2 space-y-6"},st={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ot={class:"grid grid-cols-2 gap-4"},at={class:"mt-1 text-sm font-medium text-gray-900"},lt={class:"text-xs text-gray-500"},nt={class:"mt-1 text-sm font-medium text-gray-900"},it={class:"mt-1 text-sm font-medium text-gray-900"},dt={class:"mt-4 pt-4 border-t border-gray-200"},rt={class:"text-sm text-gray-900"},ct={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ut={class:"p-6 border-b border-gray-200 flex justify-between items-center"},mt={class:"p-6"},pt={class:"space-y-4"},gt=["checked"],xt={class:"flex-1"},yt={class:"text-sm font-medium text-gray-900"},_t={class:"mt-1 flex items-center space-x-4 text-xs text-gray-500"},ft={key:0},bt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ht={class:"space-y-3"},vt={class:"flex justify-between items-center"},wt={class:"text-sm font-medium text-gray-900"},kt={class:"flex justify-between items-center"},Ct={class:"text-sm font-medium text-gray-900"},At={class:"flex justify-between items-center"},St={class:"text-sm text-gray-600"},jt={class:"text-sm font-medium text-gray-900"},Dt={class:"pt-3 border-t border-gray-200 flex justify-between items-center"},Rt={class:"text-base font-bold text-green-600"},Tt={class:"space-y-6"},qt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ft={key:0,class:"mb-6"},Mt={class:"flex items-center justify-between mb-2"},$t={class:"text-xs text-gray-600"},Bt={class:"w-full bg-gray-200 rounded-full h-2"},It={class:"mt-2 text-xs text-gray-500"},Nt={class:"space-y-3"},Pt={class:"flex-1 min-w-0"},Jt={class:"text-sm font-medium text-gray-900"},Vt={class:"text-xs text-gray-500"},Ht={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},zt={class:"space-y-2"},Gt={__name:"InternalRequestDetail",setup(Ot){const k=I(),C=N(),o=P({url:"frappe.client.get",params:{doctype:"Request",name:C.params.id},auto:!0}),_=h([{id:1,title:"Review application documents",assignee:"John Smith",hours:2,cost:300,completed:!0},{id:2,title:"Site inspection",assignee:"Jane Doe",hours:4,cost:600,completed:!1},{id:3,title:"Prepare decision report",assignee:"John Smith",hours:3,cost:450,completed:!1}]),A=h([{title:"Application Submitted",date:"10 Oct 2025",color:"bg-blue-500"},{title:"Assigned to John Smith",date:"11 Oct 2025",color:"bg-green-500"},{title:"Under Review",date:"12 Oct 2025",color:"bg-yellow-500"}]),f=x(()=>_.value.reduce((d,e)=>d+e.hours,0)),b=x(()=>f.value*150),S=x(()=>{var l,u;const d=parseFloat(((l=o.data)==null?void 0:l.application_fee)||0),e=parseFloat(((u=o.data)==null?void 0:u.additional_charges)||0);return d+e+b.value}),j=()=>{var l,u;const d=((l=o.data)==null?void 0:l.working_days_elapsed)||0,e=((u=o.data)==null?void 0:u.statutory_timeframe)||20;return Math.min(d/e*100,100)},D=()=>{k.push({name:"InternalRequestManagement"})},R=d=>d?new Date(d).toLocaleDateString("en-NZ",{day:"numeric",month:"short",year:"numeric"}):"N/A",T=()=>{console.log("Add task")},q=()=>{console.log("Add charge")},F=()=>{console.log("Issue RFI")},M=()=>{console.log("Approve request")},$=()=>{console.log("Decline request")},B=[{label:"Send Message",onClick:()=>console.log("Message")},{label:"Generate Report",onClick:()=>console.log("Report")},{label:"View History",onClick:()=>console.log("History")}];return(d,e)=>(i(),n("div",O,[t("header",L,[t("div",U,[t("div",E,[t("div",G,[t("button",{onClick:D,class:"text-gray-500 hover:text-gray-700"},[...e[0]||(e[0]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),s(o).data?(i(),n("div",Q,[t("h1",W,a(s(o).data.request_number),1),t("p",Z,a(s(o).data.request_type),1)])):g("",!0)]),s(o).data?(i(),n("div",K,[c(z,{status:s(o).data.status},null,8,["status"]),c(s(H),{options:B},{default:r(({open:l})=>[c(s(m),{variant:"outline",theme:"gray"},{suffix:r(()=>[...e[1]||(e[1]=[t("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])]),default:r(()=>[e[2]||(e[2]=p(" Actions ",-1))]),_:1})]),_:1})])):g("",!0)])])]),s(o).loading?(i(),n("div",X,[...e[3]||(e[3]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"},null,-1)])])):s(o).data?(i(),n("div",Y,[t("div",tt,[t("div",et,[t("div",st,[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Request Details",-1)),t("dl",ot,[t("div",null,[e[4]||(e[4]=t("dt",{class:"text-sm text-gray-600"},"Applicant",-1)),t("dd",at,a(s(o).data.applicant_name),1),t("dd",lt,a(s(o).data.applicant_email),1)]),t("div",null,[e[5]||(e[5]=t("dt",{class:"text-sm text-gray-600"},"Property",-1)),t("dd",nt,a(s(o).data.property_address),1)]),t("div",null,[e[6]||(e[6]=t("dt",{class:"text-sm text-gray-600"},"Submitted",-1)),t("dd",it,a(R(s(o).data.submitted_date)),1)]),t("div",null,[e[7]||(e[7]=t("dt",{class:"text-sm text-gray-600"},"Days Elapsed",-1)),t("dd",{class:y(["mt-1 text-sm font-medium",s(o).data.is_overdue?"text-red-600":"text-gray-900"])},a(s(o).data.working_days_elapsed||0)+" days ",3)])]),t("div",dt,[e[8]||(e[8]=t("dt",{class:"text-sm text-gray-600 mb-2"},"Description",-1)),t("dd",rt,a(s(o).data.brief_description),1)])]),t("div",ct,[t("div",ut,[e[12]||(e[12]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Tasks & Work",-1)),c(s(m),{onClick:T,variant:"solid",theme:"green",size:"sm"},{prefix:r(()=>[...e[10]||(e[10]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:r(()=>[e[11]||(e[11]=p(" Add Task ",-1))]),_:1})]),t("div",mt,[t("div",pt,[(i(!0),n(v,null,w(_.value,l=>(i(),n("div",{key:l.id,class:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg"},[t("input",{type:"checkbox",checked:l.completed,class:"mt-1 h-5 w-5 text-green-600 rounded"},null,8,gt),t("div",xt,[t("h4",yt,a(l.title),1),t("div",_t,[t("span",null,a(l.assignee),1),t("span",null,a(l.hours)+"h",1),l.cost?(i(),n("span",ft,"$"+a(l.cost),1)):g("",!0)])])]))),128))])])]),t("div",bt,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Costing Summary",-1)),t("div",ht,[t("div",vt,[e[13]||(e[13]=t("span",{class:"text-sm text-gray-600"},"Application Fee",-1)),t("span",wt,"$"+a(s(o).data.application_fee||0),1)]),t("div",kt,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-600"},"Additional Charges",-1)),t("span",Ct,"$"+a(s(o).data.additional_charges||0),1)]),t("div",At,[t("span",St,"Staff Time ("+a(f.value)+"h @ $150/h)",1),t("span",jt,"$"+a(b.value),1)]),t("div",Dt,[e[15]||(e[15]=t("span",{class:"text-base font-semibold text-gray-900"},"Total Cost",-1)),t("span",Rt,"$"+a(S.value),1)])]),c(s(m),{onClick:q,variant:"outline",theme:"green",class:"w-full mt-4"},{default:r(()=>[...e[16]||(e[16]=[p(" Add Additional Charge ",-1)])]),_:1})])]),t("div",Tt,[e[25]||(e[25]=J('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><h3 class="text-sm font-semibold text-gray-900 mb-4">Assignment</h3><div class="space-y-3"><div><label class="block text-xs font-medium text-gray-700 mb-2">Assigned To</label><select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"><option value="">Unassigned</option><option value="planner1">John Smith (Planner)</option><option value="planner2">Jane Doe (Planner)</option></select></div><div><label class="block text-xs font-medium text-gray-700 mb-2">Priority</label><select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"><option value="low">Low</option><option value="medium">Medium</option><option value="high">High</option><option value="urgent">Urgent</option></select></div></div></div>',1)),t("div",qt,[e[20]||(e[20]=t("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Timeline",-1)),s(o).data.statutory_clock_started?(i(),n("div",Ft,[t("div",Mt,[e[18]||(e[18]=t("span",{class:"text-xs font-medium text-gray-700"},"Statutory Clock",-1)),t("span",$t,a(s(o).data.working_days_elapsed||0)+" / "+a(s(o).data.statutory_timeframe||20)+" days ",1)]),t("div",Bt,[t("div",{class:y(["h-2 rounded-full transition-all",s(o).data.is_overdue?"bg-red-600":"bg-green-600"]),style:V({width:`${j()}%`})},null,6)]),t("p",It,a(s(o).data.working_days_remaining||0)+" days remaining "+a(s(o).data.statutory_clock_stopped?"(Clock stopped)":""),1)])):g("",!0),t("div",Nt,[(i(!0),n(v,null,w(A.value,(l,u)=>(i(),n("div",{key:u,class:"flex items-start space-x-3"},[t("div",{class:y(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",l.color])},[...e[19]||(e[19]=[t("div",{class:"w-2 h-2 rounded-full bg-white"},null,-1)])],2),t("div",Pt,[t("p",Jt,a(l.title),1),t("p",Vt,a(l.date),1)])]))),128))])]),t("div",Ht,[e[24]||(e[24]=t("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),t("div",zt,[c(s(m),{onClick:F,variant:"outline",theme:"orange",class:"w-full justify-center"},{default:r(()=>[...e[21]||(e[21]=[p(" Issue RFI ",-1)])]),_:1}),c(s(m),{onClick:M,variant:"outline",theme:"green",class:"w-full justify-center"},{default:r(()=>[...e[22]||(e[22]=[p(" Approve ",-1)])]),_:1}),c(s(m),{onClick:$,variant:"outline",theme:"red",class:"w-full justify-center"},{default:r(()=>[...e[23]||(e[23]=[p(" Decline ",-1)])]),_:1})])])])])])):g("",!0)]))}};export{Gt as default};
//# sourceMappingURL=InternalRequestDetail-DVBL_2aw.js.map
