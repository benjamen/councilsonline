const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SendMessageModal-DNQbiT1H.js","assets/index-BQMMZSFc.js","assets/index-QsMHYQ2P.css","assets/BookMeetingModal-NhpOoIgs.js","assets/PaymentModal-BXksQz01.js"])))=>i.map(i=>d[i]);
var Tt=Object.defineProperty;var ct=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable;var pt=(v,g,c)=>g in v?Tt(v,g,{enumerable:!0,configurable:!0,writable:!0,value:c}):v[g]=c,Z=(v,g)=>{for(var c in g||(g={}))$t.call(g,c)&&pt(v,c,g[c]);if(ct)for(var c of ct(g))Et.call(g,c)&&pt(v,c,g[c]);return v};var P=(v,g,c)=>new Promise((V,M)=>{var F=_=>{try{S(c.next(_))}catch(A){M(A)}},j=_=>{try{S(c.throw(_))}catch(A){M(A)}},S=_=>_.done?V(_.value):Promise.resolve(_.value).then(F,j);S((c=c.apply(v,g)).next())});import{C as zt,f as Vt,r as C,n as $,E as gt,j as E,c as l,o as r,b as q,a as e,d as i,w as x,z as R,u as a,i as D,h as w,t as n,B as z,F as N,l as B,g as Ht,y as Ut,J as Y,K}from"./index-BQMMZSFc.js";import{_ as yt}from"./StatusBadge-CmoGtffR.js";import{_ as Jt}from"./RequestHeader-CTntYCNo.js";import{u as Ot}from"./useStatutoryClock-C9SBTSEM.js";const Xt={class:"min-h-screen bg-gray-50"},Zt={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Yt={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Kt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Qt={class:"lg:col-span-2 space-y-6"},Gt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Wt={class:"grid grid-cols-2 gap-4"},te={class:"mt-1 text-sm text-gray-900"},ee={class:"mt-1 text-sm text-gray-900"},se={class:"mt-1"},ae={class:"mt-1 text-sm text-gray-900"},oe={class:"mt-6 pt-6 border-t border-gray-200"},re={class:"mt-1 text-sm text-gray-900"},ne={class:"mt-4"},le=["innerHTML"],ie={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},de={class:"grid grid-cols-2 gap-4"},ue={key:0},me={class:"mt-1 text-sm text-gray-900"},ce={key:1},pe={class:"mt-1 text-sm text-gray-900"},ge={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ye={class:"grid grid-cols-2 gap-4"},fe={class:"mt-1 text-sm text-gray-900"},xe={class:"mt-1 text-sm text-gray-900"},_e={class:"mt-1 text-sm text-gray-900"},be={class:"mt-1 text-sm text-gray-900"},ve={key:0},he={class:"mt-1 text-sm text-gray-900"},we={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ke={class:"space-y-6"},Ce={class:"grid grid-cols-2 gap-4"},Me={class:"mt-1 text-sm text-gray-900"},qe={class:"mt-1 text-sm text-gray-900"},Se={class:"mt-1 text-sm text-gray-900"},Ae={class:"mt-1 text-sm text-gray-900"},De={class:"grid grid-cols-2 gap-4"},Pe={class:"mt-1 text-sm text-gray-900"},Ne={class:"mt-1 text-sm text-gray-900"},Be={class:"mt-1 text-sm text-gray-900"},Fe={class:"mt-1 text-sm text-gray-900"},Re={class:"mt-1 text-sm text-gray-900"},je={class:"grid grid-cols-2 gap-4"},Ie={key:0},Le={class:"mt-1 text-sm text-gray-900"},Te={key:1},$e={class:"mt-1 text-sm text-gray-900"},Ee={key:2},ze={class:"mt-1 text-sm text-gray-900"},Ve={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},He={class:"grid grid-cols-2 gap-4"},Ue={key:0},Je={class:"mt-1 text-sm text-gray-900"},Oe={key:1},Xe={class:"mt-1 text-sm text-gray-900"},Ze={key:2},Ye={class:"mt-1 text-sm text-gray-900"},Ke={key:3},Qe={class:"mt-1 text-sm text-gray-900"},Ge={key:4,class:"col-span-2"},We={class:"mt-1 text-sm text-gray-900"},ts={key:3,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},es={class:"flex justify-between items-start mb-4"},ss={key:0,class:"space-y-4"},as={class:"grid grid-cols-2 gap-3 text-sm"},os={class:"ml-2 text-gray-900"},rs={class:"ml-2 text-gray-900"},ns={key:0,class:"col-span-2"},ls={class:"ml-2 text-gray-900"},is={key:1,class:"col-span-2"},ds={class:"ml-2 text-gray-900"},us={key:2,class:"col-span-2"},ms={class:"ml-2 text-gray-900"},cs={key:3,class:"col-span-2"},ps=["href"],gs={key:0,class:"mt-3 pt-3 border-t border-blue-200"},ys={class:"mt-1 text-sm text-gray-900"},fs={key:1,class:"mt-3 pt-3 border-t border-blue-200"},xs={class:"mt-2 space-y-1"},_s={key:2,class:"mt-4 pt-3 border-t border-blue-200 flex space-x-3"},bs=["onClick"],vs=["onClick","disabled"],hs={key:1,class:"text-center py-6"},ws={class:"text-lg font-semibold text-gray-900 mb-4"},ks={class:"space-y-4"},Cs={key:0,class:"text-md font-medium text-gray-700 mb-3"},Ms={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qs={class:"text-sm font-medium text-gray-500"},Ss={class:"mt-1 text-sm text-gray-900"},As={key:0,class:"text-gray-500 text-sm"},Ds={key:5,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ps={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ns={class:"text-sm font-medium text-gray-500"},Bs={class:"mt-1 text-sm text-gray-900"},Fs={key:6,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Rs={class:"flex justify-between items-center mb-4"},js={class:"space-y-3"},Is={class:"flex justify-between items-center py-2 border-b border-gray-100"},Ls={class:"text-sm font-semibold text-gray-900"},Ts={class:"flex justify-between items-center py-2 border-b border-gray-100"},$s={class:"text-sm font-semibold text-green-600"},Es={class:"flex justify-between items-center py-2"},zs={class:"text-sm font-bold text-orange-600"},Vs={key:7,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Hs={class:"flex justify-between items-center mb-4"},Us={class:"space-y-3"},Js={class:"flex justify-between items-center py-2 border-b border-gray-100"},Os={class:"text-sm font-semibold text-gray-900"},Xs={class:"flex justify-between items-center py-2 border-b border-gray-100"},Zs={key:0,class:"flex justify-between items-center py-2"},Ys={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ks={class:"flex justify-between items-center mb-4"},Qs={key:0,class:"text-center py-8"},Gs={class:"space-y-6"},Ws={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ta={key:0,class:"mb-6 p-4 bg-blue-50 rounded-lg"},ea={class:"flex items-center justify-between mb-2"},sa={class:"text-xs text-blue-700"},aa={class:"w-full bg-blue-200 rounded-full h-2"},oa={class:"mt-2 text-xs text-blue-700"},ra={class:"space-y-4"},na={class:"flex items-start space-x-3"},la={class:"flex-1"},ia={class:"text-xs text-gray-500"},da={key:0,class:"flex items-start space-x-3"},ua={class:"flex-1"},ma={class:"text-xs text-gray-500"},ca={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},pa={class:"space-y-3"},ga={class:"bg-blue-50 rounded-lg border border-blue-200 p-6"},ya={class:"text-xs text-blue-800 mb-4"},fa={key:0,class:"text-xs text-blue-800"},xa={key:1,class:"space-y-2 text-xs text-blue-900"},_a={key:0,class:"flex items-center space-x-2"},ba=["href"],va={key:1,class:"flex items-center space-x-2"},ha=["href"],Sa={__name:"RequestDetail",setup(v){const g=Y(()=>K(()=>import("./SendMessageModal-DNQbiT1H.js"),__vite__mapDeps([0,1,2]))),c=Y(()=>K(()=>import("./BookMeetingModal-NhpOoIgs.js"),__vite__mapDeps([3,1,2]))),V=Y(()=>K(()=>import("./PaymentModal-BXksQz01.js"),__vite__mapDeps([4,1,2]))),M=zt(),F=Vt(),j=C(null),S=C(!1),_=C(!1),A=C(!1),H=C(!1),U=C(!1),I=C(!1),o=$({url:"frappe.client.get",params:{doctype:"Request",name:M.params.id},auto:!0}),y=$({url:"lodgeick.api.get_request_meetings",params:{request_id:M.params.id},auto:!0}),b=$({url:"lodgeick.api.get_request_type_config",auto:!1}),h=$({url:"frappe.client.get",auto:!1});gt(()=>{var s;return(s=o.data)==null?void 0:s.request_type},s=>{s&&b.fetch({request_type_code:s})},{immediate:!0}),gt(()=>{var s;return(s=o.data)==null?void 0:s.council},s=>{s&&h.fetch({doctype:"Council",name:s,fields:["name","council_name","contact_email","contact_phone"]})},{immediate:!0});const{clockData:L,progressPercent:ft}=Ot(o),J=E(()=>{if(!o.data)return{};try{let s=null;if(o.data.draft_full_data&&(s=typeof o.data.draft_full_data=="string"?JSON.parse(o.data.draft_full_data):o.data.draft_full_data),!s)return{};const t=["name","owner","creation","modified","modified_by","docstatus","idx","council","request_type","request_number","status","requester","requester_name","requester_email","requester_phone","requester_signature","applicant_address","applicant_company","property","property_address","legal_description","brief_description","detailed_description","delivery_preference","invoice_to","invoice_recipient_name","invoice_recipient_email","purchase_order_number","total_fees","total_paid","payment_status","request_category","draft_current_step","draft_total_steps","draft_full_data","form_data","signature_date"],p={};return Object.keys(s).forEach(m=>{!t.includes(m)&&s[m]!==null&&s[m]!==""&&(p[m]=s[m])}),p}catch(s){return console.error("Error parsing form data:",s),{}}}),u=E(()=>{if(!o.data)return{};try{let s={};return o.data.draft_full_data&&(s=typeof o.data.draft_full_data=="string"?JSON.parse(o.data.draft_full_data):o.data.draft_full_data),Z(Z({},o.data),s)}catch(s){return console.error("Error merging form data:",s),o.data}}),Q=E(()=>{var s;return(s=b.data)!=null&&s.steps?b.data.steps.filter(t=>t.show_on_review):[]}),xt=E(()=>{var s,t;return!!((s=u.value)!=null&&s.property_address||(t=b.data)!=null&&t.property_required)}),_t=s=>{if(!s.sections)return!1;for(const t of s.sections)if(t.show_on_review){for(const p of t.fields)if(p.show_on_review&&o.data[p.field_name])return!0}return!1},bt=(s,t)=>{if(t==null||t==="")return"Not provided";if(s.field_type==="Check")return t?"Yes":"No";if(s.field_type==="Date"&&t)try{return new Date(t).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(p){return t}return s.field_type==="Currency"&&t?`$${Number.parseFloat(t).toFixed(2)}`:Array.isArray(t)?t.join(", "):t},vt=s=>s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),ht=s=>{if(s==null||s==="")return"Not provided";if(typeof s=="boolean")return s?"Yes":"No";if(Array.isArray(s))return s.join(", ");if(typeof s=="object")return JSON.stringify(s);if(typeof s=="string"&&/^\d{4}-\d{2}-\d{2}/.test(s))try{return new Date(s).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(t){return s}return s},wt=s=>{if(!s)return null;if(typeof s=="string")return s;if(s.full_address)return s.full_address;const t=[];return s.address_line&&t.push(s.address_line),s.barangay&&t.push(`Brgy. ${s.barangay}`),s.municipality&&t.push(s.municipality),s.province&&t.push(s.province),s.zip_code&&t.push(s.zip_code),t.length>0?t.join(", "):null},kt=()=>{F.push({name:"Dashboard"})},G=s=>{if(!s)return"Not scheduled";try{return new Date(s).toLocaleString("en-NZ",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return s}},T=s=>s?new Date(s).toLocaleDateString("en-NZ",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",Ct=()=>{j.value.click()},Mt=s=>P(this,null,function*(){const t=Array.from(s.target.files);if(t.length!==0){S.value=!0;try{for(const p of t){const m=new FormData;m.append("file",p),m.append("doctype","Request"),m.append("docname",o.data.name),m.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:m})}alert(`${t.length} document(s) uploaded successfully!`),o.reload(),s.target.value=""}catch(p){console.error("Error uploading file:",p),alert("Failed to upload document. Please try again.")}finally{S.value=!1}}}),qt=()=>{U.value=!0},St=()=>{o.reload()},At=()=>{window.print()},Dt=()=>{if(!o.data){alert("Error: Request data not loaded");return}if(!o.data.request_type){alert("Error: Request type missing");return}const s=`/request/new?type=${encodeURIComponent(o.data.request_type)}&draft=${encodeURIComponent(o.data.name)}`;F.push(s)},Pt=()=>P(this,null,function*(){if(confirm("Are you sure you want to delete this draft application? This action cannot be undone.")){A.value=!0;try{yield fetch("/api/method/frappe.client.delete",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({doctype:"Request",name:o.data.name})}),alert("Draft deleted successfully"),F.push({name:"Dashboard"})}catch(s){console.error("Error deleting draft:",s),alert("Failed to delete draft. Please try again.")}finally{A.value=!1}}}),Nt=()=>P(this,null,function*(){if(confirm("Are you sure you want to submit this application? Once submitted, it cannot be edited.")){_.value=!0;try{const t=yield(yield fetch("/api/method/lodgeick.lodgeick.doctype.request.request.submit_application",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:o.data.name})})).json();if(t.message&&t.message.success)alert(`Application submitted successfully! Request Number: ${t.message.request_number}`),o.reload();else throw new Error("Failed to submit application")}catch(s){console.error("Error submitting application:",s),alert("Failed to submit application. Please try again.")}finally{_.value=!1}}}),O=C(!1),Bt=()=>{O.value=!0},Ft=s=>{const t=s.warning||`Invoice requested successfully!

Invoice #${s.invoice_number}
An email has been sent to ${s.email}`;alert(t),resource.reload()},Rt=()=>{I.value=!0},jt=s=>P(this,null,function*(){alert(`Meeting request submitted successfully!

Meeting ID: ${s.meeting_id}
Status: ${s.status}

A council planner will contact you within 2 business days.`),X.value=null,yield y.reload()}),X=C(null),It=s=>{X.value=s,I.value=!0},Lt=s=>P(this,null,function*(){var t;if(confirm(`Are you sure you want to cancel this meeting request?

Meeting Type: ${s.meeting_type}
Status: ${s.status}

This action cannot be undone.`)){H.value=!0;try{const m=yield(yield fetch("/api/method/lodgeick.api.cancel_meeting",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({meeting_id:s.name})})).json();if(m.message&&m.message.success)alert("Meeting cancelled successfully."),yield y.reload();else throw new Error(((t=m.message)==null?void 0:t.error)||"Failed to cancel meeting")}catch(p){console.error("Error cancelling meeting:",p),alert(`Failed to cancel meeting: ${p.message}

Please try again or contact support.`)}finally{H.value=!1}}});return(s,t)=>{var p,m,W,tt,et,st,at,ot,rt,nt,lt,it,dt,ut,mt;return r(),l("div",Xt,[q(Jt,{title:((p=a(o).data)==null?void 0:p.request_number)||"Loading...",subtitle:(m=a(o).data)==null?void 0:m.request_type,loading:a(o).loading,onBack:kt},{actions:x(()=>{var d;return[a(o).data?(r(),R(yt,{key:0,status:a(o).data.workflow_state},null,8,["status"])):i("",!0),((d=a(o).data)==null?void 0:d.workflow_state)==="Draft"?(r(),R(a(D),{key:1,onClick:Nt,variant:"solid",theme:"blue",loading:_.value},{default:x(()=>[...t[3]||(t[3]=[w(" Submit Application ",-1)])]),_:1},8,["loading"])):i("",!0)]}),_:1},8,["title","subtitle","loading"]),e("input",{ref_key:"fileInput",ref:j,type:"file",multiple:"",class:"hidden",onChange:Mt},null,544),a(o).loading?(r(),l("div",Zt,[...t[4]||(t[4]=[e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e("p",{class:"mt-4 text-gray-500"},"Loading request details...")],-1)])])):a(o).data?(r(),l("div",Yt,[e("div",Kt,[e("div",Qt,[e("div",Gt,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Application Overview",-1)),e("div",Wt,[e("div",null,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-gray-500"},"Request Number",-1)),e("p",te,n(a(o).data.request_number),1)]),e("div",null,[t[6]||(t[6]=e("label",{class:"text-sm font-medium text-gray-500"},"Type",-1)),e("p",ee,n(a(o).data.request_type),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("div",se,[q(yt,{status:a(o).data.workflow_state},null,8,["status"])])]),e("div",null,[t[8]||(t[8]=e("label",{class:"text-sm font-medium text-gray-500"},"Submitted Date",-1)),e("p",ae,n(T(a(o).data.creation)),1)])]),e("div",oe,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Brief Description",-1)),e("p",re,n(a(o).data.brief_description||"N/A"),1)]),e("div",ne,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Detailed Description",-1)),e("div",{class:"mt-1 text-sm text-gray-900 prose prose-sm max-w-none",innerHTML:a(o).data.detailed_description||"N/A"},null,8,le)])]),xt.value?(r(),l("div",ie,[t[14]||(t[14]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Property Information",-1)),e("div",de,[u.value.property_address?(r(),l("div",ue,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",me,n(u.value.property_address),1)])):i("",!0),u.value.legal_description?(r(),l("div",ce,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Legal Description",-1)),e("p",pe,n(u.value.legal_description),1)])):i("",!0)])])):i("",!0),e("div",ge,[t[20]||(t[20]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Applicant Information",-1)),e("div",ye,[e("div",null,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-gray-500"},"Name",-1)),e("p",fe,n(u.value.full_name||u.value.requester_name||"N/A"),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("p",xe,n(u.value.requester_email||"N/A"),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),e("p",_e,n(u.value.mobile_number||u.value.requester_phone||"N/A"),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",be,n(wt(u.value.address_line)||u.value.applicant_address||"N/A"),1)]),u.value.applicant_company?(r(),l("div",ve,[t[19]||(t[19]=e("label",{class:"text-sm font-medium text-gray-500"},"Company/Organization",-1)),e("p",he,n(u.value.applicant_company),1)])):i("",!0)])]),(tt=(W=a(o).data)==null?void 0:W.request_type)!=null&&tt.includes("SPISC")?(r(),l("div",we,[t[36]||(t[36]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"SPISC Application Details",-1)),e("div",ke,[e("div",null,[t[25]||(t[25]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Personal Information",-1)),e("div",Ce,[e("div",null,[t[21]||(t[21]=e("label",{class:"text-sm font-medium text-gray-500"},"Birth Date",-1)),e("p",Me,n(T(u.value.birth_date)||"N/A"),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"text-sm font-medium text-gray-500"},"Age",-1)),e("p",qe,n(u.value.age||"N/A"),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"text-sm font-medium text-gray-500"},"Sex",-1)),e("p",Se,n(u.value.sex||"N/A"),1)]),e("div",null,[t[24]||(t[24]=e("label",{class:"text-sm font-medium text-gray-500"},"Civil Status",-1)),e("p",Ae,n(u.value.civil_status||"N/A"),1)])])]),e("div",null,[t[31]||(t[31]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Household & Economic Information",-1)),e("div",De,[e("div",null,[t[26]||(t[26]=e("label",{class:"text-sm font-medium text-gray-500"},"Household Size",-1)),e("p",Pe,n(u.value.household_size||"N/A"),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"text-sm font-medium text-gray-500"},"Living Arrangement",-1)),e("p",Ne,n(u.value.living_arrangement||"N/A"),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"text-sm font-medium text-gray-500"},"Monthly Income",-1)),e("p",Be,"â‚±"+n(u.value.monthly_income||"0"),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"text-sm font-medium text-gray-500"},"Income Source",-1)),e("p",Fe,n(u.value.income_source||"N/A"),1)]),e("div",null,[t[30]||(t[30]=e("label",{class:"text-sm font-medium text-gray-500"},"4Ps Beneficiary",-1)),e("p",Re,n(u.value.is_4ps_beneficiary?"Yes":"No"),1)])])]),e("div",null,[t[35]||(t[35]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Identity Documents",-1)),e("div",je,[a(o).data.philsys_id?(r(),l("div",Ie,[t[32]||(t[32]=e("label",{class:"text-sm font-medium text-gray-500"},"PhilSys ID",-1)),e("p",Le,n(a(o).data.philsys_id),1)])):i("",!0),a(o).data.sss_number?(r(),l("div",Te,[t[33]||(t[33]=e("label",{class:"text-sm font-medium text-gray-500"},"SSS Number",-1)),e("p",$e,n(a(o).data.sss_number),1)])):i("",!0),a(o).data.osca_id?(r(),l("div",Ee,[t[34]||(t[34]=e("label",{class:"text-sm font-medium text-gray-500"},"OSCA ID",-1)),e("p",ze,n(a(o).data.osca_id),1)])):i("",!0)])])])])):i("",!0),(et=a(b).data)!=null&&et.collect_payment?(r(),l("div",Ve,[t[42]||(t[42]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Delivery & Payment Preferences",-1)),e("div",He,[a(o).data.delivery_preference?(r(),l("div",Ue,[t[37]||(t[37]=e("label",{class:"text-sm font-medium text-gray-500"},"Delivery Preference",-1)),e("p",Je,n(a(o).data.delivery_preference),1)])):i("",!0),a(o).data.invoice_to?(r(),l("div",Oe,[t[38]||(t[38]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice To",-1)),e("p",Xe,n(a(o).data.invoice_to),1)])):i("",!0),a(o).data.invoice_recipient_name?(r(),l("div",Ze,[t[39]||(t[39]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice Recipient Name",-1)),e("p",Ye,n(a(o).data.invoice_recipient_name),1)])):i("",!0),a(o).data.invoice_recipient_email?(r(),l("div",Ke,[t[40]||(t[40]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice Recipient Email",-1)),e("p",Qe,n(a(o).data.invoice_recipient_email),1)])):i("",!0),a(o).data.purchase_order_number?(r(),l("div",Ge,[t[41]||(t[41]=e("label",{class:"text-sm font-medium text-gray-500"},"Purchase Order Number",-1)),e("p",We,n(a(o).data.purchase_order_number),1)])):i("",!0)])])):i("",!0),(st=a(b).data)!=null&&st.council_meeting_available?(r(),l("div",ts,[e("div",es,[t[43]||(t[43]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Council Meeting"),e("p",{class:"text-sm text-gray-600 mt-1"}," Schedule a meeting with council planners to discuss your application ")],-1)),a(y).data&&a(y).data.length>0?(r(),l("span",{key:0,class:z(["px-3 py-1 rounded-full text-sm font-medium",{"bg-yellow-100 text-yellow-800":a(y).data[0].status==="Requested","bg-blue-100 text-blue-800":a(y).data[0].status==="Scheduled"||a(y).data[0].status==="Confirmed","bg-green-100 text-green-800":a(y).data[0].status==="Completed","bg-gray-100 text-gray-800":a(y).data[0].status==="Cancelled"}])},n(a(y).data[0].status),3)):i("",!0)]),a(y).data&&a(y).data.length>0?(r(),l("div",ss,[(r(!0),l(N,null,B(a(y).data,d=>(r(),l("div",{key:d.name,class:"border-l-4 border-blue-500 bg-blue-50 p-4 rounded"},[e("div",as,[e("div",null,[t[44]||(t[44]=e("span",{class:"font-medium text-gray-700"},"Type:",-1)),e("span",os,n(d.meeting_type),1)]),e("div",null,[t[45]||(t[45]=e("span",{class:"font-medium text-gray-700"},"Status:",-1)),e("span",rs,n(d.status),1)]),d.scheduled_start?(r(),l("div",ns,[t[46]||(t[46]=e("span",{class:"font-medium text-gray-700"},"Scheduled:",-1)),e("span",ls,n(G(d.scheduled_start)),1)])):i("",!0),d.meeting_format?(r(),l("div",is,[t[47]||(t[47]=e("span",{class:"font-medium text-gray-700"},"Format:",-1)),e("span",ds,n(d.meeting_format),1)])):i("",!0),d.meeting_location?(r(),l("div",us,[t[48]||(t[48]=e("span",{class:"font-medium text-gray-700"},"Location:",-1)),e("span",ms,n(d.meeting_location),1)])):i("",!0),d.google_meet_link?(r(),l("div",cs,[t[49]||(t[49]=e("span",{class:"font-medium text-gray-700"},"Meeting Link:",-1)),e("a",{href:d.google_meet_link,target:"_blank",class:"ml-2 text-blue-600 hover:underline"},"Join Meeting",8,ps)])):i("",!0)]),d.meeting_purpose?(r(),l("div",gs,[t[50]||(t[50]=e("span",{class:"font-medium text-gray-700 text-sm"},"Purpose:",-1)),e("p",ys,n(d.meeting_purpose),1)])):i("",!0),d.status==="Requested"&&d.proposed_slots&&d.proposed_slots.length>0?(r(),l("div",fs,[t[52]||(t[52]=e("span",{class:"font-medium text-gray-700 text-sm"},"Proposed Time Slots:",-1)),e("ul",xs,[(r(!0),l(N,null,B(d.proposed_slots,(f,k)=>(r(),l("li",{key:k,class:"text-sm text-gray-900 flex items-center"},[t[51]||(t[51]=e("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),w(" "+n(G(f)),1)]))),128))])])):i("",!0),d.status==="Requested"||d.status==="Scheduled"?(r(),l("div",_s,[e("button",{onClick:f=>It(d),class:"flex-1 px-4 py-2 bg-white border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm font-medium"},[...t[53]||(t[53]=[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),w(" Edit Request ",-1)])],8,bs),e("button",{onClick:f=>Lt(d),disabled:H.value,class:"flex-1 px-4 py-2 bg-white border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"},[...t[54]||(t[54]=[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),w(" Cancel Meeting ",-1)])],8,vs)])):i("",!0)]))),128))])):(r(),l("div",hs,[t[55]||(t[55]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t[56]||(t[56]=e("p",{class:"text-sm text-gray-600 mb-4"}," No meeting scheduled yet. Book a meeting to discuss your application with council planners. ",-1)),e("button",{onClick:Rt,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Request Council Meeting ")]))])):i("",!0),Q.value.length>0?(r(!0),l(N,{key:4},B(Q.value,d=>(r(),l("div",{key:d.step_code,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},[e("h2",ws,n(d.step_title),1),e("div",ks,[(r(!0),l(N,null,B(d.sections.filter(f=>f.show_on_review),f=>(r(),l("div",{key:f.section_code},[f.section_title?(r(),l("h3",Cs,n(f.section_title),1)):i("",!0),e("div",Ms,[(r(!0),l(N,null,B(f.fields.filter(k=>k.show_on_review),k=>(r(),l("div",{key:k.field_name,class:"border-b border-gray-100 pb-3"},[e("label",qs,n(k.review_label||k.field_label),1),e("p",Ss,n(bt(k,u.value[k.field_name])),1)]))),128))])]))),128)),_t(d)?i("",!0):(r(),l("p",As," No information to display "))])]))),128)):J.value&&Object.keys(J.value).length>0?(r(),l("div",Ds,[t[57]||(t[57]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Application Details",-1)),e("div",Ps,[(r(!0),l(N,null,B(J.value,(d,f)=>(r(),l("div",{key:f,class:"border-b border-gray-100 pb-3"},[e("label",Ns,n(vt(f)),1),e("p",Bs,n(ht(d)),1)]))),128))])])):i("",!0),(at=a(b).data)!=null&&at.collect_payment?(r(),l("div",Fs,[e("div",Rs,[t[58]||(t[58]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Fees & Payments",-1)),e("span",{class:z(["text-sm font-medium",a(o).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},n(a(o).data.payment_status||"Unpaid"),3)]),e("div",js,[e("div",Is,[t[59]||(t[59]=e("span",{class:"text-sm text-gray-600"},"Total Fees",-1)),e("span",Ls,"$"+n((a(o).data.total_fees||0).toFixed(2)),1)]),e("div",Ts,[t[60]||(t[60]=e("span",{class:"text-sm text-gray-600"},"Total Paid",-1)),e("span",$s,"$"+n((a(o).data.total_paid||0).toFixed(2)),1)]),e("div",Es,[t[61]||(t[61]=e("span",{class:"text-sm font-medium text-gray-900"},"Outstanding",-1)),e("span",zs,"$"+n(((a(o).data.total_fees||0)-(a(o).data.total_paid||0)).toFixed(2)),1)])]),(a(o).data.total_fees||0)>(a(o).data.total_paid||0)?(r(),R(a(D),{key:0,onClick:Bt,variant:"solid",theme:"blue",class:"w-full mt-4"},{default:x(()=>[...t[62]||(t[62]=[w(" Make Payment ",-1)])]),_:1})):i("",!0)])):i("",!0),(ot=a(b).data)!=null&&ot.make_payment?(r(),l("div",Vs,[e("div",Hs,[t[63]||(t[63]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Payment to be Received",-1)),e("span",{class:z(["text-sm font-medium",a(o).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},n(a(o).data.payment_status||"Pending"),3)]),t[67]||(t[67]=Ht('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mt-0.5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="flex-1"><p class="text-sm font-medium text-blue-900">Benefit Payment Information</p><p class="text-sm text-blue-700 mt-1"> Once your application is approved, you will receive payment from the council. Please ensure your bank details are up to date. </p></div></div></div>',1)),e("div",Us,[e("div",Js,[t[64]||(t[64]=e("span",{class:"text-sm text-gray-600"},"Benefit Amount",-1)),e("span",Os," $"+n((rt=a(b).data)!=null&&rt.base_fee?a(b).data.base_fee.toFixed(2):"0.00"),1)]),e("div",Xs,[t[65]||(t[65]=e("span",{class:"text-sm text-gray-600"},"Payment Status",-1)),e("span",{class:z(["text-sm font-semibold",a(o).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},n(a(o).data.payment_status||"Pending Approval"),3)]),a(o).data.selected_bank_account?(r(),l("div",Zs,[...t[66]||(t[66]=[e("span",{class:"text-sm text-gray-600"},"Payment Method",-1),e("span",{class:"text-sm font-medium text-gray-900"},"Bank Transfer",-1)])])):i("",!0)])])):i("",!0),e("div",Ys,[e("div",Ks,[t[70]||(t[70]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Documents",-1)),q(a(D),{onClick:Ct,variant:"outline",size:"sm",loading:S.value},{prefix:x(()=>[...t[68]||(t[68]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)])]),default:x(()=>[t[69]||(t[69]=w(" Upload Document ",-1))]),_:1},8,["loading"])]),!a(o).data.attachments||a(o).data.attachments.length===0?(r(),l("div",Qs,[...t[71]||(t[71]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No documents uploaded yet",-1)])])):i("",!0)])]),e("div",Gs,[e("div",Ws,[t[77]||(t[77]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Processing Timeline",-1)),a(L).statutory_clock_started?(r(),l("div",ta,[e("div",ea,[t[72]||(t[72]=e("span",{class:"text-sm font-medium text-blue-900"},"SLA / Statutory Clock",-1)),e("span",sa,n(a(L).working_days_elapsed)+" of 20 days",1)]),e("div",aa,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Ut({width:`${a(ft)}%`})},null,4)]),e("p",oa,n(a(L).statutory_clock_stopped?"Clock stopped (RFI issued)":`${a(L).working_days_remaining} days remaining`),1)])):i("",!0),e("div",ra,[e("div",na,[t[74]||(t[74]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1)),e("div",la,[t[73]||(t[73]=e("p",{class:"text-sm font-medium text-gray-900"},"Application Created",-1)),e("p",ia,n(T(a(o).data.creation)),1)])]),a(o).data.modified!==a(o).data.creation?(r(),l("div",da,[t[76]||(t[76]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})])],-1)),e("div",ua,[t[75]||(t[75]=e("p",{class:"text-sm font-medium text-gray-900"},"Last Updated",-1)),e("p",ma,n(T(a(o).data.modified)),1)])])):i("",!0)])]),e("div",ca,[t[86]||(t[86]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",pa,[a(o).data.workflow_state==="Draft"?(r(),R(a(D),{key:0,onClick:Dt,variant:"solid",theme:"blue",class:"w-full justify-start"},{prefix:x(()=>[...t[78]||(t[78]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),default:x(()=>[t[79]||(t[79]=w(" Edit Draft ",-1))]),_:1})):i("",!0),q(a(D),{onClick:qt,variant:"outline",class:"w-full justify-start"},{prefix:x(()=>[...t[80]||(t[80]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)])]),default:x(()=>[t[81]||(t[81]=w(" Send Message ",-1))]),_:1}),q(a(D),{onClick:At,variant:"outline",class:"w-full justify-start"},{prefix:x(()=>[...t[82]||(t[82]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)])]),default:x(()=>[t[83]||(t[83]=w(" Print Application ",-1))]),_:1}),a(o).data.workflow_state==="Draft"?(r(),R(a(D),{key:1,onClick:Pt,variant:"outline",class:"w-full justify-start text-red-600 hover:text-red-700",loading:A.value},{prefix:x(()=>[...t[84]||(t[84]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 1 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),default:x(()=>[t[85]||(t[85]=w(" Delete Draft ",-1))]),_:1},8,["loading"])):i("",!0)])]),e("div",ga,[t[89]||(t[89]=e("h3",{class:"text-sm font-semibold text-blue-900 mb-3"},"Need Help?",-1)),e("p",ya,"Contact "+n(((nt=a(h).data)==null?void 0:nt.council_name)||"the council")+" for assistance with your application.",1),a(h).loading?(r(),l("div",fa," Loading contact information... ")):a(h).data?(r(),l("div",xa,[a(h).data.contact_email?(r(),l("div",_a,[t[87]||(t[87]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("a",{href:`mailto:${a(h).data.contact_email}`,class:"hover:underline"},n(a(h).data.contact_email),9,ba)])):i("",!0),a(h).data.contact_phone?(r(),l("div",va,[t[88]||(t[88]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),e("a",{href:`tel:${a(h).data.contact_phone}`,class:"hover:underline"},n(a(h).data.contact_phone),9,ha)])):i("",!0)])):i("",!0)])])])])):i("",!0),q(a(g),{show:U.value,"onUpdate:show":t[0]||(t[0]=d=>U.value=d),"request-id":a(M).params.id,onSent:St},null,8,["show","request-id"]),q(a(c),{show:I.value,"onUpdate:show":t[1]||(t[1]=d=>I.value=d),"request-id":a(M).params.id,"request-type-code":(lt=a(b).data)==null?void 0:lt.type_code,"council-code":(it=a(o).data)==null?void 0:it.council,meeting:X.value,onBooked:jt},null,8,["show","request-id","request-type-code","council-code","meeting"]),q(a(V),{show:O.value,"onUpdate:show":t[2]||(t[2]=d=>O.value=d),"request-id":a(M).params.id,"total-amount":((dt=s.resource.data)==null?void 0:dt.total_fees_incl_gst)||0,"fees-excl-gst":((ut=s.resource.data)==null?void 0:ut.total_fees_excl_gst)||0,gst:((mt=s.resource.data)==null?void 0:mt.gst_amount)||0,"stripe-enabled":!1,onInvoiceRequested:Ft},null,8,["show","request-id","total-amount","fees-excl-gst","gst"])])}}};export{Sa as default};
//# sourceMappingURL=RequestDetail-f66vzrQA.js.map
