import{n as k,R as g,j as r}from"./index-CUEgujfd.js";function w(a){var _;const c=k({url:"frappe.client.get_list",params:{doctype:"Resource Consent Application",filters:{request:(_=a.data)==null?void 0:_.name},fields:["name","statutory_clock_started","statutory_clock_stopped","working_days_elapsed","working_days_remaining"],limit:1},auto:!1});g(()=>a.data,t=>{t&&t.request_category==="Resource Consent"&&t.name&&c.reload()},{immediate:!0});const o=r(()=>{var t,n,e,d,i,l;if(((t=a.data)==null?void 0:t.request_category)==="Resource Consent"){const s=(n=c.data)==null?void 0:n[0];if(s)return{statutory_clock_started:s.statutory_clock_started,statutory_clock_stopped:s.statutory_clock_stopped,working_days_elapsed:s.working_days_elapsed||0,working_days_remaining:s.working_days_remaining||0,source:"Resource Consent Application"}}return{statutory_clock_started:(e=a.data)==null?void 0:e.statutory_clock_started,statutory_clock_stopped:(d=a.data)==null?void 0:d.statutory_clock_stopped,working_days_elapsed:((i=a.data)==null?void 0:i.working_days_elapsed)||0,working_days_remaining:((l=a.data)==null?void 0:l.working_days_remaining)||0,source:"Request (deprecated)"}}),u=r(()=>{var e;const t=o.value.working_days_elapsed,n=((e=a.data)==null?void 0:e.statutory_timeframe)||20;return Math.min(t/n*100,100)}),p=r(()=>o.value.statutory_clock_started&&!o.value.statutory_clock_stopped),y=r(()=>{var t;return o.value.working_days_remaining<0||((t=a.data)==null?void 0:t.is_overdue)});return{clockData:o,progressPercent:u,isClockRunning:p,isOverdue:y,loading:r(()=>c.loading)}}export{w as u};
//# sourceMappingURL=useStatutoryClock-CRKP1Ja8.js.map
