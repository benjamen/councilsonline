var tl=Object.defineProperty,ll=Object.defineProperties;var sl=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var vt=(s,c,v)=>c in s?tl(s,c,{enumerable:!0,configurable:!0,writable:!0,value:v}):s[c]=v,E=(s,c)=>{for(var v in c||(c={}))gt.call(c,v)&&vt(s,v,c[v]);if(Ie)for(var v of Ie(c))ft.call(c,v)&&vt(s,v,c[v]);return s},Ce=(s,c)=>ll(s,sl(c));var fe=(s,c)=>{var v={};for(var b in s)gt.call(s,b)&&c.indexOf(b)<0&&(v[b]=s[b]);if(s!=null&&Ie)for(var b of Ie(s))c.indexOf(b)<0&&ft.call(s,b)&&(v[b]=s[b]);return v};var K=(s,c,v)=>new Promise((b,r)=>{var w=h=>{try{p(v.next(h))}catch(C){r(C)}},y=h=>{try{p(v.throw(h))}catch(C){r(C)}},p=h=>h.done?b(h.value):Promise.resolve(h.value).then(w,y);p((v=v.apply(s,c)).next())});import{r as _,q as de,x as tt,y as U,z as ce,j as q,A as He,B as ve,C as Le,E as ol,G as Ue,H as ze,J as al,K as xe,L as Ve,M as X,N as Ee,O as Oe,P as nl,Q as ht,R as le,S as $e,T as rl,F as z,U as Ne,V as il,W as ul,X as ye,Y as re,c as n,o as a,a as e,b as W,m as O,Z as I,d as g,t as f,f as wt,g as me,l as M,$ as ee,h as R,n as be,v as ie,a0 as L,s as et,e as Se,a1 as ue,a2 as dl,w as te,a3 as cl,a4 as pl,a5 as yt,a6 as ml,u as oe,a7 as vl,a8 as gl,k as bt,a9 as Fe,i as xt}from"./index-CW8-i_Aj.js";import{C as fl}from"./CouncilSelector-BRBk0CsF.js";function _t(s,c){if(s)return s;let v=c!=null?c:"button";if(typeof v=="string"&&v.toLowerCase()==="button")return"button"}function kt(s,c){let v=_(_t(s.value.type,s.value.as));return de(()=>{v.value=_t(s.value.type,s.value.as)}),tt(()=>{var b;v.value||U(c)&&U(c)instanceof HTMLButtonElement&&!((b=U(c))!=null&&b.hasAttribute("type"))&&(v.value="button")}),v}var yl=(s=>(s[s.Open=0]="Open",s[s.Closed=1]="Closed",s))(yl||{});let Ct=Symbol("DisclosureContext");function lt(s){let c=Ve(Ct,null);if(c===null){let v=new Error(`<${s} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,lt),v}return c}let $t=Symbol("DisclosurePanelContext");function bl(){return Ve($t,null)}let xl=ce({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(s,{slots:c,attrs:v}){let b=_(s.defaultOpen?0:1),r=_(null),w=_(null),y={buttonId:_(`headlessui-disclosure-button-${ze()}`),panelId:_(`headlessui-disclosure-panel-${ze()}`),disclosureState:b,panel:r,button:w,toggleDisclosure(){b.value=xe(b.value,{0:1,1:0})},closeDisclosure(){b.value!==1&&(b.value=1)},close(p){y.closeDisclosure();let h=p?p instanceof HTMLElement?p:p.value instanceof HTMLElement?U(p):U(y.button):U(y.button);h==null||h.focus()}};return Le(Ct,y),al(q(()=>xe(b.value,{0:Ue.Open,1:Ue.Closed}))),()=>{let V=s,{defaultOpen:p}=V,h=fe(V,["defaultOpen"]),C={open:b.value===0,close:y.close};return ve({theirProps:h,ourProps:{},slot:C,slots:c,attrs:v,name:"Disclosure"})}}}),_l=ce({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(s,{attrs:c,slots:v,expose:b}){let r=lt("DisclosureButton"),w=bl(),y=q(()=>w===null?!1:w.value===r.panelId.value);de(()=>{y.value||s.id!==null&&(r.buttonId.value=s.id)}),He(()=>{y.value||(r.buttonId.value=null)});let p=_(null);b({el:p,$el:p}),y.value||tt(()=>{r.button.value=p.value});let h=kt(q(()=>({as:s.as,type:c.type})),p);function C(){var S;s.disabled||(y.value?(r.toggleDisclosure(),(S=U(r.button))==null||S.focus()):r.toggleDisclosure())}function V(S){var k;if(!s.disabled)if(y.value)switch(S.key){case X.Space:case X.Enter:S.preventDefault(),S.stopPropagation(),r.toggleDisclosure(),(k=U(r.button))==null||k.focus();break}else switch(S.key){case X.Space:case X.Enter:S.preventDefault(),S.stopPropagation(),r.toggleDisclosure();break}}function T(S){switch(S.key){case X.Space:S.preventDefault();break}}return()=>{var S;let k={open:r.disclosureState.value===0},i=s,{id:x}=i,l=fe(i,["id"]),o=y.value?{ref:p,type:h.value,onClick:C,onKeydown:V}:{id:(S=r.buttonId.value)!=null?S:x,ref:p,type:h.value,"aria-expanded":r.disclosureState.value===0,"aria-controls":r.disclosureState.value===0||U(r.panel)?r.panelId.value:void 0,disabled:s.disabled?!0:void 0,onClick:C,onKeydown:V,onKeyup:T};return ve({ourProps:o,theirProps:l,slot:k,attrs:c,slots:v,name:"DisclosureButton"})}}}),hl=ce({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(s,{attrs:c,slots:v,expose:b}){let r=lt("DisclosurePanel");de(()=>{s.id!==null&&(r.panelId.value=s.id)}),He(()=>{r.panelId.value=null}),b({el:r.panel,$el:r.panel}),Le($t,r.panelId);let w=ol(),y=q(()=>w!==null?(w.value&Ue.Open)===Ue.Open:r.disclosureState.value===0);return()=>{var p;let h={open:r.disclosureState.value===0,close:r.close},S=s,{id:C}=S,V=fe(S,["id"]),T={id:(p=r.panelId.value)!=null?p:C,ref:r.panel};return ve({ourProps:T,theirProps:V,slot:h,attrs:c,slots:v,features:Ee.RenderStrategy|Ee.Static,visible:y.value,name:"DisclosurePanel"})}}}),wl=ce({props:{onFocus:{type:Function,required:!0}},setup(s){let c=_(!0);return()=>c.value?Oe(ht,{as:"button",type:"button",features:nl.Focusable,onFocus(v){v.preventDefault();let b,r=50;function w(){var y;if(r--<=0){b&&cancelAnimationFrame(b);return}if((y=s.onFocus)!=null&&y.call(s)){c.value=!1,cancelAnimationFrame(b);return}b=requestAnimationFrame(w)}b=requestAnimationFrame(w)}}):null}});var kl=(s=>(s[s.Forwards=0]="Forwards",s[s.Backwards=1]="Backwards",s))(kl||{}),Cl=(s=>(s[s.Less=-1]="Less",s[s.Equal=0]="Equal",s[s.Greater=1]="Greater",s))(Cl||{});let Vt=Symbol("TabsContext");function qe(s){let c=Ve(Vt,null);if(c===null){let v=new Error(`<${s} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,qe),v}return c}let st=Symbol("TabsSSRContext"),$l=ce({name:"TabGroup",emits:{change:s=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(s,{slots:c,attrs:v,emit:b}){var r;let w=_((r=s.selectedIndex)!=null?r:s.defaultIndex),y=_([]),p=_([]),h=q(()=>s.selectedIndex!==null),C=q(()=>h.value?s.selectedIndex:w.value);function V(l){var o;let i=$e(T.tabs.value,U),m=$e(T.panels.value,U),A=i.filter(N=>{var G;return!((G=U(N))!=null&&G.hasAttribute("disabled"))});if(l<0||l>i.length-1){let N=xe(w.value===null?0:Math.sign(l-w.value),{[-1]:()=>1,0:()=>xe(Math.sign(l),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),G=xe(N,{0:()=>i.indexOf(A[0]),1:()=>i.indexOf(A[A.length-1])});G!==-1&&(w.value=G),T.tabs.value=i,T.panels.value=m}else{let N=i.slice(0,l),G=[...i.slice(l),...N].find(Z=>A.includes(Z));if(!G)return;let Y=(o=i.indexOf(G))!=null?o:T.selectedIndex.value;Y===-1&&(Y=T.selectedIndex.value),w.value=Y,T.tabs.value=i,T.panels.value=m}}let T={selectedIndex:q(()=>{var l,o;return(o=(l=w.value)!=null?l:s.defaultIndex)!=null?o:null}),orientation:q(()=>s.vertical?"vertical":"horizontal"),activation:q(()=>s.manual?"manual":"auto"),tabs:y,panels:p,setSelectedIndex(l){C.value!==l&&b("change",l),h.value||V(l)},registerTab(l){var o;if(y.value.includes(l))return;let i=y.value[w.value];if(y.value.push(l),y.value=$e(y.value,U),!h.value){let m=(o=y.value.indexOf(i))!=null?o:w.value;m!==-1&&(w.value=m)}},unregisterTab(l){let o=y.value.indexOf(l);o!==-1&&y.value.splice(o,1)},registerPanel(l){p.value.includes(l)||(p.value.push(l),p.value=$e(p.value,U))},unregisterPanel(l){let o=p.value.indexOf(l);o!==-1&&p.value.splice(o,1)}};Le(Vt,T);let S=_({tabs:[],panels:[]}),k=_(!1);de(()=>{k.value=!0}),Le(st,q(()=>k.value?null:S.value));let x=q(()=>s.selectedIndex);return de(()=>{le([x],()=>{var l;return V((l=s.selectedIndex)!=null?l:s.defaultIndex)},{immediate:!0})}),tt(()=>{if(!h.value||C.value==null||T.tabs.value.length<=0)return;let l=$e(T.tabs.value,U);l.some((o,i)=>U(T.tabs.value[i])!==U(o))&&T.setSelectedIndex(l.findIndex(o=>U(o)===U(T.tabs.value[C.value])))}),()=>{let l={selectedIndex:w.value};return Oe(z,[y.value.length<=0&&Oe(wl,{onFocus:()=>{for(let o of y.value){let i=U(o);if((i==null?void 0:i.tabIndex)===0)return i.focus(),!0}return!1}}),ve({theirProps:E(E({},v),rl(s,["selectedIndex","defaultIndex","manual","vertical","onChange"])),ourProps:{},slot:l,slots:c,attrs:v,name:"TabGroup"})])}}}),Vl=ce({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(s,{attrs:c,slots:v}){let b=qe("TabList");return()=>{let r={selectedIndex:b.selectedIndex.value},w={role:"tablist","aria-orientation":b.orientation.value};return ve({ourProps:w,theirProps:s,slot:r,attrs:c,slots:v,name:"TabList"})}}}),Sl=ce({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(s,{attrs:c,slots:v,expose:b}){var r;let w=(r=s.id)!=null?r:`headlessui-tabs-tab-${ze()}`,y=qe("Tab"),p=_(null);b({el:p,$el:p}),de(()=>y.registerTab(p)),He(()=>y.unregisterTab(p));let h=Ve(st),C=q(()=>{if(h.value){let m=h.value.tabs.indexOf(w);return m===-1?h.value.tabs.push(w)-1:m}return-1}),V=q(()=>{let m=y.tabs.value.indexOf(p);return m===-1?C.value:m}),T=q(()=>V.value===y.selectedIndex.value);function S(m){var A;let N=m();if(N===Ne.Success&&y.activation.value==="auto"){let G=(A=ul(p))==null?void 0:A.activeElement,Y=y.tabs.value.findIndex(Z=>U(Z)===G);Y!==-1&&y.setSelectedIndex(Y)}return N}function k(m){let A=y.tabs.value.map(N=>U(N)).filter(Boolean);if(m.key===X.Space||m.key===X.Enter){m.preventDefault(),m.stopPropagation(),y.setSelectedIndex(V.value);return}switch(m.key){case X.Home:case X.PageUp:return m.preventDefault(),m.stopPropagation(),S(()=>ye(A,re.First));case X.End:case X.PageDown:return m.preventDefault(),m.stopPropagation(),S(()=>ye(A,re.Last))}if(S(()=>xe(y.orientation.value,{vertical(){return m.key===X.ArrowUp?ye(A,re.Previous|re.WrapAround):m.key===X.ArrowDown?ye(A,re.Next|re.WrapAround):Ne.Error},horizontal(){return m.key===X.ArrowLeft?ye(A,re.Previous|re.WrapAround):m.key===X.ArrowRight?ye(A,re.Next|re.WrapAround):Ne.Error}}))===Ne.Success)return m.preventDefault()}let x=_(!1);function l(){var m;x.value||(x.value=!0,!s.disabled&&((m=U(p))==null||m.focus({preventScroll:!0}),y.setSelectedIndex(V.value),il(()=>{x.value=!1})))}function o(m){m.preventDefault()}let i=kt(q(()=>({as:s.as,type:c.type})),p);return()=>{var m,A;let N={selected:T.value,disabled:(m=s.disabled)!=null?m:!1},G=fe(s,[]),Y={ref:p,onKeydown:k,onMousedown:o,onClick:l,id:w,role:"tab",type:i.value,"aria-controls":(A=U(y.panels.value[V.value]))==null?void 0:A.id,"aria-selected":T.value,tabIndex:T.value?0:-1,disabled:s.disabled?!0:void 0};return ve({ourProps:Y,theirProps:G,slot:N,attrs:c,slots:v,name:"Tab"})}}}),ql=ce({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(s,{slots:c,attrs:v}){let b=qe("TabPanels");return()=>{let r={selectedIndex:b.selectedIndex.value};return ve({theirProps:s,ourProps:{},slot:r,attrs:v,slots:c,name:"TabPanels"})}}}),Tl=ce({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(s,{attrs:c,slots:v,expose:b}){var r;let w=(r=s.id)!=null?r:`headlessui-tabs-panel-${ze()}`,y=qe("TabPanel"),p=_(null);b({el:p,$el:p}),de(()=>y.registerPanel(p)),He(()=>y.unregisterPanel(p));let h=Ve(st),C=q(()=>{if(h.value){let S=h.value.panels.indexOf(w);return S===-1?h.value.panels.push(w)-1:S}return-1}),V=q(()=>{let S=y.panels.value.indexOf(p);return S===-1?C.value:S}),T=q(()=>V.value===y.selectedIndex.value);return()=>{var S;let k={selected:T.value},i=s,{tabIndex:x}=i,l=fe(i,["tabIndex"]),o={ref:p,id:w,role:"tabpanel","aria-labelledby":(S=U(y.tabs.value[V.value]))==null?void 0:S.id,tabIndex:T.value?x:-1};return!T.value&&s.unmount&&!s.static?Oe(ht,E({as:"span","aria-hidden":!0},o)):ve({ourProps:o,theirProps:l,slot:k,attrs:c,slots:v,features:Ee.Static|Ee.RenderStrategy,visible:T.value,name:"TabPanel"})}}});const Ml={__name:"Step1CouncilSelection",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","council-change"],setup(s,{emit:c}){const v=s,b=c,r=w=>{console.log("[Step1CouncilSelection] updateCouncil called with:",w),console.log("[Step1CouncilSelection] Current modelValue:",v.modelValue),b("update:modelValue",Ce(E({},v.modelValue),{council:w})),b("council-change",w),console.log("[Step1CouncilSelection] Emitted events")};return(w,y)=>(a(),n("div",null,[y[0]||(y[0]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Council",-1)),y[1]||(y[1]=e("p",{class:"text-gray-600 mb-8"},"Choose the council that will process your application",-1)),W(fl,{"model-value":s.modelValue.council,"onUpdate:modelValue":r,"display-mode":"cards",required:!0,"show-selected-info":!0,label:"","show-label":!1},null,8,["model-value"])]))}},Pl={key:0,class:"text-center py-12"},Al={key:1,class:"grid md:grid-cols-2 gap-4"},Dl=["onClick"],Rl={class:"flex items-start justify-between"},jl={class:"flex-1"},Il={class:"text-lg font-semibold text-gray-900 mb-2"},Nl=["innerHTML"],Fl={class:"mt-4 flex items-center space-x-4 text-xs text-gray-500"},Bl={key:0},Ll={key:1},Ul={key:2,class:"px-2 py-1 bg-gray-100 rounded"},zl={key:0,class:"ml-4"},El={__name:"Step2RequestType",props:{modelValue:{type:Object,required:!0},requestTypes:{type:Object,required:!0}},emits:["update:modelValue","type-selected"],setup(s,{emit:c}){const v=s,b=c,r=w=>{console.log("[Step2RequestType] selectType called with:",w.name),console.log("[Step2RequestType] props.modelValue:",v.modelValue),console.log("[Step2RequestType] props.modelValue.council:",v.modelValue.council);const y=Ce(E({},v.modelValue),{request_type:w.name});console.log("[Step2RequestType] Emitting updatedValue:",y),b("update:modelValue",y),b("type-selected",w)};return(w,y)=>(a(),n("div",null,[y[2]||(y[2]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Application Type",-1)),y[3]||(y[3]=e("p",{class:"text-gray-600 mb-8"},"Choose the type of consent you wish to apply for",-1)),s.requestTypes.loading?(a(),n("div",Pl,[...y[0]||(y[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(a(),n("div",Al,[(a(!0),n(z,null,O(s.requestTypes.data,p=>(a(),n("div",{key:p.name,onClick:h=>r(p),class:I(["border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",s.modelValue.request_type===p.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",Rl,[e("div",jl,[e("h3",Il,f(p.type_name),1),e("p",{class:"text-sm text-gray-600",innerHTML:p.description||"No description available"},null,8,Nl),e("div",Fl,[p.base_fee?(a(),n("span",Bl,"Fee: $"+f(p.base_fee),1)):g("",!0),p.processing_sla_days?(a(),n("span",Ll,f(p.processing_sla_days)+" days",1)):g("",!0),p.category?(a(),n("span",Ul,f(p.category),1)):g("",!0)])]),s.modelValue.request_type===p.name?(a(),n("div",zl,[...y[1]||(y[1]=[e("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):g("",!0)])],10,Dl))),128))]))]))}},Ol={class:"text-gray-600 mb-6"},Hl={key:0,class:"space-y-6"},Wl={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},Gl={class:"flex items-center gap-4 mb-4"},Jl={class:"flex items-center"},Kl={key:1,class:"mt-4"},Ql={class:"space-y-2"},Xl={class:"flex-1"},Yl={class:"text-sm font-medium text-gray-900"},Zl={class:"text-xs text-gray-600 mt-1"},es={key:0,class:"text-xs text-gray-500 mt-1"},ts=["onClick"],ls={class:"bg-white border border-gray-200 rounded-lg p-6"},ss={class:"flex items-start justify-between mb-4"},os={class:"text-xl font-semibold text-gray-900"},as={key:0,class:"text-sm text-gray-500 mt-1"},ns={class:"grid md:grid-cols-3 gap-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},rs={class:"text-2xl font-bold text-blue-900 mt-1"},is={class:"text-2xl font-bold text-blue-900 mt-1"},us={class:"text-2xl font-bold text-blue-900 mt-1"},ds={key:1,class:"bg-white border border-gray-200 rounded-lg p-6"},cs=["innerHTML"],ps={key:2,class:"bg-white border border-gray-200 rounded-lg p-6"},ms=["innerHTML"],vs={key:1,class:"text-center py-12"},gs={class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-hidden"},fs={class:"overflow-y-auto max-h-[calc(90vh-140px)] px-6 py-4"},ys={class:"space-y-4"},bs={class:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t border-gray-200"},xs=["disabled"],_s={__name:"Step3ProcessInfo",props:{requestTypeDetails:{type:Object,default:null},councilName:{type:String,default:""},modelValue:{type:Object,default:()=>({})}},emits:["continue","update:modelValue"],setup(s,{emit:c}){var l,o;const v=wt(),b=s,r=c,w=_(((l=b.modelValue)==null?void 0:l.pre_app_meeting_not_required)||!1),y=_(((o=b.modelValue)==null?void 0:o.pre_app_meetings)||[]),p=_(!1),h=_({meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",preferred_time_slot_1_start:null});le([w,y],()=>{r("update:modelValue",Ce(E({},b.modelValue),{pre_app_meeting_not_required:w.value,pre_app_meetings:y.value}))},{deep:!0});const C=()=>{h.value={meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",preferred_time_slot_1_start:null},p.value=!0},V=()=>{p.value=!1},T=()=>{y.value.push(E({},h.value)),V()},S=i=>{confirm("Remove this council meeting request?")&&y.value.splice(i,1)},k=i=>i?new Date(i).toLocaleString("en-NZ",{dateStyle:"medium",timeStyle:"short"}):"",x=()=>{if(!et.isLoggedIn){const i=window.location.pathname+window.location.search;v.push({name:"Login",query:{redirect:i}});return}r("continue")};return(i,m)=>(a(),n("div",null,[m[27]||(m[27]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Council Process Information",-1)),e("p",Ol,"Understanding "+f(s.councilName)+"'s process for this application",1),s.requestTypeDetails?(a(),n("div",Hl,[s.requestTypeDetails.council_meeting_available?(a(),n("div",Wl,[m[6]||(m[6]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Council Meeting",-1)),m[7]||(m[7]=e("p",{class:"text-sm text-gray-600 mb-4"}," You may schedule a Council Meeting with the Council to seek further clarifications in respect of your application before proceeding. ",-1)),e("div",Gl,[e("label",Jl,[M(e("input",{type:"checkbox","onUpdate:modelValue":m[0]||(m[0]=A=>w.value=A),class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[ee,w.value]]),m[4]||(m[4]=e("span",{class:"ml-2 text-sm text-gray-700"},"I do not require a council meeting",-1))])]),w.value?g("",!0):(a(),n("button",{key:0,onClick:C,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Request Council Meeting ")),y.value&&y.value.length>0?(a(),n("div",Kl,[m[5]||(m[5]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Requested Meetings",-1)),e("div",Ql,[(a(!0),n(z,null,O(y.value,(A,N)=>(a(),n("div",{key:N,class:"p-3 bg-gray-50 border border-gray-200 rounded-lg flex items-start justify-between"},[e("div",Xl,[e("span",Yl,f(A.meeting_type||"Council Meeting"),1),e("p",Zl,f(A.meeting_format),1),A.preferred_time_slot_1_start?(a(),n("p",es," Preferred: "+f(k(A.preferred_time_slot_1_start)),1)):g("",!0)]),e("button",{onClick:G=>S(N),type:"button",class:"text-red-600 hover:text-red-800 text-sm ml-4"}," Remove ",8,ts)]))),128))])])):g("",!0)])):g("",!0),e("div",ls,[e("div",ss,[e("div",null,[e("h3",os,f(s.requestTypeDetails.request_type_name),1),s.requestTypeDetails.category?(a(),n("p",as,f(s.requestTypeDetails.category),1)):g("",!0)])]),e("div",ns,[e("div",null,[m[8]||(m[8]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Application Fee",-1)),e("div",rs," $"+f(s.requestTypeDetails.base_fee||"0"),1),m[9]||(m[9]=e("div",{class:"text-xs text-blue-600 mt-1"},"Plus any additional costs",-1))]),e("div",null,[m[11]||(m[11]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Processing Time",-1)),e("div",is,[R(f(s.requestTypeDetails.sla_days||"N/A")+" ",1),m[10]||(m[10]=e("span",{class:"text-base"},"days",-1))]),m[12]||(m[12]=e("div",{class:"text-xs text-blue-600 mt-1"},"Standard timeframe",-1))]),e("div",null,[m[13]||(m[13]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Payment Required",-1)),e("div",us,f(s.requestTypeDetails.requires_payment?"Yes":"No"),1),m[14]||(m[14]=e("div",{class:"text-xs text-blue-600 mt-1"},"Before processing",-1))])])]),s.requestTypeDetails.process_description?(a(),n("div",ds,[m[15]||(m[15]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"How This Works",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:s.requestTypeDetails.process_description},null,8,cs)])):s.requestTypeDetails.description?(a(),n("div",ps,[m[16]||(m[16]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"About This Application",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:s.requestTypeDetails.description},null,8,ms)])):g("",!0),m[17]||(m[17]=me('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Before You Continue</h5><p class="text-yellow-800 text-sm mt-1"> Please review this information carefully. Make sure you understand the process, fees, and timeframes before proceeding with your application. </p></div></div></div>',1)),e("div",{class:"flex justify-center pt-4"},[e("button",{type:"button",onClick:x,class:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"}," I Understand - Continue to Application ")])])):(a(),n("div",vs,[...m[18]||(m[18]=[e("p",{class:"text-gray-500"},"No request type selected. Please go back and select a request type.",-1)])])),p.value?(a(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:be(V,["self"])},[e("div",gs,[e("div",{class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},[m[20]||(m[20]=e("h3",{class:"text-xl font-bold text-gray-900"},"Request Council Meeting",-1)),e("button",{onClick:V,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...m[19]||(m[19]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",fs,[e("div",ys,[m[26]||(m[26]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("p",{class:"text-sm text-blue-900"}," A council meeting allows you to discuss your proposal with council planners before formally submitting your application. ")],-1)),e("div",null,[m[22]||(m[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Format *",-1)),M(e("select",{"onUpdate:modelValue":m[1]||(m[1]=A=>h.value.meeting_format=A),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...m[21]||(m[21]=[e("option",{value:"In Person"},"In Person",-1),e("option",{value:"Video Call"},"Video Call",-1),e("option",{value:"Phone Call"},"Phone Call",-1)])],512),[[ie,h.value.meeting_format]])]),e("div",null,[m[23]||(m[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Purpose *",-1)),M(e("textarea",{"onUpdate:modelValue":m[2]||(m[2]=A=>h.value.meeting_purpose=A),rows:"4",placeholder:"Describe what you'd like to discuss in this meeting...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[L,h.value.meeting_purpose]])]),e("div",null,[m[24]||(m[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Preferred Date & Time",-1)),M(e("input",{"onUpdate:modelValue":m[3]||(m[3]=A=>h.value.preferred_time_slot_1_start=A),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,h.value.preferred_time_slot_1_start]]),m[25]||(m[25]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select your preferred date and time. The council will confirm or propose an alternative.",-1))])])]),e("div",bs,[e("button",{onClick:V,type:"button",class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors"}," Cancel "),e("button",{onClick:T,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:!h.value.meeting_purpose}," Request Meeting ",8,xs)])])])):g("",!0)]))}},hs={class:"px-4 sm:px-0"},ws={class:"space-y-4 sm:space-y-6"},ks={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6"},Cs={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-0"},$s={class:"text-base sm:text-lg font-semibold text-blue-900"},Vs={class:"text-xs sm:text-sm text-blue-700 mt-1"},Ss={class:"sm:text-right"},qs={class:"text-xl sm:text-2xl font-bold text-blue-900"},Ts={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Ms={class:"p-4 sm:p-6 space-y-3"},Ps={class:"grid md:grid-cols-2 gap-4"},As={class:"font-medium"},Ds={class:"font-medium"},Rs={class:"font-medium"},js={key:0},Is={class:"font-medium"},Ns={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Fs={class:"p-4 sm:p-6"},Bs={key:0,class:"space-y-2"},Ls={class:"font-medium"},Us={key:0},zs={class:"font-medium"},Es={key:1,class:"text-gray-500"},Os={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Hs={class:"p-4 sm:p-6 space-y-3"},Ws={class:"font-medium"},Gs={class:"font-medium"},Js={class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},Ks={class:"font-semibold text-gray-900 text-sm sm:text-base"},Qs={class:"p-4 sm:p-6 space-y-4"},Xs={key:0,class:"text-sm font-medium text-gray-700 mb-2"},Ys={class:"grid md:grid-cols-2 gap-4"},Zs={class:"text-sm text-gray-500"},eo={class:"font-medium"},to={key:0,class:"text-gray-500 text-sm"},lo={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},so={class:"p-4 sm:p-6"},oo={class:"space-y-3"},ao={class:"mt-2 flex flex-wrap gap-2"},no={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},ro={key:1,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},io={key:2,class:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium"},uo={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium"},co={key:4,class:"px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium"},po={key:5,class:"text-gray-500"},mo={class:"mt-1 inline-flex items-center"},vo={key:0},go={class:"font-medium break-words"},fo={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},yo={class:"p-4 sm:p-6"},bo={class:"flex flex-wrap gap-2"},xo={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},_o={key:1,class:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},ho={key:2,class:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},wo={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},ko={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Co={class:"p-4 sm:p-6"},$o={class:"space-y-3"},Vo={class:"font-medium"},So={key:0},qo={class:"text-sm mt-1 line-clamp-3"},To={key:1},Mo={class:"text-sm mt-1 line-clamp-3"},Po={class:"flex items-center gap-2"},Ao={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Do={class:"p-4 sm:p-6"},Ro={class:"space-y-4"},jo={key:0},Io=["innerHTML"],No={key:1},Fo=["innerHTML"],Bo={key:2},Lo={class:"text-sm mt-1 line-clamp-3"},Uo={key:3},zo={class:"text-sm mt-1 space-y-1 list-disc list-inside"},Eo={key:0},Oo={key:1},Ho={key:2},Wo={key:4},Go=["innerHTML"],Jo={key:5,class:"text-gray-500 text-sm"},Ko={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Qo={class:"p-4 sm:p-6"},Xo={class:"space-y-2"},Yo={class:"flex items-start gap-2"},Zo={class:"flex items-start gap-2"},ea={class:"flex items-start gap-2"},ta={key:0,class:"mt-4 pt-4 border-t border-gray-200"},la={class:"font-medium"},sa={key:0,class:"text-sm text-gray-500"},oa={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},aa={__name:"Step17Review",props:{modelValue:{type:Object,required:!0},councilName:{type:String,default:"Council"},requestTypeName:{type:String,default:"Application"},applicationFee:{type:String,default:"TBD"},isResourceConsent:{type:Boolean,default:!1},stepConfigs:{type:Array,default:()=>[]},usesConfigurableSteps:{type:Boolean,default:!1},requestTypeDetails:{type:Object,default:null}},setup(s){const c=s,v=q(()=>!c.usesConfigurableSteps||!c.stepConfigs?[]:c.stepConfigs.filter(l=>l.show_on_review)),b=q(()=>c.isResourceConsent?!0:!!(c.modelValue.property||c.modelValue.property_address)),r=l=>{if(!l.sections)return!1;for(const o of l.sections)if(o.show_on_review){for(const i of o.fields)if(i.show_on_review&&c.modelValue[i.field_name])return!0}return!1},w=(l,o)=>{if(o==null||o==="")return"Not provided";if(l.field_type==="Check")return o?"Yes":"No";if(l.field_type==="Date"&&o)try{return new Date(o).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(i){return o}return l.field_type==="Currency"&&o?`₱${Number(o).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`:l.field_type==="Select"?o:l.field_type==="Attach"||l.field_type==="Attach Image"?o?"✓ File attached":"Not provided":o},y=q(()=>!!(c.modelValue.consent_type_land_use||c.modelValue.consent_type_subdivision||c.modelValue.consent_type_discharge||c.modelValue.consent_type_water||c.modelValue.consent_type_coastal)),p=q(()=>{const l=c.modelValue.activity_status_type;return l==="Permitted"?"bg-green-100 text-green-800":l==="Controlled"?"bg-blue-100 text-blue-800":l==="Restricted Discretionary"?"bg-yellow-100 text-yellow-800":l==="Discretionary"?"bg-orange-100 text-orange-800":l==="Non-Complying"?"bg-red-100 text-red-800":l==="Prohibited"?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}),h=q(()=>!!(c.modelValue.hazard_flooding||c.modelValue.hazard_earthquake||c.modelValue.hazard_landslip||c.modelValue.hazard_coastal)),C=q(()=>!!(c.modelValue.consultation_undertaken||c.modelValue.consultation_summary||c.modelValue.affected_parties_details||c.modelValue.written_approvals_obtained)),V=q(()=>!!(c.modelValue.activity_description||c.modelValue.aee_full_assessment||c.modelValue.positive_effects_description||c.modelValue.effects_visual_amenity||c.modelValue.effects_traffic_parking||c.modelValue.effects_noise||c.modelValue.mitigation_measures||c.modelValue.aee_activity_description||c.modelValue.aee_existing_environment||c.modelValue.assessment_of_effects||c.modelValue.aee_document)),T=l=>{if(!l)return"";const o=document.createElement("div");return o.innerHTML=l,o.textContent||o.innerText||""},S=(l,o)=>{if(!l)return"";const i=T(l);return i.length<=o?i:i.substring(0,o)+"..."},k=l=>{if(!l)return"";try{return new Date(l).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(o){return l}},x=q(()=>{const l=!!(c.modelValue.council&&c.modelValue.request_type&&c.modelValue.applicant_name&&c.modelValue.applicant_email&&c.modelValue.property_address&&c.modelValue.delivery_preference);if(c.isResourceConsent){const o=!!(y.value&&c.modelValue.activity_status_type&&c.modelValue.activity_description&&c.modelValue.aee_full_assessment&&c.modelValue.declaration_accuracy&&c.modelValue.declaration_authority&&c.modelValue.declaration_acknowledgment);return l&&o}return l});return(l,o)=>{var i;return a(),n("div",hs,[o[39]||(o[39]=e("h2",{class:"text-xl sm:text-2xl font-bold text-gray-900 mb-2"},"Review & Submit",-1)),o[40]||(o[40]=e("p",{class:"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8"},"Review your application details before submitting",-1)),e("div",ws,[e("div",ks,[e("div",Cs,[e("div",null,[e("h3",$s,f(s.requestTypeName),1),e("p",Vs,f(s.councilName),1)]),e("div",Ss,[o[0]||(o[0]=e("div",{class:"text-xs sm:text-sm text-blue-600 font-medium"},"Application Fee",-1)),e("div",qs,f(s.applicationFee),1)])])]),e("div",Ts,[o[5]||(o[5]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Applicant Details")],-1)),e("div",Ms,[e("div",Ps,[e("div",null,[o[1]||(o[1]=e("span",{class:"text-sm text-gray-500"},"Name:",-1)),e("p",As,f(s.modelValue.applicant_name||"Not provided"),1)]),e("div",null,[o[2]||(o[2]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("p",Ds,f(s.modelValue.applicant_email||"Not provided"),1)]),e("div",null,[o[3]||(o[3]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("p",Rs,f(s.modelValue.applicant_phone||"Not provided"),1)]),s.modelValue.applicant_company?(a(),n("div",js,[o[4]||(o[4]=e("span",{class:"text-sm text-gray-500"},"Company:",-1)),e("p",Is,f(s.modelValue.applicant_company),1)])):g("",!0)])])]),b.value?(a(),n("div",Ns,[o[8]||(o[8]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Property Details")],-1)),e("div",Fs,[s.modelValue.property_address?(a(),n("div",Bs,[e("div",null,[o[6]||(o[6]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",Ls,f(s.modelValue.property_address),1)]),s.modelValue.legal_description?(a(),n("div",Us,[o[7]||(o[7]=e("span",{class:"text-sm text-gray-500"},"Legal Description:",-1)),e("p",zs,f(s.modelValue.legal_description),1)])):g("",!0)])):(a(),n("p",Es,"No property selected"))])])):g("",!0),(i=s.requestTypeDetails)!=null&&i.collect_payment?(a(),n("div",Os,[o[11]||(o[11]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Delivery & Payment")],-1)),e("div",Hs,[e("div",null,[o[9]||(o[9]=e("span",{class:"text-sm text-gray-500"},"Delivery Preference:",-1)),e("p",Ws,f(s.modelValue.delivery_preference||"Not selected"),1)]),e("div",null,[o[10]||(o[10]=e("span",{class:"text-sm text-gray-500"},"Invoice To:",-1)),e("p",Gs,f(s.modelValue.invoice_to||"Not specified"),1)])])])):g("",!0),s.usesConfigurableSteps&&v.value.length>0?(a(!0),n(z,{key:2},O(v.value,m=>(a(),n("div",{key:m.step_code,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},[e("div",Js,[e("h3",Ks,f(m.step_title),1)]),e("div",Qs,[(a(!0),n(z,null,O(m.sections.filter(A=>A.show_on_review),A=>(a(),n("div",{key:A.section_code},[A.section_title?(a(),n("h4",Xs,f(A.section_title),1)):g("",!0),e("div",Ys,[(a(!0),n(z,null,O(A.fields.filter(N=>N.show_on_review),N=>(a(),n("div",{key:N.field_name},[e("span",Zs,f(N.review_label||N.field_label)+":",1),e("p",eo,f(w(N,s.modelValue[N.field_name])),1)]))),128))])]))),128)),r(m)?g("",!0):(a(),n("p",to," No information to display for review "))])]))),128)):g("",!0),s.isResourceConsent?(a(),n(z,{key:3},[e("div",lo,[o[15]||(o[15]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consent Types & Activity Status")],-1)),e("div",so,[e("div",oo,[e("div",null,[o[12]||(o[12]=e("span",{class:"text-sm text-gray-500"},"Consent Types:",-1)),e("div",ao,[s.modelValue.consent_type_land_use?(a(),n("span",no," Land Use Consent ")):g("",!0),s.modelValue.consent_type_subdivision?(a(),n("span",ro," Subdivision Consent ")):g("",!0),s.modelValue.consent_type_discharge?(a(),n("span",io," Discharge Permit ")):g("",!0),s.modelValue.consent_type_water?(a(),n("span",uo," Water Permit ")):g("",!0),s.modelValue.consent_type_coastal?(a(),n("span",co," Coastal Permit ")):g("",!0),y.value?g("",!0):(a(),n("span",po," None selected "))])]),e("div",null,[o[13]||(o[13]=e("span",{class:"text-sm text-gray-500"},"Activity Status:",-1)),e("div",mo,[e("span",{class:I(["px-3 py-1 rounded-full text-sm font-medium",p.value])},f(s.modelValue.activity_status_type||"Not specified"),3)])]),s.modelValue.activity_title?(a(),n("div",vo,[o[14]||(o[14]=e("span",{class:"text-sm text-gray-500"},"Activity Title:",-1)),e("p",go,f(s.modelValue.activity_title),1)])):g("",!0)])])]),h.value?(a(),n("div",fo,[o[20]||(o[20]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Natural Hazards")],-1)),e("div",yo,[e("div",bo,[s.modelValue.hazard_flooding?(a(),n("span",xo,[...o[16]||(o[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"})],-1),R(" Flood Hazard ",-1)])])):g("",!0),s.modelValue.hazard_earthquake?(a(),n("span",_o,[...o[17]||(o[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),R(" Earthquake/Fault Line ",-1)])])):g("",!0),s.modelValue.hazard_landslip?(a(),n("span",ho,[...o[18]||(o[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1),R(" Landslip/Slope Instability ",-1)])])):g("",!0),s.modelValue.hazard_coastal?(a(),n("span",wo,[...o[19]||(o[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5"})],-1),R(" Coastal Hazard ",-1)])])):g("",!0)])])])):g("",!0),C.value?(a(),n("div",ko,[o[25]||(o[25]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consultation & Affected Parties")],-1)),e("div",Co,[e("div",$o,[e("div",null,[o[21]||(o[21]=e("span",{class:"text-sm text-gray-500"},"Consultation Undertaken:",-1)),e("p",Vo,f(s.modelValue.consultation_undertaken||"Not specified"),1)]),s.modelValue.consultation_summary?(a(),n("div",So,[o[22]||(o[22]=e("span",{class:"text-sm text-gray-500"},"Consultation Summary:",-1)),e("p",qo,f(s.modelValue.consultation_summary),1)])):g("",!0),s.modelValue.affected_parties_details?(a(),n("div",To,[o[23]||(o[23]=e("span",{class:"text-sm text-gray-500"},"Affected Parties:",-1)),e("p",Mo,f(T(s.modelValue.affected_parties_details)),1)])):g("",!0),e("div",Po,[(a(),n("svg",{class:I(["w-5 h-5",s.modelValue.written_approvals_obtained?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[24]||(o[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:I(s.modelValue.written_approvals_obtained?"text-gray-900":"text-gray-500")}," Written Approvals "+f(s.modelValue.written_approvals_obtained?"Obtained":"Not Obtained"),3)])])])])):g("",!0),e("div",Ao,[o[31]||(o[31]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Assessment of Environmental Effects")],-1)),e("div",Do,[e("div",Ro,[s.modelValue.activity_description?(a(),n("div",jo,[o[26]||(o[26]=e("span",{class:"text-sm text-gray-500"},"Activity Description:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:s.modelValue.activity_description},null,8,Io)])):g("",!0),s.modelValue.aee_full_assessment?(a(),n("div",No,[o[27]||(o[27]=e("span",{class:"text-sm text-gray-500"},"Full Assessment:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:s.modelValue.aee_full_assessment},null,8,Fo)])):g("",!0),s.modelValue.positive_effects_description?(a(),n("div",Bo,[o[28]||(o[28]=e("span",{class:"text-sm text-gray-500"},"Positive Effects:",-1)),e("p",Lo,f(s.modelValue.positive_effects_description),1)])):g("",!0),s.modelValue.effects_visual_amenity||s.modelValue.effects_traffic_parking||s.modelValue.effects_noise?(a(),n("div",Uo,[o[29]||(o[29]=e("span",{class:"text-sm text-gray-500"},"Adverse Effects Summary:",-1)),e("ul",zo,[s.modelValue.effects_visual_amenity?(a(),n("li",Eo,"Visual/Amenity: "+f(S(s.modelValue.effects_visual_amenity,50)),1)):g("",!0),s.modelValue.effects_traffic_parking?(a(),n("li",Oo,"Traffic/Parking: "+f(S(s.modelValue.effects_traffic_parking,50)),1)):g("",!0),s.modelValue.effects_noise?(a(),n("li",Ho,"Noise: "+f(S(s.modelValue.effects_noise,50)),1)):g("",!0)])])):g("",!0),s.modelValue.mitigation_measures?(a(),n("div",Wo,[o[30]||(o[30]=e("span",{class:"text-sm text-gray-500"},"Mitigation Measures:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:s.modelValue.mitigation_measures},null,8,Go)])):g("",!0),V.value?g("",!0):(a(),n("p",Jo," AEE not yet completed "))])])]),e("div",Ko,[o[36]||(o[36]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Statutory Declarations")],-1)),e("div",Qo,[e("div",Xo,[e("div",Yo,[(a(),n("svg",{class:I(["w-5 h-5 flex-shrink-0 mt-0.5",s.modelValue.declaration_accuracy||s.modelValue.declaration_rma_compliance?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[32]||(o[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:I(["text-sm",s.modelValue.declaration_accuracy||s.modelValue.declaration_rma_compliance?"text-gray-900":"text-gray-500"])}," Declaration of Accuracy & RMA Compliance ",2)]),e("div",Zo,[(a(),n("svg",{class:I(["w-5 h-5 flex-shrink-0 mt-0.5",s.modelValue.declaration_authority||s.modelValue.declaration_authorized?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[33]||(o[33]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:I(["text-sm",s.modelValue.declaration_authority||s.modelValue.declaration_authorized?"text-gray-900":"text-gray-500"])}," Declaration of Authority to Apply ",2)]),e("div",ea,[(a(),n("svg",{class:I(["w-5 h-5 flex-shrink-0 mt-0.5",s.modelValue.declaration_acknowledgment||s.modelValue.declaration_public_information?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[34]||(o[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:I(["text-sm",s.modelValue.declaration_acknowledgment||s.modelValue.declaration_public_information?"text-gray-900":"text-gray-500"])}," Public Information & Privacy Acknowledgment ",2)]),s.modelValue.applicant_signature?(a(),n("div",ta,[o[35]||(o[35]=e("span",{class:"text-sm text-gray-500"},"Signed by:",-1)),e("p",la,f(s.modelValue.applicant_signature),1),s.modelValue.signature_date?(a(),n("p",sa," Date: "+f(k(s.modelValue.signature_date)),1)):g("",!0)])):g("",!0)])])])],64)):g("",!0),o[38]||(o[38]=me('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6" data-v-3fc986b6><div class="flex items-start gap-2 sm:gap-3" data-v-3fc986b6><svg class="w-5 h-5 sm:w-6 sm:h-6 text-yellow-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3fc986b6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-3fc986b6></path></svg><div data-v-3fc986b6><h4 class="font-semibold text-yellow-900 text-sm sm:text-base" data-v-3fc986b6>Before You Submit</h4><ul class="mt-2 text-xs sm:text-sm text-yellow-800 space-y-1 list-disc list-inside" data-v-3fc986b6><li data-v-3fc986b6>Review all information carefully for accuracy and completeness</li><li data-v-3fc986b6>Ensure all required fields are completed</li><li data-v-3fc986b6>For Resource Consent applications, verify all statutory declarations are confirmed</li><li data-v-3fc986b6>Once submitted, you cannot edit the application (you may need to withdraw and resubmit)</li></ul></div></div></div>',1)),x.value?g("",!0):(a(),n("div",oa,[...o[37]||(o[37]=[me('<div class="flex items-start gap-2 sm:gap-3" data-v-3fc986b6><svg class="w-5 h-5 text-red-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3fc986b6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-3fc986b6></path></svg><div data-v-3fc986b6><h5 class="font-semibold text-red-900 text-xs sm:text-sm" data-v-3fc986b6>Application Incomplete</h5><p class="text-red-800 text-xs sm:text-sm mt-1" data-v-3fc986b6> Please complete all required sections before submitting. Use the Previous button to go back and fill in missing information. </p></div></div>',1)])]))])])}}},na=Se(aa,[["__scopeId","data-v-3fc986b6"]]);function ra(s,c){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const ia={class:"space-y-4"},ua={class:"block"},da={class:"text-sm font-medium text-gray-900"},ca={key:0,class:"text-red-500"},pa={key:0,class:"text-xs text-gray-500 mt-1"},ma={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},va=["disabled"],ga=["disabled"],fa={class:"text-center"},ya={class:"text-xs text-gray-500"},ba=["accept","multiple"],xa={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},_a={class:"flex items-center space-x-3"},ha={class:"flex-1"},wa={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},ka={key:1,class:"space-y-2"},Ca={class:"flex items-center space-x-3 flex-1 min-w-0"},$a={class:"flex-shrink-0"},Va={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},Sa=["src","alt"],qa={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},Ta={class:"flex-1 min-w-0"},Ma={class:"text-sm font-medium text-gray-900 truncate"},Pa={class:"text-xs text-gray-500"},Aa=["onClick"],Da={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},Ra={class:"relative bg-black aspect-video"},ja=["src"],Ia={key:2,class:"absolute inset-0 pointer-events-none"},Na={class:"w-full h-full grid grid-cols-3 grid-rows-3"},Fa={class:"bg-gray-900 px-6 py-6"},Ba={key:0,class:"flex items-center justify-center space-x-6"},La={key:1,class:"flex items-center justify-center space-x-4"},Ua={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(s,{emit:c}){const v=s,b=c,r=_(null),w=_(null),y=_(!1),p=_(null),h=_(null),C=_(!1),V=_(0),T=q({get:()=>v.modelValue,set:D=>b("update:modelValue",D)}),S=()=>{var D;(D=r.value)==null||D.click()},k=D=>K(this,null,function*(){const $=Array.from(D.target.files);yield x($),D.target.value=""}),x=D=>K(this,null,function*(){const $=[];for(const P of D){if(P.size>v.maxSize){alert(`File ${P.name} exceeds maximum size of ${_e(v.maxSize)}`);continue}let F=null;P.type.startsWith("image/")&&(F=yield l(P)),$.push({file:P,name:P.name,size:P.size,type:P.type,preview:F,uploadDate:new Date().toISOString()})}if($.length>0){const P=v.multiple?[...T.value,...$]:$;b("update:modelValue",P),yield o($)}}),l=D=>new Promise($=>{const P=new FileReader;P.onload=F=>$(F.target.result),P.onerror=()=>$(null),P.readAsDataURL(D)}),o=D=>K(this,null,function*(){C.value=!0,V.value=0;try{for(let $=0;$<D.length;$++){const P=D[$],F=setInterval(()=>{V.value=Math.min(V.value+10,90)},100);yield new Promise(Te=>{b("upload",P,Te)}),clearInterval(F),V.value=($+1)/D.length*100}}catch($){console.error("Upload error:",$),alert("Failed to upload files. Please try again.")}finally{C.value=!1,V.value=0}}),i=D=>{const $=[...T.value];$.splice(D,1),b("update:modelValue",$)},m=()=>K(this,null,function*(){try{y.value=!0,yield A()}catch(D){console.error("Camera error:",D),alert("Unable to access camera. Please check permissions or upload a file instead."),y.value=!1}}),A=()=>K(this,null,function*(){try{const D=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});h.value=D,w.value&&(w.value.srcObject=D)}catch(D){throw D}}),N=()=>{const D=w.value,$=document.createElement("canvas");$.width=D.videoWidth,$.height=D.videoHeight,$.getContext("2d").drawImage(D,0,0,$.width,$.height),p.value=$.toDataURL("image/jpeg",.9)},G=()=>{p.value=null},Y=()=>K(this,null,function*(){if(!p.value)return;const D=yield(yield fetch(p.value)).blob(),$=new File([D],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield x([$]),Z()}),Z=()=>{h.value&&(h.value.getTracks().forEach(D=>D.stop()),h.value=null),p.value=null,y.value=!1},_e=D=>{if(D===0)return"0 Bytes";const $=1024,P=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(D)/Math.log($));return Math.round(D/Math.pow($,F)*100)/100+" "+P[F]};return(D,$)=>(a(),n("div",ia,[e("label",ua,[e("span",da,[R(f(s.label)+" ",1),s.required?(a(),n("span",ca,"*")):g("",!0)]),s.helpText?(a(),n("p",pa,f(s.helpText),1)):g("",!0)]),e("div",ma,[s.allowCamera?(a(),n("button",{key:0,onClick:m,type:"button",class:I(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":C.value}]),disabled:C.value},[...$[0]||($[0]=[me('<div class="text-center" data-v-2bd160e5><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2bd160e5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2bd160e5></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2bd160e5></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2bd160e5>Take Photo</p><p class="text-xs text-gray-500" data-v-2bd160e5>Use camera</p></div>',1)])],10,va)):g("",!0),e("button",{onClick:S,type:"button",class:I(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":C.value}]),disabled:C.value},[e("div",fa,[$[1]||($[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),$[2]||($[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",ya,"Browse "+f(s.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:r,type:"file",accept:s.accept,multiple:s.multiple,onChange:k,class:"hidden"},null,40,ba)],10,ga)]),C.value?(a(),n("div",xa,[e("div",_a,[$[4]||($[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",ha,[$[3]||($[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",wa,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:dl({width:V.value+"%"})},null,4)])])])])):g("",!0),T.value.length>0?(a(),n("div",ka,[W(cl,{name:"list"},{default:te(()=>[(a(!0),n(z,null,O(T.value,(P,F)=>(a(),n("div",{key:P.name+F,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",Ca,[e("div",$a,[P.preview?(a(),n("div",Va,[e("img",{src:P.preview,alt:P.name,class:"w-full h-full object-cover"},null,8,Sa)])):(a(),n("div",qa,[...$[5]||($[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",Ta,[e("p",Ma,f(P.name),1),e("p",Pa,f(_e(P.size)),1)]),e("button",{onClick:Te=>i(F),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...$[6]||($[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Aa)])]))),128))]),_:1})])):g("",!0),(a(),ue(pl,{to:"body"},[y.value?(a(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:be(Z,["self"])},[e("div",Da,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[$[8]||($[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:Z,class:"text-gray-400 hover:text-white transition-colors"},[...$[7]||($[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ra,[p.value?(a(),n("img",{key:1,src:p.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,ja)):(a(),n("video",{key:0,ref_key:"videoElement",ref:w,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),p.value?g("",!0):(a(),n("div",Ia,[e("div",Na,[(a(),n(z,null,O(9,P=>e("div",{key:P,class:"border border-white/20"})),64))])]))]),e("div",Fa,[p.value?(a(),n("div",La,[e("button",{onClick:G,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:Y,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(a(),n("div",Ba,[e("button",{onClick:N,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...$[9]||($[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):g("",!0)]))]))}},za=Se(Ua,[["__scopeId","data-v-2bd160e5"]]),Ea={class:"space-y-4"},Oa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ha={class:"block text-sm font-medium text-gray-700 mb-2"},Wa={key:0,class:"text-red-500"},Ga={class:"relative"},Ja=["required"],Ka=["value"],Qa={class:"block text-sm font-medium text-gray-700 mb-2"},Xa={key:0,class:"text-red-500"},Ya={class:"relative"},Za=["required","disabled"],en=["value"],tn={key:0,class:"mt-1 text-xs text-gray-500"},ln={class:"block text-sm font-medium text-gray-700 mb-2"},sn={key:0,class:"text-red-500"},on={class:"relative"},an=["required","disabled"],nn=["value"],rn={key:0,class:"mt-1 text-xs text-gray-500"},un={class:"block text-sm font-medium text-gray-700 mb-2"},dn={key:0,class:"text-red-500"},cn=["required"],pn={class:"md:col-span-2"},mn={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},vn={class:"flex items-start"},gn={class:"flex-1"},fn={class:"text-sm text-green-700 mt-1"},yn={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:c}){const v=s,b=c,r=_({street:"",barangay:"",municipality:"",province:"",zipCode:""}),w=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],y={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Parañaque City","Las Piñas City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},p={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},h=q(()=>r.value.province?y[r.value.province]||[]:[]),C=q(()=>r.value.municipality?p[r.value.municipality]||["Other - Please specify in Street field"]:[]),V=q(()=>{const x=[];return r.value.street&&x.push(r.value.street),r.value.barangay&&x.push(`Brgy. ${r.value.barangay}`),r.value.municipality&&x.push(r.value.municipality),r.value.province&&x.push(r.value.province),r.value.zipCode&&x.push(r.value.zipCode),x.length>0?x.join(", "):""}),T=()=>{r.value.municipality="",r.value.barangay="",k()},S=()=>{r.value.barangay="",k()},k=()=>{b("update:modelValue",V.value)};return de(()=>{var x;if(v.modelValue)if(typeof v.modelValue=="string"){const l=v.modelValue.split(",").map(o=>o.trim());l.length>=3&&(r.value.street=l[0]||"",r.value.barangay=((x=l[1])==null?void 0:x.replace("Brgy. ",""))||"",r.value.municipality=l[2]||"",r.value.province=l[3]||"",r.value.zipCode=l[4]||"")}else typeof v.modelValue=="object"&&(r.value=E(E({},r.value),v.modelValue))}),le(()=>v.modelValue,x=>{x&&typeof x=="object"&&(r.value=E(E({},r.value),x))}),(x,l)=>(a(),n("div",Ea,[l[18]||(l[18]=me('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",Oa,[e("div",null,[e("label",Ha,[l[5]||(l[5]=R(" Province ",-1)),s.required?(a(),n("span",Wa,"*")):g("",!0)]),e("div",Ga,[M(e("select",{"onUpdate:modelValue":l[0]||(l[0]=o=>r.value.province=o),onChange:T,required:s.required,class:I(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value.province}])},[l[6]||(l[6]=e("option",{value:""},"Select Province",-1)),(a(),n(z,null,O(w,o=>e("option",{key:o,value:o},f(o),9,Ka)),64))],42,Ja),[[ie,r.value.province]]),l[7]||(l[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",Qa,[l[8]||(l[8]=R(" Municipality/City ",-1)),s.required?(a(),n("span",Xa,"*")):g("",!0)]),e("div",Ya,[M(e("select",{"onUpdate:modelValue":l[1]||(l[1]=o=>r.value.municipality=o),onChange:S,required:s.required,disabled:!r.value.province,class:I(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":r.value.municipality}])},[l[9]||(l[9]=e("option",{value:""},"Select Municipality/City",-1)),(a(!0),n(z,null,O(h.value,o=>(a(),n("option",{key:o,value:o},f(o),9,en))),128))],42,Za),[[ie,r.value.municipality]]),l[10]||(l[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),r.value.province?g("",!0):(a(),n("p",tn,"Select province first"))]),e("div",null,[e("label",ln,[l[11]||(l[11]=R(" Barangay ",-1)),s.required?(a(),n("span",sn,"*")):g("",!0)]),e("div",on,[M(e("select",{"onUpdate:modelValue":l[2]||(l[2]=o=>r.value.barangay=o),onChange:k,required:s.required,disabled:!r.value.municipality,class:I(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":r.value.barangay}])},[l[12]||(l[12]=e("option",{value:""},"Select Barangay",-1)),(a(!0),n(z,null,O(C.value,o=>(a(),n("option",{key:o,value:o},f(o),9,nn))),128))],42,an),[[ie,r.value.barangay]]),l[13]||(l[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),r.value.municipality?g("",!0):(a(),n("p",rn,"Select municipality first"))]),e("div",null,[e("label",un,[l[14]||(l[14]=R(" Street / House No. ",-1)),s.required?(a(),n("span",dn,"*")):g("",!0)]),M(e("input",{"onUpdate:modelValue":l[3]||(l[3]=o=>r.value.street=o),onInput:k,type:"text",required:s.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:I(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value.street}])},null,42,cn),[[L,r.value.street]])]),e("div",pn,[l[15]||(l[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[R(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),M(e("input",{"onUpdate:modelValue":l[4]||(l[4]=o=>r.value.zipCode=o),onInput:k,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[L,r.value.zipCode]])])]),V.value?(a(),n("div",mn,[e("div",vn,[l[17]||(l[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",gn,[l[16]||(l[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",fn,f(V.value),1)])])])):g("",!0)]))}},bn={class:"inline-block relative group"},xn={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:s=>["top","bottom","left","right"].includes(s)}},setup(s){const c=s,v=_(!1),b=q(()=>{switch(c.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),r=q(()=>{switch(c.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(w,y)=>(a(),n("div",bn,[yt(w.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:y[0]||(y[0]=p=>v.value=!0),onMouseleave:y[1]||(y[1]=p=>v.value=!1)},[...y[2]||(y[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),W(ml,{name:"tooltip"},{default:te(()=>[v.value?(a(),n("div",{key:0,class:I(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",b.value]),style:{"max-width":"300px","white-space":"normal"}},[yt(w.$slots,"default",{},()=>[R(f(s.text),1)],!0),e("div",{class:I(["tooltip-arrow",r.value])},null,2)],2)):g("",!0)]),_:3})]))}},Be=Se(xn,[["__scopeId","data-v-1fa5e90e"]]);function St(s,c){if(!s||s.trim()==="")return!0;let v=s.trim();v.startsWith("eval:")&&(v=v.substring(5).trim());try{return new Function("formData",`
      'use strict';
      try {
        return Boolean(${v});
      } catch (e) {
        console.warn('[Conditional Logic] Evaluation error:', e.message);
        return false;
      }
    `)(c)}catch(b){return console.error("[Conditional Logic] Failed to evaluate expression:",s,b),!0}}function _n(s,c){return!s||!s.is_enabled?!1:s.depends_on?St(s.depends_on,c):!0}function hn(s,c){return s?s.depends_on?St(s.depends_on,c):!0:!1}function wn(s){return s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s):!0}function kn(s){return s?/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(s.replace(/\s/g,"")):!0}function Cn(s){if(!s)return!0;try{return new URL(s),!0}catch(c){return!1}}function $n(s){return s===""||s===null||s===void 0?!0:!isNaN(parseFloat(s))&&isFinite(s)}function Vn(s,c,v){let b=s.trim();b.startsWith("eval:")&&(b=b.substring(5).trim());try{return new Function("formData","value",`
			'use strict';
			try {
				return Boolean(${b});
			} catch (e) {
				console.warn('[Field Validation] Evaluation error:', e.message);
				return true; // Fail open on evaluation error
			}
		`)(v,c)}catch(r){return console.error("[Field Validation] Failed to evaluate expression:",s,r),!0}}function Sn(s,c,v={}){if(!c)return{valid:!0,message:""};switch(c.toLowerCase()){case"email":if(!wn(s))return{valid:!1,message:"Please enter a valid email address"};break;case"phone":if(!kn(s))return{valid:!1,message:"Please enter a valid phone number"};break;case"url":if(!Cn(s))return{valid:!1,message:"Please enter a valid URL"};break;case"number":if(!$n(s))return{valid:!1,message:"Please enter a valid number"};break;default:if(c.startsWith("eval:")&&!Vn(c,s,v))return{valid:!1,message:"Validation failed"}}return{valid:!0,message:""}}const qn={class:"space-y-6"},Tn={key:0,class:"form-group"},Mn={key:1,class:"form-group"},Pn=["for"],An={key:0,class:"text-red-500 ml-1"},Dn={class:"relative"},Rn=["id","onUpdate:modelValue","onBlur","required","placeholder"],jn={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},In=["innerHTML"],Nn={key:0,class:"mt-1 text-xs text-red-600"},Fn={key:1,class:"mt-1 text-xs text-gray-500"},Bn={key:2,class:"form-group"},Ln=["for"],Un={key:0,class:"text-red-500 ml-1"},zn={class:"relative"},En=["id","onUpdate:modelValue","required"],On={value:""},Hn=["value"],Wn={key:0,class:"mt-1 text-xs text-gray-500"},Gn={key:3,class:"form-group"},Jn={class:"flex items-start p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors"},Kn={class:"flex items-center h-5"},Qn=["id","onUpdate:modelValue","required"],Xn={class:"ml-3 text-sm"},Yn=["for"],Zn={key:0,class:"text-red-500 ml-1"},er={key:0,class:"mt-1 text-xs text-gray-500"},tr={key:4,class:"form-group"},lr=["for"],sr={key:0,class:"text-red-500 ml-1"},or=["id","onUpdate:modelValue","required","placeholder"],ar={key:0,class:"mt-1 text-xs text-gray-500"},nr={key:5,class:"form-group"},rr=["for"],ir={key:0,class:"text-red-500 ml-1"},ur={class:"relative"},dr=["id","onUpdate:modelValue","required"],cr={key:0,class:"mt-1 text-xs text-gray-500"},pr={key:6,class:"form-group"},mr=["for"],vr={key:0,class:"text-red-500 ml-1"},gr={class:"relative"},fr=["id","onUpdate:modelValue","required","placeholder"],yr={key:0,class:"mt-1 text-xs text-gray-500"},br={key:7,class:"form-group"},xr=["for"],_r={key:0,class:"text-red-500 ml-1"},hr={class:"relative"},wr=["id","onUpdate:modelValue","required","placeholder"],kr={key:0,class:"mt-1 text-xs text-gray-500"},Cr={key:8,class:"form-group"},$r=["for"],Vr={key:0,class:"text-red-500 ml-1"},Sr={class:"relative"},qr=["id","onUpdate:modelValue","required"],Tr={key:0,class:"mt-1 text-xs text-gray-500"},Mr={key:9,class:"form-group"},Pr={key:10,class:"form-group"},Ar={class:"text-sm text-gray-500 italic"},Dr={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(s,{emit:c}){const v=s,b=c,r=q({get:()=>v.modelValue,set:k=>b("update:modelValue",k)}),w=q(()=>v.fields.filter(k=>hn(k,r.value))),y=k=>{var o;const x=((o=k.parent_section_code)==null?void 0:o.toLowerCase())||"";return["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(x)&&k.field_name==="address_line"&&k.field_type==="Data"},p=k=>{var l;if(k.placeholder)return k.placeholder;const x=((l=k.field_label)==null?void 0:l.toLowerCase())||"";return x.includes("name")?"e.g., Juan Dela Cruz":x.includes("email")?"e.g., juan@example.com":x.includes("phone")||x.includes("mobile")||x.includes("contact")?"e.g., 0917 123 4567":x.includes("age")?"e.g., 25":x.includes("occupation")?"e.g., Teacher":x.includes("income")||x.includes("salary")?"e.g., 15000":`Enter ${k.field_label}`},h=k=>{var l;const x=((l=k.field_label)==null?void 0:l.toLowerCase())||"";return x.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':x.includes("phone")||x.includes("mobile")||x.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':x.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},C=k=>k?k.split(`
`).map(x=>x.trim()).filter(Boolean):[],V=_({}),T=k=>{if(!k.validation){delete V.value[k.field_name];return}const x=r.value[k.field_name],l=Sn(x,k.validation,r.value);l.valid?delete V.value[k.field_name]:V.value[k.field_name]=l.message},S=k=>V.value[k]||"";return le(()=>v.fields,k=>{k.forEach(x=>{x.default_value&&!r.value[x.field_name]&&(x.default_value==="Today"&&x.field_type==="Date"?r.value[x.field_name]=new Date().toISOString().split("T")[0]:r.value[x.field_name]=x.default_value)})},{immediate:!0}),(k,x)=>(a(),n("div",qn,[(a(!0),n(z,null,O(w.value,l=>(a(),n("div",{key:l.field_name,class:"field-wrapper"},[y(l)?(a(),n("div",Tn,[W(yn,{modelValue:r.value[l.field_name],"onUpdate:modelValue":o=>r.value[l.field_name]=o,required:l.is_required},null,8,["modelValue","onUpdate:modelValue","required"])])):l.field_type==="Data"?(a(),n("div",Mn,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,f(l.field_label),1),l.is_required?(a(),n("span",An,"*")):g("",!0),l.help_text||l.description?(a(),ue(Be,{key:1,text:l.help_text||l.description},null,8,["text"])):g("",!0)],8,Pn),e("div",Dn,[M(e("input",{id:l.field_name,type:"text","onUpdate:modelValue":o=>r.value[l.field_name]=o,onBlur:o=>T(l),required:l.is_required,class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[l.field_name]&&!S(l.field_name),"border-red-500 ring-2 ring-red-100":S(l.field_name)}]),placeholder:p(l)},null,42,Rn),[[L,r.value[l.field_name]]]),h(l)?(a(),n("div",jn,[e("span",{innerHTML:h(l),class:"text-gray-400"},null,8,In)])):g("",!0)]),S(l.field_name)?(a(),n("p",Nn,f(S(l.field_name)),1)):l.description?(a(),n("p",Fn,f(l.description),1)):g("",!0)])):l.field_type==="Select"?(a(),n("div",Bn,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,f(l.field_label),1),l.is_required?(a(),n("span",Un,"*")):g("",!0),l.help_text||l.description?(a(),ue(Be,{key:1,text:l.help_text||l.description},null,8,["text"])):g("",!0)],8,Ln),e("div",zn,[M(e("select",{id:l.field_name,"onUpdate:modelValue":o=>r.value[l.field_name]=o,required:l.is_required,class:I(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":r.value[l.field_name]}])},[e("option",On,"Select "+f(l.field_label),1),(a(!0),n(z,null,O(C(l.options),o=>(a(),n("option",{key:o,value:o},f(o),9,Hn))),128))],10,En),[[ie,r.value[l.field_name]]]),x[0]||(x[0]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),l.description?(a(),n("p",Wn,f(l.description),1)):g("",!0)])):l.field_type==="Check"?(a(),n("div",Gn,[e("div",Jn,[e("div",Kn,[M(e("input",{id:l.field_name,type:"checkbox","onUpdate:modelValue":o=>r.value[l.field_name]=o,required:l.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,8,Qn),[[ee,r.value[l.field_name]]])]),e("div",Xn,[e("label",{for:l.field_name,class:"font-medium text-gray-700 cursor-pointer"},[R(f(l.field_label)+" ",1),l.is_required?(a(),n("span",Zn,"*")):g("",!0)],8,Yn),l.description?(a(),n("p",er,f(l.description),1)):g("",!0)])])])):l.field_type==="Text"?(a(),n("div",tr,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[R(f(l.field_label)+" ",1),l.is_required?(a(),n("span",sr,"*")):g("",!0)],8,lr),M(e("textarea",{id:l.field_name,"onUpdate:modelValue":o=>r.value[l.field_name]=o,required:l.is_required,rows:"4",class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":r.value[l.field_name]}]),placeholder:p(l)},null,10,or),[[L,r.value[l.field_name]]]),l.description?(a(),n("p",ar,f(l.description),1)):g("",!0)])):l.field_type==="Date"?(a(),n("div",nr,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,f(l.field_label),1),l.is_required?(a(),n("span",ir,"*")):g("",!0),l.help_text||l.description?(a(),ue(Be,{key:1,text:l.help_text||l.description},null,8,["text"])):g("",!0)],8,rr),e("div",ur,[M(e("input",{id:l.field_name,type:"date","onUpdate:modelValue":o=>r.value[l.field_name]=o,required:l.is_required,class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[l.field_name]}])},null,10,dr),[[L,r.value[l.field_name]]]),x[1]||(x[1]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),l.description?(a(),n("p",cr,f(l.description),1)):g("",!0)])):l.field_type==="Int"?(a(),n("div",pr,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,f(l.field_label),1),l.is_required?(a(),n("span",vr,"*")):g("",!0),l.help_text||l.description?(a(),ue(Be,{key:1,text:l.help_text||l.description},null,8,["text"])):g("",!0)],8,mr),e("div",gr,[M(e("input",{id:l.field_name,type:"number","onUpdate:modelValue":o=>r.value[l.field_name]=o,required:l.is_required,step:"1",class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[l.field_name]}]),placeholder:p(l)},null,10,fr),[[L,r.value[l.field_name],void 0,{number:!0}]]),x[2]||(x[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),l.description?(a(),n("p",yr,f(l.description),1)):g("",!0)])):l.field_type==="Float"?(a(),n("div",br,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[R(f(l.field_label)+" ",1),l.is_required?(a(),n("span",_r,"*")):g("",!0)],8,xr),e("div",hr,[M(e("input",{id:l.field_name,type:"number","onUpdate:modelValue":o=>r.value[l.field_name]=o,required:l.is_required,step:"0.01",class:I(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[l.field_name]}]),placeholder:p(l)},null,10,wr),[[L,r.value[l.field_name],void 0,{number:!0}]]),x[3]||(x[3]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),l.description?(a(),n("p",kr,f(l.description),1)):g("",!0)])):l.field_type==="Currency"?(a(),n("div",Cr,[e("label",{for:l.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[R(f(l.field_label)+" ",1),l.is_required?(a(),n("span",Vr,"*")):g("",!0)],8,$r),e("div",Sr,[x[4]||(x[4]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-base font-medium"},"₱")],-1)),M(e("input",{id:l.field_name,type:"number","onUpdate:modelValue":o=>r.value[l.field_name]=o,required:l.is_required,step:"0.01",class:I(["block w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":r.value[l.field_name]}]),placeholder:"0.00"},null,10,qr),[[L,r.value[l.field_name],void 0,{number:!0}]])]),l.description?(a(),n("p",Tr,f(l.description),1)):g("",!0)])):l.field_type==="Attach"||l.field_type==="Attach Image"?(a(),n("div",Mr,[W(za,{label:l.field_label,required:l.is_required,accept:l.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:r.value[l.field_name],"onUpdate:modelValue":o=>r.value[l.field_name]=o},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):(a(),n("div",Pr,[e("div",Ar,' Field type "'+f(l.field_type)+'" not yet supported for '+f(l.field_label),1)]))]))),128))]))}},Ze=Se(Dr,[["__scopeId","data-v-311b2024"]]),Rr={class:"dynamic-step max-w-4xl mx-auto"},jr={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},Ir={class:"flex items-start"},Nr={class:"ml-4 flex-1"},Fr={class:"text-2xl font-bold text-blue-900"},Br={key:0,class:"mt-2 text-sm text-blue-700"},Lr={class:"space-y-6"},Ur={class:"mb-4 pb-3 border-b-2 border-gray-200"},zr={class:"flex items-center"},Er={class:"text-lg font-semibold text-gray-900"},Or={key:0,class:"text-red-500 ml-1"},Hr={key:0,class:"text-sm text-gray-600 mt-0.5"},Wr={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},Gr={class:"section-content"},Jr={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},Kr={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(s,{emit:c}){const v=s,b=c,r=q({get:()=>v.modelValue,set:p=>b("update:modelValue",p)}),w=q(()=>v.stepConfig.sections?v.stepConfig.sections.filter(p=>_n(p,formData.value)):[]),y=p=>[p.section_title];return le(()=>v.stepConfig,p=>{p.sections&&p.sections.forEach(h=>{h.fields.forEach(C=>{C.default_value&&!r.value[C.field_name]&&(C.default_value==="Today"&&C.field_type==="Date"?r.value[C.field_name]=new Date().toISOString().split("T")[0]:r.value[C.field_name]=C.default_value)})})},{immediate:!0,deep:!0}),(p,h)=>(a(),n("div",Rr,[e("div",jr,[e("div",Ir,[h[3]||(h[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Nr,[e("h2",Fr,f(s.stepConfig.step_title),1),s.stepDescription?(a(),n("p",Br,f(s.stepDescription),1)):g("",!0)])])]),e("div",Lr,[(a(!0),n(z,null,O(w.value,C=>(a(),n("div",{key:C.section_code,class:"section"},[e("div",Ur,[e("div",zr,[h[4]||(h[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",Er,[R(f(C.section_title)+" ",1),C.is_required?(a(),n("span",Or,"*")):g("",!0)]),C.section_description?(a(),n("p",Hr,f(C.section_description),1)):g("",!0)])]),C.is_required?(a(),n("div",Wr,[...h[5]||(h[5]=[R(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),R(" are required ",-1)])])):g("",!0)]),e("div",Gr,[C.section_type==="Tab"?(a(),ue(oe($l),{key:0},{default:te(()=>[W(oe(Vl),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:te(()=>[(a(!0),n(z,null,O(y(C),(V,T)=>(a(),ue(oe(Sl),{key:T,class:I(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",p.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:te(({selected:S})=>[R(f(V),1)]),_:2},1032,["class"]))),128))]),_:2},1024),W(oe(ql),null,{default:te(()=>[(a(!0),n(z,null,O(y(C),(V,T)=>(a(),ue(oe(Tl),{key:T},{default:te(()=>[W(Ze,{fields:C.fields,modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=S=>r.value=S)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):C.section_type==="Accordion"?(a(),ue(oe(xl),{key:1},{default:te(({open:V})=>[W(oe(_l),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:te(()=>[e("span",null,f(C.section_title),1),W(oe(ra),{class:I([V?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),W(oe(hl),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:te(()=>[W(Ze,{fields:C.fields,modelValue:r.value,"onUpdate:modelValue":h[1]||(h[1]=T=>r.value=T)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(a(),n("div",Jr,[W(Ze,{fields:C.fields,modelValue:r.value,"onUpdate:modelValue":h[2]||(h[2]=V=>r.value=V)},null,8,["fields","modelValue"])]))])]))),128))])]))}},Qr=Se(Kr,[["__scopeId","data-v-6bf799f6"]]),Xr={class:"min-h-screen bg-gray-50"},Yr={class:"bg-white shadow-sm border-b border-gray-200"},Zr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ei={class:"flex items-center justify-between py-4"},ti={class:"flex items-center space-x-3"},li={class:"text-sm text-gray-500"},si={class:"flex items-center gap-2"},oi={class:"bg-white border-b border-gray-200"},ai={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},ni={class:"flex items-center justify-between mb-2"},ri={class:"flex flex-col items-center"},ii={key:0},ui={key:1},di={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ci={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},pi={key:0},mi={key:1},vi={key:2},gi={key:4},fi={class:"mt-8 flex justify-between items-center"},yi={key:1},bi=["disabled"],xi=["disabled"],_i={key:0},hi={key:1},wi={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ki={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},Ci={class:"flex items-center justify-between"},$i={class:"text-lg font-semibold text-gray-900"},Vi={class:"px-6 py-4 space-y-4"},Si={class:"border-t border-gray-200 pt-4"},qi={class:"grid md:grid-cols-2 gap-4"},Ti={class:"border-t border-gray-200 pt-4"},Mi={class:"space-y-3"},Pi={class:"border-t border-gray-200 pt-4"},Ai={class:"flex items-start mb-3"},Di={key:0,class:"ml-7 space-y-3"},Ri={key:0,class:"mt-2 text-xs text-green-600 flex items-center gap-1"},ji={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Ii={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Ni={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},Fi={class:"flex items-center justify-between"},Bi={class:"text-lg font-semibold text-gray-900"},Li={class:"px-6 py-4 space-y-4"},Ui={class:"border-t border-gray-200 pt-4"},zi={class:"space-y-3"},Ei={class:"border-t border-gray-200 pt-4"},Oi={class:"space-y-3"},Hi={key:0,class:"mt-2 text-xs text-green-600 flex items-center gap-1"},Wi={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},Gi={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"},Ji={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},Ki={class:"flex items-center justify-between"},Qi={class:"text-lg font-semibold text-gray-900"},Xi={class:"px-6 py-4 space-y-4"},Yi={class:"border-t border-gray-200 pt-4"},Zi={class:"grid md:grid-cols-3 gap-3"},eu={class:"flex items-center"},tu={class:"flex items-center"},lu={class:"flex items-center"},su={class:"flex items-center"},ou={class:"border-t border-gray-200 pt-4"},au={class:"space-y-2 p-3 border border-gray-200 rounded bg-gray-50"},nu={class:"flex items-center"},ru={class:"flex items-center"},iu={class:"flex items-center"},uu={class:"flex items-center"},du={class:"flex items-center"},cu={class:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3"},pu={class:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col"},mu={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},vu={class:"flex items-center justify-between"},gu={class:"flex-1 overflow-y-auto"},fu={class:"grid md:grid-cols-3 gap-6 p-6"},yu={class:"md:col-span-2 space-y-4"},bu={class:"flex items-center gap-2 mb-4 pb-4 border-b border-gray-200"},xu=["value"],_u={class:"ml-auto text-xs text-gray-500"},hu={key:0,class:"text-center py-12"},wu={key:1,class:"space-y-3"},ku={class:"flex items-start justify-between mb-2"},Cu={class:"flex-1"},$u={class:"flex items-center gap-2 mb-1"},Vu={class:"text-sm font-semibold text-gray-900"},Su={key:0,class:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-mono rounded"},qu={class:"flex items-center gap-2 mb-2"},Tu={class:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded"},Mu={key:0,class:"px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded"},Pu={key:1,class:"px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded"},Au=["innerHTML"],Du=["onClick"],Ru={key:2,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},ju={class:"md:col-span-1 bg-gray-50 rounded-lg p-4 border border-gray-200"},Iu={class:"text-sm font-semibold text-gray-900 mb-3 flex items-center justify-between"},Nu={class:"px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full"},Fu={key:0,class:"space-y-2 max-h-[600px] overflow-y-auto"},Bu={class:"flex items-start justify-between mb-1"},Lu={class:"flex items-center gap-1"},Uu={class:"px-1.5 py-0.5 bg-gray-100 text-gray-700 font-mono text-xs rounded"},zu={class:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded"},Eu=["onClick"],Ou=["innerHTML"],Hu={key:1,class:"text-center py-8 text-xs text-gray-500"},Wu={key:0,class:"border-t border-gray-200 bg-gray-50 p-6"},Gu={class:"text-sm font-semibold text-gray-900 mb-4"},Ju={class:"grid md:grid-cols-2 gap-4 mb-4"},Ku=["value"],Qu={class:"mb-4"},Xu={class:"flex justify-end gap-2 mt-4"},Yu={class:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end"},sd={__name:"NewRequest",setup(s){const c=wt(),v=vl(),b=gl(),r=_(null),w=_(!1),y=_(null),p=_(0),h=q(()=>o.value.length),C=_(!1),V=_(!1),T=_([]);_(null),_(!1);const S=_(!1);_(!1);const k=_([]),x=_(!1),l=_(!1),o=q(()=>{const d=[];console.log("[Steps] Computing steps..."),console.log("[Steps] councilStore.isCouncilLocked:",b.isCouncilLocked),console.log("[Steps] route.query.type:",v.query.type),console.log("[Steps] formData.value.request_type:",i.value.request_type),b.isCouncilLocked?console.log("[Steps] Skipped Council step (locked)"):(d.push({title:"Council",number:d.length+1}),console.log("[Steps] Added Council step"));const t=v.query.type||v.query.locked==="true"&&i.value.request_type,u=b.isCouncilLocked&&t;return console.log("[Steps] hasPreselectedType:",t),console.log("[Steps] skipTypeStep:",u),u?console.log("[Steps] Skipped Type step (locked + preselected)"):(d.push({title:"Type",number:d.length+1}),console.log("[Steps] Added Type step")),d.push({title:"Process Info",number:d.length+1}),console.log("[Steps] Added Process Info step"),l.value&&k.value.length>0&&k.value.forEach((j,ne)=>{d.push({title:j.step_title,number:d.length+1,code:j.step_code,config:j,isDynamic:!0})}),d.push({title:"Review",number:d.length+1}),console.log("[Steps] Final steps:",d.map(j=>j.title).join(" → ")),console.log("[Steps] Total steps:",d.length),d}),i=_({council:"",request_type:"",request_category:"",property:"",property_address:"",legal_description:"",valuation_reference:"",parcel_id:"",ct_reference:"",property_coordinates:"",hazard_data:null,zone:"",activity_zone:"",brief_description:"",detailed_description:"",estimated_value:null,proposed_start_date:"",terms_accepted:!1,applicant_phone:"",applicant_type:"",submitted_on_behalf_of:"Myself",company_account:null,acting_on_behalf:!1,applicant_name:"",applicant_email:"",consent_types:[],activity_status:"",applicant_reference_number:"",delivery_preference:"",pim_reference:"",building_height:null,building_floor_area:null,earthworks_volume:null,earthworks_vertical_alteration:null,vehicle_movements_daily:null,parking_spaces_provided:null,hours_of_operation:"",consent_term_requested:"",site_topography:"",existing_vegetation_description:"",watercourses_present:!1,watercourse_description:"",existing_infrastructure:"",contamination_status_hail:"",boundary_description:"",boundary_activity_description:"",boundary_owner_approval_obtained:!1,boundary_approval_date:"",boundary_approval_document:null,natural_hazards:[],nes_assessments:[],hail_activities:[],confidential_information_claimed:!1,confidential_information_reason:"",assessment_of_effects:"",effects_on_people:"",physical_effects:"",earthworks_effects:"",discharge_contaminants_effects:"",ecosystem_effects:"",hazard_risk_assessment:"",cultural_effects:"",aee_document:null,aee_activity_description:"",aee_activity_status:"",aee_existing_environment:"",aee_site_area:null,aee_current_use:"",aee_zoning:"",aee_overlays:"",aee_designations:"",aee_part2_assessment:"",aee_plan_rules:[],aee_compliance_standards:[],aee_written_approvals:[],aee_proposed_conditions:[],aee_consultation_summary:"",alternatives_considered:"",mitigation_proposed:"",applicant_is_not_owner:!1,owner_name:"",owner_email:"",owner_phone:"",owner_address:"",certificate_of_title_document:null,declaration_rma_compliance:!1,declaration_public_information:!1,declaration_authorized:!1,invoice_to:"Applicant",invoice_name:"",invoice_email:"",invoice_address:"",purchase_order_number:"",transfer_deposit_required:!1,transfer_deposit_consent_number:"",affected_parties:[],written_approvals_obtained:0,iwi_consultation_undertaken:!1,iwi_consulted:"",cultural_impact_assessment:null,iwi_response_summary:"",specialist_reports:[],proposed_conditions:[]});_(""),_([]),_(!1),_(!1);const m=_(null),A=_([]),N=_({}),G=d=>(N.value[d]||(N.value[d]={hazard_type:d,present:!0,risk_level:"",assessment_notes:"",mitigation_required:!1}),N.value[d]);le(A,d=>{i.value.natural_hazards=d.map(t=>G(t))},{deep:!0}),le(N,()=>{i.value.natural_hazards=A.value.map(d=>G(d))},{deep:!0});const Y=[{value:"Contaminated Soil (HAIL)",label:"NES for Assessing and Managing Contaminants in Soil (HAIL)"},{value:"Air Quality",label:"NES for Air Quality"},{value:"Drinking Water",label:"NES for Sources of Human Drinking Water"},{value:"Freshwater",label:"NES for Freshwater Management"},{value:"Plantation Forestry",label:"NES for Plantation Forestry"},{value:"Electricity Transmission",label:"NES for Electricity Transmission Activities"},{value:"Telecommunications",label:"NES for Telecommunication Facilities"},{value:"Other",label:"Other NES"}],Z=_({}),_e=d=>(Z.value[d]||(Z.value[d]={nes_type:d,applies:!1,description:"",compliance_notes:""}),Z.value[d]);le(Z,()=>{i.value.nes_assessments=Y.filter(d=>_e(d.value).applies).map(d=>_e(d.value))},{deep:!0}),q(()=>i.value.nes_assessments.some(d=>d.nes_type&&d.nes_type.includes("HAIL")));const D=_(!1),$=_(null),P=_({activity_description:"",hail_category:"",currently_undertaken:!1,previously_undertaken:!1,likely_undertaken:!1,preliminary_investigation_done:!1,proposed_activities:[],notes:""}),F=_({fuel:!1,disturb:!1,sample:!1,subdivide:!1,change:!1}),Te=()=>{if(!P.value.activity_description){alert("Please enter activity description");return}const d=[];F.value.fuel&&d.push({activity_type:"Removing or replacing fuel storage system"}),F.value.disturb&&d.push({activity_type:"Disturbing soil"}),F.value.sample&&d.push({activity_type:"Sampling soil"}),F.value.subdivide&&d.push({activity_type:"Subdividing land"}),F.value.change&&d.push({activity_type:"Changing use of land"});const t=Ce(E({},P.value),{proposed_activities:d});$.value!==null?i.value.hail_activities[$.value]=t:i.value.hail_activities.push(t),D.value=!1},We=()=>{D.value=!1};_({building:!0,earthworks:!1,traffic:!1,operations:!1});const qt=_(JSON.parse(JSON.stringify(i.value))),Tt=q(()=>{const d=E({},i.value),t=E({},qt.value);delete d.terms_accepted,delete t.terms_accepted;const u=JSON.stringify(d),j=JSON.stringify(t);return u!==j}),he=q(()=>i.value.request_category==="Resource Consent"),we=d=>{var t;return((t=i.value.consent_types)==null?void 0:t.some(u=>u.consent_type===d))||!1},ot=q(()=>we("Land Use")),Ge=q(()=>we("Subdivision")),Mt=q(()=>we("Water Permit")),Pt=q(()=>we("Discharge Permit")),At=q(()=>we("Coastal Permit"));q(()=>ot.value||Ge.value),q(()=>{const d=i.value.activity_status==="Controlled",t=!Ge.value;return d&&t&&he.value}),q(()=>(ot.value||Ge.value)&&!(Mt.value||Pt.value||At.value)),q(()=>{if(!i.value.activity_status)return null;switch(i.value.activity_status){case"Non-Complying":return"⚠️ Non-complying activities face higher scrutiny and longer processing times. Consider council meeting.";case"Discretionary":return"ℹ️ Discretionary activities may require public notification depending on effects assessment.";case"Controlled":return"✓ Controlled activities must be granted consent. Council will focus on appropriate conditions.";default:return null}});const at=q(()=>Tt.value||T.value.length>0),ae=_({data:[],loading:!1,error:null}),Dt=bt({url:"frappe.client.get_list",params:{doctype:"Property",fields:["name","property_id","street_address","suburb","city","legal_description","certificate_of_title"],limit_page_length:100},auto:!1}),Me=d=>K(this,null,function*(){if(console.log("[NewRequest] onCouncilChange called with:",d),console.log("[NewRequest] formData.value.council is now:",i.value.council),!d){ae.value={data:[],loading:!1,error:null};return}ae.value.loading=!0,ae.value.error=null;try{yield b.loadRequestTypesForCouncil(d),ae.value.data=b.availableRequestTypes,console.log(`[NewRequest] Loaded ${ae.value.data.length} request types for council ${d}`)}catch(t){ae.value.error=t.message||"Failed to load request types",console.error("[NewRequest] Failed to load request types:",t)}finally{ae.value.loading=!1}}),Rt=()=>{confirm("Are you sure you want to leave? Any unsaved changes will be lost.")&&c.push({name:"Dashboard"})},jt=d=>d<p.value||d===p.value?"bg-blue-600 text-white":"bg-gray-200 text-gray-600",It=d=>K(this,null,function*(){console.log("[NewRequest] Selecting Request Type:",d.name,d.type_name),i.value.request_type=d.name,i.value.request_category=d.category||"",m.value=d,console.log("[NewRequest] Form data updated:"),console.log("  request_type:",i.value.request_type),console.log("  request_category:",i.value.request_category),console.log("  council:",i.value.council),console.log("  formData.value:",i.value),d.category==="Resource Consent"&&et.user&&et.user!=="Guest"&&Dt.fetch(),yield nt(d.name)}),nt=d=>K(this,null,function*(){if(!d||!i.value.council){console.log("[NewRequest] Skipping step config load - missing requestType or council");return}try{x.value=!0,console.log("[NewRequest] Loading step config for:",d,"council:",i.value.council);const t=yield Fe("lodgeick.api.get_request_type_steps",{request_type:d,council_code:i.value.council});console.log("[NewRequest] Step config API result:",t),t&&t.uses_config&&t.steps&&t.steps.length>0?(k.value=t.steps,l.value=!0,console.log("[NewRequest] Loaded",k.value.length,"configured steps")):(k.value=[],l.value=!1,console.log("[NewRequest] No step configuration found - using hardcoded flow"))}catch(t){console.error("[NewRequest] Error loading step configuration:",t),k.value=[],l.value=!1}finally{x.value=!1}}),Je=q(()=>{var t,u,j,ne,J;switch(p.value){case 1:return!!i.value.council;case 2:return!!i.value.request_type;case 3:return!0;case 4:return!0;case 5:if(he.value){const se=i.value.consent_types;if(se==null?void 0:se.some(ke=>ke.consent_type==="Land Use"||ke.consent_type==="Subdivision")){const ke=i.value.natural_hazards,el=i.value.no_natural_hazards_confirmed;return ke&&ke.length>0||el}return!0}return!0;case 6:return!0;case 7:return!0;case 8:return!0;case 9:return!0;case 10:return he.value?i.value.aee_completion_method==="upload"?!!i.value.aee_document&&!!i.value.aee_document_confirmed:!!((t=i.value.aee_activity_description)!=null&&t.trim())&&!!((u=i.value.aee_existing_environment)!=null&&u.trim())&&!!((j=i.value.assessment_of_effects)!=null&&j.trim())&&!!i.value.aee_inline_confirmed:!0;case 11:if(he.value){const se=i.value.declaration_rma_compliance&&i.value.declaration_public_information&&i.value.declaration_authorized,mt=!!((ne=i.value.applicant_signature_first_name)!=null&&ne.trim())&&!!((J=i.value.applicant_signature_last_name)!=null&&J.trim())&&!!i.value.applicant_signature_date;return se&&mt}return!0;default:return!0}}),Nt=d=>K(this,null,function*(){try{const u=yield(yield fetch("/api/method/lodgeick.api.load_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:d})})).json();if(u.message&&u.message.success)i.value=u.message.form_data||{},p.value=u.message.current_step||1,console.log(`Draft loaded successfully. Resuming at step ${p.value}`);else throw new Error(u.message||"Failed to load draft")}catch(t){console.error("Error loading draft:",t),alert("Failed to load draft. Starting new application.")}}),rt=(d=!1)=>K(this,null,function*(){C.value=!0;try{const u=yield(yield fetch("/api/method/lodgeick.api.create_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({data:i.value,current_step:p.value,total_steps:h.value})})).json();if(u.message&&u.message.success)return u.message.request_id&&!i.value.request_id&&(i.value.request_id=u.message.request_id),alert(`Draft saved successfully! Request ID: ${u.message.request_number}`),d&&c.push({name:"Dashboard"}),u.message;throw new Error(u.message||"Failed to save draft")}catch(t){return console.error("Error saving draft:",t),alert("Failed to save draft. Please try again."),null}finally{C.value=!1}}),it=()=>{var t;const d=(t=b.councils)==null?void 0:t.find(u=>u.council_code===i.value.council);return(d==null?void 0:d.council_name)||"Council"},Ft=()=>{var t;const d=(t=ae.data)==null?void 0:t.find(u=>u.name===i.value.request_type);return(d==null?void 0:d.type_name)||"N/A"},Bt=()=>{var t;const d=(t=ae.data)==null?void 0:t.find(u=>u.name===i.value.request_type);return d!=null&&d.base_fee?`$${d.base_fee}`:"TBD"},ut=()=>{Je.value&&p.value++},dt=()=>{if(!l.value||k.value.length===0)return null;const d=o.value.findIndex(u=>u.title==="Process Info"),t=p.value-d-1;return t>=0&&t<k.value.length?k.value[t]:null},ge=()=>{const d=p.value>=0&&p.value<o.value.length?o.value[p.value].title:"";return console.log("[getCurrentStepTitle] currentStep:",p.value,"title:",d,"allSteps:",o.value.map(t=>t.title).join(" → ")),d},Lt=()=>K(this,null,function*(){yield Ut()}),Ut=()=>K(this,null,function*(){if(!i.value.declaration_rma_compliance||!i.value.declaration_public_information||!i.value.declaration_authorized){alert("Please confirm all three statutory declarations before submitting your application");return}V.value=!0;try{const t=yield(yield fetch("/api/method/lodgeick.api.create_draft_request",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({data:i.value})})).json();if(!t.message||!t.message.success)throw new Error("Failed to create request");const u=t.message.request_id;if(T.value.length>0)for(const J of T.value){const se=new FormData;se.append("file",J),se.append("doctype","Request"),se.append("docname",u),se.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:se})}if(i.value.certificate_of_title_document){const J=new FormData;J.append("file",i.value.certificate_of_title_document),J.append("doctype","Request"),J.append("docname",u),J.append("fieldname","certificate_of_title_document"),J.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:J})}if(i.value.aee_document){const J=new FormData;J.append("file",i.value.aee_document),J.append("doctype","Resource Consent Application"),J.append("docname",u),J.append("fieldname","aee_document"),J.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:J})}const ne=yield(yield fetch("/api/method/lodgeick.lodgeick.doctype.request.request.submit_application",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:u})})).json();if(ne.message&&ne.message.success)alert(`Application submitted successfully! Request Number: ${ne.message.request_number}`),c.push({name:"Dashboard"});else throw new Error("Failed to submit application")}catch(d){console.error("Error submitting application:",d),alert("Failed to submit application")}finally{V.value=!1}});_(null);const Ke=_(!1),Pe=_(null),B=_({party_name:"",relationship:"",property_address:"",email:"",phone:"",postal_address:"",approval_obtained:!1,approval_date:"",approval_document:null,comments:""}),zt=()=>{if(!B.value.party_name||!B.value.relationship){alert("Please enter party name and relationship");return}Pe.value!==null?i.value.affected_parties[Pe.value]=E({},B.value):i.value.affected_parties.push(E({},B.value)),Ke.value=!1},Qe=()=>{Ke.value=!1},Et=d=>{const t=d.target.files[0];if(t){if(t.size>10*1024*1024){alert("File size must be less than 10MB"),d.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/jpg","image/png"].includes(t.type)){alert("Only PDF, Word documents, and images (JPG, PNG) are allowed"),d.target.value="";return}B.value.approval_document=t}},Xe=_(!1),Ae=_(null),H=_({report_type:"",specialist_name:"",specialist_company:"",report_date:"",document:null,summary:""}),Ot=()=>{if(!H.value.report_type||!H.value.specialist_name||!H.value.report_date){alert("Please enter report type, specialist name, and report date");return}Ae.value!==null?i.value.specialist_reports[Ae.value]=E({},H.value):i.value.specialist_reports.push(E({},H.value)),Xe.value=!1},Ye=()=>{Xe.value=!1},Ht=d=>{const t=d.target.files[0];if(t){if(t.size>10*1024*1024){alert("File size must be less than 10MB"),d.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type)){alert("Only PDF and Word documents are allowed"),d.target.value="";return}H.value.document=t}},De=_(!1),pe=_(null),ct=_([]),Wt=_(!1),Re=_("All"),Q=_({condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""}),pt=["All","General","Timing","Lapse","Review","Financial Contribution","Bonds","Monitoring","Environmental Management","Construction","Operation","Landscape","Ecology","Archaeology","Cultural","Traffic","Parking","Noise","Discharge","Earthworks","Heritage","Water","Coastal","Other"],je=q(()=>Re.value==="All"?ct.value:ct.value.filter(d=>d.condition_category===Re.value)),Gt=d=>{const u={condition_number:(i.value.proposed_conditions.length+1).toString(),condition_category:d.condition_category,condition_text:d.condition_text,compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""};i.value.proposed_conditions.push(u)},Jt=()=>{Q.value={condition_number:(i.value.proposed_conditions.length+1).toString(),condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},pe.value=null},Kt=()=>{if(!Q.value.condition_category||!Q.value.condition_text){alert("Please enter condition category and text");return}pe.value!==null?i.value.proposed_conditions[pe.value]=E({},Q.value):i.value.proposed_conditions.push(E({},Q.value)),Q.value={condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},pe.value=null},Qt=()=>{Q.value={condition_number:"",condition_category:"",condition_text:"",compliance_status:"Not Started",compliance_due_date:"",compliance_notes:""},pe.value=null},Xt=d=>{confirm("Remove this condition?")&&(i.value.proposed_conditions.splice(d,1),i.value.proposed_conditions.forEach((t,u)=>{t.condition_number=(u+1).toString()}))};bt({url:"lodgeick.api.book_council_meeting",makeParams:d=>d,onSuccess:d=>{d&&d.success?alert(`✅ Council Meeting Request Sent!

Task #${d.task_id} has been created for the planning team.

They will contact you within 2 business days to schedule.`):alert("Meeting request sent successfully! The planning team will contact you soon."),S.value=!1},onError:d=>{console.error("Error requesting meeting:",d),alert("Failed to request council meeting. Please try again or contact the planning team directly."),S.value=!1}});const Yt=()=>K(this,null,function*(){try{w.value=!0;const d=yield Fe("lodgeick.api.get_user_profile");r.value=d,d.applicant_type&&!i.value.applicant_type&&(i.value.applicant_type=d.applicant_type),d.phone&&!i.value.applicant_phone&&!i.value.acting_on_behalf&&(i.value.applicant_phone=d.phone),i.value.acting_on_behalf||(i.value.applicant_name=`${d.first_name||""} ${d.last_name||""}`.trim()||d.email,i.value.applicant_email=d.email)}catch(d){console.error("Error loading user profile:",d)}finally{w.value=!1}}),Zt=()=>K(this,null,function*(){try{const d=yield Fe("lodgeick.api.get_user_company_account");d&&(y.value=d)}catch(d){console.error("Error loading company account:",d)}});return le(()=>i.value.submitted_on_behalf_of,d=>{d==="Company"&&y.value?i.value.company_account=y.value.name:i.value.company_account=null}),le(()=>i.value.acting_on_behalf,d=>{!d&&r.value?(i.value.applicant_name=`${r.value.first_name||""} ${r.value.last_name||""}`.trim()||r.value.email,i.value.applicant_email=r.value.email,r.value.phone&&(i.value.applicant_phone=r.value.phone),r.value.applicant_type&&(i.value.applicant_type=r.value.applicant_type)):d&&(i.value.applicant_name="",i.value.applicant_email="",i.value.applicant_phone="")}),le(()=>i.value.applicant_phone,(d,t)=>K(this,null,function*(){if(!i.value.acting_on_behalf&&r.value&&d&&d!==t&&d!==r.value.phone)try{yield Fe("lodgeick.api.update_user_profile",{phone:d}),r.value.phone=d,console.log("[NewRequest] Phone number saved to profile:",d)}catch(u){console.error("[NewRequest] Error saving phone to profile:",u)}})),le(()=>i.value.council,(d,t)=>{console.log("[NewRequest] formData.council changed from:",t,"to:",d),console.trace("[NewRequest] Stack trace for council change")}),de(()=>K(this,null,function*(){console.log("[NewRequest] onMounted - starting initialization"),yield Yt(),yield Zt();const d=v.params.id||v.query.draft_id;if(d){yield Nt(d);return}console.log("[NewRequest] Before loadLockedCouncil - isCouncilLocked:",b.isCouncilLocked);const t=yield b.loadLockedCouncil();console.log("[NewRequest] After loadLockedCouncil - result:",t),console.log("[NewRequest] After loadLockedCouncil - isCouncilLocked:",b.isCouncilLocked),console.log("[NewRequest] After loadLockedCouncil - lockedCouncil:",b.lockedCouncil);const u=v.query.type;if(console.log("[NewRequest] preselectedType from URL:",u),b.isCouncilLocked)if(console.log("[NewRequest] Council is locked:",b.lockedCouncil),i.value.council=b.lockedCouncil,yield Me(b.lockedCouncil),u){console.log("[NewRequest] Request type is pre-selected:",u),i.value.request_type=u;const j=b.requestTypes.find(ne=>ne.name===u);j&&(m.value=j,i.value.request_category=j.category||"",console.log("[NewRequest] Set selectedRequestTypeDetails:",j)),yield nt(u),p.value=0}else p.value=0;else if(b.preselectedFromUrl)console.log("[NewRequest] Setting council from URL:",b.preselectedFromUrl),i.value.council=b.preselectedFromUrl,yield Me(b.preselectedFromUrl);else{const j=yield b.getUserCouncils();j.default_council&&(console.log("[NewRequest] Setting council from user default:",j.default_council),i.value.council=j.default_council,yield Me(j.default_council))}console.log("[NewRequest] onMounted - initialization complete"),console.log("  Council:",i.value.council),console.log("  Type:",i.value.request_type),console.log("  Current Step:",p.value)})),(d,t)=>(a(),n("div",Xr,[e("header",Yr,[e("div",Zr,[e("div",ei,[e("div",ti,[e("button",{onClick:Rt,class:"text-gray-500 hover:text-gray-700"},[...t[42]||(t[42]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),e("div",null,[t[43]||(t[43]=e("h1",{class:"text-xl font-bold text-gray-900"},"New Application",-1)),e("p",li,"Step "+f(p.value+1)+" of "+f(h.value),1)])]),e("div",si,[W(oe(xt),{onClick:t[0]||(t[0]=u=>rt(!1)),variant:"outline",theme:"gray",loading:C.value},{default:te(()=>[...t[44]||(t[44]=[R(" Save Draft ",-1)])]),_:1},8,["loading"]),W(oe(xt),{onClick:t[1]||(t[1]=u=>rt(!0)),variant:"outline",theme:"gray",loading:C.value},{default:te(()=>[...t[45]||(t[45]=[R(" Save Draft & Close ",-1)])]),_:1},8,["loading"])])])])]),e("div",oi,[e("div",ai,[e("div",ni,[(a(!0),n(z,null,O(o.value,(u,j)=>(a(),n("div",{key:j,class:I(["flex items-center",{"flex-1":j<o.value.length-1}])},[e("div",ri,[e("div",{class:I(["w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm",jt(j)])},[j<p.value?(a(),n("span",ii,"✓")):(a(),n("span",ui,f(j+1),1))],2),e("span",{class:I(["text-xs mt-2 text-center",j===p.value?"text-blue-600 font-medium":"text-gray-500"])},f(u.title),3)]),j<o.value.length-1?(a(),n("div",{key:0,class:I(["flex-1 h-1 mx-4 rounded",j<p.value?"bg-blue-600":"bg-gray-200"])},null,2)):g("",!0)],2))),128))])])]),e("main",di,[e("div",ci,[ge()==="Council"?(a(),n("div",pi,[W(Ml,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=u=>i.value=u),onCouncilChange:Me},null,8,["modelValue"])])):g("",!0),ge()==="Type"?(a(),n("div",mi,[W(El,{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=u=>i.value=u),"request-types":ae.value,onTypeSelected:It},null,8,["modelValue","request-types"])])):g("",!0),ge()==="Process Info"?(a(),n("div",vi,[W(_s,{"request-type-details":m.value,"council-name":it(),modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=u=>i.value=u),onContinue:ut},null,8,["request-type-details","council-name","modelValue"])])):g("",!0),l.value&&dt()&&ge()!=="Process Info"&&ge()!=="Review"?(a(),ue(Qr,{key:3,stepConfig:dt(),modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=u=>i.value=u)},null,8,["stepConfig","modelValue"])):g("",!0),ge()==="Review"?(a(),n("div",gi,[W(na,{modelValue:i.value,"onUpdate:modelValue":t[6]||(t[6]=u=>i.value=u),"council-name":it(),"request-type-name":Ft(),"application-fee":Bt(),"is-resource-consent":he.value,"step-configs":k.value,"uses-configurable-steps":l.value,"request-type-details":m.value},null,8,["modelValue","council-name","request-type-name","application-fee","is-resource-consent","step-configs","uses-configurable-steps","request-type-details"])])):g("",!0)]),e("div",fi,[p.value>0?(a(),n("button",{key:0,onClick:t[7]||(t[7]=u=>p.value--),class:"px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center"},[...t[46]||(t[46]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),R(" Previous ",-1)])])):(a(),n("div",yi)),p.value<o.value.length-1?(a(),n("button",{key:2,type:"button",onClick:ut,disabled:!Je.value,class:I(["px-6 py-3 font-medium rounded-lg transition-colors flex items-center",Je.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[...t[47]||(t[47]=[R(" Next ",-1),e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],10,bi)):(a(),n("button",{key:3,onClick:Lt,disabled:!at.value||V.value,class:I(["px-6 py-3 font-medium rounded-lg transition-colors",at.value&&!V.value?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[V.value?(a(),n("span",_i,"Submitting...")):(a(),n("span",hi,"Submit Application"))],10,xi))])]),Ke.value?(a(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:be(Qe,["self"])},[e("div",wi,[e("div",ki,[e("div",Ci,[e("h3",$i,f(Pe.value!==null?"Edit":"Add")+" Affected Party ",1),e("button",{onClick:Qe,class:"text-gray-400 hover:text-gray-600"},[...t[48]||(t[48]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Vi,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Party Name "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[8]||(t[8]=u=>B.value.party_name=u),type:"text",required:"",placeholder:"e.g., John Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,B.value.party_name]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Relationship "),e("span",{class:"text-red-500"},"*")],-1)),M(e("select",{"onUpdate:modelValue":t[9]||(t[9]=u=>B.value.relationship=u),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[50]||(t[50]=[me('<option value="">Select relationship</option><option value="Adjacent Property Owner">Adjacent Property Owner</option><option value="Neighbor">Neighbor</option><option value="Iwi">Iwi</option><option value="Infrastructure Provider">Infrastructure Provider</option><option value="Other">Other</option>',6)])],512),[[ie,B.value.relationship]])]),e("div",Si,[t[54]||(t[54]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Contact Information",-1)),e("div",qi,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Email",-1)),M(e("input",{"onUpdate:modelValue":t[10]||(t[10]=u=>B.value.email=u),type:"email",placeholder:"email@example.com",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,B.value.email]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Phone",-1)),M(e("input",{"onUpdate:modelValue":t[11]||(t[11]=u=>B.value.phone=u),type:"tel",placeholder:"021 123 4567",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,B.value.phone]])])])]),e("div",Ti,[t[59]||(t[59]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Addresses",-1)),e("div",Mi,[e("div",null,[t[55]||(t[55]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Property Address",-1)),M(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=u=>B.value.property_address=u),rows:"2",placeholder:"123 Main Street, Suburb, City",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,B.value.property_address]]),t[56]||(t[56]=e("p",{class:"mt-1 text-xs text-gray-500"},"The property address affected by this proposal",-1))]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Postal Address",-1)),M(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=u=>B.value.postal_address=u),rows:"2",placeholder:"PO Box 123, Suburb, City",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,B.value.postal_address]]),t[58]||(t[58]=e("p",{class:"mt-1 text-xs text-gray-500"},"For correspondence (if different from property address)",-1))])])]),e("div",Pi,[t[65]||(t[65]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Written Approval",-1)),e("div",Ai,[M(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=u=>B.value.approval_obtained=u),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,B.value.approval_obtained]]),t[60]||(t[60]=e("label",{class:"ml-3 text-sm text-gray-700"}," Written approval obtained from this party ",-1))]),B.value.approval_obtained?(a(),n("div",Di,[e("div",null,[t[61]||(t[61]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Approval Date",-1)),M(e("input",{"onUpdate:modelValue":t[15]||(t[15]=u=>B.value.approval_date=u),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,B.value.approval_date]])]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Approval Document",-1)),e("input",{type:"file",onChange:Et,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),t[64]||(t[64]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload written approval (PDF, Word, or image, max 10MB)",-1)),B.value.approval_document?(a(),n("div",Ri,[t[62]||(t[62]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,f(typeof B.value.approval_document=="object"?B.value.approval_document.name:"Document attached"),1)])):g("",!0)])])):g("",!0)]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Comments",-1)),M(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=u=>B.value.comments=u),rows:"3",placeholder:"Any additional notes about this party or their concerns...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,B.value.comments]])])]),e("div",ji,[e("button",{onClick:Qe,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:zt,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},f(Pe.value!==null?"Update":"Add")+" Party ",1)])])])):g("",!0),Xe.value?(a(),n("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:be(Ye,["self"])},[e("div",Ii,[e("div",Ni,[e("div",Fi,[e("h3",Bi,f(Ae.value!==null?"Edit":"Add")+" Specialist Report ",1),e("button",{onClick:Ye,class:"text-gray-400 hover:text-gray-600"},[...t[67]||(t[67]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Li,[e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Report Type "),e("span",{class:"text-red-500"},"*")],-1)),M(e("select",{"onUpdate:modelValue":t[17]||(t[17]=u=>H.value.report_type=u),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[68]||(t[68]=[me('<option value="">Select report type</option><option value="Traffic Impact Assessment">Traffic Impact Assessment</option><option value="Acoustic Assessment">Acoustic Assessment</option><option value="Geotechnical Report">Geotechnical Report</option><option value="Ecological Assessment">Ecological Assessment</option><option value="Archaeological Assessment">Archaeological Assessment</option><option value="Landscape Assessment">Landscape Assessment</option><option value="Contaminated Land Assessment">Contaminated Land Assessment</option><option value="Flood Risk Assessment">Flood Risk Assessment</option><option value="Other">Other</option>',10)])],512),[[ie,H.value.report_type]])]),e("div",Ui,[t[72]||(t[72]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Consultant Details",-1)),e("div",zi,[e("div",null,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Specialist Name "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[18]||(t[18]=u=>H.value.specialist_name=u),type:"text",required:"",placeholder:"e.g., Dr. Jane Smith",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,H.value.specialist_name]])]),e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Company/Organization",-1)),M(e("input",{"onUpdate:modelValue":t[19]||(t[19]=u=>H.value.specialist_company=u),type:"text",placeholder:"e.g., ABC Consultants Ltd",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,H.value.specialist_company]])])])]),e("div",Ei,[t[80]||(t[80]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Report Details",-1)),e("div",Oi,[e("div",null,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Report Date "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[20]||(t[20]=u=>H.value.report_date=u),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,H.value.report_date]]),t[74]||(t[74]=e("p",{class:"mt-1 text-xs text-gray-500"},"Date the report was prepared or finalized",-1))]),e("div",null,[t[76]||(t[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Document "),e("span",{class:"text-red-500"},"*")],-1)),e("input",{type:"file",onChange:Ht,accept:".pdf,.doc,.docx",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),t[77]||(t[77]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upload the specialist report (PDF or Word, max 10MB)",-1)),H.value.document?(a(),n("div",Hi,[t[75]||(t[75]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,f(typeof H.value.document=="object"?H.value.document.name:"Document attached"),1)])):g("",!0)]),e("div",null,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Summary",-1)),M(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=u=>H.value.summary=u),rows:"4",placeholder:"Brief summary of key findings and recommendations...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[L,H.value.summary]]),t[79]||(t[79]=e("p",{class:"mt-1 text-xs text-gray-500"},"Optional: Provide a brief summary of the report's key findings",-1))])])])]),e("div",Wi,[e("button",{onClick:Ye,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Ot,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},f(Ae.value!==null?"Update":"Add")+" Report ",1)])])])):g("",!0),D.value?(a(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:be(We,["self"])},[e("div",Gi,[e("div",Ji,[e("div",Ki,[e("h3",Qi,f($.value!==null?"Edit":"Add")+" HAIL Activity ",1),e("button",{onClick:We,class:"text-gray-400 hover:text-gray-600"},[...t[81]||(t[81]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Xi,[e("div",null,[t[82]||(t[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[R(" Activity Description "),e("span",{class:"text-red-500"},"*")],-1)),M(e("textarea",{"onUpdate:modelValue":t[22]||(t[22]=u=>P.value.activity_description=u),rows:"3",required:"",placeholder:"Describe the HAIL activity (e.g., Former service station, industrial site)...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,P.value.activity_description]])]),e("div",null,[t[84]||(t[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," HAIL Category ",-1)),M(e("select",{"onUpdate:modelValue":t[23]||(t[23]=u=>P.value.hail_category=u),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[83]||(t[83]=[me('<option value="">Select HAIL category</option><option value="Category A - Petroleum/Oil Storage">Category A - Petroleum/Oil Storage</option><option value="Category B - Asbestos Products">Category B - Asbestos Products</option><option value="Category C - Chemicals">Category C - Chemicals</option><option value="Category D - Engineering Workshops">Category D - Engineering Workshops</option><option value="Category E - Gasworks/Coke Works">Category E - Gasworks/Coke Works</option><option value="Category F - Horticulture">Category F - Horticulture</option><option value="Category G - Landfills/Waste Disposal">Category G - Landfills/Waste Disposal</option><option value="Category H - Metal Treatment">Category H - Metal Treatment</option><option value="Category I - Timber Treatment">Category I - Timber Treatment</option>',10)])],512),[[ie,P.value.hail_category]])]),e("div",Yi,[t[88]||(t[88]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Activity Status",-1)),e("div",Zi,[e("div",eu,[M(e("input",{type:"checkbox",id:"hail-current","onUpdate:modelValue":t[24]||(t[24]=u=>P.value.currently_undertaken=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,P.value.currently_undertaken]]),t[85]||(t[85]=e("label",{for:"hail-current",class:"ml-2 text-sm text-gray-700"},"Currently Being Undertaken",-1))]),e("div",tu,[M(e("input",{type:"checkbox",id:"hail-previous","onUpdate:modelValue":t[25]||(t[25]=u=>P.value.previously_undertaken=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,P.value.previously_undertaken]]),t[86]||(t[86]=e("label",{for:"hail-previous",class:"ml-2 text-sm text-gray-700"},"Previously Undertaken",-1))]),e("div",lu,[M(e("input",{type:"checkbox",id:"hail-likely","onUpdate:modelValue":t[26]||(t[26]=u=>P.value.likely_undertaken=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,P.value.likely_undertaken]]),t[87]||(t[87]=e("label",{for:"hail-likely",class:"ml-2 text-sm text-gray-700"},"Likely to Have Been Undertaken",-1))])])]),e("div",su,[M(e("input",{type:"checkbox",id:"hail-investigated","onUpdate:modelValue":t[27]||(t[27]=u=>P.value.preliminary_investigation_done=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,P.value.preliminary_investigation_done]]),t[89]||(t[89]=e("label",{for:"hail-investigated",class:"ml-2 text-sm text-gray-700"},"Preliminary Investigation Completed",-1))]),e("div",ou,[t[95]||(t[95]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Proposed Activities",-1)),e("div",au,[e("div",nu,[M(e("input",{type:"checkbox",id:"hail-activity-fuel","onUpdate:modelValue":t[28]||(t[28]=u=>F.value.fuel=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,F.value.fuel]]),t[90]||(t[90]=e("label",{for:"hail-activity-fuel",class:"ml-2 text-sm text-gray-700"},"Removing or replacing fuel storage system",-1))]),e("div",ru,[M(e("input",{type:"checkbox",id:"hail-activity-disturb","onUpdate:modelValue":t[29]||(t[29]=u=>F.value.disturb=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,F.value.disturb]]),t[91]||(t[91]=e("label",{for:"hail-activity-disturb",class:"ml-2 text-sm text-gray-700"},"Disturbing soil",-1))]),e("div",iu,[M(e("input",{type:"checkbox",id:"hail-activity-sample","onUpdate:modelValue":t[30]||(t[30]=u=>F.value.sample=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,F.value.sample]]),t[92]||(t[92]=e("label",{for:"hail-activity-sample",class:"ml-2 text-sm text-gray-700"},"Sampling soil",-1))]),e("div",uu,[M(e("input",{type:"checkbox",id:"hail-activity-subdivide","onUpdate:modelValue":t[31]||(t[31]=u=>F.value.subdivide=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,F.value.subdivide]]),t[93]||(t[93]=e("label",{for:"hail-activity-subdivide",class:"ml-2 text-sm text-gray-700"},"Subdividing land",-1))]),e("div",du,[M(e("input",{type:"checkbox",id:"hail-activity-change","onUpdate:modelValue":t[32]||(t[32]=u=>F.value.change=u),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ee,F.value.change]]),t[94]||(t[94]=e("label",{for:"hail-activity-change",class:"ml-2 text-sm text-gray-700"},"Changing use of land",-1))])]),t[96]||(t[96]=e("p",{class:"text-xs text-gray-500 mt-2"},"Select all proposed activities that apply",-1))]),e("div",null,[t[97]||(t[97]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Additional Notes",-1)),M(e("textarea",{"onUpdate:modelValue":t[33]||(t[33]=u=>P.value.notes=u),rows:"3",placeholder:"Additional notes about the HAIL activity...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,P.value.notes]])])]),e("div",cu,[e("button",{onClick:We,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Te,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},f($.value!==null?"Update":"Add")+" Activity ",1)])])])):g("",!0),De.value?(a(),n("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[41]||(t[41]=be(u=>De.value=!1,["self"]))},[e("div",pu,[e("div",mu,[e("div",vu,[t[99]||(t[99]=e("h3",{class:"text-lg font-semibold text-gray-900"}," Browse Condition Templates ",-1)),e("button",{onClick:t[34]||(t[34]=u=>De.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[98]||(t[98]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",gu,[e("div",fu,[e("div",yu,[e("div",bu,[t[100]||(t[100]=e("label",{class:"text-sm font-medium text-gray-700"},"Filter by Category:",-1)),M(e("select",{"onUpdate:modelValue":t[35]||(t[35]=u=>Re.value=u),class:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(a(),n(z,null,O(pt,u=>e("option",{key:u,value:u},f(u),9,xu)),64))],512),[[ie,Re.value]]),e("span",_u,f(je.value.length)+" template"+f(je.value.length!==1?"s":""),1)]),Wt.value?(a(),n("div",hu,[...t[101]||(t[101]=[e("svg",{class:"animate-spin h-8 w-8 mx-auto text-blue-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading templates...",-1)])])):je.value.length>0?(a(),n("div",wu,[(a(!0),n(z,null,O(je.value,u=>(a(),n("div",{key:u.name,class:"p-4 bg-white border border-gray-300 rounded-lg hover:border-blue-400 hover:shadow-sm transition-all"},[e("div",ku,[e("div",Cu,[e("div",$u,[e("h4",Vu,f(u.template_name),1),u.condition_code?(a(),n("span",Su,f(u.condition_code),1)):g("",!0)]),e("div",qu,[e("span",Tu,f(u.condition_category),1),u.timing?(a(),n("span",Mu,f(u.timing),1)):g("",!0),u.monitoring_required?(a(),n("span",Pu," Monitoring Required ")):g("",!0)]),e("div",{class:"text-xs text-gray-700 line-clamp-3",innerHTML:u.condition_text},null,8,Au)]),e("button",{onClick:j=>Gt(u),type:"button",class:"ml-3 px-3 py-1.5 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 flex items-center gap-1 flex-shrink-0"},[...t[102]||(t[102]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),R(" Add ",-1)])],8,Du)])]))),128))])):(a(),n("div",Ru,[...t[103]||(t[103]=[e("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-sm text-gray-500"},"No templates found for selected category",-1)])])),e("div",{class:"pt-4 border-t border-gray-200"},[e("button",{onClick:Jt,type:"button",class:"w-full px-4 py-2.5 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 flex items-center justify-center gap-2 border-2 border-dashed border-gray-300"},[...t[104]||(t[104]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),R(" Add Custom Condition ",-1)])])])]),e("div",ju,[e("h4",Iu,[t[105]||(t[105]=e("span",null,"Selected Conditions",-1)),e("span",Nu,f(i.value.proposed_conditions.length),1)]),i.value.proposed_conditions.length>0?(a(),n("div",Fu,[(a(!0),n(z,null,O(i.value.proposed_conditions,(u,j)=>(a(),n("div",{key:j,class:"p-2 bg-white rounded border border-gray-300 text-xs"},[e("div",Bu,[e("div",Lu,[e("span",Uu,f(u.condition_number),1),e("span",zu,f(u.condition_category),1)]),e("button",{onClick:ne=>Xt(j),type:"button",class:"text-red-600 hover:bg-red-50 rounded p-0.5",title:"Remove"},[...t[106]||(t[106]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Eu)]),e("div",{class:"text-gray-700 line-clamp-2",innerHTML:u.condition_text},null,8,Ou)]))),128))])):(a(),n("div",Hu,[...t[107]||(t[107]=[e("svg",{class:"w-8 h-8 mx-auto text-gray-300 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),R(" No conditions selected ",-1)])]))])]),pe.value!==null||Q.value.condition_text||Q.value.condition_category?(a(),n("div",Wu,[e("h4",Gu,f(pe.value!==null?"Edit":"Add Custom")+" Condition ",1),e("div",Ju,[e("div",null,[t[108]||(t[108]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[R(" Condition Number "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[36]||(t[36]=u=>Q.value.condition_number=u),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1"},null,512),[[L,Q.value.condition_number]])]),e("div",null,[t[110]||(t[110]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[R(" Category "),e("span",{class:"text-red-500"},"*")],-1)),M(e("select",{"onUpdate:modelValue":t[37]||(t[37]=u=>Q.value.condition_category=u),class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[109]||(t[109]=e("option",{value:""},"Select category",-1)),(a(!0),n(z,null,O(pt.filter(u=>u!=="All"),u=>(a(),n("option",{key:u,value:u},f(u),9,Ku))),128))],512),[[ie,Q.value.condition_category]])])]),e("div",Qu,[t[111]||(t[111]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[R(" Condition Text "),e("span",{class:"text-red-500"},"*")],-1)),M(e("textarea",{"onUpdate:modelValue":t[38]||(t[38]=u=>Q.value.condition_text=u),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter the condition text..."},null,512),[[L,Q.value.condition_text]])]),e("div",null,[t[112]||(t[112]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Notes",-1)),M(e("textarea",{"onUpdate:modelValue":t[39]||(t[39]=u=>Q.value.compliance_notes=u),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional notes about this condition..."},null,512),[[L,Q.value.compliance_notes]])]),e("div",Xu,[e("button",{onClick:Qt,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:Kt,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},f(pe.value!==null?"Update":"Add")+" Condition ",1)])])):g("",!0)]),e("div",Yu,[e("button",{onClick:t[40]||(t[40]=u=>De.value=!1),type:"button",class:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"}," Done ")])])])):g("",!0)]))}};export{sd as default};
//# sourceMappingURL=NewRequest-CUB2FMbT.js.map
