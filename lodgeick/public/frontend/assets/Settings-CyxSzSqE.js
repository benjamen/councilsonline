var z=(S,C,c)=>new Promise((P,o)=>{var V=u=>{try{y(c.next(u))}catch(f){o(f)}},b=u=>{try{y(c.throw(u))}catch(f){o(f)}},y=u=>u.done?P(u.value):Promise.resolve(u.value).then(V,b);y((c=c.apply(S,C)).next())});import{f as H,r as v,j as $,G,c as g,o as m,a,F as R,l as W,B as Z,z as J,aE as K,t as x,d as U,m as N,b as s,u as n,I as d,k as j,L as M,w,h as _,i as k,g as Q,x as h}from"./index-RkzMHvOb.js";const X={class:"min-h-screen bg-gray-50"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ee={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},ae={class:"lg:col-span-1"},te={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},le=["onClick"],oe={class:"flex items-center space-x-3"},se={class:"lg:col-span-3"},ne={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center"},re={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},ie={class:"flex items-center space-x-6"},de={class:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center"},ue={key:0,class:"text-3xl font-bold text-blue-600"},me=["src"],pe={class:"text-lg font-semibold text-gray-900"},ge={class:"text-sm text-gray-500"},ce={class:"text-xs text-gray-400 mt-1"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe={class:"flex justify-end space-x-4"},ye={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},xe={key:0,class:"text-center py-12"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ke={class:"flex justify-end space-x-4"},Ve={key:3,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},ze={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},he={class:"text-sm text-red-600"},Ce={key:1,class:"p-3 bg-green-50 border border-green-200 rounded-lg"},Pe={class:"text-sm text-green-600"},Ue={class:"flex justify-end space-x-4"},je={__name:"Settings",setup(S){const C=H(),c=v("profile"),P=[{key:"profile",label:"Profile",icon:"user-icon"},{key:"organization",label:"Organization",icon:"office-icon"},{key:"security",label:"Security",icon:"lock-icon"}],o=v({}),V=v(!0),b=v(!1),y=v(!1),u=v(""),f=v(""),i=v({first_name:"",last_name:"",mobile_no:"",phone:"",bio:"",location:"",default_council:""}),r=v({organization_name:"",contact_email:"",contact_phone:"",address:"",city:"",postal_code:"",website:"",description:""}),p=v({old_password:"",new_password:"",confirm_password:""}),B=$(()=>{var t;if(!o.value.first_name)return"??";const l=o.value.first_name[0]||"",e=((t=o.value.last_name)==null?void 0:t[0])||"";return(l+e).toUpperCase()}),D=()=>z(this,null,function*(){V.value=!0;try{const l=yield h("lodgeick.api.get_user_profile");o.value=l,i.value={first_name:l.first_name||"",last_name:l.last_name||"",mobile_no:l.mobile_no||"",phone:l.phone||"",bio:l.bio||"",location:l.location||"",default_council:l.default_council||""},l.organization_data&&(r.value={organization_name:l.organization_data.organization_name||"",contact_email:l.organization_data.contact_email||"",contact_phone:l.organization_data.contact_phone||"",address:l.organization_data.address||"",city:l.organization_data.city||"",postal_code:l.organization_data.postal_code||"",website:l.organization_data.website||"",description:l.organization_data.description||""})}catch(l){console.error("Error loading profile:",l)}finally{V.value=!1}}),q=()=>z(this,null,function*(){b.value=!0;try{const l=yield h("lodgeick.api.update_user_profile",i.value);o.value=l.user,alert("Profile updated successfully")}catch(l){console.error("Error updating profile:",l),alert("Failed to update profile")}finally{b.value=!1}}),E=()=>z(this,null,function*(){b.value=!0;try{const l=yield h("lodgeick.api.update_user_organization",r.value);o.value.organization_data=l.organization,alert("Organization updated successfully")}catch(l){console.error("Error updating organization:",l),alert("Failed to update organization")}finally{b.value=!1}}),L=()=>z(this,null,function*(){if(u.value="",f.value="",p.value.new_password!==p.value.confirm_password){u.value="New passwords do not match";return}if(p.value.new_password.length<6){u.value="Password must be at least 6 characters";return}y.value=!0;try{yield h("lodgeick.api.change_password",{old_password:p.value.old_password,new_password:p.value.new_password}),f.value="Password changed successfully",F()}catch(l){console.error("Error changing password:",l),u.value=l.message||"Failed to change password"}finally{y.value=!1}}),O=()=>{i.value={first_name:o.value.first_name||"",last_name:o.value.last_name||"",mobile_no:o.value.mobile_no||"",phone:o.value.phone||"",bio:o.value.bio||"",location:o.value.location||"",default_council:o.value.default_council||""}},I=()=>{o.value.organization_data&&(r.value={organization_name:o.value.organization_data.organization_name||"",contact_email:o.value.organization_data.contact_email||"",contact_phone:o.value.organization_data.contact_phone||"",address:o.value.organization_data.address||"",city:o.value.organization_data.city||"",postal_code:o.value.organization_data.postal_code||"",website:o.value.organization_data.website||"",description:o.value.organization_data.description||""})},F=()=>{p.value={old_password:"",new_password:"",confirm_password:""}},T=l=>l?new Date(l).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"}):"N/A",A=()=>{C.back()};return G(()=>{D()}),(l,e)=>(m(),g("div",X,[a("header",{class:"bg-white shadow-sm border-b border-gray-200"},[a("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[a("div",{class:"flex justify-between items-center py-4"},[a("div",{class:"flex items-center space-x-3"},[a("button",{onClick:A,class:"text-gray-500 hover:text-gray-700"},[...e[17]||(e[17]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),e[18]||(e[18]=a("div",null,[a("h1",{class:"text-xl font-bold text-gray-900"},"Settings"),a("p",{class:"text-xs text-gray-500"},"Manage your profile and preferences")],-1))])])])]),a("main",Y,[a("div",ee,[a("div",ae,[a("nav",te,[(m(),g(R,null,W(P,t=>a("button",{key:t.key,onClick:Ne=>c.value=t.key,class:Z(["w-full text-left px-4 py-3 rounded-lg transition-colors mb-2",c.value===t.key?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"])},[a("div",oe,[(m(),J(K(t.icon),{class:"w-5 h-5"})),a("span",null,x(t.label),1)])],10,le)),64))])]),a("div",se,[V.value?(m(),g("div",ne,[...e[19]||(e[19]=[a("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),a("p",{class:"mt-4 text-gray-500"},"Loading settings...",-1)])])):c.value==="profile"?(m(),g("div",re,[e[28]||(e[28]=a("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Profile Information",-1)),a("form",{onSubmit:N(q,["prevent"]),class:"space-y-6"},[a("div",ie,[a("div",de,[o.value.user_image?(m(),g("img",{key:1,src:o.value.user_image,alt:"Profile",class:"w-full h-full rounded-full object-cover"},null,8,me)):(m(),g("span",ue,x(B.value),1))]),a("div",null,[a("h3",pe,x(o.value.full_name),1),a("p",ge,x(o.value.email),1),a("p",ce,"Member since "+x(T(o.value.creation)),1)])]),a("div",ve,[a("div",null,[e[20]||(e[20]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"First Name",-1)),s(n(d),{modelValue:i.value.first_name,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.first_name=t),type:"text",required:""},null,8,["modelValue"])]),a("div",null,[e[21]||(e[21]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Last Name",-1)),s(n(d),{modelValue:i.value.last_name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.last_name=t),type:"text",required:""},null,8,["modelValue"])])]),a("div",be,[a("div",null,[e[22]||(e[22]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mobile Phone",-1)),s(n(d),{modelValue:i.value.mobile_no,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.mobile_no=t),type:"tel"},null,8,["modelValue"])]),a("div",null,[e[23]||(e[23]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone",-1)),s(n(d),{modelValue:i.value.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.phone=t),type:"tel"},null,8,["modelValue"])])]),a("div",null,[e[24]||(e[24]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Location",-1)),s(n(d),{modelValue:i.value.location,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.location=t),type:"text",placeholder:"City, Country"},null,8,["modelValue"])]),a("div",null,[e[25]||(e[25]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bio",-1)),j(a("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.bio=t),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tell us about yourself..."},null,512),[[M,i.value.bio]])]),a("div",fe,[s(n(k),{onClick:O,variant:"outline",theme:"gray"},{default:w(()=>[...e[26]||(e[26]=[_(" Cancel ",-1)])]),_:1}),s(n(k),{type:"submit",variant:"solid",theme:"blue",loading:b.value},{default:w(()=>[...e[27]||(e[27]=[_(" Save Changes ",-1)])]),_:1},8,["loading"])])],32)])):c.value==="organization"?(m(),g("div",ye,[e[40]||(e[40]=a("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Organization Details",-1)),e[41]||(e[41]=a("p",{class:"text-gray-600 mb-6"},"Manage your organization information",-1)),o.value.organization_data?(m(),g("form",{key:1,onSubmit:N(E,["prevent"]),class:"space-y-6"},[a("div",null,[e[30]||(e[30]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organization Name",-1)),s(n(d),{modelValue:r.value.organization_name,"onUpdate:modelValue":e[6]||(e[6]=t=>r.value.organization_name=t),type:"text",required:""},null,8,["modelValue"])]),a("div",we,[a("div",null,[e[31]||(e[31]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Email",-1)),s(n(d),{modelValue:r.value.contact_email,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value.contact_email=t),type:"email",required:""},null,8,["modelValue"])]),a("div",null,[e[32]||(e[32]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Phone",-1)),s(n(d),{modelValue:r.value.contact_phone,"onUpdate:modelValue":e[8]||(e[8]=t=>r.value.contact_phone=t),type:"tel",required:""},null,8,["modelValue"])])]),a("div",null,[e[33]||(e[33]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Address",-1)),s(n(d),{modelValue:r.value.address,"onUpdate:modelValue":e[9]||(e[9]=t=>r.value.address=t),type:"text"},null,8,["modelValue"])]),a("div",_e,[a("div",null,[e[34]||(e[34]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"City",-1)),s(n(d),{modelValue:r.value.city,"onUpdate:modelValue":e[10]||(e[10]=t=>r.value.city=t),type:"text"},null,8,["modelValue"])]),a("div",null,[e[35]||(e[35]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Postal Code",-1)),s(n(d),{modelValue:r.value.postal_code,"onUpdate:modelValue":e[11]||(e[11]=t=>r.value.postal_code=t),type:"text"},null,8,["modelValue"])])]),a("div",null,[e[36]||(e[36]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Website",-1)),s(n(d),{modelValue:r.value.website,"onUpdate:modelValue":e[12]||(e[12]=t=>r.value.website=t),type:"url",placeholder:"https://example.com"},null,8,["modelValue"])]),a("div",null,[e[37]||(e[37]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),j(a("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>r.value.description=t),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe your organization..."},null,512),[[M,r.value.description]])]),a("div",ke,[s(n(k),{onClick:I,variant:"outline",theme:"gray"},{default:w(()=>[...e[38]||(e[38]=[_(" Cancel ",-1)])]),_:1}),s(n(k),{type:"submit",variant:"solid",theme:"blue",loading:b.value},{default:w(()=>[...e[39]||(e[39]=[_(" Save Changes ",-1)])]),_:1},8,["loading"])])],32)):(m(),g("div",xe,[...e[29]||(e[29]=[Q('<div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No Organization Linked</h3><p class="text-gray-500">Contact an administrator to link your account to an organization</p>',3)])]))])):c.value==="security"?(m(),g("div",Ve,[e[47]||(e[47]=a("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Security Settings",-1)),e[48]||(e[48]=a("p",{class:"text-gray-600 mb-6"},"Update your password and security preferences",-1)),a("form",{onSubmit:N(L,["prevent"]),class:"space-y-6 max-w-md"},[a("div",null,[e[42]||(e[42]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Password",-1)),s(n(d),{modelValue:p.value.old_password,"onUpdate:modelValue":e[14]||(e[14]=t=>p.value.old_password=t),type:"password",required:""},null,8,["modelValue"])]),a("div",null,[e[43]||(e[43]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"New Password",-1)),s(n(d),{modelValue:p.value.new_password,"onUpdate:modelValue":e[15]||(e[15]=t=>p.value.new_password=t),type:"password",required:""},null,8,["modelValue"])]),a("div",null,[e[44]||(e[44]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirm New Password",-1)),s(n(d),{modelValue:p.value.confirm_password,"onUpdate:modelValue":e[16]||(e[16]=t=>p.value.confirm_password=t),type:"password",required:""},null,8,["modelValue"])]),u.value?(m(),g("div",ze,[a("p",he,x(u.value),1)])):U("",!0),f.value?(m(),g("div",Ce,[a("p",Pe,x(f.value),1)])):U("",!0),a("div",Ue,[s(n(k),{onClick:F,variant:"outline",theme:"gray"},{default:w(()=>[...e[45]||(e[45]=[_(" Cancel ",-1)])]),_:1}),s(n(k),{type:"submit",variant:"solid",theme:"blue",loading:y.value},{default:w(()=>[...e[46]||(e[46]=[_(" Change Password ",-1)])]),_:1},8,["loading"])])],32)])):U("",!0)])])])]))}};export{je as default};
//# sourceMappingURL=Settings-CyxSzSqE.js.map
