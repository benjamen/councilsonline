var re=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var te=(c,k,v)=>k in c?re(c,k,{enumerable:!0,configurable:!0,writable:!0,value:v}):c[k]=v,N=(c,k)=>{for(var v in k||(k={}))ne.call(k,v)&&te(c,v,k[v]);if(ee)for(var v of ee(k))ie.call(k,v)&&te(c,v,k[v]);return c};var L=(c,k,v)=>new Promise((V,l)=>{var q=p=>{try{b(v.next(p))}catch(y){l(y)}},w=p=>{try{b(v.throw(p))}catch(y){l(y)}},b=p=>p.done?V(p.value):Promise.resolve(p.value).then(q,w);b((v=v.apply(c,k)).next())});import{a,o as s,b as t,B as U,c as D,e as m,O as E,a2 as B,t as u,n as M,aj as se,Q as de,R as P,P as I,F as T,W as R,au as ue,_ as ce,T as pe,D as oe,w as K,a6 as F,ak as G,ae as H,at as ae,r as le,ag as me,u as O}from"./vue-vendor-D9RCx05D.js";import{u as ve,i as ge,a as be,b as _e}from"./NewRequest-Bsp6aWRF.js";import{_ as Z}from"./frappe-ui-E4oUKPDc.js";import{p as ye,x as fe,I as he,y as xe,m as ke,Q as we,V as Ce,N as $e}from"./ui-components-88qJBhde.js";import"./request.service-91aYHjAe.js";import"./RequestHeader-CAKatJu2.js";import"./index-DdsHFTRi.js";function Ve(c,k){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const Me={class:"space-y-4"},qe={class:"block"},Se={class:"text-sm font-medium text-gray-900"},Be={key:0,class:"text-red-500"},Fe={key:0,class:"text-xs text-gray-500 mt-1"},je={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ze=["disabled"],Pe=["disabled"],Ue={class:"text-center"},De={class:"text-xs text-gray-500"},Ae=["accept","multiple"],Te={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Re={class:"flex items-center space-x-3"},Ie={class:"flex-1"},Le={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},Oe={key:1,class:"space-y-2"},Ee={class:"flex items-center space-x-3 flex-1 min-w-0"},He={class:"flex-shrink-0"},Ne={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},Qe=["src","alt"],Je={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},Ge={class:"flex-1 min-w-0"},Ke={class:"text-sm font-medium text-gray-900 truncate"},We={class:"text-xs text-gray-500"},Ze=["onClick"],Xe={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},Ye={class:"relative bg-black aspect-video"},et=["src"],tt={key:2,class:"absolute inset-0 pointer-events-none"},lt={class:"w-full h-full grid grid-cols-3 grid-rows-3"},st={class:"bg-gray-900 px-6 py-6"},ot={key:0,class:"flex items-center justify-center space-x-6"},at={key:1,class:"flex items-center justify-center space-x-4"},rt={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(c,{emit:k}){const v=c,V=k,l=U(null),q=U(null),w=U(!1),b=U(null),p=U(null),y=U(!1),f=U(0),$=D({get:()=>v.modelValue,set:_=>V("update:modelValue",_)}),C=()=>{var _;(_=l.value)==null||_.click()},S=_=>L(this,null,function*(){const n=Array.from(_.target.files);yield g(n),_.target.value=""}),g=_=>L(this,null,function*(){const n=[];for(const h of _){if(h.size>v.maxSize){alert(`File ${h.name} exceeds maximum size of ${J(v.maxSize)}`);continue}let z=null;h.type.startsWith("image/")&&(z=yield d(h)),n.push({file:h,name:h.name,size:h.size,type:h.type,preview:z,uploadDate:new Date().toISOString()})}if(n.length>0){const h=v.multiple?[...$.value,...n]:n;V("update:modelValue",h),yield x(n)}}),d=_=>new Promise(n=>{const h=new FileReader;h.onload=z=>n(z.target.result),h.onerror=()=>n(null),h.readAsDataURL(_)}),x=_=>L(this,null,function*(){y.value=!0,f.value=0;try{for(let n=0;n<_.length;n++){const h=_[n],z=setInterval(()=>{f.value=Math.min(f.value+10,90)},100);yield new Promise(Y=>{V("upload",h,Y)}),clearInterval(z),f.value=(n+1)/_.length*100}}catch(n){console.error("Upload error:",n),alert("Failed to upload files. Please try again.")}finally{y.value=!1,f.value=0}}),Q=_=>{const n=[...$.value];n.splice(_,1),V("update:modelValue",n)},i=()=>L(this,null,function*(){try{w.value=!0,yield o()}catch(_){console.error("Camera error:",_),alert("Unable to access camera. Please check permissions or upload a file instead."),w.value=!1}}),o=()=>L(this,null,function*(){try{const _=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});p.value=_,q.value&&(q.value.srcObject=_)}catch(_){throw _}}),e=()=>{const _=q.value,n=document.createElement("canvas");n.width=_.videoWidth,n.height=_.videoHeight,n.getContext("2d").drawImage(_,0,0,n.width,n.height),b.value=n.toDataURL("image/jpeg",.9)},r=()=>{b.value=null},j=()=>L(this,null,function*(){if(!b.value)return;const _=yield(yield fetch(b.value)).blob(),n=new File([_],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield g([n]),A()}),A=()=>{p.value&&(p.value.getTracks().forEach(_=>_.stop()),p.value=null),b.value=null,w.value=!1},J=_=>{if(_===0)return"0 Bytes";const n=1024,h=["Bytes","KB","MB","GB"],z=Math.floor(Math.log(_)/Math.log(n));return Math.round(_/Math.pow(n,z)*100)/100+" "+h[z]};return(_,n)=>(s(),a("div",Me,[t("label",qe,[t("span",Se,[B(u(c.label)+" ",1),c.required?(s(),a("span",Be,"*")):m("",!0)]),c.helpText?(s(),a("p",Fe,u(c.helpText),1)):m("",!0)]),t("div",je,[c.allowCamera?(s(),a("button",{key:0,onClick:i,type:"button",class:M(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":y.value}]),disabled:y.value},[...n[0]||(n[0]=[se('<div class="text-center" data-v-2b18513c><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2b18513c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2b18513c></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2b18513c></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2b18513c>Take Photo</p><p class="text-xs text-gray-500" data-v-2b18513c>Use camera</p></div>',1)])],10,ze)):m("",!0),t("button",{onClick:C,type:"button",class:M(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":y.value}]),disabled:y.value},[t("div",Ue,[n[1]||(n[1]=t("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),n[2]||(n[2]=t("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),t("p",De,"Browse "+u(c.multiple?"files":"file"),1)]),t("input",{ref_key:"fileInput",ref:l,type:"file",accept:c.accept,multiple:c.multiple,onChange:S,class:"hidden"},null,40,Ae)],10,Pe)]),y.value?(s(),a("div",Te,[t("div",Re,[n[4]||(n[4]=t("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t("div",Ie,[n[3]||(n[3]=t("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),t("div",Le,[t("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:de({width:f.value+"%"})},null,4)])])])])):m("",!0),$.value.length>0?(s(),a("div",Oe,[P(ue,{name:"list"},{default:I(()=>[(s(!0),a(T,null,R($.value,(h,z)=>(s(),a("div",{key:h.name+z,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[t("div",Ee,[t("div",He,[h.preview?(s(),a("div",Ne,[t("img",{src:h.preview,alt:h.name,class:"w-full h-full object-cover"},null,8,Qe)])):(s(),a("div",Je,[...n[5]||(n[5]=[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),t("div",Ge,[t("p",Ke,u(h.name),1),t("p",We,u(J(h.size)),1)]),t("button",{onClick:Y=>Q(z),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...n[6]||(n[6]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ze)])]))),128))]),_:1})])):m("",!0),(s(),E(pe,{to:"body"},[w.value?(s(),a("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:ce(A,["self"])},[t("div",Xe,[t("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[n[8]||(n[8]=t("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),t("button",{onClick:A,class:"text-gray-400 hover:text-white transition-colors"},[...n[7]||(n[7]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Ye,[b.value?(s(),a("img",{key:1,src:b.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,et)):(s(),a("video",{key:0,ref_key:"videoElement",ref:q,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),b.value?m("",!0):(s(),a("div",tt,[t("div",lt,[(s(),a(T,null,R(9,h=>t("div",{key:h,class:"border border-white/20"})),64))])]))]),t("div",st,[b.value?(s(),a("div",at,[t("button",{onClick:r,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),t("button",{onClick:j,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(s(),a("div",ot,[t("button",{onClick:e,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...n[9]||(n[9]=[t("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):m("",!0)]))]))}},nt=Z(rt,[["__scopeId","data-v-2b18513c"]]),it={class:"space-y-4"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ut={class:"block text-sm font-medium text-gray-700 mb-2"},ct={key:0,class:"text-red-500"},pt={class:"relative"},mt=["required"],vt=["value"],gt={class:"block text-sm font-medium text-gray-700 mb-2"},bt={key:0,class:"text-red-500"},_t={class:"relative"},yt=["required","disabled"],ft=["value"],ht={key:0,class:"mt-1 text-xs text-gray-500"},xt={class:"block text-sm font-medium text-gray-700 mb-2"},kt={key:0,class:"text-red-500"},wt={class:"relative"},Ct=["required","disabled"],$t=["value"],Vt={key:0,class:"mt-1 text-xs text-gray-500"},Mt={class:"block text-sm font-medium text-gray-700 mb-2"},qt={key:0,class:"text-red-500"},St=["required"],Bt={class:"md:col-span-2"},Ft={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},jt={class:"flex items-start"},zt={class:"flex-1"},Pt={class:"text-sm text-green-700 mt-1"},Ut={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c,{emit:k}){const v=c,V=k,l=U({street:"",barangay:"",municipality:"",province:"",zipCode:""}),q=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],w={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Parañaque City","Las Piñas City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},b={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},p=D(()=>l.value.province?w[l.value.province]||[]:[]),y=D(()=>l.value.municipality?b[l.value.municipality]||["Other - Please specify in Street field"]:[]),f=D(()=>{const g=[];return l.value.street&&g.push(l.value.street),l.value.barangay&&g.push(`Brgy. ${l.value.barangay}`),l.value.municipality&&g.push(l.value.municipality),l.value.province&&g.push(l.value.province),l.value.zipCode&&g.push(l.value.zipCode),g.length>0?g.join(", "):""}),$=()=>{l.value.municipality="",l.value.barangay="",S()},C=()=>{l.value.barangay="",S()},S=()=>{V("update:modelValue",{full_address:f.value,address_line:l.value.street,barangay:l.value.barangay,municipality:l.value.municipality,province:l.value.province,zip_code:l.value.zipCode})};return oe(()=>{var g;if(v.modelValue)if(typeof v.modelValue=="string"){const d=v.modelValue.split(",").map(x=>x.trim());d.length>=3&&(l.value.street=d[0]||"",l.value.barangay=((g=d[1])==null?void 0:g.replace("Brgy. ",""))||"",l.value.municipality=d[2]||"",l.value.province=d[3]||"",l.value.zipCode=d[4]||"")}else typeof v.modelValue=="object"&&(l.value=N(N({},l.value),v.modelValue))}),K(()=>v.modelValue,g=>{g&&typeof g=="object"&&(l.value=N(N({},l.value),g))}),(g,d)=>(s(),a("div",it,[d[18]||(d[18]=se('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),t("div",dt,[t("div",null,[t("label",ut,[d[5]||(d[5]=B(" Province ",-1)),c.required?(s(),a("span",ct,"*")):m("",!0)]),t("div",pt,[F(t("select",{"onUpdate:modelValue":d[0]||(d[0]=x=>l.value.province=x),onChange:$,required:c.required,class:M(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":l.value.province}])},[d[6]||(d[6]=t("option",{value:""},"Select Province",-1)),(s(),a(T,null,R(q,x=>t("option",{key:x,value:x},u(x),9,vt)),64))],42,mt),[[G,l.value.province]]),d[7]||(d[7]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),t("div",null,[t("label",gt,[d[8]||(d[8]=B(" Municipality/City ",-1)),c.required?(s(),a("span",bt,"*")):m("",!0)]),t("div",_t,[F(t("select",{"onUpdate:modelValue":d[1]||(d[1]=x=>l.value.municipality=x),onChange:C,required:c.required,disabled:!l.value.province,class:M(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":l.value.municipality}])},[d[9]||(d[9]=t("option",{value:""},"Select Municipality/City",-1)),(s(!0),a(T,null,R(p.value,x=>(s(),a("option",{key:x,value:x},u(x),9,ft))),128))],42,yt),[[G,l.value.municipality]]),d[10]||(d[10]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),l.value.province?m("",!0):(s(),a("p",ht,"Select province first"))]),t("div",null,[t("label",xt,[d[11]||(d[11]=B(" Barangay ",-1)),c.required?(s(),a("span",kt,"*")):m("",!0)]),t("div",wt,[F(t("select",{"onUpdate:modelValue":d[2]||(d[2]=x=>l.value.barangay=x),onChange:S,required:c.required,disabled:!l.value.municipality,class:M(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":l.value.barangay}])},[d[12]||(d[12]=t("option",{value:""},"Select Barangay",-1)),(s(!0),a(T,null,R(y.value,x=>(s(),a("option",{key:x,value:x},u(x),9,$t))),128))],42,Ct),[[G,l.value.barangay]]),d[13]||(d[13]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),l.value.municipality?m("",!0):(s(),a("p",Vt,"Select municipality first"))]),t("div",null,[t("label",Mt,[d[14]||(d[14]=B(" Street / House No. ",-1)),c.required?(s(),a("span",qt,"*")):m("",!0)]),F(t("input",{"onUpdate:modelValue":d[3]||(d[3]=x=>l.value.street=x),onInput:S,type:"text",required:c.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:M(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":l.value.street}])},null,42,St),[[H,l.value.street]])]),t("div",Bt,[d[15]||(d[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[B(" ZIP Code "),t("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),F(t("input",{"onUpdate:modelValue":d[4]||(d[4]=x=>l.value.zipCode=x),onInput:S,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[H,l.value.zipCode]])])]),f.value?(s(),a("div",Ft,[t("div",jt,[d[17]||(d[17]=t("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",zt,[d[16]||(d[16]=t("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),t("p",Pt,u(f.value),1)])])])):m("",!0)]))}},Dt={class:"space-y-4"},At={class:"flex items-center justify-between mb-4"},Tt={class:"block text-sm font-medium text-gray-700"},Rt={key:0,class:"text-red-500"},It={key:0,class:"space-y-3"},Lt=["value"],Ot={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Et={class:"flex items-start justify-between"},Ht={class:"flex-1 space-y-1"},Nt={class:"text-sm font-medium text-gray-900"},Qt={class:"text-sm text-gray-700"},Jt={key:0,class:"text-xs text-gray-600"},Gt={key:1},Kt={key:2,class:"flex items-center space-x-2"},Wt={__name:"PropertyAddressSelector",props:{modelValue:{type:Object,default:()=>({})},label:{type:String,default:"Residential Address"},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c,{emit:k}){const v=c,V=k,{loadUserProfile:l,getAllProperties:q,defaultProperty:w}=ve(),b=U(!1),p=U(""),y=U(!1),f=U(v.modelValue||{}),$=D(()=>q.value||[]),C=D(()=>!p.value||p.value==="__new__"?null:$.value.find(o=>o.name===p.value));function S(o){const e=[];return o.property_name&&e.push(o.property_name),o.street&&e.push(o.street),o.suburb&&e.push(o.suburb),o.city&&e.push(o.city),e.join(", ")||"Unnamed Property"}function g(o){const e=[];return o.street&&e.push(o.street),o.barangay&&e.push(`Brgy. ${o.barangay}`),o.municipality&&e.push(o.municipality),o.province&&e.push(o.province),(o.zip_code||o.postcode)&&e.push(o.zip_code||o.postcode),e.join(", ")}function d(){if(p.value==="__new__"){f.value={},b.value=!1;return}C.value&&(f.value={full_address:g(C.value),address_line:C.value.street||"",barangay:C.value.barangay||"",municipality:C.value.municipality||C.value.city||"",province:C.value.province||"",zip_code:C.value.zip_code||C.value.postcode||""},V("update:modelValue",f.value))}function x(o){f.value=o,V("update:modelValue",o)}function Q(){b.value=!1}function i(){confirm("Are you sure you want to remove this property from selection?")&&(p.value="",f.value={},V("update:modelValue",{}))}return oe(()=>L(this,null,function*(){yield l(),(!v.modelValue||Object.keys(v.modelValue).length===0)&&w.value&&(p.value=w.value.name,d()),$.value.length>0&&(b.value=!0)})),K(()=>v.modelValue,o=>{o&&Object.keys(o).length>0&&(f.value=o)},{deep:!0}),(o,e)=>(s(),a("div",Dt,[t("div",At,[t("label",Tt,[B(u(c.label)+" ",1),c.required?(s(),a("span",Rt,"*")):m("",!0)]),$.value.length>0?(s(),a("button",{key:0,onClick:e[0]||(e[0]=r=>b.value=!b.value),type:"button",class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},u(b.value?"Enter manually":"Select from my properties"),1)):m("",!0)]),b.value&&$.value.length>0?(s(),a("div",It,[F(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>p.value=r),onChange:d,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[3]||(e[3]=t("option",{value:""},"Select a property",-1)),(s(!0),a(T,null,R($.value,r=>(s(),a("option",{key:r.name,value:r.name},u(S(r)),9,Lt))),128)),e[4]||(e[4]=t("option",{value:"__new__"},"+ Add New Property",-1))],544),[[G,p.value]]),C.value&&p.value!=="__new__"?(s(),a("div",Ot,[t("div",Et,[t("div",Ht,[t("p",Nt,u(C.value.property_name||"Property"),1),t("p",Qt,u(g(C.value)),1),C.value.legal_description?(s(),a("p",Jt,u(C.value.legal_description),1)):m("",!0)]),t("div",{class:"flex space-x-2"},[t("button",{onClick:Q,type:"button",class:"text-sm text-blue-600 hover:text-blue-700",title:"Edit property"},[...e[5]||(e[5]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),t("button",{onClick:i,type:"button",class:"text-sm text-red-600 hover:text-red-700",title:"Remove property"},[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])])])):m("",!0)])):m("",!0),!b.value||p.value==="__new__"||$.value.length===0?(s(),a("div",Gt,[P(Ut,{modelValue:f.value,"onUpdate:modelValue":x,required:c.required},null,8,["modelValue","required"])])):m("",!0),(!b.value||p.value==="__new__")&&!p.value?(s(),a("div",Kt,[F(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>y.value=r),type:"checkbox",id:"save-property",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[ae,y.value]]),e[7]||(e[7]=t("label",{for:"save-property",class:"text-sm text-gray-700"}," Save this property to my profile for future use ",-1))])):m("",!0)]))}},Zt={class:"inline-block relative group"},Xt={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:c=>["top","bottom","left","right"].includes(c)}},setup(c){const k=c,v=U(!1),V=D(()=>{switch(k.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),l=D(()=>{switch(k.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(q,w)=>(s(),a("div",Zt,[le(q.$slots,"trigger",{},()=>[t("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:w[0]||(w[0]=b=>v.value=!0),onMouseleave:w[1]||(w[1]=b=>v.value=!1)},[...w[2]||(w[2]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),P(me,{name:"tooltip"},{default:I(()=>[v.value?(s(),a("div",{key:0,class:M(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",V.value]),style:{"max-width":"300px","white-space":"normal"}},[le(q.$slots,"default",{},()=>[B(u(c.text),1)],!0),t("div",{class:M(["tooltip-arrow",l.value])},null,2)],2)):m("",!0)]),_:3})]))}},W=Z(Xt,[["__scopeId","data-v-cfd551b3"]]),Yt={class:"space-y-6"},el={key:0,class:"form-group"},tl={key:1,class:"form-group"},ll=["for"],sl={key:0,class:"text-red-500 ml-1"},ol={class:"relative"},al=["id","name","onUpdate:modelValue","onBlur","required","placeholder"],rl={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},nl=["innerHTML"],il={key:0,class:"mt-1 text-xs text-red-600"},dl={key:1,class:"mt-1 text-xs text-gray-500"},ul={key:2,class:"form-group"},cl=["for"],pl={key:0,class:"text-red-500 ml-1"},ml={class:"relative"},vl=["id","name","onUpdate:modelValue","onBlur","required"],gl={value:""},bl=["value"],_l={key:0,class:"mt-1 text-xs text-red-600"},yl={key:1,class:"mt-1 text-xs text-gray-500"},fl={key:3,class:"form-group"},hl={class:"flex items-center h-5"},xl=["id","name","onUpdate:modelValue","onChange","required"],kl={class:"ml-3 text-sm"},wl=["for"],Cl={key:0,class:"text-red-500 ml-1"},$l={key:0,class:"mt-1 text-xs text-red-600"},Vl={key:1,class:"mt-1 text-xs text-gray-500"},Ml={key:4,class:"form-group"},ql=["for"],Sl={key:0,class:"text-red-500 ml-1"},Bl=["id","name","onUpdate:modelValue","onBlur","required","placeholder"],Fl={key:0,class:"mt-1 text-xs text-red-600"},jl={key:1,class:"mt-1 text-xs text-gray-500"},zl={key:5,class:"form-group"},Pl=["for"],Ul={key:0,class:"text-red-500 ml-1"},Dl={class:"relative"},Al=["id","name","onUpdate:modelValue","onBlur","required"],Tl={key:0,class:"mt-1 text-xs text-red-600"},Rl={key:1,class:"mt-1 text-xs text-gray-500"},Il={key:6,class:"form-group"},Ll=["for"],Ol={key:0,class:"text-red-500 ml-1"},El={class:"relative"},Hl=["id","name","onUpdate:modelValue","required","placeholder"],Nl={key:0,class:"mt-1 text-xs text-gray-500"},Ql={key:7,class:"form-group"},Jl=["for"],Gl={key:0,class:"text-red-500 ml-1"},Kl={class:"relative"},Wl=["id","name","onUpdate:modelValue","required","placeholder"],Zl={key:0,class:"mt-1 text-xs text-gray-500"},Xl={key:8,class:"form-group"},Yl=["for"],es={key:0,class:"text-red-500 ml-1"},ts={class:"relative"},ls=["id","name","onUpdate:modelValue","onBlur","required"],ss={key:0,class:"mt-1 text-xs text-red-600"},os={key:1,class:"mt-1 text-xs text-gray-500"},as={key:9,class:"form-group"},rs={key:10,class:"form-group"},ns={class:"text-sm text-gray-500 italic"},is={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(c,{emit:k}){const v=c,V=k,l=D({get:()=>v.modelValue,set:i=>V("update:modelValue",i)}),q=D(()=>v.fields.filter(i=>{var A;const o=((A=i.parent_section_code)==null?void 0:A.toLowerCase())||"",r=["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(o),j=["barangay","municipality","province","city","region","zip_code","postal_code"];return r&&v.fields.some(_=>_.parent_section_code===i.parent_section_code&&_.field_name==="address_line")&&j.includes(i.field_name)?!1:ge(i,l.value)})),w=i=>{var _,n,h;const o=((_=i.field_name)==null?void 0:_.toLowerCase())||"",e=((n=i.field_label)==null?void 0:n.toLowerCase())||"",r=((h=i.parent_section_code)==null?void 0:h.toLowerCase())||"",j=["address_line","street","residential_address","property_address","home_address","current_address","permanent_address"],A=["address","residential_address","permanent_address","property_address","current_address","home_address"],J=["residential address","property address","home address","current address","permanent address","street / house number","street address"];return j.includes(o)&&i.field_type==="Data"||A.includes(r)&&(o==="address_line"||o==="street")&&i.field_type==="Data"||J.some(z=>e.includes(z))&&i.field_type==="Data"&&!e.includes("zip")&&!e.includes("postal")},b=i=>{var e;if(i.placeholder)return i.placeholder;const o=((e=i.field_label)==null?void 0:e.toLowerCase())||"";return o.includes("name")?"e.g., Juan Dela Cruz":o.includes("email")?"e.g., juan@example.com":o.includes("phone")||o.includes("mobile")||o.includes("contact")?"e.g., 0917 123 4567":o.includes("age")?"e.g., 25":o.includes("occupation")?"e.g., Teacher":o.includes("income")||o.includes("salary")?"e.g., 15000":`Enter ${i.field_label}`},p=i=>{var e;const o=((e=i.field_label)==null?void 0:e.toLowerCase())||"";return o.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':o.includes("phone")||o.includes("mobile")||o.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':o.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},y=i=>i?i.split(`
`).map(o=>o.trim()).filter(Boolean):[],{errors:f,validateConfigField:$,clearFieldError:C}=be(),S=i=>{if(!i.validation&&!i.is_required){C(i.field_name);return}const o=l.value[i.field_name];$(i.field_name,o,i,l.value)},g=i=>f.value[i]||"",d=i=>{const o=l.value[i];return Array.isArray(o)?o:o?typeof o=="string"?[{file_url:o,name:o.split("/").pop(),preview:o}]:[]:[]},x=(i,o)=>{if(console.log("[DynamicFieldRenderer] updateFileField called:",i,o),Array.isArray(o)&&o.length>0){const e=o.filter(r=>r.file_url);if(e.length>0){const r=e[0].file_url;console.log("[DynamicFieldRenderer] Converting uploaded file to URL:",r),l.value[i]=r;return}}l.value[i]=o},Q=(i,o)=>L(this,null,function*(){console.log("[DynamicFieldRenderer] handleFileUploadToFrappe called with:",i);try{console.log("[DynamicFieldRenderer] Starting file upload:",i.name);const e=new FormData;e.append("file",i.file),e.append("is_private","0"),e.append("folder","Home/Attachments"),console.log("[DynamicFieldRenderer] Uploading to /api/method/upload_file...");const r=yield fetch("/api/method/upload_file",{method:"POST",credentials:"include",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:e});if(console.log("[DynamicFieldRenderer] Upload response status:",r.status),!r.ok){const A=yield r.text();throw console.error("[DynamicFieldRenderer] Upload failed:",A),new Error(`Upload failed (${r.status}): ${A}`)}const j=yield r.json();console.log("[DynamicFieldRenderer] Upload response:",j),j.message&&j.message.file_url&&(console.log("[DynamicFieldRenderer] File uploaded successfully:",j.message.file_url),i.file_url=j.message.file_url,i.file_name=j.message.file_name,console.log("[DynamicFieldRenderer] Updated fileData:",i)),console.log("[DynamicFieldRenderer] Calling resolveCallback()"),o(),console.log("[DynamicFieldRenderer] File upload completed successfully")}catch(e){console.error("[DynamicFieldRenderer] File upload error:",e),alert(`Failed to upload file: ${e.message}`),console.log("[DynamicFieldRenderer] Calling resolveCallback() after error"),o()}});return K(()=>l.value,i=>{Object.entries(i).forEach(([o,e])=>{if(Array.isArray(e)&&e.length>0&&e[0].file_url){const r=e.map(j=>j.file_url).filter(Boolean);r.length>0&&(l.value[o]=r.length===1?r[0]:r,console.log(`[DynamicFieldRenderer] Converted file array to URL for ${o}:`,l.value[o]))}})},{deep:!0}),K(()=>v.fields,i=>{i.forEach(o=>{o.default_value&&!l.value[o.field_name]&&(o.default_value==="Today"&&o.field_type==="Date"?l.value[o.field_name]=new Date().toISOString().split("T")[0]:l.value[o.field_name]=o.default_value)})},{immediate:!0}),(i,o)=>(s(),a("div",Yt,[(s(!0),a(T,null,R(q.value,e=>(s(),a("div",{key:e.field_name,class:"field-wrapper"},[w(e)?(s(),a("div",el,[P(Wt,{modelValue:l.value[e.field_name],"onUpdate:modelValue":r=>l.value[e.field_name]=r,label:e.field_label,required:!!e.is_required},null,8,["modelValue","onUpdate:modelValue","label","required"])])):e.field_type==="Data"?(s(),a("div",tl,[t("label",{for:e.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[t("span",null,u(e.field_label),1),e.is_required?(s(),a("span",sl,"*")):m("",!0),e.help_text||e.description?(s(),E(W,{key:1,text:e.help_text||e.description},null,8,["text"])):m("",!0)],8,ll),t("div",ol,[F(t("input",{id:e.field_name,name:e.field_name,type:"text","onUpdate:modelValue":r=>l.value[e.field_name]=r,onBlur:r=>S(e),required:e.is_required,class:M(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":l.value[e.field_name]&&!g(e.field_name),"border-red-500 ring-2 ring-red-100":g(e.field_name)}]),placeholder:b(e)},null,42,al),[[H,l.value[e.field_name]]]),p(e)?(s(),a("div",rl,[t("span",{innerHTML:p(e),class:"text-gray-400"},null,8,nl)])):m("",!0)]),g(e.field_name)?(s(),a("p",il,u(g(e.field_name)),1)):e.description?(s(),a("p",dl,u(e.description),1)):m("",!0)])):e.field_type==="Select"?(s(),a("div",ul,[t("label",{for:e.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[t("span",null,u(e.field_label),1),e.is_required?(s(),a("span",pl,"*")):m("",!0),e.help_text||e.description?(s(),E(W,{key:1,text:e.help_text||e.description},null,8,["text"])):m("",!0)],8,cl),t("div",ml,[F(t("select",{id:e.field_name,name:e.field_name,"onUpdate:modelValue":r=>l.value[e.field_name]=r,onBlur:r=>S(e),required:e.is_required,class:M(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":l.value[e.field_name]&&!g(e.field_name),"border-red-500 ring-2 ring-red-100":g(e.field_name)}])},[t("option",gl,"Select "+u(e.field_label),1),(s(!0),a(T,null,R(y(e.options),r=>(s(),a("option",{key:r,value:r},u(r),9,bl))),128))],42,vl),[[G,l.value[e.field_name]]]),o[0]||(o[0]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),g(e.field_name)?(s(),a("p",_l,u(g(e.field_name)),1)):e.description?(s(),a("p",yl,u(e.description),1)):m("",!0)])):e.field_type==="Check"?(s(),a("div",fl,[t("div",{class:M(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!g(e.field_name),"border-red-500 bg-red-50":g(e.field_name)}])},[t("div",hl,[F(t("input",{id:e.field_name,name:e.field_name,type:"checkbox","onUpdate:modelValue":r=>l.value[e.field_name]=r,onChange:r=>S(e),required:e.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,xl),[[ae,l.value[e.field_name]]])]),t("div",kl,[t("label",{for:e.field_name,class:"font-medium text-gray-700 cursor-pointer"},[B(u(e.field_label)+" ",1),e.is_required?(s(),a("span",Cl,"*")):m("",!0)],8,wl),g(e.field_name)?(s(),a("p",$l,u(g(e.field_name)),1)):e.description?(s(),a("p",Vl,u(e.description),1)):m("",!0)])],2)])):e.field_type==="Text"?(s(),a("div",Ml,[t("label",{for:e.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[B(u(e.field_label)+" ",1),e.is_required?(s(),a("span",Sl,"*")):m("",!0)],8,ql),F(t("textarea",{id:e.field_name,name:e.field_name,"onUpdate:modelValue":r=>l.value[e.field_name]=r,onBlur:r=>S(e),required:e.is_required,rows:"4",class:M(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":l.value[e.field_name]&&!g(e.field_name),"border-red-500 ring-2 ring-red-100":g(e.field_name)}]),placeholder:b(e)},null,42,Bl),[[H,l.value[e.field_name]]]),g(e.field_name)?(s(),a("p",Fl,u(g(e.field_name)),1)):e.description?(s(),a("p",jl,u(e.description),1)):m("",!0)])):e.field_type==="Date"?(s(),a("div",zl,[t("label",{for:e.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[t("span",null,u(e.field_label),1),e.is_required?(s(),a("span",Ul,"*")):m("",!0),e.help_text||e.description?(s(),E(W,{key:1,text:e.help_text||e.description},null,8,["text"])):m("",!0)],8,Pl),t("div",Dl,[F(t("input",{id:e.field_name,name:e.field_name,type:"date","onUpdate:modelValue":r=>l.value[e.field_name]=r,onBlur:r=>S(e),required:e.is_required,class:M(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":l.value[e.field_name]&&!g(e.field_name),"border-red-500 ring-2 ring-red-100":g(e.field_name)}])},null,42,Al),[[H,l.value[e.field_name]]]),o[1]||(o[1]=t("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),g(e.field_name)?(s(),a("p",Tl,u(g(e.field_name)),1)):e.description?(s(),a("p",Rl,u(e.description),1)):m("",!0)])):e.field_type==="Int"?(s(),a("div",Il,[t("label",{for:e.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[t("span",null,u(e.field_label),1),e.is_required?(s(),a("span",Ol,"*")):m("",!0),e.help_text||e.description?(s(),E(W,{key:1,text:e.help_text||e.description},null,8,["text"])):m("",!0)],8,Ll),t("div",El,[F(t("input",{id:e.field_name,name:e.field_name,type:"number","onUpdate:modelValue":r=>l.value[e.field_name]=r,required:e.is_required,step:"1",class:M(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":l.value[e.field_name]}]),placeholder:b(e)},null,10,Hl),[[H,l.value[e.field_name],void 0,{number:!0}]]),o[2]||(o[2]=t("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),e.description?(s(),a("p",Nl,u(e.description),1)):m("",!0)])):e.field_type==="Float"?(s(),a("div",Ql,[t("label",{for:e.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[B(u(e.field_label)+" ",1),e.is_required?(s(),a("span",Gl,"*")):m("",!0)],8,Jl),t("div",Kl,[F(t("input",{id:e.field_name,name:e.field_name,type:"number","onUpdate:modelValue":r=>l.value[e.field_name]=r,required:e.is_required,step:"0.01",class:M(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":l.value[e.field_name]}]),placeholder:b(e)},null,10,Wl),[[H,l.value[e.field_name],void 0,{number:!0}]]),o[3]||(o[3]=t("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),e.description?(s(),a("p",Zl,u(e.description),1)):m("",!0)])):e.field_type==="Currency"?(s(),a("div",Xl,[t("label",{for:e.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[B(u(e.field_label)+" ",1),e.is_required?(s(),a("span",es,"*")):m("",!0)],8,Yl),t("div",ts,[o[4]||(o[4]=t("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 text-base font-medium"},"₱")],-1)),F(t("input",{id:e.field_name,name:e.field_name,type:"number","onUpdate:modelValue":r=>l.value[e.field_name]=r,onBlur:r=>S(e),required:e.is_required,step:"0.01",class:M(["block w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":l.value[e.field_name]&&!g(e.field_name),"border-red-500 ring-2 ring-red-100":g(e.field_name)}]),placeholder:"0.00"},null,42,ls),[[H,l.value[e.field_name],void 0,{number:!0}]])]),g(e.field_name)?(s(),a("p",ss,u(g(e.field_name)),1)):e.description?(s(),a("p",os,u(e.description),1)):m("",!0)])):e.field_type==="Attach"||e.field_type==="Attach Image"?(s(),a("div",as,[P(nt,{label:e.field_label,required:e.is_required,accept:e.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:d(e.field_name),"onUpdate:modelValue":r=>x(e.field_name,r),onUpload:Q},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):(s(),a("div",rs,[t("div",ns,' Field type "'+u(e.field_type)+'" not yet supported for '+u(e.field_label),1)]))]))),128))]))}},X=Z(is,[["__scopeId","data-v-fe1a91d1"]]),ds={class:"dynamic-step max-w-4xl mx-auto"},us={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},cs={class:"flex items-start"},ps={class:"ml-4 flex-1"},ms={class:"text-2xl font-bold text-blue-900"},vs={key:0,class:"mt-2 text-sm text-blue-700"},gs={class:"space-y-6"},bs={class:"mb-4 pb-3 border-b-2 border-gray-200"},_s={class:"flex items-center"},ys={class:"text-lg font-semibold text-gray-900"},fs={key:0,class:"text-red-500 ml-1"},hs={key:0,class:"text-sm text-gray-600 mt-0.5"},xs={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},ks={class:"section-content"},ws={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},Cs={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(c,{emit:k}){const v=c,V=k,l=D({get:()=>v.modelValue,set:b=>V("update:modelValue",b)}),q=D(()=>v.stepConfig.sections?v.stepConfig.sections.filter(b=>{if(!b.depends_on)return!0;try{return _e(b,l.value)}catch(p){return console.error(`Error evaluating section visibility for ${b.section_code}:`,p),!0}}):[]),w=b=>[b.section_title];return K(()=>v.stepConfig,b=>{b.sections&&b.sections.forEach(p=>{p.fields.forEach(y=>{if(y.default_value&&!l.value[y.field_name]){const f=N({},l.value);y.default_value==="Today"&&y.field_type==="Date"?f[y.field_name]=new Date().toISOString().split("T")[0]:f[y.field_name]=y.default_value,V("update:modelValue",f)}})})},{immediate:!0,deep:!0}),(b,p)=>(s(),a("div",ds,[t("div",us,[t("div",cs,[p[3]||(p[3]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",ps,[t("h2",ms,u(c.stepConfig.step_title),1),c.stepDescription?(s(),a("p",vs,u(c.stepDescription),1)):m("",!0)])])]),t("div",gs,[(s(!0),a(T,null,R(q.value,y=>(s(),a("div",{key:y.section_code,class:"section"},[t("div",bs,[t("div",_s,[p[4]||(p[4]=t("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[t("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),t("div",null,[t("h3",ys,[B(u(y.section_title)+" ",1),y.is_required?(s(),a("span",fs,"*")):m("",!0)]),y.section_description?(s(),a("p",hs,u(y.section_description),1)):m("",!0)])]),y.is_required?(s(),a("div",xs,[...p[5]||(p[5]=[B(" All fields marked with ",-1),t("span",{class:"text-red-500"},"*",-1),B(" are required ",-1)])])):m("",!0)]),t("div",ks,[y.section_type==="Tab"?(s(),E(O(ke),{key:0},{default:I(()=>[P(O(ye),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:I(()=>[(s(!0),a(T,null,R(w(y),(f,$)=>(s(),E(O(fe),{key:$,class:M(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",b.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:I(({selected:C})=>[B(u(f),1)]),_:2},1032,["class"]))),128))]),_:2},1024),P(O(he),null,{default:I(()=>[(s(!0),a(T,null,R(w(y),(f,$)=>(s(),E(O(xe),{key:$},{default:I(()=>[P(X,{fields:y.fields,modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=C=>l.value=C)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):y.section_type==="Accordion"?(s(),E(O($e),{key:1},{default:I(({open:f})=>[P(O(we),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:I(()=>[t("span",null,u(y.section_title),1),P(O(Ve),{class:M([f?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),P(O(Ce),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:I(()=>[P(X,{fields:y.fields,modelValue:l.value,"onUpdate:modelValue":p[1]||(p[1]=$=>l.value=$)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(s(),a("div",ws,[P(X,{fields:y.fields,modelValue:l.value,"onUpdate:modelValue":p[2]||(p[2]=f=>l.value=f)},null,8,["fields","modelValue"])]))])]))),128))])]))}},zs=Z(Cs,[["__scopeId","data-v-a5269251"]]);export{zs as default};
//# sourceMappingURL=DynamicStepRenderer-ClqV-3pR.js.map
