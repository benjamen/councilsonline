var f=(b,x,c)=>new Promise((y,r)=>{var i=s=>{try{d(c.next(s))}catch(l){r(l)}},u=s=>{try{d(c.throw(s))}catch(l){r(l)}},d=s=>s.done?y(s.value):Promise.resolve(s.value).then(i,u);d((c=c.apply(b,x)).next())});import{B as z,C as N,j as p,r as v,G as P,p as $,c as a,o as n,a as e,x as m,h as g,t as h,m as E,d as H,b as k,u as C,I as R,w as _,F as S,i as A,L as D}from"./index-DAitPya7.js";const I={class:"w-full max-w-md"},T={class:"text-center mb-8"},U={key:0,class:"mb-4"},q=["src","alt"],G={class:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100"},W={key:0,class:"text-center"},J={class:"text-gray-600 mb-6"},K={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},O={class:"flex items-start"},Q={class:"text-sm text-red-700"},X={class:"text-center mt-6"},ee={__name:"CouncilForgotPassword",setup(b){const x=z(),c=N(),y=p(()=>{var o;return(o=x.params.councilCode)==null?void 0:o.toUpperCase()}),r=v(null),i=v(""),u=v(!1),d=v(!1),s=v("");P(()=>f(this,null,function*(){try{r.value=yield c.getCouncilSettings(y.value)}catch(o){console.error("Failed to load council settings:",o)}}));const l=p(()=>{var o;return((o=r.value)==null?void 0:o.primary_color)||"#2563eb"}),j=p(()=>{var o;return((o=r.value)==null?void 0:o.secondary_color)||"#64748b"}),B=p(()=>({background:`linear-gradient(to bottom right, ${l.value}15, ${j.value}15)`}));function M(){return f(this,null,function*(){s.value="",u.value=!0;try{yield D("frappe.core.doctype.user.user.reset_password",{user:i.value}),d.value=!0}catch(o){console.error("Password reset error:",o),s.value=o.message||"Failed to send reset email. Please try again."}finally{u.value=!1}})}function V(){d.value=!1,i.value="",s.value=""}return(o,t)=>{var w;const F=$("router-link");return n(),a("div",{class:"min-h-screen flex items-center justify-center p-4",style:m(B.value)},[e("div",I,[e("div",T,[(w=r.value)!=null&&w.logo?(n(),a("div",U,[e("img",{src:r.value.logo,alt:r.value.council_name,class:"h-20 mx-auto object-contain"},null,8,q)])):(n(),a("div",{key:1,class:"inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-4 shadow-lg",style:m({backgroundColor:l.value})},[...t[1]||(t[1]=[e("svg",{class:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})],-1)])],4)),t[2]||(t[2]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Reset Password",-1)),t[3]||(t[3]=e("p",{class:"text-gray-600"},"Enter your email to receive reset instructions",-1))]),e("div",G,[d.value?(n(),a("div",W,[e("div",{class:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:m({backgroundColor:`${l.value}20`})},[(n(),a("svg",{class:"w-8 h-8",style:m({color:l.value}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],4))],4),t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Check your email",-1)),e("p",J,[t[5]||(t[5]=g(" We've sent password reset instructions to ",-1)),e("strong",null,h(i.value),1)]),t[7]||(t[7]=e("p",{class:"text-sm text-gray-500 mb-6"}," Didn't receive the email? Check your spam folder or try again. ",-1)),e("button",{onClick:V,class:"text-sm hover:opacity-80",style:m({color:l.value})}," Try different email ",4)])):(n(),a("form",{key:1,onSubmit:E(M,["prevent"]),class:"space-y-5"},[e("div",null,[t[8]||(t[8]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address ",-1)),k(C(R),{id:"email",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=L=>i.value=L),type:"email",required:"",placeholder:"you@example.com",class:"w-full",disabled:u.value},null,8,["modelValue","disabled"])]),s.value?(n(),a("div",K,[e("div",O,[t[9]||(t[9]=e("svg",{class:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Q,h(s.value),1)])])):H("",!0),k(C(A),{type:"submit",loading:u.value,variant:"solid",class:"w-full text-white py-3 text-base font-medium",style:m({backgroundColor:l.value,borderColor:l.value})},{default:_(()=>[u.value?(n(),a(S,{key:1},[g(" Sending... ")],64)):(n(),a(S,{key:0},[g(" Send Reset Link ")],64))]),_:1},8,["loading","style"])],32))]),e("div",X,[k(F,{to:{name:"CouncilLogin",params:{councilCode:y.value}},class:"text-sm text-gray-600 hover:text-gray-900 inline-flex items-center"},{default:_(()=>[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),g(" Back to login ",-1)])]),_:1},8,["to"])])])],4)}}};export{ee as default};
//# sourceMappingURL=CouncilForgotPassword-VVdvDDyz.js.map
