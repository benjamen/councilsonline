{"version":3,"file":"CouncilSelector-Btu97uvz.js","sources":["../../../../frontend/src/components/CouncilSelector.vue"],"sourcesContent":["<template>\n  <div class=\"council-selector\">\n    <div v-if=\"showLabel\" class=\"mb-2\">\n      <label class=\"text-sm font-medium text-gray-700\">\n        {{ label }}\n        <span v-if=\"required\" class=\"text-red-500\">*</span>\n      </label>\n      <p v-if=\"description\" class=\"text-xs text-gray-500 mt-1\">\n        {{ description }}\n      </p>\n    </div>\n\n    <div v-if=\"loading\" class=\"animate-pulse\">\n      <div class=\"h-10 bg-gray-200 rounded\"></div>\n    </div>\n\n    <div v-else-if=\"error\" class=\"text-sm text-red-600\">\n      {{ error }}\n    </div>\n\n    <div v-else class=\"space-y-3\">\n      <select\n        v-if=\"displayMode === 'dropdown'\"\n        v-model=\"localSelectedCouncil\"\n        @change=\"handleCouncilChange\"\n        class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        :disabled=\"disabled\"\n        :required=\"required\"\n      >\n        <option value=\"\">{{ placeholder }}</option>\n        <option\n          v-for=\"council in councils\"\n          :key=\"council.council_code\"\n          :value=\"council.council_code\"\n        >\n          {{ council.council_name }}\n        </option>\n      </select>\n\n      <div v-else-if=\"displayMode === 'cards'\" class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        <button\n          v-for=\"council in councils\"\n          :key=\"council.council_code\"\n          @click=\"selectCouncil(council.council_code)\"\n          :disabled=\"disabled\"\n          class=\"p-4 border-2 rounded-lg text-left transition-all relative\"\n          :class=\"[\n            localSelectedCouncil === council.council_code\n              ? 'border-blue-600 bg-blue-50 ring-2 ring-blue-500 ring-offset-2 shadow-lg'\n              : 'border-gray-200 hover:border-blue-300 hover:shadow-md'\n          ]\"\n        >\n          <div class=\"flex items-start space-x-3\">\n            <div\n              v-if=\"council.logo\"\n              class=\"w-12 h-12 flex-shrink-0 rounded overflow-hidden\"\n            >\n              <img\n                :src=\"council.logo\"\n                :alt=\"council.council_name\"\n                class=\"w-full h-full object-contain\"\n              />\n            </div>\n            <div\n              v-else\n              class=\"w-12 h-12 flex-shrink-0 rounded flex items-center justify-center text-white font-bold text-lg\"\n              :style=\"{ backgroundColor: council.primary_color || '#3B82F6' }\"\n            >\n              {{ council.council_code }}\n            </div>\n\n            <div class=\"flex-1 min-w-0\">\n              <div class=\"flex items-center justify-between\">\n                <h3 class=\"font-semibold truncate\" :class=\"localSelectedCouncil === council.council_code ? 'text-blue-900' : 'text-gray-900'\">\n                  {{ council.council_name }}\n                </h3>\n                <div v-if=\"localSelectedCouncil === council.council_code\" class=\"ml-2\">\n                  <svg class=\"w-6 h-6 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path\n                      fill-rule=\"evenodd\"\n                      d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                      clip-rule=\"evenodd\"\n                    />\n                  </svg>\n                </div>\n              </div>\n              <p v-if=\"council.website\" class=\"text-xs text-gray-500 truncate mt-1\">\n                {{ formatWebsite(council.website) }}\n              </p>\n              <div v-if=\"localSelectedCouncil === council.council_code\" class=\"mt-2\">\n                <span class=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                  Selected\n                </span>\n              </div>\n            </div>\n          </div>\n        </button>\n      </div>\n\n      <div v-if=\"showClearButton && localSelectedCouncil\" class=\"mt-2\">\n        <button\n          @click=\"clearSelection\"\n          type=\"button\"\n          class=\"text-sm text-gray-600 hover:text-gray-800 underline\"\n        >\n          Clear selection\n        </button>\n      </div>\n    </div>\n\n    <div\n      v-if=\"localSelectedCouncil && showSelectedInfo\"\n      class=\"mt-4 p-3 bg-gray-50 rounded-lg border border-gray-200\"\n    >\n      <div class=\"flex items-start space-x-3\">\n        <div\n          class=\"w-10 h-10 flex-shrink-0 rounded flex items-center justify-center text-white font-bold\"\n          :style=\"{ backgroundColor: selectedCouncilData?.primary_color || '#3B82F6' }\"\n        >\n          {{ selectedCouncilData?.council_code }}\n        </div>\n        <div class=\"flex-1\">\n          <h4 class=\"font-medium text-gray-900\">\n            {{ selectedCouncilData?.council_name }}\n          </h4>\n          <p v-if=\"selectedCouncilData?.contact_email\" class=\"text-xs text-gray-600 mt-1\">\n            {{ selectedCouncilData?.contact_email }}\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { useCouncilStore } from '../stores/councilStore'\n\nconst props = defineProps({\n  modelValue: {\n    type: String,\n    default: null\n  },\n  label: {\n    type: String,\n    default: 'Select Council'\n  },\n  description: {\n    type: String,\n    default: ''\n  },\n  placeholder: {\n    type: String,\n    default: 'Choose a council...'\n  },\n  displayMode: {\n    type: String,\n    default: 'dropdown', // 'dropdown' or 'cards'\n    validator: (value) => ['dropdown', 'cards'].includes(value)\n  },\n  required: {\n    type: Boolean,\n    default: false\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  },\n  showLabel: {\n    type: Boolean,\n    default: true\n  },\n  showClearButton: {\n    type: Boolean,\n    default: false\n  },\n  showSelectedInfo: {\n    type: Boolean,\n    default: false\n  },\n  autoLoad: {\n    type: Boolean,\n    default: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'change'])\n\nconst councilStore = useCouncilStore()\n\nconst localSelectedCouncil = ref(props.modelValue)\n\nconst councils = computed(() => councilStore.activeCouncils)\nconst loading = computed(() => councilStore.loading)\nconst error = computed(() => councilStore.error)\n\nconst selectedCouncilData = computed(() => {\n  if (!localSelectedCouncil.value) return null\n  return councils.value.find(c => c.council_code === localSelectedCouncil.value)\n})\n\nconst formatWebsite = (url) => {\n  return url.replace(/^https?:\\/\\/(www\\.)?/, '')\n}\n\nconst selectCouncil = (councilCode) => {\n  if (props.disabled) return\n  localSelectedCouncil.value = councilCode\n  handleCouncilChange()\n}\n\nconst handleCouncilChange = () => {\n  emit('update:modelValue', localSelectedCouncil.value)\n  emit('change', localSelectedCouncil.value)\n}\n\nconst clearSelection = () => {\n  localSelectedCouncil.value = null\n  handleCouncilChange()\n}\n\nwatch(() => props.modelValue, (newValue) => {\n  localSelectedCouncil.value = newValue\n})\n\nonMounted(async () => {\n  if (props.autoLoad && councils.value.length === 0) {\n    await councilStore.loadCouncils()\n  }\n})\n</script>\n\n<style scoped>\n.council-selector {\n  @apply w-full;\n}\n</style>\n"],"names":["props","__props","emit","__emit","councilStore","useCouncilStore","localSelectedCouncil","ref","councils","computed","loading","error","selectedCouncilData","c","formatWebsite","url","selectCouncil","councilCode","handleCouncilChange","clearSelection","watch","newValue","onMounted","__async","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_createTextVNode","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","_cache","_hoisted_7","_hoisted_8","$event","_hoisted_10","_Fragment","_renderList","council","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_normalizeStyle","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_a","_b","_hoisted_25","_hoisted_26","_c","_d","_hoisted_27","_e"],"mappings":"43DA0IA,MAAMA,EAAQC,EAgDRC,EAAOC,EAEPC,EAAeC,EAAe,EAE9BC,EAAuBC,EAAIP,EAAM,UAAU,EAE3CQ,EAAWC,EAAS,IAAML,EAAa,cAAc,EACrDM,EAAUD,EAAS,IAAML,EAAa,OAAO,EAC7CO,EAAQF,EAAS,IAAML,EAAa,KAAK,EAEzCQ,EAAsBH,EAAS,IAC9BH,EAAqB,MACnBE,EAAS,MAAM,KAAKK,GAAKA,EAAE,eAAiBP,EAAqB,KAAK,EADrC,IAEzC,EAEKQ,EAAiBC,GACdA,EAAI,QAAQ,uBAAwB,EAAE,EAGzCC,EAAiBC,GAAgB,CACjCjB,EAAM,WACVM,EAAqB,MAAQW,EAC7BC,EAAmB,EACrB,EAEMA,EAAsB,IAAM,CAChChB,EAAK,oBAAqBI,EAAqB,KAAK,EACpDJ,EAAK,SAAUI,EAAqB,KAAK,CAC3C,EAEMa,EAAiB,IAAM,CAC3Bb,EAAqB,MAAQ,KAC7BY,EAAmB,CACrB,EAEA,OAAAE,EAAM,IAAMpB,EAAM,WAAaqB,GAAa,CAC1Cf,EAAqB,MAAQe,CAC/B,CAAC,EAEDC,EAAU,IAAYC,EAAA,sBAChBvB,EAAM,UAAYQ,EAAS,MAAM,SAAW,IAC9C,MAAMJ,EAAa,aAAY,EAEnC,EAAC,wBApOC,OAAAoB,EAAA,EAAAC,EAkIM,MAlINC,EAkIM,CAjIOzB,EAAA,WAAXuB,IAAAC,EAQM,MARNE,EAQM,CAPJC,EAGQ,QAHRC,EAGQ,CAFHC,EAAAC,EAAA9B,EAAA,KAAK,EAAG,IACX,CAAA,EAAYA,EAAA,cAAZwB,EAAmD,OAAnDO,EAA2C,GAAC,cAErC/B,EAAA,iBAATwB,EAEI,IAFJQ,EAEIF,EADC9B,EAAA,WAAW,EAAA,CAAA,wBAIPS,EAAA,OAAXc,IAAAC,EAEM,MAFNS,EAEM,CAAA,GAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CADJP,EAA4C,MAAA,CAAvC,MAAM,0BAA0B,EAAA,KAAA,EAAA,OAGvBjB,EAAA,WAAhBc,EAEM,MAFNW,EAEML,EADDpB,EAAA,KAAK,EAAA,CAAA,IAGVa,IAAAC,EAwFM,MAxFNY,EAwFM,CAtFIpC,EAAA,cAAW,kBADnBwB,EAgBS,SAAA,4CAdEnB,EAAoB,MAAAgC,GAC5B,SAAQpB,EACT,MAAM,yGACL,SAAUjB,EAAA,SACV,SAAUA,EAAA,WAEX2B,EAA2C,SAA3CW,EAA2CR,EAAvB9B,EAAA,WAAW,EAAA,CAAA,SAC/BwB,EAMSe,EAAA,KAAAC,EALWjC,EAAA,MAAXkC,QADTjB,EAMS,SAAA,CAJN,IAAKiB,EAAQ,aACb,MAAOA,EAAQ,YAEb,EAAAX,EAAAW,EAAQ,YAAY,EAAA,EAAAC,CAAA,sBAZhBrC,EAAA,KAAoB,IAgBfL,EAAA,cAAW,SAA3BuB,IAAAC,EA0DM,MA1DNmB,EA0DM,QAzDJnB,EAwDSe,EAAA,KAAAC,EAvDWjC,EAAA,MAAXkC,QADTjB,EAwDS,SAAA,CAtDN,IAAKiB,EAAQ,aACb,QAAKJ,IAAEtB,EAAc0B,EAAQ,YAAY,EACzC,SAAUzC,EAAA,SACX,SAAM,4DAA2D,CAC3CK,EAAA,QAAyBoC,EAAQ,oJAMvDd,EA2CM,MA3CNiB,GA2CM,CAzCIH,EAAQ,MADhBlB,IAAAC,EASM,MATNqB,GASM,CALJlB,EAIE,MAAA,CAHC,IAAKc,EAAQ,KACb,IAAKA,EAAQ,aACd,MAAM,mDAGVjB,EAMM,MAAA,OAJJ,MAAM,gGACL,MAAKsB,EAAA,CAAA,gBAAqBL,EAAQ,eAAa,SAAA,CAAA,CAE7C,EAAAX,EAAAW,EAAQ,YAAY,EAAA,CAAA,GAGzBd,EAuBM,MAvBNoB,GAuBM,CAtBJpB,EAaM,MAbNqB,GAaM,CAZJrB,EAEK,KAAA,CAFD,SAAM,yBAAiCtB,UAAyBoC,EAAQ,aAAY,gBAAA,eAAA,CAAA,CACnF,EAAAX,EAAAW,EAAQ,YAAY,EAAA,CAAA,EAEdpC,EAAA,QAAyBoC,EAAQ,cAA5ClB,IAAAC,EAQM,MARNyB,GAQM,CAAA,GAAAf,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAPJP,EAMM,MAAA,CAND,MAAM,wBAAwB,KAAK,eAAe,QAAQ,cAC7DA,EAIE,OAAA,CAHA,YAAU,UACV,EAAE,wIACF,YAAU,iCAKTc,EAAQ,SAAjBlB,IAAAC,EAEI,IAFJ0B,GAEIpB,EADCjB,EAAc4B,EAAQ,OAAO,CAAA,EAAA,CAAA,YAEvBpC,EAAA,QAAyBoC,EAAQ,cAA5ClB,IAAAC,EAIM,MAJN2B,GAIM,CAAA,GAAAjB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAHJP,EAEO,OAAA,CAFD,MAAM,+FAA+F,EAAC,aAE5G,EAAA,+CAOC3B,EAAA,iBAAmBK,EAAA,OAA9BkB,IAAAC,EAQM,MARN4B,GAQM,CAPJzB,EAMS,SAAA,CALN,QAAOT,EACR,KAAK,SACL,MAAM,uDACP,mBAED,iBAKIb,EAAA,OAAwBL,EAAA,kBADhCuB,IAAAC,EAoBM,MApBN6B,GAoBM,CAhBJ1B,EAeM,MAfN2B,GAeM,CAdJ3B,EAKM,MAAA,CAJJ,MAAM,wFACL,MAAKmB,EAAA,CAAA,kBAAqBS,EAAA5C,EAAA,QAAA,YAAA4C,EAAqB,gBAAa,SAAA,CAAA,CAE1D,EAAAzB,GAAA0B,EAAA7C,EAAA,QAAA,YAAA6C,EAAqB,YAAY,EAAA,CAAA,EAEtC7B,EAOM,MAPN8B,GAOM,CANJ9B,EAEK,KAFL+B,GAEK5B,GADA6B,EAAAhD,EAAA,QAAA,YAAAgD,EAAqB,YAAY,EAAA,CAAA,GAE7BC,EAAAjD,EAAA,QAAA,MAAAiD,EAAqB,eAA9BrC,EAAA,EAAAC,EAEI,IAFJqC,GAEI/B,GADCgC,EAAAnD,EAAA,QAAA,YAAAmD,EAAqB,aAAa,EAAA,CAAA"}