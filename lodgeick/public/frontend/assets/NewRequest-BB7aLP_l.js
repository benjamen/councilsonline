var st=Object.defineProperty,lt=Object.defineProperties;var ot=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var Ne=(t,r,c)=>r in t?st(t,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[r]=c,X=(t,r)=>{for(var c in r||(r={}))Le.call(r,c)&&Ne(t,c,r[c]);if(be)for(var c of be(r))Ee.call(r,c)&&Ne(t,c,r[c]);return t},Te=(t,r)=>lt(t,ot(r));var re=(t,r)=>{var c={};for(var o in t)Le.call(t,o)&&r.indexOf(o)<0&&(c[o]=t[o]);if(t!=null&&be)for(var o of be(t))r.indexOf(o)<0&&Ee.call(t,o)&&(c[o]=t[o]);return c};var E=(t,r,c)=>new Promise((o,a)=>{var x=g=>{try{f(c.next(g))}catch(v){a(v)}},m=g=>{try{f(c.throw(g))}catch(v){a(v)}},f=g=>g.done?o(g.value):Promise.resolve(g.value).then(x,m);f((c=c.apply(t,r)).next())});import{r as T,q as se,x as je,y as R,z as le,j as $,A as qe,B as ne,C as ke,E as at,G as Ce,H as Se,J as nt,K as ue,L as ve,M as J,N as $e,O as Ve,P as rt,Q as Ge,R as de,S as fe,T as it,F as G,U as xe,V as ut,W as dt,X as ie,Y as ee,Z as ct,c as u,o as n,a as e,$ as Ye,t as y,a0 as O,d as b,w as F,h as M,u as q,i as ae,a1 as Oe,f as Fe,D as Re,l as K,e as me,b as A,a2 as B,g as ce,s as mt,a3 as pt,m as ft,a4 as vt,k as Q,v as we,a5 as oe,a6 as Ue,a7 as gt,a8 as yt,a9 as bt,aa as xt,ab as ht}from"./index-D85DaLkN.js";import{r as he}from"./request.service-DAwIzWI6.js";import{_ as _t}from"./BookMeetingModal-BRkb9HPY.js";import{C as wt}from"./CouncilSelector-CdUcvVSA.js";function He(t,r){if(t)return t;let c=r!=null?r:"button";if(typeof c=="string"&&c.toLowerCase()==="button")return"button"}function We(t,r){let c=T(He(t.value.type,t.value.as));return se(()=>{c.value=He(t.value.type,t.value.as)}),je(()=>{var o;c.value||R(r)&&R(r)instanceof HTMLButtonElement&&!((o=R(r))!=null&&o.hasAttribute("type"))&&(c.value="button")}),c}var kt=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(kt||{});let Je=Symbol("DisclosureContext");function Ae(t){let r=ve(Je,null);if(r===null){let c=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,Ae),c}return r}let Ke=Symbol("DisclosurePanelContext");function Ct(){return ve(Ke,null)}let St=le({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(t,{slots:r,attrs:c}){let o=T(t.defaultOpen?0:1),a=T(null),x=T(null),m={buttonId:T(`headlessui-disclosure-button-${Se()}`),panelId:T(`headlessui-disclosure-panel-${Se()}`),disclosureState:o,panel:a,button:x,toggleDisclosure(){o.value=ue(o.value,{0:1,1:0})},closeDisclosure(){o.value!==1&&(o.value=1)},close(f){m.closeDisclosure();let g=f?f instanceof HTMLElement?f:f.value instanceof HTMLElement?R(f):R(m.button):R(m.button);g==null||g.focus()}};return ke(Je,m),nt($(()=>ue(o.value,{0:Ce.Open,1:Ce.Closed}))),()=>{let d=t,{defaultOpen:f}=d,g=re(d,["defaultOpen"]),v={open:o.value===0,close:m.close};return ne({theirProps:g,ourProps:{},slot:v,slots:r,attrs:c,name:"Disclosure"})}}}),$t=le({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:c,expose:o}){let a=Ae("DisclosureButton"),x=Ct(),m=$(()=>x===null?!1:x.value===a.panelId.value);se(()=>{m.value||t.id!==null&&(a.buttonId.value=t.id)}),qe(()=>{m.value||(a.buttonId.value=null)});let f=T(null);o({el:f,$el:f}),m.value||je(()=>{a.button.value=f.value});let g=We($(()=>({as:t.as,type:r.type})),f);function v(){var _;t.disabled||(m.value?(a.toggleDisclosure(),(_=R(a.button))==null||_.focus()):a.toggleDisclosure())}function d(_){var V;if(!t.disabled)if(m.value)switch(_.key){case J.Space:case J.Enter:_.preventDefault(),_.stopPropagation(),a.toggleDisclosure(),(V=R(a.button))==null||V.focus();break}else switch(_.key){case J.Space:case J.Enter:_.preventDefault(),_.stopPropagation(),a.toggleDisclosure();break}}function p(_){switch(_.key){case J.Space:_.preventDefault();break}}return()=>{var _;let V={open:a.disclosureState.value===0},s=t,{id:w}=s,i=re(s,["id"]),l=m.value?{ref:f,type:g.value,onClick:v,onKeydown:d}:{id:(_=a.buttonId.value)!=null?_:w,ref:f,type:g.value,"aria-expanded":a.disclosureState.value===0,"aria-controls":a.disclosureState.value===0||R(a.panel)?a.panelId.value:void 0,disabled:t.disabled?!0:void 0,onClick:v,onKeydown:d,onKeyup:p};return ne({ourProps:l,theirProps:i,slot:V,attrs:r,slots:c,name:"DisclosureButton"})}}}),Vt=le({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:r,slots:c,expose:o}){let a=Ae("DisclosurePanel");se(()=>{t.id!==null&&(a.panelId.value=t.id)}),qe(()=>{a.panelId.value=null}),o({el:a.panel,$el:a.panel}),ke(Ke,a.panelId);let x=at(),m=$(()=>x!==null?(x.value&Ce.Open)===Ce.Open:a.disclosureState.value===0);return()=>{var f;let g={open:a.disclosureState.value===0,close:a.close},_=t,{id:v}=_,d=re(_,["id"]),p={id:(f=a.panelId.value)!=null?f:v,ref:a.panel};return ne({ourProps:p,theirProps:d,slot:g,attrs:r,slots:c,features:$e.RenderStrategy|$e.Static,visible:m.value,name:"DisclosurePanel"})}}}),qt=le({props:{onFocus:{type:Function,required:!0}},setup(t){let r=T(!0);return()=>r.value?Ve(Ge,{as:"button",type:"button",features:rt.Focusable,onFocus(c){c.preventDefault();let o,a=50;function x(){var m;if(a--<=0){o&&cancelAnimationFrame(o);return}if((m=t.onFocus)!=null&&m.call(t)){r.value=!1,cancelAnimationFrame(o);return}o=requestAnimationFrame(x)}o=requestAnimationFrame(x)}}):null}});var Dt=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Dt||{}),Tt=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(Tt||{});let Qe=Symbol("TabsContext");function ge(t){let r=ve(Qe,null);if(r===null){let c=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,ge),c}return r}let ze=Symbol("TabsSSRContext"),Mt=le({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:r,attrs:c,emit:o}){var a;let x=T((a=t.selectedIndex)!=null?a:t.defaultIndex),m=T([]),f=T([]),g=$(()=>t.selectedIndex!==null),v=$(()=>g.value?t.selectedIndex:x.value);function d(i){var l;let s=fe(p.tabs.value,R),h=fe(p.panels.value,R),P=s.filter(j=>{var N;return!((N=R(j))!=null&&N.hasAttribute("disabled"))});if(i<0||i>s.length-1){let j=ue(x.value===null?0:Math.sign(i-x.value),{[-1]:()=>1,0:()=>ue(Math.sign(i),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),N=ue(j,{0:()=>s.indexOf(P[0]),1:()=>s.indexOf(P[P.length-1])});N!==-1&&(x.value=N),p.tabs.value=s,p.panels.value=h}else{let j=s.slice(0,i),N=[...s.slice(i),...j].find(te=>P.includes(te));if(!N)return;let H=(l=s.indexOf(N))!=null?l:p.selectedIndex.value;H===-1&&(H=p.selectedIndex.value),x.value=H,p.tabs.value=s,p.panels.value=h}}let p={selectedIndex:$(()=>{var i,l;return(l=(i=x.value)!=null?i:t.defaultIndex)!=null?l:null}),orientation:$(()=>t.vertical?"vertical":"horizontal"),activation:$(()=>t.manual?"manual":"auto"),tabs:m,panels:f,setSelectedIndex(i){v.value!==i&&o("change",i),g.value||d(i)},registerTab(i){var l;if(m.value.includes(i))return;let s=m.value[x.value];if(m.value.push(i),m.value=fe(m.value,R),!g.value){let h=(l=m.value.indexOf(s))!=null?l:x.value;h!==-1&&(x.value=h)}},unregisterTab(i){let l=m.value.indexOf(i);l!==-1&&m.value.splice(l,1)},registerPanel(i){f.value.includes(i)||(f.value.push(i),f.value=fe(f.value,R))},unregisterPanel(i){let l=f.value.indexOf(i);l!==-1&&f.value.splice(l,1)}};ke(Qe,p);let _=T({tabs:[],panels:[]}),V=T(!1);se(()=>{V.value=!0}),ke(ze,$(()=>V.value?null:_.value));let w=$(()=>t.selectedIndex);return se(()=>{de([w],()=>{var i;return d((i=t.selectedIndex)!=null?i:t.defaultIndex)},{immediate:!0})}),je(()=>{if(!g.value||v.value==null||p.tabs.value.length<=0)return;let i=fe(p.tabs.value,R);i.some((l,s)=>R(p.tabs.value[s])!==R(l))&&p.setSelectedIndex(i.findIndex(l=>R(l)===R(p.tabs.value[v.value])))}),()=>{let i={selectedIndex:x.value};return Ve(G,[m.value.length<=0&&Ve(qt,{onFocus:()=>{for(let l of m.value){let s=R(l);if((s==null?void 0:s.tabIndex)===0)return s.focus(),!0}return!1}}),ne({theirProps:X(X({},c),it(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])),ourProps:{},slot:i,slots:r,attrs:c,name:"TabGroup"})])}}}),Pt=le({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:r,slots:c}){let o=ge("TabList");return()=>{let a={selectedIndex:o.selectedIndex.value},x={role:"tablist","aria-orientation":o.orientation.value};return ne({ourProps:x,theirProps:t,slot:a,attrs:r,slots:c,name:"TabList"})}}}),It=le({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:c,expose:o}){var a;let x=(a=t.id)!=null?a:`headlessui-tabs-tab-${Se()}`,m=ge("Tab"),f=T(null);o({el:f,$el:f}),se(()=>m.registerTab(f)),qe(()=>m.unregisterTab(f));let g=ve(ze),v=$(()=>{if(g.value){let h=g.value.tabs.indexOf(x);return h===-1?g.value.tabs.push(x)-1:h}return-1}),d=$(()=>{let h=m.tabs.value.indexOf(f);return h===-1?v.value:h}),p=$(()=>d.value===m.selectedIndex.value);function _(h){var P;let j=h();if(j===xe.Success&&m.activation.value==="auto"){let N=(P=dt(f))==null?void 0:P.activeElement,H=m.tabs.value.findIndex(te=>R(te)===N);H!==-1&&m.setSelectedIndex(H)}return j}function V(h){let P=m.tabs.value.map(j=>R(j)).filter(Boolean);if(h.key===J.Space||h.key===J.Enter){h.preventDefault(),h.stopPropagation(),m.setSelectedIndex(d.value);return}switch(h.key){case J.Home:case J.PageUp:return h.preventDefault(),h.stopPropagation(),_(()=>ie(P,ee.First));case J.End:case J.PageDown:return h.preventDefault(),h.stopPropagation(),_(()=>ie(P,ee.Last))}if(_(()=>ue(m.orientation.value,{vertical(){return h.key===J.ArrowUp?ie(P,ee.Previous|ee.WrapAround):h.key===J.ArrowDown?ie(P,ee.Next|ee.WrapAround):xe.Error},horizontal(){return h.key===J.ArrowLeft?ie(P,ee.Previous|ee.WrapAround):h.key===J.ArrowRight?ie(P,ee.Next|ee.WrapAround):xe.Error}}))===xe.Success)return h.preventDefault()}let w=T(!1);function i(){var h;w.value||(w.value=!0,!t.disabled&&((h=R(f))==null||h.focus({preventScroll:!0}),m.setSelectedIndex(d.value),ut(()=>{w.value=!1})))}function l(h){h.preventDefault()}let s=We($(()=>({as:t.as,type:r.type})),f);return()=>{var h,P;let j={selected:p.value,disabled:(h=t.disabled)!=null?h:!1},N=re(t,[]),H={ref:f,onKeydown:V,onMousedown:l,onClick:i,id:x,role:"tab",type:s.value,"aria-controls":(P=R(m.panels.value[d.value]))==null?void 0:P.id,"aria-selected":p.value,tabIndex:p.value?0:-1,disabled:t.disabled?!0:void 0};return ne({ourProps:H,theirProps:N,slot:j,attrs:r,slots:c,name:"Tab"})}}}),Bt=le({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:r,attrs:c}){let o=ge("TabPanels");return()=>{let a={selectedIndex:o.selectedIndex.value};return ne({theirProps:t,ourProps:{},slot:a,attrs:c,slots:r,name:"TabPanels"})}}}),jt=le({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(t,{attrs:r,slots:c,expose:o}){var a;let x=(a=t.id)!=null?a:`headlessui-tabs-panel-${Se()}`,m=ge("TabPanel"),f=T(null);o({el:f,$el:f}),se(()=>m.registerPanel(f)),qe(()=>m.unregisterPanel(f));let g=ve(ze),v=$(()=>{if(g.value){let _=g.value.panels.indexOf(x);return _===-1?g.value.panels.push(x)-1:_}return-1}),d=$(()=>{let _=m.panels.value.indexOf(f);return _===-1?v.value:_}),p=$(()=>d.value===m.selectedIndex.value);return()=>{var _;let V={selected:p.value},s=t,{tabIndex:w}=s,i=re(s,["tabIndex"]),l={ref:f,id:x,role:"tabpanel","aria-labelledby":(_=R(m.tabs.value[d.value]))==null?void 0:_.id,tabIndex:p.value?w:-1};return!p.value&&t.unmount&&!t.static?Ve(Ge,X({as:"span","aria-hidden":!0},l)):ne({ourProps:l,theirProps:i,slot:V,attrs:r,slots:c,features:$e.Static|$e.RenderStrategy,visible:p.value,name:"TabPanel"})}}});const Ft=ct("request",{state:()=>({currentRequestId:null,requestTypeCode:null,requestTypeConfig:null,formData:{},currentStep:0,stepValidationStatus:{},isSaving:!1,isSubmitting:!1,lastSaved:null,error:null}),getters:{isFirstStep:t=>t.currentStep===0,totalSteps:t=>{var r;return(r=t.requestTypeConfig)!=null&&r.steps?t.requestTypeConfig.steps.length+4:4},isLastStep:t=>t.currentStep===t.totalSteps-1,currentStepConfig:t=>{var r,c;return(c=(r=t.requestTypeConfig)==null?void 0:r.steps)==null?void 0:c[t.currentStep]},canNavigateNext:t=>t.stepValidationStatus[t.currentStep]===!0,completionPercentage:t=>t.totalSteps===0?0:Math.round((t.currentStep+1)/t.totalSteps*100),hasUnsavedChanges:t=>t.lastSaved?new Date-t.lastSaved>3e4:Object.keys(t.formData).length>0},actions:{nextStep(){this.isLastStep||this.currentStep++},previousStep(){this.isFirstStep||this.currentStep--},goToStep(t){t>=0&&t<this.totalSteps&&(this.currentStep=t)},initialize(t,r=null){return E(this,null,function*(){try{this.requestTypeCode=t,this.error=null,console.log("[RequestStore] initialize called:",{requestTypeCode:t,draftId:r});const c=he.getRequestTypeConfig(t);yield new Promise(o=>{const a=setInterval(()=>{c.loading||(clearInterval(a),o())},100)}),this.requestTypeConfig=c.data,r&&(yield this.loadDraft(r))}catch(c){console.error("Failed to initialize request:",c),this.error=c.message||"Failed to load request type"}})},loadDraft(t){return E(this,null,function*(){try{const r=he.getRequest(t);yield new Promise(o=>{const a=setInterval(()=>{r.loading||(clearInterval(a),o())},100)});const c=r.data;if(this.currentRequestId=t,c.draft_full_data)try{this.formData=JSON.parse(c.draft_full_data)}catch(o){console.error("Failed to parse draft_full_data:",o),this.formData=c.form_data||{}}else this.formData=c.form_data||{};this.currentStep=c.draft_current_step||0}catch(r){console.error("Failed to load draft:",r),this.error=r.message||"Failed to load draft"}})},saveProgress(){return E(this,null,function*(){this.isSaving=!0,this.error=null;try{const t=yield he.createDraft(this.formData,this.currentStep);this.currentRequestId||(this.currentRequestId=t.request_id),this.lastSaved=new Date}catch(t){throw console.error("Save failed:",t),this.error=t.message||"Failed to save progress",t}finally{this.isSaving=!1}})},saveDraft(){return E(this,null,function*(){return this.saveProgress()})},submitRequest(){return E(this,null,function*(){this.isSubmitting=!0,this.error=null;try{this.currentRequestId||(yield this.saveProgress());const t=yield he.submitRequest(this.currentRequestId);return this.reset(),t}catch(t){throw console.error("Submit failed:",t),this.error=t.message||"Failed to submit request",t}finally{this.isSubmitting=!1}})},updateField(t,r){this.formData[t]=r},updateFields(t){Object.assign(this.formData,t)},setStepValidation(t,r){this.stepValidationStatus[t]=r},clearError(){this.error=null},reset(){this.currentRequestId=null,this.requestTypeCode=null,this.requestTypeConfig=null,this.formData={},this.currentStep=0,this.stepValidationStatus={},this.isSaving=!1,this.isSubmitting=!1,this.lastSaved=null,this.error=null}}});function Rt(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0}function At(t){return t?/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(t.replace(/\s/g,"")):!0}function zt(t){if(!t)return!0;try{return new URL(t),!0}catch(r){return!1}}function Nt(t){return t===""||t===null||t===void 0?!0:!isNaN(parseFloat(t))&&isFinite(t)}function Lt(t,r,c){let o=t.trim();o.startsWith("eval:")&&(o=o.substring(5).trim());try{return new Function("formData","value",`
			'use strict';
			try {
				return Boolean(${o});
			} catch (e) {
				console.warn('[Field Validation] Evaluation error:', e.message);
				return true; // Fail open on evaluation error
			}
		`)(c,r)}catch(a){return console.error("[Field Validation] Failed to evaluate expression:",t,a),!0}}function Et(t,r,c={}){if(!r)return{valid:!0,message:""};switch(r.toLowerCase()){case"email":if(!Rt(t))return{valid:!1,message:"Please enter a valid email address"};break;case"phone":if(!At(t))return{valid:!1,message:"Please enter a valid phone number"};break;case"url":if(!zt(t))return{valid:!1,message:"Please enter a valid URL"};break;case"number":if(!Nt(t))return{valid:!1,message:"Please enter a valid number"};break;default:if(r.startsWith("eval:")&&!Lt(r,t,c))return{valid:!1,message:"Validation failed"}}return{valid:!0,message:""}}function Be(){const t=T({}),r=T(!1);function c(f,g,v,d={}){const p=Et(g,v.validation,d);return p.valid?v.is_required&&(g===""||g===null||g===void 0)?(t.value[f]=`${v.field_label} is required`,!1):(delete t.value[f],!0):(t.value[f]=p.message,!1)}function o(f,g){return E(this,null,function*(){r.value=!0,t.value={};let v=!0;for(const d of f.sections||[])if(!(d.depends_on&&!a(d.depends_on,g)))for(const p of d.fields||[]){if(p.depends_on&&!a(p.depends_on,g))continue;const _=g[p.field_name];c(p.field_name,_,p,g)||(v=!1)}return r.value=!1,v})}function a(f,g){try{const{evaluateCondition:v}=require("../utils/conditionalLogic");return v(f,g)}catch(v){return console.error("Error evaluating depends_on:",v),!0}}function x(){t.value={}}function m(f){delete t.value[f]}return{errors:t,isValidating:r,validateConfigField:c,validateStep:o,clearErrors:x,clearFieldError:m}}const U=T(null),Me=T(!1),Pe=T(null);function Ot(){const t=()=>E(this,null,function*(){var d;Me.value=!0,Pe.value=null;try{const p={"Content-Type":"application/json"};window.csrf_token&&(p["X-Frappe-CSRF-Token"]=window.csrf_token);const V=yield(yield fetch("/api/method/lodgeick.api.get_user_profile",{method:"GET",headers:p,credentials:"include"})).json();if(V.message&&V.message.success)return U.value=V.message.profile,U.value;throw new Error(((d=V.message)==null?void 0:d.error)||"Failed to load profile")}catch(p){return Pe.value=p.message,console.error("Error loading user profile:",p),null}finally{Me.value=!1}}),r=$(()=>{var d;return(d=U.value)!=null&&d.properties?U.value.properties.find(p=>p.is_default)||U.value.properties[0]:null}),c=$(()=>{var d;return(d=U.value)!=null&&d.councils?U.value.councils.find(p=>p.is_default)||U.value.councils[0]:null}),o=()=>{if(!U.value)return{};const d=U.value,p={};if(c.value&&(p.council=c.value.council_id,p.council_name=c.value.council_name),p.requester_name=d.full_name,p.requester_email=d.user,p.requester_phone=d.phone,p.requester_type=d.user_role,d.user_role==="Individual"&&d.postal_street&&(p.applicant_address=`${d.postal_street}, ${d.postal_suburb||""}, ${d.postal_city||""} ${d.postal_postcode||""}`.trim()),d.user_role==="Agent"&&(p.agent_required=!0,p.agent_id=d.user,p.agent_company=d.company_name,p.agent_email=d.business_email||d.user,p.agent_phone=d.business_phone||d.phone,d.business_street&&(p.agent_address=`${d.business_street}, ${d.business_suburb||""}, ${d.business_city||""} ${d.business_postcode||""}`.trim()),d.default_communication_route&&(p.correspondence_recipient=d.default_communication_route==="Agent Only"?"Agent":"Both"),d.default_invoice_recipient&&(p.invoice_responsible_party=d.default_invoice_recipient)),r.value){const _=r.value;p.property=`${_.street}, ${_.suburb||""}, ${_.city||""} ${_.postcode||""}`.trim(),p.property_address=p.property,p.property_legal_description=_.legal_description,p.ownership_status=_.ownership_status}return(d.comm_email||d.comm_phone||d.comm_post)&&(p.communication_preferences={email:d.comm_email||!1,phone:d.comm_phone||!1,post:d.comm_post||!1}),d.invoice_preference&&(p.invoice_delivery_method=d.invoice_preference),p},a=(d,p={})=>{const{overrideExisting:_=!1,fieldsToSkip:V=[]}=p,w=o();return Object.keys(w).forEach(i=>{V.includes(i)||!_&&d[i]||(d[i]=w[i])}),d},x=$(()=>{var d;return((d=U.value)==null?void 0:d.properties)||[]}),m=$(()=>{var d;return((d=U.value)==null?void 0:d.councils)||[]}),f=$(()=>{var d;return((d=U.value)==null?void 0:d.clients)||[]}),g=$(()=>{var _,V,w;if(!U.value)return!1;const d=U.value,p=d.full_name&&d.phone&&d.user_role;return d.user_role==="Individual"?p&&(((_=d.properties)==null?void 0:_.length)>0||!1)&&(((V=d.councils)==null?void 0:V.length)>0||!1):d.user_role==="Agent"?p&&d.company_name&&(((w=d.councils)==null?void 0:w.length)>0||!1):p}),v=$(()=>{if(!U.value)return 0;const d=U.value;let p=0,_=0;return["full_name","phone","user_role"].forEach(w=>{_++,d[w]&&p++}),_++,(d.comm_email||d.comm_phone||d.comm_post)&&p++,_++,d.properties&&d.properties.length>0&&p++,_++,d.councils&&d.councils.length>0&&p++,d.user_role==="Agent"?(_++,d.company_name&&p++):(_++,d.postal_street&&p++),Math.round(p/_*100)});return{userProfile:U,loading:Me,error:Pe,loadUserProfile:t,getApplicationAutoFill:o,applyAutoFill:a,defaultProperty:r,defaultCouncil:c,getAllProperties:x,getAllCouncils:m,getAllClients:f,isProfileComplete:g,profileCompletionPercentage:v}}const Ut={class:"mb-8"},Ht={class:"relative mb-6"},Gt={class:"overflow-hidden h-2 text-xs flex rounded bg-gray-200"},Yt={class:"flex justify-between mt-2"},Wt={class:"text-sm font-medium text-gray-700"},Jt={class:"text-sm font-medium text-gray-700"},Kt={__name:"RequestProgress",props:{currentStep:{type:Number,required:!0},totalSteps:{type:Number,required:!0},stepTitles:{type:Array,default:()=>[]}},setup(t){const r=t,c=$(()=>r.totalSteps===0?0:Math.round((r.currentStep+1)/r.totalSteps*100));return(o,a)=>(n(),u("div",Ut,[e("div",Ht,[e("div",Gt,[e("div",{style:Ye({width:c.value+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-600 transition-all duration-500"},null,4)]),e("div",Yt,[e("span",Wt,y(t.stepTitles[t.currentStep]||`Step ${t.currentStep+1}`),1),e("span",Jt,y(c.value)+"% Complete ",1)])])]))}},Qt={class:"mt-8 pt-6 border-t border-gray-200"},Zt={class:"flex items-center justify-between"},Xt={class:"flex items-center space-x-3"},es={__name:"StepNavigation",props:{currentStep:{type:Number,required:!0},totalSteps:{type:Number,required:!0},isLastStep:{type:Boolean,default:!1},canGoNext:{type:Boolean,default:!0},canSaveDraft:{type:Boolean,default:!0},isSaving:{type:Boolean,default:!1},isSubmitting:{type:Boolean,default:!1}},emits:["next","previous","save-draft","submit"],setup(t,{emit:r}){const c=r,o=()=>{c("next")},a=()=>{c("previous")},x=()=>{c("save-draft")},m=()=>{c("submit")};return(f,g)=>(n(),u("div",Qt,[e("div",Zt,[e("div",null,[t.currentStep>0?(n(),O(q(ae),{key:0,onClick:a,variant:"outline",disabled:t.isSaving||t.isSubmitting},{prefix:F(()=>[...g[0]||(g[0]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:F(()=>[g[1]||(g[1]=M(" Previous ",-1))]),_:1},8,["disabled"])):b("",!0)]),e("div",Xt,[t.canSaveDraft?(n(),O(q(ae),{key:0,onClick:x,variant:"outline",loading:t.isSaving,disabled:t.isSubmitting},Oe({default:F(()=>[M(" "+y(t.isSaving?"Saving...":"Save Draft"),1)]),_:2},[t.isSaving?void 0:{name:"prefix",fn:F(()=>[g[2]||(g[2]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1))]),key:"0"}]),1032,["loading","disabled"])):b("",!0),t.isLastStep?(n(),O(q(ae),{key:2,onClick:m,variant:"solid",theme:"green",loading:t.isSubmitting,disabled:!t.canGoNext||t.isSaving},Oe({default:F(()=>[M(" "+y(t.isSubmitting?"Submitting...":"Submit Application"),1)]),_:2},[t.isSubmitting?void 0:{name:"prefix",fn:F(()=>[g[5]||(g[5]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1))]),key:"0"}]),1032,["loading","disabled"])):(n(),O(q(ae),{key:1,onClick:o,variant:"solid",theme:"blue",disabled:!t.canGoNext||t.isSaving||t.isSubmitting},{suffix:F(()=>[...g[3]||(g[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),default:F(()=>[g[4]||(g[4]=M(" Next ",-1))]),_:1},8,["disabled"]))])]),g[6]||(g[6]=e("div",{class:"mt-4 text-center"},[e("p",{class:"text-sm text-gray-500"}," Your progress is automatically saved. You can return to complete this application later. ")],-1))]))}},ts={class:"text-center py-6"},ss={key:0,class:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6"},ls={class:"text-sm font-mono text-gray-900 mb-3"},os={__name:"SaveDraftModal",props:{show:{type:Boolean,required:!0},draftId:{type:String,default:null}},emits:["update:show","close"],setup(t,{emit:r}){const c=Fe(),o=t,a=r,x=$({get:()=>o.show,set:g=>a("update:show",g)}),m=()=>{a("update:show",!1),a("close")},f=()=>{o.draftId&&(a("update:show",!1),c.push(`/request/${o.draftId}`))};return(g,v)=>(n(),O(q(Re),{modelValue:x.value,"onUpdate:modelValue":v[0]||(v[0]=d=>x.value=d),options:{size:"sm"}},{body:F(()=>[e("div",ts,[v[3]||(v[3]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),v[4]||(v[4]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Draft Saved Successfully",-1)),v[5]||(v[5]=e("p",{class:"text-sm text-gray-500 mb-4"}," Your progress has been saved. You can return to complete this application later. ",-1)),t.draftId?(n(),u("div",ss,[v[2]||(v[2]=e("p",{class:"text-xs text-gray-500 mb-2"},"Draft ID",-1)),e("p",ls,y(t.draftId),1),e("button",{onClick:f,class:"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline"},[...v[1]||(v[1]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),M(" View Draft Details ",-1)])])])):b("",!0),e("div",{class:"flex justify-between w-full space-x-3 px-4"},[e("button",{onClick:m,class:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}," Close "),e("button",{onClick:m,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}," Continue Editing ")])])]),_:1},8,["modelValue"]))}},as={class:"py-4"},ns={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},rs={class:"list-disc list-inside space-y-2"},is={class:"font-medium"},us={key:1,class:"text-sm text-gray-500 text-center py-4"},ds={__name:"ValidationErrorModal",props:{show:{type:Boolean,required:!0},errors:{type:Object,default:()=>({})}},emits:["update:show","close"],setup(t,{emit:r}){const c=t,o=r,a=$({get:()=>c.show,set:f=>o("update:show",f)}),x=$(()=>Object.entries(c.errors).map(([f,g])=>({field:f,message:g}))),m=()=>{o("update:show",!1),o("close")};return(f,g)=>(n(),O(q(Re),{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=v=>a.value=v),options:{size:"md"}},{body:F(()=>[e("div",as,[g[1]||(g[1]=e("div",{class:"flex items-start mb-4"},[e("div",{class:"flex-shrink-0"},[e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])])]),e("div",{class:"ml-4"},[e("h3",{class:"text-lg font-medium text-gray-900 mb-1"},"Validation Errors"),e("p",{class:"text-sm text-gray-500"}," Please fix the following errors before continuing: ")])],-1)),x.value.length>0?(n(),u("div",ns,[e("ul",rs,[(n(!0),u(G,null,K(x.value,(v,d)=>(n(),u("li",{key:d,class:"text-sm text-red-800"},[e("span",is,y(v.field)+":",1),M(" "+y(v.message),1)]))),128))])])):(n(),u("div",us," No validation errors found. "))])]),actions:F(()=>[e("div",{class:"flex justify-end"},[e("button",{onClick:m,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}," Close and Fix Errors ")])]),_:1},8,["modelValue"]))}},cs={class:"success-content text-center py-6"},ms={class:"text-xl font-semibold text-gray-900 mb-2"},ps={key:0,class:"mt-4 space-y-2"},fs={class:"text-gray-600"},vs={class:"font-semibold text-gray-900"},gs={key:0,class:"text-gray-600"},ys={class:"font-semibold text-gray-900"},bs={class:"mt-6 flex gap-3 justify-center"},xs={__name:"SubmissionSuccessModal",props:{open:{type:Boolean,default:!1},requestNumber:{type:String,default:""},requestId:{type:String,default:""},slaInfo:{type:Object,default:()=>({})}},emits:["close","viewRequest","goToDashboard"],setup(t,{emit:r}){const c=t,o=r,a=$({get:()=>c.open,set:g=>{g||o("close")}});function x(g){if(!g)return"N/A";try{return new Date(g).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(v){return g}}function m(){o("viewRequest",c.requestId),a.value=!1}function f(){o("goToDashboard"),a.value=!1}return(g,v)=>(n(),O(q(Re),{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=d=>a.value=d),options:{title:"Request Submitted Successfully",size:"md"}},{"body-content":F(()=>[e("div",cs,[v[5]||(v[5]=e("div",{class:"flex justify-center mb-4"},[e("svg",{class:"w-16 h-16 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("h3",ms," Request "+y(t.requestNumber)+" Submitted ",1),t.slaInfo?(n(),u("div",ps,[e("p",fs,[v[1]||(v[1]=M(" Your request will be processed within ",-1)),e("span",vs,y(t.slaInfo.processing_days)+" business days ",1)]),t.slaInfo.expected_completion_date?(n(),u("p",gs,[v[2]||(v[2]=M(" Expected completion: ",-1)),e("span",ys,y(x(t.slaInfo.expected_completion_date)),1)])):b("",!0)])):b("",!0),v[6]||(v[6]=e("div",{class:"mt-6 p-4 bg-blue-50 rounded-lg text-left"},[e("h4",{class:"text-sm font-semibold text-blue-900 mb-2"},"Next Steps:"),e("ul",{class:"text-sm text-blue-800 space-y-1"},[e("li",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",null,"You will receive email updates on your request status")]),e("li",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",null,"Track your request progress from the dashboard")]),e("li",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",null,"Council staff will review your application and contact you if needed")])])],-1)),e("div",bs,[A(q(ae),{variant:"outline",onClick:m},{default:F(()=>[...v[3]||(v[3]=[M(" View Request Details ",-1)])]),_:1}),A(q(ae),{appearance:"primary",onClick:f},{default:F(()=>[...v[4]||(v[4]=[M(" Go to Dashboard ",-1)])]),_:1})])])]),_:1},8,["modelValue"]))}},hs=me(xs,[["__scopeId","data-v-68eda355"]]),_s={__name:"Step1CouncilSelection",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","council-change"],setup(t,{emit:r}){const c=t,o=r,a=x=>{console.log("[Step1CouncilSelection] updateCouncil called with:",x),console.log("[Step1CouncilSelection] Current modelValue:",c.modelValue),o("update:modelValue",Te(X({},c.modelValue),{council:x})),o("council-change",x),console.log("[Step1CouncilSelection] Emitted events")};return(x,m)=>(n(),u("div",null,[m[0]||(m[0]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Council",-1)),m[1]||(m[1]=e("p",{class:"text-gray-600 mb-8"},"Choose the council that will process your application",-1)),A(wt,{"model-value":t.modelValue.council,"onUpdate:modelValue":a,"display-mode":"cards",required:!0,"show-selected-info":!0,label:"","show-label":!1},null,8,["model-value"])]))}},ws={key:0,class:"text-center py-12"},ks={key:1,class:"grid md:grid-cols-2 gap-4"},Cs=["onClick"],Ss={class:"flex items-start justify-between"},$s={class:"flex-1"},Vs={class:"text-lg font-semibold text-gray-900 mb-2"},qs=["innerHTML"],Ds={class:"mt-4 flex items-center space-x-4 text-xs text-gray-500"},Ts={key:0},Ms={key:1},Ps={key:2,class:"px-2 py-1 bg-gray-100 rounded"},Is={key:0,class:"ml-4"},Bs={__name:"Step2RequestType",props:{modelValue:{type:Object,required:!0},requestTypes:{type:Object,required:!0}},emits:["update:modelValue","type-selected"],setup(t,{emit:r}){const c=t,o=r,a=x=>{console.log("[Step2RequestType] selectType called with:",x.name),console.log("[Step2RequestType] props.modelValue:",c.modelValue),console.log("[Step2RequestType] props.modelValue.council:",c.modelValue.council);const m=Te(X({},c.modelValue),{request_type:x.name});console.log("[Step2RequestType] Emitting updatedValue:",m),o("update:modelValue",m),o("type-selected",x.name)};return(x,m)=>(n(),u("div",null,[m[2]||(m[2]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Application Type",-1)),m[3]||(m[3]=e("p",{class:"text-gray-600 mb-8"},"Choose the type of consent you wish to apply for",-1)),t.requestTypes.loading?(n(),u("div",ws,[...m[0]||(m[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(n(),u("div",ks,[(n(!0),u(G,null,K(t.requestTypes.data,f=>(n(),u("div",{key:f.name,onClick:g=>a(f),class:B(["border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",t.modelValue.request_type===f.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",Ss,[e("div",$s,[e("h3",Vs,y(f.type_name),1),e("p",{class:"text-sm text-gray-600",innerHTML:f.description||"No description available"},null,8,qs),e("div",Ds,[f.base_fee?(n(),u("span",Ts,"Fee: $"+y(f.base_fee),1)):b("",!0),f.processing_sla_days?(n(),u("span",Ms,y(f.processing_sla_days)+" days",1)):b("",!0),f.category?(n(),u("span",Ps,y(f.category),1)):b("",!0)])]),t.modelValue.request_type===f.name?(n(),u("div",Is,[...m[1]||(m[1]=[e("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):b("",!0)])],10,Cs))),128))]))]))}},js={class:"text-gray-600 mb-6"},Fs={key:0,class:"space-y-6"},Rs={class:"bg-white border border-gray-200 rounded-lg p-6"},As={class:"flex items-start justify-between mb-4"},zs={class:"text-xl font-semibold text-gray-900"},Ns={key:0,class:"text-sm text-gray-500 mt-1"},Ls={class:"grid md:grid-cols-3 gap-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},Es={class:"text-2xl font-bold text-blue-900 mt-1"},Os={class:"text-2xl font-bold text-blue-900 mt-1"},Us={class:"text-2xl font-bold text-blue-900 mt-1"},Hs={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},Gs=["innerHTML"],Ys={key:1,class:"bg-white border border-gray-200 rounded-lg p-6"},Ws=["innerHTML"],Js={key:1,class:"text-center py-12"},Ks={__name:"Step3ProcessInfo",props:{requestTypeDetails:{type:Object,default:null},councilName:{type:String,default:""},modelValue:{type:Object,default:()=>({})}},emits:["continue","update:modelValue"],setup(t,{emit:r}){const c=Fe(),o=r,a=()=>{if(!mt.isLoggedIn){const x=window.location.pathname+window.location.search;c.push({name:"Login",query:{redirect:x}});return}o("continue")};return(x,m)=>(n(),u("div",null,[m[11]||(m[11]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Council Process Information",-1)),e("p",js,"Understanding "+y(t.councilName)+"'s process for this application",1),t.requestTypeDetails?(n(),u("div",Fs,[e("div",Rs,[e("div",As,[e("div",null,[e("h3",zs,y(t.requestTypeDetails.request_type_name),1),t.requestTypeDetails.category?(n(),u("p",Ns,y(t.requestTypeDetails.category),1)):b("",!0)])]),e("div",Ls,[e("div",null,[m[0]||(m[0]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Application Fee",-1)),e("div",Es," $"+y(t.requestTypeDetails.base_fee||"0"),1),m[1]||(m[1]=e("div",{class:"text-xs text-blue-600 mt-1"},"Plus any additional costs",-1))]),e("div",null,[m[3]||(m[3]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Processing Time",-1)),e("div",Os,[M(y(t.requestTypeDetails.sla_days||"N/A")+" ",1),m[2]||(m[2]=e("span",{class:"text-base"},"days",-1))]),m[4]||(m[4]=e("div",{class:"text-xs text-blue-600 mt-1"},"Standard timeframe",-1))]),e("div",null,[m[5]||(m[5]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Payment Required",-1)),e("div",Us,y(t.requestTypeDetails.requires_payment?"Yes":"No"),1),m[6]||(m[6]=e("div",{class:"text-xs text-blue-600 mt-1"},"Before processing",-1))])])]),t.requestTypeDetails.process_description?(n(),u("div",Hs,[m[7]||(m[7]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"How This Works",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:t.requestTypeDetails.process_description},null,8,Gs)])):t.requestTypeDetails.description?(n(),u("div",Ys,[m[8]||(m[8]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"About This Application",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:t.requestTypeDetails.description},null,8,Ws)])):b("",!0),m[9]||(m[9]=ce('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Before You Continue</h5><p class="text-yellow-800 text-sm mt-1"> Please review this information carefully. Make sure you understand the process, fees, and timeframes before proceeding with your application. </p></div></div></div>',1)),e("div",{class:"flex justify-center pt-4"},[e("button",{type:"button",onClick:a,class:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"}," I Understand - Continue to Application ")])])):(n(),u("div",Js,[...m[10]||(m[10]=[e("p",{class:"text-gray-500"},"No request type selected. Please go back and select a request type.",-1)])]))]))}};function Qs(t,r){return n(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const Zs={class:"space-y-4"},Xs={class:"block"},el={class:"text-sm font-medium text-gray-900"},tl={key:0,class:"text-red-500"},sl={key:0,class:"text-xs text-gray-500 mt-1"},ll={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ol=["disabled"],al=["disabled"],nl={class:"text-center"},rl={class:"text-xs text-gray-500"},il=["accept","multiple"],ul={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},dl={class:"flex items-center space-x-3"},cl={class:"flex-1"},ml={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},pl={key:1,class:"space-y-2"},fl={class:"flex items-center space-x-3 flex-1 min-w-0"},vl={class:"flex-shrink-0"},gl={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},yl=["src","alt"],bl={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},xl={class:"flex-1 min-w-0"},hl={class:"text-sm font-medium text-gray-900 truncate"},_l={class:"text-xs text-gray-500"},wl=["onClick"],kl={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},Cl={class:"relative bg-black aspect-video"},Sl=["src"],$l={key:2,class:"absolute inset-0 pointer-events-none"},Vl={class:"w-full h-full grid grid-cols-3 grid-rows-3"},ql={class:"bg-gray-900 px-6 py-6"},Dl={key:0,class:"flex items-center justify-center space-x-6"},Tl={key:1,class:"flex items-center justify-center space-x-4"},Ml={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(t,{emit:r}){const c=t,o=r,a=T(null),x=T(null),m=T(!1),f=T(null),g=T(null),v=T(!1),d=T(0),p=$({get:()=>c.modelValue,set:D=>o("update:modelValue",D)}),_=()=>{var D;(D=a.value)==null||D.click()},V=D=>E(this,null,function*(){const S=Array.from(D.target.files);yield w(S),D.target.value=""}),w=D=>E(this,null,function*(){const S=[];for(const I of D){if(I.size>c.maxSize){alert(`File ${I.name} exceeds maximum size of ${pe(c.maxSize)}`);continue}let W=null;I.type.startsWith("image/")&&(W=yield i(I)),S.push({file:I,name:I.name,size:I.size,type:I.type,preview:W,uploadDate:new Date().toISOString()})}if(S.length>0){const I=c.multiple?[...p.value,...S]:S;o("update:modelValue",I),yield l(S)}}),i=D=>new Promise(S=>{const I=new FileReader;I.onload=W=>S(W.target.result),I.onerror=()=>S(null),I.readAsDataURL(D)}),l=D=>E(this,null,function*(){v.value=!0,d.value=0;try{for(let S=0;S<D.length;S++){const I=D[S],W=setInterval(()=>{d.value=Math.min(d.value+10,90)},100);yield new Promise(ye=>{o("upload",I,ye)}),clearInterval(W),d.value=(S+1)/D.length*100}}catch(S){console.error("Upload error:",S),alert("Failed to upload files. Please try again.")}finally{v.value=!1,d.value=0}}),s=D=>{const S=[...p.value];S.splice(D,1),o("update:modelValue",S)},h=()=>E(this,null,function*(){try{m.value=!0,yield P()}catch(D){console.error("Camera error:",D),alert("Unable to access camera. Please check permissions or upload a file instead."),m.value=!1}}),P=()=>E(this,null,function*(){try{const D=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});g.value=D,x.value&&(x.value.srcObject=D)}catch(D){throw D}}),j=()=>{const D=x.value,S=document.createElement("canvas");S.width=D.videoWidth,S.height=D.videoHeight,S.getContext("2d").drawImage(D,0,0,S.width,S.height),f.value=S.toDataURL("image/jpeg",.9)},N=()=>{f.value=null},H=()=>E(this,null,function*(){if(!f.value)return;const D=yield(yield fetch(f.value)).blob(),S=new File([D],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield w([S]),te()}),te=()=>{g.value&&(g.value.getTracks().forEach(D=>D.stop()),g.value=null),f.value=null,m.value=!1},pe=D=>{if(D===0)return"0 Bytes";const S=1024,I=["Bytes","KB","MB","GB"],W=Math.floor(Math.log(D)/Math.log(S));return Math.round(D/Math.pow(S,W)*100)/100+" "+I[W]};return(D,S)=>(n(),u("div",Zs,[e("label",Xs,[e("span",el,[M(y(t.label)+" ",1),t.required?(n(),u("span",tl,"*")):b("",!0)]),t.helpText?(n(),u("p",sl,y(t.helpText),1)):b("",!0)]),e("div",ll,[t.allowCamera?(n(),u("button",{key:0,onClick:h,type:"button",class:B(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":v.value}]),disabled:v.value},[...S[0]||(S[0]=[ce('<div class="text-center" data-v-2bd160e5><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2bd160e5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2bd160e5></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2bd160e5></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2bd160e5>Take Photo</p><p class="text-xs text-gray-500" data-v-2bd160e5>Use camera</p></div>',1)])],10,ol)):b("",!0),e("button",{onClick:_,type:"button",class:B(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":v.value}]),disabled:v.value},[e("div",nl,[S[1]||(S[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),S[2]||(S[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",rl,"Browse "+y(t.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:a,type:"file",accept:t.accept,multiple:t.multiple,onChange:V,class:"hidden"},null,40,il)],10,al)]),v.value?(n(),u("div",ul,[e("div",dl,[S[4]||(S[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",cl,[S[3]||(S[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",ml,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:Ye({width:d.value+"%"})},null,4)])])])])):b("",!0),p.value.length>0?(n(),u("div",pl,[A(pt,{name:"list"},{default:F(()=>[(n(!0),u(G,null,K(p.value,(I,W)=>(n(),u("div",{key:I.name+W,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",fl,[e("div",vl,[I.preview?(n(),u("div",gl,[e("img",{src:I.preview,alt:I.name,class:"w-full h-full object-cover"},null,8,yl)])):(n(),u("div",bl,[...S[5]||(S[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",xl,[e("p",hl,y(I.name),1),e("p",_l,y(pe(I.size)),1)]),e("button",{onClick:ye=>s(W),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...S[6]||(S[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,wl)])]))),128))]),_:1})])):b("",!0),(n(),O(vt,{to:"body"},[m.value?(n(),u("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:ft(te,["self"])},[e("div",kl,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[S[8]||(S[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:te,class:"text-gray-400 hover:text-white transition-colors"},[...S[7]||(S[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Cl,[f.value?(n(),u("img",{key:1,src:f.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,Sl)):(n(),u("video",{key:0,ref_key:"videoElement",ref:x,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),f.value?b("",!0):(n(),u("div",$l,[e("div",Vl,[(n(),u(G,null,K(9,I=>e("div",{key:I,class:"border border-white/20"})),64))])]))]),e("div",ql,[f.value?(n(),u("div",Tl,[e("button",{onClick:N,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:H,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(n(),u("div",Dl,[e("button",{onClick:j,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...S[9]||(S[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):b("",!0)]))]))}},Pl=me(Ml,[["__scopeId","data-v-2bd160e5"]]),Il={class:"space-y-4"},Bl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jl={class:"block text-sm font-medium text-gray-700 mb-2"},Fl={key:0,class:"text-red-500"},Rl={class:"relative"},Al=["required"],zl=["value"],Nl={class:"block text-sm font-medium text-gray-700 mb-2"},Ll={key:0,class:"text-red-500"},El={class:"relative"},Ol=["required","disabled"],Ul=["value"],Hl={key:0,class:"mt-1 text-xs text-gray-500"},Gl={class:"block text-sm font-medium text-gray-700 mb-2"},Yl={key:0,class:"text-red-500"},Wl={class:"relative"},Jl=["required","disabled"],Kl=["value"],Ql={key:0,class:"mt-1 text-xs text-gray-500"},Zl={class:"block text-sm font-medium text-gray-700 mb-2"},Xl={key:0,class:"text-red-500"},eo=["required"],to={class:"md:col-span-2"},so={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},lo={class:"flex items-start"},oo={class:"flex-1"},ao={class:"text-sm text-green-700 mt-1"},no={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:r}){const c=t,o=r,a=T({street:"",barangay:"",municipality:"",province:"",zipCode:""}),x=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],m={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Paraaque City","Las Pias City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},f={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},g=$(()=>a.value.province?m[a.value.province]||[]:[]),v=$(()=>a.value.municipality?f[a.value.municipality]||["Other - Please specify in Street field"]:[]),d=$(()=>{const w=[];return a.value.street&&w.push(a.value.street),a.value.barangay&&w.push(`Brgy. ${a.value.barangay}`),a.value.municipality&&w.push(a.value.municipality),a.value.province&&w.push(a.value.province),a.value.zipCode&&w.push(a.value.zipCode),w.length>0?w.join(", "):""}),p=()=>{a.value.municipality="",a.value.barangay="",V()},_=()=>{a.value.barangay="",V()},V=()=>{o("update:modelValue",{full_address:d.value,address_line:a.value.street,barangay:a.value.barangay,municipality:a.value.municipality,province:a.value.province,zip_code:a.value.zipCode})};return se(()=>{var w;if(c.modelValue)if(typeof c.modelValue=="string"){const i=c.modelValue.split(",").map(l=>l.trim());i.length>=3&&(a.value.street=i[0]||"",a.value.barangay=((w=i[1])==null?void 0:w.replace("Brgy. ",""))||"",a.value.municipality=i[2]||"",a.value.province=i[3]||"",a.value.zipCode=i[4]||"")}else typeof c.modelValue=="object"&&(a.value=X(X({},a.value),c.modelValue))}),de(()=>c.modelValue,w=>{w&&typeof w=="object"&&(a.value=X(X({},a.value),w))}),(w,i)=>(n(),u("div",Il,[i[18]||(i[18]=ce('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",Bl,[e("div",null,[e("label",jl,[i[5]||(i[5]=M(" Province ",-1)),t.required?(n(),u("span",Fl,"*")):b("",!0)]),e("div",Rl,[Q(e("select",{"onUpdate:modelValue":i[0]||(i[0]=l=>a.value.province=l),onChange:p,required:t.required,class:B(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.province}])},[i[6]||(i[6]=e("option",{value:""},"Select Province",-1)),(n(),u(G,null,K(x,l=>e("option",{key:l,value:l},y(l),9,zl)),64))],42,Al),[[we,a.value.province]]),i[7]||(i[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",Nl,[i[8]||(i[8]=M(" Municipality/City ",-1)),t.required?(n(),u("span",Ll,"*")):b("",!0)]),e("div",El,[Q(e("select",{"onUpdate:modelValue":i[1]||(i[1]=l=>a.value.municipality=l),onChange:_,required:t.required,disabled:!a.value.province,class:B(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.municipality}])},[i[9]||(i[9]=e("option",{value:""},"Select Municipality/City",-1)),(n(!0),u(G,null,K(g.value,l=>(n(),u("option",{key:l,value:l},y(l),9,Ul))),128))],42,Ol),[[we,a.value.municipality]]),i[10]||(i[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.province?b("",!0):(n(),u("p",Hl,"Select province first"))]),e("div",null,[e("label",Gl,[i[11]||(i[11]=M(" Barangay ",-1)),t.required?(n(),u("span",Yl,"*")):b("",!0)]),e("div",Wl,[Q(e("select",{"onUpdate:modelValue":i[2]||(i[2]=l=>a.value.barangay=l),onChange:V,required:t.required,disabled:!a.value.municipality,class:B(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.barangay}])},[i[12]||(i[12]=e("option",{value:""},"Select Barangay",-1)),(n(!0),u(G,null,K(v.value,l=>(n(),u("option",{key:l,value:l},y(l),9,Kl))),128))],42,Jl),[[we,a.value.barangay]]),i[13]||(i[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.municipality?b("",!0):(n(),u("p",Ql,"Select municipality first"))]),e("div",null,[e("label",Zl,[i[14]||(i[14]=M(" Street / House No. ",-1)),t.required?(n(),u("span",Xl,"*")):b("",!0)]),Q(e("input",{"onUpdate:modelValue":i[3]||(i[3]=l=>a.value.street=l),onInput:V,type:"text",required:t.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:B(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.street}])},null,42,eo),[[oe,a.value.street]])]),e("div",to,[i[15]||(i[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[M(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),Q(e("input",{"onUpdate:modelValue":i[4]||(i[4]=l=>a.value.zipCode=l),onInput:V,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[oe,a.value.zipCode]])])]),d.value?(n(),u("div",so,[e("div",lo,[i[17]||(i[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",oo,[i[16]||(i[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",ao,y(d.value),1)])])])):b("",!0)]))}},ro={class:"inline-block relative group"},io={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:t=>["top","bottom","left","right"].includes(t)}},setup(t){const r=t,c=T(!1),o=$(()=>{switch(r.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),a=$(()=>{switch(r.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(x,m)=>(n(),u("div",ro,[Ue(x.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:m[0]||(m[0]=f=>c.value=!0),onMouseleave:m[1]||(m[1]=f=>c.value=!1)},[...m[2]||(m[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),A(gt,{name:"tooltip"},{default:F(()=>[c.value?(n(),u("div",{key:0,class:B(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",o.value]),style:{"max-width":"300px","white-space":"normal"}},[Ue(x.$slots,"default",{},()=>[M(y(t.text),1)],!0),e("div",{class:B(["tooltip-arrow",a.value])},null,2)],2)):b("",!0)]),_:3})]))}},_e=me(io,[["__scopeId","data-v-1fa5e90e"]]);function uo(t,r){if(!t||t.trim()==="")return!0;let c=t.trim();c.startsWith("eval:")&&(c=c.substring(5).trim());try{return new Function("formData",`
      'use strict';
      try {
        return Boolean(${c});
      } catch (e) {
        console.warn('[Conditional Logic] Evaluation error:', e.message);
        return false;
      }
    `)(r)}catch(o){return console.error("[Conditional Logic] Failed to evaluate expression:",t,o),!0}}function co(t,r){return t?t.depends_on?uo(t.depends_on,r):!0:!1}const mo={class:"space-y-6"},po={key:0,class:"form-group"},fo={key:1,class:"form-group"},vo=["for"],go={key:0,class:"text-red-500 ml-1"},yo={class:"relative"},bo=["id","name","onUpdate:modelValue","onBlur","required","placeholder"],xo={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},ho=["innerHTML"],_o={key:0,class:"mt-1 text-xs text-red-600"},wo={key:1,class:"mt-1 text-xs text-gray-500"},ko={key:2,class:"form-group"},Co=["for"],So={key:0,class:"text-red-500 ml-1"},$o={class:"relative"},Vo=["id","name","onUpdate:modelValue","onBlur","required"],qo={value:""},Do=["value"],To={key:0,class:"mt-1 text-xs text-red-600"},Mo={key:1,class:"mt-1 text-xs text-gray-500"},Po={key:3,class:"form-group"},Io={class:"flex items-center h-5"},Bo=["id","name","onUpdate:modelValue","onChange","required"],jo={class:"ml-3 text-sm"},Fo=["for"],Ro={key:0,class:"text-red-500 ml-1"},Ao={key:0,class:"mt-1 text-xs text-red-600"},zo={key:1,class:"mt-1 text-xs text-gray-500"},No={key:4,class:"form-group"},Lo=["for"],Eo={key:0,class:"text-red-500 ml-1"},Oo=["id","name","onUpdate:modelValue","onBlur","required","placeholder"],Uo={key:0,class:"mt-1 text-xs text-red-600"},Ho={key:1,class:"mt-1 text-xs text-gray-500"},Go={key:5,class:"form-group"},Yo=["for"],Wo={key:0,class:"text-red-500 ml-1"},Jo={class:"relative"},Ko=["id","name","onUpdate:modelValue","onBlur","required"],Qo={key:0,class:"mt-1 text-xs text-red-600"},Zo={key:1,class:"mt-1 text-xs text-gray-500"},Xo={key:6,class:"form-group"},ea=["for"],ta={key:0,class:"text-red-500 ml-1"},sa={class:"relative"},la=["id","name","onUpdate:modelValue","required","placeholder"],oa={key:0,class:"mt-1 text-xs text-gray-500"},aa={key:7,class:"form-group"},na=["for"],ra={key:0,class:"text-red-500 ml-1"},ia={class:"relative"},ua=["id","name","onUpdate:modelValue","required","placeholder"],da={key:0,class:"mt-1 text-xs text-gray-500"},ca={key:8,class:"form-group"},ma=["for"],pa={key:0,class:"text-red-500 ml-1"},fa={class:"relative"},va=["id","name","onUpdate:modelValue","onBlur","required"],ga={key:0,class:"mt-1 text-xs text-red-600"},ya={key:1,class:"mt-1 text-xs text-gray-500"},ba={key:9,class:"form-group"},xa={key:10,class:"form-group"},ha={class:"text-sm text-gray-500 italic"},_a={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:r}){const c=t,o=r,a=$({get:()=>c.modelValue,set:i=>o("update:modelValue",i)}),x=$(()=>c.fields.filter(i=>{var j;const l=((j=i.parent_section_code)==null?void 0:j.toLowerCase())||"",h=["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(l),P=["barangay","municipality","province","city","region","zip_code","postal_code"];return h&&c.fields.some(H=>H.parent_section_code===i.parent_section_code&&H.field_name==="address_line")&&P.includes(i.field_name)?!1:co(i,a.value)})),m=i=>{var h;const l=((h=i.parent_section_code)==null?void 0:h.toLowerCase())||"";return["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(l)&&i.field_name==="address_line"&&i.field_type==="Data"},f=i=>{var s;if(i.placeholder)return i.placeholder;const l=((s=i.field_label)==null?void 0:s.toLowerCase())||"";return l.includes("name")?"e.g., Juan Dela Cruz":l.includes("email")?"e.g., juan@example.com":l.includes("phone")||l.includes("mobile")||l.includes("contact")?"e.g., 0917 123 4567":l.includes("age")?"e.g., 25":l.includes("occupation")?"e.g., Teacher":l.includes("income")||l.includes("salary")?"e.g., 15000":`Enter ${i.field_label}`},g=i=>{var s;const l=((s=i.field_label)==null?void 0:s.toLowerCase())||"";return l.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':l.includes("phone")||l.includes("mobile")||l.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':l.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},v=i=>i?i.split(`
`).map(l=>l.trim()).filter(Boolean):[],{errors:d,validateConfigField:p,clearFieldError:_}=Be(),V=i=>{if(!i.validation&&!i.is_required){_(i.field_name);return}const l=a.value[i.field_name];p(i.field_name,l,i,a.value)},w=i=>d.value[i]||"";return de(()=>c.fields,i=>{i.forEach(l=>{l.default_value&&!a.value[l.field_name]&&(l.default_value==="Today"&&l.field_type==="Date"?a.value[l.field_name]=new Date().toISOString().split("T")[0]:a.value[l.field_name]=l.default_value)})},{immediate:!0}),(i,l)=>(n(),u("div",mo,[(n(!0),u(G,null,K(x.value,s=>(n(),u("div",{key:s.field_name,class:"field-wrapper"},[m(s)?(n(),u("div",po,[A(no,{modelValue:a.value[s.field_name],"onUpdate:modelValue":h=>a.value[s.field_name]=h,required:s.is_required},null,8,["modelValue","onUpdate:modelValue","required"])])):s.field_type==="Data"?(n(),u("div",fo,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,y(s.field_label),1),s.is_required?(n(),u("span",go,"*")):b("",!0),s.help_text||s.description?(n(),O(_e,{key:1,text:s.help_text||s.description},null,8,["text"])):b("",!0)],8,vo),e("div",yo,[Q(e("input",{id:s.field_name,name:s.field_name,type:"text","onUpdate:modelValue":h=>a.value[s.field_name]=h,onBlur:h=>V(s),required:s.is_required,class:B(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}]),placeholder:f(s)},null,42,bo),[[oe,a.value[s.field_name]]]),g(s)?(n(),u("div",xo,[e("span",{innerHTML:g(s),class:"text-gray-400"},null,8,ho)])):b("",!0)]),w(s.field_name)?(n(),u("p",_o,y(w(s.field_name)),1)):s.description?(n(),u("p",wo,y(s.description),1)):b("",!0)])):s.field_type==="Select"?(n(),u("div",ko,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,y(s.field_label),1),s.is_required?(n(),u("span",So,"*")):b("",!0),s.help_text||s.description?(n(),O(_e,{key:1,text:s.help_text||s.description},null,8,["text"])):b("",!0)],8,Co),e("div",$o,[Q(e("select",{id:s.field_name,name:s.field_name,"onUpdate:modelValue":h=>a.value[s.field_name]=h,onBlur:h=>V(s),required:s.is_required,class:B(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}])},[e("option",qo,"Select "+y(s.field_label),1),(n(!0),u(G,null,K(v(s.options),h=>(n(),u("option",{key:h,value:h},y(h),9,Do))),128))],42,Vo),[[we,a.value[s.field_name]]]),l[0]||(l[0]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),w(s.field_name)?(n(),u("p",To,y(w(s.field_name)),1)):s.description?(n(),u("p",Mo,y(s.description),1)):b("",!0)])):s.field_type==="Check"?(n(),u("div",Po,[e("div",{class:B(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!w(s.field_name),"border-red-500 bg-red-50":w(s.field_name)}])},[e("div",Io,[Q(e("input",{id:s.field_name,name:s.field_name,type:"checkbox","onUpdate:modelValue":h=>a.value[s.field_name]=h,onChange:h=>V(s),required:s.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,Bo),[[yt,a.value[s.field_name]]])]),e("div",jo,[e("label",{for:s.field_name,class:"font-medium text-gray-700 cursor-pointer"},[M(y(s.field_label)+" ",1),s.is_required?(n(),u("span",Ro,"*")):b("",!0)],8,Fo),w(s.field_name)?(n(),u("p",Ao,y(w(s.field_name)),1)):s.description?(n(),u("p",zo,y(s.description),1)):b("",!0)])],2)])):s.field_type==="Text"?(n(),u("div",No,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[M(y(s.field_label)+" ",1),s.is_required?(n(),u("span",Eo,"*")):b("",!0)],8,Lo),Q(e("textarea",{id:s.field_name,name:s.field_name,"onUpdate:modelValue":h=>a.value[s.field_name]=h,onBlur:h=>V(s),required:s.is_required,rows:"4",class:B(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}]),placeholder:f(s)},null,42,Oo),[[oe,a.value[s.field_name]]]),w(s.field_name)?(n(),u("p",Uo,y(w(s.field_name)),1)):s.description?(n(),u("p",Ho,y(s.description),1)):b("",!0)])):s.field_type==="Date"?(n(),u("div",Go,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,y(s.field_label),1),s.is_required?(n(),u("span",Wo,"*")):b("",!0),s.help_text||s.description?(n(),O(_e,{key:1,text:s.help_text||s.description},null,8,["text"])):b("",!0)],8,Yo),e("div",Jo,[Q(e("input",{id:s.field_name,name:s.field_name,type:"date","onUpdate:modelValue":h=>a.value[s.field_name]=h,onBlur:h=>V(s),required:s.is_required,class:B(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}])},null,42,Ko),[[oe,a.value[s.field_name]]]),l[1]||(l[1]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),w(s.field_name)?(n(),u("p",Qo,y(w(s.field_name)),1)):s.description?(n(),u("p",Zo,y(s.description),1)):b("",!0)])):s.field_type==="Int"?(n(),u("div",Xo,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,y(s.field_label),1),s.is_required?(n(),u("span",ta,"*")):b("",!0),s.help_text||s.description?(n(),O(_e,{key:1,text:s.help_text||s.description},null,8,["text"])):b("",!0)],8,ea),e("div",sa,[Q(e("input",{id:s.field_name,name:s.field_name,type:"number","onUpdate:modelValue":h=>a.value[s.field_name]=h,required:s.is_required,step:"1",class:B(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]}]),placeholder:f(s)},null,10,la),[[oe,a.value[s.field_name],void 0,{number:!0}]]),l[2]||(l[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),s.description?(n(),u("p",oa,y(s.description),1)):b("",!0)])):s.field_type==="Float"?(n(),u("div",aa,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[M(y(s.field_label)+" ",1),s.is_required?(n(),u("span",ra,"*")):b("",!0)],8,na),e("div",ia,[Q(e("input",{id:s.field_name,name:s.field_name,type:"number","onUpdate:modelValue":h=>a.value[s.field_name]=h,required:s.is_required,step:"0.01",class:B(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]}]),placeholder:f(s)},null,10,ua),[[oe,a.value[s.field_name],void 0,{number:!0}]]),l[3]||(l[3]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),s.description?(n(),u("p",da,y(s.description),1)):b("",!0)])):s.field_type==="Currency"?(n(),u("div",ca,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[M(y(s.field_label)+" ",1),s.is_required?(n(),u("span",pa,"*")):b("",!0)],8,ma),e("div",fa,[l[4]||(l[4]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-base font-medium"},"")],-1)),Q(e("input",{id:s.field_name,name:s.field_name,type:"number","onUpdate:modelValue":h=>a.value[s.field_name]=h,onBlur:h=>V(s),required:s.is_required,step:"0.01",class:B(["block w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}]),placeholder:"0.00"},null,42,va),[[oe,a.value[s.field_name],void 0,{number:!0}]])]),w(s.field_name)?(n(),u("p",ga,y(w(s.field_name)),1)):s.description?(n(),u("p",ya,y(s.description),1)):b("",!0)])):s.field_type==="Attach"||s.field_type==="Attach Image"?(n(),u("div",ba,[A(Pl,{label:s.field_label,required:s.is_required,accept:s.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:a.value[s.field_name],"onUpdate:modelValue":h=>a.value[s.field_name]=h},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):(n(),u("div",xa,[e("div",ha,' Field type "'+y(s.field_type)+'" not yet supported for '+y(s.field_label),1)]))]))),128))]))}},Ie=me(_a,[["__scopeId","data-v-2060c3f5"]]),wa={class:"dynamic-step max-w-4xl mx-auto"},ka={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},Ca={class:"flex items-start"},Sa={class:"ml-4 flex-1"},$a={class:"text-2xl font-bold text-blue-900"},Va={key:0,class:"mt-2 text-sm text-blue-700"},qa={class:"space-y-6"},Da={class:"mb-4 pb-3 border-b-2 border-gray-200"},Ta={class:"flex items-center"},Ma={class:"text-lg font-semibold text-gray-900"},Pa={key:0,class:"text-red-500 ml-1"},Ia={key:0,class:"text-sm text-gray-600 mt-0.5"},Ba={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},ja={class:"section-content"},Fa={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},Ra={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:r}){const c=t,o=r,a=$({get:()=>c.modelValue,set:g=>o("update:modelValue",g)}),x=$(()=>c.stepConfig.sections?c.stepConfig.sections:[]),m=g=>[g.section_title],f=()=>{console.log("--- DYNAMIC STEP DATA LOG ---"),console.log("Full Form Data (localData):",JSON.parse(JSON.stringify(a.value))),console.log("-----------------------------"),alert("Data logged to console. Check browser console (F12) for the Full Form Data.")};return de(()=>c.stepConfig,g=>{g.sections&&g.sections.forEach(v=>{v.fields.forEach(d=>{if(d.default_value&&!a.value[d.field_name]){const p=X({},a.value);d.default_value==="Today"&&d.field_type==="Date"?p[d.field_name]=new Date().toISOString().split("T")[0]:p[d.field_name]=d.default_value,o("update:modelValue",p)}})})},{immediate:!0,deep:!0}),(g,v)=>(n(),u("div",wa,[e("div",ka,[e("div",Ca,[v[3]||(v[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Sa,[e("h2",$a,y(t.stepConfig.step_title),1),t.stepDescription?(n(),u("p",Va,y(t.stepDescription),1)):b("",!0)])])]),e("div",qa,[(n(!0),u(G,null,K(x.value,d=>(n(),u("div",{key:d.section_code,class:"section"},[e("div",Da,[e("div",Ta,[v[4]||(v[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",Ma,[M(y(d.section_title)+" ",1),d.is_required?(n(),u("span",Pa,"*")):b("",!0)]),d.section_description?(n(),u("p",Ia,y(d.section_description),1)):b("",!0)])]),d.is_required?(n(),u("div",Ba,[...v[5]||(v[5]=[M(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),M(" are required ",-1)])])):b("",!0)]),e("div",ja,[d.section_type==="Tab"?(n(),O(q(Mt),{key:0},{default:F(()=>[A(q(Pt),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:F(()=>[(n(!0),u(G,null,K(m(d),(p,_)=>(n(),O(q(It),{key:_,class:B(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",g.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:F(({selected:V})=>[M(y(p),1)]),_:2},1032,["class"]))),128))]),_:2},1024),A(q(Bt),null,{default:F(()=>[(n(!0),u(G,null,K(m(d),(p,_)=>(n(),O(q(jt),{key:_},{default:F(()=>[A(Ie,{fields:d.fields,modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=V=>a.value=V)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):d.section_type==="Accordion"?(n(),O(q(St),{key:1},{default:F(({open:p})=>[A(q($t),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:F(()=>[e("span",null,y(d.section_title),1),A(q(Qs),{class:B([p?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),A(q(Vt),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:F(()=>[A(Ie,{fields:d.fields,modelValue:a.value,"onUpdate:modelValue":v[1]||(v[1]=_=>a.value=_)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(n(),u("div",Fa,[A(Ie,{fields:d.fields,modelValue:a.value,"onUpdate:modelValue":v[2]||(v[2]=p=>a.value=p)},null,8,["fields","modelValue"])]))])]))),128))]),e("div",{class:"mt-8 pt-4 border-t border-gray-200"},[e("button",{onClick:f,class:"px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition"},"  Log Current Data (Debug) "),v[6]||(v[6]=e("p",{class:"text-xs text-gray-500 mt-2"},"Use this button to check if data is being saved correctly to localData/formData.",-1))])]))}},Aa=me(Ra,[["__scopeId","data-v-1145db6a"]]),za={class:"px-4 sm:px-0"},Na={class:"space-y-4 sm:space-y-6"},La={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6"},Ea={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-0"},Oa={class:"text-base sm:text-lg font-semibold text-blue-900"},Ua={class:"text-xs sm:text-sm text-blue-700 mt-1"},Ha={class:"sm:text-right"},Ga={class:"text-xl sm:text-2xl font-bold text-blue-900"},Ya={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Wa={class:"p-4 sm:p-6 space-y-3"},Ja={class:"grid md:grid-cols-2 gap-4"},Ka={class:"font-medium"},Qa={class:"font-medium"},Za={class:"font-medium"},Xa={key:0},en={class:"font-medium"},tn={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},sn={class:"p-4 sm:p-6"},ln={key:0,class:"space-y-2"},on={class:"font-medium"},an={key:0},nn={class:"font-medium"},rn={key:1,class:"text-gray-500"},un={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},dn={class:"p-4 sm:p-6 space-y-3"},cn={class:"font-medium"},mn={class:"font-medium"},pn={class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},fn={class:"font-semibold text-gray-900 text-sm sm:text-base"},vn={class:"p-4 sm:p-6 space-y-4"},gn={key:0,class:"text-sm font-medium text-gray-700 mb-2"},yn={class:"grid md:grid-cols-2 gap-4"},bn={class:"text-sm text-gray-500"},xn={class:"font-medium"},hn={key:0,class:"text-gray-500 text-sm"},_n={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},wn={class:"p-4 sm:p-6"},kn={class:"space-y-3"},Cn={class:"mt-2 flex flex-wrap gap-2"},Sn={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},$n={key:1,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},Vn={key:2,class:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium"},qn={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium"},Dn={key:4,class:"px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium"},Tn={key:5,class:"text-gray-500"},Mn={class:"mt-1 inline-flex items-center"},Pn={key:0},In={class:"font-medium break-words"},Bn={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},jn={class:"p-4 sm:p-6"},Fn={class:"flex flex-wrap gap-2"},Rn={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},An={key:1,class:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},zn={key:2,class:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},Nn={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},Ln={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},En={class:"p-4 sm:p-6"},On={class:"space-y-3"},Un={class:"font-medium"},Hn={key:0},Gn={class:"text-sm mt-1 line-clamp-3"},Yn={key:1},Wn={class:"text-sm mt-1 line-clamp-3"},Jn={class:"flex items-center gap-2"},Kn={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Qn={class:"p-4 sm:p-6"},Zn={class:"space-y-4"},Xn={key:0},er=["innerHTML"],tr={key:1},sr=["innerHTML"],lr={key:2},or={class:"text-sm mt-1 line-clamp-3"},ar={key:3},nr={class:"text-sm mt-1 space-y-1 list-disc list-inside"},rr={key:0},ir={key:1},ur={key:2},dr={key:4},cr=["innerHTML"],mr={key:5,class:"text-gray-500 text-sm"},pr={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},fr={class:"p-4 sm:p-6"},vr={class:"space-y-2"},gr={class:"flex items-start gap-2"},yr={class:"flex items-start gap-2"},br={class:"flex items-start gap-2"},xr={key:0,class:"mt-4 pt-4 border-t border-gray-200"},hr={class:"font-medium"},_r={key:0,class:"text-sm text-gray-500"},wr={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},kr={__name:"ReviewStep",props:{modelValue:{type:Object,required:!0},councilName:{type:String,default:"Council"},requestTypeName:{type:String,default:"Application"},applicationFee:{type:String,default:"TBD"},isResourceConsent:{type:Boolean,default:!1},stepConfigs:{type:Array,default:()=>[]},usesConfigurableSteps:{type:Boolean,default:!1},requestTypeDetails:{type:Object,default:null}},setup(t){const r=t,c=$(()=>!r.usesConfigurableSteps||!r.stepConfigs?[]:r.stepConfigs.filter(i=>i.show_on_review)),o=$(()=>r.isResourceConsent?!0:!!(r.modelValue.property||r.modelValue.property_address)),a=i=>{if(!i.sections)return!1;for(const l of i.sections)if(l.show_on_review){for(const s of l.fields)if(s.show_on_review&&r.modelValue[s.field_name])return!0}return!1},x=(i,l)=>{if(l==null||l==="")return"Not provided";if(i.field_type==="Check")return l?"Yes":"No";if(i.field_type==="Date"&&l)try{return new Date(l).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(s){return l}return i.field_type==="Currency"&&l?`${Number(l).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`:i.field_type==="Select"?l:i.field_type==="Attach"||i.field_type==="Attach Image"?l?" File attached":"Not provided":l},m=$(()=>!!(r.modelValue.consent_type_land_use||r.modelValue.consent_type_subdivision||r.modelValue.consent_type_discharge||r.modelValue.consent_type_water||r.modelValue.consent_type_coastal)),f=$(()=>{const i=r.modelValue.activity_status_type;return i==="Permitted"?"bg-green-100 text-green-800":i==="Controlled"?"bg-blue-100 text-blue-800":i==="Restricted Discretionary"?"bg-yellow-100 text-yellow-800":i==="Discretionary"?"bg-orange-100 text-orange-800":i==="Non-Complying"?"bg-red-100 text-red-800":i==="Prohibited"?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}),g=$(()=>!!(r.modelValue.hazard_flooding||r.modelValue.hazard_earthquake||r.modelValue.hazard_landslip||r.modelValue.hazard_coastal)),v=$(()=>!!(r.modelValue.consultation_undertaken||r.modelValue.consultation_summary||r.modelValue.affected_parties_details||r.modelValue.written_approvals_obtained)),d=$(()=>!!(r.modelValue.activity_description||r.modelValue.aee_full_assessment||r.modelValue.positive_effects_description||r.modelValue.effects_visual_amenity||r.modelValue.effects_traffic_parking||r.modelValue.effects_noise||r.modelValue.mitigation_measures||r.modelValue.aee_activity_description||r.modelValue.aee_existing_environment||r.modelValue.assessment_of_effects||r.modelValue.aee_document)),p=i=>{if(!i)return"";const l=document.createElement("div");return l.innerHTML=i,l.textContent||l.innerText||""},_=(i,l)=>{if(!i)return"";const s=p(i);return s.length<=l?s:s.substring(0,l)+"..."},V=i=>{if(!i)return"";try{return new Date(i).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(l){return i}},w=$(()=>{const i=!!(r.modelValue.council&&r.modelValue.request_type&&r.modelValue.requester_name&&r.modelValue.requester_email&&r.modelValue.property_address&&r.modelValue.delivery_preference);if(r.isResourceConsent){const l=!!(m.value&&r.modelValue.activity_status_type&&r.modelValue.activity_description&&r.modelValue.aee_full_assessment&&r.modelValue.declaration_accuracy&&r.modelValue.declaration_authority&&r.modelValue.declaration_acknowledgment);return i&&l}return i});return(i,l)=>{var s;return n(),u("div",za,[l[39]||(l[39]=e("h2",{class:"text-xl sm:text-2xl font-bold text-gray-900 mb-2"},"Review & Submit",-1)),l[40]||(l[40]=e("p",{class:"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8"},"Review your application details before submitting",-1)),e("div",Na,[e("div",La,[e("div",Ea,[e("div",null,[e("h3",Oa,y(t.requestTypeName),1),e("p",Ua,y(t.councilName),1)]),e("div",Ha,[l[0]||(l[0]=e("div",{class:"text-xs sm:text-sm text-blue-600 font-medium"},"Application Fee",-1)),e("div",Ga,y(t.applicationFee),1)])])]),e("div",Ya,[l[5]||(l[5]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Applicant Details")],-1)),e("div",Wa,[e("div",Ja,[e("div",null,[l[1]||(l[1]=e("span",{class:"text-sm text-gray-500"},"Name:",-1)),e("p",Ka,y(t.modelValue.requester_name||"Not provided"),1)]),e("div",null,[l[2]||(l[2]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("p",Qa,y(t.modelValue.requester_email||"Not provided"),1)]),e("div",null,[l[3]||(l[3]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("p",Za,y(t.modelValue.requester_phone||"Not provided"),1)]),t.modelValue.applicant_company?(n(),u("div",Xa,[l[4]||(l[4]=e("span",{class:"text-sm text-gray-500"},"Company:",-1)),e("p",en,y(t.modelValue.applicant_company),1)])):b("",!0)])])]),o.value?(n(),u("div",tn,[l[8]||(l[8]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Property Details")],-1)),e("div",sn,[t.modelValue.property_address?(n(),u("div",ln,[e("div",null,[l[6]||(l[6]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",on,y(t.modelValue.property_address),1)]),t.modelValue.legal_description?(n(),u("div",an,[l[7]||(l[7]=e("span",{class:"text-sm text-gray-500"},"Legal Description:",-1)),e("p",nn,y(t.modelValue.legal_description),1)])):b("",!0)])):(n(),u("p",rn,"No property selected"))])])):b("",!0),(s=t.requestTypeDetails)!=null&&s.collect_payment?(n(),u("div",un,[l[11]||(l[11]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Delivery & Payment")],-1)),e("div",dn,[e("div",null,[l[9]||(l[9]=e("span",{class:"text-sm text-gray-500"},"Delivery Preference:",-1)),e("p",cn,y(t.modelValue.delivery_preference||"Not selected"),1)]),e("div",null,[l[10]||(l[10]=e("span",{class:"text-sm text-gray-500"},"Invoice To:",-1)),e("p",mn,y(t.modelValue.invoice_to||"Not specified"),1)])])])):b("",!0),t.usesConfigurableSteps&&c.value.length>0?(n(!0),u(G,{key:2},K(c.value,h=>(n(),u("div",{key:h.step_code,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},[e("div",pn,[e("h3",fn,y(h.step_title),1)]),e("div",vn,[(n(!0),u(G,null,K(h.sections.filter(P=>P.show_on_review),P=>(n(),u("div",{key:P.section_code},[P.section_title?(n(),u("h4",gn,y(P.section_title),1)):b("",!0),e("div",yn,[(n(!0),u(G,null,K(P.fields.filter(j=>j.show_on_review),j=>(n(),u("div",{key:j.field_name},[e("span",bn,y(j.review_label||j.field_label)+":",1),e("p",xn,y(x(j,t.modelValue[j.field_name])),1)]))),128))])]))),128)),a(h)?b("",!0):(n(),u("p",hn," No information to display for review "))])]))),128)):b("",!0),t.isResourceConsent?(n(),u(G,{key:3},[e("div",_n,[l[15]||(l[15]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consent Types & Activity Status")],-1)),e("div",wn,[e("div",kn,[e("div",null,[l[12]||(l[12]=e("span",{class:"text-sm text-gray-500"},"Consent Types:",-1)),e("div",Cn,[t.modelValue.consent_type_land_use?(n(),u("span",Sn," Land Use Consent ")):b("",!0),t.modelValue.consent_type_subdivision?(n(),u("span",$n," Subdivision Consent ")):b("",!0),t.modelValue.consent_type_discharge?(n(),u("span",Vn," Discharge Permit ")):b("",!0),t.modelValue.consent_type_water?(n(),u("span",qn," Water Permit ")):b("",!0),t.modelValue.consent_type_coastal?(n(),u("span",Dn," Coastal Permit ")):b("",!0),m.value?b("",!0):(n(),u("span",Tn," None selected "))])]),e("div",null,[l[13]||(l[13]=e("span",{class:"text-sm text-gray-500"},"Activity Status:",-1)),e("div",Mn,[e("span",{class:B(["px-3 py-1 rounded-full text-sm font-medium",f.value])},y(t.modelValue.activity_status_type||"Not specified"),3)])]),t.modelValue.activity_title?(n(),u("div",Pn,[l[14]||(l[14]=e("span",{class:"text-sm text-gray-500"},"Activity Title:",-1)),e("p",In,y(t.modelValue.activity_title),1)])):b("",!0)])])]),g.value?(n(),u("div",Bn,[l[20]||(l[20]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Natural Hazards")],-1)),e("div",jn,[e("div",Fn,[t.modelValue.hazard_flooding?(n(),u("span",Rn,[...l[16]||(l[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"})],-1),M(" Flood Hazard ",-1)])])):b("",!0),t.modelValue.hazard_earthquake?(n(),u("span",An,[...l[17]||(l[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),M(" Earthquake/Fault Line ",-1)])])):b("",!0),t.modelValue.hazard_landslip?(n(),u("span",zn,[...l[18]||(l[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1),M(" Landslip/Slope Instability ",-1)])])):b("",!0),t.modelValue.hazard_coastal?(n(),u("span",Nn,[...l[19]||(l[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5"})],-1),M(" Coastal Hazard ",-1)])])):b("",!0)])])])):b("",!0),v.value?(n(),u("div",Ln,[l[25]||(l[25]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consultation & Affected Parties")],-1)),e("div",En,[e("div",On,[e("div",null,[l[21]||(l[21]=e("span",{class:"text-sm text-gray-500"},"Consultation Undertaken:",-1)),e("p",Un,y(t.modelValue.consultation_undertaken||"Not specified"),1)]),t.modelValue.consultation_summary?(n(),u("div",Hn,[l[22]||(l[22]=e("span",{class:"text-sm text-gray-500"},"Consultation Summary:",-1)),e("p",Gn,y(t.modelValue.consultation_summary),1)])):b("",!0),t.modelValue.affected_parties_details?(n(),u("div",Yn,[l[23]||(l[23]=e("span",{class:"text-sm text-gray-500"},"Affected Parties:",-1)),e("p",Wn,y(p(t.modelValue.affected_parties_details)),1)])):b("",!0),e("div",Jn,[(n(),u("svg",{class:B(["w-5 h-5",t.modelValue.written_approvals_obtained?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[24]||(l[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:B(t.modelValue.written_approvals_obtained?"text-gray-900":"text-gray-500")}," Written Approvals "+y(t.modelValue.written_approvals_obtained?"Obtained":"Not Obtained"),3)])])])])):b("",!0),e("div",Kn,[l[31]||(l[31]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Assessment of Environmental Effects")],-1)),e("div",Qn,[e("div",Zn,[t.modelValue.activity_description?(n(),u("div",Xn,[l[26]||(l[26]=e("span",{class:"text-sm text-gray-500"},"Activity Description:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.activity_description},null,8,er)])):b("",!0),t.modelValue.aee_full_assessment?(n(),u("div",tr,[l[27]||(l[27]=e("span",{class:"text-sm text-gray-500"},"Full Assessment:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.aee_full_assessment},null,8,sr)])):b("",!0),t.modelValue.positive_effects_description?(n(),u("div",lr,[l[28]||(l[28]=e("span",{class:"text-sm text-gray-500"},"Positive Effects:",-1)),e("p",or,y(t.modelValue.positive_effects_description),1)])):b("",!0),t.modelValue.effects_visual_amenity||t.modelValue.effects_traffic_parking||t.modelValue.effects_noise?(n(),u("div",ar,[l[29]||(l[29]=e("span",{class:"text-sm text-gray-500"},"Adverse Effects Summary:",-1)),e("ul",nr,[t.modelValue.effects_visual_amenity?(n(),u("li",rr,"Visual/Amenity: "+y(_(t.modelValue.effects_visual_amenity,50)),1)):b("",!0),t.modelValue.effects_traffic_parking?(n(),u("li",ir,"Traffic/Parking: "+y(_(t.modelValue.effects_traffic_parking,50)),1)):b("",!0),t.modelValue.effects_noise?(n(),u("li",ur,"Noise: "+y(_(t.modelValue.effects_noise,50)),1)):b("",!0)])])):b("",!0),t.modelValue.mitigation_measures?(n(),u("div",dr,[l[30]||(l[30]=e("span",{class:"text-sm text-gray-500"},"Mitigation Measures:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.mitigation_measures},null,8,cr)])):b("",!0),d.value?b("",!0):(n(),u("p",mr," AEE not yet completed "))])])]),e("div",pr,[l[36]||(l[36]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Statutory Declarations")],-1)),e("div",fr,[e("div",vr,[e("div",gr,[(n(),u("svg",{class:B(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_accuracy||t.modelValue.declaration_rma_compliance?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[32]||(l[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:B(["text-sm",t.modelValue.declaration_accuracy||t.modelValue.declaration_rma_compliance?"text-gray-900":"text-gray-500"])}," Declaration of Accuracy & RMA Compliance ",2)]),e("div",yr,[(n(),u("svg",{class:B(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_authority||t.modelValue.declaration_authorized?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[33]||(l[33]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:B(["text-sm",t.modelValue.declaration_authority||t.modelValue.declaration_authorized?"text-gray-900":"text-gray-500"])}," Declaration of Authority to Apply ",2)]),e("div",br,[(n(),u("svg",{class:B(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_acknowledgment||t.modelValue.declaration_public_information?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[34]||(l[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:B(["text-sm",t.modelValue.declaration_acknowledgment||t.modelValue.declaration_public_information?"text-gray-900":"text-gray-500"])}," Public Information & Privacy Acknowledgment ",2)]),t.modelValue.requester_signature?(n(),u("div",xr,[l[35]||(l[35]=e("span",{class:"text-sm text-gray-500"},"Signed by:",-1)),e("p",hr,y(t.modelValue.requester_signature),1),t.modelValue.signature_date?(n(),u("p",_r," Date: "+y(V(t.modelValue.signature_date)),1)):b("",!0)])):b("",!0)])])])],64)):b("",!0),l[38]||(l[38]=ce('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6" data-v-43d60ff6><div class="flex items-start gap-2 sm:gap-3" data-v-43d60ff6><svg class="w-5 h-5 sm:w-6 sm:h-6 text-yellow-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-43d60ff6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-43d60ff6></path></svg><div data-v-43d60ff6><h4 class="font-semibold text-yellow-900 text-sm sm:text-base" data-v-43d60ff6>Before You Submit</h4><ul class="mt-2 text-xs sm:text-sm text-yellow-800 space-y-1 list-disc list-inside" data-v-43d60ff6><li data-v-43d60ff6>Review all information carefully for accuracy and completeness</li><li data-v-43d60ff6>Ensure all required fields are completed</li><li data-v-43d60ff6>For Resource Consent applications, verify all statutory declarations are confirmed</li><li data-v-43d60ff6>Once submitted, you cannot edit the application (you may need to withdraw and resubmit)</li></ul></div></div></div>',1)),w.value?b("",!0):(n(),u("div",wr,[...l[37]||(l[37]=[ce('<div class="flex items-start gap-2 sm:gap-3" data-v-43d60ff6><svg class="w-5 h-5 text-red-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-43d60ff6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-43d60ff6></path></svg><div data-v-43d60ff6><h5 class="font-semibold text-red-900 text-xs sm:text-sm" data-v-43d60ff6>Application Incomplete</h5><p class="text-red-800 text-xs sm:text-sm mt-1" data-v-43d60ff6> Please complete all required sections before submitting. Use the Previous button to go back and fill in missing information. </p></div></div>',1)])]))])])}}},Cr=me(kr,[["__scopeId","data-v-43d60ff6"]]),Sr={class:"min-h-screen bg-gray-50"},$r={class:"bg-white shadow-sm border-b border-gray-200"},Vr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},qr={class:"flex items-center justify-between py-4"},Dr={class:"flex items-center gap-2"},Tr={class:"bg-white border-b border-gray-200"},Mr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Pr={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ir={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},Br={key:0},jr={key:1},Fr={key:2},Rr={key:3},Ar={key:5},zr={class:"text-xl font-bold text-red-600"},Nr={class:"list-disc list-inside mt-2 space-y-1 text-sm text-gray-700"},Lr={key:0,class:"mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6 shadow-sm"},Yr={__name:"NewRequest",setup(t){const r=bt(),c=Fe(),o=Ft(),a=xt(),{errors:x}=Be(),m=T(!1),f=T(!1),g=T(!1),v=T(!1),d=T(null),p=T({loading:!1,data:[]}),_=T(null),V=$(()=>{var C;return(C=o.requestTypeConfig)!=null&&C.steps?o.requestTypeConfig.steps.length+4:4}),w=$(()=>{var k;const C=["Council","Type","Process Info"];return(k=o.requestTypeConfig)!=null&&k.steps&&C.push(...o.requestTypeConfig.steps.map(z=>z.step_title)),C.push("Review"),C}),i=$(()=>{var C;return((C=o.requestTypeConfig)==null?void 0:C.steps)&&o.requestTypeConfig.steps.length>0}),l=$(()=>!0),s=$(()=>o.currentStep>=3),h=$(()=>{var C;return o.currentStep>2&&o.currentStep<V.value-1&&((C=o.requestTypeConfig)==null?void 0:C.council_meeting_available)===1});function P(){g.value=!0}function j(C){console.log("Meeting booked:",C)}function N(){const C=o.currentStep;return C>=0&&C<w.value.length?w.value[C]:""}function H(){var z;const C=o.currentStep,k=3;if(C<k||C>=V.value-1)return null;if((z=o.requestTypeConfig)!=null&&z.steps){const Y=C-k;if(Y>=0&&Y<o.requestTypeConfig.steps.length)return o.requestTypeConfig.steps[Y]}return null}function te(){const C=o.formData.council;if(!C)return"";const k=a.councils.find(z=>z.council_code===C);return(k==null?void 0:k.council_name)||C}function pe(C){return E(this,null,function*(){p.value.loading=!0,yield a.loadRequestTypesForCouncil(C),p.value={loading:!1,data:a.requestTypes||[]}})}function D(C){return E(this,null,function*(){if(o.updateField("request_type",C),yield o.initialize(C),_.value=o.requestTypeConfig,!o.requestTypeConfig){console.error("[NewRequest] Failed to load request type config");return}})}function S(){return E(this,null,function*(){var C;if(o.currentStep===0&&!o.formData.council){alert("Please select a council before continuing.");return}if(o.currentStep===1&&!o.formData.request_type){alert("Please select a request type before continuing.");return}if(o.currentStep>=2&&i.value&&currentStepConfig.value){const{validateStep:k}=Be(),{isValid:z,errors:Y}=yield k(o.currentStep,o.formData,currentStepConfig.value);if(!z){console.error("[NewRequest] Validation failed:",Y),showValidationErrors.value=!0,x.value=Y;return}}if(o.currentStep===2&&!o.currentRequestId){if(console.log("[NewRequest] Auto-saving draft after Process Info step..."),console.log("[NewRequest] requestTypeConfig:",o.requestTypeConfig),console.log("[NewRequest] usesConfigurableSteps:",i.value),console.log("[NewRequest] config steps:",(C=o.requestTypeConfig)==null?void 0:C.steps),yield o.saveDraft(),console.log("[NewRequest] Draft saved with ID:",o.currentRequestId),i.value)console.log("[NewRequest] Dynamic steps configured, continuing to next step...");else if(o.currentRequestId){console.log("[NewRequest] No dynamic steps configured, redirecting to detail page..."),c.push(`/request/${o.currentRequestId}`);return}}o.currentRequestId&&(yield o.saveProgress()),o.nextStep()})}function I(){o.previousStep()}function W(){return E(this,null,function*(){try{yield o.saveDraft(),o.currentRequestId?c.push(`/request/${o.currentRequestId}`):m.value=!0}catch(C){console.error("Failed to save draft:",C)}})}function ye(){return E(this,null,function*(){try{yield o.saveDraft(),c.push({name:"Dashboard"})}catch(C){console.error("Failed to save draft:",C)}})}function Ze(){return E(this,null,function*(){try{const C=yield o.submitRequest();d.value=C,v.value=!0}catch(C){console.error("Failed to submit request:",C)}})}function Xe(){c.push("/dashboard")}function et(C){v.value=!1,c.push(`/request/${C}`)}function tt(){v.value=!1;const C=o.formData.council;C?c.push(`/council/${C}/dashboard`):c.push("/dashboard")}return de(()=>o.currentStep,()=>{},{immediate:!0}),de(()=>o.formData.birth_date,C=>{var k;if(C&&((k=o.formData.request_type)!=null&&k.includes("SPISC"))){const z=new Date,Y=new Date(C);let Z=z.getFullYear()-Y.getFullYear();const L=z.getMonth()-Y.getMonth();(L<0||L===0&&z.getDate()<Y.getDate())&&Z--,o.updateField("age",Z),Z<60?x.value.push({field:"birth_date",message:"Applicant must be 60 years or older for SPISC"}):x.value=x.value.filter(De=>De.field!=="birth_date")}}),se(()=>E(this,null,function*(){const C=r.query.type,k=r.query.draft,z=r.query.council,Y=r.query.locked==="true";if(!k){const{getApplicationAutoFill:Z,applyAutoFill:L}=Ot();try{yield Z(),L(o.formData,{overrideExisting:!1})}catch(De){console.warn("[NewRequest] Failed to load user profile for auto-fill:",De)}}if(k&&C){yield o.initialize(C,k),_.value=o.requestTypeConfig;return}z&&!k?(o.updateField("council",z),yield pe(z),Y&&(o.currentStep=1,C&&(yield o.initialize(C),_.value=o.requestTypeConfig,o.updateField("request_type",C),o.currentStep=2))):C&&!k&&!z&&(yield o.initialize(C),_.value=o.requestTypeConfig,o.updateField("request_type",C))})),ht((C,k,z)=>{if(o.isSubmitting||!o.currentRequestId){z();return}o.formData&&Object.keys(o.formData).some(Z=>o.formData[Z]!==void 0&&o.formData[Z]!==null&&o.formData[Z]!=="")&&!confirm("You have unsaved changes. Do you want to leave without saving?")?z(!1):z()}),(C,k)=>{var z,Y,Z;return n(),u("div",Sr,[e("header",$r,[e("div",Vr,[e("div",qr,[e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:Xe,class:"text-gray-500 hover:text-gray-700"},[...k[9]||(k[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),k[10]||(k[10]=e("div",null,[e("h1",{class:"text-xl font-bold text-gray-900"},"New Application")],-1))]),e("div",Dr,[s.value?(n(),O(q(ae),{key:0,onClick:W,variant:"outline",theme:"gray",loading:q(o).isSaving},{default:F(()=>[...k[11]||(k[11]=[M(" Save Draft ",-1)])]),_:1},8,["loading"])):b("",!0),s.value?(n(),O(q(ae),{key:1,onClick:ye,variant:"outline",theme:"gray",loading:q(o).isSaving},{default:F(()=>[...k[12]||(k[12]=[M(" Save and Close ",-1)])]),_:1},8,["loading"])):b("",!0)])])])]),e("div",Tr,[e("div",Mr,[A(Kt,{"current-step":q(o).currentStep,"total-steps":V.value,"step-titles":w.value},null,8,["current-step","total-steps","step-titles"])])]),e("main",Pr,[e("div",Ir,[N()==="Council"?(n(),u("div",Br,[A(_s,{modelValue:q(o).formData,"onUpdate:modelValue":k[0]||(k[0]=L=>q(o).formData=L),onCouncilChange:pe},null,8,["modelValue"])])):N()==="Type"?(n(),u("div",jr,[A(Bs,{modelValue:q(o).formData,"onUpdate:modelValue":k[1]||(k[1]=L=>q(o).formData=L),"request-types":p.value,onTypeSelected:D},null,8,["modelValue","request-types"])])):N()==="Process Info"?(n(),u("div",Fr,[A(Ks,{"request-type-details":_.value,"council-name":te(),modelValue:q(o).formData,"onUpdate:modelValue":k[2]||(k[2]=L=>q(o).formData=L),onContinue:S},null,8,["request-type-details","council-name","modelValue"])])):N()==="Review"?(n(),u("div",Rr,[A(Cr,{modelValue:q(o).formData,"onUpdate:modelValue":k[3]||(k[3]=L=>q(o).formData=L),"request-type-config":q(o).requestTypeConfig},null,8,["modelValue","request-type-config"])])):i.value&&H()?(n(),O(Aa,{key:4,stepConfig:H(),modelValue:q(o).formData,"onUpdate:modelValue":k[4]||(k[4]=L=>q(o).formData=L)},null,8,["stepConfig","modelValue"])):(n(),u("div",Ar,[e("h2",zr,"ERROR: Step "+y(q(o).currentStep)+" Fallback Hit!",1),k[18]||(k[18]=e("p",{class:"mt-2"},"The dynamic step condition failed to render. Check the following values:",-1)),e("ul",Nr,[e("li",null,[k[13]||(k[13]=e("strong",null,"Current Step Title:",-1)),M(" "+y(N()),1)]),e("li",null,[k[14]||(k[14]=e("strong",null,"Request Config Loaded:",-1)),M(" "+y(!!q(o).requestTypeConfig),1)]),e("li",null,[k[15]||(k[15]=e("strong",null,"Calculated Total Steps:",-1)),M(" "+y(V.value),1)]),e("li",null,[k[16]||(k[16]=e("strong",null,"Uses Configurable Steps:",-1)),M(" "+y(i.value),1)]),e("li",null,[k[17]||(k[17]=e("strong",null,"Current Step Config:",-1)),M(" "+y(JSON.stringify(H())),1)])]),k[19]||(k[19]=e("p",{class:"mt-4 text-sm text-gray-500"},"If 'Current Step Config' is not null, the issue is likely within DynamicStepRenderer or component registration.",-1))]))]),h.value?(n(),u("div",Lr,[e("div",{class:"flex items-start justify-between"},[e("div",{class:"flex-1"},[k[20]||(k[20]=ce('<div class="flex items-center gap-2 mb-2"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><h3 class="text-lg font-semibold text-gray-900">Pre-Application Meeting Available</h3></div><p class="text-sm text-gray-700 mb-3"> Schedule a meeting with council planners to discuss your application before submitting. This optional step can help clarify requirements and improve your application. </p>',2)),e("button",{onClick:P,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," Request Council Meeting ")])])])):b("",!0),A(es,{"current-step":q(o).currentStep,"total-steps":V.value,"is-last-step":q(o).isLastStep,"can-go-next":l.value,"can-save-draft":s.value,"is-saving":q(o).isSaving,"is-submitting":q(o).isSubmitting,onNext:S,onPrevious:I,onSaveDraft:W,onSubmit:Ze},null,8,["current-step","total-steps","is-last-step","can-go-next","can-save-draft","is-saving","is-submitting"])]),A(os,{show:m.value,"onUpdate:show":k[5]||(k[5]=L=>m.value=L),"draft-id":q(o).currentRequestId},null,8,["show","draft-id"]),A(ds,{show:f.value,"onUpdate:show":k[6]||(k[6]=L=>f.value=L),errors:q(x)},null,8,["show","errors"]),A(_t,{show:g.value,"onUpdate:show":k[7]||(k[7]=L=>g.value=L),"request-id":q(o).currentRequestId,"request-type-code":q(o).formData.request_type,"council-code":q(o).formData.council,onBooked:j},null,8,["show","request-id","request-type-code","council-code"]),A(hs,{open:v.value,"request-number":(z=d.value)==null?void 0:z.request_number,"request-id":(Y=d.value)==null?void 0:Y.request_id,"sla-info":(Z=d.value)==null?void 0:Z.sla_info,onClose:k[8]||(k[8]=L=>v.value=!1),onViewRequest:et,onGoToDashboard:tt},null,8,["open","request-number","request-id","sla-info"])])}}};export{Yr as default};
//# sourceMappingURL=NewRequest-BB7aLP_l.js.map
