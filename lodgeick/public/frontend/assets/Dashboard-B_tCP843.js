import{f as z,j as c,s as k,r as b,k as E,c as a,o as r,a as e,g as A,b as n,w as p,h as I,u as m,i as j,t as l,I as H,l as C,v as R,F as M,m as T,d as q,n as B}from"./index-T2WTwM96.js";import{D as O}from"./Dropdown-DxoBCjw5.js";import{_ as G}from"./StatusBadge-BX3EBzLX.js";import{_ as h}from"./StatCard-BW_UwWNo.js";const Q={class:"min-h-screen bg-gray-50"},W={class:"bg-white shadow-sm border-b border-gray-200"},Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},J={class:"flex justify-between items-center py-4"},K={class:"flex items-center space-x-4"},X={class:"flex items-center space-x-2 text-gray-700 hover:text-gray-900"},Y={class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},ee={class:"text-sm font-medium text-blue-600"},te={class:"text-sm font-medium"},se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},oe={class:"mb-8"},le={class:"text-2xl font-bold text-gray-900 mb-2"},ae={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},re={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},ne={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},ie={class:"md:col-span-2"},de=["value"],ue={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ce={key:0,class:"p-12 text-center"},pe={key:1,class:"p-12 text-center"},me={class:"text-gray-500 mb-6"},xe={key:2,class:"overflow-x-auto"},ge={class:"w-full"},ve={class:"bg-white divide-y divide-gray-200"},fe=["onClick"],ye={class:"px-6 py-4 whitespace-nowrap"},be={class:"text-sm font-medium text-blue-600"},he={class:"px-6 py-4 whitespace-nowrap"},we={class:"text-sm text-gray-900"},_e={class:"px-6 py-4 whitespace-nowrap"},ke={class:"text-sm text-gray-900"},Ce={class:"px-6 py-4"},Re={class:"text-sm text-gray-900"},Se={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"px-6 py-4 whitespace-nowrap"},De={class:"text-sm text-gray-500"},Ve={class:"px-6 py-4 whitespace-nowrap"},Ae={class:"text-sm text-gray-900"},Ie={key:0,class:"text-xs text-gray-500"},je={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Me=["onClick"],Te=["onClick"],ze={__name:"Dashboard",setup(qe){const i=z(),w=c(()=>{var t;return(((t=k.user_info)==null?void 0:t.full_name)||k.user).replace("@"," ").split(".").join(" ")}),U=c(()=>{const o=w.value,t=o.split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():o.substring(0,2).toUpperCase()}),d=b(""),x=b(""),g=b(""),v=b(""),f=E({url:"lodgeick.lodgeick.doctype.request.request.get_my_applications",auto:!0}),L=c(()=>{const o=f.data||[];return[...new Set(o.map(s=>s.council).filter(Boolean))].sort()}),y=c(()=>{const o=f.data||[];return{total:o.length,underReview:o.filter(t=>t.status==="Under Review").length,approved:o.filter(t=>t.status==="Approved").length,rfiPending:o.filter(t=>t.status==="RFI Issued").length}}),_=c(()=>{let o=f.data||[];if(d.value){const t=d.value.toLowerCase();o=o.filter(s=>{var u,D,V;return((u=s.request_number)==null?void 0:u.toLowerCase().includes(t))||((D=s.property_address)==null?void 0:D.toLowerCase().includes(t))||((V=s.brief_description)==null?void 0:V.toLowerCase().includes(t))})}return x.value&&(o=o.filter(t=>t.status===x.value)),g.value&&(o=o.filter(t=>t.council===g.value)),v.value&&(o=o.filter(t=>{var s;return(s=t.request_type)==null?void 0:s.includes(v.value)})),o}),$=o=>o?new Date(o).toLocaleDateString("en-NZ",{year:"numeric",month:"short",day:"numeric"}):"N/A",S=()=>{i.push({name:"NewRequest"})},N=o=>{i.push({name:"RequestDetail",params:{id:o}})},F=o=>{i.push({name:"RequestDetail",params:{id:o}})},P=[{label:"Staff Portal",onClick:()=>{i.push({name:"InternalRequestManagement"})}},{label:"Settings",onClick:()=>{i.push({name:"Settings"})}},{label:"Sign Out",onClick:()=>k.logout.submit()}];return(o,t)=>(r(),a("div",Q,[e("header",W,[e("div",Z,[e("div",J,[t[7]||(t[7]=A('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><div><h1 class="text-xl font-bold text-gray-900">Lodgeick</h1><p class="text-xs text-gray-500">Council Request Management</p></div></div>',1)),e("div",K,[n(m(j),{onClick:S,variant:"solid",theme:"blue"},{prefix:p(()=>[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:p(()=>[t[5]||(t[5]=I(" New Request ",-1))]),_:1}),n(m(O),{options:P},{default:p(({open:s})=>[e("button",X,[e("div",Y,[e("span",ee,l(U.value),1)]),e("span",te,l(w.value),1),t[6]||(t[6]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])]),_:1})])])])]),e("main",se,[e("div",oe,[e("h2",le,"Welcome back, "+l(w.value)+"!",1),t[8]||(t[8]=e("p",{class:"text-gray-600"},"Manage your council requests and track their progress",-1))]),e("div",ae,[n(h,{title:"Total Requests",value:y.value.total,icon:"file-text",color:"blue"},null,8,["value"]),n(h,{title:"Under Review",value:y.value.underReview,icon:"clock",color:"yellow"},null,8,["value"]),n(h,{title:"Approved",value:y.value.approved,icon:"check-circle",color:"green"},null,8,["value"]),n(h,{title:"Info Requested",value:y.value.rfiPending,icon:"alert-circle",color:"orange"},null,8,["value"])]),e("div",re,[e("div",ne,[e("div",ie,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),n(m(H),{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),placeholder:"Search by request number or property...",type:"text"},{prefix:p(()=>[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)])]),_:1},8,["modelValue"])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),C(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[11]||(t[11]=[A('<option value="">All Statuses</option><option value="Draft">Draft</option><option value="Submitted">Submitted</option><option value="Under Review">Under Review</option><option value="RFI Issued">RFI Issued</option><option value="Approved">Approved</option><option value="Declined">Declined</option>',7)])],512),[[R,x.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Council",-1)),C(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[13]||(t[13]=e("option",{value:""},"All Councils",-1)),(r(!0),a(M,null,T(L.value,s=>(r(),a("option",{key:s,value:s},l(s),9,de))),128))],512),[[R,g.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),C(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>v.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[15]||(t[15]=[e("option",{value:""},"All Types",-1),e("option",{value:"Resource Consent"},"Resource Consent",-1),e("option",{value:"Building Consent"},"Building Consent",-1)])],512),[[R,v.value]])])])]),e("div",ue,[t[22]||(t[22]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"My Applications")],-1)),m(f).loading?(r(),a("div",ce,[...t[17]||(t[17]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("p",{class:"mt-4 text-gray-500"},"Loading applications...",-1)])])):!_.value||_.value.length===0?(r(),a("div",pe,[t[19]||(t[19]=e("div",{class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No applications found",-1)),e("p",me,l(d.value?"Try adjusting your search or filters":"Get started by creating your first application"),1),n(m(j),{onClick:S,variant:"solid",theme:"blue"},{default:p(()=>[...t[18]||(t[18]=[I(" Create New Application ",-1)])]),_:1})])):(r(),a("div",xe,[e("table",ge,[t[21]||(t[21]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Request #"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Council"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Property"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Submitted"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Days Elapsed"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ve,[(r(!0),a(M,null,T(_.value,s=>(r(),a("tr",{key:s.name,class:"hover:bg-gray-50 transition cursor-pointer",onClick:u=>N(s.name)},[e("td",ye,[e("div",be,l(s.request_number),1)]),e("td",he,[e("div",we,l(s.council||"N/A"),1)]),e("td",_e,[e("div",ke,l(s.request_type),1)]),e("td",Ce,[e("div",Re,l(s.property_address||"N/A"),1)]),e("td",Se,[n(G,{status:s.status},null,8,["status"])]),e("td",Ne,[e("div",De,l($(s.creation)),1)]),e("td",Ve,[e("div",Ae,l(s.working_days_elapsed||0)+" days",1),s.statutory_clock_started?(r(),a("div",Ie," of 20 day limit ")):q("",!0)]),e("td",je,[e("button",{onClick:B(u=>N(s.name),["stop"]),class:"text-blue-600 hover:text-blue-900 mr-4"}," View ",8,Me),s.status==="Draft"?(r(),a("button",{key:0,onClick:B(u=>F(s.name),["stop"]),class:"text-gray-600 hover:text-gray-900"}," Edit ",8,Te)):q("",!0)])],8,fe))),128))])])]))])])]))}};export{ze as default};
//# sourceMappingURL=Dashboard-B_tCP843.js.map
