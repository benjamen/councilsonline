var He=Object.defineProperty,Ge=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var Se=(t,r,d)=>r in t?He(t,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[r]=d,G=(t,r)=>{for(var d in r||(r={}))qe.call(r,d)&&Se(t,d,r[d]);if(ce)for(var d of ce(r))Te.call(r,d)&&Se(t,d,r[d]);return t},me=(t,r)=>Ge(t,We(r));var X=(t,r)=>{var d={};for(var i in t)qe.call(t,i)&&r.indexOf(i)<0&&(d[i]=t[i]);if(t!=null&&ce)for(var i of ce(t))r.indexOf(i)<0&&Te.call(t,i)&&(d[i]=t[i]);return d};var F=(t,r,d)=>new Promise((i,a)=>{var b=f=>{try{m(d.next(f))}catch(x){a(x)}},p=f=>{try{m(d.throw(f))}catch(x){a(x)}},m=f=>f.done?i(f.value):Promise.resolve(f.value).then(b,p);m((d=d.apply(t,r)).next())});import{r as T,q as J,x as ke,y as I,z as Q,j as V,A as _e,B as Z,C as ge,E as Ye,G as ye,H as be,J as Ke,K as te,L as re,M as E,N as xe,O as he,P as Je,Q as Be,R as ne,S as se,T as Qe,F as z,U as pe,V as Ze,W as Xe,X as ee,Y as W,Z as et,c as n,o,a as e,d as y,$ as Ie,t as g,l as L,a0 as D,h as B,a1 as U,w as A,u as q,i as le,b as j,a2 as Me,D as je,f as Ae,g as ae,k as N,a3 as ze,m as Fe,v as oe,a4 as Y,s as tt,e as ie,a5 as st,a6 as lt,a7 as De,a8 as ot,a9 as at,aa as rt}from"./index-DUj5yhSv.js";import{r as fe}from"./request.service-BpcXdunY.js";import{C as nt}from"./CouncilSelector-DhnBM5rU.js";function Pe(t,r){if(t)return t;let d=r!=null?r:"button";if(typeof d=="string"&&d.toLowerCase()==="button")return"button"}function Re(t,r){let d=T(Pe(t.value.type,t.value.as));return J(()=>{d.value=Pe(t.value.type,t.value.as)}),ke(()=>{var i;d.value||I(r)&&I(r)instanceof HTMLButtonElement&&!((i=I(r))!=null&&i.hasAttribute("type"))&&(d.value="button")}),d}var it=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(it||{});let Ne=Symbol("DisclosureContext");function Ce(t){let r=re(Ne,null);if(r===null){let d=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,Ce),d}return r}let Le=Symbol("DisclosurePanelContext");function ut(){return re(Le,null)}let dt=Q({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(t,{slots:r,attrs:d}){let i=T(t.defaultOpen?0:1),a=T(null),b=T(null),p={buttonId:T(`headlessui-disclosure-button-${be()}`),panelId:T(`headlessui-disclosure-panel-${be()}`),disclosureState:i,panel:a,button:b,toggleDisclosure(){i.value=te(i.value,{0:1,1:0})},closeDisclosure(){i.value!==1&&(i.value=1)},close(m){p.closeDisclosure();let f=m?m instanceof HTMLElement?m:m.value instanceof HTMLElement?I(m):I(p.button):I(p.button);f==null||f.focus()}};return ge(Ne,p),Ke(V(()=>te(i.value,{0:ye.Open,1:ye.Closed}))),()=>{let k=t,{defaultOpen:m}=k,f=X(k,["defaultOpen"]),x={open:i.value===0,close:p.close};return Z({theirProps:f,ourProps:{},slot:x,slots:r,attrs:d,name:"Disclosure"})}}}),ct=Q({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:d,expose:i}){let a=Ce("DisclosureButton"),b=ut(),p=V(()=>b===null?!1:b.value===a.panelId.value);J(()=>{p.value||t.id!==null&&(a.buttonId.value=t.id)}),_e(()=>{p.value||(a.buttonId.value=null)});let m=T(null);i({el:m,$el:m}),p.value||ke(()=>{a.button.value=m.value});let f=Re(V(()=>({as:t.as,type:r.type})),m);function x(){var C;t.disabled||(p.value?(a.toggleDisclosure(),(C=I(a.button))==null||C.focus()):a.toggleDisclosure())}function k(C){var M;if(!t.disabled)if(p.value)switch(C.key){case E.Space:case E.Enter:C.preventDefault(),C.stopPropagation(),a.toggleDisclosure(),(M=I(a.button))==null||M.focus();break}else switch(C.key){case E.Space:case E.Enter:C.preventDefault(),C.stopPropagation(),a.toggleDisclosure();break}}function _(C){switch(C.key){case E.Space:C.preventDefault();break}}return()=>{var C;let M={open:a.disclosureState.value===0},s=t,{id:w}=s,u=X(s,["id"]),l=p.value?{ref:m,type:f.value,onClick:x,onKeydown:k}:{id:(C=a.buttonId.value)!=null?C:w,ref:m,type:f.value,"aria-expanded":a.disclosureState.value===0,"aria-controls":a.disclosureState.value===0||I(a.panel)?a.panelId.value:void 0,disabled:t.disabled?!0:void 0,onClick:x,onKeydown:k,onKeyup:_};return Z({ourProps:l,theirProps:u,slot:M,attrs:r,slots:d,name:"DisclosureButton"})}}}),mt=Q({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:r,slots:d,expose:i}){let a=Ce("DisclosurePanel");J(()=>{t.id!==null&&(a.panelId.value=t.id)}),_e(()=>{a.panelId.value=null}),i({el:a.panel,$el:a.panel}),ge(Le,a.panelId);let b=Ye(),p=V(()=>b!==null?(b.value&ye.Open)===ye.Open:a.disclosureState.value===0);return()=>{var m;let f={open:a.disclosureState.value===0,close:a.close},C=t,{id:x}=C,k=X(C,["id"]),_={id:(m=a.panelId.value)!=null?m:x,ref:a.panel};return Z({ourProps:_,theirProps:k,slot:f,attrs:r,slots:d,features:xe.RenderStrategy|xe.Static,visible:p.value,name:"DisclosurePanel"})}}}),pt=Q({props:{onFocus:{type:Function,required:!0}},setup(t){let r=T(!0);return()=>r.value?he(Be,{as:"button",type:"button",features:Je.Focusable,onFocus(d){d.preventDefault();let i,a=50;function b(){var p;if(a--<=0){i&&cancelAnimationFrame(i);return}if((p=t.onFocus)!=null&&p.call(t)){r.value=!1,cancelAnimationFrame(i);return}i=requestAnimationFrame(b)}i=requestAnimationFrame(b)}}):null}});var ft=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(ft||{}),vt=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(vt||{});let Ee=Symbol("TabsContext");function ue(t){let r=re(Ee,null);if(r===null){let d=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,ue),d}return r}let $e=Symbol("TabsSSRContext"),gt=Q({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:r,attrs:d,emit:i}){var a;let b=T((a=t.selectedIndex)!=null?a:t.defaultIndex),p=T([]),m=T([]),f=V(()=>t.selectedIndex!==null),x=V(()=>f.value?t.selectedIndex:b.value);function k(u){var l;let s=se(_.tabs.value,I),c=se(_.panels.value,I),S=s.filter(P=>{var R;return!((R=I(P))!=null&&R.hasAttribute("disabled"))});if(u<0||u>s.length-1){let P=te(b.value===null?0:Math.sign(u-b.value),{[-1]:()=>1,0:()=>te(Math.sign(u),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),R=te(P,{0:()=>s.indexOf(S[0]),1:()=>s.indexOf(S[S.length-1])});R!==-1&&(b.value=R),_.tabs.value=s,_.panels.value=c}else{let P=s.slice(0,u),R=[...s.slice(u),...P].find(K=>S.includes(K));if(!R)return;let H=(l=s.indexOf(R))!=null?l:_.selectedIndex.value;H===-1&&(H=_.selectedIndex.value),b.value=H,_.tabs.value=s,_.panels.value=c}}let _={selectedIndex:V(()=>{var u,l;return(l=(u=b.value)!=null?u:t.defaultIndex)!=null?l:null}),orientation:V(()=>t.vertical?"vertical":"horizontal"),activation:V(()=>t.manual?"manual":"auto"),tabs:p,panels:m,setSelectedIndex(u){x.value!==u&&i("change",u),f.value||k(u)},registerTab(u){var l;if(p.value.includes(u))return;let s=p.value[b.value];if(p.value.push(u),p.value=se(p.value,I),!f.value){let c=(l=p.value.indexOf(s))!=null?l:b.value;c!==-1&&(b.value=c)}},unregisterTab(u){let l=p.value.indexOf(u);l!==-1&&p.value.splice(l,1)},registerPanel(u){m.value.includes(u)||(m.value.push(u),m.value=se(m.value,I))},unregisterPanel(u){let l=m.value.indexOf(u);l!==-1&&m.value.splice(l,1)}};ge(Ee,_);let C=T({tabs:[],panels:[]}),M=T(!1);J(()=>{M.value=!0}),ge($e,V(()=>M.value?null:C.value));let w=V(()=>t.selectedIndex);return J(()=>{ne([w],()=>{var u;return k((u=t.selectedIndex)!=null?u:t.defaultIndex)},{immediate:!0})}),ke(()=>{if(!f.value||x.value==null||_.tabs.value.length<=0)return;let u=se(_.tabs.value,I);u.some((l,s)=>I(_.tabs.value[s])!==I(l))&&_.setSelectedIndex(u.findIndex(l=>I(l)===I(_.tabs.value[x.value])))}),()=>{let u={selectedIndex:b.value};return he(z,[p.value.length<=0&&he(pt,{onFocus:()=>{for(let l of p.value){let s=I(l);if((s==null?void 0:s.tabIndex)===0)return s.focus(),!0}return!1}}),Z({theirProps:G(G({},d),Qe(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])),ourProps:{},slot:u,slots:r,attrs:d,name:"TabGroup"})])}}}),yt=Q({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:r,slots:d}){let i=ue("TabList");return()=>{let a={selectedIndex:i.selectedIndex.value},b={role:"tablist","aria-orientation":i.orientation.value};return Z({ourProps:b,theirProps:t,slot:a,attrs:r,slots:d,name:"TabList"})}}}),bt=Q({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:d,expose:i}){var a;let b=(a=t.id)!=null?a:`headlessui-tabs-tab-${be()}`,p=ue("Tab"),m=T(null);i({el:m,$el:m}),J(()=>p.registerTab(m)),_e(()=>p.unregisterTab(m));let f=re($e),x=V(()=>{if(f.value){let c=f.value.tabs.indexOf(b);return c===-1?f.value.tabs.push(b)-1:c}return-1}),k=V(()=>{let c=p.tabs.value.indexOf(m);return c===-1?x.value:c}),_=V(()=>k.value===p.selectedIndex.value);function C(c){var S;let P=c();if(P===pe.Success&&p.activation.value==="auto"){let R=(S=Xe(m))==null?void 0:S.activeElement,H=p.tabs.value.findIndex(K=>I(K)===R);H!==-1&&p.setSelectedIndex(H)}return P}function M(c){let S=p.tabs.value.map(P=>I(P)).filter(Boolean);if(c.key===E.Space||c.key===E.Enter){c.preventDefault(),c.stopPropagation(),p.setSelectedIndex(k.value);return}switch(c.key){case E.Home:case E.PageUp:return c.preventDefault(),c.stopPropagation(),C(()=>ee(S,W.First));case E.End:case E.PageDown:return c.preventDefault(),c.stopPropagation(),C(()=>ee(S,W.Last))}if(C(()=>te(p.orientation.value,{vertical(){return c.key===E.ArrowUp?ee(S,W.Previous|W.WrapAround):c.key===E.ArrowDown?ee(S,W.Next|W.WrapAround):pe.Error},horizontal(){return c.key===E.ArrowLeft?ee(S,W.Previous|W.WrapAround):c.key===E.ArrowRight?ee(S,W.Next|W.WrapAround):pe.Error}}))===pe.Success)return c.preventDefault()}let w=T(!1);function u(){var c;w.value||(w.value=!0,!t.disabled&&((c=I(m))==null||c.focus({preventScroll:!0}),p.setSelectedIndex(k.value),Ze(()=>{w.value=!1})))}function l(c){c.preventDefault()}let s=Re(V(()=>({as:t.as,type:r.type})),m);return()=>{var c,S;let P={selected:_.value,disabled:(c=t.disabled)!=null?c:!1},R=X(t,[]),H={ref:m,onKeydown:M,onMousedown:l,onClick:u,id:b,role:"tab",type:s.value,"aria-controls":(S=I(p.panels.value[k.value]))==null?void 0:S.id,"aria-selected":_.value,tabIndex:_.value?0:-1,disabled:t.disabled?!0:void 0};return Z({ourProps:H,theirProps:R,slot:P,attrs:r,slots:d,name:"Tab"})}}}),xt=Q({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:r,attrs:d}){let i=ue("TabPanels");return()=>{let a={selectedIndex:i.selectedIndex.value};return Z({theirProps:t,ourProps:{},slot:a,attrs:d,slots:r,name:"TabPanels"})}}}),ht=Q({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(t,{attrs:r,slots:d,expose:i}){var a;let b=(a=t.id)!=null?a:`headlessui-tabs-panel-${be()}`,p=ue("TabPanel"),m=T(null);i({el:m,$el:m}),J(()=>p.registerPanel(m)),_e(()=>p.unregisterPanel(m));let f=re($e),x=V(()=>{if(f.value){let C=f.value.panels.indexOf(b);return C===-1?f.value.panels.push(b)-1:C}return-1}),k=V(()=>{let C=p.panels.value.indexOf(m);return C===-1?x.value:C}),_=V(()=>k.value===p.selectedIndex.value);return()=>{var C;let M={selected:_.value},s=t,{tabIndex:w}=s,u=X(s,["tabIndex"]),l={ref:m,id:b,role:"tabpanel","aria-labelledby":(C=I(p.tabs.value[k.value]))==null?void 0:C.id,tabIndex:_.value?w:-1};return!_.value&&t.unmount&&!t.static?he(Be,G({as:"span","aria-hidden":!0},l)):Z({ourProps:l,theirProps:u,slot:M,attrs:r,slots:d,features:xe.Static|xe.RenderStrategy,visible:_.value,name:"TabPanel"})}}});const _t=et("request",{state:()=>({currentRequestId:null,requestTypeCode:null,requestTypeConfig:null,formData:{},currentStep:0,stepValidationStatus:{},isSaving:!1,isSubmitting:!1,lastSaved:null,error:null}),getters:{isFirstStep:t=>t.currentStep===0,isLastStep:t=>{var d,i;const r=((i=(d=t.requestTypeConfig)==null?void 0:d.steps)==null?void 0:i.length)||0;return t.currentStep===r-1},currentStepConfig:t=>{var r,d;return(d=(r=t.requestTypeConfig)==null?void 0:r.steps)==null?void 0:d[t.currentStep]},canNavigateNext:t=>t.stepValidationStatus[t.currentStep]===!0,completionPercentage:t=>{var d,i;const r=((i=(d=t.requestTypeConfig)==null?void 0:d.steps)==null?void 0:i.length)||0;return r===0?0:Math.round((t.currentStep+1)/r*100)},hasUnsavedChanges:t=>t.lastSaved?new Date-t.lastSaved>3e4:Object.keys(t.formData).length>0},actions:{initialize(t,r=null){return F(this,null,function*(){try{this.requestTypeCode=t,this.error=null;const d=fe.getRequestTypeConfig(t);yield new Promise(i=>{const a=setInterval(()=>{d.loading||(clearInterval(a),i())},100)}),this.requestTypeConfig=d.data,r?yield this.loadDraft(r):(this.formData={},this.currentStep=0)}catch(d){console.error("Failed to initialize request:",d),this.error=d.message||"Failed to load request type"}})},loadDraft(t){return F(this,null,function*(){try{const r=fe.getRequest(t);yield new Promise(i=>{const a=setInterval(()=>{r.loading||(clearInterval(a),i())},100)});const d=r.data;this.currentRequestId=t,this.formData=d.form_data||{},this.currentStep=d.current_step||0}catch(r){console.error("Failed to load draft:",r),this.error=r.message||"Failed to load draft"}})},saveProgress(){return F(this,null,function*(){this.isSaving=!0,this.error=null;try{const t=yield fe.createDraft(this.formData,this.currentStep);this.currentRequestId||(this.currentRequestId=t.request_id),this.lastSaved=new Date}catch(t){throw console.error("Save failed:",t),this.error=t.message||"Failed to save progress",t}finally{this.isSaving=!1}})},saveDraft(){return F(this,null,function*(){return this.saveProgress()})},submitRequest(){return F(this,null,function*(){this.isSubmitting=!0,this.error=null;try{return this.currentRequestId||(yield this.saveProgress()),yield fe.submitRequest(this.currentRequestId),this.reset(),!0}catch(t){throw console.error("Submit failed:",t),this.error=t.message||"Failed to submit request",t}finally{this.isSubmitting=!1}})},nextStep(){this.isLastStep||this.currentStep++},previousStep(){this.isFirstStep||this.currentStep--},goToStep(t){var d,i;const r=((i=(d=this.requestTypeConfig)==null?void 0:d.steps)==null?void 0:i.length)||0;t>=0&&t<r&&(this.currentStep=t)},updateField(t,r){this.formData[t]=r},updateFields(t){Object.assign(this.formData,t)},setStepValidation(t,r){this.stepValidationStatus[t]=r},clearError(){this.error=null},reset(){this.currentRequestId=null,this.requestTypeCode=null,this.requestTypeConfig=null,this.formData={},this.currentStep=0,this.stepValidationStatus={},this.isSaving=!1,this.isSubmitting=!1,this.lastSaved=null,this.error=null}}});function wt(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0}function kt(t){return t?/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(t.replace(/\s/g,"")):!0}function Ct(t){if(!t)return!0;try{return new URL(t),!0}catch(r){return!1}}function $t(t){return t===""||t===null||t===void 0?!0:!isNaN(parseFloat(t))&&isFinite(t)}function Vt(t,r,d){let i=t.trim();i.startsWith("eval:")&&(i=i.substring(5).trim());try{return new Function("formData","value",`
			'use strict';
			try {
				return Boolean(${i});
			} catch (e) {
				console.warn('[Field Validation] Evaluation error:', e.message);
				return true; // Fail open on evaluation error
			}
		`)(d,r)}catch(a){return console.error("[Field Validation] Failed to evaluate expression:",t,a),!0}}function St(t,r,d={}){if(!r)return{valid:!0,message:""};switch(r.toLowerCase()){case"email":if(!wt(t))return{valid:!1,message:"Please enter a valid email address"};break;case"phone":if(!kt(t))return{valid:!1,message:"Please enter a valid phone number"};break;case"url":if(!Ct(t))return{valid:!1,message:"Please enter a valid URL"};break;case"number":if(!$t(t))return{valid:!1,message:"Please enter a valid number"};break;default:if(r.startsWith("eval:")&&!Vt(r,t,d))return{valid:!1,message:"Validation failed"}}return{valid:!0,message:""}}function Ue(){const t=T({}),r=T(!1);function d(m,f,x,k={}){const _=St(f,x.validation,k);return _.valid?x.is_required&&(f===""||f===null||f===void 0)?(t.value[m]=`${x.field_label} is required`,!1):(delete t.value[m],!0):(t.value[m]=_.message,!1)}function i(m,f){return F(this,null,function*(){r.value=!0,t.value={};let x=!0;for(const k of m.sections||[])if(!(k.depends_on&&!a(k.depends_on,f)))for(const _ of k.fields||[]){if(_.depends_on&&!a(_.depends_on,f))continue;const C=f[_.field_name];d(_.field_name,C,_,f)||(x=!1)}return r.value=!1,x})}function a(m,f){try{const{evaluateCondition:x}=require("../utils/conditionalLogic");return x(m,f)}catch(x){return console.error("Error evaluating depends_on:",x),!0}}function b(){t.value={}}function p(m){delete t.value[m]}return{errors:t,isValidating:r,validateConfigField:d,validateStep:i,clearErrors:b,clearFieldError:p}}const qt={class:"mb-8"},Tt={class:"relative mb-6"},Mt={class:"overflow-hidden h-2 text-xs flex rounded bg-gray-200"},Dt={class:"flex justify-between mt-2"},Pt={class:"text-sm font-medium text-gray-700"},Bt={class:"text-sm font-medium text-gray-700"},It={key:0,"aria-label":"Progress"},jt={class:"flex items-center"},At={key:0,class:"absolute inset-0 flex items-center","aria-hidden":"true"},zt={class:"relative flex items-center group"},Ft={key:0,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},Rt={__name:"RequestProgress",props:{currentStep:{type:Number,required:!0},totalSteps:{type:Number,required:!0},stepTitles:{type:Array,default:()=>[]}},setup(t){const r=t,d=V(()=>r.totalSteps===0?0:Math.round((r.currentStep+1)/r.totalSteps*100)),i=a=>a<r.currentStep?"completed":a===r.currentStep?"current":"upcoming";return(a,b)=>(o(),n("div",qt,[e("div",Tt,[e("div",Mt,[e("div",{style:Ie({width:d.value+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-600 transition-all duration-500"},null,4)]),e("div",Dt,[e("span",Pt," Step "+g(t.currentStep+1)+" of "+g(t.totalSteps),1),e("span",Bt,g(d.value)+"% Complete ",1)])]),t.stepTitles.length>0?(o(),n("nav",It,[e("ol",jt,[(o(!0),n(z,null,L(t.stepTitles,(p,m)=>(o(),n("li",{key:m,class:D(["relative",m!==t.stepTitles.length-1?"pr-8 sm:pr-20 flex-1":""])},[m!==t.stepTitles.length-1?(o(),n("div",At,[e("div",{class:D(["h-0.5 w-full",i(m)==="completed"?"bg-blue-600":"bg-gray-200"])},null,2)])):y("",!0),e("div",zt,[e("span",{class:D(["h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold",i(m)==="completed"?"bg-blue-600 text-white":i(m)==="current"?"bg-white border-2 border-blue-600 text-blue-600":"bg-white border-2 border-gray-300 text-gray-500"])},[i(m)==="completed"?(o(),n("svg",Ft,[...b[0]||(b[0]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):(o(),n(z,{key:1},[B(g(m+1),1)],64))],2),p?(o(),n("span",{key:0,class:D(["ml-3 text-sm font-medium hidden sm:block",i(m)==="current"?"text-blue-600":i(m)==="completed"?"text-gray-900":"text-gray-500"])},g(p),3)):y("",!0)])],2))),128))])])):y("",!0)]))}},Nt={class:"mt-8 pt-6 border-t border-gray-200"},Lt={class:"flex items-center justify-between"},Et={class:"flex items-center space-x-3"},Ut={__name:"StepNavigation",props:{currentStep:{type:Number,required:!0},totalSteps:{type:Number,required:!0},isLastStep:{type:Boolean,default:!1},canGoNext:{type:Boolean,default:!0},isSaving:{type:Boolean,default:!1},isSubmitting:{type:Boolean,default:!1}},emits:["next","previous","save-draft","submit"],setup(t,{emit:r}){const d=r,i=()=>{d("next")},a=()=>{d("previous")},b=()=>{d("save-draft")},p=()=>{d("submit")};return(m,f)=>(o(),n("div",Nt,[e("div",Lt,[e("div",null,[t.currentStep>0?(o(),U(q(le),{key:0,onClick:a,variant:"outline",disabled:t.isSaving||t.isSubmitting},{prefix:A(()=>[...f[0]||(f[0]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:A(()=>[f[1]||(f[1]=B(" Previous ",-1))]),_:1},8,["disabled"])):y("",!0)]),e("div",Et,[j(q(le),{onClick:b,variant:"outline",loading:t.isSaving,disabled:t.isSubmitting},Me({default:A(()=>[B(" "+g(t.isSaving?"Saving...":"Save Draft"),1)]),_:2},[t.isSaving?void 0:{name:"prefix",fn:A(()=>[f[2]||(f[2]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1))]),key:"0"}]),1032,["loading","disabled"]),t.isLastStep?(o(),U(q(le),{key:1,onClick:p,variant:"solid",theme:"green",loading:t.isSubmitting,disabled:!t.canGoNext||t.isSaving},Me({default:A(()=>[B(" "+g(t.isSubmitting?"Submitting...":"Submit Application"),1)]),_:2},[t.isSubmitting?void 0:{name:"prefix",fn:A(()=>[f[5]||(f[5]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1))]),key:"0"}]),1032,["loading","disabled"])):(o(),U(q(le),{key:0,onClick:i,variant:"solid",theme:"blue",disabled:!t.canGoNext||t.isSaving||t.isSubmitting},{suffix:A(()=>[...f[3]||(f[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),default:A(()=>[f[4]||(f[4]=B(" Next ",-1))]),_:1},8,["disabled"]))])]),f[6]||(f[6]=e("div",{class:"mt-4 text-center"},[e("p",{class:"text-sm text-gray-500"}," Your progress is automatically saved. You can return to complete this application later. ")],-1))]))}},Ot={class:"text-center py-6"},Ht={key:0,class:"text-xs text-gray-400 font-mono bg-gray-50 px-3 py-2 rounded"},Gt={__name:"SaveDraftModal",props:{show:{type:Boolean,required:!0},draftId:{type:String,default:null}},emits:["update:show","close"],setup(t,{emit:r}){const d=t,i=r,a=V({get:()=>d.show,set:p=>i("update:show",p)}),b=()=>{i("update:show",!1),i("close")};return(p,m)=>(o(),U(q(je),{modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=f=>a.value=f),options:{size:"sm"}},{body:A(()=>[e("div",Ot,[m[1]||(m[1]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),m[2]||(m[2]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Draft Saved Successfully",-1)),m[3]||(m[3]=e("p",{class:"text-sm text-gray-500 mb-4"}," Your progress has been saved. You can return to complete this application later. ",-1)),t.draftId?(o(),n("p",Ht," Draft ID: "+g(t.draftId),1)):y("",!0)])]),actions:A(()=>[e("div",{class:"flex justify-end space-x-2"},[e("button",{onClick:b,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}," Continue Editing ")])]),_:1},8,["modelValue"]))}},Wt={class:"py-4"},Yt={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Kt={class:"list-disc list-inside space-y-2"},Jt={class:"font-medium"},Qt={key:1,class:"text-sm text-gray-500 text-center py-4"},Zt={__name:"ValidationErrorModal",props:{show:{type:Boolean,required:!0},errors:{type:Object,default:()=>({})}},emits:["update:show","close"],setup(t,{emit:r}){const d=t,i=r,a=V({get:()=>d.show,set:m=>i("update:show",m)}),b=V(()=>Object.entries(d.errors).map(([m,f])=>({field:m,message:f}))),p=()=>{i("update:show",!1),i("close")};return(m,f)=>(o(),U(q(je),{modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=x=>a.value=x),options:{size:"md"}},{body:A(()=>[e("div",Wt,[f[1]||(f[1]=e("div",{class:"flex items-start mb-4"},[e("div",{class:"flex-shrink-0"},[e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])])]),e("div",{class:"ml-4"},[e("h3",{class:"text-lg font-medium text-gray-900 mb-1"},"Validation Errors"),e("p",{class:"text-sm text-gray-500"}," Please fix the following errors before continuing: ")])],-1)),b.value.length>0?(o(),n("div",Yt,[e("ul",Kt,[(o(!0),n(z,null,L(b.value,(x,k)=>(o(),n("li",{key:k,class:"text-sm text-red-800"},[e("span",Jt,g(x.field)+":",1),B(" "+g(x.message),1)]))),128))])])):(o(),n("div",Qt," No validation errors found. "))])]),actions:A(()=>[e("div",{class:"flex justify-end"},[e("button",{onClick:p,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}," Close and Fix Errors ")])]),_:1},8,["modelValue"]))}},Xt={__name:"Step1CouncilSelection",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","council-change"],setup(t,{emit:r}){const d=t,i=r,a=b=>{console.log("[Step1CouncilSelection] updateCouncil called with:",b),console.log("[Step1CouncilSelection] Current modelValue:",d.modelValue),i("update:modelValue",me(G({},d.modelValue),{council:b})),i("council-change",b),console.log("[Step1CouncilSelection] Emitted events")};return(b,p)=>(o(),n("div",null,[p[0]||(p[0]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Council",-1)),p[1]||(p[1]=e("p",{class:"text-gray-600 mb-8"},"Choose the council that will process your application",-1)),j(nt,{"model-value":t.modelValue.council,"onUpdate:modelValue":a,"display-mode":"cards",required:!0,"show-selected-info":!0,label:"","show-label":!1},null,8,["model-value"])]))}},es={key:0,class:"text-center py-12"},ts={key:1,class:"grid md:grid-cols-2 gap-4"},ss=["onClick"],ls={class:"flex items-start justify-between"},os={class:"flex-1"},as={class:"text-lg font-semibold text-gray-900 mb-2"},rs=["innerHTML"],ns={class:"mt-4 flex items-center space-x-4 text-xs text-gray-500"},is={key:0},us={key:1},ds={key:2,class:"px-2 py-1 bg-gray-100 rounded"},cs={key:0,class:"ml-4"},ms={__name:"Step2RequestType",props:{modelValue:{type:Object,required:!0},requestTypes:{type:Object,required:!0}},emits:["update:modelValue","type-selected"],setup(t,{emit:r}){const d=t,i=r,a=b=>{console.log("[Step2RequestType] selectType called with:",b.name),console.log("[Step2RequestType] props.modelValue:",d.modelValue),console.log("[Step2RequestType] props.modelValue.council:",d.modelValue.council);const p=me(G({},d.modelValue),{request_type:b.name});console.log("[Step2RequestType] Emitting updatedValue:",p),i("update:modelValue",p),i("type-selected",b)};return(b,p)=>(o(),n("div",null,[p[2]||(p[2]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Application Type",-1)),p[3]||(p[3]=e("p",{class:"text-gray-600 mb-8"},"Choose the type of consent you wish to apply for",-1)),t.requestTypes.loading?(o(),n("div",es,[...p[0]||(p[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(o(),n("div",ts,[(o(!0),n(z,null,L(t.requestTypes.data,m=>(o(),n("div",{key:m.name,onClick:f=>a(m),class:D(["border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",t.modelValue.request_type===m.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",ls,[e("div",os,[e("h3",as,g(m.type_name),1),e("p",{class:"text-sm text-gray-600",innerHTML:m.description||"No description available"},null,8,rs),e("div",ns,[m.base_fee?(o(),n("span",is,"Fee: $"+g(m.base_fee),1)):y("",!0),m.processing_sla_days?(o(),n("span",us,g(m.processing_sla_days)+" days",1)):y("",!0),m.category?(o(),n("span",ds,g(m.category),1)):y("",!0)])]),t.modelValue.request_type===m.name?(o(),n("div",cs,[...p[1]||(p[1]=[e("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):y("",!0)])],10,ss))),128))]))]))}},ps={class:"text-gray-600 mb-6"},fs={key:0,class:"space-y-6"},vs={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},gs={class:"flex items-center gap-4 mb-4"},ys={class:"flex items-center"},bs={key:1,class:"mt-4"},xs={class:"space-y-2"},hs={class:"flex-1"},_s={class:"text-sm font-medium text-gray-900"},ws={class:"text-xs text-gray-600 mt-1"},ks={key:0,class:"text-xs text-gray-500 mt-1"},Cs=["onClick"],$s={class:"bg-white border border-gray-200 rounded-lg p-6"},Vs={class:"flex items-start justify-between mb-4"},Ss={class:"text-xl font-semibold text-gray-900"},qs={key:0,class:"text-sm text-gray-500 mt-1"},Ts={class:"grid md:grid-cols-3 gap-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},Ms={class:"text-2xl font-bold text-blue-900 mt-1"},Ds={class:"text-2xl font-bold text-blue-900 mt-1"},Ps={class:"text-2xl font-bold text-blue-900 mt-1"},Bs={key:1,class:"bg-white border border-gray-200 rounded-lg p-6"},Is=["innerHTML"],js={key:2,class:"bg-white border border-gray-200 rounded-lg p-6"},As=["innerHTML"],zs={key:1,class:"text-center py-12"},Fs={class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-hidden"},Rs={class:"overflow-y-auto max-h-[calc(90vh-140px)] px-6 py-4"},Ns={class:"space-y-4"},Ls={class:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t border-gray-200"},Es=["disabled"],Us={__name:"Step3ProcessInfo",props:{requestTypeDetails:{type:Object,default:null},councilName:{type:String,default:""},modelValue:{type:Object,default:()=>({})}},emits:["continue","update:modelValue"],setup(t,{emit:r}){var u,l;const d=Ae(),i=t,a=r,b=T(((u=i.modelValue)==null?void 0:u.pre_app_meeting_not_required)||!1),p=T(((l=i.modelValue)==null?void 0:l.pre_app_meetings)||[]),m=T(!1),f=T({meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",preferred_time_slot_1_start:null});ne([b,p],()=>{a("update:modelValue",me(G({},i.modelValue),{pre_app_meeting_not_required:b.value,pre_app_meetings:p.value}))},{deep:!0});const x=()=>{f.value={meeting_type:"Council Meeting",meeting_format:"In Person",meeting_purpose:"",preferred_time_slot_1_start:null},m.value=!0},k=()=>{m.value=!1},_=()=>{p.value.push(G({},f.value)),k()},C=s=>{confirm("Remove this council meeting request?")&&p.value.splice(s,1)},M=s=>s?new Date(s).toLocaleString("en-NZ",{dateStyle:"medium",timeStyle:"short"}):"",w=()=>{if(!tt.isLoggedIn){const s=window.location.pathname+window.location.search;d.push({name:"Login",query:{redirect:s}});return}a("continue")};return(s,c)=>(o(),n("div",null,[c[27]||(c[27]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Council Process Information",-1)),e("p",ps,"Understanding "+g(t.councilName)+"'s process for this application",1),t.requestTypeDetails?(o(),n("div",fs,[t.requestTypeDetails.council_meeting_available?(o(),n("div",vs,[c[6]||(c[6]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Council Meeting",-1)),c[7]||(c[7]=e("p",{class:"text-sm text-gray-600 mb-4"}," You may schedule a Council Meeting with the Council to seek further clarifications in respect of your application before proceeding. ",-1)),e("div",gs,[e("label",ys,[N(e("input",{type:"checkbox","onUpdate:modelValue":c[0]||(c[0]=S=>b.value=S),class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[ze,b.value]]),c[4]||(c[4]=e("span",{class:"ml-2 text-sm text-gray-700"},"I do not require a council meeting",-1))])]),b.value?y("",!0):(o(),n("button",{key:0,onClick:x,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Request Council Meeting ")),p.value&&p.value.length>0?(o(),n("div",bs,[c[5]||(c[5]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Requested Meetings",-1)),e("div",xs,[(o(!0),n(z,null,L(p.value,(S,P)=>(o(),n("div",{key:P,class:"p-3 bg-gray-50 border border-gray-200 rounded-lg flex items-start justify-between"},[e("div",hs,[e("span",_s,g(S.meeting_type||"Council Meeting"),1),e("p",ws,g(S.meeting_format),1),S.preferred_time_slot_1_start?(o(),n("p",ks," Preferred: "+g(M(S.preferred_time_slot_1_start)),1)):y("",!0)]),e("button",{onClick:R=>C(P),type:"button",class:"text-red-600 hover:text-red-800 text-sm ml-4"}," Remove ",8,Cs)]))),128))])])):y("",!0)])):y("",!0),e("div",$s,[e("div",Vs,[e("div",null,[e("h3",Ss,g(t.requestTypeDetails.request_type_name),1),t.requestTypeDetails.category?(o(),n("p",qs,g(t.requestTypeDetails.category),1)):y("",!0)])]),e("div",Ts,[e("div",null,[c[8]||(c[8]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Application Fee",-1)),e("div",Ms," $"+g(t.requestTypeDetails.base_fee||"0"),1),c[9]||(c[9]=e("div",{class:"text-xs text-blue-600 mt-1"},"Plus any additional costs",-1))]),e("div",null,[c[11]||(c[11]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Processing Time",-1)),e("div",Ds,[B(g(t.requestTypeDetails.sla_days||"N/A")+" ",1),c[10]||(c[10]=e("span",{class:"text-base"},"days",-1))]),c[12]||(c[12]=e("div",{class:"text-xs text-blue-600 mt-1"},"Standard timeframe",-1))]),e("div",null,[c[13]||(c[13]=e("div",{class:"text-xs text-blue-600 font-medium uppercase"},"Payment Required",-1)),e("div",Ps,g(t.requestTypeDetails.requires_payment?"Yes":"No"),1),c[14]||(c[14]=e("div",{class:"text-xs text-blue-600 mt-1"},"Before processing",-1))])])]),t.requestTypeDetails.process_description?(o(),n("div",Bs,[c[15]||(c[15]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"How This Works",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:t.requestTypeDetails.process_description},null,8,Is)])):t.requestTypeDetails.description?(o(),n("div",js,[c[16]||(c[16]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"About This Application",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:t.requestTypeDetails.description},null,8,As)])):y("",!0),c[17]||(c[17]=ae('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h5 class="font-semibold text-yellow-900 text-sm">Before You Continue</h5><p class="text-yellow-800 text-sm mt-1"> Please review this information carefully. Make sure you understand the process, fees, and timeframes before proceeding with your application. </p></div></div></div>',1)),e("div",{class:"flex justify-center pt-4"},[e("button",{type:"button",onClick:w,class:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"}," I Understand - Continue to Application ")])])):(o(),n("div",zs,[...c[18]||(c[18]=[e("p",{class:"text-gray-500"},"No request type selected. Please go back and select a request type.",-1)])])),m.value?(o(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:Fe(k,["self"])},[e("div",Fs,[e("div",{class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},[c[20]||(c[20]=e("h3",{class:"text-xl font-bold text-gray-900"},"Request Council Meeting",-1)),e("button",{onClick:k,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...c[19]||(c[19]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Rs,[e("div",Ns,[c[26]||(c[26]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("p",{class:"text-sm text-blue-900"}," A council meeting allows you to discuss your proposal with council planners before formally submitting your application. ")],-1)),e("div",null,[c[22]||(c[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Format *",-1)),N(e("select",{"onUpdate:modelValue":c[1]||(c[1]=S=>f.value.meeting_format=S),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[...c[21]||(c[21]=[e("option",{value:"In Person"},"In Person",-1),e("option",{value:"Video Call"},"Video Call",-1),e("option",{value:"Phone Call"},"Phone Call",-1)])],512),[[oe,f.value.meeting_format]])]),e("div",null,[c[23]||(c[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meeting Purpose *",-1)),N(e("textarea",{"onUpdate:modelValue":c[2]||(c[2]=S=>f.value.meeting_purpose=S),rows:"4",placeholder:"Describe what you'd like to discuss in this meeting...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[Y,f.value.meeting_purpose]])]),e("div",null,[c[24]||(c[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Preferred Date & Time",-1)),N(e("input",{"onUpdate:modelValue":c[3]||(c[3]=S=>f.value.preferred_time_slot_1_start=S),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Y,f.value.preferred_time_slot_1_start]]),c[25]||(c[25]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select your preferred date and time. The council will confirm or propose an alternative.",-1))])])]),e("div",Ls,[e("button",{onClick:k,type:"button",class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors"}," Cancel "),e("button",{onClick:_,type:"button",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:!f.value.meeting_purpose}," Request Meeting ",8,Es)])])])):y("",!0)]))}};function Os(t,r){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const Hs={class:"space-y-4"},Gs={class:"block"},Ws={class:"text-sm font-medium text-gray-900"},Ys={key:0,class:"text-red-500"},Ks={key:0,class:"text-xs text-gray-500 mt-1"},Js={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qs=["disabled"],Zs=["disabled"],Xs={class:"text-center"},el={class:"text-xs text-gray-500"},tl=["accept","multiple"],sl={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},ll={class:"flex items-center space-x-3"},ol={class:"flex-1"},al={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},rl={key:1,class:"space-y-2"},nl={class:"flex items-center space-x-3 flex-1 min-w-0"},il={class:"flex-shrink-0"},ul={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},dl=["src","alt"],cl={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},ml={class:"flex-1 min-w-0"},pl={class:"text-sm font-medium text-gray-900 truncate"},fl={class:"text-xs text-gray-500"},vl=["onClick"],gl={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},yl={class:"relative bg-black aspect-video"},bl=["src"],xl={key:2,class:"absolute inset-0 pointer-events-none"},hl={class:"w-full h-full grid grid-cols-3 grid-rows-3"},_l={class:"bg-gray-900 px-6 py-6"},wl={key:0,class:"flex items-center justify-center space-x-6"},kl={key:1,class:"flex items-center justify-center space-x-4"},Cl={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(t,{emit:r}){const d=t,i=r,a=T(null),b=T(null),p=T(!1),m=T(null),f=T(null),x=T(!1),k=T(0),_=V({get:()=>d.modelValue,set:h=>i("update:modelValue",h)}),C=()=>{var h;(h=a.value)==null||h.click()},M=h=>F(this,null,function*(){const v=Array.from(h.target.files);yield w(v),h.target.value=""}),w=h=>F(this,null,function*(){const v=[];for(const $ of h){if($.size>d.maxSize){alert(`File ${$.name} exceeds maximum size of ${de(d.maxSize)}`);continue}let O=null;$.type.startsWith("image/")&&(O=yield u($)),v.push({file:$,name:$.name,size:$.size,type:$.type,preview:O,uploadDate:new Date().toISOString()})}if(v.length>0){const $=d.multiple?[..._.value,...v]:v;i("update:modelValue",$),yield l(v)}}),u=h=>new Promise(v=>{const $=new FileReader;$.onload=O=>v(O.target.result),$.onerror=()=>v(null),$.readAsDataURL(h)}),l=h=>F(this,null,function*(){x.value=!0,k.value=0;try{for(let v=0;v<h.length;v++){const $=h[v],O=setInterval(()=>{k.value=Math.min(k.value+10,90)},100);yield new Promise(Ve=>{i("upload",$,Ve)}),clearInterval(O),k.value=(v+1)/h.length*100}}catch(v){console.error("Upload error:",v),alert("Failed to upload files. Please try again.")}finally{x.value=!1,k.value=0}}),s=h=>{const v=[..._.value];v.splice(h,1),i("update:modelValue",v)},c=()=>F(this,null,function*(){try{p.value=!0,yield S()}catch(h){console.error("Camera error:",h),alert("Unable to access camera. Please check permissions or upload a file instead."),p.value=!1}}),S=()=>F(this,null,function*(){try{const h=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});f.value=h,b.value&&(b.value.srcObject=h)}catch(h){throw h}}),P=()=>{const h=b.value,v=document.createElement("canvas");v.width=h.videoWidth,v.height=h.videoHeight,v.getContext("2d").drawImage(h,0,0,v.width,v.height),m.value=v.toDataURL("image/jpeg",.9)},R=()=>{m.value=null},H=()=>F(this,null,function*(){if(!m.value)return;const h=yield(yield fetch(m.value)).blob(),v=new File([h],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield w([v]),K()}),K=()=>{f.value&&(f.value.getTracks().forEach(h=>h.stop()),f.value=null),m.value=null,p.value=!1},de=h=>{if(h===0)return"0 Bytes";const v=1024,$=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(h)/Math.log(v));return Math.round(h/Math.pow(v,O)*100)/100+" "+$[O]};return(h,v)=>(o(),n("div",Hs,[e("label",Gs,[e("span",Ws,[B(g(t.label)+" ",1),t.required?(o(),n("span",Ys,"*")):y("",!0)]),t.helpText?(o(),n("p",Ks,g(t.helpText),1)):y("",!0)]),e("div",Js,[t.allowCamera?(o(),n("button",{key:0,onClick:c,type:"button",class:D(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":x.value}]),disabled:x.value},[...v[0]||(v[0]=[ae('<div class="text-center" data-v-2bd160e5><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2bd160e5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2bd160e5></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2bd160e5></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2bd160e5>Take Photo</p><p class="text-xs text-gray-500" data-v-2bd160e5>Use camera</p></div>',1)])],10,Qs)):y("",!0),e("button",{onClick:C,type:"button",class:D(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":x.value}]),disabled:x.value},[e("div",Xs,[v[1]||(v[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),v[2]||(v[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",el,"Browse "+g(t.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:a,type:"file",accept:t.accept,multiple:t.multiple,onChange:M,class:"hidden"},null,40,tl)],10,Zs)]),x.value?(o(),n("div",sl,[e("div",ll,[v[4]||(v[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",ol,[v[3]||(v[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",al,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:Ie({width:k.value+"%"})},null,4)])])])])):y("",!0),_.value.length>0?(o(),n("div",rl,[j(st,{name:"list"},{default:A(()=>[(o(!0),n(z,null,L(_.value,($,O)=>(o(),n("div",{key:$.name+O,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",nl,[e("div",il,[$.preview?(o(),n("div",ul,[e("img",{src:$.preview,alt:$.name,class:"w-full h-full object-cover"},null,8,dl)])):(o(),n("div",cl,[...v[5]||(v[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",ml,[e("p",pl,g($.name),1),e("p",fl,g(de($.size)),1)]),e("button",{onClick:Ve=>s(O),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...v[6]||(v[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,vl)])]))),128))]),_:1})])):y("",!0),(o(),U(lt,{to:"body"},[p.value?(o(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:Fe(K,["self"])},[e("div",gl,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[v[8]||(v[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:K,class:"text-gray-400 hover:text-white transition-colors"},[...v[7]||(v[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",yl,[m.value?(o(),n("img",{key:1,src:m.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,bl)):(o(),n("video",{key:0,ref_key:"videoElement",ref:b,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),m.value?y("",!0):(o(),n("div",xl,[e("div",hl,[(o(),n(z,null,L(9,$=>e("div",{key:$,class:"border border-white/20"})),64))])]))]),e("div",_l,[m.value?(o(),n("div",kl,[e("button",{onClick:R,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:H,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(o(),n("div",wl,[e("button",{onClick:P,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...v[9]||(v[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):y("",!0)]))]))}},$l=ie(Cl,[["__scopeId","data-v-2bd160e5"]]),Vl={class:"space-y-4"},Sl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ql={class:"block text-sm font-medium text-gray-700 mb-2"},Tl={key:0,class:"text-red-500"},Ml={class:"relative"},Dl=["required"],Pl=["value"],Bl={class:"block text-sm font-medium text-gray-700 mb-2"},Il={key:0,class:"text-red-500"},jl={class:"relative"},Al=["required","disabled"],zl=["value"],Fl={key:0,class:"mt-1 text-xs text-gray-500"},Rl={class:"block text-sm font-medium text-gray-700 mb-2"},Nl={key:0,class:"text-red-500"},Ll={class:"relative"},El=["required","disabled"],Ul=["value"],Ol={key:0,class:"mt-1 text-xs text-gray-500"},Hl={class:"block text-sm font-medium text-gray-700 mb-2"},Gl={key:0,class:"text-red-500"},Wl=["required"],Yl={class:"md:col-span-2"},Kl={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Jl={class:"flex items-start"},Ql={class:"flex-1"},Zl={class:"text-sm text-green-700 mt-1"},Xl={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:r}){const d=t,i=r,a=T({street:"",barangay:"",municipality:"",province:"",zipCode:""}),b=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],p={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Paraaque City","Las Pias City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},m={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},f=V(()=>a.value.province?p[a.value.province]||[]:[]),x=V(()=>a.value.municipality?m[a.value.municipality]||["Other - Please specify in Street field"]:[]),k=V(()=>{const w=[];return a.value.street&&w.push(a.value.street),a.value.barangay&&w.push(`Brgy. ${a.value.barangay}`),a.value.municipality&&w.push(a.value.municipality),a.value.province&&w.push(a.value.province),a.value.zipCode&&w.push(a.value.zipCode),w.length>0?w.join(", "):""}),_=()=>{a.value.municipality="",a.value.barangay="",M()},C=()=>{a.value.barangay="",M()},M=()=>{i("update:modelValue",k.value)};return J(()=>{var w;if(d.modelValue)if(typeof d.modelValue=="string"){const u=d.modelValue.split(",").map(l=>l.trim());u.length>=3&&(a.value.street=u[0]||"",a.value.barangay=((w=u[1])==null?void 0:w.replace("Brgy. ",""))||"",a.value.municipality=u[2]||"",a.value.province=u[3]||"",a.value.zipCode=u[4]||"")}else typeof d.modelValue=="object"&&(a.value=G(G({},a.value),d.modelValue))}),ne(()=>d.modelValue,w=>{w&&typeof w=="object"&&(a.value=G(G({},a.value),w))}),(w,u)=>(o(),n("div",Vl,[u[18]||(u[18]=ae('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",Sl,[e("div",null,[e("label",ql,[u[5]||(u[5]=B(" Province ",-1)),t.required?(o(),n("span",Tl,"*")):y("",!0)]),e("div",Ml,[N(e("select",{"onUpdate:modelValue":u[0]||(u[0]=l=>a.value.province=l),onChange:_,required:t.required,class:D(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.province}])},[u[6]||(u[6]=e("option",{value:""},"Select Province",-1)),(o(),n(z,null,L(b,l=>e("option",{key:l,value:l},g(l),9,Pl)),64))],42,Dl),[[oe,a.value.province]]),u[7]||(u[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",Bl,[u[8]||(u[8]=B(" Municipality/City ",-1)),t.required?(o(),n("span",Il,"*")):y("",!0)]),e("div",jl,[N(e("select",{"onUpdate:modelValue":u[1]||(u[1]=l=>a.value.municipality=l),onChange:C,required:t.required,disabled:!a.value.province,class:D(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.municipality}])},[u[9]||(u[9]=e("option",{value:""},"Select Municipality/City",-1)),(o(!0),n(z,null,L(f.value,l=>(o(),n("option",{key:l,value:l},g(l),9,zl))),128))],42,Al),[[oe,a.value.municipality]]),u[10]||(u[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.province?y("",!0):(o(),n("p",Fl,"Select province first"))]),e("div",null,[e("label",Rl,[u[11]||(u[11]=B(" Barangay ",-1)),t.required?(o(),n("span",Nl,"*")):y("",!0)]),e("div",Ll,[N(e("select",{"onUpdate:modelValue":u[2]||(u[2]=l=>a.value.barangay=l),onChange:M,required:t.required,disabled:!a.value.municipality,class:D(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.barangay}])},[u[12]||(u[12]=e("option",{value:""},"Select Barangay",-1)),(o(!0),n(z,null,L(x.value,l=>(o(),n("option",{key:l,value:l},g(l),9,Ul))),128))],42,El),[[oe,a.value.barangay]]),u[13]||(u[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.municipality?y("",!0):(o(),n("p",Ol,"Select municipality first"))]),e("div",null,[e("label",Hl,[u[14]||(u[14]=B(" Street / House No. ",-1)),t.required?(o(),n("span",Gl,"*")):y("",!0)]),N(e("input",{"onUpdate:modelValue":u[3]||(u[3]=l=>a.value.street=l),onInput:M,type:"text",required:t.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:D(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.street}])},null,42,Wl),[[Y,a.value.street]])]),e("div",Yl,[u[15]||(u[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[B(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),N(e("input",{"onUpdate:modelValue":u[4]||(u[4]=l=>a.value.zipCode=l),onInput:M,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[Y,a.value.zipCode]])])]),k.value?(o(),n("div",Kl,[e("div",Jl,[u[17]||(u[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Ql,[u[16]||(u[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",Zl,g(k.value),1)])])])):y("",!0)]))}},eo={class:"inline-block relative group"},to={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:t=>["top","bottom","left","right"].includes(t)}},setup(t){const r=t,d=T(!1),i=V(()=>{switch(r.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),a=V(()=>{switch(r.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(b,p)=>(o(),n("div",eo,[De(b.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:p[0]||(p[0]=m=>d.value=!0),onMouseleave:p[1]||(p[1]=m=>d.value=!1)},[...p[2]||(p[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),j(ot,{name:"tooltip"},{default:A(()=>[d.value?(o(),n("div",{key:0,class:D(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",i.value]),style:{"max-width":"300px","white-space":"normal"}},[De(b.$slots,"default",{},()=>[B(g(t.text),1)],!0),e("div",{class:D(["tooltip-arrow",a.value])},null,2)],2)):y("",!0)]),_:3})]))}},ve=ie(to,[["__scopeId","data-v-1fa5e90e"]]);function Oe(t,r){if(!t||t.trim()==="")return!0;let d=t.trim();d.startsWith("eval:")&&(d=d.substring(5).trim());try{return new Function("formData",`
      'use strict';
      try {
        return Boolean(${d});
      } catch (e) {
        console.warn('[Conditional Logic] Evaluation error:', e.message);
        return false;
      }
    `)(r)}catch(i){return console.error("[Conditional Logic] Failed to evaluate expression:",t,i),!0}}function so(t,r){return!t||!t.is_enabled?!1:t.depends_on?Oe(t.depends_on,r):!0}function lo(t,r){return t?t.depends_on?Oe(t.depends_on,r):!0:!1}const oo={class:"space-y-6"},ao={key:0,class:"form-group"},ro={key:1,class:"form-group"},no=["for"],io={key:0,class:"text-red-500 ml-1"},uo={class:"relative"},co=["id","onUpdate:modelValue","onBlur","required","placeholder"],mo={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},po=["innerHTML"],fo={key:0,class:"mt-1 text-xs text-red-600"},vo={key:1,class:"mt-1 text-xs text-gray-500"},go={key:2,class:"form-group"},yo=["for"],bo={key:0,class:"text-red-500 ml-1"},xo={class:"relative"},ho=["id","onUpdate:modelValue","onBlur","required"],_o={value:""},wo=["value"],ko={key:0,class:"mt-1 text-xs text-red-600"},Co={key:1,class:"mt-1 text-xs text-gray-500"},$o={key:3,class:"form-group"},Vo={class:"flex items-center h-5"},So=["id","onUpdate:modelValue","onChange","required"],qo={class:"ml-3 text-sm"},To=["for"],Mo={key:0,class:"text-red-500 ml-1"},Do={key:0,class:"mt-1 text-xs text-red-600"},Po={key:1,class:"mt-1 text-xs text-gray-500"},Bo={key:4,class:"form-group"},Io=["for"],jo={key:0,class:"text-red-500 ml-1"},Ao=["id","onUpdate:modelValue","onBlur","required","placeholder"],zo={key:0,class:"mt-1 text-xs text-red-600"},Fo={key:1,class:"mt-1 text-xs text-gray-500"},Ro={key:5,class:"form-group"},No=["for"],Lo={key:0,class:"text-red-500 ml-1"},Eo={class:"relative"},Uo=["id","onUpdate:modelValue","onBlur","required"],Oo={key:0,class:"mt-1 text-xs text-red-600"},Ho={key:1,class:"mt-1 text-xs text-gray-500"},Go={key:6,class:"form-group"},Wo=["for"],Yo={key:0,class:"text-red-500 ml-1"},Ko={class:"relative"},Jo=["id","onUpdate:modelValue","required","placeholder"],Qo={key:0,class:"mt-1 text-xs text-gray-500"},Zo={key:7,class:"form-group"},Xo=["for"],ea={key:0,class:"text-red-500 ml-1"},ta={class:"relative"},sa=["id","onUpdate:modelValue","required","placeholder"],la={key:0,class:"mt-1 text-xs text-gray-500"},oa={key:8,class:"form-group"},aa=["for"],ra={key:0,class:"text-red-500 ml-1"},na={class:"relative"},ia=["id","onUpdate:modelValue","onBlur","required"],ua={key:0,class:"mt-1 text-xs text-red-600"},da={key:1,class:"mt-1 text-xs text-gray-500"},ca={key:9,class:"form-group"},ma={key:10,class:"form-group"},pa={class:"text-sm text-gray-500 italic"},fa={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:r}){const d=t,i=r,a=V({get:()=>d.modelValue,set:u=>i("update:modelValue",u)}),b=V(()=>d.fields.filter(u=>lo(u,a.value))),p=u=>{var c;const l=((c=u.parent_section_code)==null?void 0:c.toLowerCase())||"";return["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(l)&&u.field_name==="address_line"&&u.field_type==="Data"},m=u=>{var s;if(u.placeholder)return u.placeholder;const l=((s=u.field_label)==null?void 0:s.toLowerCase())||"";return l.includes("name")?"e.g., Juan Dela Cruz":l.includes("email")?"e.g., juan@example.com":l.includes("phone")||l.includes("mobile")||l.includes("contact")?"e.g., 0917 123 4567":l.includes("age")?"e.g., 25":l.includes("occupation")?"e.g., Teacher":l.includes("income")||l.includes("salary")?"e.g., 15000":`Enter ${u.field_label}`},f=u=>{var s;const l=((s=u.field_label)==null?void 0:s.toLowerCase())||"";return l.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':l.includes("phone")||l.includes("mobile")||l.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':l.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},x=u=>u?u.split(`
`).map(l=>l.trim()).filter(Boolean):[],{errors:k,validateConfigField:_,clearFieldError:C}=Ue(),M=u=>{if(!u.validation&&!u.is_required){C(u.field_name);return}const l=a.value[u.field_name];_(u.field_name,l,u,a.value)},w=u=>k.value[u]||"";return ne(()=>d.fields,u=>{u.forEach(l=>{l.default_value&&!a.value[l.field_name]&&(l.default_value==="Today"&&l.field_type==="Date"?a.value[l.field_name]=new Date().toISOString().split("T")[0]:a.value[l.field_name]=l.default_value)})},{immediate:!0}),(u,l)=>(o(),n("div",oo,[(o(!0),n(z,null,L(b.value,s=>(o(),n("div",{key:s.field_name,class:"field-wrapper"},[p(s)?(o(),n("div",ao,[j(Xl,{modelValue:a.value[s.field_name],"onUpdate:modelValue":c=>a.value[s.field_name]=c,required:s.is_required},null,8,["modelValue","onUpdate:modelValue","required"])])):s.field_type==="Data"?(o(),n("div",ro,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,g(s.field_label),1),s.is_required?(o(),n("span",io,"*")):y("",!0),s.help_text||s.description?(o(),U(ve,{key:1,text:s.help_text||s.description},null,8,["text"])):y("",!0)],8,no),e("div",uo,[N(e("input",{id:s.field_name,type:"text","onUpdate:modelValue":c=>a.value[s.field_name]=c,onBlur:c=>M(s),required:s.is_required,class:D(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}]),placeholder:m(s)},null,42,co),[[Y,a.value[s.field_name]]]),f(s)?(o(),n("div",mo,[e("span",{innerHTML:f(s),class:"text-gray-400"},null,8,po)])):y("",!0)]),w(s.field_name)?(o(),n("p",fo,g(w(s.field_name)),1)):s.description?(o(),n("p",vo,g(s.description),1)):y("",!0)])):s.field_type==="Select"?(o(),n("div",go,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,g(s.field_label),1),s.is_required?(o(),n("span",bo,"*")):y("",!0),s.help_text||s.description?(o(),U(ve,{key:1,text:s.help_text||s.description},null,8,["text"])):y("",!0)],8,yo),e("div",xo,[N(e("select",{id:s.field_name,"onUpdate:modelValue":c=>a.value[s.field_name]=c,onBlur:c=>M(s),required:s.is_required,class:D(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}])},[e("option",_o,"Select "+g(s.field_label),1),(o(!0),n(z,null,L(x(s.options),c=>(o(),n("option",{key:c,value:c},g(c),9,wo))),128))],42,ho),[[oe,a.value[s.field_name]]]),l[0]||(l[0]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),w(s.field_name)?(o(),n("p",ko,g(w(s.field_name)),1)):s.description?(o(),n("p",Co,g(s.description),1)):y("",!0)])):s.field_type==="Check"?(o(),n("div",$o,[e("div",{class:D(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!w(s.field_name),"border-red-500 bg-red-50":w(s.field_name)}])},[e("div",Vo,[N(e("input",{id:s.field_name,type:"checkbox","onUpdate:modelValue":c=>a.value[s.field_name]=c,onChange:c=>M(s),required:s.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,So),[[ze,a.value[s.field_name]]])]),e("div",qo,[e("label",{for:s.field_name,class:"font-medium text-gray-700 cursor-pointer"},[B(g(s.field_label)+" ",1),s.is_required?(o(),n("span",Mo,"*")):y("",!0)],8,To),w(s.field_name)?(o(),n("p",Do,g(w(s.field_name)),1)):s.description?(o(),n("p",Po,g(s.description),1)):y("",!0)])],2)])):s.field_type==="Text"?(o(),n("div",Bo,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[B(g(s.field_label)+" ",1),s.is_required?(o(),n("span",jo,"*")):y("",!0)],8,Io),N(e("textarea",{id:s.field_name,"onUpdate:modelValue":c=>a.value[s.field_name]=c,onBlur:c=>M(s),required:s.is_required,rows:"4",class:D(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}]),placeholder:m(s)},null,42,Ao),[[Y,a.value[s.field_name]]]),w(s.field_name)?(o(),n("p",zo,g(w(s.field_name)),1)):s.description?(o(),n("p",Fo,g(s.description),1)):y("",!0)])):s.field_type==="Date"?(o(),n("div",Ro,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,g(s.field_label),1),s.is_required?(o(),n("span",Lo,"*")):y("",!0),s.help_text||s.description?(o(),U(ve,{key:1,text:s.help_text||s.description},null,8,["text"])):y("",!0)],8,No),e("div",Eo,[N(e("input",{id:s.field_name,type:"date","onUpdate:modelValue":c=>a.value[s.field_name]=c,onBlur:c=>M(s),required:s.is_required,class:D(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}])},null,42,Uo),[[Y,a.value[s.field_name]]]),l[1]||(l[1]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),w(s.field_name)?(o(),n("p",Oo,g(w(s.field_name)),1)):s.description?(o(),n("p",Ho,g(s.description),1)):y("",!0)])):s.field_type==="Int"?(o(),n("div",Go,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,g(s.field_label),1),s.is_required?(o(),n("span",Yo,"*")):y("",!0),s.help_text||s.description?(o(),U(ve,{key:1,text:s.help_text||s.description},null,8,["text"])):y("",!0)],8,Wo),e("div",Ko,[N(e("input",{id:s.field_name,type:"number","onUpdate:modelValue":c=>a.value[s.field_name]=c,required:s.is_required,step:"1",class:D(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]}]),placeholder:m(s)},null,10,Jo),[[Y,a.value[s.field_name],void 0,{number:!0}]]),l[2]||(l[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),s.description?(o(),n("p",Qo,g(s.description),1)):y("",!0)])):s.field_type==="Float"?(o(),n("div",Zo,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[B(g(s.field_label)+" ",1),s.is_required?(o(),n("span",ea,"*")):y("",!0)],8,Xo),e("div",ta,[N(e("input",{id:s.field_name,type:"number","onUpdate:modelValue":c=>a.value[s.field_name]=c,required:s.is_required,step:"0.01",class:D(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]}]),placeholder:m(s)},null,10,sa),[[Y,a.value[s.field_name],void 0,{number:!0}]]),l[3]||(l[3]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1))]),s.description?(o(),n("p",la,g(s.description),1)):y("",!0)])):s.field_type==="Currency"?(o(),n("div",oa,[e("label",{for:s.field_name,class:"block text-sm font-medium text-gray-700 mb-2"},[B(g(s.field_label)+" ",1),s.is_required?(o(),n("span",ra,"*")):y("",!0)],8,aa),e("div",na,[l[4]||(l[4]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-base font-medium"},"")],-1)),N(e("input",{id:s.field_name,type:"number","onUpdate:modelValue":c=>a.value[s.field_name]=c,onBlur:c=>M(s),required:s.is_required,step:"0.01",class:D(["block w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value[s.field_name]&&!w(s.field_name),"border-red-500 ring-2 ring-red-100":w(s.field_name)}]),placeholder:"0.00"},null,42,ia),[[Y,a.value[s.field_name],void 0,{number:!0}]])]),w(s.field_name)?(o(),n("p",ua,g(w(s.field_name)),1)):s.description?(o(),n("p",da,g(s.description),1)):y("",!0)])):s.field_type==="Attach"||s.field_type==="Attach Image"?(o(),n("div",ca,[j($l,{label:s.field_label,required:s.is_required,accept:s.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:a.value[s.field_name],"onUpdate:modelValue":c=>a.value[s.field_name]=c},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):(o(),n("div",ma,[e("div",pa,' Field type "'+g(s.field_type)+'" not yet supported for '+g(s.field_label),1)]))]))),128))]))}},we=ie(fa,[["__scopeId","data-v-ca8ad65e"]]),va={class:"dynamic-step max-w-4xl mx-auto"},ga={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},ya={class:"flex items-start"},ba={class:"ml-4 flex-1"},xa={class:"text-2xl font-bold text-blue-900"},ha={key:0,class:"mt-2 text-sm text-blue-700"},_a={class:"space-y-6"},wa={class:"mb-4 pb-3 border-b-2 border-gray-200"},ka={class:"flex items-center"},Ca={class:"text-lg font-semibold text-gray-900"},$a={key:0,class:"text-red-500 ml-1"},Va={key:0,class:"text-sm text-gray-600 mt-0.5"},Sa={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},qa={class:"section-content"},Ta={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},Ma={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:r}){const d=t,i=r,a=V({get:()=>d.modelValue,set:m=>i("update:modelValue",m)}),b=V(()=>d.stepConfig.sections?d.stepConfig.sections.filter(m=>so(m,a.value)):[]),p=m=>[m.section_title];return ne(()=>d.stepConfig,m=>{m.sections&&m.sections.forEach(f=>{f.fields.forEach(x=>{x.default_value&&!a.value[x.field_name]&&(x.default_value==="Today"&&x.field_type==="Date"?a.value[x.field_name]=new Date().toISOString().split("T")[0]:a.value[x.field_name]=x.default_value)})})},{immediate:!0,deep:!0}),(m,f)=>(o(),n("div",va,[e("div",ga,[e("div",ya,[f[3]||(f[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",ba,[e("h2",xa,g(t.stepConfig.step_title),1),t.stepDescription?(o(),n("p",ha,g(t.stepDescription),1)):y("",!0)])])]),e("div",_a,[(o(!0),n(z,null,L(b.value,x=>(o(),n("div",{key:x.section_code,class:"section"},[e("div",wa,[e("div",ka,[f[4]||(f[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",Ca,[B(g(x.section_title)+" ",1),x.is_required?(o(),n("span",$a,"*")):y("",!0)]),x.section_description?(o(),n("p",Va,g(x.section_description),1)):y("",!0)])]),x.is_required?(o(),n("div",Sa,[...f[5]||(f[5]=[B(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),B(" are required ",-1)])])):y("",!0)]),e("div",qa,[x.section_type==="Tab"?(o(),U(q(gt),{key:0},{default:A(()=>[j(q(yt),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:A(()=>[(o(!0),n(z,null,L(p(x),(k,_)=>(o(),U(q(bt),{key:_,class:D(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",m.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:A(({selected:C})=>[B(g(k),1)]),_:2},1032,["class"]))),128))]),_:2},1024),j(q(xt),null,{default:A(()=>[(o(!0),n(z,null,L(p(x),(k,_)=>(o(),U(q(ht),{key:_},{default:A(()=>[j(we,{fields:x.fields,modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=C=>a.value=C)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):x.section_type==="Accordion"?(o(),U(q(dt),{key:1},{default:A(({open:k})=>[j(q(ct),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:A(()=>[e("span",null,g(x.section_title),1),j(q(Os),{class:D([k?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),j(q(mt),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:A(()=>[j(we,{fields:x.fields,modelValue:a.value,"onUpdate:modelValue":f[1]||(f[1]=_=>a.value=_)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(o(),n("div",Ta,[j(we,{fields:x.fields,modelValue:a.value,"onUpdate:modelValue":f[2]||(f[2]=k=>a.value=k)},null,8,["fields","modelValue"])]))])]))),128))])]))}},Da=ie(Ma,[["__scopeId","data-v-7850b912"]]),Pa={class:"px-4 sm:px-0"},Ba={class:"space-y-4 sm:space-y-6"},Ia={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6"},ja={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-0"},Aa={class:"text-base sm:text-lg font-semibold text-blue-900"},za={class:"text-xs sm:text-sm text-blue-700 mt-1"},Fa={class:"sm:text-right"},Ra={class:"text-xl sm:text-2xl font-bold text-blue-900"},Na={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},La={class:"p-4 sm:p-6 space-y-3"},Ea={class:"grid md:grid-cols-2 gap-4"},Ua={class:"font-medium"},Oa={class:"font-medium"},Ha={class:"font-medium"},Ga={key:0},Wa={class:"font-medium"},Ya={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Ka={class:"p-4 sm:p-6"},Ja={key:0,class:"space-y-2"},Qa={class:"font-medium"},Za={key:0},Xa={class:"font-medium"},er={key:1,class:"text-gray-500"},tr={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},sr={class:"p-4 sm:p-6 space-y-3"},lr={class:"font-medium"},or={class:"font-medium"},ar={class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},rr={class:"font-semibold text-gray-900 text-sm sm:text-base"},nr={class:"p-4 sm:p-6 space-y-4"},ir={key:0,class:"text-sm font-medium text-gray-700 mb-2"},ur={class:"grid md:grid-cols-2 gap-4"},dr={class:"text-sm text-gray-500"},cr={class:"font-medium"},mr={key:0,class:"text-gray-500 text-sm"},pr={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},fr={class:"p-4 sm:p-6"},vr={class:"space-y-3"},gr={class:"mt-2 flex flex-wrap gap-2"},yr={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},br={key:1,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},xr={key:2,class:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium"},hr={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium"},_r={key:4,class:"px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium"},wr={key:5,class:"text-gray-500"},kr={class:"mt-1 inline-flex items-center"},Cr={key:0},$r={class:"font-medium break-words"},Vr={key:0,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Sr={class:"p-4 sm:p-6"},qr={class:"flex flex-wrap gap-2"},Tr={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},Mr={key:1,class:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},Dr={key:2,class:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},Pr={key:3,class:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm font-medium inline-flex items-center gap-1"},Br={key:1,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Ir={class:"p-4 sm:p-6"},jr={class:"space-y-3"},Ar={class:"font-medium"},zr={key:0},Fr={class:"text-sm mt-1 line-clamp-3"},Rr={key:1},Nr={class:"text-sm mt-1 line-clamp-3"},Lr={class:"flex items-center gap-2"},Er={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Ur={class:"p-4 sm:p-6"},Or={class:"space-y-4"},Hr={key:0},Gr=["innerHTML"],Wr={key:1},Yr=["innerHTML"],Kr={key:2},Jr={class:"text-sm mt-1 line-clamp-3"},Qr={key:3},Zr={class:"text-sm mt-1 space-y-1 list-disc list-inside"},Xr={key:0},en={key:1},tn={key:2},sn={key:4},ln=["innerHTML"],on={key:5,class:"text-gray-500 text-sm"},an={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},rn={class:"p-4 sm:p-6"},nn={class:"space-y-2"},un={class:"flex items-start gap-2"},dn={class:"flex items-start gap-2"},cn={class:"flex items-start gap-2"},mn={key:0,class:"mt-4 pt-4 border-t border-gray-200"},pn={class:"font-medium"},fn={key:0,class:"text-sm text-gray-500"},vn={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},gn={__name:"ReviewStep",props:{modelValue:{type:Object,required:!0},councilName:{type:String,default:"Council"},requestTypeName:{type:String,default:"Application"},applicationFee:{type:String,default:"TBD"},isResourceConsent:{type:Boolean,default:!1},stepConfigs:{type:Array,default:()=>[]},usesConfigurableSteps:{type:Boolean,default:!1},requestTypeDetails:{type:Object,default:null}},setup(t){const r=t,d=V(()=>!r.usesConfigurableSteps||!r.stepConfigs?[]:r.stepConfigs.filter(u=>u.show_on_review)),i=V(()=>r.isResourceConsent?!0:!!(r.modelValue.property||r.modelValue.property_address)),a=u=>{if(!u.sections)return!1;for(const l of u.sections)if(l.show_on_review){for(const s of l.fields)if(s.show_on_review&&r.modelValue[s.field_name])return!0}return!1},b=(u,l)=>{if(l==null||l==="")return"Not provided";if(u.field_type==="Check")return l?"Yes":"No";if(u.field_type==="Date"&&l)try{return new Date(l).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(s){return l}return u.field_type==="Currency"&&l?`${Number(l).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`:u.field_type==="Select"?l:u.field_type==="Attach"||u.field_type==="Attach Image"?l?" File attached":"Not provided":l},p=V(()=>!!(r.modelValue.consent_type_land_use||r.modelValue.consent_type_subdivision||r.modelValue.consent_type_discharge||r.modelValue.consent_type_water||r.modelValue.consent_type_coastal)),m=V(()=>{const u=r.modelValue.activity_status_type;return u==="Permitted"?"bg-green-100 text-green-800":u==="Controlled"?"bg-blue-100 text-blue-800":u==="Restricted Discretionary"?"bg-yellow-100 text-yellow-800":u==="Discretionary"?"bg-orange-100 text-orange-800":u==="Non-Complying"?"bg-red-100 text-red-800":u==="Prohibited"?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}),f=V(()=>!!(r.modelValue.hazard_flooding||r.modelValue.hazard_earthquake||r.modelValue.hazard_landslip||r.modelValue.hazard_coastal)),x=V(()=>!!(r.modelValue.consultation_undertaken||r.modelValue.consultation_summary||r.modelValue.affected_parties_details||r.modelValue.written_approvals_obtained)),k=V(()=>!!(r.modelValue.activity_description||r.modelValue.aee_full_assessment||r.modelValue.positive_effects_description||r.modelValue.effects_visual_amenity||r.modelValue.effects_traffic_parking||r.modelValue.effects_noise||r.modelValue.mitigation_measures||r.modelValue.aee_activity_description||r.modelValue.aee_existing_environment||r.modelValue.assessment_of_effects||r.modelValue.aee_document)),_=u=>{if(!u)return"";const l=document.createElement("div");return l.innerHTML=u,l.textContent||l.innerText||""},C=(u,l)=>{if(!u)return"";const s=_(u);return s.length<=l?s:s.substring(0,l)+"..."},M=u=>{if(!u)return"";try{return new Date(u).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(l){return u}},w=V(()=>{const u=!!(r.modelValue.council&&r.modelValue.request_type&&r.modelValue.requester_name&&r.modelValue.requester_email&&r.modelValue.property_address&&r.modelValue.delivery_preference);if(r.isResourceConsent){const l=!!(p.value&&r.modelValue.activity_status_type&&r.modelValue.activity_description&&r.modelValue.aee_full_assessment&&r.modelValue.declaration_accuracy&&r.modelValue.declaration_authority&&r.modelValue.declaration_acknowledgment);return u&&l}return u});return(u,l)=>{var s;return o(),n("div",Pa,[l[39]||(l[39]=e("h2",{class:"text-xl sm:text-2xl font-bold text-gray-900 mb-2"},"Review & Submit",-1)),l[40]||(l[40]=e("p",{class:"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8"},"Review your application details before submitting",-1)),e("div",Ba,[e("div",Ia,[e("div",ja,[e("div",null,[e("h3",Aa,g(t.requestTypeName),1),e("p",za,g(t.councilName),1)]),e("div",Fa,[l[0]||(l[0]=e("div",{class:"text-xs sm:text-sm text-blue-600 font-medium"},"Application Fee",-1)),e("div",Ra,g(t.applicationFee),1)])])]),e("div",Na,[l[5]||(l[5]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Applicant Details")],-1)),e("div",La,[e("div",Ea,[e("div",null,[l[1]||(l[1]=e("span",{class:"text-sm text-gray-500"},"Name:",-1)),e("p",Ua,g(t.modelValue.requester_name||"Not provided"),1)]),e("div",null,[l[2]||(l[2]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("p",Oa,g(t.modelValue.requester_email||"Not provided"),1)]),e("div",null,[l[3]||(l[3]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("p",Ha,g(t.modelValue.requester_phone||"Not provided"),1)]),t.modelValue.applicant_company?(o(),n("div",Ga,[l[4]||(l[4]=e("span",{class:"text-sm text-gray-500"},"Company:",-1)),e("p",Wa,g(t.modelValue.applicant_company),1)])):y("",!0)])])]),i.value?(o(),n("div",Ya,[l[8]||(l[8]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Property Details")],-1)),e("div",Ka,[t.modelValue.property_address?(o(),n("div",Ja,[e("div",null,[l[6]||(l[6]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("p",Qa,g(t.modelValue.property_address),1)]),t.modelValue.legal_description?(o(),n("div",Za,[l[7]||(l[7]=e("span",{class:"text-sm text-gray-500"},"Legal Description:",-1)),e("p",Xa,g(t.modelValue.legal_description),1)])):y("",!0)])):(o(),n("p",er,"No property selected"))])])):y("",!0),(s=t.requestTypeDetails)!=null&&s.collect_payment?(o(),n("div",tr,[l[11]||(l[11]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Delivery & Payment")],-1)),e("div",sr,[e("div",null,[l[9]||(l[9]=e("span",{class:"text-sm text-gray-500"},"Delivery Preference:",-1)),e("p",lr,g(t.modelValue.delivery_preference||"Not selected"),1)]),e("div",null,[l[10]||(l[10]=e("span",{class:"text-sm text-gray-500"},"Invoice To:",-1)),e("p",or,g(t.modelValue.invoice_to||"Not specified"),1)])])])):y("",!0),t.usesConfigurableSteps&&d.value.length>0?(o(!0),n(z,{key:2},L(d.value,c=>(o(),n("div",{key:c.step_code,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},[e("div",ar,[e("h3",rr,g(c.step_title),1)]),e("div",nr,[(o(!0),n(z,null,L(c.sections.filter(S=>S.show_on_review),S=>(o(),n("div",{key:S.section_code},[S.section_title?(o(),n("h4",ir,g(S.section_title),1)):y("",!0),e("div",ur,[(o(!0),n(z,null,L(S.fields.filter(P=>P.show_on_review),P=>(o(),n("div",{key:P.field_name},[e("span",dr,g(P.review_label||P.field_label)+":",1),e("p",cr,g(b(P,t.modelValue[P.field_name])),1)]))),128))])]))),128)),a(c)?y("",!0):(o(),n("p",mr," No information to display for review "))])]))),128)):y("",!0),t.isResourceConsent?(o(),n(z,{key:3},[e("div",pr,[l[15]||(l[15]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consent Types & Activity Status")],-1)),e("div",fr,[e("div",vr,[e("div",null,[l[12]||(l[12]=e("span",{class:"text-sm text-gray-500"},"Consent Types:",-1)),e("div",gr,[t.modelValue.consent_type_land_use?(o(),n("span",yr," Land Use Consent ")):y("",!0),t.modelValue.consent_type_subdivision?(o(),n("span",br," Subdivision Consent ")):y("",!0),t.modelValue.consent_type_discharge?(o(),n("span",xr," Discharge Permit ")):y("",!0),t.modelValue.consent_type_water?(o(),n("span",hr," Water Permit ")):y("",!0),t.modelValue.consent_type_coastal?(o(),n("span",_r," Coastal Permit ")):y("",!0),p.value?y("",!0):(o(),n("span",wr," None selected "))])]),e("div",null,[l[13]||(l[13]=e("span",{class:"text-sm text-gray-500"},"Activity Status:",-1)),e("div",kr,[e("span",{class:D(["px-3 py-1 rounded-full text-sm font-medium",m.value])},g(t.modelValue.activity_status_type||"Not specified"),3)])]),t.modelValue.activity_title?(o(),n("div",Cr,[l[14]||(l[14]=e("span",{class:"text-sm text-gray-500"},"Activity Title:",-1)),e("p",$r,g(t.modelValue.activity_title),1)])):y("",!0)])])]),f.value?(o(),n("div",Vr,[l[20]||(l[20]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Natural Hazards")],-1)),e("div",Sr,[e("div",qr,[t.modelValue.hazard_flooding?(o(),n("span",Tr,[...l[16]||(l[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"})],-1),B(" Flood Hazard ",-1)])])):y("",!0),t.modelValue.hazard_earthquake?(o(),n("span",Mr,[...l[17]||(l[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),B(" Earthquake/Fault Line ",-1)])])):y("",!0),t.modelValue.hazard_landslip?(o(),n("span",Dr,[...l[18]||(l[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1),B(" Landslip/Slope Instability ",-1)])])):y("",!0),t.modelValue.hazard_coastal?(o(),n("span",Pr,[...l[19]||(l[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5"})],-1),B(" Coastal Hazard ",-1)])])):y("",!0)])])])):y("",!0),x.value?(o(),n("div",Br,[l[25]||(l[25]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Consultation & Affected Parties")],-1)),e("div",Ir,[e("div",jr,[e("div",null,[l[21]||(l[21]=e("span",{class:"text-sm text-gray-500"},"Consultation Undertaken:",-1)),e("p",Ar,g(t.modelValue.consultation_undertaken||"Not specified"),1)]),t.modelValue.consultation_summary?(o(),n("div",zr,[l[22]||(l[22]=e("span",{class:"text-sm text-gray-500"},"Consultation Summary:",-1)),e("p",Fr,g(t.modelValue.consultation_summary),1)])):y("",!0),t.modelValue.affected_parties_details?(o(),n("div",Rr,[l[23]||(l[23]=e("span",{class:"text-sm text-gray-500"},"Affected Parties:",-1)),e("p",Nr,g(_(t.modelValue.affected_parties_details)),1)])):y("",!0),e("div",Lr,[(o(),n("svg",{class:D(["w-5 h-5",t.modelValue.written_approvals_obtained?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[24]||(l[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:D(t.modelValue.written_approvals_obtained?"text-gray-900":"text-gray-500")}," Written Approvals "+g(t.modelValue.written_approvals_obtained?"Obtained":"Not Obtained"),3)])])])])):y("",!0),e("div",Er,[l[31]||(l[31]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Assessment of Environmental Effects")],-1)),e("div",Ur,[e("div",Or,[t.modelValue.activity_description?(o(),n("div",Hr,[l[26]||(l[26]=e("span",{class:"text-sm text-gray-500"},"Activity Description:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.activity_description},null,8,Gr)])):y("",!0),t.modelValue.aee_full_assessment?(o(),n("div",Wr,[l[27]||(l[27]=e("span",{class:"text-sm text-gray-500"},"Full Assessment:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.aee_full_assessment},null,8,Yr)])):y("",!0),t.modelValue.positive_effects_description?(o(),n("div",Kr,[l[28]||(l[28]=e("span",{class:"text-sm text-gray-500"},"Positive Effects:",-1)),e("p",Jr,g(t.modelValue.positive_effects_description),1)])):y("",!0),t.modelValue.effects_visual_amenity||t.modelValue.effects_traffic_parking||t.modelValue.effects_noise?(o(),n("div",Qr,[l[29]||(l[29]=e("span",{class:"text-sm text-gray-500"},"Adverse Effects Summary:",-1)),e("ul",Zr,[t.modelValue.effects_visual_amenity?(o(),n("li",Xr,"Visual/Amenity: "+g(C(t.modelValue.effects_visual_amenity,50)),1)):y("",!0),t.modelValue.effects_traffic_parking?(o(),n("li",en,"Traffic/Parking: "+g(C(t.modelValue.effects_traffic_parking,50)),1)):y("",!0),t.modelValue.effects_noise?(o(),n("li",tn,"Noise: "+g(C(t.modelValue.effects_noise,50)),1)):y("",!0)])])):y("",!0),t.modelValue.mitigation_measures?(o(),n("div",sn,[l[30]||(l[30]=e("span",{class:"text-sm text-gray-500"},"Mitigation Measures:",-1)),e("div",{class:"text-sm mt-1 line-clamp-3",innerHTML:t.modelValue.mitigation_measures},null,8,ln)])):y("",!0),k.value?y("",!0):(o(),n("p",on," AEE not yet completed "))])])]),e("div",an,[l[36]||(l[36]=e("div",{class:"bg-gray-50 px-4 sm:px-6 py-3 border-b border-gray-200"},[e("h3",{class:"font-semibold text-gray-900 text-sm sm:text-base"},"Statutory Declarations")],-1)),e("div",rn,[e("div",nn,[e("div",un,[(o(),n("svg",{class:D(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_accuracy||t.modelValue.declaration_rma_compliance?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[32]||(l[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:D(["text-sm",t.modelValue.declaration_accuracy||t.modelValue.declaration_rma_compliance?"text-gray-900":"text-gray-500"])}," Declaration of Accuracy & RMA Compliance ",2)]),e("div",dn,[(o(),n("svg",{class:D(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_authority||t.modelValue.declaration_authorized?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[33]||(l[33]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:D(["text-sm",t.modelValue.declaration_authority||t.modelValue.declaration_authorized?"text-gray-900":"text-gray-500"])}," Declaration of Authority to Apply ",2)]),e("div",cn,[(o(),n("svg",{class:D(["w-5 h-5 flex-shrink-0 mt-0.5",t.modelValue.declaration_acknowledgment||t.modelValue.declaration_public_information?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[34]||(l[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),e("span",{class:D(["text-sm",t.modelValue.declaration_acknowledgment||t.modelValue.declaration_public_information?"text-gray-900":"text-gray-500"])}," Public Information & Privacy Acknowledgment ",2)]),t.modelValue.requester_signature?(o(),n("div",mn,[l[35]||(l[35]=e("span",{class:"text-sm text-gray-500"},"Signed by:",-1)),e("p",pn,g(t.modelValue.requester_signature),1),t.modelValue.signature_date?(o(),n("p",fn," Date: "+g(M(t.modelValue.signature_date)),1)):y("",!0)])):y("",!0)])])])],64)):y("",!0),l[38]||(l[38]=ae('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6" data-v-43d60ff6><div class="flex items-start gap-2 sm:gap-3" data-v-43d60ff6><svg class="w-5 h-5 sm:w-6 sm:h-6 text-yellow-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-43d60ff6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-43d60ff6></path></svg><div data-v-43d60ff6><h4 class="font-semibold text-yellow-900 text-sm sm:text-base" data-v-43d60ff6>Before You Submit</h4><ul class="mt-2 text-xs sm:text-sm text-yellow-800 space-y-1 list-disc list-inside" data-v-43d60ff6><li data-v-43d60ff6>Review all information carefully for accuracy and completeness</li><li data-v-43d60ff6>Ensure all required fields are completed</li><li data-v-43d60ff6>For Resource Consent applications, verify all statutory declarations are confirmed</li><li data-v-43d60ff6>Once submitted, you cannot edit the application (you may need to withdraw and resubmit)</li></ul></div></div></div>',1)),w.value?y("",!0):(o(),n("div",vn,[...l[37]||(l[37]=[ae('<div class="flex items-start gap-2 sm:gap-3" data-v-43d60ff6><svg class="w-5 h-5 text-red-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-43d60ff6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-43d60ff6></path></svg><div data-v-43d60ff6><h5 class="font-semibold text-red-900 text-xs sm:text-sm" data-v-43d60ff6>Application Incomplete</h5><p class="text-red-800 text-xs sm:text-sm mt-1" data-v-43d60ff6> Please complete all required sections before submitting. Use the Previous button to go back and fill in missing information. </p></div></div>',1)])]))])])}}},yn=ie(gn,[["__scopeId","data-v-43d60ff6"]]),bn={class:"min-h-screen bg-gray-50"},xn={class:"bg-white shadow-sm border-b border-gray-200"},hn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},_n={class:"flex items-center justify-between py-4"},wn={class:"flex items-center space-x-3"},kn={class:"text-sm text-gray-500"},Cn={class:"flex items-center gap-2"},$n={class:"bg-white border-b border-gray-200"},Vn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Sn={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},qn={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},Tn={key:0},Mn={key:1},Dn={key:2},Pn={key:4},zn={__name:"NewRequest",setup(t){const r=at(),d=Ae(),i=_t(),a=rt(),{errors:b,validateStep:p}=Ue(),m=T(!1),f=T(!1),x=T([]),k=T(null),_=V(()=>{var h;return(h=i.requestTypeConfig)!=null&&h.steps?i.requestTypeConfig.steps.length+3:9}),C=V(()=>{var v;const h=["Council","Type","Process Info"];return(v=i.requestTypeConfig)!=null&&v.steps&&h.push(...i.requestTypeConfig.steps.map($=>$.step_title)),h}),M=V(()=>{var h;return((h=i.requestTypeConfig)==null?void 0:h.steps)&&i.requestTypeConfig.steps.length>0}),w=V(()=>!0);function u(){var v,$;const h=i.currentStep;if(h===0)return"Council";if(h===1)return"Type";if(h===2)return"Process Info";if(h===_.value-1)return"Review";if((v=i.requestTypeConfig)!=null&&v.steps){const O=h-3;return($=i.requestTypeConfig.steps[O])==null?void 0:$.step_title}return""}function l(){var v;const h=i.currentStep;if(h<=2||h===_.value-1)return null;if((v=i.requestTypeConfig)!=null&&v.steps){const $=h-3;return i.requestTypeConfig.steps[$]}return null}function s(){const h=i.formData.council;if(!h)return"";const v=a.councils.find($=>$.council_code===h);return(v==null?void 0:v.council_name)||h}function c(h){return F(this,null,function*(){yield a.loadRequestTypesForCouncil(h),x.value=a.requestTypes||[]})}function S(h){return F(this,null,function*(){yield i.initialize(h),k.value=i.requestTypeConfig})}function P(){return F(this,null,function*(){const h=l();if(h&&!(yield p(h,i.formData))){f.value=!0;return}i.currentRequestId&&(yield i.saveProgress()),i.nextStep()})}function R(){i.previousStep()}function H(){return F(this,null,function*(){try{yield i.saveDraft(),m.value=!0}catch(h){console.error("Failed to save draft:",h)}})}function K(){return F(this,null,function*(){var h;if((h=i.requestTypeConfig)!=null&&h.steps){for(const v of i.requestTypeConfig.steps)if(!(yield p(v,i.formData))){f.value=!0;return}}try{yield i.submitRequest(),d.push("/dashboard")}catch(v){console.error("Failed to submit request:",v)}})}function de(){d.push("/dashboard")}return J(()=>F(this,null,function*(){const h=r.query.type,v=r.query.draft;h&&(yield i.initialize(h,v),k.value=i.requestTypeConfig)})),(h,v)=>(o(),n("div",bn,[e("header",xn,[e("div",hn,[e("div",_n,[e("div",wn,[e("button",{onClick:de,class:"text-gray-500 hover:text-gray-700"},[...v[7]||(v[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),e("div",null,[v[8]||(v[8]=e("h1",{class:"text-xl font-bold text-gray-900"},"New Application",-1)),e("p",kn,"Step "+g(q(i).currentStep+1)+" of "+g(_.value),1)])]),e("div",Cn,[j(q(le),{onClick:H,variant:"outline",theme:"gray",loading:q(i).isSaving},{default:A(()=>[...v[9]||(v[9]=[B(" Save Draft ",-1)])]),_:1},8,["loading"])])])])]),e("div",$n,[e("div",Vn,[j(Rt,{"current-step":q(i).currentStep,"total-steps":_.value,"step-titles":C.value},null,8,["current-step","total-steps","step-titles"])])]),e("main",Sn,[e("div",qn,[u()==="Council"?(o(),n("div",Tn,[j(Xt,{modelValue:q(i).formData,"onUpdate:modelValue":v[0]||(v[0]=$=>q(i).formData=$),onCouncilChange:c},null,8,["modelValue"])])):u()==="Type"?(o(),n("div",Mn,[j(ms,{modelValue:q(i).formData,"onUpdate:modelValue":v[1]||(v[1]=$=>q(i).formData=$),"request-types":x.value,onTypeSelected:S},null,8,["modelValue","request-types"])])):u()==="Process Info"?(o(),n("div",Dn,[j(Us,{"request-type-details":k.value,"council-name":s(),modelValue:q(i).formData,"onUpdate:modelValue":v[2]||(v[2]=$=>q(i).formData=$)},null,8,["request-type-details","council-name","modelValue"])])):M.value&&l()?(o(),U(Da,{key:3,stepConfig:l(),modelValue:q(i).formData,"onUpdate:modelValue":v[3]||(v[3]=$=>q(i).formData=$)},null,8,["stepConfig","modelValue"])):u()==="Review"?(o(),n("div",Pn,[j(yn,{modelValue:q(i).formData,"onUpdate:modelValue":v[4]||(v[4]=$=>q(i).formData=$),"request-type-config":q(i).requestTypeConfig},null,8,["modelValue","request-type-config"])])):y("",!0)]),j(Ut,{"current-step":q(i).currentStep,"total-steps":_.value,"is-last-step":q(i).isLastStep,"can-go-next":w.value,"is-saving":q(i).isSaving,"is-submitting":q(i).isSubmitting,onNext:P,onPrevious:R,onSaveDraft:H,onSubmit:K},null,8,["current-step","total-steps","is-last-step","can-go-next","is-saving","is-submitting"])]),j(Gt,{show:m.value,"onUpdate:show":v[5]||(v[5]=$=>m.value=$),"draft-id":q(i).currentRequestId},null,8,["show","draft-id"]),j(Zt,{show:f.value,"onUpdate:show":v[6]||(v[6]=$=>f.value=$),errors:q(b)},null,8,["show","errors"])]))}};export{zn as default};
//# sourceMappingURL=NewRequest-Dr7PnTOZ.js.map
