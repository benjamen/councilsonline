import{f as _,H as M,q as S,r as b,z as q,p as B,c as a,o as n,a as t,g,n as j,d as f,b as l,A as i,u as o,I as d,t as N,w as x,F as w,h as v,i as V}from"./index-Dixf48mA.js";import{C as z}from"./CouncilSelector-CSxVvHQn.js";const A={class:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100 flex items-center justify-center p-4"},F={class:"w-full max-w-2xl"},P={class:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100"},R={class:"grid grid-cols-3 gap-3"},H={class:"grid md:grid-cols-2 gap-4"},D={key:0,class:"space-y-4"},L={key:1,class:"space-y-4"},T={class:"grid md:grid-cols-2 gap-4"},I={key:2,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},O={class:"flex items-start"},$={class:"text-sm text-red-700"},E={class:"text-center mt-6"},J={class:"text-sm text-gray-600"},U={class:"text-center mt-4"},K={__name:"Register",setup(Y){const k=_();M();const y=S(),r=b("ratepayer"),p=b(null),c=b(!1),m=b("");q(()=>{y.preselectedFromUrl&&(p.value=y.preselectedFromUrl)});function C(h){const e=new FormData(h.target);if(e.get("password")!==e.get("confirm_password")){m.value="Passwords do not match";return}m.value="",c.value=!0;const u={email:e.get("email"),first_name:e.get("first_name"),last_name:e.get("last_name"),phone:e.get("phone"),password:e.get("password"),account_type:r.value};r.value==="ratepayer"?u.property_address=e.get("property_address"):r.value==="supplier"&&(u.company_name=e.get("company_name"),u.company_number=e.get("company_number")),p.value&&(u.council_code=p.value),fetch("/api/method/lodgeick.api.register_user",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify(u)}).then(s=>s.json()).then(s=>{c.value=!1,s.message&&s.message.success?k.push({name:"Login",query:{registered:"true"}}):s.exc&&(m.value="Registration failed. Please try again.",console.error("Registration error:",s.exc))}).catch(s=>{c.value=!1,m.value="Network error. Please check your connection and try again.",console.error("Registration error:",s)})}return(h,e)=>{const u=B("router-link");return n(),a("div",A,[t("div",F,[e[23]||(e[23]=g('<div class="text-center mb-8"><div class="inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-2xl mb-4 shadow-lg"><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h1 class="text-3xl font-bold text-gray-900 mb-2">Create Your Account</h1><p class="text-gray-600">Join thousands using Lodgeick for council requests</p></div>',1)),t("div",P,[t("form",{onSubmit:j(C,["prevent"]),class:"space-y-6"},[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," I am registering as a ",-1)),t("div",R,[t("button",{type:"button",onClick:e[0]||(e[0]=s=>r.value="ratepayer"),class:i(["p-4 border-2 rounded-lg text-center transition",r.value==="ratepayer"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"])},[(n(),a("svg",{class:i(["w-8 h-8 mx-auto mb-2",r.value==="ratepayer"?"text-blue-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),t("div",{class:i(["text-sm font-medium",r.value==="ratepayer"?"text-blue-900":"text-gray-700"])}," Ratepayer ",2)],2),t("button",{type:"button",onClick:e[1]||(e[1]=s=>r.value="civilian"),class:i(["p-4 border-2 rounded-lg text-center transition",r.value==="civilian"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"])},[(n(),a("svg",{class:i(["w-8 h-8 mx-auto mb-2",r.value==="civilian"?"text-blue-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])],2)),t("div",{class:i(["text-sm font-medium",r.value==="civilian"?"text-blue-900":"text-gray-700"])}," Civilian ",2)],2),t("button",{type:"button",onClick:e[2]||(e[2]=s=>r.value="supplier"),class:i(["p-4 border-2 rounded-lg text-center transition",r.value==="supplier"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"])},[(n(),a("svg",{class:i(["w-8 h-8 mx-auto mb-2",r.value==="supplier"?"text-blue-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)])],2)),t("div",{class:i(["text-sm font-medium",r.value==="supplier"?"text-blue-900":"text-gray-700"])}," Supplier ",2)],2)])]),t("div",null,[l(z,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=s=>p.value=s),label:"Default Council (Optional)",description:"Select your preferred council for submitting requests. You can change this later.","display-mode":"dropdown",required:!1,"show-clear-button":!0},null,8,["modelValue"])]),t("div",H,[t("div",null,[e[8]||(e[8]=t("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mb-2"}," First Name ",-1)),l(o(d),{id:"first_name",name:"first_name",type:"text",required:"",placeholder:"John",class:"w-full"})]),t("div",null,[e[9]||(e[9]=t("label",{for:"last_name",class:"block text-sm font-medium text-gray-700 mb-2"}," Last Name ",-1)),l(o(d),{id:"last_name",name:"last_name",type:"text",required:"",placeholder:"Doe",class:"w-full"})])]),t("div",null,[e[10]||(e[10]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address ",-1)),l(o(d),{id:"email",name:"email",type:"email",required:"",placeholder:"you@example.com",class:"w-full"})]),t("div",null,[e[11]||(e[11]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Phone Number ",-1)),l(o(d),{id:"phone",name:"phone",type:"tel",required:"",placeholder:"+64 21 123 4567",class:"w-full"})]),r.value==="ratepayer"?(n(),a("div",D,[t("div",null,[e[12]||(e[12]=t("label",{for:"property_address",class:"block text-sm font-medium text-gray-700 mb-2"}," Property Address ",-1)),l(o(d),{id:"property_address",name:"property_address",type:"text",required:"",placeholder:"123 Main Street, Auckland",class:"w-full"})])])):f("",!0),r.value==="supplier"?(n(),a("div",L,[t("div",null,[e[13]||(e[13]=t("label",{for:"company_name",class:"block text-sm font-medium text-gray-700 mb-2"}," Company Name ",-1)),l(o(d),{id:"company_name",name:"company_name",type:"text",required:"",placeholder:"ABC Construction Ltd",class:"w-full"})]),t("div",null,[e[14]||(e[14]=t("label",{for:"company_number",class:"block text-sm font-medium text-gray-700 mb-2"}," Company Number (Optional) ",-1)),l(o(d),{id:"company_number",name:"company_number",type:"text",placeholder:"1234567",class:"w-full"})])])):f("",!0),t("div",T,[t("div",null,[e[15]||(e[15]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," Password ",-1)),l(o(d),{id:"password",name:"password",type:"password",required:"",placeholder:"Min. 8 characters",class:"w-full"})]),t("div",null,[e[16]||(e[16]=t("label",{for:"confirm_password",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirm Password ",-1)),l(o(d),{id:"confirm_password",name:"confirm_password",type:"password",required:"",placeholder:"Repeat password",class:"w-full"})])]),e[18]||(e[18]=g('<div class="flex items-start"><input id="terms" name="terms" type="checkbox" required class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1"><label for="terms" class="ml-2 block text-sm text-gray-700"> I agree to the <a href="#" class="text-blue-600 hover:text-blue-700 font-medium">Terms of Service</a> and <a href="#" class="text-blue-600 hover:text-blue-700 font-medium">Privacy Policy</a></label></div>',1)),m.value?(n(),a("div",I,[t("div",O,[e[17]||(e[17]=t("svg",{class:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",$,N(m.value),1)])])):f("",!0),l(o(V),{type:"submit",loading:c.value,variant:"solid",class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 text-base font-medium"},{default:x(()=>[c.value?(n(),a(w,{key:1},[v(" Creating account... ")],64)):(n(),a(w,{key:0},[v(" Create Account ")],64))]),_:1},8,["loading"])],32),e[19]||(e[19]=g('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-white text-gray-500">or</span></div></div><div class="space-y-3"><button type="button" class="w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition"><svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg> Sign up with Google </button></div>',2))]),t("div",E,[t("p",J,[e[21]||(e[21]=v(" Already have an account? ",-1)),l(u,{to:{name:"Login"},class:"font-medium text-blue-600 hover:text-blue-700"},{default:x(()=>[...e[20]||(e[20]=[v(" Sign in ",-1)])]),_:1})])]),t("div",U,[l(u,{to:"/",class:"text-sm text-gray-500 hover:text-gray-700 inline-flex items-center"},{default:x(()=>[...e[22]||(e[22]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),v(" Back to home ",-1)])]),_:1})])])])}}};export{K as default};
//# sourceMappingURL=Register-Bf4Kb5rV.js.map
