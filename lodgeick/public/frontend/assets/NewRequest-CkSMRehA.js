var S=(P,C,i)=>new Promise((_,y)=>{var m=s=>{try{g(i.next(s))}catch(c){y(c)}},V=s=>{try{g(i.throw(s))}catch(c){y(c)}},g=s=>s.done?_(s.value):Promise.resolve(s.value).then(m,V);g((i=i.apply(P,C)).next())});import{f as Z,j as k,at as N,r as Q,c as a,o as r,a as t,d as b,t as n,w as f,h as x,H as D,I as B,an as h,b as p,u as v,av as M,aw as R,au as w,g as E,ay as ee,az as te,E as A}from"./index-C9ps62F8.js";const se={class:"min-h-screen bg-gray-50"},le={class:"bg-white shadow-sm border-b border-gray-200"},oe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},re={class:"flex items-center justify-between py-4"},ae={class:"flex items-center space-x-3"},ie={class:"text-sm text-gray-500"},ne={class:"bg-white border-b border-gray-200"},de={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},ue={class:"flex items-center justify-between mb-2"},pe={class:"flex flex-col items-center"},me={key:0},ve={key:1},ce={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},be={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},fe={key:0},ge={key:0,class:"text-center py-12"},xe={key:1,class:"grid md:grid-cols-2 gap-4"},ye=["onClick"],ke={class:"flex items-start justify-between"},we={class:"flex-1"},_e={class:"text-lg font-semibold text-gray-900 mb-2"},he={class:"text-sm text-gray-600"},Ce={class:"mt-4 flex items-center space-x-4 text-xs text-gray-500"},Ve={key:0},De={key:1},Be={key:0,class:"ml-4"},Me={key:1},Se={class:"space-y-6"},Ae=["value"],je={key:0,class:"space-y-4"},Pe={class:"grid md:grid-cols-2 gap-4"},qe={key:2},Ue={class:"space-y-6"},Fe={class:"grid md:grid-cols-2 gap-4"},Ne={key:3},Re={class:"space-y-6"},Ee={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition"},Te={key:0,class:"space-y-2"},ze={class:"font-medium text-gray-900"},Ie={class:"flex items-center space-x-3"},$e={class:"text-sm font-medium text-gray-900"},Le={class:"text-xs text-gray-500"},Ge=["onClick"],He={key:4},Oe={class:"space-y-6"},We={class:"border border-gray-200 rounded-lg p-6"},Je={class:"grid md:grid-cols-2 gap-4 text-sm"},Ke={class:"font-medium text-gray-900 mt-1"},Xe={class:"font-medium text-gray-900 mt-1"},Ye={class:"font-medium text-gray-900 mt-1"},Ze={class:"font-medium text-gray-900 mt-1"},Qe={class:"font-medium text-gray-900 mt-1"},et={class:"bg-gray-50 border border-gray-200 rounded-lg p-6"},tt={class:"flex items-start"},st={class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},lt={class:"space-y-2 text-sm"},ot={class:"flex justify-between"},rt={class:"font-medium text-blue-900"},at={class:"flex justify-between pt-2 border-t border-blue-200"},it={class:"text-lg font-bold text-blue-900"},nt={class:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200"},dt={key:1},ut={class:"flex space-x-3"},j=5,ct={__name:"NewRequest",setup(P){const C=Z(),i=k(1),_=k(!1),y=k(!1),m=k([]),V=k(null),g=[{title:"Type",number:1},{title:"Property",number:2},{title:"Details",number:3},{title:"Documents",number:4},{title:"Review",number:5}],s=k({request_type:"",property:"",property_address:"",legal_description:"",valuation_reference:"",zone:"",brief_description:"",detailed_description:"",estimated_value:null,proposed_start_date:"",terms_accepted:!1}),c=N({url:"lodgeick.lodgeick.doctype.request_type.request_type.get_active_request_types",auto:!0}),q=N({url:"frappe.client.get_list",params:{doctype:"Property",fields:["name","property_id","address"],limit_page_length:100},auto:!0}),T=()=>{confirm("Are you sure you want to leave? Any unsaved changes will be lost.")&&C.push({name:"Dashboard"})},z=o=>o<i.value||o===i.value?"bg-blue-600 text-white":"bg-gray-200 text-gray-600",I=o=>{s.value.request_type=o.name},$=()=>{if(s.value.property){const o=q.data.find(e=>e.name===s.value.property);o&&(s.value.property_address=o.address)}},U=()=>{switch(i.value){case 1:return!!s.value.request_type;case 2:return!!s.value.property_address;case 3:return!!s.value.brief_description&&!!s.value.detailed_description;case 4:return!0;default:return!0}},L=()=>{U()&&i.value<j&&i.value++},G=()=>{i.value>1&&i.value--},H=()=>S(this,null,function*(){_.value=!0;try{console.log("Saving draft...",s.value),alert("Draft saved successfully!")}catch(o){console.error("Error saving draft:",o),alert("Failed to save draft")}finally{_.value=!1}}),O=()=>{V.value.click()},W=o=>{const e=Array.from(o.target.files);m.value.push(...e)},J=o=>{m.value.splice(o,1)},K=o=>{if(o===0)return"0 Bytes";const e=1024,u=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(e));return Math.round(o/Math.pow(e,l)*100)/100+" "+u[l]},X=()=>{var e;const o=(e=c.data)==null?void 0:e.find(u=>u.name===s.value.request_type);return(o==null?void 0:o.type_name)||"N/A"},F=()=>{var e;const o=(e=c.data)==null?void 0:e.find(u=>u.name===s.value.request_type);return o!=null&&o.application_fee?`$${o.application_fee}`:"TBD"},Y=()=>S(this,null,function*(){if(!s.value.terms_accepted){alert("Please accept the terms and conditions");return}y.value=!0;try{console.log("Submitting application...",s.value),console.log("Files:",m.value),yield new Promise(o=>setTimeout(o,2e3)),alert("Application submitted successfully!"),C.push({name:"Dashboard"})}catch(o){console.error("Error submitting application:",o),alert("Failed to submit application")}finally{y.value=!1}});return(o,e)=>{const u=Q("Button");return r(),a("div",se,[t("header",le,[t("div",oe,[t("div",re,[t("div",ae,[t("button",{onClick:T,class:"text-gray-500 hover:text-gray-700"},[...e[10]||(e[10]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),t("div",null,[e[11]||(e[11]=t("h1",{class:"text-xl font-bold text-gray-900"},"New Application",-1)),t("p",ie,"Step "+n(i.value)+" of "+n(j),1)])]),b(u,{onClick:H,variant:"outline",theme:"gray",loading:_.value},{default:f(()=>[...e[12]||(e[12]=[x(" Save Draft ",-1)])]),_:1},8,["loading"])])])]),t("div",ne,[t("div",de,[t("div",ue,[(r(),a(D,null,B(g,(l,d)=>t("div",{key:d,class:h(["flex items-center",{"flex-1":d<g.length-1}])},[t("div",pe,[t("div",{class:h(["w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm",z(d+1)])},[d+1<i.value?(r(),a("span",me,"âœ“")):(r(),a("span",ve,n(d+1),1))],2),t("span",{class:h(["text-xs mt-2 text-center",d+1===i.value?"text-blue-600 font-medium":"text-gray-500"])},n(l.title),3)]),d<g.length-1?(r(),a("div",{key:0,class:h(["flex-1 h-1 mx-4 rounded",d+1<i.value?"bg-blue-600":"bg-gray-200"])},null,2)):p("",!0)],2)),64))])])]),t("main",ce,[t("div",be,[i.value===1?(r(),a("div",fe,[e[15]||(e[15]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Application Type",-1)),e[16]||(e[16]=t("p",{class:"text-gray-600 mb-8"},"Choose the type of consent you wish to apply for",-1)),v(c).loading?(r(),a("div",ge,[...e[13]||(e[13]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(r(),a("div",xe,[(r(!0),a(D,null,B(v(c).data,l=>(r(),a("div",{key:l.name,onClick:d=>I(l),class:h(["border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",s.value.request_type===l.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[t("div",ke,[t("div",we,[t("h3",_e,n(l.type_name),1),t("p",he,n(l.description||"No description available"),1),t("div",Ce,[l.application_fee?(r(),a("span",Ve,"Fee: $"+n(l.application_fee),1)):p("",!0),l.statutory_timeframe?(r(),a("span",De,n(l.statutory_timeframe)+" days",1)):p("",!0)])]),s.value.request_type===l.name?(r(),a("div",Be,[...e[14]||(e[14]=[t("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):p("",!0)])],10,ye))),128))]))])):p("",!0),i.value===2?(r(),a("div",Me,[e[24]||(e[24]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Property Details",-1)),e[25]||(e[25]=t("p",{class:"text-gray-600 mb-8"},"Provide details about the property for this application",-1)),t("div",Se,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Select Existing Property or Enter New ",-1)),M(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.property=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:$},[e[17]||(e[17]=t("option",{value:""},"-- Select a property or enter new --",-1)),(r(!0),a(D,null,B(v(q).data,l=>(r(),a("option",{key:l.name,value:l.name},n(l.property_id)+" - "+n(l.address),9,Ae))),128))],544),[[R,s.value.property]])]),s.value.property?p("",!0):(r(),a("div",je,[t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Property Address *",-1)),b(v(w),{modelValue:s.value.property_address,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.property_address=l),placeholder:"123 Main Street, Wellington",type:"text"},null,8,["modelValue"])]),t("div",Pe,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Legal Description",-1)),b(v(w),{modelValue:s.value.legal_description,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.legal_description=l),placeholder:"Lot 1 DP 12345",type:"text"},null,8,["modelValue"])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Valuation Reference",-1)),b(v(w),{modelValue:s.value.valuation_reference,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.valuation_reference=l),placeholder:"1234567",type:"text"},null,8,["modelValue"])])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Zone",-1)),M(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.zone=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...e[22]||(e[22]=[E('<option value="">Select zone</option><option value="Residential">Residential</option><option value="Commercial">Commercial</option><option value="Industrial">Industrial</option><option value="Rural">Rural</option><option value="Mixed Use">Mixed Use</option>',6)])],512),[[R,s.value.zone]])])]))])])):p("",!0),i.value===3?(r(),a("div",qe,[e[31]||(e[31]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Application Details",-1)),e[32]||(e[32]=t("p",{class:"text-gray-600 mb-8"},"Describe your proposed activity or development",-1)),t("div",Ue,[t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Brief Description *",-1)),b(v(w),{modelValue:s.value.brief_description,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.brief_description=l),placeholder:"e.g., Two-storey residential dwelling",type:"text"},null,8,["modelValue"])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Detailed Description *",-1)),M(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.detailed_description=l),rows:"6",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Provide a detailed description of the proposed activity, including any relevant technical details, dimensions, materials, and timeframes..."},null,512),[[ee,s.value.detailed_description]])]),t("div",Fe,[t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estimated Project Value",-1)),b(v(w),{modelValue:s.value.estimated_value,"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.estimated_value=l),placeholder:"e.g., 500000",type:"number"},{prefix:f(()=>[...e[28]||(e[28]=[t("span",{class:"text-gray-500"},"$",-1)])]),_:1},8,["modelValue"])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Proposed Start Date",-1)),b(v(w),{modelValue:s.value.proposed_start_date,"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.proposed_start_date=l),type:"date"},null,8,["modelValue"])])])])])):p("",!0),i.value===4?(r(),a("div",Ne,[e[40]||(e[40]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Upload Documents",-1)),e[41]||(e[41]=t("p",{class:"text-gray-600 mb-8"},"Attach all required supporting documents",-1)),t("div",Re,[t("div",Ee,[e[34]||(e[34]=t("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e[35]||(e[35]=t("p",{class:"text-gray-600 mb-2"},"Drag and drop files here, or click to browse",-1)),e[36]||(e[36]=t("p",{class:"text-xs text-gray-500"},"PDF, DOC, DOCX, JPG, PNG (Max 10MB per file)",-1)),b(u,{onClick:O,variant:"outline",theme:"blue",class:"mt-4"},{default:f(()=>[...e[33]||(e[33]=[x(" Select Files ",-1)])]),_:1}),t("input",{type:"file",ref_key:"fileInput",ref:V,multiple:"",class:"hidden",onChange:W},null,544)]),m.value.length>0?(r(),a("div",Te,[t("h4",ze,"Uploaded Documents ("+n(m.value.length)+")",1),(r(!0),a(D,null,B(m.value,(l,d)=>(r(),a("div",{key:d,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[t("div",Ie,[e[37]||(e[37]=t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("div",null,[t("p",$e,n(l.name),1),t("p",Le,n(K(l.size)),1)])]),t("button",{onClick:pt=>J(d),class:"text-red-600 hover:text-red-800"},[...e[38]||(e[38]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ge)]))),128))])):p("",!0),e[39]||(e[39]=E('<div class="bg-blue-50 border border-blue-200 rounded-lg p-6"><h4 class="font-medium text-blue-900 mb-3">Required Documents</h4><ul class="space-y-2 text-sm text-blue-800"><li class="flex items-start"><svg class="w-5 h-5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg> Site plans and location maps </li><li class="flex items-start"><svg class="w-5 h-5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg> Architectural drawings and specifications </li><li class="flex items-start"><svg class="w-5 h-5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg> Assessment of Environmental Effects (AEE) </li><li class="flex items-start"><svg class="w-5 h-5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg> Written approvals from affected parties (if required) </li></ul></div>',1))])])):p("",!0),i.value===5?(r(),a("div",He,[e[53]||(e[53]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Review & Submit",-1)),e[54]||(e[54]=t("p",{class:"text-gray-600 mb-8"},"Please review your application before submission",-1)),t("div",Oe,[t("div",We,[e[47]||(e[47]=t("h3",{class:"font-semibold text-gray-900 mb-4"},"Application Summary",-1)),t("dl",Je,[t("div",null,[e[42]||(e[42]=t("dt",{class:"text-gray-600"},"Application Type",-1)),t("dd",Ke,n(X()),1)]),t("div",null,[e[43]||(e[43]=t("dt",{class:"text-gray-600"},"Property Address",-1)),t("dd",Xe,n(s.value.property_address||"N/A"),1)]),t("div",null,[e[44]||(e[44]=t("dt",{class:"text-gray-600"},"Brief Description",-1)),t("dd",Ye,n(s.value.brief_description||"N/A"),1)]),t("div",null,[e[45]||(e[45]=t("dt",{class:"text-gray-600"},"Estimated Value",-1)),t("dd",Ze,n(s.value.estimated_value?`$${s.value.estimated_value}`:"N/A"),1)]),t("div",null,[e[46]||(e[46]=t("dt",{class:"text-gray-600"},"Documents Uploaded",-1)),t("dd",Qe,n(m.value.length)+" files",1)])])]),t("div",et,[t("div",tt,[M(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=l=>s.value.terms_accepted=l),class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[te,s.value.terms_accepted]]),e[48]||(e[48]=t("label",{class:"ml-3 text-sm text-gray-700"},[x(" I confirm that the information provided in this application is true and accurate to the best of my knowledge. I understand that providing false or misleading information may result in the application being declined or consent being revoked. I have read and agree to the "),t("a",{href:"#",class:"text-blue-600 hover:text-blue-800"},"terms and conditions"),x(". ")],-1))])]),t("div",st,[e[51]||(e[51]=t("h4",{class:"font-medium text-blue-900 mb-3"},"Fee Summary",-1)),t("div",lt,[t("div",ot,[e[49]||(e[49]=t("span",{class:"text-blue-800"},"Application Fee",-1)),t("span",rt,n(F()),1)]),t("div",at,[e[50]||(e[50]=t("span",{class:"font-medium text-blue-900"},"Total Due",-1)),t("span",it,n(F()),1)])]),e[52]||(e[52]=t("p",{class:"text-xs text-blue-700 mt-3"}," Payment will be processed after submission. You will receive an invoice via email. ",-1))])])])):p("",!0),t("div",nt,[i.value>1?(r(),A(u,{key:0,onClick:G,variant:"outline",theme:"gray"},{prefix:f(()=>[...e[55]||(e[55]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:f(()=>[e[56]||(e[56]=x(" Previous ",-1))]),_:1})):(r(),a("div",dt)),t("div",ut,[i.value<j?(r(),A(u,{key:0,onClick:L,variant:"solid",theme:"blue",disabled:!U()},{suffix:f(()=>[...e[57]||(e[57]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),default:f(()=>[e[58]||(e[58]=x(" Next ",-1))]),_:1},8,["disabled"])):(r(),A(u,{key:1,onClick:Y,variant:"solid",theme:"blue",loading:y.value,disabled:!s.value.terms_accepted},{default:f(()=>[...e[59]||(e[59]=[x(" Submit Application ",-1)])]),_:1},8,["loading","disabled"]))])])])])])}}};export{ct as default};
//# sourceMappingURL=NewRequest-CkSMRehA.js.map
