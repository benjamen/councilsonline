{"version":3,"mappings":"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","names":["formatMeetingDate","dateString","__props","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","_hoisted_3","_Fragment","_renderList","meeting","_hoisted_4","_cache","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","slot","index","_hoisted_19","$event","$emit","_hoisted_22","formatDate","dateStr","_createBlock","_unref","Button","_createVNode","_a","_normalizeClass","SendMessageModal","defineAsyncComponent","__vitePreload","BookMeetingModal","PaymentModal","route","useRoute","router","useRouter","fileInput","ref","uploading","submitting","deleting","cancellingMeeting","showSendMessageModal","showBookMeetingModal","request","createResource","meetings","requestTypeConfig","councilDetails","watch","requestType","councilCode","clockData","progressPercent","useStatutoryClock","parsedFormData","computed","formData","standardFields","filtered","key","error","enrichedRequest","fullFormData","__spreadValues","reviewSections","step","hasPropertyDetails","_b","hasReviewContent","section","field","formatFieldValue","value","e","formatFieldLabel","fieldName","word","formatSimpleValue","formatAddress","addressObj","parts","goBack","handleUploadDocument","handleFileUpload","event","__async","files","file","handleSendMessage","handleMessageSent","handlePrintApplication","handleEditDraft","url","handleDeleteDraft","handleSubmitApplication","result","showPaymentModal","handleMakePayment","handleInvoiceRequested","invoiceData","message","handleBookMeeting","handleMeetingBooked","meetingData","editingMeeting","handleEditMeeting","handleCancelMeeting","RequestHeader","StatusBadge","_hoisted_20","_hoisted_21","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","RequestMeetingsSection","_hoisted_62","_hoisted_63","s","_hoisted_64","_hoisted_65","f","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","RequestFeesSection","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","RequestTimelineCard","RequestActionsCard","resource"],"ignoreList":[],"sources":["../../../../frontend/src/components/request/RequestMeetingsSection.vue","../../../../frontend/src/components/request/RequestTimelineCard.vue","../../../../frontend/src/components/request/RequestActionsCard.vue","../../../../frontend/src/components/request/RequestFeesSection.vue","../../../../frontend/src/pages/RequestDetail.vue"],"sourcesContent":["<template>\n\t<div v-if=\"show\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n\t\t<div class=\"flex justify-between items-start mb-4\">\n\t\t\t<div>\n\t\t\t\t<h2 class=\"text-lg font-semibold text-gray-900\">Council Meeting</h2>\n\t\t\t\t<p class=\"text-sm text-gray-600 mt-1\">\n\t\t\t\t\tSchedule a meeting with council planners to discuss your application\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<!-- Status Badge if meeting exists -->\n\t\t\t<span\n\t\t\t\tv-if=\"meetings && meetings.length > 0\"\n\t\t\t\tclass=\"px-3 py-1 rounded-full text-sm font-medium\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'bg-yellow-100 text-yellow-800': meetings[0].status === 'Requested',\n\t\t\t\t\t'bg-blue-100 text-blue-800': meetings[0].status === 'Scheduled' || meetings[0].status === 'Confirmed',\n\t\t\t\t\t'bg-green-100 text-green-800': meetings[0].status === 'Completed',\n\t\t\t\t\t'bg-gray-100 text-gray-800': meetings[0].status === 'Cancelled'\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t{{ meetings[0].status }}\n\t\t\t</span>\n\t\t</div>\n\n\t\t<!-- Meeting Details (if exists) -->\n\t\t<div v-if=\"meetings && meetings.length > 0\" class=\"space-y-4\">\n\t\t\t<div v-for=\"meeting in meetings\" :key=\"meeting.name\" class=\"border-l-4 border-blue-500 bg-blue-50 p-4 rounded\">\n\t\t\t\t<div class=\"grid grid-cols-2 gap-3 text-sm\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Type:</span>\n\t\t\t\t\t\t<span class=\"ml-2 text-gray-900\">{{ meeting.meeting_type }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Status:</span>\n\t\t\t\t\t\t<span class=\"ml-2 text-gray-900\">{{ meeting.status }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"meeting.scheduled_start\" class=\"col-span-2\">\n\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Scheduled:</span>\n\t\t\t\t\t\t<span class=\"ml-2 text-gray-900\">{{ formatMeetingDate(meeting.scheduled_start) }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"meeting.meeting_format\" class=\"col-span-2\">\n\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Format:</span>\n\t\t\t\t\t\t<span class=\"ml-2 text-gray-900\">{{ meeting.meeting_format }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"meeting.meeting_location\" class=\"col-span-2\">\n\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Location:</span>\n\t\t\t\t\t\t<span class=\"ml-2 text-gray-900\">{{ meeting.meeting_location }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"meeting.google_meet_link\" class=\"col-span-2\">\n\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Meeting Link:</span>\n\t\t\t\t\t\t<a :href=\"meeting.google_meet_link\" target=\"_blank\" class=\"ml-2 text-blue-600 hover:underline\">Join Meeting</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div v-if=\"meeting.meeting_purpose\" class=\"mt-3 pt-3 border-t border-blue-200\">\n\t\t\t\t\t<span class=\"font-medium text-gray-700 text-sm\">Purpose:</span>\n\t\t\t\t\t<p class=\"mt-1 text-sm text-gray-900\">{{ meeting.meeting_purpose }}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Proposed Time Slots -->\n\t\t\t\t<div v-if=\"meeting.status === 'Requested' && meeting.proposed_slots && meeting.proposed_slots.length > 0\" class=\"mt-3 pt-3 border-t border-blue-200\">\n\t\t\t\t\t<span class=\"font-medium text-gray-700 text-sm\">Proposed Time Slots:</span>\n\t\t\t\t\t<ul class=\"mt-2 space-y-1\">\n\t\t\t\t\t\t<li v-for=\"(slot, index) in meeting.proposed_slots\" :key=\"index\" class=\"text-sm text-gray-900 flex items-center\">\n\t\t\t\t\t\t\t<svg class=\"w-4 h-4 mr-2 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t{{ formatMeetingDate(slot) }}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Action Buttons -->\n\t\t\t\t<div v-if=\"meeting.status === 'Requested' || meeting.status === 'Scheduled'\" class=\"mt-4 pt-3 border-t border-blue-200 flex space-x-3\">\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"$emit('edit-meeting', meeting)\"\n\t\t\t\t\t\tclass=\"flex-1 px-4 py-2 bg-white border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm font-medium\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg class=\"w-4 h-4 inline mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\tEdit Request\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"$emit('cancel-meeting', meeting)\"\n\t\t\t\t\t\t:disabled=\"cancelling\"\n\t\t\t\t\t\tclass=\"flex-1 px-4 py-2 bg-white border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg class=\"w-4 h-4 inline mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\tCancel Meeting\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Request Meeting Button -->\n\t\t<div v-else class=\"text-center py-6\">\n\t\t\t<svg class=\"mx-auto h-12 w-12 text-gray-400 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n\t\t\t</svg>\n\t\t\t<p class=\"text-sm text-gray-600 mb-4\">\n\t\t\t\tNo meeting scheduled yet. Book a meeting to discuss your application with council planners.\n\t\t\t</p>\n\t\t\t<button\n\t\t\t\t@click=\"$emit('book-meeting')\"\n\t\t\t\tclass=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n\t\t\t>\n\t\t\t\tRequest Council Meeting\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nconst props = defineProps({\n\tshow: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\tmeetings: {\n\t\ttype: Array,\n\t\tdefault: () => []\n\t},\n\tcancelling: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t}\n})\n\ndefineEmits(['book-meeting', 'edit-meeting', 'cancel-meeting'])\n\nconst formatMeetingDate = (dateString) => {\n\tif (!dateString) return 'N/A'\n\tconst date = new Date(dateString)\n\treturn date.toLocaleString('en-NZ', {\n\t\tweekday: 'short',\n\t\tyear: 'numeric',\n\t\tmonth: 'short',\n\t\tday: 'numeric',\n\t\thour: '2-digit',\n\t\tminute: '2-digit'\n\t})\n}\n</script>\n","<template>\n\t<div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n\t\t<h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Processing Timeline</h2>\n\n\t\t<!-- SLA / Statutory Clock -->\n\t\t<div v-if=\"clockData.statutory_clock_started\" class=\"mb-6 p-4 bg-blue-50 rounded-lg\">\n\t\t\t<div class=\"flex items-center justify-between mb-2\">\n\t\t\t\t<span class=\"text-sm font-medium text-blue-900\">SLA / Statutory Clock</span>\n\t\t\t\t<span class=\"text-xs text-blue-700\">{{ clockData.working_days_elapsed }} of 20 days</span>\n\t\t\t</div>\n\t\t\t<div class=\"w-full bg-blue-200 rounded-full h-2\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n\t\t\t\t\t:style=\"{ width: `${progressPercent}%` }\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t\t<p class=\"mt-2 text-xs text-blue-700\">\n\t\t\t\t{{ clockData.statutory_clock_stopped ? 'Clock stopped (RFI issued)' : `${clockData.working_days_remaining} days remaining` }}\n\t\t\t</p>\n\t\t</div>\n\n\t\t<!-- Status History -->\n\t\t<div class=\"space-y-4\">\n\t\t\t<div class=\"flex items-start space-x-3\">\n\t\t\t\t<div class=\"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\">\n\t\t\t\t\t<svg class=\"w-4 h-4 text-green-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t<p class=\"text-sm font-medium text-gray-900\">Application Created</p>\n\t\t\t\t\t<p class=\"text-xs text-gray-500\">{{ formatDate(creation) }}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"modified !== creation\" class=\"flex items-start space-x-3\">\n\t\t\t\t<div class=\"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n\t\t\t\t\t<svg class=\"w-4 h-4 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n\t\t\t\t\t\t<path d=\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t<p class=\"text-sm font-medium text-gray-900\">Last Updated</p>\n\t\t\t\t\t<p class=\"text-xs text-gray-500\">{{ formatDate(modified) }}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nconst props = defineProps({\n\tclockData: {\n\t\ttype: Object,\n\t\trequired: true,\n\t\tdefault: () => ({\n\t\t\tstatutory_clock_started: false,\n\t\t\tworking_days_elapsed: 0,\n\t\t\tworking_days_remaining: 20,\n\t\t\tstatutory_clock_stopped: false\n\t\t})\n\t},\n\tprogressPercent: {\n\t\ttype: Number,\n\t\tdefault: 0\n\t},\n\tcreation: {\n\t\ttype: String,\n\t\trequired: true\n\t},\n\tmodified: {\n\t\ttype: String,\n\t\trequired: true\n\t}\n})\n\n/**\n * Format date to NZ locale with date and time\n * @param {string} dateStr - ISO date string\n * @returns {string} Formatted date string\n */\nconst formatDate = (dateStr) => {\n\tif (!dateStr) return \"N/A\"\n\tconst date = new Date(dateStr)\n\treturn date.toLocaleDateString(\"en-NZ\", {\n\t\tyear: \"numeric\",\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t\thour: \"2-digit\",\n\t\tminute: \"2-digit\",\n\t})\n}\n</script>\n","<template>\n\t<div>\n\t\t<!-- Quick Actions -->\n\t\t<div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n\t\t\t<h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h2>\n\n\t\t\t<div class=\"space-y-3\">\n\t\t\t\t<Button\n\t\t\t\t\tv-if=\"workflowState === 'Draft'\"\n\t\t\t\t\t@click=\"$emit('edit-draft')\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\ttheme=\"blue\"\n\t\t\t\t\tclass=\"w-full justify-start\"\n\t\t\t\t>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</template>\n\t\t\t\t\tEdit Draft\n\t\t\t\t</Button>\n\n\t\t\t\t<Button\n\t\t\t\t\t@click=\"$emit('send-message')\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\tclass=\"w-full justify-start\"\n\t\t\t\t>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</template>\n\t\t\t\t\tSend Message\n\t\t\t\t</Button>\n\n\t\t\t\t<Button\n\t\t\t\t\t@click=\"$emit('print-application')\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\tclass=\"w-full justify-start\"\n\t\t\t\t>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</template>\n\t\t\t\t\tPrint Application\n\t\t\t\t</Button>\n\n\t\t\t\t<Button\n\t\t\t\t\tv-if=\"workflowState === 'Draft'\"\n\t\t\t\t\t@click=\"$emit('delete-draft')\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\tclass=\"w-full justify-start text-red-600 hover:text-red-700\"\n\t\t\t\t\t:loading=\"deleting\"\n\t\t\t\t>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 1 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</template>\n\t\t\t\t\tDelete Draft\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Contact Info -->\n\t\t<div class=\"bg-blue-50 rounded-lg border border-blue-200 p-6 mt-6\">\n\t\t\t<h3 class=\"text-sm font-semibold text-blue-900 mb-3\">Need Help?</h3>\n\t\t\t<p class=\"text-xs text-blue-800 mb-4\">Contact {{ councilDetails.data?.council_name || 'the council' }} for assistance with your application.</p>\n\t\t\t<div v-if=\"councilDetails.loading\" class=\"text-xs text-blue-800\">\n\t\t\t\tLoading contact information...\n\t\t\t</div>\n\t\t\t<div v-else-if=\"councilDetails.data\" class=\"space-y-2 text-xs text-blue-900\">\n\t\t\t\t<div v-if=\"councilDetails.data.contact_email\" class=\"flex items-center space-x-2\">\n\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t<a :href=\"`mailto:${councilDetails.data.contact_email}`\" class=\"hover:underline\">\n\t\t\t\t\t\t{{ councilDetails.data.contact_email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"councilDetails.data.contact_phone\" class=\"flex items-center space-x-2\">\n\t\t\t\t\t<svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t<a :href=\"`tel:${councilDetails.data.contact_phone}`\" class=\"hover:underline\">\n\t\t\t\t\t\t{{ councilDetails.data.contact_phone }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { Button } from \"frappe-ui\"\n\ndefineProps({\n\tworkflowState: {\n\t\ttype: String,\n\t\trequired: true\n\t},\n\tcouncilDetails: {\n\t\ttype: Object,\n\t\trequired: true,\n\t\tdefault: () => ({ loading: false, data: null })\n\t},\n\tdeleting: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t}\n})\n\ndefineEmits(['edit-draft', 'send-message', 'print-application', 'delete-draft'])\n</script>\n","<template>\n\t<div>\n\t\t<!-- Fees & Payments (Council collects from user) -->\n\t\t<div v-if=\"collectPayment\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n\t\t\t<div class=\"flex justify-between items-center mb-4\">\n\t\t\t\t<h2 class=\"text-lg font-semibold text-gray-900\">Fees & Payments</h2>\n\t\t\t\t<span class=\"text-sm font-medium\" :class=\"paymentStatus === 'Paid' ? 'text-green-600' : 'text-orange-600'\">\n\t\t\t\t\t{{ paymentStatus || 'Unpaid' }}\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"space-y-3\">\n\t\t\t\t<div class=\"flex justify-between items-center py-2 border-b border-gray-100\">\n\t\t\t\t\t<span class=\"text-sm text-gray-600\">Total Fees</span>\n\t\t\t\t\t<span class=\"text-sm font-semibold text-gray-900\">${{ totalFees.toFixed(2) }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex justify-between items-center py-2 border-b border-gray-100\">\n\t\t\t\t\t<span class=\"text-sm text-gray-600\">Total Paid</span>\n\t\t\t\t\t<span class=\"text-sm font-semibold text-green-600\">${{ totalPaid.toFixed(2) }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex justify-between items-center py-2\">\n\t\t\t\t\t<span class=\"text-sm font-medium text-gray-900\">Outstanding</span>\n\t\t\t\t\t<span class=\"text-sm font-bold text-orange-600\">${{ (totalFees - totalPaid).toFixed(2) }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<Button\n\t\t\t\tv-if=\"totalFees > totalPaid\"\n\t\t\t\t@click=\"$emit('make-payment')\"\n\t\t\t\tvariant=\"solid\"\n\t\t\t\ttheme=\"blue\"\n\t\t\t\tclass=\"w-full mt-4\"\n\t\t\t>\n\t\t\t\tMake Payment\n\t\t\t</Button>\n\t\t</div>\n\n\t\t<!-- Payment to be Received (Council pays user - benefits) -->\n\t\t<div v-if=\"makePayment\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n\t\t\t<div class=\"flex justify-between items-center mb-4\">\n\t\t\t\t<h2 class=\"text-lg font-semibold text-gray-900\">Payment to be Received</h2>\n\t\t\t\t<span class=\"text-sm font-medium\" :class=\"paymentStatus === 'Paid' ? 'text-green-600' : 'text-orange-600'\">\n\t\t\t\t\t{{ paymentStatus || 'Pending' }}\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n\t\t\t\t<div class=\"flex items-start\">\n\t\t\t\t\t<svg class=\"h-5 w-5 text-blue-600 mt-0.5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t\t<p class=\"text-sm font-medium text-blue-900\">Benefit Payment Information</p>\n\t\t\t\t\t\t<p class=\"text-sm text-blue-700 mt-1\">\n\t\t\t\t\t\t\tOnce your application is approved, you will receive payment from the council.\n\t\t\t\t\t\t\tPlease ensure your bank details are up to date.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"space-y-3\">\n\t\t\t\t<div class=\"flex justify-between items-center py-2 border-b border-gray-100\">\n\t\t\t\t\t<span class=\"text-sm text-gray-600\">Benefit Amount</span>\n\t\t\t\t\t<span class=\"text-sm font-semibold text-gray-900\">\n\t\t\t\t\t\t${{ benefitAmount.toFixed(2) }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex justify-between items-center py-2 border-b border-gray-100\">\n\t\t\t\t\t<span class=\"text-sm text-gray-600\">Payment Status</span>\n\t\t\t\t\t<span class=\"text-sm font-semibold\" :class=\"paymentStatus === 'Paid' ? 'text-green-600' : 'text-orange-600'\">\n\t\t\t\t\t\t{{ paymentStatus || 'Pending Approval' }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"selectedBankAccount\" class=\"flex justify-between items-center py-2\">\n\t\t\t\t\t<span class=\"text-sm text-gray-600\">Payment Method</span>\n\t\t\t\t\t<span class=\"text-sm font-medium text-gray-900\">Bank Transfer</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { Button } from \"frappe-ui\"\n\nconst props = defineProps({\n\t// Show collect payment section\n\tcollectPayment: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\t// Show make payment section (benefits)\n\tmakePayment: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\t// Payment status\n\tpaymentStatus: {\n\t\ttype: String,\n\t\tdefault: null\n\t},\n\t// For collect payment section\n\ttotalFees: {\n\t\ttype: Number,\n\t\tdefault: 0\n\t},\n\ttotalPaid: {\n\t\ttype: Number,\n\t\tdefault: 0\n\t},\n\t// For make payment section (benefits)\n\tbenefitAmount: {\n\t\ttype: Number,\n\t\tdefault: 0\n\t},\n\tselectedBankAccount: {\n\t\ttype: String,\n\t\tdefault: null\n\t}\n})\n\ndefineEmits(['make-payment'])\n</script>\n","<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <!-- Header -->\n    <RequestHeader\n      :title=\"request.data?.request_number || 'Loading...'\"\n      :subtitle=\"request.data?.request_type\"\n      :loading=\"request.loading\"\n      @back=\"goBack\"\n    >\n      <template #actions>\n        <StatusBadge v-if=\"request.data\" :status=\"request.data.workflow_state\" />\n        <Button\n          v-if=\"request.data?.workflow_state === 'Draft'\"\n          @click=\"handleSubmitApplication\"\n          variant=\"solid\"\n          theme=\"blue\"\n          :loading=\"submitting\"\n        >\n          Submit Application\n        </Button>\n      </template>\n    </RequestHeader>\n\n    <!-- Hidden file input -->\n    <input\n      ref=\"fileInput\"\n      type=\"file\"\n      multiple\n      class=\"hidden\"\n      @change=\"handleFileUpload\"\n    />\n\n    <!-- Loading State -->\n    <div v-if=\"request.loading\" class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n      <div class=\"text-center\">\n        <div class=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        <p class=\"mt-4 text-gray-500\">Loading request details...</p>\n      </div>\n    </div>\n\n    <!-- Main Content -->\n    <div v-else-if=\"request.data\" class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <!-- Main Content Column -->\n        <div class=\"lg:col-span-2 space-y-6\">\n          <!-- Overview Card -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Application Overview</h2>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Request Number</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.request_number }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Type</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.request_type }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Status</label>\n                <div class=\"mt-1\">\n                  <StatusBadge :status=\"request.data.workflow_state\" />\n                </div>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Submitted Date</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ formatDate(request.data.creation) }}</p>\n              </div>\n            </div>\n\n            <div class=\"mt-6 pt-6 border-t border-gray-200\">\n              <label class=\"text-sm font-medium text-gray-500\">Brief Description</label>\n              <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.brief_description || 'N/A' }}</p>\n            </div>\n\n            <div class=\"mt-4\">\n              <label class=\"text-sm font-medium text-gray-500\">Detailed Description</label>\n              <div class=\"mt-1 text-sm text-gray-900 prose prose-sm max-w-none\" v-html=\"request.data.detailed_description || 'N/A'\"></div>\n            </div>\n          </div>\n\n          <!-- Property Information - only show if request type has property -->\n          <div v-if=\"hasPropertyDetails\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Property Information</h2>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div v-if=\"enrichedRequest.property_address\">\n                <label class=\"text-sm font-medium text-gray-500\">Address</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.property_address }}</p>\n              </div>\n              <div v-if=\"enrichedRequest.legal_description\">\n                <label class=\"text-sm font-medium text-gray-500\">Legal Description</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.legal_description }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Applicant Information -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Applicant Information</h2>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Name</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.full_name || enrichedRequest.requester_name || 'N/A' }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Email</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.requester_email || 'N/A' }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Phone</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.mobile_number || enrichedRequest.requester_phone || 'N/A' }}</p>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium text-gray-500\">Address</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ formatAddress(enrichedRequest.address_line) || enrichedRequest.applicant_address || 'N/A' }}</p>\n              </div>\n              <div v-if=\"enrichedRequest.applicant_company\">\n                <label class=\"text-sm font-medium text-gray-500\">Company/Organization</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.applicant_company }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- SPISC Application Details - only show if request is SPISC -->\n          <div v-if=\"request.data?.request_type?.includes('SPISC')\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">SPISC Application Details</h2>\n\n            <div class=\"space-y-6\">\n              <!-- Personal Information -->\n              <div>\n                <h3 class=\"text-sm font-semibold text-gray-700 mb-3\">Personal Information</h3>\n                <div class=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Birth Date</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ formatDate(enrichedRequest.birth_date) || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Age</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.age || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Sex</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.sex || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Civil Status</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.civil_status || 'N/A' }}</p>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Household & Economic Information -->\n              <div>\n                <h3 class=\"text-sm font-semibold text-gray-700 mb-3\">Household & Economic Information</h3>\n                <div class=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Household Size</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.household_size || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Living Arrangement</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.living_arrangement || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Monthly Income</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.monthly_income || '0' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">Income Source</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.income_source || 'N/A' }}</p>\n                  </div>\n                  <div>\n                    <label class=\"text-sm font-medium text-gray-500\">4Ps Beneficiary</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ enrichedRequest.is_4ps_beneficiary ? 'Yes' : 'No' }}</p>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Identity Documents -->\n              <div>\n                <h3 class=\"text-sm font-semibold text-gray-700 mb-3\">Identity Documents</h3>\n                <div class=\"grid grid-cols-2 gap-4\">\n                  <div v-if=\"request.data.philsys_id\">\n                    <label class=\"text-sm font-medium text-gray-500\">PhilSys ID</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.philsys_id }}</p>\n                  </div>\n                  <div v-if=\"request.data.sss_number\">\n                    <label class=\"text-sm font-medium text-gray-500\">SSS Number</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.sss_number }}</p>\n                  </div>\n                  <div v-if=\"request.data.osca_id\">\n                    <label class=\"text-sm font-medium text-gray-500\">OSCA ID</label>\n                    <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.osca_id }}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Delivery & Payment Preferences - only show if request type collects payment -->\n          <div v-if=\"requestTypeConfig.data?.collect_payment\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Delivery & Payment Preferences</h2>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div v-if=\"request.data.delivery_preference\">\n                <label class=\"text-sm font-medium text-gray-500\">Delivery Preference</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.delivery_preference }}</p>\n              </div>\n              <div v-if=\"request.data.invoice_to\">\n                <label class=\"text-sm font-medium text-gray-500\">Invoice To</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.invoice_to }}</p>\n              </div>\n              <div v-if=\"request.data.invoice_recipient_name\">\n                <label class=\"text-sm font-medium text-gray-500\">Invoice Recipient Name</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.invoice_recipient_name }}</p>\n              </div>\n              <div v-if=\"request.data.invoice_recipient_email\">\n                <label class=\"text-sm font-medium text-gray-500\">Invoice Recipient Email</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.invoice_recipient_email }}</p>\n              </div>\n              <div v-if=\"request.data.purchase_order_number\" class=\"col-span-2\">\n                <label class=\"text-sm font-medium text-gray-500\">Purchase Order Number</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ request.data.purchase_order_number }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Council Meeting Section -->\n          <RequestMeetingsSection\n            :show=\"requestTypeConfig.data?.council_meeting_available\"\n            :meetings=\"meetings.data\"\n            :cancelling=\"cancellingMeeting\"\n            @book-meeting=\"handleBookMeeting\"\n            @edit-meeting=\"handleEditMeeting\"\n            @cancel-meeting=\"handleCancelMeeting\"\n          />\n\n          <!-- Dynamic Application Data (using step configuration OR fallback to raw data) -->\n          <template v-if=\"reviewSections.length > 0\">\n            <div\n              v-for=\"step in reviewSections\"\n              :key=\"step.step_code\"\n              class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\"\n            >\n              <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">{{ step.step_title }}</h2>\n              <div class=\"space-y-4\">\n                <div\n                  v-for=\"section in step.sections.filter(s => s.show_on_review)\"\n                  :key=\"section.section_code\"\n                >\n                  <h3 v-if=\"section.section_title\" class=\"text-md font-medium text-gray-700 mb-3\">\n                    {{ section.section_title }}\n                  </h3>\n                  <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div\n                      v-for=\"field in section.fields.filter(f => f.show_on_review)\"\n                      :key=\"field.field_name\"\n                      class=\"border-b border-gray-100 pb-3\"\n                    >\n                      <label class=\"text-sm font-medium text-gray-500\">{{ field.review_label || field.field_label }}</label>\n                      <p class=\"mt-1 text-sm text-gray-900\">{{ formatFieldValue(field, enrichedRequest[field.field_name]) }}</p>\n                    </div>\n                  </div>\n                </div>\n                <p v-if=\"!hasReviewContent(step)\" class=\"text-gray-500 text-sm\">\n                  No information to display\n                </p>\n              </div>\n            </div>\n          </template>\n\n          <!-- Fallback: Show raw application data if config not loaded -->\n          <div v-else-if=\"parsedFormData && Object.keys(parsedFormData).length > 0\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Application Details</h2>\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div v-for=\"(value, fieldName) in parsedFormData\" :key=\"fieldName\" class=\"border-b border-gray-100 pb-3\">\n                <label class=\"text-sm font-medium text-gray-500\">{{ formatFieldLabel(fieldName) }}</label>\n                <p class=\"mt-1 text-sm text-gray-900\">{{ formatSimpleValue(value) }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Fees & Payments Section -->\n          <RequestFeesSection\n            :collect-payment=\"requestTypeConfig.data?.collect_payment\"\n            :make-payment=\"requestTypeConfig.data?.make_payment\"\n            :payment-status=\"request.data.payment_status\"\n            :total-fees=\"request.data.total_fees || 0\"\n            :total-paid=\"request.data.total_paid || 0\"\n            :benefit-amount=\"requestTypeConfig.data?.base_fee || 0\"\n            :selected-bank-account=\"request.data.selected_bank_account\"\n            @make-payment=\"handleMakePayment\"\n          />\n\n          <!-- Documents -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <div class=\"flex justify-between items-center mb-4\">\n              <h2 class=\"text-lg font-semibold text-gray-900\">Documents</h2>\n              <Button\n                @click=\"handleUploadDocument\"\n                variant=\"outline\"\n                size=\"sm\"\n                :loading=\"uploading\"\n              >\n                <template #prefix>\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                  </svg>\n                </template>\n                Upload Document\n              </Button>\n            </div>\n\n            <div v-if=\"!request.data.attachments || request.data.attachments.length === 0\" class=\"text-center py-8\">\n              <svg class=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n              </svg>\n              <p class=\"mt-2 text-sm text-gray-500\">No documents uploaded yet</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Sidebar Column -->\n        <div class=\"space-y-6\">\n          <!-- Timeline -->\n          <RequestTimelineCard\n            :clock-data=\"clockData\"\n            :progress-percent=\"progressPercent\"\n            :creation=\"request.data.creation\"\n            :modified=\"request.data.modified\"\n          />\n\n          <!-- Quick Actions -->\n          <RequestActionsCard\n            :workflow-state=\"request.data.workflow_state\"\n            :council-details=\"councilDetails\"\n            :deleting=\"deleting\"\n            @edit-draft=\"handleEditDraft\"\n            @send-message=\"handleSendMessage\"\n            @print-application=\"handlePrintApplication\"\n            @delete-draft=\"handleDeleteDraft\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- Modals -->\n    <SendMessageModal\n      v-model:show=\"showSendMessageModal\"\n      :request-id=\"route.params.id\"\n      @sent=\"handleMessageSent\"\n    />\n\n    <BookMeetingModal\n      v-model:show=\"showBookMeetingModal\"\n      :request-id=\"route.params.id\"\n      :request-type-code=\"requestTypeConfig.data?.type_code\"\n      :council-code=\"request.data?.council\"\n      :meeting=\"editingMeeting\"\n      @booked=\"handleMeetingBooked\"\n    />\n\n    <PaymentModal\n      v-model:show=\"showPaymentModal\"\n      :request-id=\"route.params.id\"\n      :total-amount=\"resource.data?.total_fees_incl_gst || 0\"\n      :fees-excl-gst=\"resource.data?.total_fees_excl_gst || 0\"\n      :gst=\"resource.data?.gst_amount || 0\"\n      :stripe-enabled=\"false\"\n      @invoice-requested=\"handleInvoiceRequested\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { Button, createResource } from \"frappe-ui\"\nimport { computed, defineAsyncComponent, ref, watch } from \"vue\"\nimport { useRoute, useRouter } from \"vue-router\"\nimport StatusBadge from \"../components/StatusBadge.vue\"\nimport RequestHeader from \"../components/request/RequestHeader.vue\"\nimport RequestMeetingsSection from \"../components/request/RequestMeetingsSection.vue\"\nimport RequestTimelineCard from \"../components/request/RequestTimelineCard.vue\"\nimport RequestActionsCard from \"../components/request/RequestActionsCard.vue\"\nimport RequestFeesSection from \"../components/request/RequestFeesSection.vue\"\n// Lazy-loaded modals (load on demand to reduce bundle size)\nconst SendMessageModal = defineAsyncComponent(\n\t() => import(\"../components/modals/SendMessageModal.vue\"),\n)\nconst BookMeetingModal = defineAsyncComponent(\n\t() => import(\"../components/modals/BookMeetingModal.vue\"),\n)\nconst PaymentModal = defineAsyncComponent(\n\t() => import(\"../components/modals/PaymentModal.vue\"),\n)\nimport { useStatutoryClock } from \"../composables/useStatutoryClock\"\n\nconst route = useRoute()\nconst router = useRouter()\n\n// State\nconst fileInput = ref(null)\nconst uploading = ref(false)\nconst submitting = ref(false)\nconst deleting = ref(false)\nconst cancellingMeeting = ref(false)\nconst showSendMessageModal = ref(false)\nconst showBookMeetingModal = ref(false)\n\n// Get request details\nconst request = createResource({\n\turl: \"frappe.client.get\",\n\tparams: {\n\t\tdoctype: \"Request\",\n\t\tname: route.params.id,\n\t},\n\tauto: true,\n})\n\n// Get meetings for this request\nconst meetings = createResource({\n\turl: \"lodgeick.api.get_request_meetings\",\n\tparams: {\n\t\trequest_id: route.params.id,\n\t},\n\tauto: true,\n})\n\n// Get request type configuration\nconst requestTypeConfig = createResource({\n\turl: \"lodgeick.api.get_request_type_config\",\n\tauto: false,\n})\n\n// Get council details for contact information\nconst councilDetails = createResource({\n\turl: \"frappe.client.get\",\n\tauto: false,\n})\n\n// Watch for request data and load config\nwatch(\n\t() => request.data?.request_type,\n\t(requestType) => {\n\t\tif (requestType) {\n\t\t\t// Pass params directly to fetch() instead of in createResource\n\t\t\trequestTypeConfig.fetch({ request_type_code: requestType })\n\t\t}\n\t},\n\t{ immediate: true },\n)\n\n// Watch for council code and load council details\nwatch(\n\t() => request.data?.council,\n\t(councilCode) => {\n\t\tif (councilCode) {\n\t\t\tcouncilDetails.fetch({\n\t\t\t\tdoctype: \"Council\",\n\t\t\t\tname: councilCode,\n\t\t\t\tfields: [\"name\", \"council_name\", \"contact_email\", \"contact_phone\"],\n\t\t\t})\n\t\t}\n\t},\n\t{ immediate: true },\n)\n\n// Get statutory clock data from appropriate source (RC Application or Request)\nconst { clockData, progressPercent } = useStatutoryClock(request)\n\n// Parse form data from draft_full_data as fallback\nconst parsedFormData = computed(() => {\n\tif (!request.data) return {}\n\n\ttry {\n\t\tlet formData = null\n\t\tif (request.data.draft_full_data) {\n\t\t\tformData =\n\t\t\t\ttypeof request.data.draft_full_data === \"string\"\n\t\t\t\t\t? JSON.parse(request.data.draft_full_data)\n\t\t\t\t\t: request.data.draft_full_data\n\t\t}\n\n\t\tif (!formData) return {}\n\n\t\t// Filter out standard fields\n\t\tconst standardFields = [\n\t\t\t\"name\",\n\t\t\t\"owner\",\n\t\t\t\"creation\",\n\t\t\t\"modified\",\n\t\t\t\"modified_by\",\n\t\t\t\"docstatus\",\n\t\t\t\"idx\",\n\t\t\t\"council\",\n\t\t\t\"request_type\",\n\t\t\t\"request_number\",\n\t\t\t\"status\",\n\t\t\t\"requester\",\n\t\t\t\"requester_name\",\n\t\t\t\"requester_email\",\n\t\t\t\"requester_phone\",\n\t\t\t\"requester_signature\",\n\t\t\t\"applicant_address\",\n\t\t\t\"applicant_company\",\n\t\t\t\"property\",\n\t\t\t\"property_address\",\n\t\t\t\"legal_description\",\n\t\t\t\"brief_description\",\n\t\t\t\"detailed_description\",\n\t\t\t\"delivery_preference\",\n\t\t\t\"invoice_to\",\n\t\t\t\"invoice_recipient_name\",\n\t\t\t\"invoice_recipient_email\",\n\t\t\t\"purchase_order_number\",\n\t\t\t\"total_fees\",\n\t\t\t\"total_paid\",\n\t\t\t\"payment_status\",\n\t\t\t\"request_category\",\n\t\t\t\"draft_current_step\",\n\t\t\t\"draft_total_steps\",\n\t\t\t\"draft_full_data\",\n\t\t\t\"form_data\",\n\t\t\t\"signature_date\",\n\t\t]\n\n\t\tconst filtered = {}\n\t\tObject.keys(formData).forEach((key) => {\n\t\t\tif (\n\t\t\t\t!standardFields.includes(key) &&\n\t\t\t\tformData[key] !== null &&\n\t\t\t\tformData[key] !== \"\"\n\t\t\t) {\n\t\t\t\tfiltered[key] = formData[key]\n\t\t\t}\n\t\t})\n\n\t\treturn filtered\n\t} catch (error) {\n\t\tconsole.error(\"Error parsing form data:\", error)\n\t\treturn {}\n\t}\n})\n\n// Create enriched request data that merges request.data with draft_full_data\nconst enrichedRequest = computed(() => {\n\tif (!request.data) return {}\n\n\ttry {\n\t\tlet fullFormData = {}\n\t\tif (request.data.draft_full_data) {\n\t\t\tfullFormData =\n\t\t\t\ttypeof request.data.draft_full_data === \"string\"\n\t\t\t\t\t? JSON.parse(request.data.draft_full_data)\n\t\t\t\t\t: request.data.draft_full_data\n\t\t}\n\n\t\t// Merge request.data with full form data from draft_full_data\n\t\t// draft_full_data takes precedence for any overlapping keys\n\t\treturn {\n\t\t\t...request.data,\n\t\t\t...fullFormData\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error merging form data:\", error)\n\t\treturn request.data\n\t}\n})\n\n// Get review sections from request type configuration (same logic as ReviewStep)\nconst reviewSections = computed(() => {\n\tif (!requestTypeConfig.data?.steps) return []\n\n\t// Filter steps that should show on review\n\treturn requestTypeConfig.data.steps.filter((step) => step.show_on_review)\n})\n\n// Check if property details should be displayed (same logic as ReviewStep)\nconst hasPropertyDetails = computed(() => {\n\t// Show if request has property address (check enriched data)\n\tif (enrichedRequest.value?.property_address) {\n\t\treturn true\n\t}\n\n\t// Check if request type config indicates property is needed\n\tif (requestTypeConfig.data?.property_required) {\n\t\treturn true\n\t}\n\n\treturn false\n})\n\n// Check if a step has any content to show on review\nconst hasReviewContent = (step) => {\n\tif (!step.sections) return false\n\n\tfor (const section of step.sections) {\n\t\tif (!section.show_on_review) continue\n\n\t\tfor (const field of section.fields) {\n\t\t\tif (field.show_on_review && request.data[field.field_name]) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false\n}\n\n// Format field value for display (same as ReviewStep)\nconst formatFieldValue = (field, value) => {\n\tif (value === undefined || value === null || value === \"\") {\n\t\treturn \"Not provided\"\n\t}\n\n\t// Check field type\n\tif (field.field_type === \"Check\") {\n\t\treturn value ? \"Yes\" : \"No\"\n\t}\n\n\tif (field.field_type === \"Date\" && value) {\n\t\t// Format date nicely\n\t\ttry {\n\t\t\treturn new Date(value).toLocaleDateString(\"en-NZ\", {\n\t\t\t\tyear: \"numeric\",\n\t\t\t\tmonth: \"long\",\n\t\t\t\tday: \"numeric\",\n\t\t\t})\n\t\t} catch (e) {\n\t\t\treturn value\n\t\t}\n\t}\n\n\tif (field.field_type === \"Currency\" && value) {\n\t\treturn `$${Number.parseFloat(value).toFixed(2)}`\n\t}\n\n\tif (Array.isArray(value)) {\n\t\treturn value.join(\", \")\n\t}\n\n\treturn value\n}\n\n// Helper function to format field labels (convert snake_case to Title Case)\nconst formatFieldLabel = (fieldName) => {\n\treturn fieldName\n\t\t.split(\"_\")\n\t\t.map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n\t\t.join(\" \")\n}\n\n// Helper function to format simple values (for fallback display)\nconst formatSimpleValue = (value) => {\n\tif (value === null || value === undefined || value === \"\") {\n\t\treturn \"Not provided\"\n\t}\n\n\tif (typeof value === \"boolean\") {\n\t\treturn value ? \"Yes\" : \"No\"\n\t}\n\n\tif (Array.isArray(value)) {\n\t\treturn value.join(\", \")\n\t}\n\n\tif (typeof value === \"object\") {\n\t\treturn JSON.stringify(value)\n\t}\n\n\t// Handle dates\n\tif (typeof value === \"string\" && /^\\d{4}-\\d{2}-\\d{2}/.test(value)) {\n\t\ttry {\n\t\t\treturn new Date(value).toLocaleDateString(\"en-NZ\", {\n\t\t\t\tyear: \"numeric\",\n\t\t\t\tmonth: \"long\",\n\t\t\t\tday: \"numeric\",\n\t\t\t})\n\t\t} catch (e) {\n\t\t\treturn value\n\t\t}\n\t}\n\n\treturn value\n}\n\n// Helper function to format address from address_line object\nconst formatAddress = (addressObj) => {\n\tif (!addressObj) return null\n\n\t// If it's already a string, return it\n\tif (typeof addressObj === \"string\") return addressObj\n\n\t// If it's an object with full_address, use that\n\tif (addressObj.full_address) return addressObj.full_address\n\n\t// Otherwise build address from components\n\tconst parts = []\n\tif (addressObj.address_line) parts.push(addressObj.address_line)\n\tif (addressObj.barangay) parts.push(`Brgy. ${addressObj.barangay}`)\n\tif (addressObj.municipality) parts.push(addressObj.municipality)\n\tif (addressObj.province) parts.push(addressObj.province)\n\tif (addressObj.zip_code) parts.push(addressObj.zip_code)\n\n\treturn parts.length > 0 ? parts.join(\", \") : null\n}\n\nconst goBack = () => {\n\trouter.push({ name: \"Dashboard\" })\n}\n\n// Format meeting date with time\nconst formatMeetingDate = (dateStr) => {\n\tif (!dateStr) return \"Not scheduled\"\n\ttry {\n\t\treturn new Date(dateStr).toLocaleString(\"en-NZ\", {\n\t\t\tweekday: \"long\",\n\t\t\tyear: \"numeric\",\n\t\t\tmonth: \"long\",\n\t\t\tday: \"numeric\",\n\t\t\thour: \"2-digit\",\n\t\t\tminute: \"2-digit\",\n\t\t})\n\t} catch (e) {\n\t\treturn dateStr\n\t}\n}\n\nconst formatDate = (dateStr) => {\n\tif (!dateStr) return \"N/A\"\n\tconst date = new Date(dateStr)\n\treturn date.toLocaleDateString(\"en-NZ\", {\n\t\tyear: \"numeric\",\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t\thour: \"2-digit\",\n\t\tminute: \"2-digit\",\n\t})\n}\n\n// Quick Actions\nconst handleUploadDocument = () => {\n\tfileInput.value.click()\n}\n\nconst handleFileUpload = async (event) => {\n\tconst files = Array.from(event.target.files)\n\tif (files.length === 0) return\n\n\tuploading.value = true\n\ttry {\n\t\tfor (const file of files) {\n\t\t\tconst formData = new FormData()\n\t\t\tformData.append(\"file\", file)\n\t\t\tformData.append(\"doctype\", \"Request\")\n\t\t\tformData.append(\"docname\", request.data.name)\n\t\t\tformData.append(\"is_private\", 0)\n\n\t\t\tawait fetch(\"/api/method/upload_file\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t\t},\n\t\t\t\tbody: formData,\n\t\t\t})\n\t\t}\n\n\t\talert(`${files.length} document(s) uploaded successfully!`)\n\t\trequest.reload()\n\t\tevent.target.value = \"\" // Reset file input\n\t} catch (error) {\n\t\tconsole.error(\"Error uploading file:\", error)\n\t\talert(\"Failed to upload document. Please try again.\")\n\t} finally {\n\t\tuploading.value = false\n\t}\n}\n\nconst handleSendMessage = () => {\n\tshowSendMessageModal.value = true\n}\n\nconst handleMessageSent = () => {\n\t// Toast notification would be better than alert to avoid blocking modal close\n\t// alert('Message sent successfully! The council will respond within 2-3 business days.')\n\trequest.reload()\n}\n\nconst handlePrintApplication = () => {\n\twindow.print()\n}\n\nconst handleEditDraft = () => {\n\tif (!request.data) {\n\t\talert(\"Error: Request data not loaded\")\n\t\treturn\n\t}\n\n\tif (!request.data.request_type) {\n\t\talert(\"Error: Request type missing\")\n\t\treturn\n\t}\n\n\tconst url = `/request/new?type=${encodeURIComponent(request.data.request_type)}&draft=${encodeURIComponent(request.data.name)}`\n\trouter.push(url)\n}\n\nconst handleDeleteDraft = async () => {\n\tif (\n\t\t!confirm(\n\t\t\t\"Are you sure you want to delete this draft application? This action cannot be undone.\",\n\t\t)\n\t) {\n\t\treturn\n\t}\n\n\tdeleting.value = true\n\ttry {\n\t\tawait fetch(\"/api/method/frappe.client.delete\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tdoctype: \"Request\",\n\t\t\t\tname: request.data.name,\n\t\t\t}),\n\t\t})\n\n\t\talert(\"Draft deleted successfully\")\n\t\trouter.push({ name: \"Dashboard\" })\n\t} catch (error) {\n\t\tconsole.error(\"Error deleting draft:\", error)\n\t\talert(\"Failed to delete draft. Please try again.\")\n\t} finally {\n\t\tdeleting.value = false\n\t}\n}\n\nconst handleSubmitApplication = async () => {\n\tif (\n\t\t!confirm(\n\t\t\t\"Are you sure you want to submit this application? Once submitted, it cannot be edited.\",\n\t\t)\n\t) {\n\t\treturn\n\t}\n\n\tsubmitting.value = true\n\ttry {\n\t\tconst response = await fetch(\n\t\t\t\"/api/method/lodgeick.lodgeick.doctype.request.request.submit_application\",\n\t\t\t{\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\trequest_id: request.data.name,\n\t\t\t\t}),\n\t\t\t},\n\t\t)\n\n\t\tconst result = await response.json()\n\n\t\tif (result.message && result.message.success) {\n\t\t\talert(\n\t\t\t\t`Application submitted successfully! Request Number: ${result.message.request_number}`,\n\t\t\t)\n\t\t\trequest.reload()\n\t\t} else {\n\t\t\tthrow new Error(\"Failed to submit application\")\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error submitting application:\", error)\n\t\talert(\"Failed to submit application. Please try again.\")\n\t} finally {\n\t\tsubmitting.value = false\n\t}\n}\n\nconst showPaymentModal = ref(false)\n\nconst handleMakePayment = () => {\n\tshowPaymentModal.value = true\n}\n\nconst handleInvoiceRequested = (invoiceData) => {\n\t// Show success message\n\tconst message = invoiceData.warning ||\n\t\t`Invoice requested successfully!\\n\\nInvoice #${invoiceData.invoice_number}\\nAn email has been sent to ${invoiceData.email}`\n\n\talert(message)\n\n\t// Reload request to show updated payment status\n\tresource.reload()\n}\n\nconst handleBookMeeting = () => {\n\tshowBookMeetingModal.value = true\n}\n\nconst handleMeetingBooked = async (meetingData) => {\n\talert(\n\t\t`Meeting request submitted successfully!\\n\\nMeeting ID: ${meetingData.meeting_id}\\nStatus: ${meetingData.status}\\n\\nA council planner will contact you within 2 business days.`,\n\t)\n\t// Clear editing state and reload meetings list\n\teditingMeeting.value = null\n\tawait meetings.reload()\n}\n\nconst editingMeeting = ref(null)\n\nconst handleEditMeeting = (meeting) => {\n\t// Store meeting data for pre-filling the modal\n\teditingMeeting.value = meeting\n\tshowBookMeetingModal.value = true\n}\n\nconst handleCancelMeeting = async (meeting) => {\n\tif (\n\t\t!confirm(\n\t\t\t`Are you sure you want to cancel this meeting request?\\n\\nMeeting Type: ${meeting.meeting_type}\\nStatus: ${meeting.status}\\n\\nThis action cannot be undone.`,\n\t\t)\n\t) {\n\t\treturn\n\t}\n\n\tcancellingMeeting.value = true\n\ttry {\n\t\tconst response = await fetch(\"/api/method/lodgeick.api.cancel_meeting\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tmeeting_id: meeting.name,\n\t\t\t}),\n\t\t})\n\n\t\tconst result = await response.json()\n\n\t\tif (result.message && result.message.success) {\n\t\t\talert(\"Meeting cancelled successfully.\")\n\t\t\tawait meetings.reload()\n\t\t} else {\n\t\t\tthrow new Error(result.message?.error || \"Failed to cancel meeting\")\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error cancelling meeting:\", error)\n\t\talert(\n\t\t\t`Failed to cancel meeting: ${error.message}\\n\\nPlease try again or contact support.`,\n\t\t)\n\t} finally {\n\t\tcancellingMeeting.value = false\n\t}\n}\n</script>\n"],"file":"assets/RequestDetail-C0VuWuFN.js"}