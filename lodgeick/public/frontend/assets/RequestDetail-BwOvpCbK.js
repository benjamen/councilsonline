const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SendMessageModal-CYycA2wl.js","assets/index-RkzMHvOb.js","assets/index-C34I5Kxa.css","assets/BookMeetingModal-Bl3gxwM2.js"])))=>i.map(i=>d[i]);
var Pt=Object.defineProperty;var ot=Object.getOwnPropertySymbols;var Bt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable;var rt=(v,g,c)=>g in v?Pt(v,g,{enumerable:!0,configurable:!0,writable:!0,value:c}):v[g]=c,J=(v,g)=>{for(var c in g||(g={}))Bt.call(g,c)&&rt(v,c,g[c]);if(ot)for(var c of ot(g))Ft.call(g,c)&&rt(v,c,g[c]);return v};var P=(v,g,c)=>new Promise((A,N)=>{var T=_=>{try{C(c.next(_))}catch(M){N(M)}},R=_=>{try{C(c.throw(_))}catch(M){N(M)}},C=_=>_.done?A(_.value):Promise.resolve(_.value).then(T,R);C((c=c.apply(v,g)).next())});import{C as Rt,f as jt,r as q,n as z,E as nt,j as I,c as i,o as r,b as S,a as e,d as l,w as x,z as j,u as a,i as D,h as w,t as n,B as V,F as B,l as F,g as Tt,y as Lt,J as it,K as lt}from"./index-RkzMHvOb.js";import{_ as dt}from"./StatusBadge-B2p4STqE.js";import{_ as Et}from"./RequestHeader-DpgWG_t1.js";import{u as $t}from"./useStatutoryClock-BmmUqlXL.js";const zt={class:"min-h-screen bg-gray-50"},It={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Vt={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ht={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ut={class:"lg:col-span-2 space-y-6"},Jt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ot={class:"grid grid-cols-2 gap-4"},Yt={class:"mt-1 text-sm text-gray-900"},Xt={class:"mt-1 text-sm text-gray-900"},Zt={class:"mt-1"},Kt={class:"mt-1 text-sm text-gray-900"},Qt={class:"mt-6 pt-6 border-t border-gray-200"},Gt={class:"mt-1 text-sm text-gray-900"},Wt={class:"mt-4"},te=["innerHTML"],ee={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},se={class:"grid grid-cols-2 gap-4"},ae={key:0},oe={class:"mt-1 text-sm text-gray-900"},re={key:1},ne={class:"mt-1 text-sm text-gray-900"},ie={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},le={class:"grid grid-cols-2 gap-4"},de={class:"mt-1 text-sm text-gray-900"},ue={class:"mt-1 text-sm text-gray-900"},me={class:"mt-1 text-sm text-gray-900"},ce={class:"mt-1 text-sm text-gray-900"},pe={key:0},ge={class:"mt-1 text-sm text-gray-900"},ye={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},fe={class:"space-y-6"},xe={class:"grid grid-cols-2 gap-4"},_e={class:"mt-1 text-sm text-gray-900"},be={class:"mt-1 text-sm text-gray-900"},ve={class:"mt-1 text-sm text-gray-900"},he={class:"mt-1 text-sm text-gray-900"},we={class:"grid grid-cols-2 gap-4"},ke={class:"mt-1 text-sm text-gray-900"},Ce={class:"mt-1 text-sm text-gray-900"},Me={class:"mt-1 text-sm text-gray-900"},qe={class:"mt-1 text-sm text-gray-900"},Se={class:"mt-1 text-sm text-gray-900"},De={class:"grid grid-cols-2 gap-4"},Ae={key:0},Ne={class:"mt-1 text-sm text-gray-900"},Pe={key:1},Be={class:"mt-1 text-sm text-gray-900"},Fe={key:2},Re={class:"mt-1 text-sm text-gray-900"},je={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Te={class:"grid grid-cols-2 gap-4"},Le={key:0},Ee={class:"mt-1 text-sm text-gray-900"},$e={key:1},ze={class:"mt-1 text-sm text-gray-900"},Ie={key:2},Ve={class:"mt-1 text-sm text-gray-900"},He={key:3},Ue={class:"mt-1 text-sm text-gray-900"},Je={key:4,class:"col-span-2"},Oe={class:"mt-1 text-sm text-gray-900"},Ye={key:3,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Xe={class:"flex justify-between items-start mb-4"},Ze={key:0,class:"space-y-4"},Ke={class:"grid grid-cols-2 gap-3 text-sm"},Qe={class:"ml-2 text-gray-900"},Ge={class:"ml-2 text-gray-900"},We={key:0,class:"col-span-2"},ts={class:"ml-2 text-gray-900"},es={key:1,class:"col-span-2"},ss={class:"ml-2 text-gray-900"},as={key:2,class:"col-span-2"},os={class:"ml-2 text-gray-900"},rs={key:3,class:"col-span-2"},ns=["href"],is={key:0,class:"mt-3 pt-3 border-t border-blue-200"},ls={class:"mt-1 text-sm text-gray-900"},ds={key:1,class:"mt-3 pt-3 border-t border-blue-200"},us={class:"mt-2 space-y-1"},ms={key:2,class:"mt-4 pt-3 border-t border-blue-200 flex space-x-3"},cs=["onClick"],ps=["onClick","disabled"],gs={key:1,class:"text-center py-6"},ys={class:"text-lg font-semibold text-gray-900 mb-4"},fs={class:"space-y-4"},xs={key:0,class:"text-md font-medium text-gray-700 mb-3"},_s={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bs={class:"text-sm font-medium text-gray-500"},vs={class:"mt-1 text-sm text-gray-900"},hs={key:0,class:"text-gray-500 text-sm"},ws={key:5,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ks={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Cs={class:"text-sm font-medium text-gray-500"},Ms={class:"mt-1 text-sm text-gray-900"},qs={key:6,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ss={class:"flex justify-between items-center mb-4"},Ds={class:"space-y-3"},As={class:"flex justify-between items-center py-2 border-b border-gray-100"},Ns={class:"text-sm font-semibold text-gray-900"},Ps={class:"flex justify-between items-center py-2 border-b border-gray-100"},Bs={class:"text-sm font-semibold text-green-600"},Fs={class:"flex justify-between items-center py-2"},Rs={class:"text-sm font-bold text-orange-600"},js={key:7,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ts={class:"flex justify-between items-center mb-4"},Ls={class:"space-y-3"},Es={class:"flex justify-between items-center py-2 border-b border-gray-100"},$s={class:"text-sm font-semibold text-gray-900"},zs={class:"flex justify-between items-center py-2 border-b border-gray-100"},Is={key:0,class:"flex justify-between items-center py-2"},Vs={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Hs={class:"flex justify-between items-center mb-4"},Us={key:0,class:"text-center py-8"},Js={class:"space-y-6"},Os={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ys={key:0,class:"mb-6 p-4 bg-blue-50 rounded-lg"},Xs={class:"flex items-center justify-between mb-2"},Zs={class:"text-xs text-blue-700"},Ks={class:"w-full bg-blue-200 rounded-full h-2"},Qs={class:"mt-2 text-xs text-blue-700"},Gs={class:"space-y-4"},Ws={class:"flex items-start space-x-3"},ta={class:"flex-1"},ea={class:"text-xs text-gray-500"},sa={key:0,class:"flex items-start space-x-3"},aa={class:"flex-1"},oa={class:"text-xs text-gray-500"},ra={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},na={class:"space-y-3"},ia={class:"bg-blue-50 rounded-lg border border-blue-200 p-6"},la={class:"text-xs text-blue-800 mb-4"},da={key:0,class:"text-xs text-blue-800"},ua={key:1,class:"space-y-2 text-xs text-blue-900"},ma={key:0,class:"flex items-center space-x-2"},ca=["href"],pa={key:1,class:"flex items-center space-x-2"},ga=["href"],va={__name:"RequestDetail",setup(v){const g=it(()=>lt(()=>import("./SendMessageModal-CYycA2wl.js"),__vite__mapDeps([0,1,2]))),c=it(()=>lt(()=>import("./BookMeetingModal-Bl3gxwM2.js"),__vite__mapDeps([3,1,2]))),A=Rt(),N=jt(),T=q(null),R=q(!1),C=q(!1),_=q(!1),M=q(!1),H=q(!1),L=q(!1),o=z({url:"frappe.client.get",params:{doctype:"Request",name:A.params.id},auto:!0}),y=z({url:"lodgeick.api.get_request_meetings",params:{request_id:A.params.id},auto:!0}),b=z({url:"lodgeick.api.get_request_type_config",auto:!1}),h=z({url:"frappe.client.get",auto:!1});nt(()=>{var s;return(s=o.data)==null?void 0:s.request_type},s=>{s&&b.fetch({request_type_code:s})},{immediate:!0}),nt(()=>{var s;return(s=o.data)==null?void 0:s.council},s=>{s&&h.fetch({doctype:"Council",name:s,fields:["name","council_name","contact_email","contact_phone"]})},{immediate:!0});const{clockData:E,progressPercent:ut}=$t(o),U=I(()=>{if(!o.data)return{};try{let s=null;if(o.data.draft_full_data&&(s=typeof o.data.draft_full_data=="string"?JSON.parse(o.data.draft_full_data):o.data.draft_full_data),!s)return{};const t=["name","owner","creation","modified","modified_by","docstatus","idx","council","request_type","request_number","status","requester","requester_name","requester_email","requester_phone","requester_signature","applicant_address","applicant_company","property","property_address","legal_description","brief_description","detailed_description","delivery_preference","invoice_to","invoice_recipient_name","invoice_recipient_email","purchase_order_number","total_fees","total_paid","payment_status","request_category","draft_current_step","draft_total_steps","draft_full_data","form_data","signature_date"],p={};return Object.keys(s).forEach(m=>{!t.includes(m)&&s[m]!==null&&s[m]!==""&&(p[m]=s[m])}),p}catch(s){return console.error("Error parsing form data:",s),{}}}),u=I(()=>{if(!o.data)return{};try{let s={};return o.data.draft_full_data&&(s=typeof o.data.draft_full_data=="string"?JSON.parse(o.data.draft_full_data):o.data.draft_full_data),J(J({},o.data),s)}catch(s){return console.error("Error merging form data:",s),o.data}}),O=I(()=>{var s;return(s=b.data)!=null&&s.steps?b.data.steps.filter(t=>t.show_on_review):[]}),mt=I(()=>{var s,t;return!!((s=u.value)!=null&&s.property_address||(t=b.data)!=null&&t.property_required)}),ct=s=>{if(!s.sections)return!1;for(const t of s.sections)if(t.show_on_review){for(const p of t.fields)if(p.show_on_review&&o.data[p.field_name])return!0}return!1},pt=(s,t)=>{if(t==null||t==="")return"Not provided";if(s.field_type==="Check")return t?"Yes":"No";if(s.field_type==="Date"&&t)try{return new Date(t).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(p){return t}return s.field_type==="Currency"&&t?`$${Number.parseFloat(t).toFixed(2)}`:Array.isArray(t)?t.join(", "):t},gt=s=>s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),yt=s=>{if(s==null||s==="")return"Not provided";if(typeof s=="boolean")return s?"Yes":"No";if(Array.isArray(s))return s.join(", ");if(typeof s=="object")return JSON.stringify(s);if(typeof s=="string"&&/^\d{4}-\d{2}-\d{2}/.test(s))try{return new Date(s).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"})}catch(t){return s}return s},ft=s=>{if(!s)return null;if(typeof s=="string")return s;if(s.full_address)return s.full_address;const t=[];return s.address_line&&t.push(s.address_line),s.barangay&&t.push(`Brgy. ${s.barangay}`),s.municipality&&t.push(s.municipality),s.province&&t.push(s.province),s.zip_code&&t.push(s.zip_code),t.length>0?t.join(", "):null},xt=()=>{N.push({name:"Dashboard"})},Y=s=>{if(!s)return"Not scheduled";try{return new Date(s).toLocaleString("en-NZ",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return s}},$=s=>s?new Date(s).toLocaleDateString("en-NZ",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",_t=()=>{T.value.click()},bt=s=>P(this,null,function*(){const t=Array.from(s.target.files);if(t.length!==0){R.value=!0;try{for(const p of t){const m=new FormData;m.append("file",p),m.append("doctype","Request"),m.append("docname",o.data.name),m.append("is_private",0),yield fetch("/api/method/upload_file",{method:"POST",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:m})}alert(`${t.length} document(s) uploaded successfully!`),o.reload(),s.target.value=""}catch(p){console.error("Error uploading file:",p),alert("Failed to upload document. Please try again.")}finally{R.value=!1}}}),vt=()=>{H.value=!0},ht=()=>{o.reload()},wt=()=>{window.print()},kt=()=>{if(!o.data){alert("Error: Request data not loaded");return}if(!o.data.request_type){alert("Error: Request type missing");return}const s=`/request/new?type=${encodeURIComponent(o.data.request_type)}&draft=${encodeURIComponent(o.data.name)}`;N.push(s)},Ct=()=>P(this,null,function*(){if(confirm("Are you sure you want to delete this draft application? This action cannot be undone.")){_.value=!0;try{yield fetch("/api/method/frappe.client.delete",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({doctype:"Request",name:o.data.name})}),alert("Draft deleted successfully"),N.push({name:"Dashboard"})}catch(s){console.error("Error deleting draft:",s),alert("Failed to delete draft. Please try again.")}finally{_.value=!1}}}),Mt=()=>P(this,null,function*(){if(confirm("Are you sure you want to submit this application? Once submitted, it cannot be edited.")){C.value=!0;try{const t=yield(yield fetch("/api/method/lodgeick.lodgeick.doctype.request.request.submit_application",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({request_id:o.data.name})})).json();if(t.message&&t.message.success)alert(`Application submitted successfully! Request Number: ${t.message.request_number}`),o.reload();else throw new Error("Failed to submit application")}catch(s){console.error("Error submitting application:",s),alert("Failed to submit application. Please try again.")}finally{C.value=!1}}}),qt=()=>{alert(`Payment feature - Coming soon!

You will receive an invoice via email.`)},St=()=>{L.value=!0},Dt=s=>P(this,null,function*(){alert(`Meeting request submitted successfully!

Meeting ID: ${s.meeting_id}
Status: ${s.status}

A council planner will contact you within 2 business days.`),yield y.reload()}),At=s=>{L.value=!0,alert(`Edit meeting functionality - opening booking modal.

Note: You can submit a new request with updated time slots. The previous request will be updated.`)},Nt=s=>P(this,null,function*(){var t;if(confirm(`Are you sure you want to cancel this meeting request?

Meeting Type: ${s.meeting_type}
Status: ${s.status}

This action cannot be undone.`)){M.value=!0;try{const m=yield(yield fetch("/api/method/lodgeick.api.cancel_meeting",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({meeting_id:s.name})})).json();if(m.message&&m.message.success)alert("Meeting cancelled successfully."),yield y.reload();else throw new Error(((t=m.message)==null?void 0:t.error)||"Failed to cancel meeting")}catch(p){console.error("Error cancelling meeting:",p),alert(`Failed to cancel meeting: ${p.message}

Please try again or contact support.`)}finally{M.value=!1}}});return(s,t)=>{var p,m,X,Z,K,Q,G,W,tt,et,st,at;return r(),i("div",zt,[S(Et,{title:((p=a(o).data)==null?void 0:p.request_number)||"Loading...",subtitle:(m=a(o).data)==null?void 0:m.request_type,loading:a(o).loading,onBack:xt},{actions:x(()=>{var d;return[a(o).data?(r(),j(dt,{key:0,status:a(o).data.workflow_state},null,8,["status"])):l("",!0),((d=a(o).data)==null?void 0:d.workflow_state)==="Draft"?(r(),j(a(D),{key:1,onClick:Mt,variant:"solid",theme:"blue",loading:C.value},{default:x(()=>[...t[2]||(t[2]=[w(" Submit Application ",-1)])]),_:1},8,["loading"])):l("",!0)]}),_:1},8,["title","subtitle","loading"]),e("input",{ref_key:"fileInput",ref:T,type:"file",multiple:"",class:"hidden",onChange:bt},null,544),a(o).loading?(r(),i("div",It,[...t[3]||(t[3]=[e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e("p",{class:"mt-4 text-gray-500"},"Loading request details...")],-1)])])):a(o).data?(r(),i("div",Vt,[e("div",Ht,[e("div",Ut,[e("div",Jt,[t[10]||(t[10]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Application Overview",-1)),e("div",Ot,[e("div",null,[t[4]||(t[4]=e("label",{class:"text-sm font-medium text-gray-500"},"Request Number",-1)),e("p",Yt,n(a(o).data.request_number),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-gray-500"},"Type",-1)),e("p",Xt,n(a(o).data.request_type),1)]),e("div",null,[t[6]||(t[6]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("div",Zt,[S(dt,{status:a(o).data.workflow_state},null,8,["status"])])]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-500"},"Submitted Date",-1)),e("p",Kt,n($(a(o).data.creation)),1)])]),e("div",Qt,[t[8]||(t[8]=e("label",{class:"text-sm font-medium text-gray-500"},"Brief Description",-1)),e("p",Gt,n(a(o).data.brief_description||"N/A"),1)]),e("div",Wt,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Detailed Description",-1)),e("div",{class:"mt-1 text-sm text-gray-900 prose prose-sm max-w-none",innerHTML:a(o).data.detailed_description||"N/A"},null,8,te)])]),mt.value?(r(),i("div",ee,[t[13]||(t[13]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Property Information",-1)),e("div",se,[u.value.property_address?(r(),i("div",ae,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",oe,n(u.value.property_address),1)])):l("",!0),u.value.legal_description?(r(),i("div",re,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Legal Description",-1)),e("p",ne,n(u.value.legal_description),1)])):l("",!0)])])):l("",!0),e("div",ie,[t[19]||(t[19]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Applicant Information",-1)),e("div",le,[e("div",null,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Name",-1)),e("p",de,n(u.value.full_name||u.value.requester_name||"N/A"),1)]),e("div",null,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("p",ue,n(u.value.requester_email||"N/A"),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),e("p",me,n(u.value.mobile_number||u.value.requester_phone||"N/A"),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",ce,n(ft(u.value.address_line)||u.value.applicant_address||"N/A"),1)]),u.value.applicant_company?(r(),i("div",pe,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-gray-500"},"Company/Organization",-1)),e("p",ge,n(u.value.applicant_company),1)])):l("",!0)])]),(Z=(X=a(o).data)==null?void 0:X.request_type)!=null&&Z.includes("SPISC")?(r(),i("div",ye,[t[35]||(t[35]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"SPISC Application Details",-1)),e("div",fe,[e("div",null,[t[24]||(t[24]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Personal Information",-1)),e("div",xe,[e("div",null,[t[20]||(t[20]=e("label",{class:"text-sm font-medium text-gray-500"},"Birth Date",-1)),e("p",_e,n($(u.value.birth_date)||"N/A"),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"text-sm font-medium text-gray-500"},"Age",-1)),e("p",be,n(u.value.age||"N/A"),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"text-sm font-medium text-gray-500"},"Sex",-1)),e("p",ve,n(u.value.sex||"N/A"),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"text-sm font-medium text-gray-500"},"Civil Status",-1)),e("p",he,n(u.value.civil_status||"N/A"),1)])])]),e("div",null,[t[30]||(t[30]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Household & Economic Information",-1)),e("div",we,[e("div",null,[t[25]||(t[25]=e("label",{class:"text-sm font-medium text-gray-500"},"Household Size",-1)),e("p",ke,n(u.value.household_size||"N/A"),1)]),e("div",null,[t[26]||(t[26]=e("label",{class:"text-sm font-medium text-gray-500"},"Living Arrangement",-1)),e("p",Ce,n(u.value.living_arrangement||"N/A"),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"text-sm font-medium text-gray-500"},"Monthly Income",-1)),e("p",Me,"â‚±"+n(u.value.monthly_income||"0"),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"text-sm font-medium text-gray-500"},"Income Source",-1)),e("p",qe,n(u.value.income_source||"N/A"),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"text-sm font-medium text-gray-500"},"4Ps Beneficiary",-1)),e("p",Se,n(u.value.is_4ps_beneficiary?"Yes":"No"),1)])])]),e("div",null,[t[34]||(t[34]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Identity Documents",-1)),e("div",De,[a(o).data.philsys_id?(r(),i("div",Ae,[t[31]||(t[31]=e("label",{class:"text-sm font-medium text-gray-500"},"PhilSys ID",-1)),e("p",Ne,n(a(o).data.philsys_id),1)])):l("",!0),a(o).data.sss_number?(r(),i("div",Pe,[t[32]||(t[32]=e("label",{class:"text-sm font-medium text-gray-500"},"SSS Number",-1)),e("p",Be,n(a(o).data.sss_number),1)])):l("",!0),a(o).data.osca_id?(r(),i("div",Fe,[t[33]||(t[33]=e("label",{class:"text-sm font-medium text-gray-500"},"OSCA ID",-1)),e("p",Re,n(a(o).data.osca_id),1)])):l("",!0)])])])])):l("",!0),(K=a(b).data)!=null&&K.collect_payment?(r(),i("div",je,[t[41]||(t[41]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Delivery & Payment Preferences",-1)),e("div",Te,[a(o).data.delivery_preference?(r(),i("div",Le,[t[36]||(t[36]=e("label",{class:"text-sm font-medium text-gray-500"},"Delivery Preference",-1)),e("p",Ee,n(a(o).data.delivery_preference),1)])):l("",!0),a(o).data.invoice_to?(r(),i("div",$e,[t[37]||(t[37]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice To",-1)),e("p",ze,n(a(o).data.invoice_to),1)])):l("",!0),a(o).data.invoice_recipient_name?(r(),i("div",Ie,[t[38]||(t[38]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice Recipient Name",-1)),e("p",Ve,n(a(o).data.invoice_recipient_name),1)])):l("",!0),a(o).data.invoice_recipient_email?(r(),i("div",He,[t[39]||(t[39]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice Recipient Email",-1)),e("p",Ue,n(a(o).data.invoice_recipient_email),1)])):l("",!0),a(o).data.purchase_order_number?(r(),i("div",Je,[t[40]||(t[40]=e("label",{class:"text-sm font-medium text-gray-500"},"Purchase Order Number",-1)),e("p",Oe,n(a(o).data.purchase_order_number),1)])):l("",!0)])])):l("",!0),(Q=a(b).data)!=null&&Q.council_meeting_available?(r(),i("div",Ye,[e("div",Xe,[t[42]||(t[42]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Council Meeting"),e("p",{class:"text-sm text-gray-600 mt-1"}," Schedule a meeting with council planners to discuss your application ")],-1)),a(y).data&&a(y).data.length>0?(r(),i("span",{key:0,class:V(["px-3 py-1 rounded-full text-sm font-medium",{"bg-yellow-100 text-yellow-800":a(y).data[0].status==="Requested","bg-blue-100 text-blue-800":a(y).data[0].status==="Scheduled"||a(y).data[0].status==="Confirmed","bg-green-100 text-green-800":a(y).data[0].status==="Completed","bg-gray-100 text-gray-800":a(y).data[0].status==="Cancelled"}])},n(a(y).data[0].status),3)):l("",!0)]),a(y).data&&a(y).data.length>0?(r(),i("div",Ze,[(r(!0),i(B,null,F(a(y).data,d=>(r(),i("div",{key:d.name,class:"border-l-4 border-blue-500 bg-blue-50 p-4 rounded"},[e("div",Ke,[e("div",null,[t[43]||(t[43]=e("span",{class:"font-medium text-gray-700"},"Type:",-1)),e("span",Qe,n(d.meeting_type),1)]),e("div",null,[t[44]||(t[44]=e("span",{class:"font-medium text-gray-700"},"Status:",-1)),e("span",Ge,n(d.status),1)]),d.scheduled_start?(r(),i("div",We,[t[45]||(t[45]=e("span",{class:"font-medium text-gray-700"},"Scheduled:",-1)),e("span",ts,n(Y(d.scheduled_start)),1)])):l("",!0),d.meeting_format?(r(),i("div",es,[t[46]||(t[46]=e("span",{class:"font-medium text-gray-700"},"Format:",-1)),e("span",ss,n(d.meeting_format),1)])):l("",!0),d.meeting_location?(r(),i("div",as,[t[47]||(t[47]=e("span",{class:"font-medium text-gray-700"},"Location:",-1)),e("span",os,n(d.meeting_location),1)])):l("",!0),d.google_meet_link?(r(),i("div",rs,[t[48]||(t[48]=e("span",{class:"font-medium text-gray-700"},"Meeting Link:",-1)),e("a",{href:d.google_meet_link,target:"_blank",class:"ml-2 text-blue-600 hover:underline"},"Join Meeting",8,ns)])):l("",!0)]),d.meeting_purpose?(r(),i("div",is,[t[49]||(t[49]=e("span",{class:"font-medium text-gray-700 text-sm"},"Purpose:",-1)),e("p",ls,n(d.meeting_purpose),1)])):l("",!0),d.status==="Requested"&&d.proposed_slots&&d.proposed_slots.length>0?(r(),i("div",ds,[t[51]||(t[51]=e("span",{class:"font-medium text-gray-700 text-sm"},"Proposed Time Slots:",-1)),e("ul",us,[(r(!0),i(B,null,F(d.proposed_slots,(f,k)=>(r(),i("li",{key:k,class:"text-sm text-gray-900 flex items-center"},[t[50]||(t[50]=e("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),w(" "+n(Y(f)),1)]))),128))])])):l("",!0),d.status==="Requested"||d.status==="Scheduled"?(r(),i("div",ms,[e("button",{onClick:f=>At(),class:"flex-1 px-4 py-2 bg-white border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm font-medium"},[...t[52]||(t[52]=[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),w(" Edit Request ",-1)])],8,cs),e("button",{onClick:f=>Nt(d),disabled:M.value,class:"flex-1 px-4 py-2 bg-white border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"},[...t[53]||(t[53]=[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),w(" Cancel Meeting ",-1)])],8,ps)])):l("",!0)]))),128))])):(r(),i("div",gs,[t[54]||(t[54]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t[55]||(t[55]=e("p",{class:"text-sm text-gray-600 mb-4"}," No meeting scheduled yet. Book a meeting to discuss your application with council planners. ",-1)),e("button",{onClick:St,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Request Council Meeting ")]))])):l("",!0),O.value.length>0?(r(!0),i(B,{key:4},F(O.value,d=>(r(),i("div",{key:d.step_code,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},[e("h2",ys,n(d.step_title),1),e("div",fs,[(r(!0),i(B,null,F(d.sections.filter(f=>f.show_on_review),f=>(r(),i("div",{key:f.section_code},[f.section_title?(r(),i("h3",xs,n(f.section_title),1)):l("",!0),e("div",_s,[(r(!0),i(B,null,F(f.fields.filter(k=>k.show_on_review),k=>(r(),i("div",{key:k.field_name,class:"border-b border-gray-100 pb-3"},[e("label",bs,n(k.review_label||k.field_label),1),e("p",vs,n(pt(k,u.value[k.field_name])),1)]))),128))])]))),128)),ct(d)?l("",!0):(r(),i("p",hs," No information to display "))])]))),128)):U.value&&Object.keys(U.value).length>0?(r(),i("div",ws,[t[56]||(t[56]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Application Details",-1)),e("div",ks,[(r(!0),i(B,null,F(U.value,(d,f)=>(r(),i("div",{key:f,class:"border-b border-gray-100 pb-3"},[e("label",Cs,n(gt(f)),1),e("p",Ms,n(yt(d)),1)]))),128))])])):l("",!0),(G=a(b).data)!=null&&G.collect_payment?(r(),i("div",qs,[e("div",Ss,[t[57]||(t[57]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Fees & Payments",-1)),e("span",{class:V(["text-sm font-medium",a(o).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},n(a(o).data.payment_status||"Unpaid"),3)]),e("div",Ds,[e("div",As,[t[58]||(t[58]=e("span",{class:"text-sm text-gray-600"},"Total Fees",-1)),e("span",Ns,"$"+n((a(o).data.total_fees||0).toFixed(2)),1)]),e("div",Ps,[t[59]||(t[59]=e("span",{class:"text-sm text-gray-600"},"Total Paid",-1)),e("span",Bs,"$"+n((a(o).data.total_paid||0).toFixed(2)),1)]),e("div",Fs,[t[60]||(t[60]=e("span",{class:"text-sm font-medium text-gray-900"},"Outstanding",-1)),e("span",Rs,"$"+n(((a(o).data.total_fees||0)-(a(o).data.total_paid||0)).toFixed(2)),1)])]),(a(o).data.total_fees||0)>(a(o).data.total_paid||0)?(r(),j(a(D),{key:0,onClick:qt,variant:"solid",theme:"blue",class:"w-full mt-4"},{default:x(()=>[...t[61]||(t[61]=[w(" Make Payment ",-1)])]),_:1})):l("",!0)])):l("",!0),(W=a(b).data)!=null&&W.make_payment?(r(),i("div",js,[e("div",Ts,[t[62]||(t[62]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Payment to be Received",-1)),e("span",{class:V(["text-sm font-medium",a(o).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},n(a(o).data.payment_status||"Pending"),3)]),t[66]||(t[66]=Tt('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mt-0.5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="flex-1"><p class="text-sm font-medium text-blue-900">Benefit Payment Information</p><p class="text-sm text-blue-700 mt-1"> Once your application is approved, you will receive payment from the council. Please ensure your bank details are up to date. </p></div></div></div>',1)),e("div",Ls,[e("div",Es,[t[63]||(t[63]=e("span",{class:"text-sm text-gray-600"},"Benefit Amount",-1)),e("span",$s," $"+n((tt=a(b).data)!=null&&tt.base_fee?a(b).data.base_fee.toFixed(2):"0.00"),1)]),e("div",zs,[t[64]||(t[64]=e("span",{class:"text-sm text-gray-600"},"Payment Status",-1)),e("span",{class:V(["text-sm font-semibold",a(o).data.payment_status==="Paid"?"text-green-600":"text-orange-600"])},n(a(o).data.payment_status||"Pending Approval"),3)]),a(o).data.selected_bank_account?(r(),i("div",Is,[...t[65]||(t[65]=[e("span",{class:"text-sm text-gray-600"},"Payment Method",-1),e("span",{class:"text-sm font-medium text-gray-900"},"Bank Transfer",-1)])])):l("",!0)])])):l("",!0),e("div",Vs,[e("div",Hs,[t[69]||(t[69]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Documents",-1)),S(a(D),{onClick:_t,variant:"outline",size:"sm",loading:R.value},{prefix:x(()=>[...t[67]||(t[67]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)])]),default:x(()=>[t[68]||(t[68]=w(" Upload Document ",-1))]),_:1},8,["loading"])]),!a(o).data.attachments||a(o).data.attachments.length===0?(r(),i("div",Us,[...t[70]||(t[70]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No documents uploaded yet",-1)])])):l("",!0)])]),e("div",Js,[e("div",Os,[t[76]||(t[76]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Processing Timeline",-1)),a(E).statutory_clock_started?(r(),i("div",Ys,[e("div",Xs,[t[71]||(t[71]=e("span",{class:"text-sm font-medium text-blue-900"},"SLA / Statutory Clock",-1)),e("span",Zs,n(a(E).working_days_elapsed)+" of 20 days",1)]),e("div",Ks,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Lt({width:`${a(ut)}%`})},null,4)]),e("p",Qs,n(a(E).statutory_clock_stopped?"Clock stopped (RFI issued)":`${a(E).working_days_remaining} days remaining`),1)])):l("",!0),e("div",Gs,[e("div",Ws,[t[73]||(t[73]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1)),e("div",ta,[t[72]||(t[72]=e("p",{class:"text-sm font-medium text-gray-900"},"Application Created",-1)),e("p",ea,n($(a(o).data.creation)),1)])]),a(o).data.modified!==a(o).data.creation?(r(),i("div",sa,[t[75]||(t[75]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})])],-1)),e("div",aa,[t[74]||(t[74]=e("p",{class:"text-sm font-medium text-gray-900"},"Last Updated",-1)),e("p",oa,n($(a(o).data.modified)),1)])])):l("",!0)])]),e("div",ra,[t[85]||(t[85]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",na,[a(o).data.workflow_state==="Draft"?(r(),j(a(D),{key:0,onClick:kt,variant:"solid",theme:"blue",class:"w-full justify-start"},{prefix:x(()=>[...t[77]||(t[77]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),default:x(()=>[t[78]||(t[78]=w(" Edit Draft ",-1))]),_:1})):l("",!0),S(a(D),{onClick:vt,variant:"outline",class:"w-full justify-start"},{prefix:x(()=>[...t[79]||(t[79]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)])]),default:x(()=>[t[80]||(t[80]=w(" Send Message ",-1))]),_:1}),S(a(D),{onClick:wt,variant:"outline",class:"w-full justify-start"},{prefix:x(()=>[...t[81]||(t[81]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)])]),default:x(()=>[t[82]||(t[82]=w(" Print Application ",-1))]),_:1}),a(o).data.workflow_state==="Draft"?(r(),j(a(D),{key:1,onClick:Ct,variant:"outline",class:"w-full justify-start text-red-600 hover:text-red-700",loading:_.value},{prefix:x(()=>[...t[83]||(t[83]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 1 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),default:x(()=>[t[84]||(t[84]=w(" Delete Draft ",-1))]),_:1},8,["loading"])):l("",!0)])]),e("div",ia,[t[88]||(t[88]=e("h3",{class:"text-sm font-semibold text-blue-900 mb-3"},"Need Help?",-1)),e("p",la,"Contact "+n(((et=a(h).data)==null?void 0:et.council_name)||"the council")+" for assistance with your application.",1),a(h).loading?(r(),i("div",da," Loading contact information... ")):a(h).data?(r(),i("div",ua,[a(h).data.contact_email?(r(),i("div",ma,[t[86]||(t[86]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("a",{href:`mailto:${a(h).data.contact_email}`,class:"hover:underline"},n(a(h).data.contact_email),9,ca)])):l("",!0),a(h).data.contact_phone?(r(),i("div",pa,[t[87]||(t[87]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),e("a",{href:`tel:${a(h).data.contact_phone}`,class:"hover:underline"},n(a(h).data.contact_phone),9,ga)])):l("",!0)])):l("",!0)])])])])):l("",!0),S(a(g),{show:H.value,"onUpdate:show":t[0]||(t[0]=d=>H.value=d),"request-id":a(A).params.id,onSent:ht},null,8,["show","request-id"]),S(a(c),{show:L.value,"onUpdate:show":t[1]||(t[1]=d=>L.value=d),"request-id":a(A).params.id,"request-type-code":(st=a(b).data)==null?void 0:st.type_code,"council-code":(at=a(o).data)==null?void 0:at.council,onBooked:Dt},null,8,["show","request-id","request-type-code","council-code"])])}}};export{va as default};
//# sourceMappingURL=RequestDetail-BwOvpCbK.js.map
