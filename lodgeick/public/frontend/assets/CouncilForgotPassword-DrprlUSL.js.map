{"version":3,"file":"CouncilForgotPassword-DrprlUSL.js","sources":["../../../../frontend/src/pages/CouncilForgotPassword.vue"],"sourcesContent":["<template>\n  <div\n    class=\"min-h-screen flex items-center justify-center p-4\"\n    :style=\"backgroundStyle\"\n  >\n    <div class=\"w-full max-w-md\">\n      <!-- Council Logo & Header -->\n      <div class=\"text-center mb-8\">\n        <div v-if=\"councilSettings?.logo\" class=\"mb-4\">\n          <img\n            :src=\"councilSettings.logo\"\n            :alt=\"councilSettings.council_name\"\n            class=\"h-20 mx-auto object-contain\"\n          />\n        </div>\n        <div v-else class=\"inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-4 shadow-lg\" :style=\"{ backgroundColor: primaryColor }\">\n          <svg class=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\" />\n          </svg>\n        </div>\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">Reset Password</h1>\n        <p class=\"text-gray-600\">Enter your email to receive reset instructions</p>\n      </div>\n\n      <!-- Reset Password Card -->\n      <div class=\"bg-white rounded-2xl shadow-xl p-8 border border-gray-100\">\n        <!-- Success State -->\n        <div v-if=\"emailSent\" class=\"text-center\">\n          <div class=\"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\" :style=\"{ backgroundColor: `${primaryColor}20` }\">\n            <svg class=\"w-8 h-8\" :style=\"{ color: primaryColor }\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </div>\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">Check your email</h3>\n          <p class=\"text-gray-600 mb-6\">\n            We've sent password reset instructions to <strong>{{ email }}</strong>\n          </p>\n          <p class=\"text-sm text-gray-500 mb-6\">\n            Didn't receive the email? Check your spam folder or try again.\n          </p>\n          <button\n            @click=\"resetForm\"\n            class=\"text-sm hover:opacity-80\"\n            :style=\"{ color: primaryColor }\"\n          >\n            Try different email\n          </button>\n        </div>\n\n        <!-- Form State -->\n        <form v-else @submit.prevent=\"submit\" class=\"space-y-5\">\n          <!-- Email Input -->\n          <div>\n            <label for=\"email\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n              Email Address\n            </label>\n            <Input\n              id=\"email\"\n              v-model=\"email\"\n              type=\"email\"\n              required\n              placeholder=\"you@example.com\"\n              class=\"w-full\"\n              :disabled=\"isLoading\"\n            />\n          </div>\n\n          <!-- Error Message -->\n          <div v-if=\"errorMessage\" class=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n            <div class=\"flex items-start\">\n              <svg class=\"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <p class=\"text-sm text-red-700\">{{ errorMessage }}</p>\n            </div>\n          </div>\n\n          <!-- Submit Button -->\n          <Button\n            type=\"submit\"\n            :loading=\"isLoading\"\n            variant=\"solid\"\n            class=\"w-full text-white py-3 text-base font-medium\"\n            :style=\"{ backgroundColor: primaryColor, borderColor: primaryColor }\"\n          >\n            <template v-if=\"!isLoading\">\n              Send Reset Link\n            </template>\n            <template v-else>\n              Sending...\n            </template>\n          </Button>\n        </form>\n      </div>\n\n      <!-- Back to Login -->\n      <div class=\"text-center mt-6\">\n        <router-link\n          :to=\"{ name: 'CouncilLogin', params: { councilCode } }\"\n          class=\"text-sm text-gray-600 hover:text-gray-900 inline-flex items-center\"\n        >\n          <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n          </svg>\n          Back to login\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { Button, Input, call } from \"frappe-ui\"\nimport { computed, onMounted, ref } from \"vue\"\nimport { useRoute } from \"vue-router\"\nimport { useCouncilStore } from \"../stores/councilStore\"\n\nconst route = useRoute()\nconst councilStore = useCouncilStore()\n\nconst councilCode = computed(() => route.params.councilCode?.toUpperCase())\nconst councilSettings = ref(null)\nconst email = ref(\"\")\nconst isLoading = ref(false)\nconst emailSent = ref(false)\nconst errorMessage = ref(\"\")\n\n// Load council settings on mount\nonMounted(async () => {\n\ttry {\n\t\tcouncilSettings.value = await councilStore.getCouncilSettings(\n\t\t\tcouncilCode.value,\n\t\t)\n\t} catch (error) {\n\t\tconsole.error(\"Failed to load council settings:\", error)\n\t}\n})\n\n// Computed styles based on council branding\nconst primaryColor = computed(\n\t() => councilSettings.value?.primary_color || \"#2563eb\",\n)\nconst secondaryColor = computed(\n\t() => councilSettings.value?.secondary_color || \"#64748b\",\n)\n\nconst backgroundStyle = computed(() => {\n\tconst color = primaryColor.value\n\treturn {\n\t\tbackground: `linear-gradient(to bottom right, ${color}15, ${secondaryColor.value}15)`,\n\t}\n})\n\nasync function submit() {\n\terrorMessage.value = \"\"\n\tisLoading.value = true\n\n\ttry {\n\t\tawait call(\"frappe.core.doctype.user.user.reset_password\", {\n\t\t\tuser: email.value,\n\t\t})\n\t\temailSent.value = true\n\t} catch (error) {\n\t\tconsole.error(\"Password reset error:\", error)\n\t\terrorMessage.value =\n\t\t\terror.message || \"Failed to send reset email. Please try again.\"\n\t} finally {\n\t\tisLoading.value = false\n\t}\n}\n\nfunction resetForm() {\n\temailSent.value = false\n\temail.value = \"\"\n\terrorMessage.value = \"\"\n}\n</script>\n"],"names":["route","useRoute","councilStore","useCouncilStore","councilCode","computed","_a","councilSettings","ref","email","isLoading","emailSent","errorMessage","onMounted","__async","error","primaryColor","secondaryColor","backgroundStyle","submit","call","resetForm","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_openBlock","_hoisted_3","_cache","_hoisted_5","_hoisted_6","_hoisted_7","_createVNode","_unref","Input","$event","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","Button","_normalizeStyle","_Fragment","_hoisted_11","_component_router_link"],"mappings":"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"}