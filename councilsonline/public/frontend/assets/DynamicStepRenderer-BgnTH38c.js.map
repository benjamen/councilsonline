{"version":3,"file":"DynamicStepRenderer-BgnTH38c.js","sources":["../../../../frontend/node_modules/@heroicons/vue/20/solid/esm/ChevronUpIcon.js","../../../../frontend/src/components/CameraUpload.vue","../../../../frontend/src/components/PhilippinesAddressInput.vue","../../../../frontend/src/components/PropertyAddressSelector.vue","../../../../frontend/src/components/Tooltip.vue","../../../../frontend/src/components/fields/FieldError.vue","../../../../frontend/src/components/fields/CheckboxField.vue","../../../../frontend/src/components/fields/FieldLabel.vue","../../../../frontend/src/components/fields/DateField.vue","../../../../frontend/src/components/fields/NumberField.vue","../../../../frontend/src/components/modals/BookSlotModal.vue","../../../../frontend/src/components/fields/PickupScheduleField.vue","../../../../frontend/src/components/fields/SelectField.vue","../../../../frontend/src/components/fields/TextField.vue","../../../../frontend/src/components/fields/TextareaField.vue","../../../../frontend/src/components/DynamicFieldRenderer.vue","../../../../frontend/src/components/DynamicStepRenderer.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\"\n  }, [\n    _createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z\",\n      \"clip-rule\": \"evenodd\"\n    })\n  ]))\n}","<template>\n  <div class=\"space-y-4\">\n    <!-- Upload Label -->\n    <label class=\"block\">\n      <span class=\"text-sm font-medium text-gray-900\">\n        {{ label }}\n        <span v-if=\"required\" class=\"text-red-500\">*</span>\n      </span>\n      <p v-if=\"helpText\" class=\"text-xs text-gray-500 mt-1\">{{ helpText }}</p>\n    </label>\n\n    <!-- Upload Options -->\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n      <!-- Camera Capture Button -->\n      <button\n        v-if=\"allowCamera\"\n        @click=\"openCamera\"\n        type=\"button\"\n        class=\"relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group\"\n        :class=\"{ 'opacity-50 cursor-not-allowed': uploading }\"\n        :disabled=\"uploading\"\n      >\n        <div class=\"text-center\">\n          <svg class=\"mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" />\n          </svg>\n          <p class=\"mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700\">Take Photo</p>\n          <p class=\"text-xs text-gray-500\">Use camera</p>\n        </div>\n      </button>\n\n      <!-- File Upload Button -->\n      <button\n        @click=\"triggerFileInput\"\n        type=\"button\"\n        class=\"relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group\"\n        :class=\"{ 'opacity-50 cursor-not-allowed': uploading }\"\n        :disabled=\"uploading\"\n      >\n        <div class=\"text-center\">\n          <svg class=\"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n          </svg>\n          <p class=\"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700\">Upload File</p>\n          <p class=\"text-xs text-gray-500\">Browse {{ multiple ? 'files' : 'file' }}</p>\n        </div>\n        <input\n          ref=\"fileInput\"\n          type=\"file\"\n          :accept=\"accept\"\n          :multiple=\"multiple\"\n          @change=\"handleFileSelect\"\n          class=\"hidden\"\n        />\n      </button>\n    </div>\n\n    <!-- Upload Progress -->\n    <div v-if=\"uploading\" class=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n      <div class=\"flex items-center space-x-3\">\n        <svg class=\"animate-spin h-5 w-5 text-blue-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n          <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n        <div class=\"flex-1\">\n          <p class=\"text-sm font-medium text-blue-900\">Uploading...</p>\n          <div class=\"mt-1 w-full bg-blue-200 rounded-full h-2\">\n            <div class=\"bg-blue-600 h-2 rounded-full transition-all\" :style=\"{ width: uploadProgress + '%' }\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Uploaded Files List -->\n    <div v-if=\"files.length > 0\" class=\"space-y-2\">\n      <TransitionGroup name=\"list\">\n        <div\n          v-for=\"(file, index) in files\"\n          :key=\"file.name + index\"\n          class=\"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors\"\n        >\n          <div class=\"flex items-center space-x-3 flex-1 min-w-0\">\n            <!-- File Icon/Preview -->\n            <div class=\"flex-shrink-0\">\n              <div v-if=\"file.preview\" class=\"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300\">\n                <img :src=\"file.preview\" :alt=\"file.name\" class=\"w-full h-full object-cover\" />\n              </div>\n              <div v-else class=\"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center\">\n                <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n              </div>\n            </div>\n\n            <!-- File Info -->\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-medium text-gray-900 truncate\">{{ file.name }}</p>\n              <p class=\"text-xs text-gray-500\">{{ formatFileSize(file.size) }}</p>\n            </div>\n\n            <!-- Remove Button -->\n            <button\n              @click=\"removeFile(index)\"\n              type=\"button\"\n              class=\"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors\"\n              title=\"Remove\"\n            >\n              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </TransitionGroup>\n    </div>\n\n    <!-- Camera Modal -->\n    <Teleport to=\"body\">\n      <div\n        v-if=\"showCamera\"\n        class=\"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4\"\n        @click.self=\"closeCamera\"\n      >\n        <div class=\"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl\">\n          <!-- Camera Header -->\n          <div class=\"bg-gray-900 px-6 py-4 flex items-center justify-between\">\n            <h3 class=\"text-white font-semibold text-lg\">Take Photo</h3>\n            <button\n              @click=\"closeCamera\"\n              class=\"text-gray-400 hover:text-white transition-colors\"\n            >\n              <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          <!-- Camera View -->\n          <div class=\"relative bg-black aspect-video\">\n            <video\n              v-if=\"!capturedImage\"\n              ref=\"videoElement\"\n              autoplay\n              playsinline\n              class=\"w-full h-full object-contain\"\n            ></video>\n            <img\n              v-else\n              :src=\"capturedImage\"\n              alt=\"Captured\"\n              class=\"w-full h-full object-contain\"\n            />\n\n            <!-- Camera Overlay Grid -->\n            <div v-if=\"!capturedImage\" class=\"absolute inset-0 pointer-events-none\">\n              <div class=\"w-full h-full grid grid-cols-3 grid-rows-3\">\n                <div v-for=\"i in 9\" :key=\"i\" class=\"border border-white/20\"></div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Camera Controls -->\n          <div class=\"bg-gray-900 px-6 py-6\">\n            <div v-if=\"!capturedImage\" class=\"flex items-center justify-center space-x-6\">\n              <button\n                @click=\"capturePhoto\"\n                type=\"button\"\n                class=\"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105\"\n              >\n                <div class=\"w-12 h-12 rounded-full bg-blue-500\"></div>\n              </button>\n            </div>\n            <div v-else class=\"flex items-center justify-center space-x-4\">\n              <button\n                @click=\"retakePhoto\"\n                type=\"button\"\n                class=\"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium\"\n              >\n                Retake\n              </button>\n              <button\n                @click=\"usePhoto\"\n                type=\"button\"\n                class=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\n              >\n                Use Photo\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Teleport>\n  </div>\n</template>\n\n<script setup>\nimport { computed, ref } from \"vue\"\n\nconst props = defineProps({\n\tlabel: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\thelpText: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\tmodelValue: {\n\t\ttype: Array,\n\t\tdefault: () => [],\n\t},\n\taccept: {\n\t\ttype: String,\n\t\tdefault: \"image/*,.pdf\",\n\t},\n\tmultiple: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\trequired: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\tallowCamera: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\tmaxSize: {\n\t\ttype: Number,\n\t\tdefault: 20 * 1024 * 1024, // 20MB\n\t},\n})\n\nconst emit = defineEmits([\"update:modelValue\", \"upload\"])\n\nconst fileInput = ref(null)\nconst videoElement = ref(null)\nconst showCamera = ref(false)\nconst capturedImage = ref(null)\nconst mediaStream = ref(null)\nconst uploading = ref(false)\nconst uploadProgress = ref(0)\n\nconst files = computed({\n\tget: () => props.modelValue,\n\tset: (value) => emit(\"update:modelValue\", value),\n})\n\n// Trigger file input\nconst triggerFileInput = () => {\n\tfileInput.value?.click()\n}\n\n// Handle file selection\nconst handleFileSelect = async (event) => {\n\tconst selectedFiles = Array.from(event.target.files)\n\tawait processFiles(selectedFiles)\n\tevent.target.value = \"\" // Reset input\n}\n\n// Process files\nconst processFiles = async (selectedFiles) => {\n\tconst validFiles = []\n\n\tfor (const file of selectedFiles) {\n\t\t// Validate file size\n\t\tif (file.size > props.maxSize) {\n\t\t\talert(\n\t\t\t\t`File ${file.name} exceeds maximum size of ${formatFileSize(props.maxSize)}`,\n\t\t\t)\n\t\t\tcontinue\n\t\t}\n\n\t\t// Create preview for images\n\t\tlet preview = null\n\t\tif (file.type.startsWith(\"image/\")) {\n\t\t\tpreview = await createImagePreview(file)\n\t\t}\n\n\t\tvalidFiles.push({\n\t\t\tfile: file,\n\t\t\tname: file.name,\n\t\t\tsize: file.size,\n\t\t\ttype: file.type,\n\t\t\tpreview: preview,\n\t\t\tuploadDate: new Date().toISOString(),\n\t\t})\n\t}\n\n\tif (validFiles.length > 0) {\n\t\tconst newFiles = props.multiple\n\t\t\t? [...files.value, ...validFiles]\n\t\t\t: validFiles\n\t\temit(\"update:modelValue\", newFiles)\n\n\t\t// Auto-upload files\n\t\tawait uploadFiles(validFiles)\n\t}\n}\n\n// Create image preview\nconst createImagePreview = (file) => {\n\treturn new Promise((resolve) => {\n\t\tconst reader = new FileReader()\n\t\treader.onload = (e) => resolve(e.target.result)\n\t\treader.onerror = () => resolve(null)\n\t\treader.readAsDataURL(file)\n\t})\n}\n\n// Upload files\nconst uploadFiles = async (filesToUpload) => {\n\tuploading.value = true\n\tuploadProgress.value = 0\n\n\ttry {\n\t\tfor (let i = 0; i < filesToUpload.length; i++) {\n\t\t\tconst fileData = filesToUpload[i]\n\n\t\t\t// Simulate upload progress\n\t\t\tconst progressInterval = setInterval(() => {\n\t\t\t\tuploadProgress.value = Math.min(uploadProgress.value + 10, 90)\n\t\t\t}, 100)\n\n\t\t\t// Emit upload event (parent component should handle actual upload)\n\t\t\tawait new Promise((resolve) => {\n\t\t\t\temit(\"upload\", fileData, resolve)\n\t\t\t})\n\n\t\t\tclearInterval(progressInterval)\n\t\t\tuploadProgress.value = ((i + 1) / filesToUpload.length) * 100\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Upload error:\", error)\n\t\talert(\"Failed to upload files. Please try again.\")\n\t} finally {\n\t\tuploading.value = false\n\t\tuploadProgress.value = 0\n\t}\n}\n\n// Remove file\nconst removeFile = (index) => {\n\tconst newFiles = [...files.value]\n\tnewFiles.splice(index, 1)\n\temit(\"update:modelValue\", newFiles)\n}\n\n// Open camera\nconst openCamera = async () => {\n\ttry {\n\t\tshowCamera.value = true\n\t\tawait startCamera()\n\t} catch (error) {\n\t\tconsole.error(\"Camera error:\", error)\n\t\talert(\n\t\t\t\"Unable to access camera. Please check permissions or upload a file instead.\",\n\t\t)\n\t\tshowCamera.value = false\n\t}\n}\n\n// Start camera\nconst startCamera = async () => {\n\ttry {\n\t\tconst stream = await navigator.mediaDevices.getUserMedia({\n\t\t\tvideo: {\n\t\t\t\tfacingMode: \"environment\",\n\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\theight: { ideal: 1080 },\n\t\t\t},\n\t\t\taudio: false,\n\t\t})\n\n\t\tmediaStream.value = stream\n\n\t\tif (videoElement.value) {\n\t\t\tvideoElement.value.srcObject = stream\n\t\t}\n\t} catch (error) {\n\t\tthrow error\n\t}\n}\n\n// Capture photo\nconst capturePhoto = () => {\n\tconst video = videoElement.value\n\tconst canvas = document.createElement(\"canvas\")\n\tcanvas.width = video.videoWidth\n\tcanvas.height = video.videoHeight\n\n\tconst context = canvas.getContext(\"2d\")\n\tcontext.drawImage(video, 0, 0, canvas.width, canvas.height)\n\n\tcapturedImage.value = canvas.toDataURL(\"image/jpeg\", 0.9)\n}\n\n// Retake photo\nconst retakePhoto = () => {\n\tcapturedImage.value = null\n}\n\n// Use photo\nconst usePhoto = async () => {\n\tif (!capturedImage.value) return\n\n\t// Convert base64 to File\n\tconst blob = await (await fetch(capturedImage.value)).blob()\n\tconst file = new File([blob], `photo-${Date.now()}.jpg`, {\n\t\ttype: \"image/jpeg\",\n\t})\n\n\tawait processFiles([file])\n\tcloseCamera()\n}\n\n// Close camera\nconst closeCamera = () => {\n\tif (mediaStream.value) {\n\t\tmediaStream.value.getTracks().forEach((track) => track.stop())\n\t\tmediaStream.value = null\n\t}\n\tcapturedImage.value = null\n\tshowCamera.value = false\n}\n\n// Format file size\nconst formatFileSize = (bytes) => {\n\tif (bytes === 0) return \"0 Bytes\"\n\tconst k = 1024\n\tconst sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"]\n\tconst i = Math.floor(Math.log(bytes) / Math.log(k))\n\treturn Math.round((bytes / Math.pow(k, i)) * 100) / 100 + \" \" + sizes[i]\n}\n</script>\n\n<style scoped>\n.list-enter-active,\n.list-leave-active {\n  transition: all 0.3s ease;\n}\n.list-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n.list-leave-to {\n  opacity: 0;\n  transform: translateX(30px);\n}\n</style>\n","<template>\n  <div class=\"space-y-4\">\n    <div class=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200\">\n      <div class=\"flex items-start\">\n        <svg class=\"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"/>\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"/>\n        </svg>\n        <div class=\"flex-1\">\n          <h3 class=\"text-sm font-semibold text-blue-900\">Residential Address</h3>\n          <p class=\"text-xs text-blue-700 mt-0.5\">Please provide your complete address details</p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n      <!-- Province -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Province\n          <span v-if=\"required\" class=\"text-red-500\">*</span>\n        </label>\n        <div class=\"relative\">\n          <select\n            v-model=\"localAddress.province\"\n            @change=\"onProvinceChange\"\n            :required=\"required\"\n            class=\"block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all\"\n            :class=\"{'border-blue-500 ring-2 ring-blue-100': localAddress.province}\"\n          >\n            <option value=\"\">Select Province</option>\n            <option v-for=\"province in provinces\" :key=\"province\" :value=\"province\">\n              {{ province }}\n            </option>\n          </select>\n          <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n            </svg>\n          </div>\n        </div>\n      </div>\n\n      <!-- Municipality/City -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Municipality/City\n          <span v-if=\"required\" class=\"text-red-500\">*</span>\n        </label>\n        <div class=\"relative\">\n          <select\n            v-model=\"localAddress.municipality\"\n            @change=\"onMunicipalityChange\"\n            :required=\"required\"\n            :disabled=\"!localAddress.province\"\n            class=\"block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed\"\n            :class=\"{'border-blue-500 ring-2 ring-blue-100': localAddress.municipality}\"\n          >\n            <option value=\"\">Select Municipality/City</option>\n            <option v-for=\"municipality in municipalities\" :key=\"municipality\" :value=\"municipality\">\n              {{ municipality }}\n            </option>\n          </select>\n          <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n            </svg>\n          </div>\n        </div>\n        <p v-if=\"!localAddress.province\" class=\"mt-1 text-xs text-gray-500\">Select province first</p>\n      </div>\n\n      <!-- Barangay -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Barangay\n          <span v-if=\"required\" class=\"text-red-500\">*</span>\n        </label>\n        <div class=\"relative\">\n          <select\n            v-model=\"localAddress.barangay\"\n            @change=\"updateAddress\"\n            :required=\"required\"\n            :disabled=\"!localAddress.municipality\"\n            class=\"block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed\"\n            :class=\"{'border-blue-500 ring-2 ring-blue-100': localAddress.barangay}\"\n          >\n            <option value=\"\">Select Barangay</option>\n            <option v-for=\"barangay in barangays\" :key=\"barangay\" :value=\"barangay\">\n              {{ barangay }}\n            </option>\n          </select>\n          <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n            <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n            </svg>\n          </div>\n        </div>\n        <p v-if=\"!localAddress.municipality\" class=\"mt-1 text-xs text-gray-500\">Select municipality first</p>\n      </div>\n\n      <!-- Street Address -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Street / House No.\n          <span v-if=\"required\" class=\"text-red-500\">*</span>\n        </label>\n        <input\n          v-model=\"localAddress.street\"\n          @input=\"updateAddress\"\n          type=\"text\"\n          :required=\"required\"\n          placeholder=\"e.g., 123 Main Street, Blk 5 Lot 10\"\n          class=\"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n          :class=\"{'border-blue-500 ring-2 ring-blue-100': localAddress.street}\"\n        />\n      </div>\n\n      <!-- ZIP Code -->\n      <div class=\"md:col-span-2\">\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          ZIP Code\n          <span class=\"text-gray-500 text-xs font-normal\">(Optional)</span>\n        </label>\n        <input\n          v-model=\"localAddress.zipCode\"\n          @input=\"updateAddress\"\n          type=\"text\"\n          placeholder=\"e.g., 1630\"\n          maxlength=\"4\"\n          class=\"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs\"\n        />\n      </div>\n    </div>\n\n    <!-- Address Preview -->\n    <div v-if=\"fullAddress\" class=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n      <div class=\"flex items-start\">\n        <svg class=\"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n        </svg>\n        <div class=\"flex-1\">\n          <p class=\"text-sm font-medium text-green-900\">Complete Address</p>\n          <p class=\"text-sm text-green-700 mt-1\">{{ fullAddress }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, onMounted, ref, watch } from \"vue\"\n\nconst props = defineProps({\n\tmodelValue: {\n\t\ttype: [String, Object],\n\t\tdefault: \"\",\n\t},\n\trequired: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n})\n\nconst emit = defineEmits([\"update:modelValue\"])\n\nconst localAddress = ref({\n\tstreet: \"\",\n\tbarangay: \"\",\n\tmunicipality: \"\",\n\tprovince: \"\",\n\tzipCode: \"\",\n})\n\n// Philippines provinces (major ones - can be expanded)\nconst provinces = [\n\t\"Metro Manila\",\n\t\"Rizal\",\n\t\"Cavite\",\n\t\"Laguna\",\n\t\"Bulacan\",\n\t\"Pampanga\",\n\t\"Batangas\",\n\t\"Quezon\",\n\t\"Cebu\",\n\t\"Davao del Sur\",\n\t\"Benguet\",\n\t\"Iloilo\",\n\t\"Negros Occidental\",\n\t\"Pangasinan\",\n\t\"Albay\",\n]\n\n// Municipalities by province (can be expanded with API)\nconst municipalitiesData = {\n\t\"Metro Manila\": [\n\t\t\"Manila City\",\n\t\t\"Quezon City\",\n\t\t\"Makati City\",\n\t\t\"Pasig City\",\n\t\t\"Taguig City\",\n\t\t\"Mandaluyong City\",\n\t\t\"Pasay City\",\n\t\t\"Parañaque City\",\n\t\t\"Las Piñas City\",\n\t\t\"Muntinlupa City\",\n\t\t\"Caloocan City\",\n\t\t\"Malabon City\",\n\t\t\"Navotas City\",\n\t\t\"Valenzuela City\",\n\t\t\"Marikina City\",\n\t\t\"San Juan City\",\n\t\t\"Pateros\",\n\t],\n\tRizal: [\n\t\t\"Taytay\",\n\t\t\"Antipolo City\",\n\t\t\"Cainta\",\n\t\t\"Binangonan\",\n\t\t\"San Mateo\",\n\t\t\"Rodriguez (Montalban)\",\n\t\t\"Angono\",\n\t\t\"Cardona\",\n\t\t\"Jalajala\",\n\t\t\"Morong\",\n\t\t\"Pililla\",\n\t\t\"Tanay\",\n\t\t\"Teresa\",\n\t\t\"Baras\",\n\t],\n\tCavite: [\n\t\t\"Bacoor City\",\n\t\t\"Cavite City\",\n\t\t\"Dasmarinas City\",\n\t\t\"Imus City\",\n\t\t\"Tagaytay City\",\n\t\t\"Trece Martires City\",\n\t\t\"General Trias\",\n\t\t\"Silang\",\n\t\t\"Kawit\",\n\t\t\"Noveleta\",\n\t\t\"Rosario\",\n\t\t\"Tanza\",\n\t\t\"Naic\",\n\t],\n}\n\n// Barangays by municipality (sample data - Taytay as example)\nconst barangaysData = {\n\tTaytay: [\n\t\t\"Dolores\",\n\t\t\"San Juan\",\n\t\t\"Muzon\",\n\t\t\"San Isidro\",\n\t\t\"Sta. Ana\",\n\t\t\"Poblacion\",\n\t\t\"Bagumbayan\",\n\t\t\"Bamban\",\n\t\t\"Calumpang\",\n\t\t\"Dalig\",\n\t\t\"Dolores\",\n\t\t\"San Juan\",\n\t\t\"Muzon\",\n\t],\n\t\"Manila City\": [\n\t\t\"Ermita\",\n\t\t\"Intramuros\",\n\t\t\"Malate\",\n\t\t\"Paco\",\n\t\t\"Pandacan\",\n\t\t\"Port Area\",\n\t\t\"Quiapo\",\n\t\t\"Sampaloc\",\n\t\t\"San Andres\",\n\t\t\"San Miguel\",\n\t\t\"San Nicolas\",\n\t\t\"Santa Ana\",\n\t\t\"Santa Cruz\",\n\t\t\"Santa Mesa\",\n\t\t\"Tondo\",\n\t],\n\t\"Quezon City\": [\n\t\t\"Bagong Pag-asa\",\n\t\t\"Bahay Toro\",\n\t\t\"Batasan Hills\",\n\t\t\"Commonwealth\",\n\t\t\"Cubao\",\n\t\t\"Fairview\",\n\t\t\"Kamuning\",\n\t\t\"Novaliches\",\n\t\t\"Project 4\",\n\t\t\"Tatalon\",\n\t\t\"Teacher's Village\",\n\t],\n}\n\nconst municipalities = computed(() => {\n\tif (!localAddress.value.province) return []\n\treturn municipalitiesData[localAddress.value.province] || []\n})\n\nconst barangays = computed(() => {\n\tif (!localAddress.value.municipality) return []\n\treturn (\n\t\tbarangaysData[localAddress.value.municipality] || [\n\t\t\t\"Other - Please specify in Street field\",\n\t\t]\n\t)\n})\n\nconst fullAddress = computed(() => {\n\tconst parts = []\n\tif (localAddress.value.street) parts.push(localAddress.value.street)\n\tif (localAddress.value.barangay)\n\t\tparts.push(`Brgy. ${localAddress.value.barangay}`)\n\tif (localAddress.value.municipality)\n\t\tparts.push(localAddress.value.municipality)\n\tif (localAddress.value.province) parts.push(localAddress.value.province)\n\tif (localAddress.value.zipCode) parts.push(localAddress.value.zipCode)\n\n\treturn parts.length > 0 ? parts.join(\", \") : \"\"\n})\n\nconst onProvinceChange = () => {\n\t// Reset dependent fields when province changes\n\tlocalAddress.value.municipality = \"\"\n\tlocalAddress.value.barangay = \"\"\n\tupdateAddress()\n}\n\nconst onMunicipalityChange = () => {\n\t// Reset barangay when municipality changes\n\tlocalAddress.value.barangay = \"\"\n\tupdateAddress()\n}\n\nconst updateAddress = () => {\n\t// Emit both the full address string and individual fields\n\temit(\"update:modelValue\", {\n\t\tfull_address: fullAddress.value,\n\t\taddress_line: localAddress.value.street,\n\t\tbarangay: localAddress.value.barangay,\n\t\tmunicipality: localAddress.value.municipality,\n\t\tprovince: localAddress.value.province,\n\t\tzip_code: localAddress.value.zipCode,\n\t})\n}\n\n// Initialize from modelValue if provided\nonMounted(() => {\n\tif (props.modelValue) {\n\t\tif (typeof props.modelValue === \"string\") {\n\t\t\t// Try to parse string address\n\t\t\t// This is a simple parser - can be enhanced\n\t\t\tconst parts = props.modelValue.split(\",\").map((p) => p.trim())\n\t\t\tif (parts.length >= 3) {\n\t\t\t\tlocalAddress.value.street = parts[0] || \"\"\n\t\t\t\tlocalAddress.value.barangay = parts[1]?.replace(\"Brgy. \", \"\") || \"\"\n\t\t\t\tlocalAddress.value.municipality = parts[2] || \"\"\n\t\t\t\tlocalAddress.value.province = parts[3] || \"\"\n\t\t\t\tlocalAddress.value.zipCode = parts[4] || \"\"\n\t\t\t}\n\t\t} else if (typeof props.modelValue === \"object\") {\n\t\t\tlocalAddress.value = { ...localAddress.value, ...props.modelValue }\n\t\t}\n\t}\n})\n\n// Watch for external changes\nwatch(\n\t() => props.modelValue,\n\t(newVal) => {\n\t\tif (newVal && typeof newVal === \"object\") {\n\t\t\tlocalAddress.value = { ...localAddress.value, ...newVal }\n\t\t}\n\t},\n)\n</script>\n","<template>\n  <div class=\"space-y-4\">\n    <!-- Property Selector Header -->\n    <div class=\"flex items-center justify-between mb-4\">\n      <label class=\"block text-sm font-medium text-gray-700\">\n        {{ label }}\n        <span v-if=\"required\" class=\"text-red-500\">*</span>\n      </label>\n      <button\n        v-if=\"userProperties.length > 0\"\n        @click=\"showPropertySelector = !showPropertySelector\"\n        type=\"button\"\n        class=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\n      >\n        {{ showPropertySelector ? 'Enter manually' : 'Select from my properties' }}\n      </button>\n    </div>\n\n    <!-- Property Selector Dropdown (if user has properties) -->\n    <div v-if=\"showPropertySelector && userProperties.length > 0\" class=\"space-y-3\">\n      <select\n        v-model=\"selectedPropertyId\"\n        @change=\"onPropertySelected\"\n        class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n      >\n        <option value=\"\">Select a property</option>\n        <option\n          v-for=\"property in userProperties\"\n          :key=\"property.name\"\n          :value=\"property.name\"\n        >\n          {{ formatPropertyOption(property) }}\n        </option>\n        <option value=\"__new__\">+ Add New Property</option>\n      </select>\n\n      <!-- Selected Property Display -->\n      <div v-if=\"selectedProperty && selectedPropertyId !== '__new__'\" class=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n        <div class=\"flex items-start justify-between\">\n          <div class=\"flex-1 space-y-1\">\n            <p class=\"text-sm font-medium text-gray-900\">{{ selectedProperty.property_name || 'Property' }}</p>\n            <p class=\"text-sm text-gray-700\">{{ formatPropertyAddress(selectedProperty) }}</p>\n            <p v-if=\"selectedProperty.legal_description\" class=\"text-xs text-gray-600\">{{ selectedProperty.legal_description }}</p>\n          </div>\n          <div class=\"flex space-x-2\">\n            <button\n              @click=\"editProperty\"\n              type=\"button\"\n              class=\"text-sm text-blue-600 hover:text-blue-700\"\n              title=\"Edit property\"\n            >\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n              </svg>\n            </button>\n            <button\n              @click=\"deleteProperty\"\n              type=\"button\"\n              class=\"text-sm text-red-600 hover:text-red-700\"\n              title=\"Remove property\"\n            >\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Manual Address Input or New Property Form -->\n    <div v-if=\"!showPropertySelector || selectedPropertyId === '__new__' || userProperties.length === 0\">\n      <PhilippinesAddressInput\n        :modelValue=\"localAddress\"\n        @update:modelValue=\"onAddressChange\"\n        :required=\"required\"\n      />\n    </div>\n\n    <!-- Add to My Properties Checkbox (when entering manually) -->\n    <div v-if=\"(!showPropertySelector || selectedPropertyId === '__new__') && !selectedPropertyId\" class=\"flex items-center space-x-2\">\n      <input\n        v-model=\"saveToProfile\"\n        type=\"checkbox\"\n        id=\"save-property\"\n        class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n      />\n      <label for=\"save-property\" class=\"text-sm text-gray-700\">\n        Save this property to my profile for future use\n      </label>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, onMounted, ref, watch } from \"vue\"\nimport { call } from \"frappe-ui\"\nimport { useUserProfile } from \"../composables/useUserProfile\"\nimport PhilippinesAddressInput from \"./PhilippinesAddressInput.vue\"\n\nconst props = defineProps({\n\tmodelValue: {\n\t\ttype: Object,\n\t\tdefault: () => ({}),\n\t},\n\tlabel: {\n\t\ttype: String,\n\t\tdefault: \"Residential Address\",\n\t},\n\trequired: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n})\n\nconst emit = defineEmits([\"update:modelValue\", \"property-saved\"])\n\nconst { userProfile, loadUserProfile, getAllProperties, defaultProperty } =\n\tuseUserProfile()\n\n// State\nconst showPropertySelector = ref(false)\nconst selectedPropertyId = ref(\"\")\nconst saveToProfile = ref(false)\nconst localAddress = ref(props.modelValue || {})\n\n// Computed\nconst userProperties = computed(() => getAllProperties.value || [])\n\nconst selectedProperty = computed(() => {\n\tif (!selectedPropertyId.value || selectedPropertyId.value === \"__new__\")\n\t\treturn null\n\treturn userProperties.value.find((p) => p.name === selectedPropertyId.value)\n})\n\n// Methods\nfunction formatPropertyOption(property) {\n\tconst parts = []\n\tif (property.property_name) parts.push(property.property_name)\n\tif (property.street) parts.push(property.street)\n\tif (property.suburb) parts.push(property.suburb)\n\tif (property.city) parts.push(property.city)\n\treturn parts.join(\", \") || \"Unnamed Property\"\n}\n\nfunction formatPropertyAddress(property) {\n\tconst parts = []\n\tif (property.street) parts.push(property.street)\n\tif (property.barangay) parts.push(`Brgy. ${property.barangay}`)\n\tif (property.municipality) parts.push(property.municipality)\n\tif (property.province) parts.push(property.province)\n\tif (property.zip_code || property.postcode)\n\t\tparts.push(property.zip_code || property.postcode)\n\treturn parts.join(\", \")\n}\n\nfunction onPropertySelected() {\n\tif (selectedPropertyId.value === \"__new__\") {\n\t\t// Reset to manual entry mode\n\t\tlocalAddress.value = {}\n\t\tshowPropertySelector.value = false\n\t\treturn\n\t}\n\n\tif (selectedProperty.value) {\n\t\t// Map property to address format\n\t\tlocalAddress.value = {\n\t\t\tfull_address: formatPropertyAddress(selectedProperty.value),\n\t\t\taddress_line: selectedProperty.value.street || \"\",\n\t\t\tbarangay: selectedProperty.value.barangay || \"\",\n\t\t\tmunicipality:\n\t\t\t\tselectedProperty.value.municipality ||\n\t\t\t\tselectedProperty.value.city ||\n\t\t\t\t\"\",\n\t\t\tprovince: selectedProperty.value.province || \"\",\n\t\t\tzip_code:\n\t\t\t\tselectedProperty.value.zip_code ||\n\t\t\t\tselectedProperty.value.postcode ||\n\t\t\t\t\"\",\n\t\t}\n\n\t\temit(\"update:modelValue\", localAddress.value)\n\t}\n}\n\nfunction onAddressChange(newAddress) {\n\tlocalAddress.value = newAddress\n\t// Include save_to_profile flag in emitted data for parent to handle on submit\n\tconst addressWithFlag = {\n\t\t...newAddress,\n\t\t_save_to_profile: saveToProfile.value,\n\t}\n\temit(\"update:modelValue\", addressWithFlag)\n}\n\n// Watch saveToProfile changes to update the flag in emitted data\nwatch(saveToProfile, (newValue) => {\n\tif (localAddress.value && Object.keys(localAddress.value).length > 0) {\n\t\tconst addressWithFlag = {\n\t\t\t...localAddress.value,\n\t\t\t_save_to_profile: newValue,\n\t\t}\n\t\temit(\"update:modelValue\", addressWithFlag)\n\t}\n})\n\nfunction editProperty() {\n\t// Switch to manual mode with current property data\n\tshowPropertySelector.value = false\n\t// Keep the current localAddress values for editing\n}\n\nfunction deleteProperty() {\n\tif (\n\t\tconfirm(\"Are you sure you want to remove this property from selection?\")\n\t) {\n\t\tselectedPropertyId.value = \"\"\n\t\tlocalAddress.value = {}\n\t\temit(\"update:modelValue\", {})\n\t}\n}\n\n// Save property to user profile\nconst isSavingProperty = ref(false)\n\nasync function savePropertyToProfile() {\n\tif (!saveToProfile.value) return { success: false, reason: \"not_requested\" }\n\n\t// Only save if we have address data and not selecting existing property\n\tif (selectedPropertyId.value && selectedPropertyId.value !== \"__new__\") {\n\t\treturn { success: false, reason: \"existing_property\" }\n\t}\n\n\tconst address = localAddress.value\n\tif (!address || !address.address_line) {\n\t\treturn { success: false, reason: \"no_address\" }\n\t}\n\n\tisSavingProperty.value = true\n\n\ttry {\n\t\tconst result = await call(\"councilsonline.api.auth.add_user_property\", {\n\t\t\tstreet: address.address_line,\n\t\t\tbarangay: address.barangay,\n\t\t\tmunicipality: address.municipality,\n\t\t\tprovince: address.province,\n\t\t\tzip_code: address.zip_code,\n\t\t\tis_default: userProperties.value.length === 0, // Default if first property\n\t\t})\n\n\t\tif (result.success) {\n\t\t\t// Reload user profile to get updated properties\n\t\t\tawait loadUserProfile()\n\t\t\temit(\"property-saved\", result.property)\n\t\t}\n\n\t\treturn result\n\t} catch (error) {\n\t\tconsole.error(\"Failed to save property:\", error)\n\t\treturn { success: false, reason: \"api_error\", error: error.message }\n\t} finally {\n\t\tisSavingProperty.value = false\n\t}\n}\n\n// Expose methods and state for parent components\ndefineExpose({\n\tsaveToProfile,\n\tsavePropertyToProfile,\n\tisSavingProperty,\n})\n\n// Initialize\nonMounted(async () => {\n\tawait loadUserProfile()\n\n\t// Auto-select default property if no value provided\n\tif (!props.modelValue || Object.keys(props.modelValue).length === 0) {\n\t\tif (defaultProperty.value) {\n\t\t\tselectedPropertyId.value = defaultProperty.value.name\n\t\t\tonPropertySelected()\n\t\t}\n\t}\n\n\t// Show property selector by default if user has properties\n\tif (userProperties.value.length > 0) {\n\t\tshowPropertySelector.value = true\n\t}\n})\n\n// Watch for external changes\nwatch(\n\t() => props.modelValue,\n\t(newVal) => {\n\t\tif (newVal && Object.keys(newVal).length > 0) {\n\t\t\tlocalAddress.value = newVal\n\t\t}\n\t},\n\t{ deep: true },\n)\n</script>\n","<template>\n  <div class=\"inline-block relative group\">\n    <slot name=\"trigger\">\n      <button\n        type=\"button\"\n        class=\"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help\"\n        @mouseenter=\"showTooltip = true\"\n        @mouseleave=\"showTooltip = false\"\n      >\n        <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z\" clip-rule=\"evenodd\"/>\n        </svg>\n      </button>\n    </slot>\n\n    <Transition name=\"tooltip\">\n      <div\n        v-if=\"showTooltip\"\n        class=\"absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none\"\n        :class=\"tooltipPositionClass\"\n        style=\"max-width: 300px; white-space: normal;\"\n      >\n        <slot>{{ text }}</slot>\n        <div class=\"tooltip-arrow\" :class=\"arrowPositionClass\"></div>\n      </div>\n    </Transition>\n  </div>\n</template>\n\n<script setup>\nimport { computed, ref } from \"vue\"\n\nconst props = defineProps({\n\ttext: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\tposition: {\n\t\ttype: String,\n\t\tdefault: \"top\",\n\t\tvalidator: (value) => [\"top\", \"bottom\", \"left\", \"right\"].includes(value),\n\t},\n})\n\nconst showTooltip = ref(false)\n\nconst tooltipPositionClass = computed(() => {\n\tswitch (props.position) {\n\t\tcase \"top\":\n\t\t\treturn \"bottom-full left-1/2 -translate-x-1/2 mb-2\"\n\t\tcase \"bottom\":\n\t\t\treturn \"top-full left-1/2 -translate-x-1/2 mt-2\"\n\t\tcase \"left\":\n\t\t\treturn \"right-full top-1/2 -translate-y-1/2 mr-2\"\n\t\tcase \"right\":\n\t\t\treturn \"left-full top-1/2 -translate-y-1/2 ml-2\"\n\t\tdefault:\n\t\t\treturn \"bottom-full left-1/2 -translate-x-1/2 mb-2\"\n\t}\n})\n\nconst arrowPositionClass = computed(() => {\n\tswitch (props.position) {\n\t\tcase \"top\":\n\t\t\treturn \"tooltip-arrow-bottom\"\n\t\tcase \"bottom\":\n\t\t\treturn \"tooltip-arrow-top\"\n\t\tcase \"left\":\n\t\t\treturn \"tooltip-arrow-right\"\n\t\tcase \"right\":\n\t\t\treturn \"tooltip-arrow-left\"\n\t\tdefault:\n\t\t\treturn \"tooltip-arrow-bottom\"\n\t}\n})\n</script>\n\n<style scoped>\n.tooltip-enter-active,\n.tooltip-leave-active {\n  transition: opacity 0.2s ease;\n}\n\n.tooltip-enter-from,\n.tooltip-leave-to {\n  opacity: 0;\n}\n\n.tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-style: solid;\n}\n\n.tooltip-arrow-bottom {\n  bottom: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  border-width: 4px 4px 0 4px;\n  border-color: #1f2937 transparent transparent transparent;\n}\n\n.tooltip-arrow-top {\n  top: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  border-width: 0 4px 4px 4px;\n  border-color: transparent transparent #1f2937 transparent;\n}\n\n.tooltip-arrow-right {\n  right: -4px;\n  top: 50%;\n  transform: translateY(-50%);\n  border-width: 4px 0 4px 4px;\n  border-color: transparent transparent transparent #1f2937;\n}\n\n.tooltip-arrow-left {\n  left: -4px;\n  top: 50%;\n  transform: translateY(-50%);\n  border-width: 4px 4px 4px 0;\n  border-color: transparent #1f2937 transparent transparent;\n}\n</style>\n","<template>\n  <div>\n    <p v-if=\"error\" class=\"mt-1 text-xs text-red-600\">\n      {{ error }}\n    </p>\n    <p v-else-if=\"description\" class=\"mt-1 text-xs text-gray-500\">\n      {{ description }}\n    </p>\n  </div>\n</template>\n\n<script setup>\ndefineProps({\n\terror: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\tdescription: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n})\n</script>\n","<template>\n  <div class=\"form-group\">\n    <div class=\"flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors\"\n      :class=\"{\n        'border-gray-200': !validationError,\n        'border-red-500 bg-red-50': validationError\n      }\">\n      <div class=\"flex items-center h-5\">\n        <input\n          :id=\"field.field_name\"\n          :name=\"field.field_name\"\n          type=\"checkbox\"\n          :checked=\"modelValue\"\n          @change=\"$emit('update:modelValue', $event.target.checked)\"\n          @blur=\"$emit('validate')\"\n          :required=\"field.is_required\"\n          class=\"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer\"\n        />\n      </div>\n      <div class=\"ml-3 text-sm\">\n        <label :for=\"field.field_name\" class=\"font-medium text-gray-700 cursor-pointer\">\n          {{ field.field_label }}\n          <span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n        </label>\n        <FieldError :error=\"validationError\" :description=\"field.description\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport FieldError from \"./FieldError.vue\"\n\ndefineProps({\n\tfield: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tmodelValue: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\tvalidationError: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n})\n\ndefineEmits([\"update:modelValue\", \"validate\"])\n</script>\n","<template>\n  <label\n    :for=\"fieldName\"\n    class=\"block text-sm font-medium text-gray-700 mb-2 flex items-center\"\n  >\n    <span>{{ label }}</span>\n    <span v-if=\"required\" class=\"text-red-500 ml-1\">*</span>\n    <Tooltip v-if=\"helpText\" :text=\"helpText\" />\n  </label>\n</template>\n\n<script setup>\nimport Tooltip from \"../Tooltip.vue\"\n\ndefineProps({\n\tfieldName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tlabel: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\trequired: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\thelpText: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n})\n</script>\n","<template>\n  <div class=\"form-group\">\n    <FieldLabel\n      :field-name=\"field.field_name\"\n      :label=\"field.field_label\"\n      :required=\"Boolean(field.is_required)\"\n      :help-text=\"field.help_text || field.description\"\n    />\n    <div class=\"relative\">\n      <input\n        :id=\"field.field_name\"\n        :name=\"field.field_name\"\n        type=\"date\"\n        :value=\"modelValue\"\n        @input=\"$emit('update:modelValue', $event.target.value)\"\n        @blur=\"$emit('validate')\"\n        :required=\"field.is_required\"\n        class=\"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n        :class=\"{\n          'border-blue-500 ring-2 ring-blue-100': modelValue && !validationError,\n          'border-red-500 ring-2 ring-red-100': validationError\n        }\"\n      />\n      <div class=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n        <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"/>\n        </svg>\n      </div>\n    </div>\n    <FieldError :error=\"validationError\" :description=\"field.description\" />\n  </div>\n</template>\n\n<script setup>\nimport FieldError from \"./FieldError.vue\"\nimport FieldLabel from \"./FieldLabel.vue\"\n\ndefineProps({\n\tfield: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tmodelValue: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\tvalidationError: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n})\n\ndefineEmits([\"update:modelValue\", \"validate\"])\n</script>\n","<template>\n  <div class=\"form-group\">\n    <FieldLabel\n      :field-name=\"field.field_name\"\n      :label=\"field.field_label\"\n      :required=\"Boolean(field.is_required)\"\n      :help-text=\"field.help_text || field.description\"\n    />\n    <div class=\"relative\">\n      <div v-if=\"variant === 'currency'\" class=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n        <span class=\"text-gray-500 text-base font-medium\">₱</span>\n      </div>\n      <input\n        :id=\"field.field_name\"\n        :name=\"field.field_name\"\n        type=\"number\"\n        :value=\"modelValue\"\n        @input=\"$emit('update:modelValue', parseFloat($event.target.value) || 0)\"\n        @blur=\"$emit('validate')\"\n        :required=\"field.is_required\"\n        :step=\"variant === 'int' ? '1' : '0.01'\"\n        class=\"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n        :class=\"{\n          'pl-10': variant === 'currency',\n          'border-blue-500 ring-2 ring-blue-100': modelValue && !validationError,\n          'border-red-500 ring-2 ring-red-100': validationError\n        }\"\n        :placeholder=\"variant === 'currency' ? '0.00' : placeholder\"\n      />\n      <div v-if=\"variant !== 'currency'\" class=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n        <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"/>\n        </svg>\n      </div>\n    </div>\n    <FieldError :error=\"validationError\" :description=\"field.description\" />\n  </div>\n</template>\n\n<script setup>\nimport FieldError from \"./FieldError.vue\"\nimport FieldLabel from \"./FieldLabel.vue\"\n\ndefineProps({\n\tfield: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tmodelValue: {\n\t\ttype: Number,\n\t\tdefault: 0,\n\t},\n\tvalidationError: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\tplaceholder: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\tvariant: {\n\t\ttype: String,\n\t\tdefault: \"int\", // \"int\", \"float\", or \"currency\"\n\t\tvalidator: (value) => [\"int\", \"float\", \"currency\"].includes(value),\n\t},\n})\n\ndefineEmits([\"update:modelValue\", \"validate\"])\n</script>\n","<script setup>\nimport { Dialog, createResource } from \"frappe-ui\"\nimport { computed, ref, watch } from \"vue\"\n\nconst props = defineProps({\n\tshow: {\n\t\ttype: Boolean,\n\t\trequired: true,\n\t},\n\tteamCode: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tappointmentType: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\ttitle: {\n\t\ttype: String,\n\t\tdefault: \"Book Appointment\",\n\t},\n\trequestId: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n\tcouncilCode: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n\treferenceDoctype: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n\treferenceName: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n\tshowPurpose: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\tshowContactFields: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\tdefaultPurpose: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n})\n\nconst emit = defineEmits([\"update:show\", \"booked\"])\n\nconst isOpen = computed({\n\tget: () => props.show,\n\tset: (value) => emit(\"update:show\", value),\n})\n\nconst selectedDate = ref(\"\")\nconst selectedSlot = ref(null)\nconst location = ref(\"\")\nconst purpose = ref(\"\")\nconst contactName = ref(\"\")\nconst contactEmail = ref(\"\")\nconst contactPhone = ref(\"\")\nconst booking = ref(false)\nconst error = ref(null)\nconst success = ref(false)\n\n// Fetch team configuration\nconst teamConfig = createResource({\n\turl: \"councilsonline.api.scheduling.get_team_config\",\n\tauto: false,\n})\n\n// Fetch available slots\nconst availableSlots = createResource({\n\turl: \"councilsonline.api.scheduling.get_available_slots\",\n\tauto: false,\n})\n\n// Watch for modal open to fetch config and slots\nwatch(\n\t() => props.show,\n\t(newVal) => {\n\t\tif (newVal && props.teamCode) {\n\t\t\t// Reset form\n\t\t\tselectedDate.value = \"\"\n\t\t\tselectedSlot.value = null\n\t\t\tlocation.value = \"\"\n\t\t\tpurpose.value = props.defaultPurpose\n\t\t\terror.value = null\n\t\t\tsuccess.value = false\n\n\t\t\t// Fetch team config\n\t\t\tteamConfig.fetch({ team_code: props.teamCode })\n\n\t\t\t// Fetch available slots\n\t\t\tavailableSlots.fetch({ team_code: props.teamCode })\n\t\t}\n\t},\n)\n\n// Watch for location default when config loads - auto-select if only one option\nwatch(\n\t() => teamConfig.data,\n\t(data) => {\n\t\tif (data?.success && data.config?.locations) {\n\t\t\t// Auto-select if only one location available\n\t\t\tif (data.config.locations.length === 1) {\n\t\t\t\tlocation.value = data.config.locations[0]\n\t\t\t} else if (data.config.default_location && !location.value) {\n\t\t\t\tlocation.value = data.config.default_location\n\t\t\t}\n\t\t}\n\t},\n)\n\n// Computed: dates with available slots\nconst availableDates = computed(() => {\n\tif (!availableSlots.data?.success || !availableSlots.data.slots_by_date) {\n\t\treturn []\n\t}\n\treturn Object.values(availableSlots.data.slots_by_date)\n})\n\n// Computed: slots for selected date\nconst slotsForSelectedDate = computed(() => {\n\tif (!selectedDate.value || !availableSlots.data?.success) {\n\t\treturn []\n\t}\n\tconst dateData = availableSlots.data.slots_by_date[selectedDate.value]\n\treturn dateData?.slots || []\n})\n\n// Computed: locations from config\nconst locations = computed(() => {\n\tif (!teamConfig.data?.success) return []\n\treturn teamConfig.data.config.locations || []\n})\n\nconst isValid = computed(() => {\n\treturn selectedSlot.value && location.value\n})\n\nconst formatSlotTime = (slot) => {\n\treturn `${slot.start_display} - ${slot.end_display}`\n}\n\nconst formatDateShort = (dateStr) => {\n\tconst date = new Date(dateStr)\n\tconst day = date.getDate()\n\tconst month = date.toLocaleDateString(\"en-US\", { month: \"short\" })\n\treturn `${month} ${day}`\n}\n\nconst formatDateFull = (dateStr) => {\n\tconst date = new Date(dateStr)\n\treturn date.toLocaleDateString(\"en-US\", {\n\t\tweekday: \"long\",\n\t\tmonth: \"long\",\n\t\tday: \"numeric\",\n\t\tyear: \"numeric\",\n\t})\n}\n\nconst selectDate = (date) => {\n\tselectedDate.value = date\n\tselectedSlot.value = null\n}\n\nconst selectSlot = (slot) => {\n\tselectedSlot.value = slot\n}\n\nconst handleClose = () => {\n\tif (!booking.value) {\n\t\temit(\"update:show\", false)\n\t}\n}\n\nconst handleBook = async () => {\n\tif (!isValid.value || !selectedSlot.value) return\n\n\tbooking.value = true\n\terror.value = null\n\n\ttry {\n\t\tconst response = await fetch(\"/api/method/councilsonline.api.scheduling.book_appointment\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tteam_code: props.teamCode,\n\t\t\t\tscheduled_start: selectedSlot.value.start,\n\t\t\t\tscheduled_end: selectedSlot.value.end,\n\t\t\t\tappointment_type: props.appointmentType,\n\t\t\t\tlocation: location.value,\n\t\t\t\tpurpose: purpose.value,\n\t\t\t\tcontact_name: contactName.value || null,\n\t\t\t\tcontact_email: contactEmail.value || null,\n\t\t\t\tcontact_phone: contactPhone.value || null,\n\t\t\t\treference_doctype: props.referenceDoctype,\n\t\t\t\treference_name: props.referenceName,\n\t\t\t\trequest_id: props.requestId,\n\t\t\t\tcouncil_code: props.councilCode,\n\t\t\t}),\n\t\t})\n\n\t\tconst data = await response.json()\n\n\t\tif (data.message?.success) {\n\t\t\tsuccess.value = true\n\t\t\terror.value = null\n\n\t\t\t// Emit booked event with full details\n\t\t\temit(\"booked\", {\n\t\t\t\t...data.message,\n\t\t\t\tslot: selectedSlot.value,\n\t\t\t\tlocation: location.value,\n\t\t\t})\n\n\t\t\t// Close modal after showing success\n\t\t\tsetTimeout(() => {\n\t\t\t\thandleClose()\n\t\t\t}, 2000)\n\t\t} else {\n\t\t\terror.value = data.exc || data._server_messages || \"Failed to book appointment\"\n\t\t}\n\t} catch (err) {\n\t\tconsole.error(\"Book appointment error:\", err)\n\t\terror.value = \"Network error. Please try again.\"\n\t} finally {\n\t\tbooking.value = false\n\t}\n}\n</script>\n\n<template>\n\t<Dialog v-model=\"isOpen\" :options=\"{ size: 'lg' }\">\n\t\t<template #body>\n\t\t\t<div class=\"p-6 max-h-[80vh] overflow-y-auto\">\n\t\t\t\t<h3 class=\"text-lg font-semibold text-gray-900 mb-4\">{{ title }}</h3>\n\n\t\t\t\t<!-- Loading State -->\n\t\t\t\t<div v-if=\"availableSlots.loading || teamConfig.loading\" class=\"text-center py-8\">\n\t\t\t\t\t<div class=\"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto\"></div>\n\t\t\t\t\t<p class=\"text-sm text-gray-600 mt-3\">Loading available times...</p>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Error State -->\n\t\t\t\t<div v-else-if=\"availableSlots.error || teamConfig.error\" class=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n\t\t\t\t\t<p class=\"text-sm text-red-800\">Failed to load scheduling options. Please try again later.</p>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Main Content -->\n\t\t\t\t<div v-else-if=\"availableSlots.data?.success\" class=\"space-y-6\">\n\t\t\t\t\t<!-- Step 1: Select Date -->\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 mb-3\">1. Select a Date</label>\n\t\t\t\t\t\t<div class=\"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-48 overflow-y-auto\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tv-for=\"dateInfo in availableDates\"\n\t\t\t\t\t\t\t\t:key=\"dateInfo.date\"\n\t\t\t\t\t\t\t\t@click=\"selectDate(dateInfo.date)\"\n\t\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t\t'px-3 py-2 text-sm rounded-lg border transition-colors text-left',\n\t\t\t\t\t\t\t\t\tselectedDate === dateInfo.date\n\t\t\t\t\t\t\t\t\t\t? 'bg-blue-600 text-white border-blue-600'\n\t\t\t\t\t\t\t\t\t\t: 'bg-white text-gray-700 border-gray-300 hover:border-blue-400',\n\t\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\t\t:disabled=\"booking\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"font-medium\">{{ dateInfo.day }}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-xs opacity-80\">{{ formatDateShort(dateInfo.date) }}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-xs opacity-60\">{{ dateInfo.slots.length }} slots</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p v-if=\"availableDates.length === 0\" class=\"text-sm text-gray-500 mt-2\">\n\t\t\t\t\t\t\tNo available dates found. Please try again later.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- Step 2: Select Time Slot -->\n\t\t\t\t\t<div v-if=\"selectedDate\">\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 mb-3\">2. Select a Time</label>\n\t\t\t\t\t\t<div class=\"grid grid-cols-3 sm:grid-cols-4 gap-2 max-h-40 overflow-y-auto\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tv-for=\"slot in slotsForSelectedDate\"\n\t\t\t\t\t\t\t\t:key=\"slot.start\"\n\t\t\t\t\t\t\t\t@click=\"selectSlot(slot)\"\n\t\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t\t'px-3 py-2 text-sm rounded-lg border transition-colors',\n\t\t\t\t\t\t\t\t\tselectedSlot?.start === slot.start\n\t\t\t\t\t\t\t\t\t\t? 'bg-blue-600 text-white border-blue-600'\n\t\t\t\t\t\t\t\t\t\t: 'bg-white text-gray-700 border-gray-300 hover:border-blue-400',\n\t\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\t\t:disabled=\"booking\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ slot.start_display }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p v-if=\"selectedSlot\" class=\"text-xs text-gray-500 mt-2\">\n\t\t\t\t\t\t\tDuration: {{ selectedSlot.duration_minutes }} minutes (ends at {{ selectedSlot.end_display }})\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- Step 3: Select Location (skip if only one option) -->\n\t\t\t\t\t<div v-if=\"selectedSlot && locations.length > 1\">\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 mb-2\">3. Select Location</label>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tv-model=\"location\"\n\t\t\t\t\t\t\tclass=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n\t\t\t\t\t\t\t:disabled=\"booking\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"\">-- Select location --</option>\n\t\t\t\t\t\t\t<option v-for=\"loc in locations\" :key=\"loc\" :value=\"loc\">\n\t\t\t\t\t\t\t\t{{ loc }}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Show location as info when only one option (auto-selected) -->\n\t\t\t\t\t<div v-else-if=\"selectedSlot && locations.length === 1\" class=\"bg-gray-50 rounded-lg p-3\">\n\t\t\t\t\t\t<p class=\"text-sm text-gray-600\">\n\t\t\t\t\t\t\t<span class=\"font-medium\">Location:</span> {{ locations[0] }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- Purpose (optional) -->\n\t\t\t\t\t<div v-if=\"showPurpose && selectedSlot\">\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 mb-2\">Purpose / Notes (Optional)</label>\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tv-model=\"purpose\"\n\t\t\t\t\t\t\trows=\"2\"\n\t\t\t\t\t\t\tclass=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n\t\t\t\t\t\t\tplaceholder=\"Any special instructions or notes...\"\n\t\t\t\t\t\t\t:disabled=\"booking\"\n\t\t\t\t\t\t></textarea>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- Contact Fields (optional) -->\n\t\t\t\t\t<div v-if=\"showContactFields && selectedSlot\" class=\"space-y-3\">\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700\">Contact Information (Optional)</label>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"contactName\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\t\t\tclass=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n\t\t\t\t\t\t\t\t:disabled=\"booking\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"contactEmail\"\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t\tclass=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n\t\t\t\t\t\t\t\t:disabled=\"booking\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"contactPhone\"\n\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\tplaceholder=\"Phone\"\n\t\t\t\t\t\t\t\tclass=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n\t\t\t\t\t\t\t\t:disabled=\"booking\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- Summary -->\n\t\t\t\t\t<div v-if=\"selectedSlot && location\" class=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n\t\t\t\t\t\t<h4 class=\"text-sm font-semibold text-blue-900 mb-2\">Appointment Summary</h4>\n\t\t\t\t\t\t<div class=\"text-sm text-blue-800 space-y-1\">\n\t\t\t\t\t\t\t<p><span class=\"font-medium\">Date:</span> {{ formatDateFull(selectedDate) }}</p>\n\t\t\t\t\t\t\t<p><span class=\"font-medium\">Time:</span> {{ formatSlotTime(selectedSlot) }}</p>\n\t\t\t\t\t\t\t<p><span class=\"font-medium\">Location:</span> {{ location }}</p>\n\t\t\t\t\t\t\t<p><span class=\"font-medium\">Duration:</span> {{ selectedSlot.duration_minutes }} minutes</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- Success Display -->\n\t\t\t\t\t<div v-if=\"success\" class=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t<svg class=\"w-5 h-5 text-green-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<p class=\"text-sm text-green-800 font-medium\">Appointment booked successfully!</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- Error Display -->\n\t\t\t\t\t<div v-if=\"error\" class=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n\t\t\t\t\t\t<p class=\"text-sm text-red-800\">{{ error }}</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- Buttons -->\n\t\t\t\t\t<div class=\"flex justify-end space-x-3 pt-4 border-t border-gray-200\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"handleClose\"\n\t\t\t\t\t\t\t:disabled=\"booking\"\n\t\t\t\t\t\t\tclass=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"handleBook\"\n\t\t\t\t\t\t\t:disabled=\"!isValid || booking\"\n\t\t\t\t\t\t\tclass=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span v-if=\"booking\">Booking...</span>\n\t\t\t\t\t\t\t<span v-else>Book Appointment</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n","<script setup>\nimport { ref, computed, watch } from \"vue\"\nimport BookSlotModal from \"../modals/BookSlotModal.vue\"\n\nconst props = defineProps({\n\tfield: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tmodelValue: {\n\t\ttype: Object,\n\t\tdefault: () => ({}),\n\t},\n\tteamCode: {\n\t\ttype: String,\n\t\tdefault: \"PAYMENTS\",\n\t},\n\tappointmentType: {\n\t\ttype: String,\n\t\tdefault: \"Pickup\",\n\t},\n\tcouncilCode: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n\trequestId: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n\tvalidationError: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n})\n\nconst emit = defineEmits([\"update:modelValue\", \"validate\"])\n\nconst showModal = ref(false)\n\n// Local copy of the appointment data\nconst appointmentData = computed({\n\tget: () => props.modelValue || {},\n\tset: (value) => emit(\"update:modelValue\", value),\n})\n\nconst hasAppointment = computed(() => {\n\treturn appointmentData.value?.appointment_id || appointmentData.value?.scheduled_start\n})\n\nconst formattedDate = computed(() => {\n\tif (!appointmentData.value?.scheduled_start) return \"\"\n\tconst date = new Date(appointmentData.value.scheduled_start)\n\treturn date.toLocaleDateString(\"en-US\", {\n\t\tweekday: \"long\",\n\t\tyear: \"numeric\",\n\t\tmonth: \"long\",\n\t\tday: \"numeric\",\n\t})\n})\n\nconst formattedTime = computed(() => {\n\tif (!appointmentData.value?.scheduled_start) return \"\"\n\tconst start = new Date(appointmentData.value.scheduled_start)\n\tconst end = appointmentData.value.scheduled_end ? new Date(appointmentData.value.scheduled_end) : null\n\n\tconst startTime = start.toLocaleTimeString(\"en-US\", {\n\t\thour: \"numeric\",\n\t\tminute: \"2-digit\",\n\t\thour12: true,\n\t})\n\n\tif (end) {\n\t\tconst endTime = end.toLocaleTimeString(\"en-US\", {\n\t\t\thour: \"numeric\",\n\t\t\tminute: \"2-digit\",\n\t\t\thour12: true,\n\t\t})\n\t\treturn `${startTime} - ${endTime}`\n\t}\n\n\treturn startTime\n})\n\nconst openScheduler = () => {\n\tshowModal.value = true\n}\n\nconst handleBooked = (result) => {\n\t// Store appointment details in the form data\n\tappointmentData.value = {\n\t\tappointment_id: result.appointment_id,\n\t\tscheduled_start: result.scheduled_start,\n\t\tscheduled_end: result.scheduled_end,\n\t\tlocation: result.location,\n\t\tstatus: result.status,\n\t}\n\n\temit(\"validate\")\n}\n\nconst clearAppointment = () => {\n\tappointmentData.value = {}\n\temit(\"validate\")\n}\n</script>\n\n<template>\n\t<div class=\"form-group\" :data-fieldname=\"field.field_name\">\n\t\t<label class=\"block text-sm font-medium text-gray-700 mb-2\">\n\t\t\t{{ field.field_label }}\n\t\t\t<span v-if=\"field.is_required\" class=\"text-red-500 ml-1\">*</span>\n\t\t</label>\n\n\t\t<!-- No appointment scheduled -->\n\t\t<div v-if=\"!hasAppointment\" class=\"space-y-3\">\n\t\t\t<p class=\"text-sm text-gray-600\">\n\t\t\t\tPlease schedule a pickup date and time for collecting your payment.\n\t\t\t</p>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\t@click=\"openScheduler\"\n\t\t\t\tclass=\"inline-flex items-center px-4 py-2 border border-blue-600 rounded-lg text-sm font-medium text-blue-600 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors\"\n\t\t\t>\n\t\t\t\t<svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t<path\n\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\td=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t\tSchedule Pickup Time\n\t\t\t</button>\n\t\t</div>\n\n\t\t<!-- Appointment scheduled -->\n\t\t<div v-else class=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n\t\t\t<div class=\"flex items-start justify-between\">\n\t\t\t\t<div class=\"flex items-start space-x-3\">\n\t\t\t\t\t<div class=\"flex-shrink-0\">\n\t\t\t\t\t\t<svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\td=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p class=\"text-sm font-medium text-green-900\">Pickup Scheduled</p>\n\t\t\t\t\t\t<p v-if=\"appointmentData.appointment_id\" class=\"text-xs text-green-700 mb-1\">\n\t\t\t\t\t\t\tRef: {{ appointmentData.appointment_id }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class=\"text-sm text-green-800\">\n\t\t\t\t\t\t\t<span class=\"font-medium\">{{ formattedDate }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class=\"text-sm text-green-800\">\n\t\t\t\t\t\t\t<span class=\"font-medium\">Time:</span> {{ formattedTime }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p v-if=\"appointmentData.location\" class=\"text-sm text-green-800\">\n\t\t\t\t\t\t\t<span class=\"font-medium\">Location:</span> {{ appointmentData.location }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t@click=\"clearAppointment\"\n\t\t\t\t\tclass=\"text-sm text-green-700 hover:text-green-900 underline\"\n\t\t\t\t>\n\t\t\t\t\tReschedule\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Validation error -->\n\t\t<p v-if=\"validationError\" class=\"mt-2 text-sm text-red-600\">\n\t\t\t{{ validationError }}\n\t\t</p>\n\n\t\t<!-- Booking Modal -->\n\t\t<BookSlotModal\n\t\t\tv-model:show=\"showModal\"\n\t\t\t:team-code=\"teamCode\"\n\t\t\t:appointment-type=\"appointmentType\"\n\t\t\t:council-code=\"councilCode\"\n\t\t\t:request-id=\"requestId\"\n\t\t\ttitle=\"Schedule Pickup Time\"\n\t\t\t:show-purpose=\"false\"\n\t\t\t@booked=\"handleBooked\"\n\t\t/>\n\t</div>\n</template>\n","<template>\n  <div class=\"form-group\">\n    <FieldLabel\n      :field-name=\"field.field_name\"\n      :label=\"field.field_label\"\n      :required=\"Boolean(field.is_required)\"\n      :help-text=\"field.help_text || field.description\"\n    />\n    <div class=\"relative\">\n      <select\n        :id=\"field.field_name\"\n        :name=\"field.field_name\"\n        :value=\"modelValue\"\n        @change=\"$emit('update:modelValue', $event.target.value)\"\n        @blur=\"$emit('validate')\"\n        :required=\"field.is_required\"\n        class=\"block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white\"\n        :class=\"{\n          'border-blue-500 ring-2 ring-blue-100': modelValue && !validationError,\n          'border-red-500 ring-2 ring-red-100': validationError\n        }\"\n      >\n        <option value=\"\">Select {{ field.field_label }}</option>\n        <option\n          v-for=\"option in options\"\n          :key=\"option\"\n          :value=\"option\"\n        >\n          {{ option }}\n        </option>\n      </select>\n      <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n        <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n        </svg>\n      </div>\n    </div>\n    <FieldError :error=\"validationError\" :description=\"field.description\" />\n  </div>\n</template>\n\n<script setup>\nimport FieldError from \"./FieldError.vue\"\nimport FieldLabel from \"./FieldLabel.vue\"\n\ndefineProps({\n\tfield: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tmodelValue: {\n\t\ttype: [String, Number],\n\t\tdefault: \"\",\n\t},\n\tvalidationError: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\toptions: {\n\t\ttype: Array,\n\t\tdefault: () => [],\n\t},\n})\n\ndefineEmits([\"update:modelValue\", \"validate\"])\n</script>\n","<template>\n  <div class=\"form-group\">\n    <FieldLabel\n      :field-name=\"field.field_name\"\n      :label=\"field.field_label\"\n      :required=\"Boolean(field.is_required)\"\n      :help-text=\"field.help_text || field.description\"\n    />\n    <div class=\"relative\">\n      <input\n        :id=\"field.field_name\"\n        :name=\"field.field_name\"\n        type=\"text\"\n        :value=\"modelValue\"\n        @input=\"$emit('update:modelValue', $event.target.value)\"\n        @blur=\"$emit('validate')\"\n        :required=\"field.is_required\"\n        :disabled=\"field.read_only\"\n        :readonly=\"field.read_only\"\n        class=\"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg transition-all\"\n        :class=\"{\n          'border-blue-500 ring-2 ring-blue-100': modelValue && !validationError && !field.read_only,\n          'border-red-500 ring-2 ring-red-100': validationError,\n          'bg-gray-100 text-gray-600 cursor-not-allowed': field.read_only,\n          'focus:ring-2 focus:ring-blue-500 focus:border-blue-500': !field.read_only\n        }\"\n        :placeholder=\"placeholder\"\n      />\n      <div v-if=\"icon\" class=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n        <span v-html=\"icon\" class=\"text-gray-400\"></span>\n      </div>\n    </div>\n    <FieldError :error=\"validationError\" :description=\"field.description\" />\n  </div>\n</template>\n\n<script setup>\nimport FieldError from \"./FieldError.vue\"\nimport FieldLabel from \"./FieldLabel.vue\"\n\ndefineProps({\n\tfield: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tmodelValue: {\n\t\ttype: [String, Number],\n\t\tdefault: \"\",\n\t},\n\tvalidationError: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\tplaceholder: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\ticon: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n})\n\ndefineEmits([\"update:modelValue\", \"validate\"])\n</script>\n","<template>\n  <div class=\"form-group\">\n    <FieldLabel\n      :field-name=\"field.field_name\"\n      :label=\"field.field_label\"\n      :required=\"Boolean(field.is_required)\"\n      :help-text=\"field.help_text || field.description\"\n    />\n    <textarea\n      :id=\"field.field_name\"\n      :name=\"field.field_name\"\n      :value=\"modelValue\"\n      @input=\"$emit('update:modelValue', $event.target.value)\"\n      @blur=\"$emit('validate')\"\n      :required=\"field.is_required\"\n      rows=\"4\"\n      class=\"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y\"\n      :class=\"{\n        'border-blue-500 ring-2 ring-blue-100': modelValue && !validationError,\n        'border-red-500 ring-2 ring-red-100': validationError\n      }\"\n      :placeholder=\"placeholder\"\n    ></textarea>\n    <FieldError :error=\"validationError\" :description=\"field.description\" />\n  </div>\n</template>\n\n<script setup>\nimport FieldError from \"./FieldError.vue\"\nimport FieldLabel from \"./FieldLabel.vue\"\n\ndefineProps({\n\tfield: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tmodelValue: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\tvalidationError: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n\tplaceholder: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n})\n\ndefineEmits([\"update:modelValue\", \"validate\"])\n</script>\n","<template>\n  <div class=\"space-y-6\">\n    <div v-for=\"field in visibleFields\" :key=\"field.field_name\" class=\"field-wrapper\">\n      <!-- Property Address Selector (special handling for address fields) -->\n      <div v-if=\"isAddressField(field)\" class=\"form-group\">\n        <PropertyAddressSelector\n          v-model=\"localData[field.field_name]\"\n          :label=\"field.field_label\"\n          :required=\"Boolean(field.is_required)\"\n        />\n      </div>\n\n      <!-- Data / Text Input -->\n      <TextField\n        v-else-if=\"field.field_type === 'Data'\"\n        :field=\"field\"\n        v-model=\"localData[field.field_name]\"\n        :validation-error=\"getValidationError(field.field_name)\"\n        :placeholder=\"getPlaceholder(field)\"\n        :icon=\"getFieldIcon(field)\"\n        @validate=\"handleFieldValidation(field)\"\n      />\n\n      <!-- Select Dropdown -->\n      <SelectField\n        v-else-if=\"field.field_type === 'Select'\"\n        :field=\"field\"\n        v-model=\"localData[field.field_name]\"\n        :validation-error=\"getValidationError(field.field_name)\"\n        :options=\"getSelectOptions(field.options)\"\n        @validate=\"handleFieldValidation(field)\"\n      />\n\n      <!-- Checkbox -->\n      <CheckboxField\n        v-else-if=\"field.field_type === 'Check'\"\n        :field=\"field\"\n        v-model=\"localData[field.field_name]\"\n        :validation-error=\"getValidationError(field.field_name)\"\n        @validate=\"handleFieldValidation(field)\"\n      />\n\n      <!-- Text / Textarea / Text Editor / Small Text / Long Text -->\n      <TextareaField\n        v-else-if=\"['Text', 'Text Editor', 'Small Text', 'Long Text'].includes(field.field_type)\"\n        :field=\"field\"\n        v-model=\"localData[field.field_name]\"\n        :validation-error=\"getValidationError(field.field_name)\"\n        :placeholder=\"getPlaceholder(field)\"\n        @validate=\"handleFieldValidation(field)\"\n      />\n\n      <!-- Date -->\n      <DateField\n        v-else-if=\"field.field_type === 'Date'\"\n        :field=\"field\"\n        v-model=\"localData[field.field_name]\"\n        :validation-error=\"getValidationError(field.field_name)\"\n        @validate=\"handleFieldValidation(field)\"\n      />\n\n      <!-- Integer -->\n      <NumberField\n        v-else-if=\"field.field_type === 'Int'\"\n        :field=\"field\"\n        v-model=\"localData[field.field_name]\"\n        :validation-error=\"getValidationError(field.field_name)\"\n        :placeholder=\"getPlaceholder(field)\"\n        variant=\"int\"\n        @validate=\"handleFieldValidation(field)\"\n      />\n\n      <!-- Float -->\n      <NumberField\n        v-else-if=\"field.field_type === 'Float'\"\n        :field=\"field\"\n        v-model=\"localData[field.field_name]\"\n        :validation-error=\"getValidationError(field.field_name)\"\n        :placeholder=\"getPlaceholder(field)\"\n        variant=\"float\"\n        @validate=\"handleFieldValidation(field)\"\n      />\n\n      <!-- Currency -->\n      <NumberField\n        v-else-if=\"field.field_type === 'Currency'\"\n        :field=\"field\"\n        v-model=\"localData[field.field_name]\"\n        :validation-error=\"getValidationError(field.field_name)\"\n        variant=\"currency\"\n        @validate=\"handleFieldValidation(field)\"\n      />\n\n      <!-- Attach / File Upload with Camera Support -->\n      <div v-else-if=\"field.field_type === 'Attach' || field.field_type === 'Attach Image'\" class=\"form-group\">\n        <CameraUpload\n          :label=\"field.field_label\"\n          :required=\"field.is_required\"\n          :accept=\"field.field_type === 'Attach Image' ? 'image/*' : '*'\"\n          :multiple=\"false\"\n          :modelValue=\"getFileArray(field.field_name)\"\n          @update:modelValue=\"updateFileField(field.field_name, $event)\"\n          @upload=\"handleFileUploadToFrappe\"\n        />\n      </div>\n\n      <!-- Pickup Schedule (special field for scheduling pickup appointments) -->\n      <PickupScheduleField\n        v-else-if=\"field.field_type === 'Pickup Schedule'\"\n        :field=\"field\"\n        v-model=\"localData[field.field_name]\"\n        :team-code=\"field.team_code || 'PAYMENTS'\"\n        :appointment-type=\"field.appointment_type || 'Pickup'\"\n        :validation-error=\"getValidationError(field.field_name)\"\n        @validate=\"handleFieldValidation(field)\"\n      />\n\n      <!-- Unsupported field type -->\n      <div v-else class=\"form-group\">\n        <div class=\"text-sm text-gray-500 italic\">\n          Field type \"{{ field.field_type }}\" not yet supported for {{ field.field_label }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, ref, watch } from \"vue\"\nimport { isFieldVisible } from \"../utils/conditionalLogic\"\nimport { validateField } from \"../utils/fieldValidation\"\nimport CameraUpload from \"./CameraUpload.vue\"\nimport PhilippinesAddressInput from \"./PhilippinesAddressInput.vue\"\nimport PropertyAddressSelector from \"./PropertyAddressSelector.vue\"\nimport Tooltip from \"./Tooltip.vue\"\nimport CheckboxField from \"./fields/CheckboxField.vue\"\nimport DateField from \"./fields/DateField.vue\"\nimport NumberField from \"./fields/NumberField.vue\"\nimport PickupScheduleField from \"./fields/PickupScheduleField.vue\"\nimport SelectField from \"./fields/SelectField.vue\"\nimport TextField from \"./fields/TextField.vue\"\nimport TextareaField from \"./fields/TextareaField.vue\"\n\nconst props = defineProps({\n\tfields: {\n\t\ttype: Array,\n\t\trequired: true,\n\t},\n\tmodelValue: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n})\n\nconst emit = defineEmits([\"update:modelValue\"])\n\nconst localData = computed({\n\tget: () => props.modelValue,\n\tset: (value) => emit(\"update:modelValue\", value),\n})\n\n// Filter visible fields based on depends_on logic\nconst visibleFields = computed(() => {\n\treturn props.fields.filter((field) => {\n\t\t// Hide individual address component fields if Philippines Address Input is being used\n\t\tconst parentSection = field.parent_section_code?.toLowerCase() || \"\"\n\t\tconst addressSections = [\n\t\t\t\"address\",\n\t\t\t\"residential_address\",\n\t\t\t\"permanent_address\",\n\t\t\t\"property_address\",\n\t\t\t\"current_address\",\n\t\t\t\"home_address\",\n\t\t]\n\t\tconst isInAddressSection = addressSections.includes(parentSection)\n\t\tconst addressComponentFields = [\n\t\t\t\"barangay\",\n\t\t\t\"municipality\",\n\t\t\t\"province\",\n\t\t\t\"city\",\n\t\t\t\"region\",\n\t\t\t\"zip_code\",\n\t\t\t\"postal_code\",\n\t\t]\n\n\t\t// Check if this section has an address_line field (which triggers PhilippinesAddressInput)\n\t\tif (isInAddressSection) {\n\t\t\tconst hasAddressLineField = props.fields.some(\n\t\t\t\t(f) =>\n\t\t\t\t\tf.parent_section_code === field.parent_section_code &&\n\t\t\t\t\tf.field_name === \"address_line\",\n\t\t\t)\n\n\t\t\t// If this section has address_line AND this field is one of the component fields, hide it\n\t\t\tif (\n\t\t\t\thasAddressLineField &&\n\t\t\t\taddressComponentFields.includes(field.field_name)\n\t\t\t) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\treturn isFieldVisible(field, localData.value)\n\t})\n})\n\n// Check if field is an address field\nconst isAddressField = (field) => {\n\t// Check if this is an address field that should use the PropertyAddressSelector\n\tconst fieldName = field.field_name?.toLowerCase() || \"\"\n\tconst fieldLabel = field.field_label?.toLowerCase() || \"\"\n\tconst parentSection = field.parent_section_code?.toLowerCase() || \"\"\n\n\t// Address field indicators\n\tconst addressFieldNames = [\n\t\t\"address_line\",\n\t\t\"street\",\n\t\t\"residential_address\",\n\t\t\"property_address\",\n\t\t\"home_address\",\n\t\t\"current_address\",\n\t\t\"permanent_address\",\n\t]\n\tconst addressSections = [\n\t\t\"address\",\n\t\t\"residential_address\",\n\t\t\"permanent_address\",\n\t\t\"property_address\",\n\t\t\"current_address\",\n\t\t\"home_address\",\n\t]\n\tconst addressLabels = [\n\t\t\"residential address\",\n\t\t\"property address\",\n\t\t\"home address\",\n\t\t\"current address\",\n\t\t\"permanent address\",\n\t\t\"street / house number\",\n\t\t\"street address\",\n\t]\n\n\t// Trigger PropertyAddressSelector if:\n\t// 1. Field name matches address patterns, OR\n\t// 2. Parent section is an address section and this is the first field (address_line or street), OR\n\t// 3. Field label indicates it's a main address field\n\treturn (\n\t\t(addressFieldNames.includes(fieldName) && field.field_type === \"Data\") ||\n\t\t(addressSections.includes(parentSection) &&\n\t\t\t(fieldName === \"address_line\" || fieldName === \"street\") &&\n\t\t\tfield.field_type === \"Data\") ||\n\t\t(addressLabels.some((label) => fieldLabel.includes(label)) &&\n\t\t\tfield.field_type === \"Data\" &&\n\t\t\t!fieldLabel.includes(\"zip\") &&\n\t\t\t!fieldLabel.includes(\"postal\"))\n\t)\n}\n\n// Get placeholder text for field\nconst getPlaceholder = (field) => {\n\tif (field.placeholder) return field.placeholder\n\n\t// Generate smart placeholders based on field name/label\n\tconst label = field.field_label?.toLowerCase() || \"\"\n\n\tif (label.includes(\"name\")) return \"e.g., Juan Dela Cruz\"\n\tif (label.includes(\"email\")) return \"e.g., juan@example.com\"\n\tif (\n\t\tlabel.includes(\"phone\") ||\n\t\tlabel.includes(\"mobile\") ||\n\t\tlabel.includes(\"contact\")\n\t) {\n\t\treturn \"e.g., 0917 123 4567\"\n\t}\n\tif (label.includes(\"age\")) return \"e.g., 25\"\n\tif (label.includes(\"occupation\")) return \"e.g., Teacher\"\n\tif (label.includes(\"income\") || label.includes(\"salary\")) return \"e.g., 15000\"\n\n\treturn `Enter ${field.field_label}`\n}\n\n// Get icon for field based on type\nconst getFieldIcon = (field) => {\n\tconst label = field.field_label?.toLowerCase() || \"\"\n\n\tif (label.includes(\"email\")) {\n\t\treturn '<svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207\"/></svg>'\n\t}\n\tif (\n\t\tlabel.includes(\"phone\") ||\n\t\tlabel.includes(\"mobile\") ||\n\t\tlabel.includes(\"contact\")\n\t) {\n\t\treturn '<svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"/></svg>'\n\t}\n\tif (label.includes(\"name\")) {\n\t\treturn '<svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"/></svg>'\n\t}\n\n\treturn null\n}\n\n// Parse select options from newline-separated string\nconst getSelectOptions = (optionsString) => {\n\tif (!optionsString) return []\n\treturn optionsString\n\t\t.split(\"\\n\")\n\t\t.map((opt) => opt.trim())\n\t\t.filter(Boolean)\n}\n\n// Use step validation composable\nimport { useStepValidation } from \"../composables/useStepValidation\"\nconst {\n\terrors: validationErrors,\n\tvalidateConfigField,\n\tclearFieldError,\n} = useStepValidation()\n\n// Validate a single field\nconst handleFieldValidation = (field) => {\n\tif (!field.validation && !field.is_required) {\n\t\t// Clear any existing error if no validation rule\n\t\tclearFieldError(field.field_name)\n\t\treturn\n\t}\n\n\tconst value = localData.value[field.field_name]\n\tvalidateConfigField(field.field_name, value, field, localData.value)\n}\n\n// Get validation error message for a field\nconst getValidationError = (fieldName) => {\n\treturn validationErrors.value[fieldName] || \"\"\n}\n\n// Get file array for CameraUpload component (expects array)\nconst getFileArray = (fieldName) => {\n\tconst value = localData.value[fieldName]\n\t// If it's already an array, return it\n\tif (Array.isArray(value)) return value\n\t// If it's undefined or null, return empty array\n\tif (!value) return []\n\t// If it's a string (file URL), convert to file object format\n\tif (typeof value === \"string\") {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfile_url: value,\n\t\t\t\tname: value.split(\"/\").pop(),\n\t\t\t\tpreview: value,\n\t\t\t},\n\t\t]\n\t}\n\treturn []\n}\n\n// Update file field when CameraUpload emits update\nconst updateFileField = (fieldName, fileArray) => {\n\tconsole.log(\n\t\t\"[DynamicFieldRenderer] updateFileField called:\",\n\t\tfieldName,\n\t\tfileArray,\n\t)\n\n\t// Immediately convert file array to URL string to avoid timing issues\n\tif (Array.isArray(fileArray) && fileArray.length > 0) {\n\t\t// Check if files have been uploaded (have file_url)\n\t\tconst uploadedFiles = fileArray.filter((f) => f.file_url)\n\t\tif (uploadedFiles.length > 0) {\n\t\t\t// For single file uploads, store just the URL string\n\t\t\tconst fileUrl = uploadedFiles[0].file_url\n\t\t\tconsole.log(\n\t\t\t\t\"[DynamicFieldRenderer] Converting uploaded file to URL:\",\n\t\t\t\tfileUrl,\n\t\t\t)\n\t\t\tlocalData.value[fieldName] = fileUrl\n\t\t\treturn\n\t\t}\n\t}\n\n\t// Otherwise store the array as-is (files being uploaded)\n\tlocalData.value[fieldName] = fileArray\n}\n\n// Handle file upload to Frappe\nconst handleFileUploadToFrappe = async (fileData, resolveCallback) => {\n\tconsole.log(\n\t\t\"[DynamicFieldRenderer] handleFileUploadToFrappe called with:\",\n\t\tfileData,\n\t)\n\n\ttry {\n\t\tconsole.log(\"[DynamicFieldRenderer] Starting file upload:\", fileData.name)\n\n\t\tconst formData = new FormData()\n\t\tformData.append(\"file\", fileData.file)\n\t\tformData.append(\"is_private\", \"0\")\n\t\tformData.append(\"folder\", \"Home/Attachments\")\n\n\t\tconsole.log(\n\t\t\t\"[DynamicFieldRenderer] Uploading to /api/method/upload_file...\",\n\t\t)\n\n\t\t// Upload file to Frappe\n\t\tconst response = await fetch(\"/api/method/upload_file\", {\n\t\t\tmethod: \"POST\",\n\t\t\tcredentials: \"include\",\n\t\t\theaders: {\n\t\t\t\t\"X-Frappe-CSRF-Token\": window.csrf_token,\n\t\t\t},\n\t\t\tbody: formData,\n\t\t})\n\n\t\tconsole.log(\n\t\t\t\"[DynamicFieldRenderer] Upload response status:\",\n\t\t\tresponse.status,\n\t\t)\n\n\t\tif (!response.ok) {\n\t\t\tconst errorText = await response.text()\n\t\t\tconsole.error(\"[DynamicFieldRenderer] Upload failed:\", errorText)\n\t\t\tthrow new Error(`Upload failed (${response.status}): ${errorText}`)\n\t\t}\n\n\t\tconst result = await response.json()\n\t\tconsole.log(\"[DynamicFieldRenderer] Upload response:\", result)\n\n\t\tif (result.message && result.message.file_url) {\n\t\t\t// Store the file URL in form data\n\t\t\tconsole.log(\n\t\t\t\t\"[DynamicFieldRenderer] File uploaded successfully:\",\n\t\t\t\tresult.message.file_url,\n\t\t\t)\n\n\t\t\t// Update the file data with the uploaded URL\n\t\t\tfileData.file_url = result.message.file_url\n\t\t\tfileData.file_name = result.message.file_name\n\n\t\t\tconsole.log(\"[DynamicFieldRenderer] Updated fileData:\", fileData)\n\t\t}\n\n\t\t// Resolve the upload promise to clear loading state\n\t\tconsole.log(\"[DynamicFieldRenderer] Calling resolveCallback()\")\n\t\tresolveCallback()\n\n\t\tconsole.log(\"[DynamicFieldRenderer] File upload completed successfully\")\n\t} catch (error) {\n\t\tconsole.error(\"[DynamicFieldRenderer] File upload error:\", error)\n\t\talert(`Failed to upload file: ${error.message}`)\n\n\t\t// Still resolve to clear loading state even on error\n\t\tconsole.log(\"[DynamicFieldRenderer] Calling resolveCallback() after error\")\n\t\tresolveCallback()\n\t}\n}\n\n// Watch for file uploads and convert arrays to file URLs\nwatch(\n\t() => localData.value,\n\t(newData) => {\n\t\t// Convert file arrays to file URLs for storage\n\t\tObject.entries(newData).forEach(([key, value]) => {\n\t\t\tif (Array.isArray(value) && value.length > 0 && value[0].file_url) {\n\t\t\t\t// This is a file upload array with uploaded files\n\t\t\t\t// Extract just the file URLs for storage\n\t\t\t\tconst fileUrls = value.map((f) => f.file_url).filter(Boolean)\n\t\t\t\tif (fileUrls.length > 0) {\n\t\t\t\t\t// For single file uploads, store just the URL string\n\t\t\t\t\t// For multiple files, store as array\n\t\t\t\t\tlocalData.value[key] = fileUrls.length === 1 ? fileUrls[0] : fileUrls\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t`[DynamicFieldRenderer] Converted file array to URL for ${key}:`,\n\t\t\t\t\t\tlocalData.value[key],\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\t{ deep: true },\n)\n\n// Set default values on mount\nwatch(\n\t() => props.fields,\n\t(fields) => {\n\t\tfields.forEach((field) => {\n\t\t\tif (field.default_value && !localData.value[field.field_name]) {\n\t\t\t\tif (field.default_value === \"Today\" && field.field_type === \"Date\") {\n\t\t\t\t\tlocalData.value[field.field_name] = new Date()\n\t\t\t\t\t\t.toISOString()\n\t\t\t\t\t\t.split(\"T\")[0]\n\t\t\t\t} else {\n\t\t\t\t\tlocalData.value[field.field_name] = field.default_value\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\t{ immediate: true },\n)\n</script>\n\n<style scoped>\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\ninput:focus, select:focus, textarea:focus {\n  outline: none;\n}\n\n/* Remove default number input spinners for cleaner look */\ninput[type=\"number\"]::-webkit-inner-spin-button,\ninput[type=\"number\"]::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n\n/* Ensure date input has proper cursor */\ninput[type=\"date\"] {\n  cursor: pointer;\n}\n\n/* Smooth transitions */\ninput, select, textarea {\n  transition: all 0.2s ease-in-out;\n}\n</style>\n","<template>\n<div class=\"dynamic-step max-w-4xl mx-auto\">\n    <div class=\"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200\">\n        <div class=\"flex items-start\">\n            <div class=\"flex-shrink-0\">\n                <svg class=\"h-8 w-8 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"/>\n                </svg>\n            </div>\n            <div class=\"ml-4 flex-1\">\n                <h2 class=\"text-2xl font-bold text-blue-900\">{{ stepConfig.step_title }}</h2>\n                <p v-if=\"stepDescription\" class=\"mt-2 text-sm text-blue-700\">{{ stepDescription }}</p>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"space-y-6\">\n        <div v-for=\"section in visibleSections\" :key=\"section.section_code\" class=\"section\">\n            <div class=\"mb-4 pb-3 border-b-2 border-gray-200\">\n                <div class=\"flex items-center\">\n                    <div class=\"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3\">\n                        <svg class=\"h-5 w-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"/>\n                        </svg>\n                    </div>\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900\">\n                            {{ section.section_title }}\n                            <span v-if=\"section.is_required\" class=\"text-red-500 ml-1\">*</span>\n                        </h3>\n                        <p v-if=\"section.section_description\" class=\"text-sm text-gray-600 mt-0.5\">\n                            {{ section.section_description }}\n                        </p>\n                    </div>\n                </div>\n                <div v-if=\"section.is_required\" class=\"text-xs text-gray-500 mt-2 ml-11\">\n                    All fields marked with <span class=\"text-red-500\">*</span> are required\n                </div>\n            </div>\n\n            <div class=\"section-content\">\n                <TabGroup v-if=\"section.section_type === 'Tab'\">\n                    <TabList class=\"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4\">\n                        <Tab\n                            v-for=\"(tab, idx) in getTabsForSection(section)\"\n                            :key=\"idx\"\n                            v-slot=\"{ selected }\"\n                            class=\"w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2\"\n                            :class=\"selected ? 'bg-white shadow' : 'text-blue-100 hover:bg-white/[0.12] hover:text-white'\"\n                        >\n                            {{ tab }}\n                        </Tab>\n                    </TabList>\n                    <TabPanels>\n                        <TabPanel v-for=\"(tab, idx) in getTabsForSection(section)\" :key=\"idx\">\n                            <DynamicFieldRenderer\n                                :fields=\"section.fields\"\n                                v-model=\"localData\"\n                            />\n                        </TabPanel>\n                    </TabPanels>\n                </TabGroup>\n\n                <Disclosure v-else-if=\"section.section_type === 'Accordion'\" v-slot=\"{ open }\">\n                    <DisclosureButton\n                        class=\"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2\"\n                    >\n                        <span>{{ section.section_title }}</span>\n                        <ChevronUpIcon\n                            :class=\"open ? 'rotate-180 transform' : ''\"\n                            class=\"h-5 w-5 text-blue-500\"\n                        />\n                    </DisclosureButton>\n                    <DisclosurePanel class=\"px-4 pt-4 pb-2 text-sm text-gray-500\">\n                        <DynamicFieldRenderer\n                            :fields=\"section.fields\"\n                            v-model=\"localData\"\n                        />\n                    </DisclosurePanel>\n                </Disclosure>\n\n                <div v-else class=\"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow\">\n                    <DynamicFieldRenderer\n                        :fields=\"section.fields\"\n                        v-model=\"localData\"\n                    />\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n</template>\n\n<script setup>\nimport {\n\tDisclosure,\n\tDisclosureButton,\n\tDisclosurePanel,\n\tTab,\n\tTabGroup,\n\tTabList,\n\tTabPanel,\n\tTabPanels,\n} from \"@headlessui/vue\"\nimport { ChevronUpIcon } from \"@heroicons/vue/20/solid\"\nimport { computed, ref, watch } from \"vue\"\nimport { isSectionVisible } from \"../utils/conditionalLogic\"\nimport DynamicFieldRenderer from \"./DynamicFieldRenderer.vue\"\n\nconst props = defineProps({\n\tstepConfig: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tmodelValue: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tstepDescription: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t},\n})\n\nconst emit = defineEmits([\"update:modelValue\"])\n\nconst localData = computed({\n\tget: () => props.modelValue,\n\tset: (value) => emit(\"update:modelValue\", value),\n})\n\nconst visibleSections = computed(() => {\n\tif (!props.stepConfig.sections) return []\n\n\t// Filter sections based on depends_on expressions\n\treturn props.stepConfig.sections.filter((section) => {\n\t\tif (!section.depends_on) return true\n\t\ttry {\n\t\t\treturn isSectionVisible(section, localData.value)\n\t\t} catch (error) {\n\t\t\tconsole.error(\n\t\t\t\t`Error evaluating section visibility for ${section.section_code}:`,\n\t\t\t\terror,\n\t\t\t)\n\t\t\treturn true // Fail open - show section on error\n\t\t}\n\t})\n})\n\n// Get tabs for tab-based sections (placeholder)\nconst getTabsForSection = (section) => {\n\t// For now, return single tab\n\t// In future, could parse section structure for multiple tabs\n\treturn [section.section_title]\n}\n\n// Initialize default values\nwatch(\n\t() => props.stepConfig,\n\t(config) => {\n\t\tif (!config.sections) return\n\n\t\tconfig.sections.forEach((section) => {\n\t\t\tsection.fields.forEach((field) => {\n\t\t\t\tif (field.default_value && !localData.value[field.field_name]) {\n\t\t\t\t\t// To safely update the computed 'localData' (which runs an emit to update the parent's store)\n\t\t\t\t\tconst newLocalData = { ...localData.value }\n\n\t\t\t\t\tif (field.default_value === \"Today\" && field.field_type === \"Date\") {\n\t\t\t\t\t\tnewLocalData[field.field_name] = new Date()\n\t\t\t\t\t\t\t.toISOString()\n\t\t\t\t\t\t\t.split(\"T\")[0]\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewLocalData[field.field_name] = field.default_value\n\t\t\t\t\t}\n\n\t\t\t\t\t// Emit the new object to update the parent's modelValue/store.formData\n\t\t\t\t\temit(\"update:modelValue\", newLocalData)\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t},\n\t{ immediate: true, deep: true },\n)\n</script>\n\n<style scoped>\n.dynamic-step {\n    max-width: 100%;\n}\n\n.section {\n    margin-bottom: 2rem;\n    scroll-margin-top: 100px; /* For smooth scrolling with fixed headers */\n}\n\n.section-content {\n    margin-top: 1rem;\n}\n\n/* Enhanced tab styling */\n:deep(.tab-active) {\n    background: white;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n/* Smooth transitions for all interactive elements */\n.section-content > div {\n    transition: all 0.2s ease-in-out;\n}\n</style>"],"names":["render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","props","__props","emit","__emit","fileInput","ref","videoElement","showCamera","capturedImage","mediaStream","uploading","uploadProgress","files","computed","value","triggerFileInput","_a","handleFileSelect","event","__async","selectedFiles","processFiles","validFiles","file","formatFileSize","preview","createImagePreview","newFiles","uploadFiles","resolve","reader","e","filesToUpload","i","fileData","progressInterval","error","removeFile","index","openCamera","startCamera","stream","capturePhoto","video","canvas","retakePhoto","usePhoto","blob","closeCamera","track","bytes","k","sizes","_hoisted_1","_hoisted_2","_hoisted_3","_createTextVNode","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","_normalizeClass","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_createVNode","_TransitionGroup","_Fragment","_renderList","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","$event","_createBlock","_Teleport","_hoisted_26","_hoisted_27","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_33","_hoisted_32","localAddress","provinces","municipalitiesData","barangaysData","municipalities","barangays","fullAddress","parts","onProvinceChange","updateAddress","onMunicipalityChange","onMounted","p","__spreadValues","watch","newVal","province","_hoisted_7","_vModelSelect","_hoisted_8","municipality","barangay","_hoisted_20","_vModelText","_hoisted_25","loadUserProfile","getAllProperties","defaultProperty","useUserProfile","showPropertySelector","selectedPropertyId","saveToProfile","userProperties","selectedProperty","formatPropertyOption","property","formatPropertyAddress","onPropertySelected","onAddressChange","newAddress","addressWithFlag","__spreadProps","newValue","editProperty","deleteProperty","isSavingProperty","savePropertyToProfile","address","result","call","__expose","_hoisted_11","PhilippinesAddressInput","showTooltip","tooltipPositionClass","arrowPositionClass","_renderSlot","_Transition","$emit","FieldError","Tooltip","FieldLabel","isOpen","selectedDate","selectedSlot","location","purpose","contactName","contactEmail","contactPhone","booking","success","teamConfig","createResource","availableSlots","data","availableDates","slotsForSelectedDate","dateData","locations","isValid","formatSlotTime","slot","formatDateShort","dateStr","date","day","formatDateFull","selectDate","selectSlot","handleClose","handleBook","err","_unref","Dialog","dateInfo","loc","_hoisted_28","_hoisted_34","showModal","appointmentData","hasAppointment","_b","formattedDate","formattedTime","start","end","startTime","endTime","openScheduler","handleBooked","clearAppointment","BookSlotModal","option","localData","visibleFields","field","parentSection","isInAddressSection","addressComponentFields","f","isFieldVisible","isAddressField","fieldName","fieldLabel","_c","addressFieldNames","addressSections","addressLabels","label","getPlaceholder","getFieldIcon","getSelectOptions","optionsString","opt","validationErrors","validateConfigField","clearFieldError","useStepValidation","handleFieldValidation","getValidationError","getFileArray","updateFileField","fileArray","uploadedFiles","fileUrl","handleFileUploadToFrappe","resolveCallback","formData","response","errorText","newData","key","fileUrls","fields","PropertyAddressSelector","TextField","SelectField","CheckboxField","TextareaField","DateField","NumberField","CameraUpload","PickupScheduleField","visibleSections","section","isSectionVisible","getTabsForSection","config","newLocalData","TabGroup","TabList","tab","idx","Tab","selected","_withCtx","TabPanels","TabPanel","DynamicFieldRenderer","Disclosure","open","DisclosureButton","ChevronUpIcon","DisclosurePanel"],"mappings":"guCAEe,SAASA,GAAOC,EAAMC,EAAQ,CAC3C,OAAQC,EAAU,EAAIC,EAAoB,MAAO,CAC/C,MAAO,6BACP,QAAS,YACT,KAAM,eACN,cAAe,OACf,YAAa,MACjB,EAAK,CACDC,EAAoB,OAAQ,CAC1B,YAAa,UACb,EAAG,uHACH,YAAa,SACnB,CAAK,CACL,CAAG,CACH,qtDCuLA,MAAMC,EAAQC,EAmCRC,EAAOC,EAEPC,EAAYC,EAAI,IAAI,EACpBC,EAAeD,EAAI,IAAI,EACvBE,EAAaF,EAAI,EAAK,EACtBG,EAAgBH,EAAI,IAAI,EACxBI,EAAcJ,EAAI,IAAI,EACtBK,EAAYL,EAAI,EAAK,EACrBM,EAAiBN,EAAI,CAAC,EAEtBO,EAAQC,EAAS,CACtB,IAAK,IAAMb,EAAM,WACjB,IAAMc,GAAUZ,EAAK,oBAAqBY,CAAK,CAChD,CAAC,EAGKC,EAAmB,IAAM,QAC9BC,EAAAZ,EAAU,QAAV,MAAAY,EAAiB,OAClB,EAGMC,EAA0BC,GAAUC,EAAA,sBACzC,MAAMC,EAAgB,MAAM,KAAKF,EAAM,OAAO,KAAK,EACnD,MAAMG,EAAaD,CAAa,EAChCF,EAAM,OAAO,MAAQ,EACtB,GAGMG,EAAsBD,GAAkBD,EAAA,sBAC7C,MAAMG,EAAa,CAAA,EAEnB,UAAWC,KAAQH,EAAe,CAEjC,GAAIG,EAAK,KAAOvB,EAAM,QAAS,CAC9B,MACC,QAAQuB,EAAK,IAAI,4BAA4BC,EAAexB,EAAM,OAAO,CAAC,EAC9E,EACG,QACD,CAGA,IAAIyB,EAAU,KACVF,EAAK,KAAK,WAAW,QAAQ,IAChCE,EAAU,MAAMC,EAAmBH,CAAI,GAGxCD,EAAW,KAAK,CACf,KAAMC,EACN,KAAMA,EAAK,KACX,KAAMA,EAAK,KACX,KAAMA,EAAK,KACX,QAASE,EACT,WAAY,IAAI,KAAI,EAAG,YAAW,CACrC,CAAG,CACF,CAEA,GAAIH,EAAW,OAAS,EAAG,CAC1B,MAAMK,EAAW3B,EAAM,SACpB,CAAC,GAAGY,EAAM,MAAO,GAAGU,CAAU,EAC9BA,EACHpB,EAAK,oBAAqByB,CAAQ,EAGlC,MAAMC,EAAYN,CAAU,CAC7B,CACD,GAGMI,EAAsBH,GACpB,IAAI,QAASM,GAAY,CAC/B,MAAMC,EAAS,IAAI,WACnBA,EAAO,OAAUC,GAAMF,EAAQE,EAAE,OAAO,MAAM,EAC9CD,EAAO,QAAU,IAAMD,EAAQ,IAAI,EACnCC,EAAO,cAAcP,CAAI,CAC1B,CAAC,EAIIK,EAAqBI,GAAkBb,EAAA,sBAC5CT,EAAU,MAAQ,GAClBC,EAAe,MAAQ,EAEvB,GAAI,CACH,QAASsB,EAAI,EAAGA,EAAID,EAAc,OAAQC,IAAK,CAC9C,MAAMC,EAAWF,EAAcC,CAAC,EAG1BE,EAAmB,YAAY,IAAM,CAC1CxB,EAAe,MAAQ,KAAK,IAAIA,EAAe,MAAQ,GAAI,EAAE,CAC9D,EAAG,GAAG,EAGN,MAAM,IAAI,QAASkB,GAAY,CAC9B3B,EAAK,SAAUgC,EAAUL,CAAO,CACjC,CAAC,EAED,cAAcM,CAAgB,EAC9BxB,EAAe,OAAUsB,EAAI,GAAKD,EAAc,OAAU,GAC3D,CACD,OAASI,EAAO,CACf,QAAQ,MAAM,gBAAiBA,CAAK,EACpC,MAAM,2CAA2C,CAClD,QAAC,CACA1B,EAAU,MAAQ,GAClBC,EAAe,MAAQ,CACxB,CACD,GAGM0B,EAAcC,GAAU,CAC7B,MAAMX,EAAW,CAAC,GAAGf,EAAM,KAAK,EAChCe,EAAS,OAAOW,EAAO,CAAC,EACxBpC,EAAK,oBAAqByB,CAAQ,CACnC,EAGMY,EAAa,IAAYpB,EAAA,sBAC9B,GAAI,CACHZ,EAAW,MAAQ,GACnB,MAAMiC,EAAW,CAClB,OAASJ,EAAO,CACf,QAAQ,MAAM,gBAAiBA,CAAK,EACpC,MACC,6EACH,EACE7B,EAAW,MAAQ,EACpB,CACD,GAGMiC,EAAc,IAAYrB,EAAA,sBAC/B,GAAI,CACH,MAAMsB,EAAS,MAAM,UAAU,aAAa,aAAa,CACxD,MAAO,CACN,WAAY,cACZ,MAAO,CAAE,MAAO,IAAI,EACpB,OAAQ,CAAE,MAAO,IAAI,CACzB,EACG,MAAO,EACV,CAAG,EAEDhC,EAAY,MAAQgC,EAEhBnC,EAAa,QAChBA,EAAa,MAAM,UAAYmC,EAEjC,OAASL,EAAO,CACf,MAAMA,CACP,CACD,GAGMM,EAAe,IAAM,CAC1B,MAAMC,EAAQrC,EAAa,MACrBsC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQD,EAAM,WACrBC,EAAO,OAASD,EAAM,YAENC,EAAO,WAAW,IAAI,EAC9B,UAAUD,EAAO,EAAG,EAAGC,EAAO,MAAOA,EAAO,MAAM,EAE1DpC,EAAc,MAAQoC,EAAO,UAAU,aAAc,EAAG,CACzD,EAGMC,EAAc,IAAM,CACzBrC,EAAc,MAAQ,IACvB,EAGMsC,EAAW,IAAY3B,EAAA,sBAC5B,GAAI,CAACX,EAAc,MAAO,OAG1B,MAAMuC,EAAO,MAAO,MAAM,MAAMvC,EAAc,KAAK,GAAG,KAAI,EACpDe,EAAO,IAAI,KAAK,CAACwB,CAAI,EAAG,SAAS,KAAK,KAAK,OAAQ,CACxD,KAAM,YACR,CAAE,EAED,MAAM1B,EAAa,CAACE,CAAI,CAAC,EACzByB,EAAW,CACZ,GAGMA,EAAc,IAAM,CACrBvC,EAAY,QACfA,EAAY,MAAM,UAAS,EAAG,QAASwC,GAAUA,EAAM,KAAI,CAAE,EAC7DxC,EAAY,MAAQ,MAErBD,EAAc,MAAQ,KACtBD,EAAW,MAAQ,EACpB,EAGMiB,EAAkB0B,GAAU,CACjC,GAAIA,IAAU,EAAG,MAAO,UACxB,MAAMC,EAAI,KACJC,EAAQ,CAAC,QAAS,KAAM,KAAM,IAAI,EAClCnB,EAAI,KAAK,MAAM,KAAK,IAAIiB,CAAK,EAAI,KAAK,IAAIC,CAAC,CAAC,EAClD,OAAO,KAAK,MAAOD,EAAQ,KAAK,IAAIC,EAAGlB,CAAC,EAAK,GAAG,EAAI,IAAM,IAAMmB,EAAMnB,CAAC,CACxE,gBAjbEpC,EAAA,EAAAC,EAgMM,MAhMNuD,GAgMM,CA9LJtD,EAMQ,QANRuD,GAMQ,CALNvD,EAGO,OAHPwD,GAGO,CAFFC,EAAAC,EAAAxD,EAAA,KAAK,EAAG,IACX,CAAA,EAAYA,EAAA,cAAZH,EAAmD,OAAnD4D,GAA2C,GAAC,cAErCzD,EAAA,cAATH,EAAwE,IAAxE6D,GAAwEF,EAAfxD,EAAA,QAAQ,EAAA,CAAA,cAInEF,EA4CM,MA5CN6D,GA4CM,CAzCI3D,EAAA,iBADRH,EAgBS,SAAA,OAdN,QAAOyC,EACR,KAAK,SACL,MAAKsB,EAAA,CAAC,oKAAmK,CAAA,gCAC9HnD,EAAA,KAAS,CAAA,CAAA,EACnD,SAAUA,EAAA,oyBAabX,EAsBS,SAAA,CArBN,QAAOgB,EACR,KAAK,SACL,MAAK8C,EAAA,CAAC,oKAAmK,CAAA,gCAC9HnD,EAAA,KAAS,CAAA,CAAA,EACnD,SAAUA,EAAA,QAEXX,EAMM,MANN+D,GAMM,aALJ/D,EAEM,MAAA,CAFD,MAAM,4DAA4D,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC/GA,EAAkK,OAAA,CAA5J,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,gGAE1EH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAA2F,IAAA,CAAxF,MAAM,kEAAkE,EAAC,cAAW,EAAA,GACvFA,EAA6E,IAA7EgE,GAAiC,YAAU9D,EAAA,SAAQ,QAAA,MAAA,EAAA,CAAA,IAErDF,EAOE,QAAA,SANI,YAAJ,IAAIK,EACJ,KAAK,OACJ,OAAQH,EAAA,OACR,SAAUA,EAAA,SACV,SAAQgB,EACT,MAAM,gCAMDP,EAAA,OAAXb,IAAAC,EAaM,MAbNkE,GAaM,CAZJjE,EAWM,MAXNkE,GAWM,aAVJlE,EAGM,MAAA,CAHD,MAAM,qCAAqC,MAAM,6BAA6B,KAAK,OAAO,QAAQ,cACrGA,EAAkG,SAAA,CAA1F,MAAM,aAAa,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,OAAO,eAAe,eAAa,MACrFA,EAAwK,OAAA,CAAlK,MAAM,aAAa,KAAK,eAAe,EAAE,0HAEjDA,EAKM,MALNmE,GAKM,CAJJtE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAA6D,IAAA,CAA1D,MAAM,mCAAmC,EAAC,eAAY,EAAA,GACzDA,EAEM,MAFNoE,GAEM,CADJpE,EAAwG,MAAA,CAAnG,MAAM,8CAA+C,gBAAgBY,EAAA,MAAc,GAAA,CAAA,6BAOrFC,EAAA,MAAM,OAAM,GAAvBf,IAAAC,EAwCM,MAxCNsE,GAwCM,CAvCJC,EAsCkBC,GAAA,CAtCD,KAAK,MAAM,EAAA,WAExB,IAA8B,EADhCzE,EAAA,EAAA,EAAAC,EAoCMyE,EAAA,KAAAC,EAnCoB5D,EAAA,MAAK,CAArBW,EAAMe,SADhBxC,EAoCM,MAAA,CAlCH,IAAKyB,EAAK,KAAOe,EAClB,MAAM,oIAENvC,EA8BM,MA9BN0E,GA8BM,CA5BJ1E,EASM,MATN2E,GASM,CAROnD,EAAK,SAAhB1B,IAAAC,EAEM,MAFN6E,GAEM,CADJ5E,EAA+E,MAAA,CAAzE,IAAKwB,EAAK,QAAU,IAAKA,EAAK,KAAM,MAAM,6CAElD1B,IAAAC,EAIM,MAJN8E,GAIM,CAAA,GAAAhF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAHJG,EAEM,MAAA,CAFD,MAAM,yBAAyB,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC5EA,EAAiM,OAAA,CAA3L,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,qIAM9EA,EAGM,MAHN8E,GAGM,CAFJ9E,EAAyE,IAAzE+E,GAAyErB,EAAhBlC,EAAK,IAAI,EAAA,CAAA,EAClExB,EAAoE,IAApEgF,GAAoEtB,EAAhCjC,EAAeD,EAAK,IAAI,CAAA,EAAA,CAAA,IAI9DxB,EASS,SAAA,CARN,QAAKiF,GAAE3C,EAAWC,CAAK,EACxB,KAAK,SACL,MAAM,kGACN,MAAM,2BAENvC,EAEM,MAAA,CAFD,MAAM,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC7DA,EAAyM,OAAA,CAAnM,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,oLASpFkF,EA0EWC,GAAA,CA1ED,GAAG,MAAM,EAAA,CAET3E,EAAA,WADRT,EAwEM,MAAA,OAtEJ,MAAM,iFACL,WAAYkD,EAAW,CAAA,MAAA,CAAA,IAExBjD,EAkEM,MAlENoF,GAkEM,CAhEJpF,EAUM,MAAA,CAVD,MAAM,yDAAyD,EAAA,CAClEH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAA4D,KAAA,CAAxD,MAAM,kCAAkC,EAAC,aAAU,EAAA,GACvDA,EAOS,SAAA,CANN,QAAOiD,EACR,MAAM,qEAENjD,EAEM,MAAA,CAFD,MAAM,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC7DA,EAAiG,OAAA,CAA3F,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,oCAM9EA,EAqBM,MArBNqF,GAqBM,CAnBK5E,EAAA,WAMTV,EAKE,MAAA,OAHC,IAAKU,EAAA,MACN,IAAI,WACJ,MAAM,iDAXRV,EAMS,QAAA,eAJH,eAAJ,IAAIQ,EACJ,SAAA,GACA,YAAA,GACA,MAAM,2CAUIE,EAAA,gBAAZX,IAAAC,EAIM,MAJNuF,GAIM,CAHJtF,EAEM,MAFNuF,GAEM,MADJxF,EAAkEyE,EAAA,KAAAC,EAAjD,EAALvC,GAAZlC,EAAkE,MAAA,CAA7C,IAAKkC,EAAG,MAAM,wCAMzClC,EA0BM,MA1BNwF,GA0BM,CAzBQ/E,EAAA,OASZX,IAAAC,EAeM,MAfN0F,GAeM,CAdJzF,EAMS,SAAA,CALN,QAAO8C,EACR,KAAK,SACL,MAAM,+FACP,UAED,EACA9C,EAMS,SAAA,CALN,QAAO+C,EACR,KAAK,SACL,MAAM,+FACP,aAED,MAvBFjD,IAAAC,EAQM,MARN2F,GAQM,CAPJ1F,EAMS,SAAA,CALN,QAAO2C,EACR,KAAK,SACL,MAAM,uMAEN3C,EAAsD,MAAA,CAAjD,MAAM,oCAAoC,EAAA,KAAA,EAAA,ioCCjB/D,MAAMC,EAAQC,EAWRC,EAAOC,EAEPuF,EAAerF,EAAI,CACxB,OAAQ,GACR,SAAU,GACV,aAAc,GACd,SAAU,GACV,QAAS,EACV,CAAC,EAGKsF,EAAY,CACjB,eACA,QACA,SACA,SACA,UACA,WACA,WACA,SACA,OACA,gBACA,UACA,SACA,oBACA,aACA,OACD,EAGMC,EAAqB,CAC1B,eAAgB,CACf,cACA,cACA,cACA,aACA,cACA,mBACA,aACA,iBACA,iBACA,kBACA,gBACA,eACA,eACA,kBACA,gBACA,gBACA,SACF,EACC,MAAO,CACN,SACA,gBACA,SACA,aACA,YACA,wBACA,SACA,UACA,WACA,SACA,UACA,QACA,SACA,OACF,EACC,OAAQ,CACP,cACA,cACA,kBACA,YACA,gBACA,sBACA,gBACA,SACA,QACA,WACA,UACA,QACA,MACF,CACA,EAGMC,EAAgB,CACrB,OAAQ,CACP,UACA,WACA,QACA,aACA,WACA,YACA,aACA,SACA,YACA,QACA,UACA,WACA,OACF,EACC,cAAe,CACd,SACA,aACA,SACA,OACA,WACA,YACA,SACA,WACA,aACA,aACA,cACA,YACA,aACA,aACA,OACF,EACC,cAAe,CACd,iBACA,aACA,gBACA,eACA,QACA,WACA,WACA,aACA,YACA,UACA,mBACF,CACA,EAEMC,EAAiBjF,EAAS,IAC1B6E,EAAa,MAAM,SACjBE,EAAmBF,EAAa,MAAM,QAAQ,GAAK,CAAA,EADjB,CAAA,CAEzC,EAEKK,EAAYlF,EAAS,IACrB6E,EAAa,MAAM,aAEvBG,EAAcH,EAAa,MAAM,YAAY,GAAK,CACjD,wCACH,EAJ8C,CAAA,CAM7C,EAEKM,EAAcnF,EAAS,IAAM,CAClC,MAAMoF,EAAQ,CAAA,EACd,OAAIP,EAAa,MAAM,QAAQO,EAAM,KAAKP,EAAa,MAAM,MAAM,EAC/DA,EAAa,MAAM,UACtBO,EAAM,KAAK,SAASP,EAAa,MAAM,QAAQ,EAAE,EAC9CA,EAAa,MAAM,cACtBO,EAAM,KAAKP,EAAa,MAAM,YAAY,EACvCA,EAAa,MAAM,UAAUO,EAAM,KAAKP,EAAa,MAAM,QAAQ,EACnEA,EAAa,MAAM,SAASO,EAAM,KAAKP,EAAa,MAAM,OAAO,EAE9DO,EAAM,OAAS,EAAIA,EAAM,KAAK,IAAI,EAAI,EAC9C,CAAC,EAEKC,EAAmB,IAAM,CAE9BR,EAAa,MAAM,aAAe,GAClCA,EAAa,MAAM,SAAW,GAC9BS,EAAa,CACd,EAEMC,EAAuB,IAAM,CAElCV,EAAa,MAAM,SAAW,GAC9BS,EAAa,CACd,EAEMA,EAAgB,IAAM,CAE3BjG,EAAK,oBAAqB,CACzB,aAAc8F,EAAY,MAC1B,aAAcN,EAAa,MAAM,OACjC,SAAUA,EAAa,MAAM,SAC7B,aAAcA,EAAa,MAAM,aACjC,SAAUA,EAAa,MAAM,SAC7B,SAAUA,EAAa,MAAM,OAC/B,CAAE,CACF,EAGA,OAAAW,GAAU,IAAM,OACf,GAAIrG,EAAM,WACT,GAAI,OAAOA,EAAM,YAAe,SAAU,CAGzC,MAAMiG,EAAQjG,EAAM,WAAW,MAAM,GAAG,EAAE,IAAKsG,GAAMA,EAAE,KAAI,CAAE,EACzDL,EAAM,QAAU,IACnBP,EAAa,MAAM,OAASO,EAAM,CAAC,GAAK,GACxCP,EAAa,MAAM,WAAW1E,EAAAiF,EAAM,CAAC,IAAP,YAAAjF,EAAU,QAAQ,SAAU,MAAO,GACjE0E,EAAa,MAAM,aAAeO,EAAM,CAAC,GAAK,GAC9CP,EAAa,MAAM,SAAWO,EAAM,CAAC,GAAK,GAC1CP,EAAa,MAAM,QAAUO,EAAM,CAAC,GAAK,GAE3C,MAAW,OAAOjG,EAAM,YAAe,WACtC0F,EAAa,MAAQa,IAAA,GAAKb,EAAa,OAAU1F,EAAM,YAG1D,CAAC,EAGDwG,EACC,IAAMxG,EAAM,WACXyG,GAAW,CACPA,GAAU,OAAOA,GAAW,WAC/Bf,EAAa,MAAQa,IAAA,GAAKb,EAAa,OAAUe,GAEnD,CACD,UAvXE5G,EAAA,EAAAC,EAkJM,MAlJNuD,GAkJM,0uBApIJtD,EAsHM,MAtHNuD,GAsHM,CApHJvD,EAwBM,MAAA,KAAA,CAvBJA,EAGQ,QAHRwD,GAGQ,eAHoD,aAE1D,EAAA,GAAYtD,EAAA,cAAZH,EAAmD,OAAnD4D,GAA2C,GAAC,cAE9C3D,EAkBM,MAlBN4D,GAkBM,GAjBJ5D,EAWS,SAAA,CAVE,sBAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAoF,GAAAU,EAAA,MAAa,SAAQV,GAC7B,SAAQkB,EACR,SAAUjG,EAAA,SACX,MAAK4D,EAAA,CAAC,oKAAmK,CAAA,uCACxH6B,EAAA,MAAa,QAAQ,CAAA,CAAA,IAEtE9F,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAyC,SAAA,CAAjC,MAAM,EAAE,EAAC,kBAAe,EAAA,QAChCD,EAESyE,EAAA,KAAAC,EAFkBmB,EAAZe,GAAf3G,EAES,SAAA,CAF8B,IAAK2G,EAAW,MAAOA,KACzDA,CAAQ,EAAA,EAAAC,EAAA,iBARJ,CAAAC,EAAAlB,EAAA,MAAa,QAAQ,gBAWhC3F,EAIM,MAAA,CAJD,MAAM,yEAAuE,CAChFA,EAEM,MAAA,CAFD,MAAM,wBAAwB,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC3EA,EAA0F,OAAA,CAApF,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,+BAOhFA,EA0BM,MAAA,KAAA,CAzBJA,EAGQ,QAHR8G,GAGQ,eAHoD,sBAE1D,EAAA,GAAY5G,EAAA,cAAZH,EAAmD,OAAnDgE,GAA2C,GAAC,cAE9C/D,EAmBM,MAnBNgE,GAmBM,GAlBJhE,EAYS,SAAA,CAXE,sBAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAoF,GAAAU,EAAA,MAAa,aAAYV,GACjC,SAAQoB,EACR,SAAUnG,EAAA,SACV,SAAQ,CAAGyF,EAAA,MAAa,SACzB,MAAK7B,EAAA,CAAC,qNAAoN,CAAA,uCACzK6B,EAAA,MAAa,YAAY,CAAA,CAAA,IAE1E9F,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAkD,SAAA,CAA1C,MAAM,EAAE,EAAC,2BAAwB,EAAA,UACzCD,EAESyE,EAAA,KAAAC,EAFsBsB,EAAA,MAAhBgB,QAAfhH,EAES,SAAA,CAFuC,IAAKgH,EAAe,MAAOA,KACtEA,CAAY,EAAA,EAAA9C,EAAA,mBATR,CAAA4C,EAAAlB,EAAA,MAAa,YAAY,kBAYpC3F,EAIM,MAAA,CAJD,MAAM,yEAAuE,CAChFA,EAEM,MAAA,CAFD,MAAM,wBAAwB,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC3EA,EAA0F,OAAA,CAApF,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,6BAIpE2F,EAAA,MAAa,uBAAvB5F,EAA6F,IAA7FmE,GAAoE,uBAAqB,KAI3FlE,EA0BM,MAAA,KAAA,CAzBJA,EAGQ,QAHRmE,GAGQ,iBAHoD,aAE1D,EAAA,GAAYjE,EAAA,cAAZH,EAAmD,OAAnDqE,GAA2C,GAAC,cAE9CpE,EAmBM,MAnBNqE,GAmBM,GAlBJrE,EAYS,SAAA,CAXE,sBAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAoF,GAAAU,EAAA,MAAa,SAAQV,GAC7B,SAAQmB,EACR,SAAUlG,EAAA,SACV,SAAQ,CAAGyF,EAAA,MAAa,aACzB,MAAK7B,EAAA,CAAC,qNAAoN,CAAA,uCACzK6B,EAAA,MAAa,QAAQ,CAAA,CAAA,IAEtE9F,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAyC,SAAA,CAAjC,MAAM,EAAE,EAAC,kBAAe,EAAA,UAChCD,EAESyE,EAAA,KAAAC,EAFkBuB,EAAA,MAAZgB,QAAfjH,EAES,SAAA,CAF8B,IAAKiH,EAAW,MAAOA,KACzDA,CAAQ,EAAA,EAAArC,EAAA,mBATJ,CAAAkC,EAAAlB,EAAA,MAAa,QAAQ,kBAYhC3F,EAIM,MAAA,CAJD,MAAM,yEAAuE,CAChFA,EAEM,MAAA,CAFD,MAAM,wBAAwB,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC3EA,EAA0F,OAAA,CAApF,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,6BAIpE2F,EAAA,MAAa,2BAAvB5F,EAAqG,IAArG6E,GAAwE,2BAAyB,KAInG5E,EAcM,MAAA,KAAA,CAbJA,EAGQ,QAHRiH,GAGQ,iBAHoD,uBAE1D,EAAA,GAAY/G,EAAA,cAAZH,EAAmD,OAAnD8E,GAA2C,GAAC,gBAE9C7E,EAQE,QAAA,CAPS,sBAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAoF,GAAAU,EAAA,MAAa,OAAMV,GAC3B,QAAOmB,EACR,KAAK,OACJ,SAAUlG,EAAA,SACX,YAAY,sCACZ,MAAK4D,EAAA,CAAC,2IAA0I,CAAA,uCAC/F6B,EAAA,MAAa,MAAM,CAAA,CAAA,gBAN3D,CAAAuB,EAAAvB,EAAA,MAAa,MAAM,MAWhC3F,EAaM,MAbN+E,GAaM,eAZJ/E,EAGQ,QAAA,CAHD,MAAM,gDAA8C,GAAC,YAE1D,EAAAA,EAAiE,OAAA,CAA3D,MAAM,mCAAmC,EAAC,YAAU,UAE5DA,EAOE,QAAA,CANS,sBAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAoF,GAAAU,EAAA,MAAa,QAAOV,GAC5B,QAAOmB,EACR,KAAK,OACL,YAAY,aACZ,UAAU,IACV,MAAM,gKALG,CAAAc,EAAAvB,EAAA,MAAa,OAAO,QAWxBM,EAAA,OAAXnG,IAAAC,EAUM,MAVNiF,GAUM,CATJhF,EAQM,MARNmH,GAQM,eAPJnH,EAEM,MAAA,CAFD,MAAM,mDAAmD,KAAK,OAAO,OAAO,eAAe,QAAQ,cACtGA,EAAyH,OAAA,CAAnH,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,wDAE1EA,EAGM,MAHNoF,GAGM,CAFJvF,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAkE,IAAA,CAA/D,MAAM,oCAAoC,EAAC,mBAAgB,EAAA,GAC9DA,EAA4D,IAA5DqF,GAA4D3B,EAAlBuC,EAAA,KAAW,EAAA,CAAA,0xBC3C/D,MAAMhG,EAAQC,EAeRC,EAAOC,EAEP,CAAe,gBAAAgH,EAAiB,iBAAAC,EAAkB,gBAAAC,CAAe,EACtEC,GAAc,EAGTC,EAAuBlH,EAAI,EAAK,EAChCmH,EAAqBnH,EAAI,EAAE,EAC3BoH,EAAgBpH,EAAI,EAAK,EACzBqF,EAAerF,EAAIL,EAAM,YAAc,CAAA,CAAE,EAGzC0H,EAAiB7G,EAAS,IAAMuG,EAAiB,OAAS,CAAA,CAAE,EAE5DO,EAAmB9G,EAAS,IAC7B,CAAC2G,EAAmB,OAASA,EAAmB,QAAU,UACtD,KACDE,EAAe,MAAM,KAAMpB,GAAMA,EAAE,OAASkB,EAAmB,KAAK,CAC3E,EAGD,SAASI,EAAqBC,EAAU,CACvC,MAAM5B,EAAQ,CAAA,EACd,OAAI4B,EAAS,eAAe5B,EAAM,KAAK4B,EAAS,aAAa,EACzDA,EAAS,QAAQ5B,EAAM,KAAK4B,EAAS,MAAM,EAC3CA,EAAS,QAAQ5B,EAAM,KAAK4B,EAAS,MAAM,EAC3CA,EAAS,MAAM5B,EAAM,KAAK4B,EAAS,IAAI,EACpC5B,EAAM,KAAK,IAAI,GAAK,kBAC5B,CAEA,SAAS6B,EAAsBD,EAAU,CACxC,MAAM5B,EAAQ,CAAA,EACd,OAAI4B,EAAS,QAAQ5B,EAAM,KAAK4B,EAAS,MAAM,EAC3CA,EAAS,UAAU5B,EAAM,KAAK,SAAS4B,EAAS,QAAQ,EAAE,EAC1DA,EAAS,cAAc5B,EAAM,KAAK4B,EAAS,YAAY,EACvDA,EAAS,UAAU5B,EAAM,KAAK4B,EAAS,QAAQ,GAC/CA,EAAS,UAAYA,EAAS,WACjC5B,EAAM,KAAK4B,EAAS,UAAYA,EAAS,QAAQ,EAC3C5B,EAAM,KAAK,IAAI,CACvB,CAEA,SAAS8B,GAAqB,CAC7B,GAAIP,EAAmB,QAAU,UAAW,CAE3C9B,EAAa,MAAQ,CAAA,EACrB6B,EAAqB,MAAQ,GAC7B,MACD,CAEII,EAAiB,QAEpBjC,EAAa,MAAQ,CACpB,aAAcoC,EAAsBH,EAAiB,KAAK,EAC1D,aAAcA,EAAiB,MAAM,QAAU,GAC/C,SAAUA,EAAiB,MAAM,UAAY,GAC7C,aACCA,EAAiB,MAAM,cACvBA,EAAiB,MAAM,MACvB,GACD,SAAUA,EAAiB,MAAM,UAAY,GAC7C,SACCA,EAAiB,MAAM,UACvBA,EAAiB,MAAM,UACvB,EACJ,EAEEzH,EAAK,oBAAqBwF,EAAa,KAAK,EAE9C,CAEA,SAASsC,EAAgBC,EAAY,CACpCvC,EAAa,MAAQuC,EAErB,MAAMC,EAAkBC,GAAA5B,EAAA,GACpB0B,GADoB,CAEvB,iBAAkBR,EAAc,KAClC,GACCvH,EAAK,oBAAqBgI,CAAe,CAC1C,CAGA1B,EAAMiB,EAAgBW,GAAa,CAClC,GAAI1C,EAAa,OAAS,OAAO,KAAKA,EAAa,KAAK,EAAE,OAAS,EAAG,CACrE,MAAMwC,EAAkBC,GAAA5B,EAAA,GACpBb,EAAa,OADO,CAEvB,iBAAkB0C,CACrB,GACElI,EAAK,oBAAqBgI,CAAe,CAC1C,CACD,CAAC,EAED,SAASG,GAAe,CAEvBd,EAAqB,MAAQ,EAE9B,CAEA,SAASe,GAAiB,CAExB,QAAQ,+DAA+D,IAEvEd,EAAmB,MAAQ,GAC3B9B,EAAa,MAAQ,CAAA,EACrBxF,EAAK,oBAAqB,CAAA,CAAE,EAE9B,CAGA,MAAMqI,EAAmBlI,EAAI,EAAK,EAElC,SAAemI,GAAwB,QAAArH,EAAA,sBACtC,GAAI,CAACsG,EAAc,MAAO,MAAO,CAAE,QAAS,GAAO,OAAQ,eAAe,EAG1E,GAAID,EAAmB,OAASA,EAAmB,QAAU,UAC5D,MAAO,CAAE,QAAS,GAAO,OAAQ,mBAAmB,EAGrD,MAAMiB,EAAU/C,EAAa,MAC7B,GAAI,CAAC+C,GAAW,CAACA,EAAQ,aACxB,MAAO,CAAE,QAAS,GAAO,OAAQ,YAAY,EAG9CF,EAAiB,MAAQ,GAEzB,GAAI,CACH,MAAMG,EAAS,MAAMC,GAAK,4CAA6C,CACtE,OAAQF,EAAQ,aAChB,SAAUA,EAAQ,SAClB,aAAcA,EAAQ,aACtB,SAAUA,EAAQ,SAClB,SAAUA,EAAQ,SAClB,WAAYf,EAAe,MAAM,SAAW,CAC/C,CAAG,EAED,OAAIgB,EAAO,UAEV,MAAMvB,EAAe,EACrBjH,EAAK,iBAAkBwI,EAAO,QAAQ,GAGhCA,CACR,OAAStG,EAAO,CACf,eAAQ,MAAM,2BAA4BA,CAAK,EACxC,CAAE,QAAS,GAAO,OAAQ,YAAa,MAAOA,EAAM,OAAO,CACnE,QAAC,CACAmG,EAAiB,MAAQ,EAC1B,CACD,GAGA,OAAAK,EAAa,CACZ,cAAAnB,EACA,sBAAAe,EACA,iBAAAD,CACD,CAAC,EAGDlC,GAAU,IAAYlF,EAAA,sBACrB,MAAMgG,EAAe,GAGjB,CAACnH,EAAM,YAAc,OAAO,KAAKA,EAAM,UAAU,EAAE,SAAW,IAC7DqH,EAAgB,QACnBG,EAAmB,MAAQH,EAAgB,MAAM,KACjDU,EAAkB,GAKhBL,EAAe,MAAM,OAAS,IACjCH,EAAqB,MAAQ,GAE/B,EAAC,EAGDf,EACC,IAAMxG,EAAM,WACXyG,GAAW,CACPA,GAAU,OAAO,KAAKA,CAAM,EAAE,OAAS,IAC1Cf,EAAa,MAAQe,EAEvB,EACA,CAAE,KAAM,EAAI,CACb,UA1SE5G,EAAA,EAAAC,EA0FM,MA1FNuD,GA0FM,CAxFJtD,EAaM,MAbNuD,GAaM,CAZJvD,EAGQ,QAHRwD,GAGQ,CAFHC,EAAAC,EAAAxD,EAAA,KAAK,EAAG,IACX,CAAA,EAAYA,EAAA,cAAZH,EAAmD,OAAnD4D,GAA2C,GAAC,cAGtCgE,EAAA,MAAe,OAAM,OAD7B5H,EAOS,SAAA,OALN,QAAKF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAoF,GAAEuC,EAAA,MAAoB,CAAIA,EAAA,OAChC,KAAK,SACL,MAAM,2DAEHA,EAAA,MAAoB,iBAAA,2BAAA,EAAA,CAAA,cAKhBA,EAAA,OAAwBG,EAAA,MAAe,OAAM,GAAxD7H,IAAAC,EAiDM,MAjDN6D,GAiDM,GAhDJ5D,EAcS,SAAA,sCAbEyH,EAAkB,MAAAxC,GAC1B,SAAQ+C,EACT,MAAM,8GAENnI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAA2C,SAAA,CAAnC,MAAM,EAAE,EAAC,oBAAiB,EAAA,UAClCD,EAMSyE,EAAA,KAAAC,EALYkD,EAAA,MAAZG,QADT/H,EAMS,SAAA,CAJN,IAAK+H,EAAS,KACd,MAAOA,EAAS,IAEd,EAAApE,EAAAmE,EAAqBC,CAAQ,CAAA,EAAA,EAAAjE,EAAA,UAElChE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAmD,SAAA,CAA3C,MAAM,WAAU,qBAAkB,EAAA,aAZjCyH,EAAA,KAAkB,IAgBlBG,EAAA,OAAoBH,EAAA,QAAkB,WAAjD3H,IAAAC,EA8BM,MA9BN6G,GA8BM,CA7BJ5G,EA4BM,MA5BN8G,GA4BM,CA3BJ9G,EAIM,MAJN+D,GAIM,CAHJ/D,EAAmG,IAAnGgE,GAAmGN,EAAnDkE,EAAA,MAAiB,eAAa,UAAA,EAAA,CAAA,EAC9E5H,EAAkF,IAAlF8I,GAAkFpF,EAA9CqE,EAAsBH,EAAA,KAAgB,CAAA,EAAA,CAAA,EACjEA,EAAA,MAAiB,mBAA1B9H,EAAA,EAAAC,EAAuH,IAAvHkE,GAAuHP,EAAzCkE,EAAA,MAAiB,iBAAiB,EAAA,CAAA,cAElH5H,EAqBM,MAAA,CArBD,MAAM,gBAAgB,EAAA,CACzBA,EASS,SAAA,CARN,QAAOsI,EACR,KAAK,SACL,MAAM,4CACN,MAAM,kCAENtI,EAEM,MAAA,CAFD,MAAM,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC7DA,EAAmM,OAAA,CAA7L,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,oIAG5EA,EASS,SAAA,CARN,QAAOuI,EACR,KAAK,SACL,MAAM,0CACN,MAAM,oCAENvI,EAEM,MAAA,CAFD,MAAM,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC7DA,EAAyM,OAAA,CAAnM,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,sKASxE,CAAAwH,EAAA,OAAwBC,EAAA,QAAkB,WAAkBE,EAAA,MAAe,SAAM,OAA7F5H,EAMM,MAAAmE,GAAA,CALJI,EAIEyE,GAAA,CAHC,WAAYpD,EAAA,MACZ,sBAAmBsC,EACnB,SAAU/H,EAAA,0DAKFsH,EAAA,OAAwBC,EAAA,QAAkB,YAAA,CAAoBA,EAAA,OAA3E3H,IAAAC,EAUM,MAVNoE,GAUM,GATJnE,EAKE,QAAA,sCAJS0H,EAAa,MAAAzC,GACtB,KAAK,WACL,GAAG,gBACH,MAAM,oFAHGyC,EAAA,KAAa,gBAKxB1H,EAEQ,QAAA,CAFD,IAAI,gBAAgB,MAAM,yBAAwB,oDAEzD,EAAA,+NCzDN,MAAMC,EAAQC,EAYR8I,EAAc1I,EAAI,EAAK,EAEvB2I,EAAuBnI,EAAS,IAAM,CAC3C,OAAQb,EAAM,SAAQ,CACrB,IAAK,MACJ,MAAO,6CACR,IAAK,SACJ,MAAO,0CACR,IAAK,OACJ,MAAO,2CACR,IAAK,QACJ,MAAO,0CACR,QACC,MAAO,4CACV,CACA,CAAC,EAEKiJ,EAAqBpI,EAAS,IAAM,CACzC,OAAQb,EAAM,SAAQ,CACrB,IAAK,MACJ,MAAO,uBACR,IAAK,SACJ,MAAO,oBACR,IAAK,OACJ,MAAO,sBACR,IAAK,QACJ,MAAO,qBACR,QACC,MAAO,sBACV,CACA,CAAC,gBAzECH,EAAA,EAAAC,EAyBM,MAzBNuD,GAyBM,CAxBJ6F,GAWOvJ,sBAXP,IAWO,CAVLI,EASS,SAAA,CARP,KAAK,SACL,MAAM,qJACL,4BAAYgJ,EAAA,MAAW,IACvB,4BAAYA,EAAA,MAAW,sBAExBhJ,EAEM,MAAA,CAFD,MAAM,UAAU,KAAK,eAAe,QAAQ,cAC/CA,EAA0O,OAAA,CAApO,YAAU,UAAU,EAAE,yLAAyL,YAAU,6BAKrOsE,EAUa8E,GAAA,CAVD,KAAK,SAAS,EAAA,WACxB,IAQM,CAPEJ,EAAA,WADRjJ,EAQM,MAAA,OANJ,MAAK+D,EAAA,CAAC,kGACEmF,EAAA,KAAoB,CAAA,EAC5B,MAAA,CAAA,YAAA,QAAA,cAAA,QAAA,IAEAE,GAAuBvJ,sBAAvB,IAAuB,KAAdM,EAAA,IAAI,EAAA,CAAA,OACbF,EAA6D,MAAA,CAAxD,MAAK8D,EAAA,CAAC,gBAAwBoF,EAAA,KAAkB,CAAA,2SCtB3DnJ,EAOM,MAAA,KAAA,CANKG,EAAA,WAATH,EAEI,IAFJuD,GAEII,EADCxD,EAAA,KAAK,EAAA,CAAA,GAEIA,EAAA,iBAAdH,EAEI,IAFJwD,GAEIG,EADCxD,EAAA,WAAW,EAAA,CAAA,2YCLlBJ,EAAA,EAAAC,EA0BM,MA1BNuD,GA0BM,CAzBJtD,EAwBM,MAAA,CAxBD,SAAM,iFAAgF,oBACnDE,EAAA,2CAAqDA,EAAA,qBAI3FF,EAWM,MAXNuD,GAWM,CAVJvD,EASE,QAAA,CARC,GAAIE,EAAA,MAAM,WACV,KAAMA,EAAA,MAAM,WACb,KAAK,WACJ,QAASA,EAAA,WACT,wBAAQmJ,EAAAA,MAAK,oBAAsBpE,EAAO,OAAO,OAAO,GACxD,sBAAMoE,EAAAA,MAAK,UAAA,GACX,SAAUnJ,EAAA,MAAM,YACjB,MAAM,kGAGVF,EAMM,MANN2D,GAMM,CALJ3D,EAGQ,QAAA,CAHA,IAAKE,EAAA,MAAM,WAAY,MAAM,iDAChCA,EAAA,MAAM,WAAW,EAAG,IACvB,CAAA,EAAYA,EAAA,MAAM,iBAAlBH,EAAiE,OAAjE8D,GAAyD,GAAC,mBAE5DS,EAAwEgF,EAAA,CAA3D,MAAOpJ,EAAA,gBAAkB,YAAaA,EAAA,MAAM,4SCvB/DH,EAOQ,QAAA,CANL,IAAKG,EAAA,UACN,MAAM,mEAENF,EAAwB,cAAfE,EAAA,KAAK,EAAA,CAAA,EACFA,EAAA,cAAZH,EAAwD,OAAxDwD,GAAgD,GAAC,YAClCrD,EAAA,cAAfgF,EAA4CqE,GAAA,OAAlB,KAAMrJ,EAAA,2UCNlCJ,EAAA,EAAAC,EA6BM,MA7BNuD,GA6BM,CA5BJgB,EAKEkF,GAAA,CAJC,aAAYtJ,EAAA,MAAM,WAClB,MAAOA,EAAA,MAAM,YACb,SAAU,EAAQA,EAAA,MAAM,YACxB,YAAWA,EAAA,MAAM,WAAaA,EAAA,MAAM,mEAEvCF,EAoBM,MApBNuD,GAoBM,CAnBJvD,EAaE,QAAA,CAZC,GAAIE,EAAA,MAAM,WACV,KAAMA,EAAA,MAAM,WACb,KAAK,OACJ,MAAOA,EAAA,WACP,uBAAOmJ,EAAAA,MAAK,oBAAsBpE,EAAO,OAAO,KAAK,GACrD,sBAAMoE,EAAAA,MAAK,UAAA,GACX,SAAUnJ,EAAA,MAAM,YACjB,SAAM,2IAA0I,CACpF,uCAAAA,EAAA,aAAeA,EAAA,qDAAiEA,EAAA,4CAK9IF,EAIM,MAAA,CAJD,MAAM,iEAA+D,CACxEA,EAEM,MAAA,CAFD,MAAM,wBAAwB,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC3EA,EAAkK,OAAA,CAA5J,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,qGAI9EsE,EAAwEgF,EAAA,CAA3D,MAAOpJ,EAAA,gBAAkB,YAAaA,EAAA,MAAM,0oBC5B3DJ,EAAA,EAAAC,EAmCM,MAnCNuD,GAmCM,CAlCJgB,EAKEkF,GAAA,CAJC,aAAYtJ,EAAA,MAAM,WAClB,MAAOA,EAAA,MAAM,YACb,SAAU,EAAQA,EAAA,MAAM,YACxB,YAAWA,EAAA,MAAM,WAAaA,EAAA,MAAM,mEAEvCF,EA0BM,MA1BNuD,GA0BM,CAzBOrD,EAAA,UAAO,YAAlBJ,IAAAC,EAEM,MAFNyD,GAEM,CAAA,GAAA3D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CADJG,EAA0D,OAAA,CAApD,MAAM,qCAAqC,EAAC,IAAC,EAAA,gBAErDA,EAgBE,QAAA,CAfC,GAAIE,EAAA,MAAM,WACV,KAAMA,EAAA,MAAM,WACb,KAAK,SACJ,MAAOA,EAAA,WACP,QAAKL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAoF,GAAEoE,QAAK,oBAAsB,WAAWpE,EAAO,OAAO,KAAK,GAAA,CAAA,GAChE,sBAAMoE,EAAAA,MAAK,UAAA,GACX,SAAUnJ,EAAA,MAAM,YAChB,KAAMA,EAAA,UAAO,MAAA,IAAA,OACd,SAAM,2IAA0I,SACnHA,EAAA,UAAO,WAAmE,uCAAAA,EAAA,aAAeA,EAAA,qDAAiEA,EAAA,mBAKtL,YAAaA,EAAA,UAAO,WAAA,OAA2BA,EAAA,yBAEvCA,EAAA,UAAO,YAAlBJ,IAAAC,EAIM,MAJN6D,GAIM,CAAA,GAAA/D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAHJG,EAEM,MAAA,CAFD,MAAM,wBAAwB,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC3EA,EAA+G,OAAA,CAAzG,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,6DAI9EsE,EAAwEgF,EAAA,CAA3D,MAAOpJ,EAAA,gBAAkB,YAAaA,EAAA,MAAM,01DC/B7D,MAAMD,EAAQC,EA+CRC,EAAOC,EAEPqJ,EAAS3I,EAAS,CACvB,IAAK,IAAMb,EAAM,KACjB,IAAMc,GAAUZ,EAAK,cAAeY,CAAK,CAC1C,CAAC,EAEK2I,EAAepJ,EAAI,EAAE,EACrBqJ,EAAerJ,EAAI,IAAI,EACvBsJ,EAAWtJ,EAAI,EAAE,EACjBuJ,EAAUvJ,EAAI,EAAE,EAChBwJ,EAAcxJ,EAAI,EAAE,EACpByJ,EAAezJ,EAAI,EAAE,EACrB0J,EAAe1J,EAAI,EAAE,EACrB2J,EAAU3J,EAAI,EAAK,EACnB+B,EAAQ/B,EAAI,IAAI,EAChB4J,EAAU5J,EAAI,EAAK,EAGnB6J,EAAaC,GAAe,CACjC,IAAK,gDACL,KAAM,EACP,CAAC,EAGKC,EAAiBD,GAAe,CACrC,IAAK,oDACL,KAAM,EACP,CAAC,EAGD3D,EACC,IAAMxG,EAAM,KACXyG,GAAW,CACPA,GAAUzG,EAAM,WAEnByJ,EAAa,MAAQ,GACrBC,EAAa,MAAQ,KACrBC,EAAS,MAAQ,GACjBC,EAAQ,MAAQ5J,EAAM,eACtBoC,EAAM,MAAQ,KACd6H,EAAQ,MAAQ,GAGhBC,EAAW,MAAM,CAAE,UAAWlK,EAAM,QAAQ,CAAE,EAG9CoK,EAAe,MAAM,CAAE,UAAWpK,EAAM,QAAQ,CAAE,EAEpD,CACD,EAGAwG,EACC,IAAM0D,EAAW,KAChBG,GAAS,OACLA,GAAA,MAAAA,EAAM,WAAWrJ,EAAAqJ,EAAK,SAAL,MAAArJ,EAAa,aAE7BqJ,EAAK,OAAO,UAAU,SAAW,EACpCV,EAAS,MAAQU,EAAK,OAAO,UAAU,CAAC,EAC9BA,EAAK,OAAO,kBAAoB,CAACV,EAAS,QACpDA,EAAS,MAAQU,EAAK,OAAO,kBAGhC,CACD,EAGA,MAAMC,EAAiBzJ,EAAS,IAAM,OACrC,MAAI,GAACG,EAAAoJ,EAAe,OAAf,MAAApJ,EAAqB,UAAW,CAACoJ,EAAe,KAAK,cAClD,CAAA,EAED,OAAO,OAAOA,EAAe,KAAK,aAAa,CACvD,CAAC,EAGKG,EAAuB1J,EAAS,IAAM,OAC3C,GAAI,CAAC4I,EAAa,OAAS,GAACzI,EAAAoJ,EAAe,OAAf,MAAApJ,EAAqB,SAChD,MAAO,CAAA,EAER,MAAMwJ,EAAWJ,EAAe,KAAK,cAAcX,EAAa,KAAK,EACrE,OAAOe,GAAA,YAAAA,EAAU,QAAS,CAAA,CAC3B,CAAC,EAGKC,EAAY5J,EAAS,IAAM,OAChC,OAAKG,EAAAkJ,EAAW,OAAX,MAAAlJ,EAAiB,QACfkJ,EAAW,KAAK,OAAO,WAAa,CAAA,EADL,CAAA,CAEvC,CAAC,EAEKQ,EAAU7J,EAAS,IACjB6I,EAAa,OAASC,EAAS,KACtC,EAEKgB,EAAkBC,GAChB,GAAGA,EAAK,aAAa,MAAMA,EAAK,WAAW,GAG7CC,EAAmBC,GAAY,CACpC,MAAMC,EAAO,IAAI,KAAKD,CAAO,EACvBE,EAAMD,EAAK,QAAO,EAExB,MAAO,GADOA,EAAK,mBAAmB,QAAS,CAAE,MAAO,OAAO,CAAE,CAClD,IAAIC,CAAG,EACvB,EAEMC,EAAkBH,GACV,IAAI,KAAKA,CAAO,EACjB,mBAAmB,QAAS,CACvC,QAAS,OACT,MAAO,OACP,IAAK,UACL,KAAM,SACR,CAAE,EAGII,EAAcH,GAAS,CAC5BtB,EAAa,MAAQsB,EACrBrB,EAAa,MAAQ,IACtB,EAEMyB,EAAcP,GAAS,CAC5BlB,EAAa,MAAQkB,CACtB,EAEMQ,EAAc,IAAM,CACpBpB,EAAQ,OACZ9J,EAAK,cAAe,EAAK,CAE3B,EAEMmL,EAAa,IAAYlK,EAAA,4BAC9B,GAAI,GAACuJ,EAAQ,OAAS,CAAChB,EAAa,OAEpC,CAAAM,EAAQ,MAAQ,GAChB5H,EAAM,MAAQ,KAEd,GAAI,CAwBH,MAAMiI,EAAO,MAvBI,MAAM,MAAM,6DAA8D,CAC1F,OAAQ,OACR,QAAS,CACR,eAAgB,mBAChB,sBAAuB,OAAO,UAClC,EACG,KAAM,KAAK,UAAU,CACpB,UAAWrK,EAAM,SACjB,gBAAiB0J,EAAa,MAAM,MACpC,cAAeA,EAAa,MAAM,IAClC,iBAAkB1J,EAAM,gBACxB,SAAU2J,EAAS,MACnB,QAASC,EAAQ,MACjB,aAAcC,EAAY,OAAS,KACnC,cAAeC,EAAa,OAAS,KACrC,cAAeC,EAAa,OAAS,KACrC,kBAAmB/J,EAAM,iBACzB,eAAgBA,EAAM,cACtB,WAAYA,EAAM,UAClB,aAAcA,EAAM,WACxB,CAAI,CACJ,CAAG,GAE2B,KAAI,GAE5BgB,EAAAqJ,EAAK,UAAL,MAAArJ,EAAc,SACjBiJ,EAAQ,MAAQ,GAChB7H,EAAM,MAAQ,KAGdlC,EAAK,SAAUiI,GAAA5B,EAAA,GACX8D,EAAK,SADM,CAEd,KAAMX,EAAa,MACnB,SAAUC,EAAS,KACvB,EAAI,EAGD,WAAW,IAAM,CAChByB,EAAW,CACZ,EAAG,GAAI,GAEPhJ,EAAM,MAAQiI,EAAK,KAAOA,EAAK,kBAAoB,4BAErD,OAASiB,EAAK,CACb,QAAQ,MAAM,0BAA2BA,CAAG,EAC5ClJ,EAAM,MAAQ,kCACf,QAAC,CACA4H,EAAQ,MAAQ,EACjB,EACD,qBAIC/E,EAgLSsG,EAAAC,EAAA,EAAA,YAhLQhC,EAAA,2CAAAA,EAAM,MAAAxE,GAAG,QAAS,CAAA,KAAA,IAAA,IACvB,OACV,IAAA,OA4KM,OA5KNjF,EA4KM,MA5KNsD,GA4KM,CA3KLtD,EAAqE,KAArEuD,GAAqEG,EAAbxD,EAAA,KAAK,EAAA,CAAA,EAGlDsL,EAAAnB,CAAA,EAAe,SAAWmB,EAAArB,CAAA,EAAW,SAAhDrK,IAAAC,EAGM,MAHNyD,GAGM,CAAA,GAAA3D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFLG,EAA0F,MAAA,CAArF,MAAM,wEAAwE,EAAA,KAAA,EAAA,EACnFA,EAAoE,IAAA,CAAjE,MAAM,4BAA4B,EAAC,6BAA0B,EAAA,OAIjDwL,EAAAnB,CAAA,EAAe,OAASmB,EAAArB,CAAA,EAAW,OAAnDrK,IAAAC,EAEM,MAFN4D,GAEM,CAAA,GAAA9D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CADLG,EAA8F,IAAA,CAA3F,MAAM,sBAAsB,EAAC,6DAA0D,EAAA,QAI3EwL,EAAAA,EAAAnB,CAAA,EAAe,OAAfmB,MAAAA,EAAqB,SAArC1L,IAAAC,EA4JM,MA5JN6D,GA4JM,CA1JL5D,EAuBM,MAAA,KAAA,CAtBLH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAoF,QAAA,CAA7E,MAAM,8CAA8C,EAAC,mBAAgB,EAAA,GAC5EA,EAiBM,MAjBN6D,GAiBM,QAhBL9D,EAeSyE,EAAA,KAAAC,EAdW8F,EAAA,MAAZmB,QADR3L,EAeS,SAAA,CAbP,IAAK2L,EAAS,KACd,QAAKzG,IAAEkG,EAAWO,EAAS,IAAI,EAC/B,MAAK5H,EAAA,mEAAyF4F,EAAA,QAAiBgC,EAAS,+GAMxH,SAAUzB,EAAA,QAEXjK,EAAiD,MAAjD8G,GAAiDpD,EAArBgI,EAAS,GAAG,EAAA,CAAA,EACxC1L,EAA0E,MAA1E+D,GAA0EL,EAAvCoH,EAAgBY,EAAS,IAAI,CAAA,EAAA,CAAA,EAChE1L,EAAuE,MAAvEgE,GAAuEN,EAApCgI,EAAS,MAAM,MAAM,EAAG,SAAM,CAAA,oBAG1DnB,EAAA,MAAe,SAAM,OAA9BxK,EAEI,IAFJ+I,GAAyE,qDAEzE,cAIUY,EAAA,WAAX3J,EAqBM,MAAAkE,GAAA,CApBLpE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAoF,QAAA,CAA7E,MAAM,8CAA8C,EAAC,mBAAgB,EAAA,GAC5EA,EAeM,MAfNkE,GAeM,QAdLnE,EAaSyE,EAAA,KAAAC,EAZO+F,EAAA,MAARK,GAAI,mBADZ9K,EAaS,SAAA,CAXP,IAAK8K,EAAK,MACV,QAAK5F,IAAEmG,EAAWP,CAAI,EACtB,MAAK/G,EAAA,2DAA+E7C,GAAA0I,EAAA,QAAA,YAAA1I,GAAc,SAAU4J,EAAK,gHAMjH,SAAUZ,EAAA,KAER,EAAAvG,EAAAmH,EAAK,aAAa,EAAA,GAAA1G,EAAA,YAGdwF,EAAA,OAAT7J,EAAA,EAAAC,EAEI,IAFJqE,GAA0D,gBAC5CuF,EAAA,MAAa,gBAAgB,EAAG,qBAAkBjG,EAAGiG,EAAA,MAAa,WAAW,EAAG,KAC9F,CAAA,wBAIUA,EAAA,OAAgBe,EAAA,MAAU,OAAM,OAA3C3K,EAYM,MAAAsE,GAAA,CAXLxE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAsF,QAAA,CAA/E,MAAM,8CAA8C,EAAC,qBAAkB,EAAA,KAC9EA,EASS,SAAA,sCARC4J,EAAQ,MAAA3E,GACjB,MAAM,sFACL,SAAUgF,EAAA,QAEXpK,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAA+C,SAAA,CAAvC,MAAM,EAAE,EAAC,wBAAqB,EAAA,UACtCD,EAESyE,EAAA,KAAAC,EAFaiG,EAAA,MAAPiB,QAAf5L,EAES,SAAA,CAFyB,IAAK4L,EAAM,MAAOA,KAChDA,CAAG,EAAA,EAAAhH,EAAA,qBANEiF,EAAA,KAAQ,OAWHD,EAAA,OAAgBe,EAAA,MAAU,SAAM,GAAhD5K,IAAAC,EAIM,MAJN6E,GAIM,CAHL5E,EAEI,IAFJiH,GAEI,CADHpH,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAA0C,OAAA,CAApC,MAAM,aAAa,EAAC,YAAS,EAAA,GAAOyD,EAAA,MAAIiH,EAAA,MAAS,CAAA,CAAA,EAAA,CAAA,gBAK9CxK,EAAA,aAAeyJ,EAAA,WAA1B5J,EASM,MAAA8E,GAAA,CARLhF,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAA8F,QAAA,CAAvF,MAAM,8CAA8C,EAAC,6BAA0B,EAAA,KACtFA,EAMY,WAAA,sCALF6J,EAAO,MAAA5E,GAChB,KAAK,IACL,MAAM,sFACN,YAAY,uCACX,SAAUgF,EAAA,sBAJFJ,EAAA,KAAO,gBASP3J,EAAA,mBAAqByJ,EAAA,OAAhC7J,IAAAC,EAyBM,MAzBNgF,GAyBM,CAxBLlF,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAA6F,QAAA,CAAtF,MAAM,yCAAyC,EAAC,iCAA8B,EAAA,GACrFA,EAsBM,MAtBNgF,GAsBM,GArBLhF,EAME,QAAA,sCALQ8J,EAAW,MAAA7E,GACpB,KAAK,OACL,YAAY,OACZ,MAAM,+EACL,SAAUgF,EAAA,sBAJFH,EAAA,KAAW,MAMrB9J,EAME,QAAA,sCALQ+J,EAAY,MAAA9E,GACrB,KAAK,QACL,YAAY,QACZ,MAAM,+EACL,SAAUgF,EAAA,sBAJFF,EAAA,KAAY,MAMtB/J,EAME,QAAA,sCALQgK,EAAY,MAAA/E,GACrB,KAAK,MACL,YAAY,QACZ,MAAM,+EACL,SAAUgF,EAAA,sBAJFD,EAAA,KAAY,kBAUbL,EAAA,OAAgBC,EAAA,OAA3B9J,IAAAC,EAQM,MARN6L,GAQM,CAPL/L,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAA6E,KAAA,CAAzE,MAAM,0CAA0C,EAAC,sBAAmB,EAAA,GACxEA,EAKM,MALNsF,GAKM,CAJLtF,EAAgF,IAAA,KAAA,CAA7EH,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAsC,OAAA,CAAhC,MAAM,aAAa,EAAC,QAAK,EAAA,KAAO,IAAC0D,EAAGwH,EAAexB,EAAA,KAAY,CAAA,EAAA,CAAA,IACxE1J,EAAgF,IAAA,KAAA,CAA7EH,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAsC,OAAA,CAAhC,MAAM,aAAa,EAAC,QAAK,EAAA,KAAO,IAAC0D,EAAGkH,EAAejB,EAAA,KAAY,CAAA,EAAA,CAAA,IACxE3J,EAAgE,IAAA,KAAA,CAA7DH,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAA0C,OAAA,CAApC,MAAM,aAAa,EAAC,YAAS,EAAA,GAAOyD,EAAA,MAAImG,EAAA,KAAQ,EAAA,CAAA,IACzD5J,EAA6F,IAAA,KAAA,CAA1FH,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAA0C,OAAA,CAApC,MAAM,aAAa,EAAC,YAAS,EAAA,GAAOyD,EAAA,IAACC,EAAGiG,EAAA,MAAa,gBAAgB,EAAG,WAAQ,CAAA,kBAKhFO,EAAA,OAAXpK,IAAAC,EAOM,MAPNwF,GAOM,CAAA,GAAA1F,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CANLG,EAKM,MAAA,CALD,MAAM,mBAAmB,EAAA,CAC7BA,EAEM,MAAA,CAFD,MAAM,8BAA8B,KAAK,OAAO,OAAO,eAAe,QAAQ,cAClFA,EAAgG,OAAA,CAA1F,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,qBAEzEA,EAAkF,IAAA,CAA/E,MAAM,oCAAoC,EAAC,kCAAgC,qBAKrEqC,EAAA,OAAXvC,IAAAC,EAEM,MAFNyF,GAEM,CADLxF,EAA+C,IAA/C0F,GAA+ChC,EAAZrB,EAAA,KAAK,EAAA,CAAA,cAIzCrC,EAgBM,MAhBNyF,GAgBM,CAfLzF,EAMS,SAAA,CALP,QAAOqL,EACP,SAAUpB,EAAA,MACX,MAAM,mLACN,WAED,EAAA4B,EAAA,EACA7L,EAOS,SAAA,CANP,QAAOsL,EACP,SAAQ,CAAGX,EAAA,OAAWV,EAAA,MACvB,MAAM,0LAEMA,EAAA,OAAZnK,EAAA,EAAAC,EAAsC,UAAjB,YAAU,IAC/BD,EAAA,EAAAC,EAAoC,UAAvB,kBAAgB,s8BCvZpC,MAAME,EAAQC,EA+BRC,EAAOC,EAEP0L,EAAYxL,EAAI,EAAK,EAGrByL,EAAkBjL,EAAS,CAChC,IAAK,IAAMb,EAAM,YAAc,CAAA,EAC/B,IAAMc,GAAUZ,EAAK,oBAAqBY,CAAK,CAChD,CAAC,EAEKiL,EAAiBlL,EAAS,IAAM,SACrC,QAAOG,EAAA8K,EAAgB,QAAhB,YAAA9K,EAAuB,mBAAkBgL,EAAAF,EAAgB,QAAhB,YAAAE,EAAuB,gBACxE,CAAC,EAEKC,EAAgBpL,EAAS,IAAM,OACpC,OAAKG,EAAA8K,EAAgB,QAAhB,MAAA9K,EAAuB,gBACf,IAAI,KAAK8K,EAAgB,MAAM,eAAe,EAC/C,mBAAmB,QAAS,CACvC,QAAS,OACT,KAAM,UACN,MAAO,OACP,IAAK,SACP,CAAE,EAPmD,EAQrD,CAAC,EAEKI,EAAgBrL,EAAS,IAAM,OACpC,GAAI,GAACG,EAAA8K,EAAgB,QAAhB,MAAA9K,EAAuB,iBAAiB,MAAO,GACpD,MAAMmL,EAAQ,IAAI,KAAKL,EAAgB,MAAM,eAAe,EACtDM,EAAMN,EAAgB,MAAM,cAAgB,IAAI,KAAKA,EAAgB,MAAM,aAAa,EAAI,KAE5FO,EAAYF,EAAM,mBAAmB,QAAS,CACnD,KAAM,UACN,OAAQ,UACR,OAAQ,EACV,CAAE,EAED,GAAIC,EAAK,CACR,MAAME,EAAUF,EAAI,mBAAmB,QAAS,CAC/C,KAAM,UACN,OAAQ,UACR,OAAQ,EACX,CAAG,EACD,MAAO,GAAGC,CAAS,MAAMC,CAAO,EACjC,CAEA,OAAOD,CACR,CAAC,EAEKE,EAAgB,IAAM,CAC3BV,EAAU,MAAQ,EACnB,EAEMW,EAAgB9D,GAAW,CAEhCoD,EAAgB,MAAQ,CACvB,eAAgBpD,EAAO,eACvB,gBAAiBA,EAAO,gBACxB,cAAeA,EAAO,cACtB,SAAUA,EAAO,SACjB,OAAQA,EAAO,MACjB,EAECxI,EAAK,UAAU,CAChB,EAEMuM,EAAmB,IAAM,CAC9BX,EAAgB,MAAQ,CAAA,EACxB5L,EAAK,UAAU,CAChB,oBAICJ,EAoFM,MAAA,CApFD,MAAM,aAAc,iBAAgBG,EAAA,MAAM,aAC9CF,EAGQ,QAHRuD,GAGQ,KAFJrD,EAAA,MAAM,WAAW,EAAG,IACvB,CAAA,EAAYA,EAAA,MAAM,iBAAlBH,EAAiE,OAAjEyD,GAAyD,GAAC,cAI/CwI,EAAA,OAsBZlM,IAAAC,EAqCM,MArCN6D,GAqCM,CApCL5D,EAmCM,MAnCN6D,GAmCM,CAlCL7D,EA0BM,MA1BN4G,GA0BM,aAzBL5G,EASM,MAAA,CATD,MAAM,iBAAe,CACzBA,EAOM,MAAA,CAPD,MAAM,yBAAyB,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC7EA,EAKE,OAAA,CAJD,iBAAe,QACf,kBAAgB,QAChB,eAAa,IACb,EAAE,0DAILA,EAcM,MAAA,KAAA,CAbLH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAkE,IAAA,CAA/D,MAAM,oCAAoC,EAAC,mBAAgB,EAAA,GACrD+L,EAAA,MAAgB,gBAAzBjM,IAAAC,EAEI,IAFJ+G,GAA6E,SACvEpD,EAAGqI,EAAA,MAAgB,cAAc,EAAA,CAAA,YAEvC/L,EAEI,IAFJ+D,GAEI,CADH/D,EAAoD,OAApDgE,GAAoDN,EAAvBwI,EAAA,KAAa,EAAA,CAAA,IAE3ClM,EAEI,IAFJ8I,GAEI,CADHjJ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAsC,OAAA,CAAhC,MAAM,aAAa,EAAC,QAAK,EAAA,GAAOyD,EAAA,MAAI0I,EAAA,KAAa,EAAA,CAAA,IAE/CJ,EAAA,MAAgB,UAAzBjM,IAAAC,EAEI,IAFJkE,GAEI,CADHpE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAA0C,OAAA,CAApC,MAAM,aAAa,EAAC,YAAS,EAAA,KAAO,IAAC0D,EAAGqI,EAAA,MAAgB,QAAQ,EAAA,CAAA,kBAIzE/L,EAMS,SAAA,CALR,KAAK,SACJ,QAAO0M,EACR,MAAM,yDACN,cAED,QAzDF5M,IAAAC,EAmBM,MAnBN4D,GAmBM,CAlBL9D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAEI,IAAA,CAFD,MAAM,uBAAuB,EAAC,wEAEjC,EAAA,GACAA,EAcS,SAAA,CAbR,KAAK,SACJ,QAAOwM,EACR,MAAM,+OAENxM,EAOM,MAAA,CAPD,MAAM,eAAe,KAAK,OAAO,OAAO,eAAe,QAAQ,cACnEA,EAKE,OAAA,CAJD,iBAAe,QACf,kBAAgB,QAChB,eAAa,IACb,EAAE,kGAEE,yBAEP,EAAA,SA4CQE,EAAA,qBAATH,EAEI,IAFJmE,GAEIR,EADAxD,EAAA,eAAe,EAAA,CAAA,YAInBoE,EASEqI,GAAA,CARO,KAAMb,EAAA,qCAAAA,EAAS,MAAA7G,GACtB,YAAW/E,EAAA,SACX,mBAAkBA,EAAA,gBAClB,eAAcA,EAAA,YACd,aAAYA,EAAA,UACb,MAAM,uBACL,eAAc,GACd,SAAQuM,+bC5LV3M,EAAA,EAAAC,EAqCM,MArCNuD,GAqCM,CApCJgB,EAKEkF,GAAA,CAJC,aAAYtJ,EAAA,MAAM,WAClB,MAAOA,EAAA,MAAM,YACb,SAAU,EAAQA,EAAA,MAAM,YACxB,YAAWA,EAAA,MAAM,WAAaA,EAAA,MAAM,mEAEvCF,EA4BM,MA5BNuD,GA4BM,CA3BJvD,EAqBS,SAAA,CApBN,GAAIE,EAAA,MAAM,WACV,KAAMA,EAAA,MAAM,WACZ,MAAOA,EAAA,WACP,wBAAQmJ,EAAAA,MAAK,oBAAsBpE,EAAO,OAAO,KAAK,GACtD,sBAAMoE,EAAAA,MAAK,UAAA,GACX,SAAUnJ,EAAA,MAAM,YACjB,SAAM,6LAA4L,CACtI,uCAAAA,EAAA,aAAeA,EAAA,qDAAiEA,EAAA,qBAK5IF,EAAwD,SAAxD2D,GAAiB,UAAOD,EAAGxD,EAAA,MAAM,WAAW,EAAA,CAAA,SAC5CH,EAMSyE,EAAA,KAAAC,EALUvE,EAAA,QAAV0M,QADT7M,EAMS,SAAA,CAJN,IAAK6M,EACL,MAAOA,KAELA,CAAM,EAAA,EAAAhJ,EAAA,8BAGb5D,EAIM,MAAA,CAJD,MAAM,yEAAuE,CAChFA,EAEM,MAAA,CAFD,MAAM,wBAAwB,KAAK,OAAO,OAAO,eAAe,QAAQ,cAC3EA,EAA0F,OAAA,CAApF,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,6BAI9EsE,EAAwEgF,EAAA,CAA3D,MAAOpJ,EAAA,gBAAkB,YAAaA,EAAA,MAAM,giBCpC3DJ,EAAA,EAAAC,EAgCM,MAhCNuD,GAgCM,CA/BJgB,EAKEkF,GAAA,CAJC,aAAYtJ,EAAA,MAAM,WAClB,MAAOA,EAAA,MAAM,YACb,SAAU,EAAQA,EAAA,MAAM,YACxB,YAAWA,EAAA,MAAM,WAAaA,EAAA,MAAM,mEAEvCF,EAuBM,MAvBNuD,GAuBM,CAtBJvD,EAkBE,QAAA,CAjBC,GAAIE,EAAA,MAAM,WACV,KAAMA,EAAA,MAAM,WACb,KAAK,OACJ,MAAOA,EAAA,WACP,uBAAOmJ,EAAAA,MAAK,oBAAsBpE,EAAO,OAAO,KAAK,GACrD,sBAAMoE,EAAAA,MAAK,UAAA,GACX,SAAUnJ,EAAA,MAAM,YAChB,SAAUA,EAAA,MAAM,UAChB,SAAUA,EAAA,MAAM,UACjB,SAAM,oFAAmF,CAC7B,uCAAAA,EAAA,YAAU,CAAKA,EAAA,iBAAe,CAAKA,EAAA,MAAM,+CAA2DA,EAAA,gBAA2E,+CAAAA,EAAA,MAAM,UAAgF,yDAAA,CAAAA,EAAA,MAAM,aAMtU,YAAaA,EAAA,yBAELA,EAAA,MAAXJ,IAAAC,EAEM,MAFN4D,GAEM,CADJ3D,EAAiD,OAAA,CAA3C,UAAQE,EAAA,KAAM,MAAM,0CAG9BoE,EAAwEgF,EAAA,CAA3D,MAAOpJ,EAAA,gBAAkB,YAAaA,EAAA,MAAM,+WC/B3DJ,EAAA,EAAAC,EAuBM,MAvBNuD,GAuBM,CAtBJgB,EAKEkF,GAAA,CAJC,aAAYtJ,EAAA,MAAM,WAClB,MAAOA,EAAA,MAAM,YACb,SAAU,EAAQA,EAAA,MAAM,YACxB,YAAWA,EAAA,MAAM,WAAaA,EAAA,MAAM,mEAEvCF,EAcY,WAAA,CAbT,GAAIE,EAAA,MAAM,WACV,KAAMA,EAAA,MAAM,WACZ,MAAOA,EAAA,WACP,uBAAOmJ,EAAAA,MAAK,oBAAsBpE,EAAO,OAAO,KAAK,GACrD,sBAAMoE,EAAAA,MAAK,UAAA,GACX,SAAUnJ,EAAA,MAAM,YACjB,KAAK,IACL,SAAM,oJAAmJ,CAC/F,uCAAAA,EAAA,aAAeA,EAAA,qDAA+DA,EAAA,mBAIvI,YAAaA,EAAA,yBAEhBoE,EAAwEgF,EAAA,CAA3D,MAAOpJ,EAAA,gBAAkB,YAAaA,EAAA,MAAM,2WCwH7D,MAAMD,EAAQC,EAWRC,EAAOC,EAEPyM,EAAY/L,EAAS,CAC1B,IAAK,IAAMb,EAAM,WACjB,IAAMc,GAAUZ,EAAK,oBAAqBY,CAAK,CAChD,CAAC,EAGK+L,EAAgBhM,EAAS,IACvBb,EAAM,OAAO,OAAQ8M,GAAU,OAErC,MAAMC,IAAgB/L,EAAA8L,EAAM,sBAAN,YAAA9L,EAA2B,gBAAiB,GAS5DgM,EARkB,CACvB,UACA,sBACA,oBACA,mBACA,kBACA,cACH,EAC6C,SAASD,CAAa,EAC3DE,EAAyB,CAC9B,WACA,eACA,WACA,OACA,SACA,WACA,aACH,EAGE,OAAID,GACyBhN,EAAM,OAAO,KACvCkN,GACAA,EAAE,sBAAwBJ,EAAM,qBAChCI,EAAE,aAAe,cACtB,GAKID,EAAuB,SAASH,EAAM,UAAU,EAEzC,GAIFK,GAAeL,EAAOF,EAAU,KAAK,CAC7C,CAAC,CACD,EAGKQ,EAAkBN,GAAU,WAEjC,MAAMO,IAAYrM,EAAA8L,EAAM,aAAN,YAAA9L,EAAkB,gBAAiB,GAC/CsM,IAAatB,EAAAc,EAAM,cAAN,YAAAd,EAAmB,gBAAiB,GACjDe,IAAgBQ,EAAAT,EAAM,sBAAN,YAAAS,EAA2B,gBAAiB,GAG5DC,EAAoB,CACzB,eACA,SACA,sBACA,mBACA,eACA,kBACA,mBACF,EACOC,EAAkB,CACvB,UACA,sBACA,oBACA,mBACA,kBACA,cACF,EACOC,EAAgB,CACrB,sBACA,mBACA,eACA,kBACA,oBACA,wBACA,gBACF,EAMC,OACEF,EAAkB,SAASH,CAAS,GAAKP,EAAM,aAAe,QAC9DW,EAAgB,SAASV,CAAa,IACrCM,IAAc,gBAAkBA,IAAc,WAC/CP,EAAM,aAAe,QACrBY,EAAc,KAAMC,GAAUL,EAAW,SAASK,CAAK,CAAC,GACxDb,EAAM,aAAe,QACrB,CAACQ,EAAW,SAAS,KAAK,GAC1B,CAACA,EAAW,SAAS,QAAQ,CAEhC,EAGMM,EAAkBd,GAAU,OACjC,GAAIA,EAAM,YAAa,OAAOA,EAAM,YAGpC,MAAMa,IAAQ3M,EAAA8L,EAAM,cAAN,YAAA9L,EAAmB,gBAAiB,GAElD,OAAI2M,EAAM,SAAS,MAAM,EAAU,uBAC/BA,EAAM,SAAS,OAAO,EAAU,yBAEnCA,EAAM,SAAS,OAAO,GACtBA,EAAM,SAAS,QAAQ,GACvBA,EAAM,SAAS,SAAS,EAEjB,sBAEJA,EAAM,SAAS,KAAK,EAAU,WAC9BA,EAAM,SAAS,YAAY,EAAU,gBACrCA,EAAM,SAAS,QAAQ,GAAKA,EAAM,SAAS,QAAQ,EAAU,cAE1D,SAASb,EAAM,WAAW,EAClC,EAGMe,EAAgBf,GAAU,OAC/B,MAAMa,IAAQ3M,EAAA8L,EAAM,cAAN,YAAA9L,EAAmB,gBAAiB,GAElD,OAAI2M,EAAM,SAAS,OAAO,EAClB,6QAGPA,EAAM,SAAS,OAAO,GACtBA,EAAM,SAAS,QAAQ,GACvBA,EAAM,SAAS,SAAS,EAEjB,qXAEJA,EAAM,SAAS,MAAM,EACjB,mOAGD,IACR,EAGMG,EAAoBC,GACpBA,EACEA,EACL,MAAM;AAAA,CAAI,EACV,IAAKC,GAAQA,EAAI,KAAI,CAAE,EACvB,OAAO,OAAO,EAJW,CAAA,EAStB,CACL,OAAQC,EACR,oBAAAC,EACA,gBAAAC,CACD,EAAIC,GAAiB,EAGfC,EAAyBvB,GAAU,CACxC,GAAI,CAACA,EAAM,YAAc,CAACA,EAAM,YAAa,CAE5CqB,EAAgBrB,EAAM,UAAU,EAChC,MACD,CAEA,MAAMhM,EAAQ8L,EAAU,MAAME,EAAM,UAAU,EAC9CoB,EAAoBpB,EAAM,WAAYhM,EAAOgM,EAAOF,EAAU,KAAK,CACpE,EAGM0B,EAAsBjB,GACpBY,EAAiB,MAAMZ,CAAS,GAAK,GAIvCkB,EAAgBlB,GAAc,CACnC,MAAMvM,EAAQ8L,EAAU,MAAMS,CAAS,EAEvC,OAAI,MAAM,QAAQvM,CAAK,EAAUA,EAE5BA,EAED,OAAOA,GAAU,SACb,CACN,CACC,SAAUA,EACV,KAAMA,EAAM,MAAM,GAAG,EAAE,IAAG,EAC1B,QAASA,CACb,CACA,EAEQ,CAAA,EAXY,CAAA,CAYpB,EAGM0N,EAAkB,CAACnB,EAAWoB,IAAc,CAQjD,GAPA,QAAQ,IACP,iDACApB,EACAoB,CACF,EAGK,MAAM,QAAQA,CAAS,GAAKA,EAAU,OAAS,EAAG,CAErD,MAAMC,EAAgBD,EAAU,OAAQ,GAAM,EAAE,QAAQ,EACxD,GAAIC,EAAc,OAAS,EAAG,CAE7B,MAAMC,EAAUD,EAAc,CAAC,EAAE,SACjC,QAAQ,IACP,0DACAC,CACJ,EACG/B,EAAU,MAAMS,CAAS,EAAIsB,EAC7B,MACD,CACD,CAGA/B,EAAU,MAAMS,CAAS,EAAIoB,CAC9B,EAGMG,EAA2B,CAAO1M,EAAU2M,IAAoB1N,EAAA,sBACrE,QAAQ,IACP,+DACAe,CACF,EAEC,GAAI,CACH,QAAQ,IAAI,+CAAgDA,EAAS,IAAI,EAEzE,MAAM4M,EAAW,IAAI,SACrBA,EAAS,OAAO,OAAQ5M,EAAS,IAAI,EACrC4M,EAAS,OAAO,aAAc,GAAG,EACjCA,EAAS,OAAO,SAAU,kBAAkB,EAE5C,QAAQ,IACP,gEACH,EAGE,MAAMC,EAAW,MAAM,MAAM,0BAA2B,CACvD,OAAQ,OACR,YAAa,UACb,QAAS,CACR,sBAAuB,OAAO,UAClC,EACG,KAAMD,CACT,CAAG,EAOD,GALA,QAAQ,IACP,iDACAC,EAAS,MACZ,EAEM,CAACA,EAAS,GAAI,CACjB,MAAMC,EAAY,MAAMD,EAAS,KAAI,EACrC,cAAQ,MAAM,wCAAyCC,CAAS,EAC1D,IAAI,MAAM,kBAAkBD,EAAS,MAAM,MAAMC,CAAS,EAAE,CACnE,CAEA,MAAMtG,EAAS,MAAMqG,EAAS,KAAI,EAClC,QAAQ,IAAI,0CAA2CrG,CAAM,EAEzDA,EAAO,SAAWA,EAAO,QAAQ,WAEpC,QAAQ,IACP,qDACAA,EAAO,QAAQ,QACnB,EAGGxG,EAAS,SAAWwG,EAAO,QAAQ,SACnCxG,EAAS,UAAYwG,EAAO,QAAQ,UAEpC,QAAQ,IAAI,2CAA4CxG,CAAQ,GAIjE,QAAQ,IAAI,kDAAkD,EAC9D2M,EAAe,EAEf,QAAQ,IAAI,2DAA2D,CACxE,OAASzM,EAAO,CACf,QAAQ,MAAM,4CAA6CA,CAAK,EAChE,MAAM,0BAA0BA,EAAM,OAAO,EAAE,EAG/C,QAAQ,IAAI,8DAA8D,EAC1EyM,EAAe,CAChB,CACD,GAGA,OAAArI,EACC,IAAMoG,EAAU,MACfqC,GAAY,CAEZ,OAAO,QAAQA,CAAO,EAAE,QAAQ,CAAC,CAACC,EAAKpO,CAAK,IAAM,CACjD,GAAI,MAAM,QAAQA,CAAK,GAAKA,EAAM,OAAS,GAAKA,EAAM,CAAC,EAAE,SAAU,CAGlE,MAAMqO,EAAWrO,EAAM,IAAKoM,GAAMA,EAAE,QAAQ,EAAE,OAAO,OAAO,EACxDiC,EAAS,OAAS,IAGrBvC,EAAU,MAAMsC,CAAG,EAAIC,EAAS,SAAW,EAAIA,EAAS,CAAC,EAAIA,EAC7D,QAAQ,IACP,0DAA0DD,CAAG,IAC7DtC,EAAU,MAAMsC,CAAG,CACzB,EAEG,CACD,CAAC,CACF,EACA,CAAE,KAAM,EAAI,CACb,EAGA1I,EACC,IAAMxG,EAAM,OACXoP,GAAW,CACXA,EAAO,QAAStC,GAAU,CACrBA,EAAM,eAAiB,CAACF,EAAU,MAAME,EAAM,UAAU,IACvDA,EAAM,gBAAkB,SAAWA,EAAM,aAAe,OAC3DF,EAAU,MAAME,EAAM,UAAU,EAAI,IAAI,KAAI,EAC1C,YAAW,EACX,MAAM,GAAG,EAAE,CAAC,EAEdF,EAAU,MAAME,EAAM,UAAU,EAAIA,EAAM,cAG7C,CAAC,CACF,EACA,CAAE,UAAW,EAAI,CAClB,UAhfEjN,EAAA,EAAAC,EA2HM,MA3HNuD,GA2HM,QA1HJvD,EAyHMyE,EAAA,KAAAC,EAzHeqI,EAAA,MAATC,QAAZhN,EAyHM,MAAA,CAzH+B,IAAKgN,EAAM,WAAY,MAAM,kBAErDM,EAAeN,CAAK,GAA/BjN,IAAAC,EAMM,MANNwD,GAMM,CALJe,EAIEgL,GAAA,YAHSzC,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,MAAO8H,EAAM,YACb,SAAU,EAAQA,EAAM,gFAMhBA,EAAM,aAAU,YAD7B7H,EAQEqK,GAAA,OANC,MAAOxC,aACCF,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,mBAAkBsJ,EAAmBxB,EAAM,UAAU,EACrD,YAAac,EAAed,CAAK,EACjC,KAAMe,EAAaf,CAAK,EACxB,WAAQ9H,GAAEqJ,EAAsBvB,CAAK,8GAK3BA,EAAM,aAAU,cAD7B7H,EAOEsK,GAAA,OALC,MAAOzC,aACCF,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,mBAAkBsJ,EAAmBxB,EAAM,UAAU,EACrD,QAASgB,EAAiBhB,EAAM,OAAO,EACvC,WAAQ9H,GAAEqJ,EAAsBvB,CAAK,mGAK3BA,EAAM,aAAU,aAD7B7H,EAMEuK,GAAA,OAJC,MAAO1C,aACCF,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,mBAAkBsJ,EAAmBxB,EAAM,UAAU,EACrD,WAAQ9H,GAAEqJ,EAAsBvB,CAAK,yIAKwB,SAASA,EAAM,UAAU,OADzF7H,EAOEwK,GAAA,OALC,MAAO3C,aACCF,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,mBAAkBsJ,EAAmBxB,EAAM,UAAU,EACrD,YAAac,EAAed,CAAK,EACjC,WAAQ9H,GAAEqJ,EAAsBvB,CAAK,uGAK3BA,EAAM,aAAU,YAD7B7H,EAMEyK,GAAA,OAJC,MAAO5C,aACCF,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,mBAAkBsJ,EAAmBxB,EAAM,UAAU,EACrD,WAAQ9H,GAAEqJ,EAAsBvB,CAAK,yFAK3BA,EAAM,aAAU,WAD7B7H,EAQE0K,GAAA,OANC,MAAO7C,aACCF,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,mBAAkBsJ,EAAmBxB,EAAM,UAAU,EACrD,YAAac,EAAed,CAAK,EAClC,QAAQ,MACP,WAAQ9H,GAAEqJ,EAAsBvB,CAAK,uGAK3BA,EAAM,aAAU,aAD7B7H,EAQE0K,GAAA,OANC,MAAO7C,aACCF,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,mBAAkBsJ,EAAmBxB,EAAM,UAAU,EACrD,YAAac,EAAed,CAAK,EAClC,QAAQ,QACP,WAAQ9H,GAAEqJ,EAAsBvB,CAAK,uGAK3BA,EAAM,aAAU,gBAD7B7H,EAOE0K,GAAA,OALC,MAAO7C,aACCF,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,mBAAkBsJ,EAAmBxB,EAAM,UAAU,EACtD,QAAQ,WACP,WAAQ9H,GAAEqJ,EAAsBvB,CAAK,yFAIxBA,EAAM,aAAU,UAAiBA,EAAM,aAAU,gBAAjEjN,IAAAC,EAUM,MAVNyD,GAUM,CATJc,EAQEuL,GAAA,CAPC,MAAO9C,EAAM,YACb,SAAUA,EAAM,YAChB,OAAQA,EAAM,aAAU,eAAA,UAAA,IACxB,SAAU,GACV,WAAYyB,EAAazB,EAAM,UAAU,EACzC,yBAAmB0B,EAAgB1B,EAAM,WAAY9H,CAAM,EAC3D,SAAQ4J,+EAMA9B,EAAM,aAAU,uBAD7B7H,EAQE4K,GAAA,QANC,MAAO/C,aACCF,EAAA,MAAUE,EAAM,UAAU,2BAA1BF,EAAA,MAAUE,EAAM,UAAU,EAAA9H,EAClC,YAAW8H,EAAM,WAAS,WAC1B,mBAAkBA,EAAM,kBAAgB,SACxC,mBAAkBwB,EAAmBxB,EAAM,UAAU,EACrD,WAAQ9H,GAAEqJ,EAAsBvB,CAAK,yHAIxCjN,IAAAC,EAIM,MAJN4D,GAIM,CAHJ3D,EAEM,MAFN4D,GAA0C,gBAC5BF,EAAGqJ,EAAM,UAAU,EAAG,2BAAwBrJ,EAAGqJ,EAAM,WAAW,EAAA,CAAA,29BCXxF,MAAM9M,EAAQC,EAeRC,EAAOC,EAEPyM,EAAY/L,EAAS,CAC1B,IAAK,IAAMb,EAAM,WACjB,IAAMc,GAAUZ,EAAK,oBAAqBY,CAAK,CAChD,CAAC,EAEKgP,EAAkBjP,EAAS,IAC3Bb,EAAM,WAAW,SAGfA,EAAM,WAAW,SAAS,OAAQ+P,GAAY,CACpD,GAAI,CAACA,EAAQ,WAAY,MAAO,GAChC,GAAI,CACH,OAAOC,GAAiBD,EAASnD,EAAU,KAAK,CACjD,OAASxK,EAAO,CACf,eAAQ,MACP,2CAA2C2N,EAAQ,YAAY,IAC/D3N,CACJ,EACU,EACR,CACD,CAAC,EAdsC,CAAA,CAevC,EAGK6N,EAAqBF,GAGnB,CAACA,EAAQ,aAAa,EAI9B,OAAAvJ,EACC,IAAMxG,EAAM,WACXkQ,GAAW,CACNA,EAAO,UAEZA,EAAO,SAAS,QAASH,GAAY,CACpCA,EAAQ,OAAO,QAASjD,GAAU,CACjC,GAAIA,EAAM,eAAiB,CAACF,EAAU,MAAME,EAAM,UAAU,EAAG,CAE9D,MAAMqD,EAAe5J,EAAA,GAAKqG,EAAU,OAEhCE,EAAM,gBAAkB,SAAWA,EAAM,aAAe,OAC3DqD,EAAarD,EAAM,UAAU,EAAI,IAAI,KAAI,EACvC,YAAW,EACX,MAAM,GAAG,EAAE,CAAC,EAEdqD,EAAarD,EAAM,UAAU,EAAIA,EAAM,cAIxC5M,EAAK,oBAAqBiQ,CAAY,CACvC,CACD,CAAC,CACF,CAAC,CACF,EACA,CAAE,UAAW,GAAM,KAAM,EAAI,CAC9B,UAtLAtQ,EAAA,EAAAC,EAyFU,MAzFVuD,GAyFU,CAxFNtD,EAYM,MAZNuD,GAYM,CAXFvD,EAUM,MAVNwD,GAUM,aATFxD,EAIM,MAAA,CAJD,MAAM,iBAAe,CACtBA,EAEM,MAAA,CAFD,MAAM,wBAAwB,KAAK,OAAO,OAAO,eAAe,QAAQ,cACzEA,EAAgM,OAAA,CAA1L,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,iIAGhFA,EAGM,MAHN2D,GAGM,CAFF3D,EAA6E,KAA7E4D,GAA6EF,EAA7BxD,EAAA,WAAW,UAAU,EAAA,CAAA,EAC5DA,EAAA,qBAATH,EAAsF,IAAtF8D,GAAsFH,EAAtBxD,EAAA,eAAe,EAAA,CAAA,kBAK3FF,EAyEM,MAzEN4G,GAyEM,QAxEF7G,EAuEMyE,EAAA,KAAAC,EAvEiBsL,EAAA,MAAXC,QAAZjQ,EAuEM,MAAA,CAvEmC,IAAKiQ,EAAQ,aAAc,MAAM,YACtEhQ,EAoBM,MApBN8G,GAoBM,CAnBF9G,EAeM,MAfN+D,GAeM,aAdF/D,EAIM,MAAA,CAJD,MAAM,sFAAoF,CAC3FA,EAEM,MAAA,CAFD,MAAM,wBAAwB,KAAK,OAAO,OAAO,eAAe,QAAQ,cACzEA,EAA2M,OAAA,CAArM,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,4IAGhFA,EAQM,MAAA,KAAA,CAPFA,EAGK,KAHLgE,GAGK,KAFEgM,EAAQ,aAAa,EAAG,IAC3B,CAAA,EAAYA,EAAQ,iBAApBjQ,EAAmE,OAAnE+I,GAA2D,GAAC,cAEvDkH,EAAQ,qBAAjBlQ,EAAA,EAAAC,EAEI,IAFJkE,GAEIP,EADGsM,EAAQ,mBAAmB,EAAA,CAAA,gBAI/BA,EAAQ,aAAnBlQ,IAAAC,EAEM,MAFNmE,GAEM,CAAA,GAAArE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFmE,2BAC9C,EAAA,EAAAG,EAAmC,OAAA,CAA7B,MAAM,cAAc,EAAC,IAAC,EAAA,IAAO,iBAC9D,EAAA,kBAGJA,EA+CM,MA/CNmE,GA+CM,CA9Cc6L,EAAQ,eAAY,WAApC9K,EAoBWsG,EAAA6E,EAAA,EAAA,CAAA,IAAA,GAAA,WAnBP,IAUU,CAVV/L,EAUUkH,EAAA8E,EAAA,EAAA,CAVD,MAAM,mDAAmD,EAAA,WAE1D,IAAgD,EADpDxQ,EAAA,EAAA,EAAAC,EAQMyE,SAPmB0L,EAAkBF,CAAO,EAAA,CAAtCO,EAAKC,SADjBtL,EAQMsG,EAAAiF,EAAA,EAAA,CAND,IAAKD,EAEN,MAAK1M,EAAA,CAAC,qKACE4M,EAAAA,SAAQ,kBAAA,sDAAA,CAAA,IAEhB,QAAAC,EAAA,CAAS,CAJC,SAAAD,KAAQ,KAIfH,CAAG,EAAA,CAAA,8CAGdjM,EAOYkH,EAAAoF,EAAA,EAAA,KAAA,WANE,IAAgD,EAA1D9Q,EAAA,EAAA,EAAAC,EAKWyE,SALoB0L,EAAkBF,CAAO,EAAA,CAAtCO,EAAKC,SAAvBtL,EAKWsG,EAAAqF,EAAA,EAAA,CALiD,IAAKL,GAAG,WAChE,IAGE,CAHFlM,EAGEwM,GAAA,CAFG,OAAQd,EAAQ,kBACRnD,EAAA,2CAAAA,EAAS,MAAA5H,oFAMX+K,EAAQ,eAAY,iBAA3C9K,EAgBasG,EAAAuF,EAAA,EAAA,CAAA,IAAA,GAAA,CAfT,QAAAJ,EAAA,CAQmB,CATgD,KAAAK,KAAI,CACvE1M,EAQmBkH,EAAAyF,EAAA,EAAA,CAPf,MAAM,gOAAgO,EAAA,WAEtO,IAAwC,CAAxCjR,EAAwC,OAAA,KAAA0D,EAA/BsM,EAAQ,aAAa,EAAA,CAAA,EAC9B1L,EAGEkH,EAAA0F,EAAA,EAAA,CAFG,MAAKpN,EAAA,CAAEkN,EAAI,uBAAA,GACN,uBAAuB,CAAA,kCAGrC1M,EAKkBkH,EAAA2F,EAAA,EAAA,CALD,MAAM,sCAAsC,EAAA,WACzD,IAGE,CAHF7M,EAGEwM,GAAA,CAFG,OAAQd,EAAQ,kBACRnD,EAAA,2CAAAA,EAAS,MAAA5H,gEAK9BnF,IAAAC,EAKM,MALNqE,GAKM,CAJFE,EAGEwM,GAAA,CAFG,OAAQd,EAAQ,kBACRnD,EAAA,2CAAAA,EAAS,MAAA5H","x_google_ignoreList":[0]}