const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Landing-DaY6Dx8K.js","assets/frappe-ui-D6fYUZUl.js","assets/vue-vendor-B0shnPjy.js","assets/ui-components-CzNebsXy.js","assets/frappe-ui-BcYQ_VTL.css","assets/Landing-tn0RQdqM.css","assets/Dashboard-B-ZH6b3g.js","assets/StatCard-DF8I1501.js","assets/request.service--9QsRanG.js","assets/Home-EL5OLYQ_.js","assets/NewRequest-BYM9JvBI.js","assets/RequestHeader-CFcOgVuT.js","assets/NewRequest-Bx6WP1Fs.css","assets/RequestDetail-D3al3v1m.js","assets/StatusBadge-BSS5uEy_.js","assets/useStatutoryClock-BB4WEBrO.js","assets/InternalRequestManagement-ynUXJfPf.js","assets/InternalRequestDetail-wybnd-Kc.js","assets/Settings-DgTpuiNB.js","assets/RequestTypeBuilder-DEtycvl1.js","assets/AssessmentTemplateBuilder-Doh5R2ul.js","assets/CompanyManagement--H5M5gAS.js","assets/Login-BBWOy7bi.js","assets/Register-CCvrshlV.js","assets/validation-BM66J_x1.js","assets/CompanyRegistration-BQ4mb9gK.js"])))=>i.map(i=>d[i]);
var h=(e,t,o)=>new Promise((n,r)=>{var i=s=>{try{l(o.next(s))}catch(u){r(u)}},a=s=>{try{l(o.throw(s))}catch(u){r(u)}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,a);l((o=o.apply(e,t)).next())});import{am as ie,c,w as ce,D as le,ac as ae,a as se,o as ue,R as pe,z as me,an as de,ao as fe,ah as _e,ap as ge}from"./vue-vendor-B0shnPjy.js";import{c as B,a as G,_ as p,l as he,s as ye,r as ve,p as Ce,b as Te,d as Pe,D as Ee,e as Ae,f as Se,I as De,g as ke,h as Ie,i as be}from"./frappe-ui-D6fYUZUl.js";import"./ui-components-CzNebsXy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();const we=ie("siteCouncil",{state:()=>({council:null,requestTypes:[],loading:!1,error:null,lastFetched:null}),getters:{councilData:e=>e.council,isLoaded:e=>!!e.council,availableRequestTypes:e=>e.requestTypes,branding:e=>{var t,o,n,r,i,a,l,s,u,f,d,_,m,C,E,A,S,D,k,I,b,w,R,L,O,N,$,F,q;return{primaryColor:((t=e.council)==null?void 0:t.primary_color)||"#2563EB",secondaryColor:((o=e.council)==null?void 0:o.secondary_color)||"#1E40AF",accentColor:((n=e.council)==null?void 0:n.accent_color)||"#059669",appName:((r=e.council)==null?void 0:r.app_name)||null,councilName:((i=e.council)==null?void 0:i.council_name)||"Council",tagline:((a=e.council)==null?void 0:a.tagline)||null,logo:((l=e.council)==null?void 0:l.logo)||null,favicon:((s=e.council)==null?void 0:s.favicon)||null,heroTitle:((u=e.council)==null?void 0:u.hero_title)||null,heroSubtitle:((f=e.council)==null?void 0:f.hero_subtitle)||null,heroDescription:((d=e.council)==null?void 0:d.hero_description)||null,heroImage:((_=e.council)==null?void 0:_.hero_image)||null,ctaPrimaryText:((m=e.council)==null?void 0:m.cta_primary_text)||"Get Started",ctaSecondaryText:((C=e.council)==null?void 0:C.cta_secondary_text)||"Learn More",feature1Title:((E=e.council)==null?void 0:E.feature_1_title)||null,feature1Description:((A=e.council)==null?void 0:A.feature_1_description)||null,feature2Title:((S=e.council)==null?void 0:S.feature_2_title)||null,feature2Description:((D=e.council)==null?void 0:D.feature_2_description)||null,feature3Title:((k=e.council)==null?void 0:k.feature_3_title)||null,feature3Description:((I=e.council)==null?void 0:I.feature_3_description)||null,feature4Title:((b=e.council)==null?void 0:b.feature_4_title)||null,feature4Description:((w=e.council)==null?void 0:w.feature_4_description)||null,footerTagline:((R=e.council)==null?void 0:R.footer_tagline)||null,supportEmail:((L=e.council)==null?void 0:L.support_email)||null,supportPhone:((O=e.council)==null?void 0:O.support_phone)||null,footerAddress:((N=e.council)==null?void 0:N.footer_address)||null,website:(($=e.council)==null?void 0:$.website)||null,contactEmail:((F=e.council)==null?void 0:F.contact_email)||null,contactPhone:((q=e.council)==null?void 0:q.contact_phone)||null}},meetingConfig:e=>{var t,o,n,r;return{defaultDuration:((t=e.council)==null?void 0:t.default_meeting_duration)||60,availableDurations:((n=(o=e.council)==null?void 0:o.available_meeting_durations)==null?void 0:n.split(",").map(i=>Number.parseInt(i.trim())))||[30,60,90],bufferTime:((r=e.council)==null?void 0:r.meeting_buffer_time)||15}}},actions:{loadCouncil(e=!1){return h(this,null,function*(){const o=Date.now();if(!e&&this.council&&this.lastFetched&&o-this.lastFetched<3e5){console.log("[siteCouncil] Using cached council data");return}this.loading=!0,this.error=null;try{console.log("[siteCouncil] Fetching council data..."),this.council=yield B("councilsonline.api.get_council"),this.requestTypes=yield B("councilsonline.api.get_request_types"),this.lastFetched=o,console.log(`[siteCouncil] Loaded: ${this.council.council_name}`),console.log(`[siteCouncil] Request Types: ${this.requestTypes.length}`)}catch(n){throw console.error("[siteCouncil] Failed to load council data:",n),this.error=n.message||"Failed to load council data",n}finally{this.loading=!1}})},reload(){return h(this,null,function*(){return this.loadCouncil(!0)})},clearCache(){this.council=null,this.requestTypes=[],this.lastFetched=null,console.log("[siteCouncil] Cache cleared")}}});function Z(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function V(e,t){const o=Z(e);if(!o)return e;const n=1-t/100,r=Math.round(o.r*n),i=Math.round(o.g*n),a=Math.round(o.b*n);return`#${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`}function z(e,t){const o=Z(e);if(!o)return e;const n=t/100,r=Math.round(o.r+(255-o.r)*n),i=Math.round(o.g+(255-o.g)*n),a=Math.round(o.b+(255-o.b)*n);return`#${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`}function x(e){const t=document.documentElement;e.primaryColor&&(t.style.setProperty("--color-primary",e.primaryColor),t.style.setProperty("--color-primary-hover",V(e.primaryColor,15)),t.style.setProperty("--color-primary-light",z(e.primaryColor,85)),t.style.setProperty("--color-primary-dark",V(e.primaryColor,25))),e.secondaryColor&&(t.style.setProperty("--color-secondary",e.secondaryColor),t.style.setProperty("--color-secondary-hover",V(e.secondaryColor,15)),t.style.setProperty("--color-secondary-light",z(e.secondaryColor,85))),e.accentColor&&(t.style.setProperty("--color-accent",e.accentColor),t.style.setProperty("--color-accent-hover",V(e.accentColor,15)),t.style.setProperty("--color-accent-light",z(e.accentColor,85)))}function J(e){if(!e)return;let t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.head.appendChild(t)),t.href=e}function H(e){if(e){const t=document.title;(t==="CouncilsOnline"||t==="Loading...")&&(document.title=e)}}function Re(){const e=we(),t=c(()=>e.branding),o=c(()=>t.value.appName||t.value.councilName||"CouncilsOnline"),n=c(()=>t.value.councilName||"Council"),r=c(()=>t.value.tagline||""),i=c(()=>t.value.logo||null),a=c(()=>t.value.favicon||null),l=c(()=>t.value.primaryColor),s=c(()=>t.value.secondaryColor),u=c(()=>t.value.accentColor),f=c(()=>t.value.heroTitle||null),d=c(()=>t.value.heroSubtitle||null),_=c(()=>t.value.heroDescription||null),m=c(()=>t.value.heroImage||null),C=c(()=>t.value.ctaPrimaryText||"Get Started"),E=c(()=>t.value.ctaSecondaryText||"Learn More"),A=c(()=>t.value.feature1Title||null),S=c(()=>t.value.feature1Description||null),D=c(()=>t.value.feature2Title||null),k=c(()=>t.value.feature2Description||null),I=c(()=>t.value.feature3Title||null),b=c(()=>t.value.feature3Description||null),w=c(()=>t.value.feature4Title||null),R=c(()=>t.value.feature4Description||null),L=c(()=>t.value.footerTagline||null),O=c(()=>t.value.supportEmail||t.value.contactEmail||null),N=c(()=>t.value.supportPhone||t.value.contactPhone||null),$=c(()=>t.value.footerAddress||null),F=c(()=>t.value.website||null),q=c(()=>t.value.contactEmail||null),ne=c(()=>t.value.contactPhone||null);ce(t,g=>{g&&(x(g),J(g.favicon),H(g.appName||g.councilName))},{immediate:!0,deep:!0});function re(){return h(this,null,function*(){try{yield e.loadCouncil(),e.branding&&(x(e.branding),J(e.branding.favicon),H(e.branding.appName||e.branding.councilName))}catch(g){console.warn("Failed to load council branding:",g)}})}return{branding:t,appName:o,councilName:n,tagline:r,logo:i,favicon:a,primaryColor:l,secondaryColor:s,accentColor:u,heroTitle:f,heroSubtitle:d,heroDescription:_,heroImage:m,ctaPrimaryText:C,ctaSecondaryText:E,feature1Title:A,feature1Description:S,feature2Title:D,feature2Description:k,feature3Title:I,feature3Description:b,feature4Title:w,feature4Description:R,footerTagline:L,supportEmail:O,supportPhone:N,footerAddress:$,website:F,contactEmail:q,contactPhone:ne,initTheme:re,applyCssVariables:x,councilStore:e,isLoading:c(()=>e.isLoading),council:c(()=>e.council)}}const Le={__name:"App",setup(e){const{initTheme:t}=Re();return le(()=>{t()}),(o,n)=>{const r=ae("router-view");return ue(),se("div",null,[pe(r)])}}},K=G({url:"frappe.auth.get_logged_user",cache:"User",onError(e){e&&e.exc_type==="AuthenticationError"&&P.push({name:"LoginPage"})}});function U(){let t=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return t==="Guest"&&(t=null),t}const T=me({login:G({url:"login",makeParams({email:e,password:t}){return{usr:e,pwd:t}},onSuccess(){return h(this,null,function*(){K.reload(),T.user=U(),T.login.reset();try{yield B("councilsonline.api.track_login_event",{source:"web"})}catch(e){console.error("Failed to track login event:",e)}P.replace({name:"Dashboard"})})}}),logout:G({url:"logout",onSuccess(){K.reset(),T.user=U(),P.replace({name:"Login"})}}),user:U(),isLoggedIn:c(()=>!!T.user)}),Oe=[{path:"/",name:"Landing",component:()=>p(()=>import("./Landing-DaY6Dx8K.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{public:!0}},{path:"/dashboard",name:"Dashboard",component:()=>p(()=>import("./Dashboard-B-ZH6b3g.js"),__vite__mapDeps([6,2,1,3,4,7,8]))},{path:"/home",name:"Home",component:()=>p(()=>import("./Home-EL5OLYQ_.js"),__vite__mapDeps([9,1,2,3,4]))},{path:"/request/new",name:"NewRequest",component:()=>p(()=>import("./NewRequest-BYM9JvBI.js").then(e=>e.N),__vite__mapDeps([10,1,2,3,4,8,11,12])),meta:{public:!0}},{path:"/request/:id",name:"RequestDetail",component:()=>p(()=>import("./RequestDetail-D3al3v1m.js"),__vite__mapDeps([13,1,2,3,4,14,11,15]))},{path:"/internal",name:"InternalRequestManagement",component:()=>p(()=>import("./InternalRequestManagement-ynUXJfPf.js"),__vite__mapDeps([16,2,1,3,4,7,14]))},{path:"/internal/request/:id",name:"InternalRequestDetail",component:()=>p(()=>import("./InternalRequestDetail-wybnd-Kc.js"),__vite__mapDeps([17,1,2,3,4,14,11,15]))},{path:"/settings",name:"Settings",component:()=>p(()=>import("./Settings-DgTpuiNB.js"),__vite__mapDeps([18,2,1,3,4]))},{path:"/admin/request-type-builder",name:"RequestTypeBuilder",component:()=>p(()=>import("./RequestTypeBuilder-DEtycvl1.js"),__vite__mapDeps([19,1,2,3,4])),meta:{requiresAdmin:!0}},{path:"/admin/assessment-template-builder",name:"AssessmentTemplateBuilder",component:()=>p(()=>import("./AssessmentTemplateBuilder-Doh5R2ul.js"),__vite__mapDeps([20,2,1,3,4])),meta:{requiresAdmin:!0}},{path:"/admin/assessment-template-builder/:id",name:"AssessmentTemplateBuilderEdit",component:()=>p(()=>import("./AssessmentTemplateBuilder-Doh5R2ul.js"),__vite__mapDeps([20,2,1,3,4])),meta:{requiresAdmin:!0}},{path:"/company",name:"CompanyManagement",component:()=>p(()=>import("./CompanyManagement--H5M5gAS.js"),__vite__mapDeps([21,2,1,3,4]))},{name:"Login",path:"/account/login",component:()=>p(()=>import("./Login-BBWOy7bi.js"),__vite__mapDeps([22,2,1,3,4])),meta:{public:!0}},{name:"Register",path:"/account/register",component:()=>p(()=>import("./Register-CCvrshlV.js"),__vite__mapDeps([23,2,1,3,4,24])),meta:{public:!0}},{name:"CompanyRegistration",path:"/account/register-company",component:()=>p(()=>import("./CompanyRegistration-BQ4mb9gK.js"),__vite__mapDeps([25,2,1,3,4,24])),meta:{public:!0}}],P=de({history:fe("/frontend"),routes:Oe});P.beforeEach((e,t,o)=>h(void 0,null,function*(){if(e.meta.public){o();return}let n=T.isLoggedIn;try{yield K.promise}catch(r){n=!1}e.name==="Login"&&n?o({name:"Dashboard"}):e.name!=="Login"&&!n?o({name:"Login"}):o()}));const Ne=9e3;let y=null,M=!1;function $e(){if(M)return console.warn("[Socket.io] Skipping initialization - socketio server not available"),null;try{const e=window.location.hostname,t=window.site_name,o=window.location.port?`:${Ne}`:"",r=`${o?"http":"https"}://${e}${o}/${t}`;return y=he(r,{withCredentials:!0,reconnectionAttempts:3,reconnectionDelay:2e3,timeout:5e3}),y.on("connect_error",i=>{console.warn("[Socket.io] Connection failed - real-time features disabled:",i.message),M=!0,y&&(y.close(),y=null)}),y.on("connect",()=>{console.log("[Socket.io] Connected successfully"),M=!1}),y}catch(e){return console.warn("[Socket.io] Initialization error:",e),M=!0,null}}function Fe(e,t){if(e==null)return;let o=e;for(let n=0;n<t.length;n++){if(o===void 0||o[t[n]]===void 0)return;if(o===null||o[t[n]]===null)return null;o=o[t[n]]}return o}function W(e,t,o){if(o.length===0)return t;const n=o[0];return o.length>1&&(t=W(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,n)?Number.isInteger(Number(o[1]))?[]:{}:e[n],t,Array.prototype.slice.call(o,1))),Number.isInteger(Number(n))&&Array.isArray(e)?e.slice()[n]:Object.assign({},e,{[n]:t})}function j(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const o={};for(const n in e)o[n]=e[n];return delete o[t[0]],o}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const o={};for(const n in e)o[n]=e[n];return o}return W(e,j(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function ee(e,t){return t.map(o=>o.split(".")).map(o=>[o,Fe(e,o)]).filter(o=>o[1]!==void 0).reduce((o,n)=>W(o,n[1],n[0]),{})}function te(e,t){return t.map(o=>o.split(".")).reduce((o,n)=>j(o,n),e)}function Q(e,{storage:t,serializer:o,key:n,debug:r,pick:i,omit:a,beforeHydrate:l,afterHydrate:s},u,f=!0){try{f&&(l==null||l(u));const d=t.getItem(n);if(d){const _=o.deserialize(d),m=i?ee(_,i):_,C=a?te(m,a):m;e.$patch(C)}f&&(s==null||s(u))}catch(d){r&&console.error("[pinia-plugin-persistedstate]",d)}}function X(e,{storage:t,serializer:o,key:n,debug:r,pick:i,omit:a}){try{const l=i?ee(e,i):e,s=a?te(l,a):l,u=o.serialize(s);t.setItem(n,u)}catch(l){r&&console.error("[pinia-plugin-persistedstate]",l)}}function qe(e,t){return typeof e=="function"?e(t):typeof e=="string"?e:t}function Ve(e,t,o){const{pinia:n,store:r,options:{persist:i=o}}=e;if(!i)return;// v8 ignore if -- @preserve
if(!(r.$id in n.state.value)){const l=n._s.get(r.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(i)?i:i===!0?[{}]:[i]).map(t);r.$hydrate=({runHooks:l=!0}={})=>{a.forEach(s=>{Q(r,s,e,l)})},r.$persist=()=>{a.forEach(l=>{X(r.$state,l)})},a.forEach(l=>{Q(r,l,e),r.$subscribe((s,u)=>X(u,l),{detached:!0})})}function Me(e={}){return function(t){var o;Ve(t,n=>{var i,a,l,s,u,f,d,_;const r=qe(n.key,t.store.$id);return{key:(e.key?e.key:m=>m)(r),debug:(a=(i=n.debug)!=null?i:e.debug)!=null?a:!1,serializer:(s=(l=n.serializer)!=null?l:e.serializer)!=null?s:{serialize:m=>JSON.stringify(m),deserialize:m=>JSON.parse(m)},storage:(f=(u=n.storage)!=null?u:e.storage)!=null?f:window.localStorage,beforeHydrate:(d=n.beforeHydrate)!=null?d:e.beforeHydrate,afterHydrate:(_=n.afterHydrate)!=null?_:e.afterHydrate,pick:n.pick,omit:n.omit}},(o=e.auto)!=null?o:!1)}}var ze=Me();const Y={Button:Ie,TextInput:ke,Input:De,FormControl:Se,ErrorMessage:Ae,Dialog:Ee,Alert:Pe,Badge:Te},v=_e(Le),oe=ge();oe.use(ze);ye("resourceFetcher",be);v.use(oe);v.use(P);v.use(ve);v.use(Ce);function xe(){return h(this,null,function*(){if(window.csrf_token)console.log("[main.js] ✅ CSRF token loaded from boot data");else{console.log("[main.js] No boot CSRF token, trying cookies...");const t=document.cookie.split("; ").find(o=>o.startsWith("csrf_token="));if(t)window.csrf_token=t.split("=")[1],console.log("[main.js] ✅ CSRF token found in cookies");else try{if(console.log("[main.js] Fetching CSRF token from API..."),(yield fetch("/api/method/frappe.auth.get_logged_user",{credentials:"include"})).ok){const n=document.cookie.split("; ").find(r=>r.startsWith("csrf_token="));n?(window.csrf_token=n.split("=")[1],console.log("[main.js] ✅ CSRF token set after API fetch")):console.warn("[main.js] ⚠️ No CSRF token available")}}catch(o){console.error("[main.js] ❌ Could not fetch CSRF token:",o)}}const e=$e();v.config.globalProperties.$socket=e;for(const t in Y)v.component(t,Y[t]);v.mount("#app")})}xe();export{we as a,T as s,Re as u};
//# sourceMappingURL=index-DOyr9W_f.js.map
