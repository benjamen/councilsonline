var me=Object.defineProperty,pe=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var se=(t,y,n)=>y in t?me(t,y,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[y]=n,W=(t,y)=>{for(var n in y||(y={}))fe.call(y,n)&&se(t,n,y[n]);if(ne)for(var n of ne(y))ge.call(y,n)&&se(t,n,y[n]);return t},te=(t,y)=>pe(t,ve(y));var J=(t,y,n)=>new Promise((x,a)=>{var q=_=>{try{b(n.next(_))}catch(u){a(u)}},C=_=>{try{b(n.throw(_))}catch(u){a(u)}},b=_=>_.done?x(_.value):Promise.resolve(_.value).then(q,C);b((n=n.apply(t,y)).next())});import{u as ye,i as be,a as he,b as xe}from"./NewRequest-BA_RhUTC.js";import{a as r,o as l,b as e,B as D,c as z,e as w,O as L,a2 as U,t as k,n as A,aj as ue,Q as _e,R as T,P as Q,F as I,W as O,au as ke,_ as we,T as $e,D as ce,w as K,a6 as N,ak as Z,ae as X,at as Ve,r as ie,ag as Ce,u as R}from"./vue-vendor-B0shnPjy.js";import{k as le,c as Se,a as de,D as qe}from"./frappe-ui-D6fYUZUl.js";import{p as Fe,x as Be,I as Me,y as Pe,m as je,Q as De,V as Te,N as Ue}from"./ui-components-CzNebsXy.js";import"./request.service--9QsRanG.js";import"./index-C5SnhA3e.js";import"./RequestHeader-CFcOgVuT.js";function ze(t,y){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const Ae={class:"space-y-4"},Ee={class:"block"},Le={class:"text-sm font-medium text-gray-900"},Re={key:0,class:"text-red-500"},Ie={key:0,class:"text-xs text-gray-500 mt-1"},Oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ne=["disabled"],He=["disabled"],Je={class:"text-center"},Qe={class:"text-xs text-gray-500"},We=["accept","multiple"],Ge={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ke={class:"flex items-center space-x-3"},Xe={class:"flex-1"},Ye={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},Ze={key:1,class:"space-y-2"},et={class:"flex items-center space-x-3 flex-1 min-w-0"},tt={class:"flex-shrink-0"},lt={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},at=["src","alt"],ot={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},rt={class:"flex-1 min-w-0"},nt={class:"text-sm font-medium text-gray-900 truncate"},st={class:"text-xs text-gray-500"},it=["onClick"],dt={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},ut={class:"relative bg-black aspect-video"},ct=["src"],mt={key:2,class:"absolute inset-0 pointer-events-none"},pt={class:"w-full h-full grid grid-cols-3 grid-rows-3"},vt={class:"bg-gray-900 px-6 py-6"},ft={key:0,class:"flex items-center justify-center space-x-6"},gt={key:1,class:"flex items-center justify-center space-x-4"},yt={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(t,{emit:y}){const n=t,x=y,a=D(null),q=D(null),C=D(!1),b=D(null),_=D(null),u=D(!1),B=D(0),P=z({get:()=>n.modelValue,set:V=>x("update:modelValue",V)}),$=()=>{var V;(V=a.value)==null||V.click()},s=V=>J(this,null,function*(){const c=Array.from(V.target.files);yield F(c),V.target.value=""}),F=V=>J(this,null,function*(){const c=[];for(const M of V){if(M.size>n.maxSize){alert(`File ${M.name} exceeds maximum size of ${E(n.maxSize)}`);continue}let h=null;M.type.startsWith("image/")&&(h=yield d(M)),c.push({file:M,name:M.name,size:M.size,type:M.type,preview:h,uploadDate:new Date().toISOString()})}if(c.length>0){const M=n.multiple?[...P.value,...c]:c;x("update:modelValue",M),yield S(c)}}),d=V=>new Promise(c=>{const M=new FileReader;M.onload=h=>c(h.target.result),M.onerror=()=>c(null),M.readAsDataURL(V)}),S=V=>J(this,null,function*(){u.value=!0,B.value=0;try{for(let c=0;c<V.length;c++){const M=V[c],h=setInterval(()=>{B.value=Math.min(B.value+10,90)},100);yield new Promise(p=>{x("upload",M,p)}),clearInterval(h),B.value=(c+1)/V.length*100}}catch(c){console.error("Upload error:",c),alert("Failed to upload files. Please try again.")}finally{u.value=!1,B.value=0}}),G=V=>{const c=[...P.value];c.splice(V,1),x("update:modelValue",c)},v=()=>J(this,null,function*(){try{C.value=!0,yield i()}catch(V){console.error("Camera error:",V),alert("Unable to access camera. Please check permissions or upload a file instead."),C.value=!1}}),i=()=>J(this,null,function*(){try{const V=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});_.value=V,q.value&&(q.value.srcObject=V)}catch(V){throw V}}),o=()=>{const V=q.value,c=document.createElement("canvas");c.width=V.videoWidth,c.height=V.videoHeight,c.getContext("2d").drawImage(V,0,0,c.width,c.height),b.value=c.toDataURL("image/jpeg",.9)},f=()=>{b.value=null},m=()=>J(this,null,function*(){if(!b.value)return;const V=yield(yield fetch(b.value)).blob(),c=new File([V],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield F([c]),g()}),g=()=>{_.value&&(_.value.getTracks().forEach(V=>V.stop()),_.value=null),b.value=null,C.value=!1},E=V=>{if(V===0)return"0 Bytes";const c=1024,M=["Bytes","KB","MB","GB"],h=Math.floor(Math.log(V)/Math.log(c));return Math.round(V/Math.pow(c,h)*100)/100+" "+M[h]};return(V,c)=>(l(),r("div",Ae,[e("label",Ee,[e("span",Le,[U(k(t.label)+" ",1),t.required?(l(),r("span",Re,"*")):w("",!0)]),t.helpText?(l(),r("p",Ie,k(t.helpText),1)):w("",!0)]),e("div",Oe,[t.allowCamera?(l(),r("button",{key:0,onClick:v,type:"button",class:A(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":u.value}]),disabled:u.value},[...c[0]||(c[0]=[ue('<div class="text-center" data-v-2b18513c><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2b18513c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2b18513c></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2b18513c></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2b18513c>Take Photo</p><p class="text-xs text-gray-500" data-v-2b18513c>Use camera</p></div>',1)])],10,Ne)):w("",!0),e("button",{onClick:$,type:"button",class:A(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":u.value}]),disabled:u.value},[e("div",Je,[c[1]||(c[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),c[2]||(c[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",Qe,"Browse "+k(t.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:a,type:"file",accept:t.accept,multiple:t.multiple,onChange:s,class:"hidden"},null,40,We)],10,He)]),u.value?(l(),r("div",Ge,[e("div",Ke,[c[4]||(c[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",Xe,[c[3]||(c[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",Ye,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:_e({width:B.value+"%"})},null,4)])])])])):w("",!0),P.value.length>0?(l(),r("div",Ze,[T(ke,{name:"list"},{default:Q(()=>[(l(!0),r(I,null,O(P.value,(M,h)=>(l(),r("div",{key:M.name+h,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",et,[e("div",tt,[M.preview?(l(),r("div",lt,[e("img",{src:M.preview,alt:M.name,class:"w-full h-full object-cover"},null,8,at)])):(l(),r("div",ot,[...c[5]||(c[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",rt,[e("p",nt,k(M.name),1),e("p",st,k(E(M.size)),1)]),e("button",{onClick:p=>G(h),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...c[6]||(c[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,it)])]))),128))]),_:1})])):w("",!0),(l(),L($e,{to:"body"},[C.value?(l(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:we(g,["self"])},[e("div",dt,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[c[8]||(c[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:g,class:"text-gray-400 hover:text-white transition-colors"},[...c[7]||(c[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ut,[b.value?(l(),r("img",{key:1,src:b.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,ct)):(l(),r("video",{key:0,ref_key:"videoElement",ref:q,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),b.value?w("",!0):(l(),r("div",mt,[e("div",pt,[(l(),r(I,null,O(9,M=>e("div",{key:M,class:"border border-white/20"})),64))])]))]),e("div",vt,[b.value?(l(),r("div",gt,[e("button",{onClick:f,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:m,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(l(),r("div",ft,[e("button",{onClick:o,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...c[9]||(c[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):w("",!0)]))]))}},bt=le(yt,[["__scopeId","data-v-2b18513c"]]),ht={class:"space-y-4"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_t={class:"block text-sm font-medium text-gray-700 mb-2"},kt={key:0,class:"text-red-500"},wt={class:"relative"},$t=["required"],Vt=["value"],Ct={class:"block text-sm font-medium text-gray-700 mb-2"},St={key:0,class:"text-red-500"},qt={class:"relative"},Ft=["required","disabled"],Bt=["value"],Mt={key:0,class:"mt-1 text-xs text-gray-500"},Pt={class:"block text-sm font-medium text-gray-700 mb-2"},jt={key:0,class:"text-red-500"},Dt={class:"relative"},Tt=["required","disabled"],Ut=["value"],zt={key:0,class:"mt-1 text-xs text-gray-500"},At={class:"block text-sm font-medium text-gray-700 mb-2"},Et={key:0,class:"text-red-500"},Lt=["required"],Rt={class:"md:col-span-2"},It={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Ot={class:"flex items-start"},Nt={class:"flex-1"},Ht={class:"text-sm text-green-700 mt-1"},Jt={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:y}){const n=t,x=y,a=D({street:"",barangay:"",municipality:"",province:"",zipCode:""}),q=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],C={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Parañaque City","Las Piñas City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},b={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},_=z(()=>a.value.province?C[a.value.province]||[]:[]),u=z(()=>a.value.municipality?b[a.value.municipality]||["Other - Please specify in Street field"]:[]),B=z(()=>{const F=[];return a.value.street&&F.push(a.value.street),a.value.barangay&&F.push(`Brgy. ${a.value.barangay}`),a.value.municipality&&F.push(a.value.municipality),a.value.province&&F.push(a.value.province),a.value.zipCode&&F.push(a.value.zipCode),F.length>0?F.join(", "):""}),P=()=>{a.value.municipality="",a.value.barangay="",s()},$=()=>{a.value.barangay="",s()},s=()=>{x("update:modelValue",{full_address:B.value,address_line:a.value.street,barangay:a.value.barangay,municipality:a.value.municipality,province:a.value.province,zip_code:a.value.zipCode})};return ce(()=>{var F;if(n.modelValue)if(typeof n.modelValue=="string"){const d=n.modelValue.split(",").map(S=>S.trim());d.length>=3&&(a.value.street=d[0]||"",a.value.barangay=((F=d[1])==null?void 0:F.replace("Brgy. ",""))||"",a.value.municipality=d[2]||"",a.value.province=d[3]||"",a.value.zipCode=d[4]||"")}else typeof n.modelValue=="object"&&(a.value=W(W({},a.value),n.modelValue))}),K(()=>n.modelValue,F=>{F&&typeof F=="object"&&(a.value=W(W({},a.value),F))}),(F,d)=>(l(),r("div",ht,[d[18]||(d[18]=ue('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",xt,[e("div",null,[e("label",_t,[d[5]||(d[5]=U(" Province ",-1)),t.required?(l(),r("span",kt,"*")):w("",!0)]),e("div",wt,[N(e("select",{"onUpdate:modelValue":d[0]||(d[0]=S=>a.value.province=S),onChange:P,required:t.required,class:A(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.province}])},[d[6]||(d[6]=e("option",{value:""},"Select Province",-1)),(l(),r(I,null,O(q,S=>e("option",{key:S,value:S},k(S),9,Vt)),64))],42,$t),[[Z,a.value.province]]),d[7]||(d[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",Ct,[d[8]||(d[8]=U(" Municipality/City ",-1)),t.required?(l(),r("span",St,"*")):w("",!0)]),e("div",qt,[N(e("select",{"onUpdate:modelValue":d[1]||(d[1]=S=>a.value.municipality=S),onChange:$,required:t.required,disabled:!a.value.province,class:A(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.municipality}])},[d[9]||(d[9]=e("option",{value:""},"Select Municipality/City",-1)),(l(!0),r(I,null,O(_.value,S=>(l(),r("option",{key:S,value:S},k(S),9,Bt))),128))],42,Ft),[[Z,a.value.municipality]]),d[10]||(d[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.province?w("",!0):(l(),r("p",Mt,"Select province first"))]),e("div",null,[e("label",Pt,[d[11]||(d[11]=U(" Barangay ",-1)),t.required?(l(),r("span",jt,"*")):w("",!0)]),e("div",Dt,[N(e("select",{"onUpdate:modelValue":d[2]||(d[2]=S=>a.value.barangay=S),onChange:s,required:t.required,disabled:!a.value.municipality,class:A(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":a.value.barangay}])},[d[12]||(d[12]=e("option",{value:""},"Select Barangay",-1)),(l(!0),r(I,null,O(u.value,S=>(l(),r("option",{key:S,value:S},k(S),9,Ut))),128))],42,Tt),[[Z,a.value.barangay]]),d[13]||(d[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),a.value.municipality?w("",!0):(l(),r("p",zt,"Select municipality first"))]),e("div",null,[e("label",At,[d[14]||(d[14]=U(" Street / House No. ",-1)),t.required?(l(),r("span",Et,"*")):w("",!0)]),N(e("input",{"onUpdate:modelValue":d[3]||(d[3]=S=>a.value.street=S),onInput:s,type:"text",required:t.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:A(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":a.value.street}])},null,42,Lt),[[X,a.value.street]])]),e("div",Rt,[d[15]||(d[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[U(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),N(e("input",{"onUpdate:modelValue":d[4]||(d[4]=S=>a.value.zipCode=S),onInput:s,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[X,a.value.zipCode]])])]),B.value?(l(),r("div",It,[e("div",Ot,[d[17]||(d[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Nt,[d[16]||(d[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",Ht,k(B.value),1)])])])):w("",!0)]))}},Qt={class:"space-y-4"},Wt={class:"flex items-center justify-between mb-4"},Gt={class:"block text-sm font-medium text-gray-700"},Kt={key:0,class:"text-red-500"},Xt={key:0,class:"space-y-3"},Yt=["value"],Zt={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},el={class:"flex items-start justify-between"},tl={class:"flex-1 space-y-1"},ll={class:"text-sm font-medium text-gray-900"},al={class:"text-sm text-gray-700"},ol={key:0,class:"text-xs text-gray-600"},rl={key:1},nl={key:2,class:"flex items-center space-x-2"},sl={__name:"PropertyAddressSelector",props:{modelValue:{type:Object,default:()=>({})},label:{type:String,default:"Residential Address"},required:{type:Boolean,default:!1}},emits:["update:modelValue","property-saved"],setup(t,{expose:y,emit:n}){const x=t,a=n,{loadUserProfile:q,getAllProperties:C,defaultProperty:b}=ye(),_=D(!1),u=D(""),B=D(!1),P=D(x.modelValue||{}),$=z(()=>C.value||[]),s=z(()=>!u.value||u.value==="__new__"?null:$.value.find(m=>m.name===u.value));function F(m){const g=[];return m.property_name&&g.push(m.property_name),m.street&&g.push(m.street),m.suburb&&g.push(m.suburb),m.city&&g.push(m.city),g.join(", ")||"Unnamed Property"}function d(m){const g=[];return m.street&&g.push(m.street),m.barangay&&g.push(`Brgy. ${m.barangay}`),m.municipality&&g.push(m.municipality),m.province&&g.push(m.province),(m.zip_code||m.postcode)&&g.push(m.zip_code||m.postcode),g.join(", ")}function S(){if(u.value==="__new__"){P.value={},_.value=!1;return}s.value&&(P.value={full_address:d(s.value),address_line:s.value.street||"",barangay:s.value.barangay||"",municipality:s.value.municipality||s.value.city||"",province:s.value.province||"",zip_code:s.value.zip_code||s.value.postcode||""},a("update:modelValue",P.value))}function G(m){P.value=m;const g=te(W({},m),{_save_to_profile:B.value});a("update:modelValue",g)}K(B,m=>{if(P.value&&Object.keys(P.value).length>0){const g=te(W({},P.value),{_save_to_profile:m});a("update:modelValue",g)}});function v(){_.value=!1}function i(){confirm("Are you sure you want to remove this property from selection?")&&(u.value="",P.value={},a("update:modelValue",{}))}const o=D(!1);function f(){return J(this,null,function*(){if(!B.value)return{success:!1,reason:"not_requested"};if(u.value&&u.value!=="__new__")return{success:!1,reason:"existing_property"};const m=P.value;if(!m||!m.address_line)return{success:!1,reason:"no_address"};o.value=!0;try{const g=yield Se("councilsonline.api.auth.add_user_property",{street:m.address_line,barangay:m.barangay,municipality:m.municipality,province:m.province,zip_code:m.zip_code,is_default:$.value.length===0});return g.success&&(yield q(),a("property-saved",g.property)),g}catch(g){return console.error("Failed to save property:",g),{success:!1,reason:"api_error",error:g.message}}finally{o.value=!1}})}return y({saveToProfile:B,savePropertyToProfile:f,isSavingProperty:o}),ce(()=>J(this,null,function*(){yield q(),(!x.modelValue||Object.keys(x.modelValue).length===0)&&b.value&&(u.value=b.value.name,S()),$.value.length>0&&(_.value=!0)})),K(()=>x.modelValue,m=>{m&&Object.keys(m).length>0&&(P.value=m)},{deep:!0}),(m,g)=>(l(),r("div",Qt,[e("div",Wt,[e("label",Gt,[U(k(t.label)+" ",1),t.required?(l(),r("span",Kt,"*")):w("",!0)]),$.value.length>0?(l(),r("button",{key:0,onClick:g[0]||(g[0]=E=>_.value=!_.value),type:"button",class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},k(_.value?"Enter manually":"Select from my properties"),1)):w("",!0)]),_.value&&$.value.length>0?(l(),r("div",Xt,[N(e("select",{"onUpdate:modelValue":g[1]||(g[1]=E=>u.value=E),onChange:S,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[g[3]||(g[3]=e("option",{value:""},"Select a property",-1)),(l(!0),r(I,null,O($.value,E=>(l(),r("option",{key:E.name,value:E.name},k(F(E)),9,Yt))),128)),g[4]||(g[4]=e("option",{value:"__new__"},"+ Add New Property",-1))],544),[[Z,u.value]]),s.value&&u.value!=="__new__"?(l(),r("div",Zt,[e("div",el,[e("div",tl,[e("p",ll,k(s.value.property_name||"Property"),1),e("p",al,k(d(s.value)),1),s.value.legal_description?(l(),r("p",ol,k(s.value.legal_description),1)):w("",!0)]),e("div",{class:"flex space-x-2"},[e("button",{onClick:v,type:"button",class:"text-sm text-blue-600 hover:text-blue-700",title:"Edit property"},[...g[5]||(g[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),e("button",{onClick:i,type:"button",class:"text-sm text-red-600 hover:text-red-700",title:"Remove property"},[...g[6]||(g[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])])])):w("",!0)])):w("",!0),!_.value||u.value==="__new__"||$.value.length===0?(l(),r("div",rl,[T(Jt,{modelValue:P.value,"onUpdate:modelValue":G,required:t.required},null,8,["modelValue","required"])])):w("",!0),(!_.value||u.value==="__new__")&&!u.value?(l(),r("div",nl,[N(e("input",{"onUpdate:modelValue":g[2]||(g[2]=E=>B.value=E),type:"checkbox",id:"save-property",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Ve,B.value]]),g[7]||(g[7]=e("label",{for:"save-property",class:"text-sm text-gray-700"}," Save this property to my profile for future use ",-1))])):w("",!0)]))}},il={class:"inline-block relative group"},dl={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:t=>["top","bottom","left","right"].includes(t)}},setup(t){const y=t,n=D(!1),x=z(()=>{switch(y.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),a=z(()=>{switch(y.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(q,C)=>(l(),r("div",il,[ie(q.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:C[0]||(C[0]=b=>n.value=!0),onMouseleave:C[1]||(C[1]=b=>n.value=!1)},[...C[2]||(C[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),T(Ce,{name:"tooltip"},{default:Q(()=>[n.value?(l(),r("div",{key:0,class:A(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",x.value]),style:{"max-width":"300px","white-space":"normal"}},[ie(q.$slots,"default",{},()=>[U(k(t.text),1)],!0),e("div",{class:A(["tooltip-arrow",a.value])},null,2)],2)):w("",!0)]),_:3})]))}},ul=le(dl,[["__scopeId","data-v-cfd551b3"]]),cl={key:0,class:"mt-1 text-xs text-red-600"},ml={key:1,class:"mt-1 text-xs text-gray-500"},Y={__name:"FieldError",props:{error:{type:String,default:""},description:{type:String,default:""}},setup(t){return(y,n)=>(l(),r("div",null,[t.error?(l(),r("p",cl,k(t.error),1)):t.description?(l(),r("p",ml,k(t.description),1)):w("",!0)]))}},pl={class:"form-group"},vl={class:"flex items-center h-5"},fl=["id","name","checked","required"],gl={class:"ml-3 text-sm"},yl=["for"],bl={key:0,class:"text-red-500 ml-1"},hl={__name:"CheckboxField",props:{field:{type:Object,required:!0},modelValue:{type:Boolean,default:!1},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(y,n)=>(l(),r("div",pl,[e("div",{class:A(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!t.validationError,"border-red-500 bg-red-50":t.validationError}])},[e("div",vl,[e("input",{id:t.field.field_name,name:t.field.field_name,type:"checkbox",checked:t.modelValue,onChange:n[0]||(n[0]=x=>y.$emit("update:modelValue",x.target.checked)),onBlur:n[1]||(n[1]=x=>y.$emit("validate")),required:t.field.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,fl)]),e("div",gl,[e("label",{for:t.field.field_name,class:"font-medium text-gray-700 cursor-pointer"},[U(k(t.field.field_label)+" ",1),t.field.is_required?(l(),r("span",bl,"*")):w("",!0)],8,yl),T(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])])],2)]))}},xl=["for"],_l={key:0,class:"text-red-500 ml-1"},ee={__name:"FieldLabel",props:{fieldName:{type:String,required:!0},label:{type:String,required:!0},required:{type:Boolean,default:!1},helpText:{type:String,default:""}},setup(t){return(y,n)=>(l(),r("label",{for:t.fieldName,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,k(t.label),1),t.required?(l(),r("span",_l,"*")):w("",!0),t.helpText?(l(),L(ul,{key:1,text:t.helpText},null,8,["text"])):w("",!0)],8,xl))}},kl={class:"form-group"},wl={class:"relative"},$l=["id","name","value","required"],Vl={__name:"DateField",props:{field:{type:Object,required:!0},modelValue:{type:String,default:""},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(y,n)=>(l(),r("div",kl,[T(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",wl,[e("input",{id:t.field.field_name,name:t.field.field_name,type:"date",value:t.modelValue,onInput:n[0]||(n[0]=x=>y.$emit("update:modelValue",x.target.value)),onBlur:n[1]||(n[1]=x=>y.$emit("validate")),required:t.field.is_required,class:A(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}])},null,42,$l),n[2]||(n[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),T(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Cl={class:"form-group"},Sl={class:"relative"},ql={key:0,class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},Fl=["id","name","value","required","step","placeholder"],Bl={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},oe={__name:"NumberField",props:{field:{type:Object,required:!0},modelValue:{type:Number,default:0},validationError:{type:String,default:""},placeholder:{type:String,default:""},variant:{type:String,default:"int",validator:t=>["int","float","currency"].includes(t)}},emits:["update:modelValue","validate"],setup(t){return(y,n)=>(l(),r("div",Cl,[T(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",Sl,[t.variant==="currency"?(l(),r("div",ql,[...n[2]||(n[2]=[e("span",{class:"text-gray-500 text-base font-medium"},"₱",-1)])])):w("",!0),e("input",{id:t.field.field_name,name:t.field.field_name,type:"number",value:t.modelValue,onInput:n[0]||(n[0]=x=>y.$emit("update:modelValue",parseFloat(x.target.value)||0)),onBlur:n[1]||(n[1]=x=>y.$emit("validate")),required:t.field.is_required,step:t.variant==="int"?"1":"0.01",class:A(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"pl-10":t.variant==="currency","border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}]),placeholder:t.variant==="currency"?"0.00":t.placeholder},null,42,Fl),t.variant!=="currency"?(l(),r("div",Bl,[...n[3]||(n[3]=[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})],-1)])])):w("",!0)]),T(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Ml={class:"p-6 max-h-[80vh] overflow-y-auto"},Pl={class:"text-lg font-semibold text-gray-900 mb-4"},jl={key:0,class:"text-center py-8"},Dl={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Tl={key:2,class:"space-y-6"},Ul={class:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-48 overflow-y-auto"},zl=["onClick","disabled"],Al={class:"font-medium"},El={class:"text-xs opacity-80"},Ll={class:"text-xs opacity-60"},Rl={key:0,class:"text-sm text-gray-500 mt-2"},Il={key:0},Ol={class:"grid grid-cols-3 sm:grid-cols-4 gap-2 max-h-40 overflow-y-auto"},Nl=["onClick","disabled"],Hl={key:0,class:"text-xs text-gray-500 mt-2"},Jl={key:1},Ql=["disabled"],Wl=["value"],Gl={key:2,class:"bg-gray-50 rounded-lg p-3"},Kl={class:"text-sm text-gray-600"},Xl={key:3},Yl=["disabled"],Zl={key:4,class:"space-y-3"},ea={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},ta=["disabled"],la=["disabled"],aa=["disabled"],oa={key:5,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},ra={class:"text-sm text-blue-800 space-y-1"},na={key:6,class:"bg-green-50 border border-green-200 rounded-lg p-4"},sa={key:7,class:"bg-red-50 border border-red-200 rounded-lg p-4"},ia={class:"text-sm text-red-800"},da={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},ua=["disabled"],ca=["disabled"],ma={key:0},pa={key:1},va={__name:"BookSlotModal",props:{show:{type:Boolean,required:!0},teamCode:{type:String,required:!0},appointmentType:{type:String,required:!0},title:{type:String,default:"Book Appointment"},requestId:{type:String,default:null},councilCode:{type:String,default:null},referenceDoctype:{type:String,default:null},referenceName:{type:String,default:null},showPurpose:{type:Boolean,default:!0},showContactFields:{type:Boolean,default:!1},defaultPurpose:{type:String,default:""}},emits:["update:show","booked"],setup(t,{emit:y}){const n=t,x=y,a=z({get:()=>n.show,set:h=>x("update:show",h)}),q=D(""),C=D(null),b=D(""),_=D(""),u=D(""),B=D(""),P=D(""),$=D(!1),s=D(null),F=D(!1),d=de({url:"councilsonline.api.scheduling.get_team_config",auto:!1}),S=de({url:"councilsonline.api.scheduling.get_available_slots",auto:!1});K(()=>n.show,h=>{h&&n.teamCode&&(q.value="",C.value=null,b.value="",_.value=n.defaultPurpose,s.value=null,F.value=!1,d.fetch({team_code:n.teamCode}),S.fetch({team_code:n.teamCode}))}),K(()=>d.data,h=>{var p;h!=null&&h.success&&((p=h.config)!=null&&p.locations)&&(h.config.locations.length===1?b.value=h.config.locations[0]:h.config.default_location&&!b.value&&(b.value=h.config.default_location))});const G=z(()=>{var h;return!((h=S.data)!=null&&h.success)||!S.data.slots_by_date?[]:Object.values(S.data.slots_by_date)}),v=z(()=>{var p;if(!q.value||!((p=S.data)!=null&&p.success))return[];const h=S.data.slots_by_date[q.value];return(h==null?void 0:h.slots)||[]}),i=z(()=>{var h;return(h=d.data)!=null&&h.success?d.data.config.locations||[]:[]}),o=z(()=>C.value&&b.value),f=h=>`${h.start_display} - ${h.end_display}`,m=h=>{const p=new Date(h),H=p.getDate();return`${p.toLocaleDateString("en-US",{month:"short"})} ${H}`},g=h=>new Date(h).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),E=h=>{q.value=h,C.value=null},V=h=>{C.value=h},c=()=>{$.value||x("update:show",!1)},M=()=>J(this,null,function*(){var h;if(!(!o.value||!C.value)){$.value=!0,s.value=null;try{const H=yield(yield fetch("/api/method/councilsonline.api.scheduling.book_appointment",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({team_code:n.teamCode,scheduled_start:C.value.start,scheduled_end:C.value.end,appointment_type:n.appointmentType,location:b.value,purpose:_.value,contact_name:u.value||null,contact_email:B.value||null,contact_phone:P.value||null,reference_doctype:n.referenceDoctype,reference_name:n.referenceName,request_id:n.requestId,council_code:n.councilCode})})).json();(h=H.message)!=null&&h.success?(F.value=!0,s.value=null,x("booked",te(W({},H.message),{slot:C.value,location:b.value})),setTimeout(()=>{c()},2e3)):s.value=H.exc||H._server_messages||"Failed to book appointment"}catch(p){console.error("Book appointment error:",p),s.value="Network error. Please try again."}finally{$.value=!1}}});return(h,p)=>(l(),L(R(qe),{modelValue:a.value,"onUpdate:modelValue":p[5]||(p[5]=H=>a.value=H),options:{size:"lg"}},{body:Q(()=>{var H;return[e("div",Ml,[e("h3",Pl,k(t.title),1),R(S).loading||R(d).loading?(l(),r("div",jl,[...p[6]||(p[6]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"text-sm text-gray-600 mt-3"},"Loading available times...",-1)])])):R(S).error||R(d).error?(l(),r("div",Dl,[...p[7]||(p[7]=[e("p",{class:"text-sm text-red-800"},"Failed to load scheduling options. Please try again later.",-1)])])):(H=R(S).data)!=null&&H.success?(l(),r("div",Tl,[e("div",null,[p[8]||(p[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"1. Select a Date",-1)),e("div",Ul,[(l(!0),r(I,null,O(G.value,j=>(l(),r("button",{key:j.date,onClick:ae=>E(j.date),class:A(["px-3 py-2 text-sm rounded-lg border transition-colors text-left",q.value===j.date?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"]),disabled:$.value},[e("div",Al,k(j.day),1),e("div",El,k(m(j.date)),1),e("div",Ll,k(j.slots.length)+" slots",1)],10,zl))),128))]),G.value.length===0?(l(),r("p",Rl," No available dates found. Please try again later. ")):w("",!0)]),q.value?(l(),r("div",Il,[p[9]||(p[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"2. Select a Time",-1)),e("div",Ol,[(l(!0),r(I,null,O(v.value,j=>{var ae;return l(),r("button",{key:j.start,onClick:po=>V(j),class:A(["px-3 py-2 text-sm rounded-lg border transition-colors",((ae=C.value)==null?void 0:ae.start)===j.start?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"]),disabled:$.value},k(j.start_display),11,Nl)}),128))]),C.value?(l(),r("p",Hl," Duration: "+k(C.value.duration_minutes)+" minutes (ends at "+k(C.value.end_display)+") ",1)):w("",!0)])):w("",!0),C.value&&i.value.length>1?(l(),r("div",Jl,[p[11]||(p[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"3. Select Location",-1)),N(e("select",{"onUpdate:modelValue":p[0]||(p[0]=j=>b.value=j),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:$.value},[p[10]||(p[10]=e("option",{value:""},"-- Select location --",-1)),(l(!0),r(I,null,O(i.value,j=>(l(),r("option",{key:j,value:j},k(j),9,Wl))),128))],8,Ql),[[Z,b.value]])])):C.value&&i.value.length===1?(l(),r("div",Gl,[e("p",Kl,[p[12]||(p[12]=e("span",{class:"font-medium"},"Location:",-1)),U(" "+k(i.value[0]),1)])])):w("",!0),t.showPurpose&&C.value?(l(),r("div",Xl,[p[13]||(p[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Purpose / Notes (Optional)",-1)),N(e("textarea",{"onUpdate:modelValue":p[1]||(p[1]=j=>_.value=j),rows:"2",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Any special instructions or notes...",disabled:$.value},null,8,Yl),[[X,_.value]])])):w("",!0),t.showContactFields&&C.value?(l(),r("div",Zl,[p[14]||(p[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Contact Information (Optional)",-1)),e("div",ea,[N(e("input",{"onUpdate:modelValue":p[2]||(p[2]=j=>u.value=j),type:"text",placeholder:"Name",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:$.value},null,8,ta),[[X,u.value]]),N(e("input",{"onUpdate:modelValue":p[3]||(p[3]=j=>B.value=j),type:"email",placeholder:"Email",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:$.value},null,8,la),[[X,B.value]]),N(e("input",{"onUpdate:modelValue":p[4]||(p[4]=j=>P.value=j),type:"tel",placeholder:"Phone",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:$.value},null,8,aa),[[X,P.value]])])])):w("",!0),C.value&&b.value?(l(),r("div",oa,[p[19]||(p[19]=e("h4",{class:"text-sm font-semibold text-blue-900 mb-2"},"Appointment Summary",-1)),e("div",ra,[e("p",null,[p[15]||(p[15]=e("span",{class:"font-medium"},"Date:",-1)),U(" "+k(g(q.value)),1)]),e("p",null,[p[16]||(p[16]=e("span",{class:"font-medium"},"Time:",-1)),U(" "+k(f(C.value)),1)]),e("p",null,[p[17]||(p[17]=e("span",{class:"font-medium"},"Location:",-1)),U(" "+k(b.value),1)]),e("p",null,[p[18]||(p[18]=e("span",{class:"font-medium"},"Duration:",-1)),U(" "+k(C.value.duration_minutes)+" minutes",1)])])])):w("",!0),F.value?(l(),r("div",na,[...p[20]||(p[20]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("p",{class:"text-sm text-green-800 font-medium"},"Appointment booked successfully!")],-1)])])):w("",!0),s.value?(l(),r("div",sa,[e("p",ia,k(s.value),1)])):w("",!0),e("div",da,[e("button",{onClick:c,disabled:$.value,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}," Cancel ",8,ua),e("button",{onClick:M,disabled:!o.value||$.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[$.value?(l(),r("span",ma,"Booking...")):(l(),r("span",pa,"Book Appointment"))],8,ca)])])):w("",!0)])]}),_:1},8,["modelValue"]))}},fa=["data-fieldname"],ga={class:"block text-sm font-medium text-gray-700 mb-2"},ya={key:0,class:"text-red-500 ml-1"},ba={key:0,class:"space-y-3"},ha={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},xa={class:"flex items-start justify-between"},_a={class:"flex items-start space-x-3"},ka={key:0,class:"text-xs text-green-700 mb-1"},wa={class:"text-sm text-green-800"},$a={class:"font-medium"},Va={class:"text-sm text-green-800"},Ca={key:1,class:"text-sm text-green-800"},Sa={key:2,class:"mt-2 text-sm text-red-600"},qa={__name:"PickupScheduleField",props:{field:{type:Object,required:!0},modelValue:{type:Object,default:()=>({})},teamCode:{type:String,default:"PAYMENTS"},appointmentType:{type:String,default:"Pickup"},councilCode:{type:String,default:null},requestId:{type:String,default:null},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t,{emit:y}){const n=t,x=y,a=D(!1),q=z({get:()=>n.modelValue||{},set:$=>x("update:modelValue",$)}),C=z(()=>{var $,s;return(($=q.value)==null?void 0:$.appointment_id)||((s=q.value)==null?void 0:s.scheduled_start)}),b=z(()=>{var s;return(s=q.value)!=null&&s.scheduled_start?new Date(q.value.scheduled_start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""}),_=z(()=>{var d;if(!((d=q.value)!=null&&d.scheduled_start))return"";const $=new Date(q.value.scheduled_start),s=q.value.scheduled_end?new Date(q.value.scheduled_end):null,F=$.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});if(s){const S=s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${F} - ${S}`}return F}),u=()=>{a.value=!0},B=$=>{q.value={appointment_id:$.appointment_id,scheduled_start:$.scheduled_start,scheduled_end:$.scheduled_end,location:$.location,status:$.status},x("validate")},P=()=>{q.value={},x("validate")};return($,s)=>(l(),r("div",{class:"form-group","data-fieldname":t.field.field_name},[e("label",ga,[U(k(t.field.field_label)+" ",1),t.field.is_required?(l(),r("span",ya,"*")):w("",!0)]),C.value?(l(),r("div",ha,[e("div",xa,[e("div",_a,[s[6]||(s[6]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[s[5]||(s[5]=e("p",{class:"text-sm font-medium text-green-900"},"Pickup Scheduled",-1)),q.value.appointment_id?(l(),r("p",ka," Ref: "+k(q.value.appointment_id),1)):w("",!0),e("p",wa,[e("span",$a,k(b.value),1)]),e("p",Va,[s[3]||(s[3]=e("span",{class:"font-medium"},"Time:",-1)),U(" "+k(_.value),1)]),q.value.location?(l(),r("p",Ca,[s[4]||(s[4]=e("span",{class:"font-medium"},"Location:",-1)),U(" "+k(q.value.location),1)])):w("",!0)])]),e("button",{type:"button",onClick:P,class:"text-sm text-green-700 hover:text-green-900 underline"}," Reschedule ")])])):(l(),r("div",ba,[s[2]||(s[2]=e("p",{class:"text-sm text-gray-600"}," Please schedule a pickup date and time for collecting your payment. ",-1)),e("button",{type:"button",onClick:u,class:"inline-flex items-center px-4 py-2 border border-blue-600 rounded-lg text-sm font-medium text-blue-600 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors"},[...s[1]||(s[1]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),U(" Schedule Pickup Time ",-1)])])])),t.validationError?(l(),r("p",Sa,k(t.validationError),1)):w("",!0),T(va,{show:a.value,"onUpdate:show":s[0]||(s[0]=F=>a.value=F),"team-code":t.teamCode,"appointment-type":t.appointmentType,"council-code":t.councilCode,"request-id":t.requestId,title:"Schedule Pickup Time","show-purpose":!1,onBooked:B},null,8,["show","team-code","appointment-type","council-code","request-id"])],8,fa))}},Fa={class:"form-group"},Ba={class:"relative"},Ma=["id","name","value","required"],Pa={value:""},ja=["value"],Da={__name:"SelectField",props:{field:{type:Object,required:!0},modelValue:{type:[String,Number],default:""},validationError:{type:String,default:""},options:{type:Array,default:()=>[]}},emits:["update:modelValue","validate"],setup(t){return(y,n)=>(l(),r("div",Fa,[T(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",Ba,[e("select",{id:t.field.field_name,name:t.field.field_name,value:t.modelValue,onChange:n[0]||(n[0]=x=>y.$emit("update:modelValue",x.target.value)),onBlur:n[1]||(n[1]=x=>y.$emit("validate")),required:t.field.is_required,class:A(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}])},[e("option",Pa,"Select "+k(t.field.field_label),1),(l(!0),r(I,null,O(t.options,x=>(l(),r("option",{key:x,value:x},k(x),9,ja))),128))],42,Ma),n[2]||(n[2]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),T(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Ta={class:"form-group"},Ua={class:"relative"},za=["id","name","value","required","disabled","readonly","placeholder"],Aa={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},Ea=["innerHTML"],La={__name:"TextField",props:{field:{type:Object,required:!0},modelValue:{type:[String,Number],default:""},validationError:{type:String,default:""},placeholder:{type:String,default:""},icon:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(y,n)=>(l(),r("div",Ta,[T(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",Ua,[e("input",{id:t.field.field_name,name:t.field.field_name,type:"text",value:t.modelValue,onInput:n[0]||(n[0]=x=>y.$emit("update:modelValue",x.target.value)),onBlur:n[1]||(n[1]=x=>y.$emit("validate")),required:t.field.is_required,disabled:t.field.read_only,readonly:t.field.read_only,class:A(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError&&!t.field.read_only,"border-red-500 ring-2 ring-red-100":t.validationError,"bg-gray-100 text-gray-600 cursor-not-allowed":t.field.read_only,"focus:ring-2 focus:ring-blue-500 focus:border-blue-500":!t.field.read_only}]),placeholder:t.placeholder},null,42,za),t.icon?(l(),r("div",Aa,[e("span",{innerHTML:t.icon,class:"text-gray-400"},null,8,Ea)])):w("",!0)]),T(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Ra={class:"form-group"},Ia=["id","name","value","required","placeholder"],Oa={__name:"TextareaField",props:{field:{type:Object,required:!0},modelValue:{type:String,default:""},validationError:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(y,n)=>(l(),r("div",Ra,[T(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("textarea",{id:t.field.field_name,name:t.field.field_name,value:t.modelValue,onInput:n[0]||(n[0]=x=>y.$emit("update:modelValue",x.target.value)),onBlur:n[1]||(n[1]=x=>y.$emit("validate")),required:t.field.is_required,rows:"4",class:A(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}]),placeholder:t.placeholder},null,42,Ia),T(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Na={class:"space-y-6"},Ha={key:0,class:"form-group"},Ja={key:9,class:"form-group"},Qa={key:11,class:"form-group"},Wa={class:"text-sm text-gray-500 italic"},Ga={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:y}){const n=t,x=y,a=z({get:()=>n.modelValue,set:v=>x("update:modelValue",v)}),q=z(()=>n.fields.filter(v=>{var g;const i=((g=v.parent_section_code)==null?void 0:g.toLowerCase())||"",f=["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(i),m=["barangay","municipality","province","city","region","zip_code","postal_code"];return f&&n.fields.some(V=>V.parent_section_code===v.parent_section_code&&V.field_name==="address_line")&&m.includes(v.field_name)?!1:be(v,a.value)})),C=v=>{var V,c,M;const i=((V=v.field_name)==null?void 0:V.toLowerCase())||"",o=((c=v.field_label)==null?void 0:c.toLowerCase())||"",f=((M=v.parent_section_code)==null?void 0:M.toLowerCase())||"",m=["address_line","street","residential_address","property_address","home_address","current_address","permanent_address"],g=["address","residential_address","permanent_address","property_address","current_address","home_address"],E=["residential address","property address","home address","current address","permanent address","street / house number","street address"];return m.includes(i)&&v.field_type==="Data"||g.includes(f)&&(i==="address_line"||i==="street")&&v.field_type==="Data"||E.some(h=>o.includes(h))&&v.field_type==="Data"&&!o.includes("zip")&&!o.includes("postal")},b=v=>{var o;if(v.placeholder)return v.placeholder;const i=((o=v.field_label)==null?void 0:o.toLowerCase())||"";return i.includes("name")?"e.g., Juan Dela Cruz":i.includes("email")?"e.g., juan@example.com":i.includes("phone")||i.includes("mobile")||i.includes("contact")?"e.g., 0917 123 4567":i.includes("age")?"e.g., 25":i.includes("occupation")?"e.g., Teacher":i.includes("income")||i.includes("salary")?"e.g., 15000":`Enter ${v.field_label}`},_=v=>{var o;const i=((o=v.field_label)==null?void 0:o.toLowerCase())||"";return i.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':i.includes("phone")||i.includes("mobile")||i.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':i.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},u=v=>v?v.split(`
`).map(i=>i.trim()).filter(Boolean):[],{errors:B,validateConfigField:P,clearFieldError:$}=he(),s=v=>{if(!v.validation&&!v.is_required){$(v.field_name);return}const i=a.value[v.field_name];P(v.field_name,i,v,a.value)},F=v=>B.value[v]||"",d=v=>{const i=a.value[v];return Array.isArray(i)?i:i?typeof i=="string"?[{file_url:i,name:i.split("/").pop(),preview:i}]:[]:[]},S=(v,i)=>{if(console.log("[DynamicFieldRenderer] updateFileField called:",v,i),Array.isArray(i)&&i.length>0){const o=i.filter(f=>f.file_url);if(o.length>0){const f=o[0].file_url;console.log("[DynamicFieldRenderer] Converting uploaded file to URL:",f),a.value[v]=f;return}}a.value[v]=i},G=(v,i)=>J(this,null,function*(){console.log("[DynamicFieldRenderer] handleFileUploadToFrappe called with:",v);try{console.log("[DynamicFieldRenderer] Starting file upload:",v.name);const o=new FormData;o.append("file",v.file),o.append("is_private","0"),o.append("folder","Home/Attachments"),console.log("[DynamicFieldRenderer] Uploading to /api/method/upload_file...");const f=yield fetch("/api/method/upload_file",{method:"POST",credentials:"include",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:o});if(console.log("[DynamicFieldRenderer] Upload response status:",f.status),!f.ok){const g=yield f.text();throw console.error("[DynamicFieldRenderer] Upload failed:",g),new Error(`Upload failed (${f.status}): ${g}`)}const m=yield f.json();console.log("[DynamicFieldRenderer] Upload response:",m),m.message&&m.message.file_url&&(console.log("[DynamicFieldRenderer] File uploaded successfully:",m.message.file_url),v.file_url=m.message.file_url,v.file_name=m.message.file_name,console.log("[DynamicFieldRenderer] Updated fileData:",v)),console.log("[DynamicFieldRenderer] Calling resolveCallback()"),i(),console.log("[DynamicFieldRenderer] File upload completed successfully")}catch(o){console.error("[DynamicFieldRenderer] File upload error:",o),alert(`Failed to upload file: ${o.message}`),console.log("[DynamicFieldRenderer] Calling resolveCallback() after error"),i()}});return K(()=>a.value,v=>{Object.entries(v).forEach(([i,o])=>{if(Array.isArray(o)&&o.length>0&&o[0].file_url){const f=o.map(m=>m.file_url).filter(Boolean);f.length>0&&(a.value[i]=f.length===1?f[0]:f,console.log(`[DynamicFieldRenderer] Converted file array to URL for ${i}:`,a.value[i]))}})},{deep:!0}),K(()=>n.fields,v=>{v.forEach(i=>{i.default_value&&!a.value[i.field_name]&&(i.default_value==="Today"&&i.field_type==="Date"?a.value[i.field_name]=new Date().toISOString().split("T")[0]:a.value[i.field_name]=i.default_value)})},{immediate:!0}),(v,i)=>(l(),r("div",Na,[(l(!0),r(I,null,O(q.value,o=>(l(),r("div",{key:o.field_name,class:"field-wrapper"},[C(o)?(l(),r("div",Ha,[T(sl,{modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,label:o.field_label,required:!!o.is_required},null,8,["modelValue","onUpdate:modelValue","label","required"])])):o.field_type==="Data"?(l(),L(La,{key:1,field:o,modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,"validation-error":F(o.field_name),placeholder:b(o),icon:_(o),onValidate:f=>s(o)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","icon","onValidate"])):o.field_type==="Select"?(l(),L(Da,{key:2,field:o,modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,"validation-error":F(o.field_name),options:u(o.options),onValidate:f=>s(o)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","options","onValidate"])):o.field_type==="Check"?(l(),L(hl,{key:3,field:o,modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,"validation-error":F(o.field_name),onValidate:f=>s(o)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):["Text","Text Editor","Small Text","Long Text"].includes(o.field_type)?(l(),L(Oa,{key:4,field:o,modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,"validation-error":F(o.field_name),placeholder:b(o),onValidate:f=>s(o)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):o.field_type==="Date"?(l(),L(Vl,{key:5,field:o,modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,"validation-error":F(o.field_name),onValidate:f=>s(o)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):o.field_type==="Int"?(l(),L(oe,{key:6,field:o,modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,"validation-error":F(o.field_name),placeholder:b(o),variant:"int",onValidate:f=>s(o)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):o.field_type==="Float"?(l(),L(oe,{key:7,field:o,modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,"validation-error":F(o.field_name),placeholder:b(o),variant:"float",onValidate:f=>s(o)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):o.field_type==="Currency"?(l(),L(oe,{key:8,field:o,modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,"validation-error":F(o.field_name),variant:"currency",onValidate:f=>s(o)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):o.field_type==="Attach"||o.field_type==="Attach Image"?(l(),r("div",Ja,[T(bt,{label:o.field_label,required:o.is_required,accept:o.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:d(o.field_name),"onUpdate:modelValue":f=>S(o.field_name,f),onUpload:G},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):o.field_type==="Pickup Schedule"?(l(),L(qa,{key:10,field:o,modelValue:a.value[o.field_name],"onUpdate:modelValue":f=>a.value[o.field_name]=f,"team-code":o.team_code||"PAYMENTS","appointment-type":o.appointment_type||"Pickup","validation-error":F(o.field_name),onValidate:f=>s(o)},null,8,["field","modelValue","onUpdate:modelValue","team-code","appointment-type","validation-error","onValidate"])):(l(),r("div",Qa,[e("div",Wa,' Field type "'+k(o.field_type)+'" not yet supported for '+k(o.field_label),1)]))]))),128))]))}},re=le(Ga,[["__scopeId","data-v-e9592afd"]]),Ka={class:"dynamic-step max-w-4xl mx-auto"},Xa={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},Ya={class:"flex items-start"},Za={class:"ml-4 flex-1"},eo={class:"text-2xl font-bold text-blue-900"},to={key:0,class:"mt-2 text-sm text-blue-700"},lo={class:"space-y-6"},ao={class:"mb-4 pb-3 border-b-2 border-gray-200"},oo={class:"flex items-center"},ro={class:"text-lg font-semibold text-gray-900"},no={key:0,class:"text-red-500 ml-1"},so={key:0,class:"text-sm text-gray-600 mt-0.5"},io={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},uo={class:"section-content"},co={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},mo={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:y}){const n=t,x=y,a=z({get:()=>n.modelValue,set:b=>x("update:modelValue",b)}),q=z(()=>n.stepConfig.sections?n.stepConfig.sections.filter(b=>{if(!b.depends_on)return!0;try{return xe(b,a.value)}catch(_){return console.error(`Error evaluating section visibility for ${b.section_code}:`,_),!0}}):[]),C=b=>[b.section_title];return K(()=>n.stepConfig,b=>{b.sections&&b.sections.forEach(_=>{_.fields.forEach(u=>{if(u.default_value&&!a.value[u.field_name]){const B=W({},a.value);u.default_value==="Today"&&u.field_type==="Date"?B[u.field_name]=new Date().toISOString().split("T")[0]:B[u.field_name]=u.default_value,x("update:modelValue",B)}})})},{immediate:!0,deep:!0}),(b,_)=>(l(),r("div",Ka,[e("div",Xa,[e("div",Ya,[_[3]||(_[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Za,[e("h2",eo,k(t.stepConfig.step_title),1),t.stepDescription?(l(),r("p",to,k(t.stepDescription),1)):w("",!0)])])]),e("div",lo,[(l(!0),r(I,null,O(q.value,u=>(l(),r("div",{key:u.section_code,class:"section"},[e("div",ao,[e("div",oo,[_[4]||(_[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",ro,[U(k(u.section_title)+" ",1),u.is_required?(l(),r("span",no,"*")):w("",!0)]),u.section_description?(l(),r("p",so,k(u.section_description),1)):w("",!0)])]),u.is_required?(l(),r("div",io,[..._[5]||(_[5]=[U(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),U(" are required ",-1)])])):w("",!0)]),e("div",uo,[u.section_type==="Tab"?(l(),L(R(je),{key:0},{default:Q(()=>[T(R(Fe),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:Q(()=>[(l(!0),r(I,null,O(C(u),(B,P)=>(l(),L(R(Be),{key:P,class:A(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",b.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:Q(({selected:$})=>[U(k(B),1)]),_:2},1032,["class"]))),128))]),_:2},1024),T(R(Me),null,{default:Q(()=>[(l(!0),r(I,null,O(C(u),(B,P)=>(l(),L(R(Pe),{key:P},{default:Q(()=>[T(re,{fields:u.fields,modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=$=>a.value=$)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):u.section_type==="Accordion"?(l(),L(R(Ue),{key:1},{default:Q(({open:B})=>[T(R(De),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:Q(()=>[e("span",null,k(u.section_title),1),T(R(ze),{class:A([B?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),T(R(Te),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:Q(()=>[T(re,{fields:u.fields,modelValue:a.value,"onUpdate:modelValue":_[1]||(_[1]=P=>a.value=P)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(l(),r("div",co,[T(re,{fields:u.fields,modelValue:a.value,"onUpdate:modelValue":_[2]||(_[2]=B=>a.value=B)},null,8,["fields","modelValue"])]))])]))),128))])]))}},ko=le(mo,[["__scopeId","data-v-aac49f57"]]);export{ko as default};
//# sourceMappingURL=DynamicStepRenderer-CbYO0QNF.js.map
