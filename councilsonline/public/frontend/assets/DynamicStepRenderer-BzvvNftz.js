var me=Object.defineProperty,pe=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ne=(t,f,n)=>f in t?me(t,f,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[f]=n,K=(t,f)=>{for(var n in f||(f={}))fe.call(f,n)&&ne(t,n,f[n]);if(re)for(var n of re(f))ge.call(f,n)&&ne(t,n,f[n]);return t},se=(t,f)=>pe(t,ve(f));var J=(t,f,n)=>new Promise((x,o)=>{var C=v=>{try{u(n.next(v))}catch(k){o(k)}},w=v=>{try{u(n.throw(v))}catch(k){o(k)}},u=v=>v.done?x(v.value):Promise.resolve(v.value).then(C,w);u((n=n.apply(t,f)).next())});import{u as be,i as ye,a as he,b as xe}from"./NewRequest-Bt7mm89I.js";import{a as r,o as a,b as e,B as P,c as T,e as _,O as A,a2 as D,t as h,n as U,aj as ue,Q as ke,R as j,P as H,F as L,W as R,au as _e,_ as we,T as $e,D as ce,w as W,a6 as O,ak as Z,ae as X,at as Ve,r as ie,ag as Ce,u as E}from"./vue-vendor-B0shnPjy.js";import{k as te,a as de,D as Se}from"./frappe-ui-D6fYUZUl.js";import{p as qe,x as Be,I as Me,y as Fe,m as je,Q as Pe,V as De,N as Te}from"./ui-components-CzNebsXy.js";import"./request.service--9QsRanG.js";import"./index-By0qKa6K.js";import"./RequestHeader-CFcOgVuT.js";function Ue(t,f){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const ze={class:"space-y-4"},Ae={class:"block"},Ee={class:"text-sm font-medium text-gray-900"},Le={key:0,class:"text-red-500"},Re={key:0,class:"text-xs text-gray-500 mt-1"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Oe=["disabled"],Ne=["disabled"],He={class:"text-center"},Je={class:"text-xs text-gray-500"},Qe=["accept","multiple"],Ge={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ke={class:"flex items-center space-x-3"},We={class:"flex-1"},Xe={class:"mt-1 w-full bg-blue-200 rounded-full h-2"},Ye={key:1,class:"space-y-2"},Ze={class:"flex items-center space-x-3 flex-1 min-w-0"},et={class:"flex-shrink-0"},tt={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border-2 border-green-300"},lt=["src","alt"],at={key:1,class:"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center"},ot={class:"flex-1 min-w-0"},rt={class:"text-sm font-medium text-gray-900 truncate"},nt={class:"text-xs text-gray-500"},st=["onClick"],it={class:"bg-white rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl"},dt={class:"relative bg-black aspect-video"},ut=["src"],ct={key:2,class:"absolute inset-0 pointer-events-none"},mt={class:"w-full h-full grid grid-cols-3 grid-rows-3"},pt={class:"bg-gray-900 px-6 py-6"},vt={key:0,class:"flex items-center justify-center space-x-6"},ft={key:1,class:"flex items-center justify-center space-x-4"},gt={__name:"CameraUpload",props:{label:{type:String,required:!0},helpText:{type:String,default:""},modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*,.pdf"},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},allowCamera:{type:Boolean,default:!0},maxSize:{type:Number,default:20*1024*1024}},emits:["update:modelValue","upload"],setup(t,{emit:f}){const n=t,x=f,o=P(null),C=P(null),w=P(!1),u=P(null),v=P(null),k=P(!1),q=P(0),M=T({get:()=>n.modelValue,set:$=>x("update:modelValue",$)}),g=()=>{var $;($=o.value)==null||$.click()},y=$=>J(this,null,function*(){const c=Array.from($.target.files);yield S(c),$.target.value=""}),S=$=>J(this,null,function*(){const c=[];for(const B of $){if(B.size>n.maxSize){alert(`File ${B.name} exceeds maximum size of ${G(n.maxSize)}`);continue}let b=null;B.type.startsWith("image/")&&(b=yield d(B)),c.push({file:B,name:B.name,size:B.size,type:B.type,preview:b,uploadDate:new Date().toISOString()})}if(c.length>0){const B=n.multiple?[...M.value,...c]:c;x("update:modelValue",B),yield V(c)}}),d=$=>new Promise(c=>{const B=new FileReader;B.onload=b=>c(b.target.result),B.onerror=()=>c(null),B.readAsDataURL($)}),V=$=>J(this,null,function*(){k.value=!0,q.value=0;try{for(let c=0;c<$.length;c++){const B=$[c],b=setInterval(()=>{q.value=Math.min(q.value+10,90)},100);yield new Promise(m=>{x("upload",B,m)}),clearInterval(b),q.value=(c+1)/$.length*100}}catch(c){console.error("Upload error:",c),alert("Failed to upload files. Please try again.")}finally{k.value=!1,q.value=0}}),Q=$=>{const c=[...M.value];c.splice($,1),x("update:modelValue",c)},p=()=>J(this,null,function*(){try{w.value=!0,yield s()}catch($){console.error("Camera error:",$),alert("Unable to access camera. Please check permissions or upload a file instead."),w.value=!1}}),s=()=>J(this,null,function*(){try{const $=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});v.value=$,C.value&&(C.value.srcObject=$)}catch($){throw $}}),l=()=>{const $=C.value,c=document.createElement("canvas");c.width=$.videoWidth,c.height=$.videoHeight,c.getContext("2d").drawImage($,0,0,c.width,c.height),u.value=c.toDataURL("image/jpeg",.9)},i=()=>{u.value=null},z=()=>J(this,null,function*(){if(!u.value)return;const $=yield(yield fetch(u.value)).blob(),c=new File([$],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});yield S([c]),I()}),I=()=>{v.value&&(v.value.getTracks().forEach($=>$.stop()),v.value=null),u.value=null,w.value=!1},G=$=>{if($===0)return"0 Bytes";const c=1024,B=["Bytes","KB","MB","GB"],b=Math.floor(Math.log($)/Math.log(c));return Math.round($/Math.pow(c,b)*100)/100+" "+B[b]};return($,c)=>(a(),r("div",ze,[e("label",Ae,[e("span",Ee,[D(h(t.label)+" ",1),t.required?(a(),r("span",Le,"*")):_("",!0)]),t.helpText?(a(),r("p",Re,h(t.helpText),1)):_("",!0)]),e("div",Ie,[t.allowCamera?(a(),r("button",{key:0,onClick:p,type:"button",class:U(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":k.value}]),disabled:k.value},[...c[0]||(c[0]=[ue('<div class="text-center" data-v-2b18513c><svg class="mx-auto h-10 w-10 text-blue-500 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2b18513c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-2b18513c></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-2b18513c></path></svg><p class="mt-2 text-sm font-medium text-blue-600 group-hover:text-blue-700" data-v-2b18513c>Take Photo</p><p class="text-xs text-gray-500" data-v-2b18513c>Use camera</p></div>',1)])],10,Oe)):_("",!0),e("button",{onClick:g,type:"button",class:U(["relative flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",{"opacity-50 cursor-not-allowed":k.value}]),disabled:k.value},[e("div",He,[c[1]||(c[1]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),c[2]||(c[2]=e("p",{class:"mt-2 text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Upload File",-1)),e("p",Je,"Browse "+h(t.multiple?"files":"file"),1)]),e("input",{ref_key:"fileInput",ref:o,type:"file",accept:t.accept,multiple:t.multiple,onChange:y,class:"hidden"},null,40,Qe)],10,Ne)]),k.value?(a(),r("div",Ge,[e("div",Ke,[c[4]||(c[4]=e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("div",We,[c[3]||(c[3]=e("p",{class:"text-sm font-medium text-blue-900"},"Uploading...",-1)),e("div",Xe,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:ke({width:q.value+"%"})},null,4)])])])])):_("",!0),M.value.length>0?(a(),r("div",Ye,[j(_e,{name:"list"},{default:H(()=>[(a(!0),r(L,null,R(M.value,(B,b)=>(a(),r("div",{key:B.name+b,class:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg group hover:bg-green-100 transition-colors"},[e("div",Ze,[e("div",et,[B.preview?(a(),r("div",tt,[e("img",{src:B.preview,alt:B.name,class:"w-full h-full object-cover"},null,8,lt)])):(a(),r("div",at,[...c[5]||(c[5]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",ot,[e("p",rt,h(B.name),1),e("p",nt,h(G(B.size)),1)]),e("button",{onClick:m=>Q(b),type:"button",class:"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Remove"},[...c[6]||(c[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,st)])]))),128))]),_:1})])):_("",!0),(a(),A($e,{to:"body"},[w.value?(a(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:we(I,["self"])},[e("div",it,[e("div",{class:"bg-gray-900 px-6 py-4 flex items-center justify-between"},[c[8]||(c[8]=e("h3",{class:"text-white font-semibold text-lg"},"Take Photo",-1)),e("button",{onClick:I,class:"text-gray-400 hover:text-white transition-colors"},[...c[7]||(c[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",dt,[u.value?(a(),r("img",{key:1,src:u.value,alt:"Captured",class:"w-full h-full object-contain"},null,8,ut)):(a(),r("video",{key:0,ref_key:"videoElement",ref:C,autoplay:"",playsinline:"",class:"w-full h-full object-contain"},null,512)),u.value?_("",!0):(a(),r("div",ct,[e("div",mt,[(a(),r(L,null,R(9,B=>e("div",{key:B,class:"border border-white/20"})),64))])]))]),e("div",pt,[u.value?(a(),r("div",ft,[e("button",{onClick:i,type:"button",class:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Retake "),e("button",{onClick:z,type:"button",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Use Photo ")])):(a(),r("div",vt,[e("button",{onClick:l,type:"button",class:"w-16 h-16 rounded-full bg-white border-4 border-gray-700 hover:border-blue-500 transition-all flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...c[9]||(c[9]=[e("div",{class:"w-12 h-12 rounded-full bg-blue-500"},null,-1)])])]))])])])):_("",!0)]))]))}},bt=te(gt,[["__scopeId","data-v-2b18513c"]]),yt={class:"space-y-4"},ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xt={class:"block text-sm font-medium text-gray-700 mb-2"},kt={key:0,class:"text-red-500"},_t={class:"relative"},wt=["required"],$t=["value"],Vt={class:"block text-sm font-medium text-gray-700 mb-2"},Ct={key:0,class:"text-red-500"},St={class:"relative"},qt=["required","disabled"],Bt=["value"],Mt={key:0,class:"mt-1 text-xs text-gray-500"},Ft={class:"block text-sm font-medium text-gray-700 mb-2"},jt={key:0,class:"text-red-500"},Pt={class:"relative"},Dt=["required","disabled"],Tt=["value"],Ut={key:0,class:"mt-1 text-xs text-gray-500"},zt={class:"block text-sm font-medium text-gray-700 mb-2"},At={key:0,class:"text-red-500"},Et=["required"],Lt={class:"md:col-span-2"},Rt={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},It={class:"flex items-start"},Ot={class:"flex-1"},Nt={class:"text-sm text-green-700 mt-1"},Ht={__name:"PhilippinesAddressInput",props:{modelValue:{type:[String,Object],default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:f}){const n=t,x=f,o=P({street:"",barangay:"",municipality:"",province:"",zipCode:""}),C=["Metro Manila","Rizal","Cavite","Laguna","Bulacan","Pampanga","Batangas","Quezon","Cebu","Davao del Sur","Benguet","Iloilo","Negros Occidental","Pangasinan","Albay"],w={"Metro Manila":["Manila City","Quezon City","Makati City","Pasig City","Taguig City","Mandaluyong City","Pasay City","Parañaque City","Las Piñas City","Muntinlupa City","Caloocan City","Malabon City","Navotas City","Valenzuela City","Marikina City","San Juan City","Pateros"],Rizal:["Taytay","Antipolo City","Cainta","Binangonan","San Mateo","Rodriguez (Montalban)","Angono","Cardona","Jalajala","Morong","Pililla","Tanay","Teresa","Baras"],Cavite:["Bacoor City","Cavite City","Dasmarinas City","Imus City","Tagaytay City","Trece Martires City","General Trias","Silang","Kawit","Noveleta","Rosario","Tanza","Naic"]},u={Taytay:["Dolores","San Juan","Muzon","San Isidro","Sta. Ana","Poblacion","Bagumbayan","Bamban","Calumpang","Dalig","Dolores","San Juan","Muzon"],"Manila City":["Ermita","Intramuros","Malate","Paco","Pandacan","Port Area","Quiapo","Sampaloc","San Andres","San Miguel","San Nicolas","Santa Ana","Santa Cruz","Santa Mesa","Tondo"],"Quezon City":["Bagong Pag-asa","Bahay Toro","Batasan Hills","Commonwealth","Cubao","Fairview","Kamuning","Novaliches","Project 4","Tatalon","Teacher's Village"]},v=T(()=>o.value.province?w[o.value.province]||[]:[]),k=T(()=>o.value.municipality?u[o.value.municipality]||["Other - Please specify in Street field"]:[]),q=T(()=>{const S=[];return o.value.street&&S.push(o.value.street),o.value.barangay&&S.push(`Brgy. ${o.value.barangay}`),o.value.municipality&&S.push(o.value.municipality),o.value.province&&S.push(o.value.province),o.value.zipCode&&S.push(o.value.zipCode),S.length>0?S.join(", "):""}),M=()=>{o.value.municipality="",o.value.barangay="",y()},g=()=>{o.value.barangay="",y()},y=()=>{x("update:modelValue",{full_address:q.value,address_line:o.value.street,barangay:o.value.barangay,municipality:o.value.municipality,province:o.value.province,zip_code:o.value.zipCode})};return ce(()=>{var S;if(n.modelValue)if(typeof n.modelValue=="string"){const d=n.modelValue.split(",").map(V=>V.trim());d.length>=3&&(o.value.street=d[0]||"",o.value.barangay=((S=d[1])==null?void 0:S.replace("Brgy. ",""))||"",o.value.municipality=d[2]||"",o.value.province=d[3]||"",o.value.zipCode=d[4]||"")}else typeof n.modelValue=="object"&&(o.value=K(K({},o.value),n.modelValue))}),W(()=>n.modelValue,S=>{S&&typeof S=="object"&&(o.value=K(K({},o.value),S))}),(S,d)=>(a(),r("div",yt,[d[18]||(d[18]=ue('<div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200"><div class="flex items-start"><svg class="h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="flex-1"><h3 class="text-sm font-semibold text-blue-900">Residential Address</h3><p class="text-xs text-blue-700 mt-0.5">Please provide your complete address details</p></div></div></div>',1)),e("div",ht,[e("div",null,[e("label",xt,[d[5]||(d[5]=D(" Province ",-1)),t.required?(a(),r("span",kt,"*")):_("",!0)]),e("div",_t,[O(e("select",{"onUpdate:modelValue":d[0]||(d[0]=V=>o.value.province=V),onChange:M,required:t.required,class:U(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all",{"border-blue-500 ring-2 ring-blue-100":o.value.province}])},[d[6]||(d[6]=e("option",{value:""},"Select Province",-1)),(a(),r(L,null,R(C,V=>e("option",{key:V,value:V},h(V),9,$t)),64))],42,wt),[[Z,o.value.province]]),d[7]||(d[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",Vt,[d[8]||(d[8]=D(" Municipality/City ",-1)),t.required?(a(),r("span",Ct,"*")):_("",!0)]),e("div",St,[O(e("select",{"onUpdate:modelValue":d[1]||(d[1]=V=>o.value.municipality=V),onChange:g,required:t.required,disabled:!o.value.province,class:U(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":o.value.municipality}])},[d[9]||(d[9]=e("option",{value:""},"Select Municipality/City",-1)),(a(!0),r(L,null,R(v.value,V=>(a(),r("option",{key:V,value:V},h(V),9,Bt))),128))],42,qt),[[Z,o.value.municipality]]),d[10]||(d[10]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),o.value.province?_("",!0):(a(),r("p",Mt,"Select province first"))]),e("div",null,[e("label",Ft,[d[11]||(d[11]=D(" Barangay ",-1)),t.required?(a(),r("span",jt,"*")):_("",!0)]),e("div",Pt,[O(e("select",{"onUpdate:modelValue":d[2]||(d[2]=V=>o.value.barangay=V),onChange:y,required:t.required,disabled:!o.value.municipality,class:U(["block w-full pl-3 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-blue-500 ring-2 ring-blue-100":o.value.barangay}])},[d[12]||(d[12]=e("option",{value:""},"Select Barangay",-1)),(a(!0),r(L,null,R(k.value,V=>(a(),r("option",{key:V,value:V},h(V),9,Tt))),128))],42,Dt),[[Z,o.value.barangay]]),d[13]||(d[13]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),o.value.municipality?_("",!0):(a(),r("p",Ut,"Select municipality first"))]),e("div",null,[e("label",zt,[d[14]||(d[14]=D(" Street / House No. ",-1)),t.required?(a(),r("span",At,"*")):_("",!0)]),O(e("input",{"onUpdate:modelValue":d[3]||(d[3]=V=>o.value.street=V),onInput:y,type:"text",required:t.required,placeholder:"e.g., 123 Main Street, Blk 5 Lot 10",class:U(["block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":o.value.street}])},null,42,Et),[[X,o.value.street]])]),e("div",Lt,[d[15]||(d[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[D(" ZIP Code "),e("span",{class:"text-gray-500 text-xs font-normal"},"(Optional)")],-1)),O(e("input",{"onUpdate:modelValue":d[4]||(d[4]=V=>o.value.zipCode=V),onInput:y,type:"text",placeholder:"e.g., 1630",maxlength:"4",class:"block w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all max-w-xs"},null,544),[[X,o.value.zipCode]])])]),q.value?(a(),r("div",Rt,[e("div",It,[d[17]||(d[17]=e("svg",{class:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Ot,[d[16]||(d[16]=e("p",{class:"text-sm font-medium text-green-900"},"Complete Address",-1)),e("p",Nt,h(q.value),1)])])])):_("",!0)]))}},Jt={class:"space-y-4"},Qt={class:"flex items-center justify-between mb-4"},Gt={class:"block text-sm font-medium text-gray-700"},Kt={key:0,class:"text-red-500"},Wt={key:0,class:"space-y-3"},Xt=["value"],Yt={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Zt={class:"flex items-start justify-between"},el={class:"flex-1 space-y-1"},tl={class:"text-sm font-medium text-gray-900"},ll={class:"text-sm text-gray-700"},al={key:0,class:"text-xs text-gray-600"},ol={key:1},rl={key:2,class:"flex items-center space-x-2"},nl={__name:"PropertyAddressSelector",props:{modelValue:{type:Object,default:()=>({})},label:{type:String,default:"Residential Address"},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:f}){const n=t,x=f,{loadUserProfile:o,getAllProperties:C,defaultProperty:w}=be(),u=P(!1),v=P(""),k=P(!1),q=P(n.modelValue||{}),M=T(()=>C.value||[]),g=T(()=>!v.value||v.value==="__new__"?null:M.value.find(s=>s.name===v.value));function y(s){const l=[];return s.property_name&&l.push(s.property_name),s.street&&l.push(s.street),s.suburb&&l.push(s.suburb),s.city&&l.push(s.city),l.join(", ")||"Unnamed Property"}function S(s){const l=[];return s.street&&l.push(s.street),s.barangay&&l.push(`Brgy. ${s.barangay}`),s.municipality&&l.push(s.municipality),s.province&&l.push(s.province),(s.zip_code||s.postcode)&&l.push(s.zip_code||s.postcode),l.join(", ")}function d(){if(v.value==="__new__"){q.value={},u.value=!1;return}g.value&&(q.value={full_address:S(g.value),address_line:g.value.street||"",barangay:g.value.barangay||"",municipality:g.value.municipality||g.value.city||"",province:g.value.province||"",zip_code:g.value.zip_code||g.value.postcode||""},x("update:modelValue",q.value))}function V(s){q.value=s,x("update:modelValue",s)}function Q(){u.value=!1}function p(){confirm("Are you sure you want to remove this property from selection?")&&(v.value="",q.value={},x("update:modelValue",{}))}return ce(()=>J(this,null,function*(){yield o(),(!n.modelValue||Object.keys(n.modelValue).length===0)&&w.value&&(v.value=w.value.name,d()),M.value.length>0&&(u.value=!0)})),W(()=>n.modelValue,s=>{s&&Object.keys(s).length>0&&(q.value=s)},{deep:!0}),(s,l)=>(a(),r("div",Jt,[e("div",Qt,[e("label",Gt,[D(h(t.label)+" ",1),t.required?(a(),r("span",Kt,"*")):_("",!0)]),M.value.length>0?(a(),r("button",{key:0,onClick:l[0]||(l[0]=i=>u.value=!u.value),type:"button",class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},h(u.value?"Enter manually":"Select from my properties"),1)):_("",!0)]),u.value&&M.value.length>0?(a(),r("div",Wt,[O(e("select",{"onUpdate:modelValue":l[1]||(l[1]=i=>v.value=i),onChange:d,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[l[3]||(l[3]=e("option",{value:""},"Select a property",-1)),(a(!0),r(L,null,R(M.value,i=>(a(),r("option",{key:i.name,value:i.name},h(y(i)),9,Xt))),128)),l[4]||(l[4]=e("option",{value:"__new__"},"+ Add New Property",-1))],544),[[Z,v.value]]),g.value&&v.value!=="__new__"?(a(),r("div",Yt,[e("div",Zt,[e("div",el,[e("p",tl,h(g.value.property_name||"Property"),1),e("p",ll,h(S(g.value)),1),g.value.legal_description?(a(),r("p",al,h(g.value.legal_description),1)):_("",!0)]),e("div",{class:"flex space-x-2"},[e("button",{onClick:Q,type:"button",class:"text-sm text-blue-600 hover:text-blue-700",title:"Edit property"},[...l[5]||(l[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),e("button",{onClick:p,type:"button",class:"text-sm text-red-600 hover:text-red-700",title:"Remove property"},[...l[6]||(l[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])])])):_("",!0)])):_("",!0),!u.value||v.value==="__new__"||M.value.length===0?(a(),r("div",ol,[j(Ht,{modelValue:q.value,"onUpdate:modelValue":V,required:t.required},null,8,["modelValue","required"])])):_("",!0),(!u.value||v.value==="__new__")&&!v.value?(a(),r("div",rl,[O(e("input",{"onUpdate:modelValue":l[2]||(l[2]=i=>k.value=i),type:"checkbox",id:"save-property",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Ve,k.value]]),l[7]||(l[7]=e("label",{for:"save-property",class:"text-sm text-gray-700"}," Save this property to my profile for future use ",-1))])):_("",!0)]))}},sl={class:"inline-block relative group"},il={__name:"Tooltip",props:{text:{type:String,default:""},position:{type:String,default:"top",validator:t=>["top","bottom","left","right"].includes(t)}},setup(t){const f=t,n=P(!1),x=T(()=>{switch(f.position){case"top":return"bottom-full left-1/2 -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 -translate-x-1/2 mb-2"}}),o=T(()=>{switch(f.position){case"top":return"tooltip-arrow-bottom";case"bottom":return"tooltip-arrow-top";case"left":return"tooltip-arrow-right";case"right":return"tooltip-arrow-left";default:return"tooltip-arrow-bottom"}});return(C,w)=>(a(),r("div",sl,[ie(C.$slots,"trigger",{},()=>[e("button",{type:"button",class:"inline-flex items-center justify-center w-5 h-5 ml-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors cursor-help",onMouseenter:w[0]||(w[0]=u=>n.value=!0),onMouseleave:w[1]||(w[1]=u=>n.value=!1)},[...w[2]||(w[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],32)],!0),j(Ce,{name:"tooltip"},{default:H(()=>[n.value?(a(),r("div",{key:0,class:U(["absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",x.value]),style:{"max-width":"300px","white-space":"normal"}},[ie(C.$slots,"default",{},()=>[D(h(t.text),1)],!0),e("div",{class:U(["tooltip-arrow",o.value])},null,2)],2)):_("",!0)]),_:3})]))}},dl=te(il,[["__scopeId","data-v-cfd551b3"]]),ul={key:0,class:"mt-1 text-xs text-red-600"},cl={key:1,class:"mt-1 text-xs text-gray-500"},Y={__name:"FieldError",props:{error:{type:String,default:""},description:{type:String,default:""}},setup(t){return(f,n)=>(a(),r("div",null,[t.error?(a(),r("p",ul,h(t.error),1)):t.description?(a(),r("p",cl,h(t.description),1)):_("",!0)]))}},ml={class:"form-group"},pl={class:"flex items-center h-5"},vl=["id","name","checked","required"],fl={class:"ml-3 text-sm"},gl=["for"],bl={key:0,class:"text-red-500 ml-1"},yl={__name:"CheckboxField",props:{field:{type:Object,required:!0},modelValue:{type:Boolean,default:!1},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",ml,[e("div",{class:U(["flex items-start p-4 border rounded-lg hover:border-blue-300 transition-colors",{"border-gray-200":!t.validationError,"border-red-500 bg-red-50":t.validationError}])},[e("div",pl,[e("input",{id:t.field.field_name,name:t.field.field_name,type:"checkbox",checked:t.modelValue,onChange:n[0]||(n[0]=x=>f.$emit("update:modelValue",x.target.checked)),onBlur:n[1]||(n[1]=x=>f.$emit("validate")),required:t.field.is_required,class:"focus:ring-blue-500 h-5 w-5 text-blue-600 border-gray-300 rounded cursor-pointer"},null,40,vl)]),e("div",fl,[e("label",{for:t.field.field_name,class:"font-medium text-gray-700 cursor-pointer"},[D(h(t.field.field_label)+" ",1),t.field.is_required?(a(),r("span",bl,"*")):_("",!0)],8,gl),j(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])])],2)]))}},hl=["for"],xl={key:0,class:"text-red-500 ml-1"},ee={__name:"FieldLabel",props:{fieldName:{type:String,required:!0},label:{type:String,required:!0},required:{type:Boolean,default:!1},helpText:{type:String,default:""}},setup(t){return(f,n)=>(a(),r("label",{for:t.fieldName,class:"block text-sm font-medium text-gray-700 mb-2 flex items-center"},[e("span",null,h(t.label),1),t.required?(a(),r("span",xl,"*")):_("",!0),t.helpText?(a(),A(dl,{key:1,text:t.helpText},null,8,["text"])):_("",!0)],8,hl))}},kl={class:"form-group"},_l={class:"relative"},wl=["id","name","value","required"],$l={__name:"DateField",props:{field:{type:Object,required:!0},modelValue:{type:String,default:""},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",kl,[j(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",_l,[e("input",{id:t.field.field_name,name:t.field.field_name,type:"date",value:t.modelValue,onInput:n[0]||(n[0]=x=>f.$emit("update:modelValue",x.target.value)),onBlur:n[1]||(n[1]=x=>f.$emit("validate")),required:t.field.is_required,class:U(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}])},null,42,wl),n[2]||(n[2]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),j(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Vl={class:"form-group"},Cl={class:"relative"},Sl={key:0,class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},ql=["id","name","value","required","step","placeholder"],Bl={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},ae={__name:"NumberField",props:{field:{type:Object,required:!0},modelValue:{type:Number,default:0},validationError:{type:String,default:""},placeholder:{type:String,default:""},variant:{type:String,default:"int",validator:t=>["int","float","currency"].includes(t)}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",Vl,[j(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",Cl,[t.variant==="currency"?(a(),r("div",Sl,[...n[2]||(n[2]=[e("span",{class:"text-gray-500 text-base font-medium"},"₱",-1)])])):_("",!0),e("input",{id:t.field.field_name,name:t.field.field_name,type:"number",value:t.modelValue,onInput:n[0]||(n[0]=x=>f.$emit("update:modelValue",parseFloat(x.target.value)||0)),onBlur:n[1]||(n[1]=x=>f.$emit("validate")),required:t.field.is_required,step:t.variant==="int"?"1":"0.01",class:U(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"pl-10":t.variant==="currency","border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}]),placeholder:t.variant==="currency"?"0.00":t.placeholder},null,42,ql),t.variant!=="currency"?(a(),r("div",Bl,[...n[3]||(n[3]=[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})],-1)])])):_("",!0)]),j(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Ml={class:"p-6 max-h-[80vh] overflow-y-auto"},Fl={class:"text-lg font-semibold text-gray-900 mb-4"},jl={key:0,class:"text-center py-8"},Pl={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Dl={key:2,class:"space-y-6"},Tl={class:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-48 overflow-y-auto"},Ul=["onClick","disabled"],zl={class:"font-medium"},Al={class:"text-xs opacity-80"},El={class:"text-xs opacity-60"},Ll={key:0,class:"text-sm text-gray-500 mt-2"},Rl={key:0},Il={class:"grid grid-cols-3 sm:grid-cols-4 gap-2 max-h-40 overflow-y-auto"},Ol=["onClick","disabled"],Nl={key:0,class:"text-xs text-gray-500 mt-2"},Hl={key:1},Jl=["disabled"],Ql=["value"],Gl={key:2,class:"bg-gray-50 rounded-lg p-3"},Kl={class:"text-sm text-gray-600"},Wl={key:3},Xl=["disabled"],Yl={key:4,class:"space-y-3"},Zl={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},ea=["disabled"],ta=["disabled"],la=["disabled"],aa={key:5,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},oa={class:"text-sm text-blue-800 space-y-1"},ra={key:6,class:"bg-green-50 border border-green-200 rounded-lg p-4"},na={key:7,class:"bg-red-50 border border-red-200 rounded-lg p-4"},sa={class:"text-sm text-red-800"},ia={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},da=["disabled"],ua=["disabled"],ca={key:0},ma={key:1},pa={__name:"BookSlotModal",props:{show:{type:Boolean,required:!0},teamCode:{type:String,required:!0},appointmentType:{type:String,required:!0},title:{type:String,default:"Book Appointment"},requestId:{type:String,default:null},councilCode:{type:String,default:null},referenceDoctype:{type:String,default:null},referenceName:{type:String,default:null},showPurpose:{type:Boolean,default:!0},showContactFields:{type:Boolean,default:!1},defaultPurpose:{type:String,default:""}},emits:["update:show","booked"],setup(t,{emit:f}){const n=t,x=f,o=T({get:()=>n.show,set:b=>x("update:show",b)}),C=P(""),w=P(null),u=P(""),v=P(""),k=P(""),q=P(""),M=P(""),g=P(!1),y=P(null),S=P(!1),d=de({url:"councilsonline.api.scheduling.get_team_config",auto:!1}),V=de({url:"councilsonline.api.scheduling.get_available_slots",auto:!1});W(()=>n.show,b=>{b&&n.teamCode&&(C.value="",w.value=null,u.value="",v.value=n.defaultPurpose,y.value=null,S.value=!1,d.fetch({team_code:n.teamCode}),V.fetch({team_code:n.teamCode}))}),W(()=>d.data,b=>{var m;b!=null&&b.success&&((m=b.config)!=null&&m.locations)&&(b.config.locations.length===1?u.value=b.config.locations[0]:b.config.default_location&&!u.value&&(u.value=b.config.default_location))});const Q=T(()=>{var b;return!((b=V.data)!=null&&b.success)||!V.data.slots_by_date?[]:Object.values(V.data.slots_by_date)}),p=T(()=>{var m;if(!C.value||!((m=V.data)!=null&&m.success))return[];const b=V.data.slots_by_date[C.value];return(b==null?void 0:b.slots)||[]}),s=T(()=>{var b;return(b=d.data)!=null&&b.success?d.data.config.locations||[]:[]}),l=T(()=>w.value&&u.value),i=b=>`${b.start_display} - ${b.end_display}`,z=b=>{const m=new Date(b),N=m.getDate();return`${m.toLocaleDateString("en-US",{month:"short"})} ${N}`},I=b=>new Date(b).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),G=b=>{C.value=b,w.value=null},$=b=>{w.value=b},c=()=>{g.value||x("update:show",!1)},B=()=>J(this,null,function*(){var b;if(!(!l.value||!w.value)){g.value=!0,y.value=null;try{const N=yield(yield fetch("/api/method/councilsonline.api.scheduling.book_appointment",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token},body:JSON.stringify({team_code:n.teamCode,scheduled_start:w.value.start,scheduled_end:w.value.end,appointment_type:n.appointmentType,location:u.value,purpose:v.value,contact_name:k.value||null,contact_email:q.value||null,contact_phone:M.value||null,reference_doctype:n.referenceDoctype,reference_name:n.referenceName,request_id:n.requestId,council_code:n.councilCode})})).json();(b=N.message)!=null&&b.success?(S.value=!0,y.value=null,x("booked",se(K({},N.message),{slot:w.value,location:u.value})),setTimeout(()=>{c()},2e3)):y.value=N.exc||N._server_messages||"Failed to book appointment"}catch(m){console.error("Book appointment error:",m),y.value="Network error. Please try again."}finally{g.value=!1}}});return(b,m)=>(a(),A(E(Se),{modelValue:o.value,"onUpdate:modelValue":m[5]||(m[5]=N=>o.value=N),options:{size:"lg"}},{body:H(()=>{var N;return[e("div",Ml,[e("h3",Fl,h(t.title),1),E(V).loading||E(d).loading?(a(),r("div",jl,[...m[6]||(m[6]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"text-sm text-gray-600 mt-3"},"Loading available times...",-1)])])):E(V).error||E(d).error?(a(),r("div",Pl,[...m[7]||(m[7]=[e("p",{class:"text-sm text-red-800"},"Failed to load scheduling options. Please try again later.",-1)])])):(N=E(V).data)!=null&&N.success?(a(),r("div",Dl,[e("div",null,[m[8]||(m[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"1. Select a Date",-1)),e("div",Tl,[(a(!0),r(L,null,R(Q.value,F=>(a(),r("button",{key:F.date,onClick:le=>G(F.date),class:U(["px-3 py-2 text-sm rounded-lg border transition-colors text-left",C.value===F.date?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"]),disabled:g.value},[e("div",zl,h(F.day),1),e("div",Al,h(z(F.date)),1),e("div",El,h(F.slots.length)+" slots",1)],10,Ul))),128))]),Q.value.length===0?(a(),r("p",Ll," No available dates found. Please try again later. ")):_("",!0)]),C.value?(a(),r("div",Rl,[m[9]||(m[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"2. Select a Time",-1)),e("div",Il,[(a(!0),r(L,null,R(p.value,F=>{var le;return a(),r("button",{key:F.start,onClick:mo=>$(F),class:U(["px-3 py-2 text-sm rounded-lg border transition-colors",((le=w.value)==null?void 0:le.start)===F.start?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"]),disabled:g.value},h(F.start_display),11,Ol)}),128))]),w.value?(a(),r("p",Nl," Duration: "+h(w.value.duration_minutes)+" minutes (ends at "+h(w.value.end_display)+") ",1)):_("",!0)])):_("",!0),w.value&&s.value.length>1?(a(),r("div",Hl,[m[11]||(m[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"3. Select Location",-1)),O(e("select",{"onUpdate:modelValue":m[0]||(m[0]=F=>u.value=F),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:g.value},[m[10]||(m[10]=e("option",{value:""},"-- Select location --",-1)),(a(!0),r(L,null,R(s.value,F=>(a(),r("option",{key:F,value:F},h(F),9,Ql))),128))],8,Jl),[[Z,u.value]])])):w.value&&s.value.length===1?(a(),r("div",Gl,[e("p",Kl,[m[12]||(m[12]=e("span",{class:"font-medium"},"Location:",-1)),D(" "+h(s.value[0]),1)])])):_("",!0),t.showPurpose&&w.value?(a(),r("div",Wl,[m[13]||(m[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Purpose / Notes (Optional)",-1)),O(e("textarea",{"onUpdate:modelValue":m[1]||(m[1]=F=>v.value=F),rows:"2",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Any special instructions or notes...",disabled:g.value},null,8,Xl),[[X,v.value]])])):_("",!0),t.showContactFields&&w.value?(a(),r("div",Yl,[m[14]||(m[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Contact Information (Optional)",-1)),e("div",Zl,[O(e("input",{"onUpdate:modelValue":m[2]||(m[2]=F=>k.value=F),type:"text",placeholder:"Name",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:g.value},null,8,ea),[[X,k.value]]),O(e("input",{"onUpdate:modelValue":m[3]||(m[3]=F=>q.value=F),type:"email",placeholder:"Email",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:g.value},null,8,ta),[[X,q.value]]),O(e("input",{"onUpdate:modelValue":m[4]||(m[4]=F=>M.value=F),type:"tel",placeholder:"Phone",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:g.value},null,8,la),[[X,M.value]])])])):_("",!0),w.value&&u.value?(a(),r("div",aa,[m[19]||(m[19]=e("h4",{class:"text-sm font-semibold text-blue-900 mb-2"},"Appointment Summary",-1)),e("div",oa,[e("p",null,[m[15]||(m[15]=e("span",{class:"font-medium"},"Date:",-1)),D(" "+h(I(C.value)),1)]),e("p",null,[m[16]||(m[16]=e("span",{class:"font-medium"},"Time:",-1)),D(" "+h(i(w.value)),1)]),e("p",null,[m[17]||(m[17]=e("span",{class:"font-medium"},"Location:",-1)),D(" "+h(u.value),1)]),e("p",null,[m[18]||(m[18]=e("span",{class:"font-medium"},"Duration:",-1)),D(" "+h(w.value.duration_minutes)+" minutes",1)])])])):_("",!0),S.value?(a(),r("div",ra,[...m[20]||(m[20]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("p",{class:"text-sm text-green-800 font-medium"},"Appointment booked successfully!")],-1)])])):_("",!0),y.value?(a(),r("div",na,[e("p",sa,h(y.value),1)])):_("",!0),e("div",ia,[e("button",{onClick:c,disabled:g.value,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}," Cancel ",8,da),e("button",{onClick:B,disabled:!l.value||g.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[g.value?(a(),r("span",ca,"Booking...")):(a(),r("span",ma,"Book Appointment"))],8,ua)])])):_("",!0)])]}),_:1},8,["modelValue"]))}},va=["data-fieldname"],fa={class:"block text-sm font-medium text-gray-700 mb-2"},ga={key:0,class:"text-red-500 ml-1"},ba={key:0,class:"space-y-3"},ya={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},ha={class:"flex items-start justify-between"},xa={class:"flex items-start space-x-3"},ka={key:0,class:"text-xs text-green-700 mb-1"},_a={class:"text-sm text-green-800"},wa={class:"font-medium"},$a={class:"text-sm text-green-800"},Va={key:1,class:"text-sm text-green-800"},Ca={key:2,class:"mt-2 text-sm text-red-600"},Sa={__name:"PickupScheduleField",props:{field:{type:Object,required:!0},modelValue:{type:Object,default:()=>({})},teamCode:{type:String,default:"PAYMENTS"},appointmentType:{type:String,default:"Pickup"},councilCode:{type:String,default:null},requestId:{type:String,default:null},validationError:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t,{emit:f}){const n=t,x=f,o=P(!1),C=T({get:()=>n.modelValue||{},set:g=>x("update:modelValue",g)}),w=T(()=>{var g,y;return((g=C.value)==null?void 0:g.appointment_id)||((y=C.value)==null?void 0:y.scheduled_start)}),u=T(()=>{var y;return(y=C.value)!=null&&y.scheduled_start?new Date(C.value.scheduled_start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""}),v=T(()=>{var d;if(!((d=C.value)!=null&&d.scheduled_start))return"";const g=new Date(C.value.scheduled_start),y=C.value.scheduled_end?new Date(C.value.scheduled_end):null,S=g.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});if(y){const V=y.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${S} - ${V}`}return S}),k=()=>{o.value=!0},q=g=>{C.value={appointment_id:g.appointment_id,scheduled_start:g.scheduled_start,scheduled_end:g.scheduled_end,location:g.location,status:g.status},x("validate")},M=()=>{C.value={},x("validate")};return(g,y)=>(a(),r("div",{class:"form-group","data-fieldname":t.field.field_name},[e("label",fa,[D(h(t.field.field_label)+" ",1),t.field.is_required?(a(),r("span",ga,"*")):_("",!0)]),w.value?(a(),r("div",ya,[e("div",ha,[e("div",xa,[y[6]||(y[6]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[y[5]||(y[5]=e("p",{class:"text-sm font-medium text-green-900"},"Pickup Scheduled",-1)),C.value.appointment_id?(a(),r("p",ka," Ref: "+h(C.value.appointment_id),1)):_("",!0),e("p",_a,[e("span",wa,h(u.value),1)]),e("p",$a,[y[3]||(y[3]=e("span",{class:"font-medium"},"Time:",-1)),D(" "+h(v.value),1)]),C.value.location?(a(),r("p",Va,[y[4]||(y[4]=e("span",{class:"font-medium"},"Location:",-1)),D(" "+h(C.value.location),1)])):_("",!0)])]),e("button",{type:"button",onClick:M,class:"text-sm text-green-700 hover:text-green-900 underline"}," Reschedule ")])])):(a(),r("div",ba,[y[2]||(y[2]=e("p",{class:"text-sm text-gray-600"}," Please schedule a pickup date and time for collecting your payment. ",-1)),e("button",{type:"button",onClick:k,class:"inline-flex items-center px-4 py-2 border border-blue-600 rounded-lg text-sm font-medium text-blue-600 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors"},[...y[1]||(y[1]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),D(" Schedule Pickup Time ",-1)])])])),t.validationError?(a(),r("p",Ca,h(t.validationError),1)):_("",!0),j(pa,{show:o.value,"onUpdate:show":y[0]||(y[0]=S=>o.value=S),"team-code":t.teamCode,"appointment-type":t.appointmentType,"council-code":t.councilCode,"request-id":t.requestId,title:"Schedule Pickup Time","show-purpose":!1,onBooked:q},null,8,["show","team-code","appointment-type","council-code","request-id"])],8,va))}},qa={class:"form-group"},Ba={class:"relative"},Ma=["id","name","value","required"],Fa={value:""},ja=["value"],Pa={__name:"SelectField",props:{field:{type:Object,required:!0},modelValue:{type:[String,Number],default:""},validationError:{type:String,default:""},options:{type:Array,default:()=>[]}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",qa,[j(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",Ba,[e("select",{id:t.field.field_name,name:t.field.field_name,value:t.modelValue,onChange:n[0]||(n[0]=x=>f.$emit("update:modelValue",x.target.value)),onBlur:n[1]||(n[1]=x=>f.$emit("validate")),required:t.field.is_required,class:U(["block w-full pl-4 pr-10 py-3 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all appearance-none bg-white",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}])},[e("option",Fa,"Select "+h(t.field.field_label),1),(a(!0),r(L,null,R(t.options,x=>(a(),r("option",{key:x,value:x},h(x),9,ja))),128))],42,Ma),n[2]||(n[2]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),j(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Da={class:"form-group"},Ta={class:"relative"},Ua=["id","name","value","required","placeholder"],za={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},Aa=["innerHTML"],Ea={__name:"TextField",props:{field:{type:Object,required:!0},modelValue:{type:[String,Number],default:""},validationError:{type:String,default:""},placeholder:{type:String,default:""},icon:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",Da,[j(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("div",Ta,[e("input",{id:t.field.field_name,name:t.field.field_name,type:"text",value:t.modelValue,onInput:n[0]||(n[0]=x=>f.$emit("update:modelValue",x.target.value)),onBlur:n[1]||(n[1]=x=>f.$emit("validate")),required:t.field.is_required,class:U(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}]),placeholder:t.placeholder},null,42,Ua),t.icon?(a(),r("div",za,[e("span",{innerHTML:t.icon,class:"text-gray-400"},null,8,Aa)])):_("",!0)]),j(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},La={class:"form-group"},Ra=["id","name","value","required","placeholder"],Ia={__name:"TextareaField",props:{field:{type:Object,required:!0},modelValue:{type:String,default:""},validationError:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue","validate"],setup(t){return(f,n)=>(a(),r("div",La,[j(ee,{"field-name":t.field.field_name,label:t.field.field_label,required:!!t.field.is_required,"help-text":t.field.help_text||t.field.description},null,8,["field-name","label","required","help-text"]),e("textarea",{id:t.field.field_name,name:t.field.field_name,value:t.modelValue,onInput:n[0]||(n[0]=x=>f.$emit("update:modelValue",x.target.value)),onBlur:n[1]||(n[1]=x=>f.$emit("validate")),required:t.field.is_required,rows:"4",class:U(["block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-y",{"border-blue-500 ring-2 ring-blue-100":t.modelValue&&!t.validationError,"border-red-500 ring-2 ring-red-100":t.validationError}]),placeholder:t.placeholder},null,42,Ra),j(Y,{error:t.validationError,description:t.field.description},null,8,["error","description"])]))}},Oa={class:"space-y-6"},Na={key:0,class:"form-group"},Ha={key:9,class:"form-group"},Ja={key:11,class:"form-group"},Qa={class:"text-sm text-gray-500 italic"},Ga={__name:"DynamicFieldRenderer",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:f}){const n=t,x=f,o=T({get:()=>n.modelValue,set:p=>x("update:modelValue",p)}),C=T(()=>n.fields.filter(p=>{var I;const s=((I=p.parent_section_code)==null?void 0:I.toLowerCase())||"",i=["address","residential_address","permanent_address","property_address","current_address","home_address"].includes(s),z=["barangay","municipality","province","city","region","zip_code","postal_code"];return i&&n.fields.some($=>$.parent_section_code===p.parent_section_code&&$.field_name==="address_line")&&z.includes(p.field_name)?!1:ye(p,o.value)})),w=p=>{var $,c,B;const s=(($=p.field_name)==null?void 0:$.toLowerCase())||"",l=((c=p.field_label)==null?void 0:c.toLowerCase())||"",i=((B=p.parent_section_code)==null?void 0:B.toLowerCase())||"",z=["address_line","street","residential_address","property_address","home_address","current_address","permanent_address"],I=["address","residential_address","permanent_address","property_address","current_address","home_address"],G=["residential address","property address","home address","current address","permanent address","street / house number","street address"];return z.includes(s)&&p.field_type==="Data"||I.includes(i)&&(s==="address_line"||s==="street")&&p.field_type==="Data"||G.some(b=>l.includes(b))&&p.field_type==="Data"&&!l.includes("zip")&&!l.includes("postal")},u=p=>{var l;if(p.placeholder)return p.placeholder;const s=((l=p.field_label)==null?void 0:l.toLowerCase())||"";return s.includes("name")?"e.g., Juan Dela Cruz":s.includes("email")?"e.g., juan@example.com":s.includes("phone")||s.includes("mobile")||s.includes("contact")?"e.g., 0917 123 4567":s.includes("age")?"e.g., 25":s.includes("occupation")?"e.g., Teacher":s.includes("income")||s.includes("salary")?"e.g., 15000":`Enter ${p.field_label}`},v=p=>{var l;const s=((l=p.field_label)==null?void 0:l.toLowerCase())||"";return s.includes("email")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>':s.includes("phone")||s.includes("mobile")||s.includes("contact")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>':s.includes("name")?'<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>':null},k=p=>p?p.split(`
`).map(s=>s.trim()).filter(Boolean):[],{errors:q,validateConfigField:M,clearFieldError:g}=he(),y=p=>{if(!p.validation&&!p.is_required){g(p.field_name);return}const s=o.value[p.field_name];M(p.field_name,s,p,o.value)},S=p=>q.value[p]||"",d=p=>{const s=o.value[p];return Array.isArray(s)?s:s?typeof s=="string"?[{file_url:s,name:s.split("/").pop(),preview:s}]:[]:[]},V=(p,s)=>{if(console.log("[DynamicFieldRenderer] updateFileField called:",p,s),Array.isArray(s)&&s.length>0){const l=s.filter(i=>i.file_url);if(l.length>0){const i=l[0].file_url;console.log("[DynamicFieldRenderer] Converting uploaded file to URL:",i),o.value[p]=i;return}}o.value[p]=s},Q=(p,s)=>J(this,null,function*(){console.log("[DynamicFieldRenderer] handleFileUploadToFrappe called with:",p);try{console.log("[DynamicFieldRenderer] Starting file upload:",p.name);const l=new FormData;l.append("file",p.file),l.append("is_private","0"),l.append("folder","Home/Attachments"),console.log("[DynamicFieldRenderer] Uploading to /api/method/upload_file...");const i=yield fetch("/api/method/upload_file",{method:"POST",credentials:"include",headers:{"X-Frappe-CSRF-Token":window.csrf_token},body:l});if(console.log("[DynamicFieldRenderer] Upload response status:",i.status),!i.ok){const I=yield i.text();throw console.error("[DynamicFieldRenderer] Upload failed:",I),new Error(`Upload failed (${i.status}): ${I}`)}const z=yield i.json();console.log("[DynamicFieldRenderer] Upload response:",z),z.message&&z.message.file_url&&(console.log("[DynamicFieldRenderer] File uploaded successfully:",z.message.file_url),p.file_url=z.message.file_url,p.file_name=z.message.file_name,console.log("[DynamicFieldRenderer] Updated fileData:",p)),console.log("[DynamicFieldRenderer] Calling resolveCallback()"),s(),console.log("[DynamicFieldRenderer] File upload completed successfully")}catch(l){console.error("[DynamicFieldRenderer] File upload error:",l),alert(`Failed to upload file: ${l.message}`),console.log("[DynamicFieldRenderer] Calling resolveCallback() after error"),s()}});return W(()=>o.value,p=>{Object.entries(p).forEach(([s,l])=>{if(Array.isArray(l)&&l.length>0&&l[0].file_url){const i=l.map(z=>z.file_url).filter(Boolean);i.length>0&&(o.value[s]=i.length===1?i[0]:i,console.log(`[DynamicFieldRenderer] Converted file array to URL for ${s}:`,o.value[s]))}})},{deep:!0}),W(()=>n.fields,p=>{p.forEach(s=>{s.default_value&&!o.value[s.field_name]&&(s.default_value==="Today"&&s.field_type==="Date"?o.value[s.field_name]=new Date().toISOString().split("T")[0]:o.value[s.field_name]=s.default_value)})},{immediate:!0}),(p,s)=>(a(),r("div",Oa,[(a(!0),r(L,null,R(C.value,l=>(a(),r("div",{key:l.field_name,class:"field-wrapper"},[w(l)?(a(),r("div",Na,[j(nl,{modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,label:l.field_label,required:!!l.is_required},null,8,["modelValue","onUpdate:modelValue","label","required"])])):l.field_type==="Data"?(a(),A(Ea,{key:1,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,"validation-error":S(l.field_name),placeholder:u(l),icon:v(l),onValidate:i=>y(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","icon","onValidate"])):l.field_type==="Select"?(a(),A(Pa,{key:2,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,"validation-error":S(l.field_name),options:k(l.options),onValidate:i=>y(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","options","onValidate"])):l.field_type==="Check"?(a(),A(yl,{key:3,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,"validation-error":S(l.field_name),onValidate:i=>y(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):["Text","Text Editor","Small Text","Long Text"].includes(l.field_type)?(a(),A(Ia,{key:4,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,"validation-error":S(l.field_name),placeholder:u(l),onValidate:i=>y(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):l.field_type==="Date"?(a(),A($l,{key:5,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,"validation-error":S(l.field_name),onValidate:i=>y(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):l.field_type==="Int"?(a(),A(ae,{key:6,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,"validation-error":S(l.field_name),placeholder:u(l),variant:"int",onValidate:i=>y(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):l.field_type==="Float"?(a(),A(ae,{key:7,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,"validation-error":S(l.field_name),placeholder:u(l),variant:"float",onValidate:i=>y(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","placeholder","onValidate"])):l.field_type==="Currency"?(a(),A(ae,{key:8,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,"validation-error":S(l.field_name),variant:"currency",onValidate:i=>y(l)},null,8,["field","modelValue","onUpdate:modelValue","validation-error","onValidate"])):l.field_type==="Attach"||l.field_type==="Attach Image"?(a(),r("div",Ha,[j(bt,{label:l.field_label,required:l.is_required,accept:l.field_type==="Attach Image"?"image/*":"*",multiple:!1,modelValue:d(l.field_name),"onUpdate:modelValue":i=>V(l.field_name,i),onUpload:Q},null,8,["label","required","accept","modelValue","onUpdate:modelValue"])])):l.field_type==="Pickup Schedule"?(a(),A(Sa,{key:10,field:l,modelValue:o.value[l.field_name],"onUpdate:modelValue":i=>o.value[l.field_name]=i,"team-code":l.team_code||"PAYMENTS","appointment-type":l.appointment_type||"Pickup","validation-error":S(l.field_name),onValidate:i=>y(l)},null,8,["field","modelValue","onUpdate:modelValue","team-code","appointment-type","validation-error","onValidate"])):(a(),r("div",Ja,[e("div",Qa,' Field type "'+h(l.field_type)+'" not yet supported for '+h(l.field_label),1)]))]))),128))]))}},oe=te(Ga,[["__scopeId","data-v-e9592afd"]]),Ka={class:"dynamic-step max-w-4xl mx-auto"},Wa={class:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200"},Xa={class:"flex items-start"},Ya={class:"ml-4 flex-1"},Za={class:"text-2xl font-bold text-blue-900"},eo={key:0,class:"mt-2 text-sm text-blue-700"},to={class:"space-y-6"},lo={class:"mb-4 pb-3 border-b-2 border-gray-200"},ao={class:"flex items-center"},oo={class:"text-lg font-semibold text-gray-900"},ro={key:0,class:"text-red-500 ml-1"},no={key:0,class:"text-sm text-gray-600 mt-0.5"},so={key:0,class:"text-xs text-gray-500 mt-2 ml-11"},io={class:"section-content"},uo={key:2,class:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow"},co={__name:"DynamicStepRenderer",props:{stepConfig:{type:Object,required:!0},modelValue:{type:Object,required:!0},stepDescription:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:f}){const n=t,x=f,o=T({get:()=>n.modelValue,set:u=>x("update:modelValue",u)}),C=T(()=>n.stepConfig.sections?n.stepConfig.sections.filter(u=>{if(!u.depends_on)return!0;try{return xe(u,o.value)}catch(v){return console.error(`Error evaluating section visibility for ${u.section_code}:`,v),!0}}):[]),w=u=>[u.section_title];return W(()=>n.stepConfig,u=>{u.sections&&u.sections.forEach(v=>{v.fields.forEach(k=>{if(k.default_value&&!o.value[k.field_name]){const q=K({},o.value);k.default_value==="Today"&&k.field_type==="Date"?q[k.field_name]=new Date().toISOString().split("T")[0]:q[k.field_name]=k.default_value,x("update:modelValue",q)}})})},{immediate:!0,deep:!0}),(u,v)=>(a(),r("div",Ka,[e("div",Wa,[e("div",Xa,[v[3]||(v[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Ya,[e("h2",Za,h(t.stepConfig.step_title),1),t.stepDescription?(a(),r("p",eo,h(t.stepDescription),1)):_("",!0)])])]),e("div",to,[(a(!0),r(L,null,R(C.value,k=>(a(),r("div",{key:k.section_code,class:"section"},[e("div",lo,[e("div",ao,[v[4]||(v[4]=e("div",{class:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",oo,[D(h(k.section_title)+" ",1),k.is_required?(a(),r("span",ro,"*")):_("",!0)]),k.section_description?(a(),r("p",no,h(k.section_description),1)):_("",!0)])]),k.is_required?(a(),r("div",so,[...v[5]||(v[5]=[D(" All fields marked with ",-1),e("span",{class:"text-red-500"},"*",-1),D(" are required ",-1)])])):_("",!0)]),e("div",io,[k.section_type==="Tab"?(a(),A(E(je),{key:0},{default:H(()=>[j(E(qe),{class:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-4"},{default:H(()=>[(a(!0),r(L,null,R(w(k),(q,M)=>(a(),A(E(Be),{key:M,class:U(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",u.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},{default:H(({selected:g})=>[D(h(q),1)]),_:2},1032,["class"]))),128))]),_:2},1024),j(E(Me),null,{default:H(()=>[(a(!0),r(L,null,R(w(k),(q,M)=>(a(),A(E(Fe),{key:M},{default:H(()=>[j(oe,{fields:k.fields,modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=g=>o.value=g)},null,8,["fields","modelValue"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):k.section_type==="Accordion"?(a(),A(E(Te),{key:1},{default:H(({open:q})=>[j(E(Pe),{class:"flex w-full justify-between rounded-lg bg-blue-50 px-4 py-3 text-left text-sm font-medium text-blue-900 hover:bg-blue-100 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75 mb-2"},{default:H(()=>[e("span",null,h(k.section_title),1),j(E(Ue),{class:U([q?"rotate-180 transform":"","h-5 w-5 text-blue-500"])},null,8,["class"])]),_:2},1024),j(E(De),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:H(()=>[j(oe,{fields:k.fields,modelValue:o.value,"onUpdate:modelValue":v[1]||(v[1]=M=>o.value=M)},null,8,["fields","modelValue"])]),_:2},1024)]),_:2},1024)):(a(),r("div",uo,[j(oe,{fields:k.fields,modelValue:o.value,"onUpdate:modelValue":v[2]||(v[2]=q=>o.value=q)},null,8,["fields","modelValue"])]))])]))),128))])]))}},ko=te(co,[["__scopeId","data-v-aac49f57"]]);export{ko as default};
//# sourceMappingURL=DynamicStepRenderer-BzvvNftz.js.map
